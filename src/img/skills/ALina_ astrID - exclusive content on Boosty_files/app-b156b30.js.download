(()=>{"use strict";var e,t,n,r,o,a={98985:(e,t,n)=>{var r=n(32201),o=n(45005);try{(0,r.setLocales)(JSON.parse((0,o.htmlEntitiesDecode)(document.getElementById("app-locales").innerHTML)))}catch(e){console.error("FAILED PARSE APP LOCALES")}n(29643)},29643:(e,t,n)=>{n.r(t),n(31235),n(67789),n(44112),n(96708),n(43105),n(35883),n(67890),n(27233),n(27072),n(49228),n(9949),n(39529),n(73439),n(93244),n(79321),n(34115),n(35734);var r,o,a,i,l,s,c,u,d,f,m,p,h,v,g,y,_,E,b,S,T,I,N,C,w,O,A,P,L,R,k,D,U,B,x,M,F,G,H,W,V,j,z,Y,K,q,X,Q,J,Z,$,ee,te,ne,re,oe,ae,ie,le,se,ce,ue,de,fe,me,pe,he,ve,ge,ye,_e,Ee,be,Se,Te,Ie,Ne,Ce,we,Oe,Ae,Pe,Le,Re,ke,De,Ue,Be,xe,Me,Fe,Ge,He,We,Ve,je,ze,Ye,Ke,qe,Xe,Qe,Je,Ze,$e,et,tt,nt,rt,ot,at,it,lt,st,ct,ut,dt,ft,mt,pt,ht,vt,gt,yt,_t,Et,bt,St,Tt,It,Nt,Ct,wt,Ot,At,Pt,Lt,Rt,kt,Dt,Ut,Bt,xt,Mt,Ft,Gt=n(2784),Ht=n(28316),Wt=n.t(Ht,2),Vt=n(57903),jt=n(39857),zt=n(92454),Yt=n(45005);(Ft=r||(r={})).PAYMENT_YANDEX="PAYMENT_YANDEX",Ft.PAYMENT_QIWI="PAYMENT_QIWI",Ft.PAYMENT_PAYPAL="PAYMENT_PAYPAL",Ft.PAYMENT_CARD_GLOBAL="PAYMENT_CARD_GLOBAL",Ft.PAYOUT_CARD_EUR="PAYOUT_CARD_EUR",Ft.PAYOUT_CARD_UAH="PAYOUT_CARD_UAH",Ft.PAYOUT_CARD_USD="PAYOUT_CARD_USD",Ft.PAYMENT_APPLE_PAY="PAYMENT_APPLE_PAY",Ft.STREAMS="STREAMS",Ft.DIALOGUES="DIALOGUES",Ft.DIALOGUE_BROADCAST="DIALOGUE_BROADCAST",Ft.DIALOGUE_MESSAGE_TEASER="DIALOGUE_MESSAGE_TEASER",Ft.TIP_DONATIONS="TIP_DONATIONS",Ft.DIALOGUE_DONATION="DIALOGUE_DONATION",Ft.THANK_MESSAGE="THANK_MESSAGE",Ft.INVITES="INVITES",Ft.MY_GAMES_SUPPORT="MY_GAMES_SUPPORT",Ft.PUBLICATION_AFTER_PROCESSING_VIDEO="PUBLICATION_AFTER_PROCESSING_VIDEO",Ft.MULTI_CURRENCY="MULTI_CURRENCY",Ft.VK_PLAYER="VK_PLAYER",Ft.PLAYBACK_POSITION_SAVING="PLAYBACK_POSITION_SAVING",Ft.VIDEO_VIEWS_COUNTER="VIDEO_VIEWS_COUNTER",Ft.STREAM_RECORD="STREAM_RECORD",Ft.SHARE_DONATION_LINK="SHARE_DONATION_LINK",Ft.CHAT_USER_STAT="CHAT_USER_STAT",Ft.CHAT_MESSAGES_BATCHING="CHAT_MESSAGES_BATCHING",Ft.CHAT_STORE_LIMIT="CHAT_STORE_LIMIT",Ft.CHAT_ALT_KEY_PAUSE="CHAT_ALT_KEY_PAUSE",Ft.CHAT_USER_COLOR_CONFIG="CHAT_USER_COLOR_CONFIG",Ft.CHAT_MENTIONS="CHAT_MENTIONS",Ft.CHAT_USER_MENTION="CHAT_USER_MENTION",Ft.CHAT_MODERATION_PANEL="CHAT_MODERATION_PANEL",Ft.CHAT_CONTROLS_ON_CLICK="CHAT_CONTROLS_ON_CLICK",Ft.SEARCH_BY_BLOGS="SEARCH_BY_BLOGS",Ft.SEARCH_BY_POSTS="SEARCH_BY_POSTS",Ft.SMILES_AND_BADGES_SETTINGS="SMILES_AND_BADGES_SETTINGS",Ft.SMILES_IN_COMMENTS="SMILES_IN_COMMENTS",Ft.SHOW_NATIVE_APP_BANNER_ANDROID="SHOW_NATIVE_APP_BANNER_ANDROID",Ft.SHOW_NATIVE_APP_BANNER_IOS="SHOW_NATIVE_APP_BANNER_IOS",Ft.SHOW_NATIVE_APP_ADS_IN_SUCCESS_PAYMENT_ANDROID="SHOW_NATIVE_APP_ADS_IN_SUCCESS_PAYMENT_ANDROID",Ft.SHOW_NATIVE_APP_ADS_IN_SUCCESS_PAYMENT_IOS="SHOW_NATIVE_APP_ADS_IN_SUCCESS_PAYMENT_IOS",Ft.SMILE_SUGGEST_WITHOUT_MAXIMAL_LIMIT="SMILE_SUGGEST_WITHOUT_MAXIMAL_LIMIT",Ft.SMILE_SUGGEST="SMILE_SUGGEST",Ft.SMILE_SUGGEST_NAVIGATION="SMILE_SUGGEST_NAVIGATION",Ft.HOLDS_STAT="HOLDS_STAT",Ft.CHAT_SETTINGS="CHAT_SETTINGS",Ft.DISCORD="DISCORD",Ft.TELEGRAM="TELEGRAM",Ft.SETTINGS_PRIVACY_DONATIONS_CHECKBOX="SETTINGS_PRIVACY_DONATIONS_CHECKBOX",Ft.SETTINGS_PROFILE_SHOW_DONATIONS_UNDER_POST="SETTINGS_PROFILE_SHOW_DONATIONS_UNDER_POST",Ft.SETTINGS_STREAM_MODERATION_VISIBILITY="SETTINGS_STREAM_MODERATION_VISIBILITY",Ft.HIDE_CHAT_USER_AVATAR="HIDE_CHAT_USER_AVATAR",Ft.VIDEO_COVER="VIDEO_COVER",Ft.NEW_NOTIFICATION_SETTINGS="NEW_NOTIFICATION_SETTINGS",Ft.BIND_CARD_CURRENCY_SELECTION="BIND_CARD_CURRENCY_SELECTION",Ft.USER_GENERATED_POLLS="USER_GENERATED_POLLS",Ft.LINK_PHONE_TO_PROFILE="LINK_PHONE_TO_PROFILE",Ft.REFERRAL_PROGRAM="REFERRAL_PROGRAM",Ft.LANDING_DONATION_ALERTS="LANDING_DONATION_ALERTS",Ft.CHANNEL_ROLES="CHANNEL_ROLES",Ft.FOUNDER_X_LANDING_PARALLAX="FOUNDER_X_LANDING_PARALLAX",Ft.REFERRAL_PAGE_SHARE_BUTTON="REFERRAL_PAGE_SHARE_BUTTON",Ft.BRAND_PAGE="BRAND_PAGE",Ft.PROMO="PROMO",Ft.TRIAL_BIND_CARD="TRIAL_BIND_CARD",Ft.ADULT_CONTENT="ADULT_CONTENT",Ft.STAT_REPORT_PROCESSING="STAT_REPORT_PROCESSING",Ft.FB_AUTH_DISABLED_DISCLAIMER="FB_AUTH_DISABLED_DISCLAIMER",Ft.MAIN_FEED_SEARCH="MAIN_FEED_SEARCH",(Mt=o||(o={})).LIKE_TOP_COORDS="likeTopCoords",Mt.AUTH="auth",Mt.BANNERS="banners",Mt.CLIENT_ID="_clientId",Mt.HAS_ACCEPTED_COMMON_SETTINGS="hasAcceptedCommonSettings",Mt.HAS_TEASER_HELPER="hasTeaserHelper",Mt.HAS_BLOG_POST_SELECTOR_HELPER="hasBlogPostSelectorHelper",Mt.HAS_STREAM_HELPER="hasStreamHelper",Mt.HAS_RECORD_HELPER="hasRecordHelper",Mt.HAS_MESSAGE_BUTTON_HELPER="hasMessageButtonHelper",Mt.SHOW_BECOME_AUTHOR_POPUP="showBecomeAuthorPopup",Mt.HAS_BLOG_POST_DRAFT_HELPER="hasBlogPostDraftHelper",Mt.IS_USED_TO_BLOG_POST_DRAFTS="isUsedToBlogPostDrafts",Mt.BLOG_POST_DRAFTS="blogPostDrafts",Mt.THEME="theme",Mt.ACCOUNT_HAS_BEEN_DELETED="accountHasBeenDeleted_v2",Mt.PUBLISHER_TEXT_BEFORE_CARET="publisherTextBeforeCaret",Mt.IS_LEGAL_INFO_SEEN="isLegalInfoSeen",function(e){e.ADULT_CONTENT="ADULT_CONTENT",e.AFTER_FOLLOW="AFTER_FOLLOW",e.AUTH_SIGN_IN="AUTH_SIGN_IN",e.AUTH_SIGN_UP="AUTH_SIGN_UP",e.FORGOT_PASSWORD="FORGOT_PASSWORD",e.BADGES_CREATE="BADGES_CREATE",e.BADGES_EDIT="BADGES_EDIT",e.BECOME_AUTHOR="BECOME_AUTHOR",e.BIND_NEW_CARD="BIND_NEW_CARD",e.BUY_GIFT_SUBSCRIPTION="BUY_GIFT_SUBSCRIPTION",e.CANCEL_ACCOUNT_DELETION="CANCEL_ACCOUNT_DELETION",e.CHANGE_PHONE="CHANGE_PHONE",e.CONFIRM="CONFIRM",e.CONTACT_SUPPORT="CONTACT_SUPPORT",e.DELETE_ACCOUNT="DELETE_ACCOUNT",e.DELETE_MESSAGE_CONFIRM="DELETE_MESSAGE_CONFIRM",e.DIALOGS_SETTINGS_PROMO="DIALOGS_SETTINGS_PROMO",e.INFO="INFO",e.MAILING_LIST_FILTER="MAILING_LIST_FILTER",e.MENU="MENU",e.NOTIFICATIONS="NOTIFICATIONS",e.PAYMENT="PAYMENT",e.POST_DONATIONS="POST_DONATIONS",e.PREVIEW_MESSAGE="PREVIEW_MESSAGE",e.PRIVACY_POLICY_UPDATES="PRIVACY_POLICY_UPDATES",e.RSS_LINK_POPUP="RSS_LINK_POPUP",e.SEARCH_BY_BLOGS="SEARCH_BY_BLOGS",e.SEND_GIFT_SUBSCRIPTION="SEND_GIFT_SUBSCRIPTION",e.SEND_MESSAGE_CONFIRM="SEND_MESSAGE_CONFIRM",e.SMILES_CREATE="SMILES_CREATE",e.SMILES_EDIT="SMILES_EDIT",e.SMILE_INFO="SMILE_INFO",e.SUBSCRIPTIONS="SUBSCRIPTIONS",e.SUBSCRIPTION_LEVELS_EXAMPLE="SUBSCRIPTION_LEVELS_EXAMPLE",e.SUBSCRIPTION_LEVEL_REMOVE="SUBSCRIPTION_LEVEL_REMOVE",e.TELEGRAM_CONNECTION="TELEGRAM_CONNECTION",e.UNBIND_CARD_ERROR="UNBIND_CARD_ERROR",e.UNSUBSCRIBE="UNSUBSCRIBE",e.UNSUBSCRIBE_POLL_POPUP="UNSUBSCRIBE_POLL_POPUP",e.UNSUBSCRIBE_RESULT_POPUP="UNSUBSCRIBE_RESULT_POPUP",e.VIDEO_CONTENT="VIDEO_CONTENT",e.REQUEST_ACCESS="REQUEST_ACCESS",e.POLL_DETAILS="POLL_DETAILS",e.POST_ACCESS_SELECTOR="POST_ACCESS_SELECTOR",e.INFO_MESSAGE_POPUP="INFO_MESSAGE_POPUP",e.RENEW_SUBSCRIPTION="RENEW_SUBSCRIPTION"}(a||(a={})),function(e){e.PREVENT_SHOW_APP_BANNER="preventShowAppBanner",e.HAS_CARD_BINDS="hasCardBinds",e.REF_FROM_QUERY="refFromQuery",e.REF_FROM_HEADER="refFromHeader",e.REF_TYPE="refType",e.CAN_VIEW_ADULT_CONTENT="canViewAdultContent"}(i||(i={})),function(e){e[e.unstyled=0]="unstyled",e[e.paragraph=1]="paragraph",e[e["header-one"]=2]="header-one",e[e["header-two"]=3]="header-two",e[e["header-three"]=4]="header-three",e[e["header-four"]=5]="header-four",e[e["header-five"]=6]="header-five",e[e["header-six"]=7]="header-six",e[e["unordered-list-item"]=8]="unordered-list-item",e[e["ordered-list-item"]=9]="ordered-list-item",e[e.blockquote=10]="blockquote",e[e["code-block"]=11]="code-block",e[e.atomic=12]="atomic"}(l||(l={})),function(e){e[e.BOLD=0]="BOLD",e[e.CODE=1]="CODE",e[e.ITALIC=2]="ITALIC",e[e.STRIKETHROUGH=3]="STRIKETHROUGH",e[e.UNDERLINE=4]="UNDERLINE"}(s||(s={})),function(e){e.B="BOLD",e.CODE="CODE",e.I="ITALIC",e.S="STRIKETHROUGH",e.U="UNDERLINE"}(c||(c={})),function(e){e[e.TEXT=0]="TEXT",e[e.TYPE=1]="TYPE",e[e.STYLE_RANGES=2]="STYLE_RANGES"}(u||(u={})),function(e){e[e.STYLE=0]="STYLE",e[e.OFFSET=1]="OFFSET",e[e.LENGTH=2]="LENGTH"}(d||(d={})),function(e){e[e.STYLE=0]="STYLE",e[e.START=1]="START",e[e.END=2]="END"}(f||(f={})),function(e){e.SUBSCRIPTION="subscription",e.FOLLOWING="following",e.WINNER_SELECTION="winner_selection",e.HOSTING="hosting",e.RAIDING="raiding"}(m||(m={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR"}(p||(p={})),function(e){e.WEB="web",e.WEB_MOBILE="web_mobile",e.WEB_WIDGETS="web_widgets",e.WEB_DEV="web_dev",e.WEB_X="web_x",e.WEB_X_MOBILE="web_x_mobile",e.WEB_Y="web_y",e.WEB_Y_MOBILE="web_y_mobile",e.LETTERS_FOUNDER="letters_founder",e.LETTERS_FOUNDER_X="letters_founder_x",e.LETTERS_FOUNDER_Y="letters_founder_y",e.UNSET="unset",e.WEB_VIEW="web_mobile",e.BOOSTY_ANDROID="boosty-android",e.BOOSTY_ANDROID_DEBUG="boosty-android-debug",e.BOOSTY_IOS="boosty-ios",e.BOOSTY_IOS_DEBUG="boosty-ios-debug",e.BOOSTY_LIVE_ANDROID="boosty-live-android",e.BOOSTY_LIVE_ANDROID_DEBUG="boosty-live-android-debug",e.BOOSTY_LIVE_ANDROID_QA="boosty-live-android-qa",e.BOOSTY_LIVE_IOS="boosty-live-ios",e.BOOSTY_LIVE_IOS_DEBUG="boosty-live-ios-debug"}(h||(h={})),function(e){e.FB="fb",e.PHONE="phone",e.EMAIL="email"}(v||(v={})),function(e){e.XXXS="16",e.XXS="20",e.XXS_OVERSIZE="25",e.XS="30",e.XS_PLUS="32",e.XS_OVERSIZE="35",e.S="40",e.S_PLUS="42",e.S_PLUS_EXTRA="46",e.S_OVERSIZE="50",e.S_MAX="55",e.SM="60",e.SM_OVERSIZE="65",e.SMM="70",e.M="75",e.L="80"}(g||(g={})),function(e){e.BLOG_CONTROL="blog_control",e.SUBSCRIPTION="subscription"}(y||(y={})),function(e){e.PODCASTS="podcast",e.VIDEO="video",e.COMICS="comics",e.LITERATURE="literature",e.MUSIC="music",e.GAMES="games",e.COSPLAY="cosplay",e.TRAINING="training",e.COURSES="courses",e.BLOG="blog",e.ANIMATION="animation",e.DRAWING="drawing",e.PHOTO="photo",e.MAGAZINE="magazine",e.ACTOR="actor",e.EVENT="event",e.DIY="diy",e.SOFT="soft",e.MODS="mods"}(_||(_={})),function(e){e.OPEN="open",e.ONLY_SUBSCRIBERS="onlySubscribers",e.SUBSCRIBERS_AND_PRICE="subscribersAndPrice",e.ONLY_PRICE="onlyPrice"}(E||(E={})),function(e){e.BLOG="blog",e.POST="blog_post",e.POST_TEASER="blog_post_teaser",e.ABOUT_AUTHOR="about_author",e.MESSAGE="message",e.MESSAGE_PREVIEW="message_preview",e.DIALOGUE_LIST="dialogue_list",e.EMAIL="email",e.COMMENTS="comments",e.SUBSCRIPTION_LEVEL_ITEM="subscription_level_items",e.BLOG_STREAM_CHAT_MESSAGE="blog_stream_chat_message",e.SEARCH_BY_POSTS="search_by_posts"}(b||(b={})),function(e){e.POST="post",e.STREAM_POST="stream_post",e.STREAM_LAYER="stream_layer"}(S||(S={})),function(e){e.HAS_IMAGE="hasImage",e.HAS_AUDIO_FILE="hasAudioFile",e.HAS_AUDIO="hasAudio",e.HAS_VIDEO_FILE="hasVideoFile",e.HAS_VIDEO="hasVideo",e.HAS_FILE="hasFile"}(T||(T={})),function(e){e.SUCCESS="BoostyCreateBlogSuccess"}(I||(I={})),function(e){e.REQUEST="BoostyLinkRequest",e.APPROVE="BoostyLinkApprove",e.SUCCESS="BoostyLinkSuccess",e.RESIZE="BoostyLinkResize",e.LOADING="BoostyLinkLoading",e.CHANGE_MODE="BoostyLinkChangeMode"}(N||(N={})),function(e){e.IE="IE",e.CHROME="Chrome",e.SAFARI="Safari",e.FIREFOX="Firefox"}(C||(C={})),function(e){e.SMALL="small",e.NORMAL="normal",e.BIG="big",e.LARGE="large"}(w||(w={})),function(e){e.WELCOME="welcome",e.OFFLINE="offline",e.STREAM_STARTED="streamStarted",e.STREAM_ENDED="streamEnded"}(O||(O={})),function(e){e.ANY="canSendAll",e.SUBSCRIBERS="canSendPaidSubscribers",e.LEVEL="sendMsgLevelId",e.DONATER="canSendDonation",e.FREE="canSendSubscribers",e.NONE="canSendMyAuthors"}(A||(A={})),function(e){e.AUTH="auth",e.CLIENT_ID="_clientId",e.HAS_STREAM_HELPER="hasStreamHelper",e.LIKE_TOP_COORDS="likeTopCoords",e.THEME="theme",e.BANNERS="banners",e.PUBLISHER_TEXT_BEFORE_CARET="publisherTextBeforeCaret",e.APP_PLAYER_PREFER_VOLUME_MUTE="appPlayerPreferVolumeMute"}(P||(P={})),function(e){e.REF_FROM_HEADER="refFromHeader",e.REF_TYPE="refType",e.HAS_CARD_BINDS="hasCardBinds",e.DATA_TO_KEEP="dataToKeep"}(L||(L={})),function(e){e.PAYMENT_YANDEX="PAYMENT_YANDEX",e.PAYMENT_QIWI="PAYMENT_QIWI",e.PAYMENT_PAYPAL="PAYMENT_PAYPAL",e.PAYMENT_CARD_GLOBAL="PAYMENT_CARD_GLOBAL",e.PAYOUT_CARD_EUR="PAYOUT_CARD_EUR",e.PAYOUT_CARD_UAH="PAYOUT_CARD_UAH",e.PAYOUT_CARD_USD="PAYOUT_CARD_USD",e.PAYMENT_APPLE_PAY="PAYMENT_APPLE_PAY",e.INVITES="INVITES",e.MY_GAMES_SUPPORT="MY_GAMES_SUPPORT",e.MULTI_CURRENCY="MULTI_CURRENCY",e.BOOSTY_LINK="BOOSTY_LINK",e.SMILES_AND_BADGES_SETTINGS="SMILES_AND_BADGES_SETTINGS",e.SMILES_IN_COMMENTS="SMILES_IN_COMMENTS",e.VK_PLAYER="VK_PLAYER",e.PLAYBACK_POSITION_SAVING="PLAYBACK_POSITION_SAVING",e.VIDEO_VIEWS_COUNTER="VIDEO_VIEWS_COUNTER",e.STREAM_RECORD="STREAM_RECORD",e.CHAT_USERS_LIST="CHAT_USERS_LIST",e.CHAT_USER_STAT="CHAT_USER_STAT",e.CHAT_MESSAGES_BATCHING="CHAT_MESSAGES_BATCHING",e.CHAT_STORE_LIMIT="CHAT_STORE_LIMIT",e.CHAT_ALT_KEY_PAUSE="CHAT_ALT_KEY_PAUSE",e.CHAT_USER_MENTION="CHAT_USER_MENTION",e.CHAT_MODERATION_PANEL="CHAT_MODERATION_PANEL",e.CHAT_CONTROLS_ON_CLICK="CHAT_CONTROLS_ON_CLICK",e.CHAT_MENTIONS="CHAT_MENTIONS",e.NATIVE_APP_BANNER="NATIVE_APP_BANNER",e.SMILE_SUGGEST_WITHOUT_MAXIMAL_LIMIT="SMILE_SUGGEST_WITHOUT_MAXIMAL_LIMIT",e.SMILE_SUGGEST="SMILE_SUGGEST",e.SMILE_SUGGEST_NAVIGATION="SMILE_SUGGEST_NAVIGATION",e.SUPPORT_PROGRAM="SUPPORT_PROGRAM",e.CHAT_SETTINGS="CHAT_SETTINGS",e.DISCORD="DISCORD",e.TELEGRAM="TELEGRAM",e.HIDE_CHAT_USER_AVATAR="HIDE_CHAT_USER_AVATAR",e.VIDEO_COVER="VIDEO_COVER",e.FOLLOW_CATEGORY="FOLLOW_CATEGORY",e.BIND_CARD_CURRENCY_SELECTION="BIND_CARD_CURRENCY_SELECTION",e.USER_GENERATED_POLLS="USER_GENERATED_POLLS",e.ADULT_CONTENT="ADULT_CONTENT",e.STAT_REPORT_PROCESSING="STAT_REPORT_PROCESSING",e.FB_AUTH_DISABLED_DISCLAIMER="FB_AUTH_DISABLED_DISCLAIMER"}(R||(R={})),function(e){e.MAIN_DOCUMENT="MAIN_DOCUMENT",e.MAIN_STATIC_FILES="MAIN_STATIC_FILES",e.TTFP="TTFP",e.LCP="LCP",e.DOM_CONTENT_LOADED="DOM_CONTENT_LOADED",e.TIME_FROM_LOADING_SCRIPTS_TO_MOUNT_APP="TIME_FROM_LOADING_SCRIPTS_TO_MOUNT_APP"}(k||(k={})),function(e){e.VENDOR_JS="VENDOR_JS",e.APP_JS="APP_JS",e.ICONS_JS="ICONS_JS",e.STYLES_CSS="STYLES_CSS"}(D||(D={})),function(e){e.CLIENT_ID="_clientId",e.AUTH="auth",e.INVITE="invite",e.NEW_USER="newUser",e.LOCALE="locale",e.THEME="theme",e.GDPR="gdpr",e.ONE_LINK_LOGIN="1ltr",e.ONE_LINK_REGISTRATION_USER="1ltr_reg",e.ONE_LINK_REGISTRATION_BLOGGER="1ltr_reg_bl",e.LAST_ACCOUNT="last_acc",e.DIALOGUE_LIST_SORT="dialogue_list_sort",e.CONTACT_LIST_SORT="contact_list_sort",e.MAILING_LIST_SORT="mailing_list_sort",e.SKIP_GRANTS="skip_grants",e.CHAT_SETTINGS="chat_settings",e.ACTIVITY_FILTERS="activityFilters"}(U||(U={})),(xt=B||(B={})).VIEW_BLOG="canViewBlog",xt.REPORT_BLOG="canReportBlog",xt.FOLLOW_BLOG="canFollowBlog",xt.EDIT_SETTINGS="canEditSettings",xt.EDIT_NOTIFICATION_SETTINGS="canEditNotificationSettings",xt.PUBLISH_POST="canPublishPost",xt.VIEW_POST="canViewPost",xt.LIKE_POST="canLikePost",xt.REACTION_POST="canReactOnPost",xt.REPORT_POST="canReportPost",xt.DELETE_POST="canDeletePost",xt.PUBLISH_COMMENT="canPublishComment",xt.REACTION_COMMENT="canReactionComment",xt.REPLY_COMMENT="canReplyComment",xt.REPORT_COMMENT="canReportComment",xt.REMOVE_COMMENT="canRemoveComment",xt.EDIT_COMMENT="canEditComment",xt.BLOCK_COMMENT_AUTHOR="canBlockCommentAuthor",xt.EDIT_BLOG="canEditBlog",(Bt=x||(x={})).BANNED="isBanned",Bt.BANNED_COMPLETELY="isBannedCompletely",Bt.BLOGGER="isBlogger",Bt.BLOG_OWNER="isBlogOwner",Bt.BLOG_OWNER_AGENT="isBlogOwnerAgent",Bt.COMMENT_AUTHOR="isCommentAuthor",Bt.MODERATOR="isModerator",Bt.STREAMER="isStreamer",function(e){e.CAN_VIEW_ADULT_CONTENT="canViewAdultContent",e.HAS_GIFT_HELPER="hasGiftHelper",e.HAS_TEASER_HELPER="hasTeaserHelper",e.HAS_STREAM_HELPER="hasStreamHelper",e.GDPR="GDPR",e.HAS_POST_DRAFT_HELPER="hasBlogPostDraftHelper",e.HAS_POST_SELECTOR_HELPER="hasBlogPostSelectorHelper",e.HAS_ACCEPTED_COMMON_SETTINGS="hasAcceptedCommonSettings",e.HAS_MESSAGE_HEADER_HELPER="hasMessageHeaderHelper",e.HAS_MESSAGE_BUTTON_HELPER="hasMessageButtonHelper",e.IS_TIP_DONATIONS_HELPER_SEEN="isTipDonationHelperSeen",e.IS_SHARE_DONATION_HELPER_SEEN="isShareDonationHelperSeen",e.HAS_RECORD_HELPER="hasRecordHelper",e.HAS_DIALOG_SETTINGS_PROMO="hasDialogSettingsPromo",e.IS_SHOWED_RECORD_HELP="isShowedRecordHelp",e.IS_PROMO_ALERT_SEEN="isPromoAlertSeen",e.IS_MAIN_FEED_ALERT_SEEN="isMainFeedAlertSeen",e.IS_ADD_PHONE_HELPER_SEEN="isAddPhoneHelperSeen",e.IS_PROMO_BANNER_SEEN="isPromoBannerSeen",e.IS_LEGAL_INFO_SEEN="isLegalInfoSeen"}(M||(M={})),function(e){e.HOURS="hours",e.MINUTES="minutes"}(F||(F={})),function(e){e.SELECT="select",e.SELECT_COMPACT="select-compact",e.BUTTON="button"}(G||(G={})),(Ut=H||(H={})).DATE="date",Ut.DATETIME="datetime",Ut.DATERANGE="daterange",function(e){e.OPEN_CPG_WINDOW="openCPGWindow",e.PAGE_LOAD="pageLoad",e.PAY_SUCCESS="paySuccess",e.PAY_ERROR="payError",e.WAITER_START="waiterStart",e.PAGE_3DS="3dsPage",e.FINISH_3DS="3dsFinish",e.SESSION_FAIL="session_fail",e.TYPE_CARD="typeCard",e.RESIZE_FRAME="resizeFrame",e.PAY_CANCEL="payCancel",e.ADD_CARD="addCard",e.PAYPAL_RENDER="render",e.PAYPAL_PAY="pay",e.PAYPAL_CANCEL="cancel",e.PAYPAL_ERROR="error"}(W||(W={})),function(e){e.POST="post",e.TARGET="target",e.AUTHOR="author",e.DIALOG="dialog"}(V||(V={})),function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(j||(j={})),function(e){e.LIKE="like",e.DISLIKE="dislike",e.FIRE="fire",e.HEART="heart",e.LAUGHT="laught",e.WONDER="wonder",e.SAD="sad",e.ANGRY="angry"}(z||(z={})),(Dt=Y||(Y={})).SMALL="small",Dt.MEDIUM="medium",Dt.LARGE="large",Dt.ORIGINAL="original",function(e){e.BLOG_NOT_FOUND="blog_not_found",e.USER_BANNED="user_baned",e.POST_NOT_FOUND="post_not_found",e.STREAM_NOT_FOUND="stream_not_found",e.STREAM_RECORD_NOT_FOUND="stream_record_not_found",e.BAD_REQUEST="bad_request",e.FORBIDDEN="forbidden",e.PAGE_NOT_FOUND="page_not_found",e.INTERNAL_SERVER_ERROR="internal_server_error",e.BAD_GATEWAY="bad_gateway",e.APP_ERROR="app_error",e.BLOG_FETCH_ERROR="blog_fetch_error"}(K||(K={})),function(e){e.ALL="all",e.DONATIONS="donations",e.PAID_POSTS="paid_posts",e.SUBSCRIPTIONS="subscriptions",e.PAYOUT_HISTORY="payouts",e.UNSUBSCRIBE_REASONS="unsubscribe_reasons",e.HOLDS="holds"}(q||(q={})),function(e){e.LOADING="LOADING",e.UNAUTHORIZED="UNAUTHORIZED",e.AUTHORIZED="AUTHORIZED",e.USER_NOT_FOUND="USER_NOT_FOUND",e.USER_ALREADY_LINKED="USER_ALREADY_LINKED",e.ERROR="ERROR"}(X||(X={})),function(e){e.TELEGRAM="Telegram",e.DISCORD="Discord"}(Q||(Q={})),function(e){e.TELEGRAM="tg",e.DISCORD="discord"}(J||(J={})),(kt=Z||(Z={})).B="Byte",kt.KB="Kb",kt.MB="Mb",kt.GB="Gb",function(e){e.TOP="top",e.RIGHT="right",e.LEFT="left",e.BOTTOM="bottom",e.TOP_START="top-start",e.TOP_END="top-end",e.RIGHT_START="right-start",e.RIGHT_END="right-end",e.BOTTOM_START="bottom-start",e.BOTTOM_END="bottom-end",e.LEFT_START="left-start",e.LEFT_END="left-end"}($||($={})),function(e){e.V3="v3",e.V2="v2"}(ee||(ee={})),function(e){e.TOP_MENU="topMenu",e.NOTICE_LIST="noticeList"}(te||(te={})),function(e){e.IMAGE_TOO_BIG="image_too_big",e.WRONG_IMAGE_FORMAT="wrong_image_format"}(ne||(ne={})),function(e){e.TEASER_AUTO_BACKGROUND="teaser_auto_background"}(re||(re={})),(Rt=oe||(oe={})).IMAGE_SIZE_LIMIT="FILE_SIZE_LIMIT",Rt.IMAGE_WIDTH_LIMIT="IMAGE_WEIGHT_LIMIT",Rt.INVALID_FORMAT="INVALID_FORMAT",Rt.NETWORK_ERROR="NETWORK_ERROR",Rt.UNKNOWN_ERROR="UNKNOWN_ERROR",function(e){e.SPACE=" ",e.ESCAPE="Escape",e.ENTER="Enter",e.BACKSPACE="Backspace",e.DELETE="Delete",e.TAB="Tab",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ALT="Alt"}(ae||(ae={})),function(e){e.ALT="Alt",e.ALT_GRAPH="AltGraph",e.CAPS_LOCK="CapsLock",e.CONTROL="Control",e.FN="Fn",e.FN_LOCK="FnLock",e.HYPER="Hyper",e.META="Meta",e.NUM_LOCK="NumLock",e.OS="OS",e.SCROLL_LOCK="ScrollLock",e.SHIFT="Shift",e.SUPER="Super",e.SYMBOL="Symbol",e.SYMBOL_LOCK="SymbolLock"}(ie||(ie={})),function(e){e.RU="ru",e.EN="en"}(le||(le={})),function(e){e.UNKNOWN="unknown",e.API_ERROR="api_error",e.SSR_ERROR="ssr_error",e.ROUTE_NOT_FOUND="route_not_found",e.CHECK_FAILED="check_failed"}(se||(se={})),(Lt=ce||(ce={})).RU="ru_RU",Lt.EN="en_US",(ue||(ue={})).INVALID_JSON="invalid_json",(de||(de={})).BLOCK_END="BLOCK_END",function(e){e.MEDIA_ALBUM="media_album",e.DIALOG="dialog",e.POST="post",e.COMMENT="comment",e.ABOUT_AUTHOR="about_author"}(fe||(fe={})),function(e){e.FIRST_OPENING="first_opening",e.CONTROL_CLICK="control_click",e.SWIPE="swipe",e.KEYBOARD="keyboard"}(me||(me={})),(Pt=pe||(pe={})).TEXT="text",Pt.IMAGE="image",Pt.VIDEO="video",Pt.VIDEO_FILE="ok_video",Pt.VIDEO_STREAM="ok_stream",Pt.FILE="file",Pt.AUDIO="audio",Pt.AUDIO_FILE="audio_file",Pt.LINK="link",Pt.MENTION="mention",Pt.SMILE="smile",function(e){e[e.AUTHORIZE=0]="AUTHORIZE",e[e.REGISTER=1]="REGISTER",e[e.RELINK=2]="RELINK"}(he||(he={})),function(e){e.TELERGAM="telegram",e.MAIL="mail",e.STANDALONE="standalone",e.MOBILE_PUSH="mobile_push"}(ve||(ve={})),function(e){e.SUBSCRIBER="newSubscriber",e.MESSAGE="newMessage",e.COMMENT="newComment",e.NEWS="otherNews",e.REPLY="newReply",e.STREAM="newStream",e.POST="newPost",e.NEW_TARGET="newTarget",e.NEW_REFERRAL_REGISTRATION="newReferal",e.REFERRAL_IS_BLOGGER="newReferalBlogger",e.DONATION="newDonation",e.POST_PURCHASE="buyPost",e.MESSAGE_PURCHASE="buyMessage",e.NEW_PROMO="newPromo"}(ge||(ge={})),function(e){e.STARTED="started",e.TIME_UPDATE="timeupdate",e.VOLUME_CHANGE="volumechange",e.REWOUND="rewound",e.PAUSED="paused",e.RESUMED="resumed",e.ENDED="ended"}(ye||(ye={})),function(e){e.ERR_NOT_ENOUGH_MONEY="ERR_NOT_ENOUGH_MONEY",e.ERR_REJECTED_SUPPORT="ERR_REJECTED_SUPPORT",e.ERR_SECURITY="ERR_SECURITY",e.ERR_CARD_LIMIT_ONLINE="ERR_CARD_LIMIT_ONLINE",e.ERR_REJECTED_UNKNOWN="ERR_REJECTED_UNKNOWN",e.ERR_SESSION_NOT_FOUND="ERR_SESSION_NOT_FOUND",e.ERR_SYSTEM="ERR_SYSTEM",e.ERR_CARD_EXPIRED="ERR_CARD_EXPIRED",e.ERR_NOT_ENROLLED="ERR_NOT_ENROLLED",e.ERR_UNKNOWN="ERR_UNKNOWN",e.GHOSTERY="ghostery"}(_e||(_e={})),function(e){e.CARD="card",e.CARD_GLOBAL="card_global",e.PAYPAL="paypal",e.APPLE_PAY="applepay",e.QIWI="qiwi",e.YANDEX="yandex"}(Ee||(Ee={})),function(e){e.REDIRECT="redirect",e.WAIT="wait",e.NEED_DATA="need_data",e.STOP="stop"}(be||(be={})),function(e){e[e.START=0]="START",e[e.SUCCESS=1]="SUCCESS",e[e.FAILURE=2]="FAILURE",e[e.WAITING=3]="WAITING"}(Se||(Se={})),function(e){e.TRANSACTION_MIN="transactionMin",e.TRANSACTION_MAX="transactionMax",e.MAX_PER_TRANSACTION="maxPerTransaction",e.MAX_ON_MONTH_PER_PERSON="maxOnMonthPerPerson",e.DAY="day",e.WEEK="week",e.MONTH="month"}(Te||(Te={})),function(e){e.ALL="all",e.VISA="visa",e.MASTERCARD="mastercard"}(Ie||(Ie={})),function(e){e.NEED_3DS="need3ds"}(Ne||(Ne={})),function(e){e.POST="post",e.STREAM="stream",e.MESSAGE="message",e.DONATION="donation",e.SUBSCRIPTION="subscription",e.GIFT="gift"}(Ce||(Ce={})),function(e){e.AUTH_SIGN_IN="AUTH_SIGN_IN",e.CONTACT_SUPPORT="CONTACT_SUPPORT",e.TELEGRAM_CONNECTION="TELEGRAM_CONNECTION",e.CONFIRM="CONFIRM",e.SMILES_CREATE="SMILES_CREATE",e.SMILES_EDIT="SMILES_EDIT",e.BADGES_CREATE="BADGES_CREATE",e.BADGES_EDIT="BADGES_EDIT",e.PAYMENT="PAYMENT",e.VIDEO="VIDEO",e.DIALOGS_SETTINGS_PROMO="DIALOGS_SETTINGS_PROMO",e.SMILE_INFO="SMILE_INFO",e.ROLES_CREATE="ROLES_CREATE",e.ROLES_EDIT="ROLES_EDIT"}(we||(we={})),function(e){e.ALL="all",e.TOP="top"}(Oe||(Oe={})),function(e){e[e.RUSSIA=188]="RUSSIA",e[e.UKRAINE=196]="UKRAINE"}(Ae||(Ae={})),function(e){e.COUNTRY="country",e.REGION="region"}(Pe||(Pe={})),function(e){e[e.all=0]="all",e[e.authorized=1]="authorized",e[e.blogger=2]="blogger"}(Le||(Le={})),function(e){e.INVALID_PARAM="invalid_param",e.MESSAGE_TOO_LONG="message_too_long",e.SAME_MESSAGE="same_message",e.SEND_TOO_FAST="send_too_fast"}(Re||(Re={})),function(e){e.POST_VK="post_vk",e.POST_FB="post_fb",e.POST_OK="post_ok",e.POST_TWITTER="post_twitter",e.POST_QR="post_qr",e.POST_LINK="post_link",e.STREAM_LINK="stream_link",e.SUCCESS_PUBLISH_VK="success_publish_vk",e.SUCCESS_PUBLISH_FB="success_publish_fb",e.SUCCESS_PUBLISH_OK="success_publish_ok",e.SUCCESS_PUBLISH_TWITTER="success_publish_twitter",e.SUCCESS_PUBLISH_QR="success_publish_qr",e.SUCCESS_PUBLISH_LINK="success_publish_link",e.TARGET_LINK="target_link",e.SUBSCRIPTION_LEVEL_LINK="subscription_link",e.SUBSCRIPTION_LEVEL_QR="subscription_qr",e.REF_LINK_VK="ref_link_vk",e.REF_LINK_FB="ref_link_fb",e.REF_LINK_OK="ref_link_ok",e.REF_LINK_TWITTER="ref_link_twitter"}(ke||(ke={})),function(e){e.VK="vk",e.FB="fb",e.OK="ok",e.TWITTER="twitter",e.QR="qr",e.LINK="link"}(De||(De={})),function(e){e[e.XS=16]="XS",e[e.S=20]="S",e[e.M=24]="M",e[e.L=28]="L"}(Ue||(Ue={})),function(e){e.BLOG_SUBSCRIPTION="blog_subscription",e.GLOBAL="global"}(Be||(Be={})),function(e){e.BLOG="blog"}(xe||(xe={})),function(e){e.YOUTUBE="youtube",e.VK="vk",e.FB="facebook",e.OK="ok",e.TWITTER="twitter",e.TWITCH="twitch",e.INSTAGRAM="instagram",e.SOUNDCLOUD="soundcloud",e.TELEGRAM="telegram",e.BEHANCE="behance",e.DRIBBBLE="dribbble",e.TIKTOK="tiktok",e.WEBSITE="website"}(Me||(Me={})),function(e){e.API_ERROR_STATUS="API_ERROR_STATUS",e.APP_ERRORS="APP_ERRORS",e.UPLOAD_FILE="UPLOAD_FILE",e.UPLOAD_FILE_SUCCESS="UPLOAD_FILE_SUCCESS",e.UPLOAD_FILE_CANCELLED="UPLOAD_FILE_CANCELLED",e.UPLOAD_FILE_ERROR="UPLOAD_FILE_ERROR",e.UPLOAD_FILE_CHUNK_ERROR="UPLOAD_FILE_CHUNK_ERROR",e.PUBLISHER_UPLOAD_FILE="PUBLISHER_UPLOAD_FILE",e.PUBLISHER_UPLOAD_FILE_SUCCESS="PUBLISHER_UPLOAD_FILE_SUCCESS",e.PUBLISHER_UPLOAD_FILE_ERROR="PUBLISHER_UPLOAD_FILE_ERROR",e.PUBLISHER_UPLOAD_FILE_CHUNK_ERROR="PUBLISHER_UPLOAD_FILE_CHUNK_ERROR",e.PUBLISHER_UPLOAD_AUDIO="PUBLISHER_UPLOAD_AUDIO",e.PUBLISHER_UPLOAD_AUDIO_SUCCESS="PUBLISHER_UPLOAD_AUDIO_SUCCESS",e.PUBLISHER_UPLOAD_AUDIO_ERROR="PUBLISHER_UPLOAD_AUDIO_ERROR",e.PUBLISHER_UPLOAD_AUDIO_CHUNK_ERROR="PUBLISHER_UPLOAD_AUDIO_CHUNK_ERROR",e.PUBLISHER_UPLOAD_VIDEO="PUBLISHER_UPLOAD_VIDEO",e.PUBLISHER_UPLOAD_VIDEO_SUCCESS="PUBLISHER_UPLOAD_VIDEO_SUCCESS",e.PUBLISHER_UPLOAD_VIDEO_ERROR="PUBLISHER_UPLOAD_VIDEO_ERROR",e.PUBLISHER_UPLOAD_VIDEO_RETRY="PUBLISHER_UPLOAD_VIDEO_RETRY",e.PUBLISHER_UPLOAD_VIDEO_CHUNK_SUCCESS="PUBLISHER_UPLOAD_VIDEO_CHUNK_SUCCESS",e.PUBLISHER_UPLOAD_VIDEO_CHUNK_ERROR="PUBLISHER_UPLOAD_VIDEO_CHUNK_ERROR",e.PUBLISHER_UPLOAD_VIDEO_CHUNK_RETRY="PUBLISHER_UPLOAD_VIDEO_CHUNK_RETRY",e.BLOG_SOCIAL_LINK_CLICK="BLOG_SOCIAL_LINK_CLICK",e.POST_FILE_DOWNLOAD="POST_FILE_DOWNLOAD",e.POST_AUDIO_PLAY="POST_AUDIO_PLAY",e.POST_AUDIO_PLAY_ERROR="POST_AUDIO_PLAY_ERROR",e.POST_PUBLISHED_OVERLAY_SHOW="POST_PUBLISHED_OVERLAY_SHOW",e.POST_PUBLISHED_OVERLAY_CLICK_SHARE="POST_PUBLISHED_OVERLAY_CLICK_SHARE",e.MESSAGE_FILE_DOWNLOAD="MESSAGE_FILE_DOWNLOAD",e.MESSAGE_AUDIO_PLAY="MESSAGE_AUDIO_PLAY",e.MESSAGE_AUDIO_PLAY_ERROR="MESSAGE_AUDIO_PLAY_ERROR",e.MESSAGE_INCORRECT_PAYLOAD="MESSAGE_INCORRECT_PAYLOAD",e.SHARE_DROPDOWN_SHOW="SHARE_DROPDOWN_SHOW",e.SHARE_DROPDOWN_CLICK_ITEM="SHARE_DROPDOWN_CLICK_ITEM",e.SELECT_LOCALE="SELECT_LOCALE",e.VIDEO_STARTED="VIDEO_STARTED",e.VIDEO_STARTED_WITH_TIME_CODE="VIDEO_STARTED_WITH_TIME_CODE",e.VIDEO_PAUSED="VIDEO_PAUSED",e.VIDEO_RESUMED="VIDEO_RESUMED",e.VIDEO_ENDED="VIDEO_ENDED",e.VIDEO_REWOUND="VIDEO_REWOUND",e.VIDEO_PROGRESS="VIDEO_PROGRESS",e.VIDEO_LOAD_PLAYER_ERROR="VIDEO_LOAD_PLAYER_ERROR",e.VIDEO_START_LOADING_PLAYER="VIDEO_START_LOADING_PLAYER",e.VIDEO_INVALID_PLAYBACK_POSITION="VIDEO_INVALID_PLAYBACK_POSITION",e.ROUTE_ENTER="ROUTE_ENTER",e.AUTH_POPUP_SHOW="AUTH_POPUP_SHOW",e.AUTH_POPUP_CLICK_PROVIDER="AUTH_POPUP_CLICK_PROVIDER",e.AUTH_ERROR="AUTH_ERROR",e.AUTH_REFRESH_TOKEN="AUTH_REFRESH_TOKEN",e.SUBSCRIBE_POPUP_SHOW="SUBSCRIBE_POPUP_SHOW",e.SUBSCRIBE_POPUP_3DS_SHOW="SUBSCRIBE_POPUP_3DS_SHOW",e.SUBSCRIBE_POPUP_FINISHED="SUBSCRIBE_POPUP_FINISHED",e.SINGLE_PAYMENT_POPUP_SHOW="SINGLE_PAYMENT_SHOW",e.SINGLE_PAYMENT_POPUP_3DS_SHOW="SINGLE_PAYMENT_3DS_SHOW",e.SINGLE_PAYMENT_POPUP_FINISHED="SINGLE_PAYMENT_FINISHED",e.POLICY_POPUP_SHOW="POLICY_POPUP_SHOW",e.POLICY_POPUP_ACCEPT="POLICY_POPUP_ACCEPT",e.WIDGET_DONATE_SHOW="WIDGET_DONATE_SHOW",e.WIDGET_DONATE_3DS_SHOW="WIDGET_DONATE_3DS_SHOW",e.WIDGET_DONATE_FINISHED="WIDGET_DONATE_FINISHED",e.WIDGET_WEB_VIEW_SUBSCRIBE_CANCEL="WIDGET_WEB_VIEW_SUBSCRIBE_CANCEL",e.WIDGET_WEB_VIEW_SUBSCRIBE_FAILURE="WIDGET_WEB_VIEW_SUBSCRIBE_FAILURE",e.WIDGET_WEB_VIEW_SUBSCRIBE_SHOW="WIDGET_WEB_VIEW_SUBSCRIBE_SHOW",e.WIDGET_WEB_VIEW_SUBSCRIBE_SUCCESS="WIDGET_WEB_VIEW_SUBSCRIBE_SUCCESS",e.WIDGET_WEB_VIEW_POST_PURCHASE_CANCEL="WIDGET_WEB_VIEW_POST_PURCHASE_CANCEL",e.WIDGET_WEB_VIEW_POST_PURCHASE_FAILURE="WIDGET_WEB_VIEW_POST_PURCHASE_FAILURE",e.WIDGET_WEB_VIEW_POST_PURCHASE_SHOW="WIDGET_WEB_VIEW_POST_PURCHASE_SHOW",e.WIDGET_WEB_VIEW_POST_PURCHASE_SUCCESS="WIDGET_WEB_VIEW_POST_PURCHASE_SUCCESS",e.WIDGET_WEB_VIEW_DONATION_CANCEL="WIDGET_WEB_VIEW_DONATION_CANCEL",e.WIDGET_WEB_VIEW_DONATION_FAILURE="WIDGET_WEB_VIEW_DONATION_FAILURE",e.WIDGET_WEB_VIEW_DONATION_SHOW="WIDGET_WEB_VIEW_DONATION_SHOW",e.WIDGET_WEB_VIEW_DONATION_SUCCESS="WIDGET_WEB_VIEW_DONATION_SUCCESS",e.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_CANCEL="WIDGET_WEB_VIEW_MESSAGE_PURCHASE_CANCEL",e.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_FAILURE="WIDGET_WEB_VIEW_MESSAGE_PURCHASE_FAILURE",e.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_SHOW="WIDGET_WEB_VIEW_MESSAGE_PURCHASE_SHOW",e.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_SUCCESS="WIDGET_WEB_VIEW_MESSAGE_PURCHASE_SUCCESS",e.WIDGET_WEB_VIEW_BIND_CARD_CANCEL="WIDGET_WEB_VIEW_BIND_CARD_CANCEL",e.WIDGET_WEB_VIEW_BIND_CARD_FAILURE="WIDGET_WEB_VIEW_BIND_CARD_FAILURE",e.WIDGET_WEB_VIEW_BIND_CARD_SHOW="WIDGET_WEB_VIEW_BIND_CARD_SHOW",e.WIDGET_WEB_VIEW_BIND_CARD_SUCCESS="WIDGET_WEB_VIEW_BIND_CARD_SUCCESS",e.DMR_FRAME_WAITING="DMR_FRAME_WAITING",e.DMR_FRAME_LOADED="DMR_FRAME_LOADED",e.BECOME_AUTHOR_POPUP_SHOW="BECOME_AUTHOR_POPUP_SHOW",e.PHOTO_LAYER_OPEN="PHOTO_LAYER_OPEN",e.MEDIA_ALBUM_PAGE_OPEN="MEDIA_ALBUM_PAGE_OPEN",e.MEDIA_ALBUM_TYPE_FILTER_CLICK="MEDIA_ALBUM_TYPE_FILTER_CLICK",e.MEDIA_ALBUM_TILE_CLICK="MEDIA_ALBUM_TILE_CLICK",e.MEDIA_VIEWER_OPEN="MEDIA_VIEWER_OPEN",e.MEDIA_VIEWER_ITEM_SHOW="MEDIA_VIEWER_ITEM_SHOW",e.MAIN_PAGE_BANNER_CLICK="MAIN_PAGE_BANNER_CLICK",e.MARKETING_ALERT_SHOW="MARKETING_ALERT_SHOW",e.MARKETING_ALERT_DISMISS="MARKETING_ALERT_DISMISS",e.MARKETING_ALERT_ACCEPT="MARKETING_ALERT_ACCEPT",e.NOTIFICATIONS_LINK_CLICK="NOTIFICATIONS_LINK_CLICK",e.BANNER_CLICKED="BANNER_CLICKED",e.BANNER_CLOSED="BANNER_CLOSED",e.BANNER_SHOWN="BANNER_SHOWN",e.DONATION_OPEN_FORM="DONATION_OPEN_FORM",e.PAYMENT_WINDOW_ACTION="PAYMENT_WINDOW_ACTION",e.DONATION_WINDOW_ACTION="DONATION_WINDOW_ACTION",e.TRIAL_WINDOW_ACTION="TRIAL_WINDOW_ACTION",e.SUBSCRIBE_MOBILE_CLICK="SUBSCRIBE_MOBILE_CLICK",e.POST_FORM_ERRORS="POST_FORM_ERRORS"}(Fe||(Fe={})),function(e){e.SUBSCRIBERS="incSubscribers",e.SUBSCRIBERS_MONEY="incSubscribersMoney",e.FOLLOWERS_INC="incFollowers",e.FOLLOWERS_DEC="decFollowers",e.CANCELED_SUBSCRIPTIONS="decSubscribers",e.UP_SUBSCRIBERS="upSubscribers",e.RESUBSCRIBES="recurrents",e.POST_SALES="postsSale",e.POST_SALES_MONEY="postSaleMoney",e.REFERRALS="referal",e.REFERRALS_MONEY="referalMoney",e.REFERRALS_MONEY_OUT="referalMoneyOut",e.HOLDS="holds",e.GIFT_SALES="giftsSale",e.MESSAGES_SALE="messagesSale",e.ON_ACCOUNT="totalMoney",e.DONATE_TARGET="donations",e.DONATIONS_MONEY="donationsMoney",e.DONATION_AUTHOR="donatAuthor",e.DONATION_DIALOG="donatDialog",e.DONATION_POST="donatPost",e.COMMISSION_COMPENSATION="commissionCompensation"}(Ge||(Ge={})),function(e){e.SUBSCRIBERS="#59A840",e.FOLLOWERS="#5998BF",e.CANCELED_SUBSCRIPTIONS="#CD3544",e.UP_SUBSCRIBERS="#00B294",e.RESUBSCRIBE="#EB5806",e.POST_SALES="#0099BB",e.GIFT_SALES="#D16485",e.ON_ACCOUNT="#3FB819",e.REFERRALS="#4050B5",e.DONATE_TARGET="#FF9900",e.REFERRALS_MONEY_OUT="#EFAC00",e.MESSAGES="#8E5DD9",e.HOLDS="#7B98A9"}(He||(He={})),function(e){e.SHOW="SHOW",e.SHOW_DESCRIPTION="SHOW_DESCRIPTION",e.CHANGE_PERIOD="CHANGE_PERIOD",e.CHANGE_CURRENCY="CHANGE_CURRENCY",e.CHANGE_LEVEL="CHANGE_LEVEL",e.CHANGE_AMOUNT="CHANGE_AMOUNT",e.CROSS_CLICK="CROSS_CLICK",e.CLOSE="CLOSE",e.PAYMENT_STEP="PAYMENT_STEP",e.CANCEL="CANCEL",e.PURCHASE_PREVIOUS_STEP="PURCHASE_PREVIOUS_STEP",e.PURCHASE_CROSS_CLICK="PURCHASE_CROSS_CLICK",e.PURCHASE_METHOD_CHANGE="PURCHASE_METHOD_CHANGE",e.PURCHASE_BIND_CHANGE="PURCHASE_BIND_CHANGE",e.PURCHASE_DMR_SHOW="PURCHASE_DMR_SHOW",e.PURCHASE_RESULT_SHOW="PURCHASE_RESULT_SHOW",e.GIFT_PURCHASE_RESULT_MY_SUBSCRIPTIONS_CLICK="GIFT_PURCHASE_RESULT_MY_SUBSCRIPTIONS_CLICK",e.GIFT_PURCHASE_RESULT_GIFT_CLICK="GIFT_PURCHASE_RESULT_GIFT_CLICK",e.SEND_GIFT_SHOW="SEND_GIFT_SHOW",e.SEND_GIFT_CLOSE="SEND_GIFT_CLOSE",e.SEND_GIFT_CLOSE_BY_CROSS="SEND_GIFT_CLOSE_BY_CROSS",e.SEND_GIFT_PRIVACY_CHANGE="SEND_GIFT_PRIVACY_CHANGE",e.SEND_GIFT_SEND_EMAIL="SEND_GIFT_SEND_EMAIL",e.SEND_GIFT_COPY_LINK="SEND_GIFT_COPY_LINK",e.SEND_GIFT_SHOW_DESCRIPTION="SEND_GIFT_SHOW_DESCRIPTION",e.ACCEPT_GIFT_BLOGGER_CLICK="ACCEPT_GIFT_BLOGGER_CLICK",e.ACCEPT_GIFT_SHOW_DESCRIPTION="ACCEPT_GIFT_SHOW_DESCRIPTION",e.ACCEPT_GIFT_REFUSE="ACCEPT_GIFT_REFUSE",e.ACCEPT_GIFT_CLOSE_BY_CROSS="ACCEPT_GIFT_CLOSE_BY_CROSS",e.ACCEPT_GIFT_ACCEPT="ACCEPT_GIFT_ACCEPT",e.ACCEPT_GIFT_SUCCESS="ACCEPT_GIFT_SUCCESS",e.ACCEPT_GIFT_ERROR="ACCEPT_GIFT_ERROR",e.DONATE_DIALOG_ATTACH="DONATE_DIALOG_ATTACH",e.TRIAL_ACTION_SHOW="TRIAL_ACTION_SHOW",e.TRIAL_ACTION_CLOSE="TRIAL_ACTION_CLOSE",e.TRIAL_ACTION_START_CLICK="TRIAL_ACTION_START_CLICK",e.TRIAL_ACTION_BIND_CARD_SHOW="TRIAL_ACTION_BIND_CARD_SHOW",e.TRIAL_ACTION_BIND_CARD_CLOSE="TRIAL_ACTION_BIND_CARD_CLOSE",e.TRIAL_ACTION_BIND_CARD_SUCCESS="TRIAL_ACTION_BIND_CARD_SUCCESS",e.RESULT_SUCCESS_MORE="RESULT_SUCCESS_MORE",e.RESULT_SUCCESS_CLOSE="RESULT_SUCCESS_CLOSE",e.RESULT_FAIL_AGAIN="RESULT_FAIL_AGAIN",e.RESULT_FAIL_SUPPORT="RESULT_FAIL_SUPPORT",e.RESULT_FAIL_CLOSE="RESULT_FAIL_CLOSE"}(We||(We={})),function(e){e.VIDEO_STREAM_IS_ONLINE="video_stream_is_online",e.SERVICE_TEMPORARILY_UNAVAILABLE="service_temporarily_unavailable",e.FORBIDDEN="forbidden"}(Ve||(Ve={})),function(e){e.BLOG="blog",e.LAYER="layer"}(je||(je={})),function(e){e[e.WIDTH=240]="WIDTH",e[e.HEIGHT=150]="HEIGHT"}(ze||(ze={})),function(e){e.MONEY="money",e.SUBSCRIBERS="subscribers"}(Ye||(Ye={})),function(e){e.DARK="dark-theme",e.LIGHT="light-theme",e.LIGHT_X="light-x-theme"}(Ke||(Ke={})),function(e){e.LOADING="LOADING",e.ERROR="ERROR",e.SUCCESS="SUCCESS"}(qe||(qe={})),function(e){e.USER="user",e.CHAT="chat",e.CUSTOM="custom",e.DIALOG="dialog",e.STREAM="stream",e.VIEWERS="viewers",e.PRIVATE="private",e.GLOBAL="global:public-stream"}(Xe||(Xe={})),function(e){e.SUBSCRIBERS_CHANGE_COUNT="subscribers_change_count",e.DIALOG_MESSAGE_COUNTERS="dialog_message_counters",e.PUBLISH_POST="publish_post",e.CHAT_BAN="chat_ban",e.CHAT_UNBAN="chat_unban",e.USER_BAN="user_ban",e.USER_UNBAN="user_unban",e.VIDEO_UPLOADED="video_uploaded",e.VIDEO_UPLOADED_FAILED="video_upload_failed",e.BLACK_LISTED="blacklisted",e.UNBLACK_LISTED="unblacklisted",e.BLOG_SUBSCRIBER_STAT="blog_subscriber_stat",e.NOTIFICATIONS_CHANGE_COUNT="standalone_notify_count",e.USER_CHANGE_CURRENCY="user_change_currency",e.BOOSTY_USER_LINK="boosty_user_link",e.UPLOAD_ORIGINAL_SMILE_IMAGE="smile_resize",e.UPLOAD_ORIGINAL_BADGE_IMAGE="badge_resize",e.UPLOAD_ORIGINAL_ROLE_IMAGE="role_resize",e.TELEGRAM_LINKED="telegram_linked",e.BLOG_STAT_REPORT_CREATED="blog_stat_report_ok",e.BLOG_STAT_REPORT_FAILED="blog_stat_report_failed"}(Qe||(Qe={})),function(e){e.STREAM_START="stream_start",e.STREAM_END="stream_end",e.STREAM_LIKE_COUNTER="stream_like_counter",e.STREAM_ONLINE_STATUS="stream_online_status",e.STREAM_INFO_UPDATE="stream_info_update"}(Je||(Je={})),function(e){e.MESSAGE="message",e.CLEAN_CHAT_MESSAGES="clean_chat_messages",e.STREAM_START="stream_start",e.STREAM_END="stream_end",e.STREAM_LIKE_COUNTER="stream_like_counter",e.STREAM_ONLINE_STATUS="stream_online_status",e.DELETE_MESSAGE="delete_message"}(Ze||(Ze={})),function(e){e.DIALOG_CHATMATE_ACTION="dialog_chatmate_action"}($e||($e={})),function(e){e.DIALOG_MESSAGE="dialog_message",e.DIALOG_MESSAGE_READ="dialog_message_read",e.DIALOG_MESSAGE_PAID="dialog_message_paid",e.DIALOG_DELETE_MESSAGE="dialog_delete_message",e.DIALOG_BROADCAST_MESSAGES_DONE="dialog_broadcast_messages_done"}(et||(et={})),function(e){e.STREAM_ONLINE_STATUS="stream_online_status"}(tt||(tt={})),function(e){e.CONNECT="connect"}(nt||(nt={})),function(e){e.AUTH_BY_EMAIL="auth_by_email",e.AUTH_BY_PHONE="auth_by_phone",e.CHANGE_PHONE_VERIFY_OLD="change_phone_verify_old",e.CHANGE_PHONE_UPDATE_PHONE="change_phone_update_phone",e.VERIFY_ANTI_DDOS="verify_anti_ddos"}(rt||(rt={})),function(e){e.HEADER_LOGIN="HEADER_LOGIN",e.HEADER_REGISTER="HEADER_REGISTER",e.BLOG_FOLLOW="BLOG_FOLLOW",e.MESSAGE="MESSAGE",e.SUBSCRIBE="SUBSCRIBE",e.SUBSCRIBE_LEVEL="SUBSCRIBE_LEVEL",e.POST_SUBSCRIBE="BLOG_POST_SUBSCRIBE",e.POST_LIKE="BLOG_POST_LIKE",e.POST_REACTION="BLOG_POST_REACTION",e.POST_COMMENT="BLOG_POST_COMMENT",e.POST_COMMENT_REACTION="BLOG_POST_COMMENT_REACTION",e.MAIN_BECOME_AUTHOR="MAIN_BECOME_AUTHOR",e.MAIN_LOGIN="MAIN_LOGIN",e.LANDINGS_DA="LANDINGS_DA",e.LANDING_BLOG_2125="LANDING_BLOG_2125",e.OTHER="OTHER"}(ot||(ot={})),function(e){e.USER_AGREEMENT="userAgreement",e.PAYMENT_TERMS="paymentTerms",e.PRIVACY_POLICY="privacyPolicy",e.PRIVACY_POLICY_CHANGE_LIST="privacyPolicyChangeList",e.COOKIE_POLICY="cookiePolicy",e.REF_POLICY="refPolicy"}(at||(at={})),function(e){e["10_MINUTES"]="tenMinutes",e["1_HOUR"]="oneHour",e.UNTIL_STREAM_END="untilStreamEnd"}(it||(it={})),function(e){e.NONE="none",e.FREE="free",e.PAID="paid"}(lt||(lt={})),function(e){e.SUBSCRIBER="subscriber",e.PAYER="payer",e.AUTHOR="author",e.NONE="none"}(st||(st={})),function(e){e.FOLLOW="follow",e.PAID="paid",e.LEVEL="level"}(ct||(ct={})),function(e){e.COMMENT="post_comment_new",e.REPLY="post_comment_new_reply",e.POST_NEW="post_new",e.POST_BUY="post_buy",e.NEWS="project_news",e.STREAM="video_stream_start",e.PROMO="promo_new",e.DONATION="donation_new",e.MESSAGE_BUY="message_buy",e.REFERRAL_NEW_BLOGGER="referal_new_blogger",e.REFERRAL_NEW_USER="referal_new_user",e.SUBSCRIBER_NEW="subscriber_new",e.TARGET_NEW="target_new",e.SUPPORT_MESSAGE="support_ticket_update",e.BLOG_STAT_REPORT_OK="blog_stat_report_ok",e.BLOG_STAT_REPORT_FAILED="blog_stat_report_failed"}(ut||(ut={})),function(e){e.ALL="all",e.NOBODY="nobody",e.OWNER="owner"}(dt||(dt={})),function(e){e.DEFAULT="default",e.BROADCAST="broadcast"}(ft||(ft={})),function(e){e.RUB="RUB",e.EUR="EUR",e.USD="USD",e.UAH="UAH"}(mt||(mt={})),function(e){e.ALREADY_EXIST="already_exists",e.LIMITED="limited",e.TOO_LARGE="request_too_large",e.DEFAULT="default_error",e.INVALID_PARAM="invalid_param",e.REMOVE_ERROR="remove_error",e.ORDER="order",e.WRONG_SIZE="wrong_image_size"}(pt||(pt={})),function(e){e.ALL="all",e.IMAGE="images",e.VIDEO="video",e.AUDIO="audio"}(ht||(ht={})),function(e){e.AUDIOS="audios",e.FILES="files",e.VIDEOS="videos",e.IMAGES="images",e.TEXT="text"}(vt||(vt={})),function(e){e.POST_SALE="buy_post",e.UP_SUBSCRIBERS="up_subscription",e.RECURRENT="recurrent",e.REFFERAL_MONEY="referal",e.REFERAL_MONEY_OUT="referal_out",e.INC_SUBSCRIBERS="subscribe",e.DEC_SUBSCRIBERS="unsubscribe",e.MESSAGE_SALE="buy_message",e.PAYOUT="payout",e.PAYOUT_ERROR="payout_error",e.COMMISSION_COMPENSATION="commission_compensation",e.GIFT_SALE="buy_gift",e.GIFT_ACCEPT="get_gift",e.DONATION="donation_target",e.DONATION_AUTHOR="donation_author",e.DONATION_DIALOG="donation_dialog",e.DONATION_POST="donation_post",e.HOLD="hold",e.HOLD_APPROVE="hold_approve",e.HOLD_CANCEL="hold_cancel"}(gt||(gt={})),function(e){e.TARGET="target",e.DIALOG="dialog",e.POST="post",e.AUTHOR="author"}(yt||(yt={})),function(e){e.IS_RSS_FEED_ENABLED="is_rss_feed_enabled",e.SHOW_POST_DONATION="show_post_donations",e.HAS_ADULT_CONTENT="has_adult_content"}(_t||(_t={})),function(e){e.PLAY="play",e.PAUSE="pause"}(Et||(Et={})),function(e){e.DISCOUNT="discount",e.TRIAL="trial",e.TRIAL_PRIVATE="trial_link"}(bt||(bt={})),function(e){e.START_TIME_ASC="START_TIME_ASC",e.START_TIME_DESC="START_TIME_DESC"}(St||(St={})),function(e){e.NEW_SUBSCRIBERS="newSubscribers",e.OLD_PAID_SUBSCRIBERS="oldPaidSubscribers",e.OTHER_LEVEL_SUBSCRIBERS="otherLevelSubscribers"}(Tt||(Tt={})),function(e){e.TELEGRAM="td",e.DISCORD="discord"}(It||(It={})),function(e){e.ALLOW="allow",e.DENY="deny"}(Nt||(Nt={})),function(e){e.ALLOW="allow",e.DENY="deny"}(Ct||(Ct={})),function(e){e.NOT_EMPTY_BALANCE="HAVE_MONEY_IN_BALANCE",e.PAID_SUBSCRIBERS="PAID_SUBSCRIBERS"}(wt||(wt={})),function(e){e.VIDEO="video",e.PODCAST="podcast",e.ILLUSTRATOR="illustrator",e.MUSIC="music",e.JOURNALIST="journalist"}(Ot||(Ot={})),function(e){e.ANDROID="android",e.IOS="ios"}(At||(At={}));var Kt,qt,Xt,Qt,Jt,Zt,$t,en,tn,nn,rn,on,an,ln,sn,cn,un,dn,fn,mn,pn,hn,vn,gn=n(9016);!function(e){e[e.OFFERS_USER_AGREEMENT_RU=gn.G.OFFERS_USER_AGREEMENT_USER_AGREENMENT_RU_HTML]="OFFERS_USER_AGREEMENT_RU",e[e.OFFERS_USER_AGREEMENT_EN=gn.G.OFFERS_USER_AGREEMENT_USER_AGREENMENT_EN_HTML]="OFFERS_USER_AGREEMENT_EN",e[e.OFFERS_REF_POLICY_RU=gn.G.OFFERS_REF_POLICY_REF_POLICY_RU_HTML]="OFFERS_REF_POLICY_RU",e[e.OFFERS_REF_POLICY_EN=gn.G.OFFERS_REF_POLICY_REF_POLICY_EN_HTML]="OFFERS_REF_POLICY_EN",e[e.OFFERS_PRIVACY_POLICY_RU=gn.G.OFFERS_PRIVACY_POLICY_PRIVACY_POLICY_RU_HTML]="OFFERS_PRIVACY_POLICY_RU",e[e.OFFERS_PRIVACY_POLICY_EN=gn.G.OFFERS_PRIVACY_POLICY_PRIVACY_POLICY_EN_HTML]="OFFERS_PRIVACY_POLICY_EN",e[e.OFFERS_PRIVACY_POLICY_CHANGE_LIST_RU=gn.G.OFFERS_PRIVACY_POLICY_CHANGE_LIST_PRIVACY_POLICY_CHANGE_LIST_RU_HTML]="OFFERS_PRIVACY_POLICY_CHANGE_LIST_RU",e[e.OFFERS_PRIVACY_POLICY_CHANGE_LIST_EN=gn.G.OFFERS_PRIVACY_POLICY_CHANGE_LIST_PRIVACY_POLICY_CHANGE_LIST_EN_HTML]="OFFERS_PRIVACY_POLICY_CHANGE_LIST_EN",e[e.OFFERS_COOKIE_POLICY_RU=gn.G.OFFERS_COOKIE_POLICY_COOKIE_POLICY_RU_HTML]="OFFERS_COOKIE_POLICY_RU",e[e.OFFERS_COOKIE_POLICY_EN=gn.G.OFFERS_COOKIE_POLICY_COOKIE_POLICY_EN_HTML]="OFFERS_COOKIE_POLICY_EN",e[e.OFFERS_PAYMENT_TERMS_RU=gn.G.OFFERS_PAYMENT_TERMS_PAYMENT_TERMS_RU_HTML]="OFFERS_PAYMENT_TERMS_RU",e[e.OFFERS_PAYMENT_TERMS_EN=gn.G.OFFERS_PAYMENT_TERMS_PAYMENT_TERMS_EN_HTML]="OFFERS_PAYMENT_TERMS_EN"}(Kt||(Kt={})),function(e){e.REGISTRATION="reg",e.LOGIN="login"}(qt||(qt={})),function(e){e.SUCCESS="success",e.WAIT="wait",e.ERROR="error",e.RESTRICT="restrict",e.BAD_ACCOUNT="bad_account",e.INVALID_ACCOUNT="invalid_account",e.INVALID_MERCHANT="invalid_merchant",e.INVALID_SYSTEM="invalid_system",e.DMR_ERROR="dmr_error",e.VERIFY_ERROR="verify_error",e.REVERTED="reverted",e.ANTIFROD_BLOCKED="antifrod_blocked",e.UNAVAILABLE_SYSTEM="unavailable_system",e.DMR_LAG="dmr_lag",e.CHARGEBACK="chargeback"}(Xt||(Xt={})),function(e){e.QIWI="qiwi",e.BANKCARD="bankcard",e.PAYPAL="paypal",e.YANDEXMONEY="yandexmoney",e.VKPAY="vkpay"}(Qt||(Qt={})),function(e){e.QIWI="qiwi",e.BANKCARD="bankCard",e.PAYPAL="payPal",e.YANDEXMONEY="yandexMoney",e.VKPAY="vKPAY"}(Jt||(Jt={})),function(e){e.EU="eu",e.NON_EU="non-eu"}(Zt||(Zt={})),(vn=$t||($t={})).INACTIVE="*",vn.ACTIVE="_",function(e){e.PAYMENT_PROBLEM_NOTIFICATION="PaymentProblemNotification"}(en||(en={})),function(e){e[e.LINK=0]="LINK",e[e.IMAGE=1]="IMAGE",e[e.VIDEO=2]="VIDEO",e[e.AUDIO=3]="AUDIO",e[e.FILE=4]="FILE"}(tn||(tn={})),function(e){e[e.MAIN_FEED=0]="MAIN_FEED",e[e.BLOG_FEED=1]="BLOG_FEED",e[e.POST=2]="POST",e[e.MEDIA=3]="MEDIA",e[e.STREAM=4]="STREAM",e[e.MESSAGE=5]="MESSAGE",e[e.UNBLOCK=6]="UNBLOCK"}(nn||(nn={})),function(e){e.SEARCH_QUERY="searchQuery",e.HAS_IMAGE="hasImage",e.HAS_AUDIO_FILE="hasAudioFile",e.HAS_AUDIO="hasAudio",e.HAS_VIDEO_FILE="hasVideoFile",e.HAS_VIDEO="hasVideo",e.HAS_FILE="hasFile",e.IS_ONLY_ALLOWED_POSTS="isOnlyAllowedPosts",e.SUBSCRIPTION_LEVEL_ID="subscriptionLevelId",e.POSTS_FROM="postsFrom",e.POSTS_TO="postsTo"}(rn||(rn={})),function(e){e.SELF_SUBSCRIBER="selfSubscriber",e.NON_EXISTENT="nonExistentSubscriptionLevel"}(on||(on={})),function(e){e.FIRST_STEPS="FIRST_STEPS",e.FIRST_POST="FIRST_POST",e.SUBSCRIPTION_LEVELS="SUBSCRIPTION_LEVELS",e.PAYOUT="PAYOUT"}(an||(an={})),function(e){e[e.ADD_PHOTO=0]="ADD_PHOTO",e[e.ADD_COVER=1]="ADD_COVER",e[e.ADD_TITLE=2]="ADD_TITLE",e[e.EDIT_ABOUT=3]="EDIT_ABOUT",e[e.ADD_SOCIAL=4]="ADD_SOCIAL",e[e.WRITE_POST=5]="WRITE_POST",e[e.ADD_LEVEL=6]="ADD_LEVEL",e[e.ADD_TARGET=7]="ADD_TARGET",e[e.ADD_PAYOUT=8]="ADD_PAYOUT"}(ln||(ln={})),function(e){e.SUBSCRIPTION_LEVEL_ID="subscriptionLevelId",e.IS_ONLY_ALLOWED_POSTS="isOnlyAllowedPosts",e.POSTS_FROM="postsFrom",e.POSTS_TO="postsTo",e.POSTS_TAGS_IDS="postsTagsIds"}(sn||(sn={})),function(e){e.IS_ONLY_ALLOWED_POSTS="isOnlyAllowedPosts",e.IS_ONLY_FREE_POSTS="isOnlyFreePosts",e.IS_ONLY_PAID_POSTS="isOnlyPaidPosts",e.POSTS_FROM="postsFrom",e.POSTS_TO="postsTo",e.POSTS_TAGS_IDS="postsTagsIds"}(cn||(cn={})),function(e){e.TILES="tiles",e.POSTS="posts"}(un||(un={})),function(e){e[e.PURCHASE=0]="PURCHASE",e[e.SETTINGS=1]="SETTINGS"}(dn||(dn={})),function(e){e.ABOUT="about"}(fn||(fn={})),function(e){e.PRICE_LOW="PRICE_LOW",e.PRICE_HIGH="PRICE_HIGH",e.DEFERRED_PRICE_LOW="DEFERRED_PRICE_LOW",e.DEFERRED_PRICE_HIGH="DEFERRED_PRICE_HIGH",e.DATE="WRONG_DATE",e.DEFERRED_DATE="WRONG_DEFERRED_DATE",e.IS_EMPTY="POST_IS_EMPTY",e.SUBSCRIPTIONS_LEVELS="SUBSCRIPTIONS_LEVELS_UNAVAILABLE",e.DEFERRED_SUBSCRIPTIONS_LEVELS="DEFERRED_SUBSCRIPTIONS_LEVELS_UNAVAILABLE",e.FILE_UPLOAD="FILE_UPLOAD_IN_PROCESS",e.POLL="POLL_ERROR",e.DEFAULT="DEFAULT"}(mn||(mn={})),function(e){e.CREATE="CREATE_POST",e.EDIT="EDIT_POST"}(pn||(pn={}));var yn,_n,En,bn,Sn,Tn,In,Nn,Cn,wn,On,An,Pn,Ln,Rn,kn="dd.MM.yy HH:mm",Dn=((hn={})[ce.RU]={"dd/LLL/yyyy":"dd LLL yyyy","HH/mm":"HH:mm","HH/mm/ss":"HH:mm:ss","&/HH/mm":"& HH:mm","dd/MM/yyyy":"dd.MM.yyyy","yyyy/MM/dd":"yyyy-MM-dd","LLLL/yyyy":"LLLL yyyy","dd/MM/yy":"dd.MM.yy","dd/MM/yy/&/HH/mm":"dd.MM.yy & HH:mm",EEEEEE:"EEEEEE","dd/MMMM/yyyy":"dd MMMM yyyy","dd/MM/yyyy/HH/mm":"dd.MM.yyyy HH:mm","dd/MM/yy/HH/mm":kn,"dd/MMMM/&/HH/mm":"dd MMMM & HH:mm","dd/MMM/&/HH/mm":"dd MMM & HH:mm","dd/MMMM":"dd MMMM","dd/MMMM/yyyy/&/HH/mm":"dd MMMM yyyy & HH:mm","dd/MMM/yyyy/&/HH/mm":"dd MMM yyyy & HH:mm","dd/LLL":"dd LLL","dd/MMMM/yyyy/HH/mm (O)":"dd MMMM yyyy, HH:mm (O)","dd/MMMM/yyyy/&/HH/mm (O)":"dd MMMM yyyy & HH:mm (O)"},hn[ce.EN]={"dd/LLL/yyyy":"dd LLL yyyy","HH/mm":"HH:mm","HH/mm/ss":"HH:mm:ss","&/HH/mm":"& HH:mm","dd/MM/yyyy":"MMM dd yyy","yyyy/MM/dd":"yyyy-MM-dd","LLLL/yyyy":"LLLL yyyy","dd/MM/yy":"MMM dd yy",EEEEEE:"EEEEEE","dd/MMMM/yyyy":"dd MMMM yyyy","dd/MM/yy/&/HH/mm":kn,"dd/MM/yyyy/HH/mm":"MMM dd yyyy HH:mm","dd/MM/yy/HH/mm":kn,"dd/MMMM/&/HH/mm":"MMMM dd HH:mm","dd/MMM/&/HH/mm":"MMM dd HH:mm","dd/MMMM":"dd MMMM","dd/MMMM/yyyy/&/HH/mm":"MMMM dd yyyy HH:mm","dd/MMM/yyyy/&/HH/mm":"MMM dd yyyy HH:mm","dd/LLL":"dd LLL","dd/MMMM/yyyy/HH/mm (O)":"dd MMMM yyyy, HH:mm (O)","dd/MMMM/yyyy/&/HH/mm (O)":"dd MMMM yyyy & HH:mm (O)"},hn),Un={380:["(",/[1-9]/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],default:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},Bn=/^[\u200B]*https?:\/\/[^\s\u200B\/$.?#].[^\s\u200B]+[\s\u200B]*$/i,xn=/^[\u200B]*www\.[^\s\u200B]+\.[^\s\u200B]+[\s\u200B]*$/i,Mn=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,Fn=864e5,Gn=function(){return Gn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gn.apply(this,arguments)},Hn={appId:h.WEB,hosts:{main:"",api:"",js:"",css:"",static:"",staticCDN:"",staticDeprecated:"",project:""},oauthCookieDomain:null,auth:{access:null,refresh:null,expiresIn:null},links:{support:""},clientId:null,currentTimeStamp:+Date.now(),supportEmail:"",crm:{links:{targets:null},supportEmail:{managerEmail:null,managerNameGenitive:null},youtube:{boostyChannel:null,guideWantMillion:null,subscriptionLevels:null}},locale:null,isLocaleEnabled:!1,isEnableMobileAppsAds:!1,defaultCurrency:null,isTestServer:!1,isServerRendering:!0,isMobile:!1,isAndroid:!1,isIOs:!1,isWidget:!1,isErrorsReportEnable:!1,isSendLogsEnable:!1,isRefHeaderEnable:!1,isLocaleHeaderEnable:!1,isWithCredentialsEnable:!1,isError:!1,isError400:!1,isError403:!1,isError404:!1,isError500:!1,isError502:!1,isBlogNotFound:!1,browserFamily:"",corporateBlogUrl:"",letters:{messageAccessAcquired:{},postAccessAcquired:{},userDeleted:{},setBlogAgent:{},crmBloggerCongratulation:{},crmBloggerInactive:{},crmBloggerReminder:{},userSheduledDeletion:{},newDonation:{},donationSent:{},confirmEmail:{},giftPresented:{},giftReceived:{},giftBought:{},giftSubscriptionReminder:{},greetingsBlogger:{defaultQueryParams:{},links:{}},newComment:{},dialogMessage:{},buyMessage:{},newPost:{},buyPost:{},newSubscriber:{},newTarget:{},newPromo:{},cantPay:{},cantPayTotal:{},newReferral:{},newReferralBlogger:{},startVideoStream:{},newSubscription:{},subscriptionLevelDelete:{},renewSubscription:{},renewSubscriptionReminder:{},supportTicketUpdate:{},greetings:{},userPasswordRestore:{},userPasswordRestoreSuccess:{},followerConversionReminder:{},statReportSuccess:{},statReportFailed:{}},testMailerId:null},Wn={appId:"",hosts:{main:"",api:"",websocket:"",static:""},subscriptionLevel:{paymentLimits:{minPaymentSum:{},maxPaymentSum:{},defaultPaymentSum:{}},images:{limits:{checkWidth:!1,maxWidth:null,maxSize:null}}},dialogues:{canNotReceiveMessagesUsers:[],showCheckboxNotifyUsersEmail:[],textMaxLength:null,paidMessages:{paymentLimits:{minPaymentSum:{},maxPaymentSum:{},defaultPaymentSum:{}}}},chat:{messagesLimit:20,messagesStoreLimit:0,messagesBatchingTime:0,overscanRowCount:10},collectionApiErrorStatistics:{isEnable:!0,ignoredEndpoints:[{url:"",method:""}]},stream:{refetchMaxDelay:0},publisher:{files:{isEnable:!1,limits:{fileSize:null,unit:Z.MB},upload:{chunkSize:null,retryCount:null,retryDelay:null}},audioFiles:{isEnable:!1,limits:{fileSize:null,unit:Z.MB},upload:{chunkSize:null,retryCount:null,retryDelay:null}},videoFiles:{isEnable:!1,limits:{fileSize:null,unit:Z.MB},upload:{chunkSize:null,retryCount:null,retryDelay:null,fileRetryCount:null},isStatChunkSuccessEnabled:!1},images:{limits:{checkWidth:!0,maxWidth:7679,maxSize:15,unit:Z.MB}},tags:{maxCount:null,maxLength:null},drafts:{savingTimeout:1}},posts:{paidPosts:{isCreateEnable:!0,paymentLimits:{minPaymentSum:{},maxPaymentSum:{},defaultPaymentSum:{}}}},recaptcha:{isEnabled:!1,siteKeyV2:"",siteKeyV3:""},payment:{default:{retries:10,timeout:1500},qiwi:{retries:100,timeout:1500},yandex:{retries:100,timeout:1500}},isMergePaymentBindsCards:!1,countriesListPaymentCardsRU:[],customUrls:{badgesDetails:"",smilesDetails:""},singlePaymentMaxPrice:null,qiwi:{accountInfoUrl:""},dmr:{dmrFrameHeight:null,dmrFramePaypalHeight:null,dmrFrameQiwiHeight:null,dmrFrame3dsHeight:null},donation:{paymentLimits:{minPaymentSum:{},maxPaymentSum:{},defaultPaymentSum:{}}},target:{minPrice:null,minMoneyTargetSum:null,maxMoneyTargetSum:null,maxSubscribersTargetSum:null,defaultPaymentSum:null},externalApps:{telegram:{botName:null,tutorialUrl:""},discord:{tutorialUrl:""}},banners:[],applePay:{merchantId:"",version:3,label:"boosty.to",enable:!0},websocket:{isEnabled:!1,isDebug:!1,token:null},isAuthorizeByPhoneEnabled:!1,hiddenMetaApps:{isEnabled:!1,countriesList:[]},location:{isEnabled:!1,country:"",region:"",isEUCountry:!1},heartbeats:{defaultInterval:null},playbackPosition:{defaultInterval:60,startThreshold:10},badge:{maxFilesize:{large:204800,medium:102477,original:1048576,small:102478}},smile:{maxFilesize:{large:204800,medium:102477,original:1048576,small:102478}},tmr:{ids:[]},conditionalFeatures:(yn={},yn[r.PAYMENT_YANDEX]={threshold:0,users:[]},yn[r.PAYMENT_QIWI]={threshold:0,users:[]},yn[r.PAYMENT_PAYPAL]={threshold:0,users:[]},yn[r.PAYMENT_CARD_GLOBAL]={threshold:0,users:[]},yn[r.PAYOUT_CARD_EUR]={threshold:0,users:[]},yn[r.PAYOUT_CARD_UAH]={threshold:0,users:[]},yn[r.PAYOUT_CARD_USD]={threshold:0,users:[]},yn[r.PAYMENT_APPLE_PAY]={threshold:0,users:[]},yn[r.MULTI_CURRENCY]={threshold:0,users:[]},yn[r.VK_PLAYER]={threshold:0,users:[]},yn[r.STREAM_RECORD]={threshold:0,users:[]},yn[r.CHAT_USER_STAT]={threshold:0,users:[]},yn[r.CHAT_MESSAGES_BATCHING]={threshold:0,users:[]},yn[r.CHAT_STORE_LIMIT]={threshold:0,users:[]},yn[r.CHAT_ALT_KEY_PAUSE]={threshold:0,users:[]},yn[r.CHAT_MENTIONS]={threshold:0,users:[]},yn[r.CHAT_USER_MENTION]={threshold:0,users:[]},yn[r.CHAT_MODERATION_PANEL]={threshold:0,users:[]},yn[r.CHAT_CONTROLS_ON_CLICK]={threshold:0,users:[]},yn[r.SMILES_IN_COMMENTS]={threshold:0,users:[]},yn[r.SMILE_SUGGEST_WITHOUT_MAXIMAL_LIMIT]={threshold:0,users:[]},yn[r.SMILE_SUGGEST]={threshold:0,users:[]},yn[r.SMILE_SUGGEST_NAVIGATION]={threshold:0,users:[]},yn[r.CHAT_SETTINGS]={threshold:0,users:[]},yn[r.HIDE_CHAT_USER_AVATAR]={threshold:0,users:[]},yn[r.BIND_CARD_CURRENCY_SELECTION]={threshold:0,users:[]},yn[r.BIND_CARD_CURRENCY_SELECTION]={threshold:0,users:[]},yn),performanceMetrics:{staticFiles:(_n={},_n[D.ICONS_JS]={minTime:null,maxTime:null},_n[D.APP_JS]={minTime:null,maxTime:null},_n[D.VENDOR_JS]={minTime:null,maxTime:null},_n[D.STYLES_CSS]={minTime:null,maxTime:null},_n),common:(En={},En[k.MAIN_DOCUMENT]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},En[k.MAIN_STATIC_FILES]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},En[k.TTFP]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},En[k.LCP]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},En[k.DOM_CONTENT_LOADED]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},En[k.TIME_FROM_LOADING_SCRIPTS_TO_MOUNT_APP]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},En)},currencies:{list:[],methods:{},bindCard:{},default:void 0},comments:{feedLimit:2,feedRepliesLimit:1,extraCommentsLimit:20,fullPageLimit:20,fullPageRepliesLimit:2,maxAttachedImages:2},changePhone:{isNotifierFlowForced:!1},locale:null,isLocaleEnabled:!1,auth:{access:null,refresh:null,expiresIn:null},clientId:null,currentTimeStamp:+Date.now(),isLogoutByApi:!1,oauthRedirect:"",discordLinkRedirect:"",oauthCookieDomain:null,oauthProviders:{},oauth:{boosty:{appId:"",redirectUri:"",from:"",url:"",createBlogUrl:""}},isTestServer:!1,isServerRendering:!0,isMobile:!1,isAndroid:!1,isIOs:!1,isWidget:!1,isErrorsReportEnable:!1,isSendLogsEnable:!1,isRefHeaderEnable:!1,isLocaleHeaderEnable:!1,isWithCredentialsEnable:!1,isError:!1,isError400:!1,isError403:!1,isError404:!1,isError500:!1,isError502:!1,isBlogNotFound:!1,browserFamily:"",corporateBlogUrl:"",supportEmail:null,supportUrl:"",isWebView:!1,fbAuthDisabled:{hasOnlyFBAuthSource:!1,_debugForceVKOverride:!1}},Vn=(Gn({},Wn),Gn({},Hn),"app"),jn={OAUTH_REFRESH_TOKEN:"/oauth/token/",OAUTH_TOKEN:"/oauth/token",OAUTH_SERVER_CHECK_APP:"/oauth/server/check_app",OAUTH_SERVER_AUTHORIZE:"/oauth/server/authorize",OAUTH_SERVER_TOKEN:"/oauth/server/token",OAUTH_PHONE_AUTHORIZE:"/oauth/phone/authorize",OAUTH_PHONE_TOKEN:"/oauth/phone/token",DEV_USER_TOKEN:"/dev/v1/user/token",AUTH_BY_EMAIL_SIGN_IN:"/user/auth/email/token",AUTH_BY_EMAIL_SIGN_UP:"/user/auth/email",AUTH_BY_EMAIL_CHANGE_PASSWORD_WITH_CODE:"/user/auth/email/password/restore",AUTH_BY_EMAIL_CHANGE_PASSWORD:"/user/auth/email/password",AUTH_BY_EMAIL_SEND_LINK_FOR_CHANGE_PASSWORD:"/user/auth/email/password/restore/send",BLOG:"/blog/:blogUrl",BLOG_CREATE:"/blog/",BLOG_SUBSCRIPTION_LEVELS:"/blog/:blogUrl/subscription_level/",BLOG_SUBSCRIPTION_LEVELS_BY_ID:"/blog/:blogUrl/subscription/level/:levelId",BLOG_SUBSCRIPTION_LEVELS_CREATE:"/blog/:blogUrl/subscription/level",BLOG_COVER_EDIT:"/blog/:blogUrl/cover",BLOG_SUBSCRIBERS:"/blog/:blogUrl/subscribers",BLOG_DOWNGRADE:"/blog/:blogUrl/subscription/downgrade/:levelId",BLOG_UNSUBSCRIBE:"/blog/:blogUrl/unsubscribe",BLOG_FOLLOW:"/blog/:blogUrl/follow",BLOG_COMPLAIN:"/blog/:blogUrl/complain/",BLOG_REVERT_CHANGES:"/blog/:blogUrl/subscription/revert_changes",BLOG_SOCIAL_LINKS:"/blog/:blogUrl/social_links",BLOG_ADDITIONAL_PAYMENT:"/blog/:blogUrl/additional_payment/:levelId",BLOG_PAYMENT_INFO:"/blog/:blogUrl/payment_info/:levelId",BLOG_SEARCH_USER:"/blog/:blogUrl/search",BLOG_REF_LINK:"/blog/:blogUrl/ref",BLOG_TRIAL_SUBSCRIBE:"/blog/:blogUrl/subscribe/:levelId/trial/:promoId",BLOG_STAT_BASE:"/blog/stat/:blogUrl/current",BLOG_STAT_METRICS:"/blog/stat/:blogUrl/metrics",BLOG_STAT_REF:"/blog/referral/:blogUrl/stat/",BLOG_STAT_REF_USERS:"/blog/referral/:blogUrl/user/",BLOG_STAT_CHARTS:"/blog/:blogUrl/stat/data",BLOG_STAT_SUBSCRIPTIONS:"/blog/:blogUrl/stat/subscriptions",BLOG_STAT_REPORT:"/blog/stat/:blogUrl/csv/:dataType",BLOG_STAT_REPORT_INFO:"/blog/stat/:blogUrl/csv/:dataType/info",BLOG_STAT_EVENTS:"/blog/stat/:blogUrl/events",BLOG_STAT_EVENTS_CONSTANTS:"/blog/stat/:blogUrl/events/constants",BLOG_STAT_SEARCH:"/blog/stat/:blogUrl/search",BLOG_BROADCAST_MESSAGE_STATS:"/blog/:blogUrl/sales/dialog_broadcast_message/",BLOG_HOLDS_STATS:"/blog/:blogUrl/sales/hold/",BLOG_DONATIONS:"/blog/:blogUrl/donations",BLOG_DONATIONS_SALES:"/blog/:blogUrl/sales/donation/",BLOG_POST_SALES:"/blog/:blogUrl/post_sales",BLOG_BLACKLIST:"/blacklist/",BLOG_BLACKLIST_ADD_USER:"/blacklist/:userId",BLOG_BLACKLIST_DELETE_USER:"/blacklist/:userId",BLOG_AGENT_ASSIGN:"/blog/:blogUrl/agent",BLOG_AGENT_UNASSIGN:"/blog/:blogUrl/agent/:userId",BLOG_AGENT_LIST:"/blog/:blogUrl/agent/",POST:"/blog/:blogUrl/post/:postId",POST_CREATE:"/blog/:blogUrl/post/",POST_LIKE:"/blog/:blogUrl/post/:postId/like",POST_REACTION:"/blog/:blogUrl/post/:postId/reaction",POST_COMPLAIN:"/blog/:blogUrl/post/:postId/complain/",POST_COMMENT:"/blog/:blogUrl/post/:postId/comment/:commentId",STREAM:"/blog/:blogUrl/video_stream",STREAM_CREDENTIALS:"/blog/:blogUrl/video_stream/credentials",STREAM_COMPLAIN:"/blog/:blogUrl/video_stream/complain/",STREAM_LIKE:"/blog/:blogUrl/video_stream/like",STREAM_NOTIFY:"/blog/:blogUrl/video_stream/notify",STREAM_RECORD:"/blog/:blogUrl/video_stream/record",STREAM_HEARTBEAT:"/blog/:blogUrl/video_stream/heartbeat/viewer",VIDEO_TIME_CODE:"/video/:videoId/timecode/",CHANNEL_COVER_IMAGE:"/channel/:blogUrl/cover_image",CHANNEL_COVER_TYPE:"/channel/:blogUrl/cover_type",STREAM_CHAT:"/blog/:blogUrl/video_stream/chat",STREAM_CHAT_DELETE:"/blog/:blogUrl/video_stream/chat/:messageId",STREAM_CHAT_CLEAN:"/blog/:blogUrl/chat/clean",STREAM_CHAT_TOKEN:"/blog/:blogUrl/video_stream/chat/token",STREAM_CHAT_BAN_STAT:"/blog/:blogUrl/video_stream/chat/stat",STREAM_CHAT_BAN:"/blog/:blogUrl/video_stream/ban",STREAM_CHAT_STOP_WORD:"/blog/:blogUrl/video_stream/chat/stop_word",STREAM_CHAT_MODERATOR:"/blog/:blogUrl/video_stream/moderator",STREAM_CHAT_REMOVE_MODERATOR:"/blog/:blogUrl/video_stream/moderator/:userId",STREAM_CHAT_USERS:"/blog/:blogUrl/video_stream/chat/user/",STREAM_CHAT_USER_SEARCH_LIST:"/blog/:blogUrl/video_stream/chat/user/search/",STREAM_CHAT_USER_STAT:"/blog/:blogUrl/video_stream/chat/stat",LEVEL_ID_PROMO:"/blog/:blogUrl/subscription/level/:levelId/promo/",LEVEL_PROMO:"/blog/:blogUrl/subscription/level/promo/",LEVEL_PROMO_FINISH:"/blog/:blogUrl/subscription/level/promo/:promoId/finish",LEVEL_PROMO_LINK:"/blog/:blogUrl/subscription/level/promo/link/:linkId",DIALOG_TOKEN:"/dialog/:dialogId/token",DIALOG_BY_USER_ID:"/dialog",DIALOG_LIST:"/dialog/",DIALOG_CREATE:"/dialog/",DIALOG:"/dialog/:dialogId",DIALOG_SHORT:"/dialog/:dialogId/short",DIALOG_READ_ALL:"/dialog/read",DIALOG_MESSAGE_LIST:"/dialog/:dialogId/message/",DIALOG_MESSAGE_CREATE:"/dialog/:dialogId/message",DIALOG_BROADCAST_MESSAGE_CREATE:"/dialog/blog/:blogUrl/broadcast/message/",DIALOG_MESSAGE:"/dialog/:dialogId/message",DIALOG_CURRENT_MESSAGE:"/dialog/message/:messageId",DIALOG_MESSAGE_READ:"/dialog/message/:messageId/read",DIALOG_CONTACTS:"/dialog/contacts",DIALOG_MAILING_LIST:"/dialog/blog/:blogUrl/broadcast/contact/",DIALOG_CAN_WRITE_WITH_DONATION:"/dialog/:blogUrl/can_write_whith_donation",DEFERRED_ACCESS:"/blog/:blogUrl/post/:id/deferred_access",COMMENTS:"/blog/:blogUrl/post/:id/comment/",COMMENTS_DELETE:"/blog/:blogUrl/post/:postId/comment/:commentId",COMMENTS_COMPLAIN:"/blog/:blogUrl/post/:postId/comment/:commentId/complain/",COMMENTS_RESTORE:"/blog/:blogUrl/post/:postId/comment/:commentId/restore",COMMENTS_REACTION:"/blog/:blogUrl/post/:postId/comment/:commentId/reaction",BLOG_POST_SALES_BY_DATE:"/blog/:blogUrl/post/paid/by_date",BLOG_POST_SALES_DAYS_BY_MONTH:"/blog/:blogUrl/post/paid/days",BLOG_POSTS:"/blog/:blogUrl/post/",BLOG_POSTS_TAGS:"/blog/:blogUrl/post/tag/",USER:"/user/:id",USER_CURRENT:"/user/current",USER_CURRENT_FLAG:"/user/current/flag/:flag",USER_CURRENT_VKPLAY_LINK:"/user/current/vkplay/link",USER_CURRENT_NICK_COLOR:"/user/current/nick_color",USER_SUBSCRIPTIONS:"/user/subscriptions",USER_AVATAR:"/user/current/avatar",USER_CHECK_NICK:"/user/current/nick",USER_FOLLOWING:"/user/following/",USER_SEND_EMAIL_CONFIRMATION_LETTER:"/user/current/email",USER_CONFIRM_EMAIL_LINK:"/v1/user/email/confirm/:code",USER_FINISH_TUTORIAL:"/user/current/finish_tutorial",USER_AUTH_LINK:"/user/auth_link/:type",USER_PHONE:"/user/current/phone",USER_PHONE_CHANGE:"/user/phone",USER_PHONE_CHECK:"/user/phone/check",USER_PHONE_CURRENT_CHECK:"/user/phone/check_current",USER_PHONE_APPROVE:"/user/phone/approve",USER_PHONE_CAN_ADD:"/user/phone/can_add",USER_PHONE_VERIFY_OLD:"/user/phone/verify_old",USER_NOTIFY_SETTINGS_OLD:"/user/notify_settings/:notificationType",USER_PRIVACY_POLICY:"/user/current/privacy",USER_REF_POLICY:"/user/current/ref_conv",USER_LOGIN:"/user/login",USER_LOCALE:"/user/locale",USER_DIALOG_SETTINGS:"/user/dialog_settings",INFO_MESSAGES:"/user/info_messages",INFO_MESSAGES_DELETE:"/user/info_messages/:id",FEED_POSTS:"/feed/post/",FEED_VIDEO_STREAM:"/feed/video_stream/",FEED_SESSION_CREATED_AT:"/feed/session/created_at",SMILES:"/blog/:blogUrl/smile_level/",SMILES_IN_SUBSCRIPTION:"/blog/:blogUrl/smile_level/:levelId",USER_CURRENT_SCHEDULED_DELETION:"/user/current/scheduled_deletion",USER_MARKETING_ALERTS:"/user/alerts",USER_MARKETING_ALERT_DISMISS:"/user/alerts/:alertId/skip",USERS:"/users",MEDIA_DATA_IMAGE_UPLOAD:"/media_data/image/",MEDIA_DATA_FILE_CONTAINER_CREATE:"/media_data/file/",MEDIA_DATA_AUDIO_CONTAINER_CREATE:"/media_data/audio/",MEDIA_DATA_VIDEO_CONTAINER_CREATE:"/media_data/ok_video/",MEDIA_DATA_VIDEO_UPLOAD_URL:"/media_data/video/upload_url",MEDIA_DATA_VIDEO_UPLOAD_FINISH:"/media_data/video/:id/finish",MEDIA_ALBUM_TILE:"/blog/:blogUrl/media_album/",MEDIA_ALBUM_COUNTERS:"/blog/:blogUrl/media_album/counters/",PAYMENT_LIST:"/payment/bind/list",PAYMENT_PAY_WITH_BOUND_CARD:"/payment/pay/:levelId",PAYMENT_PAY_GIFT_SUBSCRIPTION_WITH_BOUND_CARD:"/payment/pay/:levelId/gift",PAYMENT_PAY_SINGLE_PAYMENT_POST_WITH_BOUND_CARD:"/payment/pay/:blogUrl/post/:postId",PAYMENT_GET_URL:"/payment/url/:levelId",PAYMENT_GET_SINGLE_PAYMENT_GIFT_SUBSCRIPTION_URL:"/payment/url/:levelId/gift",PAYMENT_GET_SINGLE_PAYMENT_POST_URL:"/payment/url/:blogUrl/post/:postId",PAYMENT_GET_SINGLE_PAYMENT_MESSAGE_URL:"/payment/url/message/:messageId",PAYMENT_GET_SINGLE_PAYMENT_MESSAGE_WITH_BOUND_CARD:"/payment/pay/message/:messageId",PAYMENT_PAY_SINGLE_PAYMENT_DONATION_WITH_BOUND_CARD:"/payment/pay/:blogUrl/donation/:type",PAYMENT_GET_SINGLE_PAYMENT_DONATION_URL:"/payment/url/:blogUrl/donation/:type",PAYMENT_GET_SINGLE_PAYMENT_ONLY_BIND_URL:"/payment/url/bind",PAYMENT_DELETE_BIND:"/payment/bind/:bindId",PAYMENT_CHECK_ID:"/payment/check/:paymentId",PAYMENT_VALIDATE_APPLE_PAY_SESSION:"/payment/applepay/session",PAYMENT_TRANSACTION_STATUS:"/payment/:paymentId/transaction/status",PAYMENT_QIWI_STATUS:"/payment/:paymentId/qiwi_status",PAYMENT_DEFAULT_CURRENCY:"/payment/default_currency",CATALOG_CATEGORIES:"/catalog/category/",CATALOG_SUCCESS_STORIES:"/catalog/success-stories/",SUPPORT_CONTACT:"/support/",ONE_LINK_GET_SIGNATURE:"/1link/sig",STAT_LOGS:"/stat/founder_logs/",STAT_CLIENT_INFO:"/stat/founder_client_info/",STAT_GRAPHITE:"/graphite/:metric/",PAYOUT_HISTORY:"/blog/:blogUrl/payout/history/",BLOG_PAYOUTS:"/blog/:blogUrl/payout/",BLOG_PAYOUT_CREATE:"/blog/payout/:systemId",BLOG_PAYOUT_UPDATE:"/blog/payout/:payoutId",BLOG_PAYOUT_DELETE:"/blog/payout/:payoutId",BLOG_PAYOUT_CARD_FRAME:"/blog/payout/card_frame",BLOG_FLAG_SETTINGS:"/blog/:blogUrl/flag/:flag",BLOG_RSS_SETTINGS:"/blog/:blogUrl/rss/settings",BLOG_RSS_URL:"/blog/:blogUrl/rss/url",TARGET_TARGETS:"/target/:blogUrl/",TARGET_BY_ID:"/target/:targetId",TARGET_MONEY_CREATE:"/target/money",TARGET_SUBSCRIBERS_CREATE:"/target/subscribers",EXTERNAL_APPS_TELEGRAM_CONNECTION_URL:"/telegram/login/url",EXTERNAL_APPS_TELEGRAM_GROUP:"/telegram/:blogUrl/groups",EXTERNAL_APPS_DISCORD_BOT:"/discord/bot",EXTERNAL_APPS_DISCORD_ROLE:"/discord/role/",EXTERNAL_APP:"/external_app/:appId",GIFT:"/gift/:giftKey",GIFT_LIST:"/gift/",GIFT_ACCEPT:"/gift/:giftKey/accept",GIFT_SEND:"/gift/:giftKey/send",DOC_PAGES:"/doc/index/",DOC_PAGE:"/doc/page/:id",DOC_REQUEST_ACCESS:"/doc/request_access/",NOTIFICATIONS:"/notification/standalone/event/",NOTIFICATION:"/notification/standalone/event/:eventId",NOTIFICATIONS_READ:"/notification/standalone/read/",NOTIFICATION_SETTINS:"/notification/settings/",NOTIFICATION_SETTINGS_UPDATE:"/notification/settings/:transport/:switch",POLL_UNSUBS:"/poll/unsubscribe_reasons",VOTE_UNSUBS:"/poll/unsubscribe_reasons/vote",POLL_UNSUB_REASONS_FETCH:"/poll/unsubscribe_reasons",POLL_UNSUB_REASONS_VOTE:"/poll/unsubscribe_reasons/vote",POLL_UNSUB_REASONS_FETCH_VOTERS:"/blog/:blogUrl/unsubscribe_reasons/",POLL_USER_GENERATED_FETCH_VOTERS:"/blog/:blogUrl/poll/:pollId/vote/",POLL_USER_GENERATED_CREATE:"/blog/:blogUrl/poll/",POLL_USER_GENERATED_VOTE:"/poll/:pollId/vote",POLL_USER_GENERATED_POLL:"/blog/:blogUrl/poll/:pollId",SEARCH_BLOG:"/search/blog/",SEARCH_BLOG_SUGGEST:"/search/blog/suggest/",SEARCH_BLOG_POST:"/search/blog/post/",SEARCH_FEED_TAGS:"/search/feed/tag/",SEARCH_FEED_POST:"/search/feed/post/",SMILE:"/blog/:blogUrl/smile/:smileId",SMILE_CREATE:"/blog/:blogUrl/smile/",SMILE_LIST:"/blog/:blogUrl/smile_level/",SMILE_LIST_BY_LEVEL:"/blog/:blogUrl/smile_level/:levelId",SMILE_CHECK_NAME:"/blog/:blogUrl/smile/name",SMILE_IMAGE:"/blog/:blogUrl/smile/size/:sizeName",SMILE_USER_SET:"/smile/",SMILE_ORDER:"/blog/:blogUrl/smile_level/:levelId/order",SMILE_DATA:"/smile/:smileId",BADGE:"/blog/:blogUrl/badge/:badgeId",BADGE_LIST:"/blog/:blogUrl/badge/subscription/",BADGE_IMAGE:"/blog/:blogUrl/badge/size/:sizeName",BADGE_CREATE:"/blog/:blogUrl/badge/",SUPPORT:"/support/"},zn=[jn.OAUTH_REFRESH_TOKEN,jn.OAUTH_TOKEN,jn.OAUTH_SERVER_CHECK_APP,jn.OAUTH_SERVER_AUTHORIZE,jn.OAUTH_SERVER_TOKEN,jn.OAUTH_PHONE_AUTHORIZE,jn.OAUTH_PHONE_TOKEN,jn.DEV_USER_TOKEN,jn.AUTH_BY_EMAIL_CHANGE_PASSWORD,jn.AUTH_BY_EMAIL_SIGN_IN,jn.AUTH_BY_EMAIL_SIGN_UP,jn.AUTH_BY_EMAIL_SEND_LINK_FOR_CHANGE_PASSWORD],Yn="int/self",Kn={MESSAGE:"/".concat(Yn,"/message/:messageId"),DONATION:"/".concat(Yn,"/donation/:donationId"),GIFT:"/".concat(Yn,"/gift/:giftKey"),COMMENT:"/".concat(Yn,"/comment/:commentId"),USERS:"/".concat(Yn,"/users"),SUBSCRIPTION_LEVEL_PROMO:"/".concat(Yn,"/subscription/level/promo/:promoId"),SEND_LETTER:"/".concat(Yn,"/mailer"),BLOG_STAT_REPORT_INFO:"/".concat(Yn,"/blog/:blogUrl/stat/:dataType/info")},qn={CONNECT_TOKEN:"/ws/connect",REFRESH_TOKEN:"/ws/refresh",PRIVATE_TOKEN:"/ws/subscribe"},Xn={BLOG_PURCHASE:"/:blogUrl/purchase/:levelId",MAIN:"/",BLOG_PAYOUT_HISTORY_SELF:"/".concat(Vn,"/blog/payout-history"),BLOG_PAYOUT_HISTORY:"/:blogUrl/blog/statistics/payout-history",BLOG_HOLDS:"/:blogUrl/blog/statistics/holds",BLOG_SUBSCRIPTION_LEVELS_EDIT:"/:blogUrl/subscription-levels/:levelId/edit",BLOG_WITHDRAWAL_SELF:"/".concat(Vn,"/blog/withdrawal-methods"),BLOG_WITHDRAWAL_METHODS:"/:blogUrl/blog/statistics/withdrawal-methods",BLOG_POST:"/:blogUrl/posts/:postId",MEDIA:"/:blogUrl/media/:mediaType",SUPPORT_CONTACT:"/support/",CHANGE_PASSWORD:"/".concat(Vn,"/change-password/:code"),MESSAGES:"/".concat(Vn,"/messages"),SETTINGS:"/".concat(Vn,"/settings"),SETTINGS_EDIT:"/".concat(Vn,"/settings/edit"),SETTINGS_PROFILE:"/".concat(Vn,"/settings/edit"),SETTINGS_NEW_CARD:"/".concat(Vn,"/settings/edit/new-card"),SETTINGS_STREAM_MODERATION:"/".concat(Vn,"/settings/moderation"),SETTINGS_SOCIAL:"/".concat(Vn,"/settings/social"),SETTINGS_SUBSCRIPTIONS:"/".concat(Vn,"/settings/subscriptions"),SETTINGS_PERSONALIZATION:"/".concat(Vn,"/settings/personalization"),SETTINGS_PERSONALIZATION_CATEGORIES:"/".concat(Vn,"/settings/personalization/categories"),SETTINGS_NOTIFICATIONS:"/".concat(Vn,"/settings/notifications"),SETTINGS_EXTERNAL_APP:"/".concat(Vn,"/settings/external-apps"),SETTINGS_BLACKLIST:"/".concat(Vn,"/settings/blacklist"),SETTINGS_ROLES:"/".concat(Vn,"/settings/roles"),SETTINGS_SMILES:"/".concat(Vn,"/settings/smiles"),SETTINGS_PRIVACY:"/".concat(Vn,"/settings/privacy"),SETTINGS_PASSWORD:"/".concat(Vn,"/settings/password"),BLOG_STREAM:"/:blogUrl/streams/video_stream",BLOG_SELF:"/".concat(Vn,"/blog"),BLOG:"/:blogUrl",BLOG_POST_PHOTO_LAYER:"/:blogUrl/posts/:postId/photo/:imageId",BLOG_POST_SEARCH_PHOTO_LAYER:"/:blogUrl/search/post/photo/:postId/:imageId",BLOG_PHOTO_LAYER:"/:blogUrl/photo/:postId/:imageId",BLOG_STREAM_CHAT:"/:blogUrl/streams/video_stream/chat",BLOG_STREAM_EDIT:"/:blogUrl/edit-stream",BLOG_STREAM_PURCHASE:"/:blogUrl/streams/video_stream/purchase/:levelId",BLOG_STREAM_ONLY_CHAT:"/:blogUrl/streams/only-chat",STREAM_RECORD:"/:blogUrl/record/:recordId",BLOG_ACCEPT_GIFT:"/:blogUrl/gift/:giftKey/accept",BLOG_ACCEPT_GIFT_BIND_CARD:"/:blogUrl/gift/:giftKey/accept/new-card",BLOG_TRIAL_ACTIVATION:"/:blogUrl/subscription-level/:levelId/promo/:promoId",BLOG_TRIAL_ACTIVATION_BIND_CARD:"/:blogUrl/subscription-level/:levelId/promo/:promoId/new-card",BLOG_POST_TRIAL_ACTIVATION:"/:blogUrl/posts/:postId/subscription-level/:levelId/promo/:promoId",BLOG_POST_TRIAL_ACTIVATION_BIND_CARD:"/:blogUrl/posts/:postId/subscription-level/:levelId/promo/:promoId/new-card",BLOG_MEDIA_TRIAL_ACTIVATION_BIND_CARD:"/:blogUrl/media/:mediaType/subscription-level/:levelId/promo/:promoId/new-card",BLOG_MEDIA_TRIAL_ACTIVATION:"/:blogUrl/media/:mediaType/subscription-level/:levelId/promo/:promoId",FEED_TRIAL_ACTIVATION_BIND_CARD:"/".concat(Vn,"/feed/:blogUrl/subscription-level/:levelId/promo/:promoId/new-card"),BLOG_STATISTICS_EXPORT:"/:blogUrl/blog/statistics/export",BLOG_STATISTICS_CATEGORY_EXPORT:"/:blogUrl/blog/statistics/:category/export",APP_OAUTH_AUTHORIZE:"/".concat(Vn,"/oauth2/authorize"),DEPRECATED_MESSAGES:"/messages"},Qn=("".concat(Xn.BLOG_STREAM,"/*"),"https://paymentcard.yamoney.ru/gates/card/storeCard"),Jn={VERIFICATION:"/*/check"},Zn=function(){return Zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zn.apply(this,arguments)},$n={appId:"",hosts:{main:"",js:"",css:"",api:"",websocket:"",uploadRegExp:"",uploadImg:"",oneLinkHit:"",oneLinkApi:"",static:""},copyright:"",collectionApiErrorStatistics:{isEnable:!0,ignoredEndpoints:[{url:"",method:""}]},projectName:{normal:"",action:"",actionInfinitive:"",latinCapitalized:"",capitalized:"",hostMain:""},feed:{updateSessionTimeout:1e3},promo:{newPromoFormConfig:{discountPercent:{min:5,max:95,default:25},promoDuration:{minHours:1,defaultDuration:[14,"days"]},trialDurationInDays:{min:1,max:30,default:void 0},descriptionLength:{max:100},maxActivationsCount:{default:10},discountMinLevelPrice:20}},chat:{linkUsageType:null},stream:{refetchMaxDelay:0},location:{isEnabled:!1,country:"",region:"",isEUCountry:!1},locale:ce.RU,isLocaleEnabled:!1,currentTimeStamp:+Date.now(),allowedSocialMediaShares:(bn={},bn[De.VK]=!0,bn[De.FB]=!0,bn[De.OK]=!0,bn[De.TWITTER]=!0,bn[De.QR]=!0,bn[De.LINK]=!0,bn),payment:{default:{retries:10,timeout:1500},qiwi:{retries:100,timeout:1500},yandex:{retries:100,timeout:1500}},isMergePaymentBindsCards:!1,countriesListPaymentCardsRU:[],offer:(Sn={},Sn[at.USER_AGREEMENT]={url:""},Sn[at.PAYMENT_TERMS]={url:""},Sn[at.PRIVACY_POLICY]={url:""},Sn[at.COOKIE_POLICY]={url:""},Sn[at.REF_POLICY]={url:"",languageSelector:""},Sn[at.PRIVACY_POLICY_CHANGE_LIST]=null,Sn),privacyPolicy:{acceptVersion:0,changeList:{en:"",ru:""}},legalInfo:{isEnabled:!1,text:{en:"",ru:""}},isLazyLoadingOffersEnable:!1,refPolicy:{acceptVersion:0,changeList:{en:"",ru:""}},auth:{access:null,refresh:null,expiresIn:null},clientId:null,isLogoutByApi:!1,oauthRedirect:"",discordLinkRedirect:"",oauthCookieDomain:null,oauthProviders:{},isServerRendering:!0,supportEmail:null,supportUrl:"",calculator:{formula:"subscribers*price*0.93",maxSubscribers:null,maxPrice:null},singlePaymentMaxPrice:null,oneLink:{isEnabled:!0,projectId:null,projectIdForBloggers:null,userId:null,trackPeriodicity:86400,trackIntervalDelay:3600},publisher:{files:{isEnable:!1,limits:{fileSize:null,unit:Z.MB},upload:{chunkSize:null,retryCount:null,retryDelay:null}},audioFiles:{isEnable:!1,limits:{fileSize:null,unit:Z.MB},upload:{chunkSize:null,retryCount:null,retryDelay:null}},videoFiles:{isEnable:!1,limits:{fileSize:null,unit:Z.MB},upload:{chunkSize:null,retryCount:null,retryDelay:null,fileRetryCount:null},isStatChunkSuccessEnabled:!1},images:{limits:{checkWidth:!1,maxWidth:null,maxSize:null,unit:Z.B}},tags:{maxCount:null,maxLength:null},drafts:{savingTimeout:1}},subscriptionLevel:{paymentLimits:{minPaymentSum:{},maxPaymentSum:{},defaultPaymentSum:{}},images:{limits:{checkWidth:!1,maxWidth:null,maxSize:null}}},user:{avatar:{limits:{checkWidth:!1,maxWidth:null,maxSize:null,unit:Z.B}}},polls:{finishTime:{defaultCreationDelay:300,minDelay:300,maxDelay:2592e3},votersDetails:{limit:5}},posts:{paidPosts:{isCreateEnable:!1,paymentLimits:{minPaymentSum:{},maxPaymentSum:{}}}},postsMaxLoadMoreByScrollCount:{blog:2,mainFeed:4},tips:{authorsWhiteList:[]},blog:{hasVerifiedEmailsRestriction:!1},refs:{payoutDayOfMonth:5,payoutPeriodInMonths:12,payoutRate:5},qiwi:{accountInfoUrl:""},recaptcha:{isEnabled:!1,siteKeyV2:"",siteKeyV3:""},mainPageTutorialVideos:(Tn={},Tn[Ot.VIDEO]="",Tn[Ot.PODCAST]="",Tn[Ot.ILLUSTRATOR]="",Tn[Ot.MUSIC]="",Tn[Ot.JOURNALIST]="",Tn),dmr:{dmrFrameHeight:null,dmrFramePaypalHeight:null,dmrFrameQiwiHeight:null,dmrFrame3dsHeight:null},tutorialSubscriptionLevels:{defaultPrice:""},tutorialVideos:(In={},In[an.FIRST_STEPS]=null,In[an.SUBSCRIPTION_LEVELS]=null,In[an.FIRST_POST]=null,In[an.PAYOUT]=null,In),blogStatistics:{isEnable:!1},target:{minPrice:null,minMoneyTargetSum:null,maxMoneyTargetSum:null,maxSubscribersTargetSum:null,defaultPaymentSum:null},socialLinksSettings:[],payoutSystems:[],externalApps:{telegram:{botName:null,tutorialUrl:""},discord:{tutorialUrl:""}},banners:[],applePay:{merchantId:"",version:3,label:"boosty.to",enable:!0},changePhone:{isNotifierFlowForced:!1},websocket:{isEnabled:!1,isDebug:!1,token:null},hiddenMetaApps:{isEnabled:!1,countriesList:[]},heartbeats:{defaultInterval:null},playbackPosition:{defaultInterval:60,startThreshold:10},tmr:{ids:[]},conditionalFeatures:(Nn={},Nn[r.PAYMENT_YANDEX]={threshold:0,users:[]},Nn[r.PAYMENT_QIWI]={threshold:0,users:[]},Nn[r.PAYMENT_PAYPAL]={threshold:0,users:[]},Nn[r.PAYMENT_CARD_GLOBAL]={threshold:0,users:[]},Nn[r.PAYOUT_CARD_EUR]={threshold:0,users:[]},Nn[r.PAYOUT_CARD_UAH]={threshold:0,users:[]},Nn[r.PAYOUT_CARD_USD]={threshold:0,users:[]},Nn[r.PAYMENT_APPLE_PAY]={threshold:0,users:[]},Nn[r.STREAMS]={threshold:0,users:[]},Nn[r.TIP_DONATIONS]={threshold:0,users:[]},Nn[r.INVITES]={threshold:0,users:[]},Nn[r.DIALOGUES]={threshold:0,users:[]},Nn[r.MULTI_CURRENCY]={threshold:0,users:[]},Nn[r.VK_PLAYER]={threshold:0,users:[]},Nn[r.STREAM_RECORD]={threshold:0,users:[]},Nn[r.CHAT_USER_STAT]={threshold:0,users:[]},Nn[r.CHAT_MESSAGES_BATCHING]={threshold:0,users:[]},Nn[r.CHAT_STORE_LIMIT]={threshold:0,users:[]},Nn[r.CHAT_ALT_KEY_PAUSE]={threshold:0,users:[]},Nn[r.CHAT_USER_COLOR_CONFIG]={threshold:0,users:[]},Nn[r.CHAT_MENTIONS]={threshold:0,users:[]},Nn[r.CHAT_USER_MENTION]={threshold:0,users:[]},Nn[r.CHAT_MODERATION_PANEL]={threshold:0,users:[]},Nn[r.CHAT_CONTROLS_ON_CLICK]={threshold:0,users:[]},Nn[r.PUBLICATION_AFTER_PROCESSING_VIDEO]={threshold:0,users:[]},Nn[r.DIALOGUE_BROADCAST]={threshold:0,users:[]},Nn[r.DIALOGUE_MESSAGE_TEASER]={threshold:0,users:[]},Nn[r.DIALOGUE_DONATION]={threshold:0,users:[]},Nn[r.MAIN_FEED_SEARCH]={threshold:0,users:[]},Nn[r.SEARCH_BY_BLOGS]={threshold:0,users:[]},Nn[r.SEARCH_BY_POSTS]={threshold:0,users:[]},Nn[r.SMILES_AND_BADGES_SETTINGS]={threshold:0,users:[]},Nn[r.SMILES_IN_COMMENTS]={threshold:0,users:[]},Nn[r.SMILE_SUGGEST_WITHOUT_MAXIMAL_LIMIT]={threshold:0,users:[]},Nn[r.SMILE_SUGGEST]={threshold:0,users:[]},Nn[r.SMILE_SUGGEST_NAVIGATION]={threshold:0,users:[]},Nn[r.SHARE_DONATION_LINK]={threshold:0,users:[]},Nn[r.SHOW_NATIVE_APP_BANNER_ANDROID]={threshold:0,users:[]},Nn[r.SHOW_NATIVE_APP_BANNER_IOS]={threshold:0,users:[]},Nn[r.THANK_MESSAGE]={threshold:0,users:[]},Nn[r.HOLDS_STAT]={threshold:0,users:[]},Nn[r.CHAT_SETTINGS]={threshold:0,users:[]},Nn[r.DISCORD]={threshold:0,users:[]},Nn[r.TELEGRAM]={threshold:0,users:[]},Nn[r.SETTINGS_PRIVACY_DONATIONS_CHECKBOX]={threshold:0,users:[]},Nn[r.SETTINGS_PROFILE_SHOW_DONATIONS_UNDER_POST]={threshold:0,users:[]},Nn[r.SETTINGS_STREAM_MODERATION_VISIBILITY]={threshold:0,users:[]},Nn[r.HIDE_CHAT_USER_AVATAR]={threshold:0,users:[]},Nn[r.VIDEO_COVER]={threshold:0,users:[]},Nn[r.NEW_NOTIFICATION_SETTINGS]={threshold:0,users:[]},Nn[r.MY_GAMES_SUPPORT]={threshold:0,users:[]},Nn[r.BIND_CARD_CURRENCY_SELECTION]={threshold:0,users:[]},Nn[r.USER_GENERATED_POLLS]={threshold:0,users:[]},Nn[r.LINK_PHONE_TO_PROFILE]={threshold:0,users:[]},Nn[r.REFERRAL_PROGRAM]={threshold:0,users:[]},Nn[r.CHANNEL_ROLES]={threshold:0,users:[]},Nn[r.SHOW_NATIVE_APP_ADS_IN_SUCCESS_PAYMENT_ANDROID]={threshold:0,users:[]},Nn[r.SHOW_NATIVE_APP_ADS_IN_SUCCESS_PAYMENT_IOS]={threshold:0,users:[]},Nn[r.FOUNDER_X_LANDING_PARALLAX]={threshold:0,users:[]},Nn[r.REFERRAL_PAGE_SHARE_BUTTON]={threshold:0,users:[]},Nn[r.BRAND_PAGE]={threshold:0,users:[]},Nn[r.PROMO]={threshold:0,users:[]},Nn[r.LANDING_DONATION_ALERTS]={threshold:0,users:[]},Nn[r.TRIAL_BIND_CARD]={threshold:0,users:[]},Nn[r.PLAYBACK_POSITION_SAVING]={threshold:0,users:[]},Nn[r.VIDEO_VIEWS_COUNTER]={threshold:0,users:[]},Nn[r.ADULT_CONTENT]={threshold:0,users:[]},Nn[r.STAT_REPORT_PROCESSING]={threshold:0,users:[]},Nn[r.FB_AUTH_DISABLED_DISCLAIMER]={threshold:0,users:[]},Nn),performanceMetrics:{staticFiles:(Cn={},Cn[D.ICONS_JS]={minTime:null,maxTime:null},Cn[D.APP_JS]={minTime:null,maxTime:null},Cn[D.VENDOR_JS]={minTime:null,maxTime:null},Cn[D.STYLES_CSS]={minTime:null,maxTime:null},Cn),common:(wn={},wn[k.MAIN_DOCUMENT]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},wn[k.MAIN_STATIC_FILES]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},wn[k.TTFP]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},wn[k.LCP]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},wn[k.DOM_CONTENT_LOADED]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},wn[k.TIME_FROM_LOADING_SCRIPTS_TO_MOUNT_APP]={threshold:0,users:[],enabled:null,minTime:null,maxTime:null},wn)},search:{blogs:{limits:{minLength:1,maxLength:50,limitInline:10,limitResultsPage:10}},posts:{limits:{minLength:1,maxLength:100,limit:10}}},dialogues:{canNotReceiveMessagesUsers:[],showCheckboxNotifyUsersEmail:[],textMaxLength:null,paidMessages:{paymentLimits:{minPaymentSum:{},maxPaymentSum:{},defaultPaymentSum:{}}}},currencies:{list:[],methods:{},bindCard:{},default:null},donation:{paymentLimits:{minPaymentSum:{},maxPaymentSum:{},defaultPaymentSum:{}}},notificationSettings:{buyMessage:[],newStream:[],buyPost:[],newTarget:[],otherNews:[],newReferalBlogger:[],newMessage:[],newSubscriber:[],newDonation:[],newComment:[],newPost:[],newReply:[],newReferal:[],newPromo:[]},contentWeights:{maxPostContentWeight:2500,mediaTypesBaseWeight:(On={},On[pe.IMAGE]=2e3,On[pe.VIDEO]=2e3,On[pe.VIDEO_STREAM]=2e3,On[pe.VIDEO_FILE]=2e3,On[pe.AUDIO]=2e3,On[pe.AUDIO_FILE]=150,On[pe.FILE]=150,On[pe.MENTION]=10,On[pe.TEXT]=1,On[pe.LINK]=2,On[pe.SMILE]=3,On),paragraphEndWeight:100},customUrls:{badgesDetails:"",smilesDetails:""},comments:{feedLimit:2,feedRepliesLimit:1,extraCommentsLimit:20,fullPageLimit:20,fullPageRepliesLimit:2,maxAttachedImages:2},maxContentCollapsedHeight:586,isDeleteAccountEnabled:!1,isMarketingLogo:!1,isMarketingLogo2:!1,oauthAllowedOrigins:{},oauth:{boosty:{appId:"",redirectUri:"",from:"",url:"",createBlogUrl:""}},downloadApp:{androidLink:"",iosLink:""},helpers:[],mediaAlbum:{all:{loadingLimit:15,feedView:un.TILES},photo:{loadingLimit:15,feedView:un.TILES},video:{loadingLimit:15,feedView:un.TILES},audio:{loadingLimit:10,feedView:un.POSTS}},badge:{maxFilesize:{large:204800,medium:102477,original:1048576,small:102478}},smile:{maxFilesize:{large:204800,medium:102477,original:1048576,small:102478}},isAuthorizeByPhoneEnabled:!1,corporateBlogUrl:"",successStoriesUrl:"",vkPlayLiveStream:"",isErrorsReportEnable:!1,isSendLogsEnable:!1,isRefHeaderEnable:!1,isLocaleHeaderEnable:!1,isWithCredentialsEnable:!1,isTestServer:!1,isMobile:!1,isAndroid:!1,isIOs:!1,isWidget:!1,isError:!1,isError400:!1,isError403:!1,isError404:!1,isError500:!1,isError502:!1,isBlogNotFound:!1,isWebView:!1,browserFamily:"",fbAuthDisabled:{hasOnlyFBAuthSource:!1,_debugForceVKOverride:!1}},er=Zn({},$n),tr=function(e){return er=Zn(Zn({},$n),e)},nr=function(){return er},rr=function(){return rr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rr.apply(this,arguments)},or=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ar=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ir=rr(rr({},Xn),{MAIN:"/",BLOG:"/:blogUrl",POSTS:"/:blogUrl/posts",ABOUT:"/:blogUrl/about",BLOG_POST:"/:blogUrl/posts/:postId",BLOG_REF_LANDING:"/:blogUrl/ref",BLOG_REFS:"/:blogUrl/blog/statistics/refs",BLOG_STREAM:"/:blogUrl/streams/video_stream",BLOG_STREAM_CHAT:"/:blogUrl/streams/video_stream/chat",BLOG_DONATIONS:"/:blogUrl/blog/statistics/donations",BLOG_POST_SALES:"/:blogUrl/blog/statistics/post-sales",BLOG_STREAM_ONLY_CHAT:"/:blogUrl/streams/only-chat",BLOG_STATISTICS:"/:blogUrl/blog/statistics",BLOG_STATISTICS_CATEGORY:"/:blogUrl/blog/statistics/:category",BLOG_STATISTICS_ACTIVITY:"/:blogUrl/blog/statistics/activity",BLOG_SUBSCRIBERS:"/:blogUrl/blog/statistics/subscribers",BLOG_UNSUBSCRIBES:"/:blogUrl/blog/statistics/unsubscribes",BLOG_BROADCAST_MESSAGE_STATS:"/:blogUrl/blog/statistics/broadcast-message-stats",MESSAGES:"/".concat(Vn,"/messages"),BLOG_PROMO:"/:blogUrl/blog/promo",BLOG_CREATE:"/".concat(Vn,"/create-blog"),BECOME_AUTHOR:"/".concat(Vn,"/become-author"),SETTINGS_AGENTS:"/".concat(Vn,"/settings/agents"),OFFERS:"/".concat(Vn,"/offer"),OFFERS_USER:"/".concat(Vn,"/offer/user"),OFFERS_PAYMENT_TERMS:"/".concat(Vn,"/offer/payment-terms"),OFFERS_PRIVACY_POLICY:"/".concat(Vn,"/offer/privacy-policy"),OFFERS_COOKIE_POLICY:"/".concat(Vn,"/offer/cookie"),OFFERS_REF_POLICY:"/".concat(Vn,"/offer/ref"),USER_AGREEMENT:"/".concat(Vn,"/offer/user"),BROWSER_UNSUPPORTED:"/".concat(Vn,"/browser-unsupported"),BRAND:"/".concat(Vn,"/brand"),BLOG_REF:"/".concat(Vn,"/ref"),SUPPORT_HELP:"/".concat(Vn,"/help"),FB_AUTH:"/".concat(Vn,"/fb-auth"),UI_KIT:"/x/uikit",SEARCH_BY_BLOGS:"/".concat(Vn,"/search/blog"),SEARCH_BY_POSTS:"/:blogUrl/search/post",WELL_KNOWN_APPLE_DEVELOPER_MERCHANTID_DOMAIN_ASSOCIATION:"/.well-known/apple-developer-merchantid-domain-association.txt",WELL_KNOWN_ANDROID_ASSET_LINKS:"/.well-known/assetlinks.json",WELL_KNOWN_APPLE_APP_SITE_ASSOCIATION:"/.well-known/apple-app-site-association",ROBOTS:"/robots.txt",OAUTH_REDIRECT:"/".concat(Vn,"/oauth_redirect"),DISCORD_LINK_REDIRECT:"/".concat(Vn,"/discord_link_redirect"),NATIVE_APP_LINK_REDIRECT:"/".concat(Vn,"/native-app-link-redirect/:type/:locale"),SUPPORT_CONTACT:"/".concat(Vn,"/support"),SETTINGS_NEW_CARD:"/".concat(Vn,"/settings/edit/new-card"),SETTINGS_AGENT_ASSIGN:"/".concat(Vn,"/settings/agents/assign"),SETTINGS_AGENT_RIGHTS:"/".concat(Vn,"/settings/agents/rights"),BLOG_ABOUT_EDIT:"/:blogUrl/about-edit",BLOG_SEND_GIFT:"/:blogUrl/gift/:giftKey/send",BLOG_ACCEPT_GIFT:"/:blogUrl/gift/:giftKey/accept",BLOG_NEW_POST:"/:blogUrl/new-post",BLOG_EDIT_POST:"/:blogUrl/edit-post/:postId",BLOG_STREAM_EDIT:"/:blogUrl/edit-stream",BLOG_SUBSCRIPTION_LEVELS_ADD:"/:blogUrl/subscription-levels/add",BLOG_SUBSCRIPTION_LEVELS_EDIT:"/:blogUrl/subscription-levels/:levelId/edit",BLOG_PURCHASE:"/:blogUrl/purchase/:levelId",BLOG_PURCHASE_GIFT:"/:blogUrl/purchase-gift",BLOG_TUTORIAL_OFFERS:"/:blogUrl/tutorial-offers",BLOG_PHOTO_LAYER:"/:blogUrl/photo/:postId/:imageId",BLOG_VIDEO_LAYER:"/:blogUrl/photo/:postId/:imageId",BLOG_POST_SEARCH_PHOTO_LAYER:"/:blogUrl/search/post/photo/:postId/:imageId",BLOG_SINGLE_PAYMENT:"/:blogUrl/single-payment/:paymentPurposeType/:paymentPurposeId",BLOG_SINGLE_PAYMENT_DONATION:"/:blogUrl/single-payment/:paymentPurposeType/:paymentPurposeId/:paymentPurposeDonationType",BLOG_DONATE:"/:blogUrl/donate",BLOG_TARGET_ADD:"/:blogUrl/target/add",BLOG_TARGET_EDIT:"/:blogUrl/target/:targetId/edit",BLOG_MESSAGE_PURCHASE:"/".concat(Vn,"/messages/purchase/:levelId"),BLOG_MESSAGE_SINGLE_PAYMENT:"/".concat(Vn,"/messages/single-payment/:paymentPurposeType/:paymentPurposeId/payment"),BLOG_MESSAGE_SINGLE_PAYMENT_DONATION:"/".concat(Vn,"/messages/single-payment/:paymentPurposeType/:paymentPurposeDonationType/donation"),BLOG_MESSAGE_PHOTO_LAYER:"/".concat(Vn,"/messages/photo/:messageId/:imageId"),BLOG_MESSAGE_VIDEO_LAYER:"/".concat(Vn,"/messages/video/:messageId/:videoId"),BLOG_POST_PURCHASE:"/:blogUrl/posts/:postId/purchase/:levelId",BLOG_POST_PURCHASE_GIFT:"/:blogUrl/posts/:postId/purchase-gift",BLOG_POST_SINGLE_PAYMENT:"/:blogUrl/posts/:postId/single-payment/:paymentPurposeType/:paymentPurposeId",BLOG_POST_SINGLE_PAYMENT_DONATION:"/:blogUrl/posts/:postId/single-payment/:paymentPurposeType/:paymentPurposeId/:paymentPurposeDonationType",BLOG_POST_TARGET_ADD:"/:blogUrl/posts/:postId/target/add",BLOG_POST_TARGET_EDIT:"/:blogUrl/posts/:postId/target/:targetId/edit",BLOG_POST_PHOTO_LAYER:"/:blogUrl/posts/:postId/photo/:imageId",BLOG_POST_VIDEO_LAYER:"/:blogUrl/posts/:postId/video/:videoId",BLOG_MEDIA_ABOUT_EDIT:"/:blogUrl/media/:mediaType/about-edit",BLOG_MEDIA_STREAM_EDIT:"/:blogUrl/media/:mediaType/edit-stream",BLOG_MEDIA_PURCHASE:"/:blogUrl/media/:mediaType/purchase/:levelId",BLOG_MEDIA_PURCHASE_GIFT:"/:blogUrl/media/:mediaType/purchase-gift",BLOG_MEDIA_SINGLE_PAYMENT:"/:blogUrl/media/:mediaType/single-payment/:paymentPurposeType/:paymentPurposeId",BLOG_MEDIA_SINGLE_PAYMENT_DONATION:"/:blogUrl/media/:mediaType/single-payment/:paymentPurposeType/:paymentPurposeId/:paymentPurposeDonationType",BLOG_MEDIA_TARGET_ADD:"/:blogUrl/media/:mediaType/target/add",BLOG_MEDIA_TARGET_EDIT:"/:blogUrl/media/:mediaType/target/:targetId/edit",BLOG_PROMO_NEW:"/:blogUrl/blog/promo/new",FEED:"/".concat(Vn,"/feed"),FEED_PURCHASE:"/".concat(Vn,"/feed/:blogUrl/posts/:postId/purchase/:levelId"),FEED_PURCHASE_GIFT:"/".concat(Vn,"/feed/:blogUrl/posts/:postId/purchase-gift"),FEED_SINGLE_PAYMENT:"/".concat(Vn,"/feed/:blogUrl/posts/:postId/single-payment/:paymentPurposeType/:paymentPurposeId"),FEED_SINGLE_PAYMENT_DONATION:"/".concat(Vn,"/feed/:blogUrl/posts/:postId/single-payment/:paymentPurposeType/:paymentPurposeId/:paymentPurposeDonationType"),FEED_PHOTO_LAYER:"/".concat(Vn,"/feed/:blogUrl/posts/:postId/photo/:imageId"),FEED_VIDEO_LAYER:"/".concat(Vn,"/feed/:blogUrl/posts/:postId/video/:videoId"),FEED_TRIAL_ACTIVATION:"/".concat(Vn,"/feed/:blogUrl/subscription-level/:levelId/promo/:promoId"),BLOG_STREAM_PURCHASE:"/:blogUrl/streams/video_stream/purchase/:levelId",LANDING_DONATION_ALERTS:"/".concat(Vn,"/da"),LANDING_BLOG_2125:"/hi",CHANGE_PASSWORD:"/".concat(Vn,"/change-password/:code"),APP_OAUTH_AUTHORIZE:"/".concat(Vn,"/oauth2/authorize"),EXTERNAL_ACCOUNT_LINK:"/".concat(Vn,"/external_account_link/:externalId"),DEPRECATED_MESSAGES:"/messages",DEPRECATED_OFFERS_PRIVACY_POLICY_EU:"/".concat(Vn,"/offer/privacy-policy/eu"),DEPRECATED_OFFERS_PRIVACY_POLICY_NON_EU:"/".concat(Vn,"/offer/privacy-policy/non-eu")}),lr=[ir.MAIN,ir.LANDING_DONATION_ALERTS,ir.LANDING_BLOG_2125,ir.BLOG_REF_LANDING,ir.BLOG_CREATE,ir.FB_AUTH],sr=[ir.OFFERS,ir.OFFERS_USER,ir.OFFERS_PAYMENT_TERMS,ir.OFFERS_PRIVACY_POLICY,ir.OFFERS_COOKIE_POLICY,ir.OFFERS_REF_POLICY,ir.USER_AGREEMENT],cr=("".concat(ir.BLOG_STREAM,"/*"),ir.BLOG_STREAM_CHAT,[ir.BLOG_STREAM,ir.BLOG_STREAM_ONLY_CHAT,ir.LANDING_BLOG_2125,ir.BLOG_REF_LANDING,ir.EXTERNAL_ACCOUNT_LINK,ir.SUPPORT_HELP,ir.BECOME_AUTHOR]),ur=[ir.BLOG,ir.MEDIA],dr=ar(ar([],or(lr),!1),[ir.SUPPORT_HELP],!1),fr=[ir.BLOG_STREAM,ir.BLOG_STREAM_ONLY_CHAT,ir.BECOME_AUTHOR],mr=[ir.SETTINGS,ir.SETTINGS_PROFILE,ir.SETTINGS_SOCIAL,ir.SETTINGS_AGENTS,ir.SETTINGS_NOTIFICATIONS,ir.SETTINGS_EXTERNAL_APP,ir.SETTINGS_STREAM_MODERATION,ir.SETTINGS_BLACKLIST,ir.SEARCH_BY_BLOGS,ir.MESSAGES,ir.BLOG_PROMO],pr=ar(ar(ar([],or(lr),!1),or(sr),!1),[ir.SUPPORT_HELP,ir.BRAND,ir.BECOME_AUTHOR],!1),hr=ar(ar([],or(pr),!1),[ir.BLOG_PROMO],!1),vr=ar(ar([],or(sr),!1),[ir.SUPPORT_HELP,ir.BRAND,ir.BECOME_AUTHOR],!1),gr=[ir.BLOG_STREAM_ONLY_CHAT,ir.LANDING_BLOG_2125,ir.LANDING_DONATION_ALERTS,ir.EXTERNAL_ACCOUNT_LINK,ir.SUPPORT_HELP,ir.BECOME_AUTHOR],yr=[ir.BLOG_STREAM,ir.BLOG_STREAM_ONLY_CHAT,ir.MESSAGES,ir.LANDING_BLOG_2125,ir.LANDING_DONATION_ALERTS,ir.BLOG_REF_LANDING,ir.EXTERNAL_ACCOUNT_LINK,ir.SUPPORT_HELP,ir.BLOG_MEDIA_SINGLE_PAYMENT_DONATION,ir.BLOG_SINGLE_PAYMENT_DONATION,ir.BLOG_POST_SINGLE_PAYMENT_DONATION,ir.BECOME_AUTHOR,ir.FB_AUTH],_r=[ir.BECOME_AUTHOR,ir.FB_AUTH],Er={TUTORIAL_SUBSCRIPTION_LEVELS:"/".concat(Vn,"/texts/tutorial-subscription-levels/"),TUTORIAL_OFFERS:"/".concat(Vn,"/texts/tutorial-offers/"),OFFERS:"/".concat(Vn,"/offers/:offerType/:lang")},br=[ir.UI_KIT],Sr=ar([ir.APP_OAUTH_AUTHORIZE,ir.EXTERNAL_ACCOUNT_LINK],or(br),!1),Tr=(ir.CHANGE_PASSWORD,ir.BLOG_STREAM,ir.BLOG_STREAM_ONLY_CHAT,ir.MESSAGES,ir.LANDING_BLOG_2125,ir.SETTINGS_AGENT_ASSIGN,ir.SETTINGS_AGENT_RIGHTS,ir.SETTINGS_NEW_CARD,ir.BLOG_REF_LANDING,ir.SETTINGS,ir.SUPPORT_HELP,ir.BECOME_AUTHOR,ar(ar(ar([],or(lr),!1),or(sr),!1),[ir.SUPPORT_HELP,ir.BRAND,ir.BECOME_AUTHOR],!1)),Ir=(ar(ar([],or(Tr),!1),[ir.BLOG_PROMO],!1),ar(ar([],or(sr),!1),[ir.SUPPORT_HELP,ir.BRAND,ir.BECOME_AUTHOR],!1),ar(ar([],or(sr),!1),[ir.BECOME_AUTHOR,ir.FB_AUTH],!1),ir.BECOME_AUTHOR,ir.FB_AUTH,ir.BLOG_STREAM,ir.BLOG_STREAM_ONLY_CHAT,ir.MESSAGES,ir.LANDING_BLOG_2125,ir.BLOG_REF_LANDING,ir.SUPPORT_HELP,ir.BECOME_AUTHOR,ir.FB_AUTH,ir.BLOG_STREAM_ONLY_CHAT,ir.LANDING_BLOG_2125,ir.EXTERNAL_ACCOUNT_LINK,ir.SUPPORT_HELP,ir.BECOME_AUTHOR,[ir.BLOG_STREAM,ir.BLOG_STREAM_CHAT,ir.BLOG_STREAM_ONLY_CHAT]),Nr=[ir.UI_KIT],Cr={count:{subscribers:null},createdAt:null,deleted:!1,data:null,id:0,name:null,ownerId:null,price:null,description:"",thankMessage:{data:[],teaser:[],price:null},externalApps:{telegram:{isConfigured:!1,groups:[]},discord:{isConfigured:!1,data:{role:null}}},badges:[],smiles:[]},wr=new Date(2019,7),Or=function(e){return"00".concat(e).slice(-2)},Ar=function(e){var t=e.status,n=e.statusText,r=e.message,o=e.code,a=e.serverError,i=e.request,l=e.response;this.status=t,this.statusText=n,this.message=r,this.code=o,this.request=i,this.response=l,a?this.serverError={error:null==a?void 0:a.error,errorDescription:null==a?void 0:a.error_description,errorUri:null==a?void 0:a.error_uri}:this.response&&(this.serverError=this.response.data)},Pr=h.UNSET,Lr=function(){return Pr},Rr=function(){var e=Lr();return e===h.WEB_X||e===h.WEB_X_MOBILE||e===h.LETTERS_FOUNDER_X},kr=function(e){return{isFetching:!1,isFetched:!1,error:e}},Dr=function(e){return Boolean(e.error||e.isFetched)},Ur=function(){return Ur=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ur.apply(this,arguments)},Br=function(){return function(e,t,n,r,o,a){return void 0===o&&(o=null),void 0===a&&(a=null),r.case(n.started,(function(n,r){var o,i;return Ur(Ur({},n),((o={})[e]=Ur(Ur({},n[e]),{meta:Ur(Ur(Ur({},n[e].meta),(i={},i[t]={isFetching:!0,isFetched:!1,error:null},i)),(null==a?void 0:a.setMetaStarted)?a.setMetaStarted({store:n,payload:r}):{})}),o))})).case(n.failed,(function(n,r){var o,a,i=r.error;return Ur(Ur({},n),((o={})[e]=Ur(Ur({},n[e]),{meta:Ur(Ur({},n[e].meta),(a={},a[t]=kr(i),a))}),o))})).case(n.done,(function(n,r){var i,l,s;if(o){var c=o({store:n,result:r.result,params:r.params});s=null===c||Array.isArray(c)?c:Ur(Ur({},n[e].data),c)}else s=n[e].data;return Ur(Ur({},n),((i={})[e]=Ur(Ur({},n[e]),{data:s,meta:Ur(Ur(Ur({},n[e].meta),(l={},l[t]={isFetching:!1,isFetched:!0,error:null},l)),(null==a?void 0:a.setMetaDone)?a.setMetaDone({store:n,result:r.result,params:r.params}):{})}),i))}))}},xr=[Me.FB,Me.INSTAGRAM],Mr=function(){var e=nr(),t=e.hiddenMetaApps,n=t.isEnabled,r=t.countriesList,o=e.location.country;return n||r.includes(Number(o))},Fr=function(e,t){return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,navigator.clipboard.writeText(e)];case 1:return n.sent(),[3,4];case 2:return n.sent(),Gr(e),[3,4];case 3:return t&&t(),[7];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r},Gr=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},Hr=((An={})[mt.RUB]=Rr()?"":"₽",An[mt.UAH]="₴",An[mt.EUR]="€",An[mt.USD]="$",An),Wr=((Pn={})[mt.RUB]=1,Pn[mt.UAH]=1,Pn[mt.EUR]=.01,Pn[mt.USD]=.01,Pn),Vr=function(e){var t,n=e.amount,r=e.currency,o=e.useGrouping,a=void 0!==o&&o,i=e.separator,l=void 0===i?" ":i,s=e.showNegative,c=void 0===s||s,u=jr(r);switch(t=null==n||isNaN(n)||!c&&n<0?"":a?n.toLocaleString("ru"):n.toString(),r){case mt.RUB:case mt.UAH:t="".concat(t).concat(l).concat(u);break;case mt.USD:case mt.EUR:t="".concat(u).concat(l).concat(t)}return t},jr=function(e){return Hr[e]||""},zr=function(e){return e===ce.RU?mt.RUB:mt.USD},Yr=function(e){return e===mt.RUB},Kr=function(e,t){return Math.round(e*Wr[t])},qr=function(e,t){return e[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]},Xr=function(e){return function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(e),!1).sort((function(e,t){return e.publishTime===t.publishTime?t.createdAt-e.createdAt:t.publishTime-e.publishTime}))},Qr=n(32201),Jr=(0,Qr.getTranslation)("@common/utils.getAuthProviderTitle"),Zr={LIGHT:{0:"#D66E34",1:"#4A2DDA",2:"#00579F",3:"#8B3FFD",4:"#59A840",5:"#D45124",6:"#DE6489",7:"#20BBA1",8:"#F8B301",9:"#0099BB",10:"#1D90FF",11:"#E542FF",12:"#A36C59",13:"#8BA259",14:"#002F47",15:"#7008AF"},DARK:{0:"#D66E34",1:"#B8AAFF",2:"#00579F",3:"#8B3FFD",4:"#59A840",5:"#D45124",6:"#DE6489",7:"#20BBA1",8:"#F8B301",9:"#0099BB",10:"#7BBEFF",11:"#E542FF",12:"#A36C59",13:"#8BA259",14:"#00A9FF",15:"#A20BFF"}},$r=function(e,t){return void 0===t&&(t=!1),e.replace(t?/[\s-()]/g:/\D+/g,"")},eo=function(e){if(!(null==e?void 0:e.length))return"";var t=$r(e).replace(/^8((9.*)$)/,"7$1");return"+".concat(t)},to=function(e){return e.replace(/\&amp;/g,"&")},no=((Ln={})[Z.B]=1,Ln[Z.KB]=1024,Ln[Z.MB]=Math.pow(1024,2),Ln[Z.GB]=Math.pow(1024,3),Ln),ro=function(e,t,n){return e*no[t]/no[n]},oo=function(e){return function(t){return"".concat(e,":").concat(t)}},ao=n(54399),io=n(25067),lo=n(10059),so=n(16847),co=n(87912),uo=n(26842),fo=(0,Qr.getTranslation)("@common/utils.getLocalDatePattern"),mo=function(e,t,n){var r=nr().locale;return function(e,t){var n=(null==fo?void 0:fo.at)||(null==t?void 0:t.at);return e.replace(/&/,n?"'".concat(n,"'"):"")}(Dn[t||r][e],n)},po=(Rn=function(e,t){return Rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Rn(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Rn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ho=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return po(t,e),t.isSendLogsEnable=function(){return nr().isSendLogsEnable},t}(Yt.Log);ho.setIsServer(!1),window.FounderLogger=ho;var vo=function(e){return 1e3*e},go=function(e,t,n){void 0===n&&(n=!1);var r=nr().locale;try{return(0,ao.Z)(n?e:vo(e),mo(t),{locale:r===ce.RU?co.Z:uo.Z})}catch(n){return ho.error("\n\t\t\tFailed getFormattedDate\n\t\t\ttime: ".concat(e,"\n\t\t\tgetLocalDatePattern(patternKey): ").concat(mo(t),"\n\t\t\tlocale: ").concat(JSON.stringify(r===ce.RU?co.Z:uo.Z),"\n\t\t"),n),""}},yo=function(e){return go(e,"dd/MM/yyyy")},_o=function(e){var t,n=vo(e);return null===(t=go(n,(0,io.Z)(n)?"dd/MMM/&/HH/mm":"dd/MMM/yyyy/&/HH/mm",!0))||void 0===t?void 0:t.replace(".","")},Eo=function(e,t,n){return(0,ao.Z)((r=new Date(vo(e)),new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds())),mo("dd/MM/yyyy",t,n));var r},bo=Eo,So=Eo,To=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=new Date),Number((0,lo.Z)(t,{date:t.getDate()-e}).setUTCHours(0,0,0,0)/1e3)},Io=function(e,t){return Math.round((No(t)-No(e))/60/60/24)},No=function(e){return Math.floor(Number(e)/1e3)},Co=function(e){var t=nr().locale;return(0,so.Z)(1e3*e,{locale:t===ce.RU?co.Z:uo.Z})},wo=function(e,t){if(!e)return null;var n=No(Date.now()),r=go(e,"dd/MM/yy"),o=go(t||n,"dd/MM/yy");return r!==o?"".concat(r," - ").concat(o):r},Oo=(0,Qr.getTranslation)("@common/utils.getFormattedFileSize"),Ao=Object.keys(no),Po=Ao[Ao.length-1],Lo=function(e,t,n,r){if(void 0===t&&(t=Z.B),void 0===r&&(r=!1),n&&t!==n){var o=ro(e,t,n);return"".concat(o," ").concat(r?Oo[n]:n)}if(e>=1024&&t!==Po){var a=Ao[Ao.indexOf(t)+1];return Lo(ro(e,t,a),a,n,r)}var i=Number.isInteger(e)?e:(e||0).toFixed(2);return"".concat(i," ").concat(r?Oo[t]:t)},Ro=864e5,ko=function(e,t){var n=Math.abs(Number(t)-Number(e));return{years:Math.floor(n/31104e6),months:Math.floor(n/2592e6),weeks:Math.floor(n/6048e5),days:Math.floor(n/Ro),hours:Math.floor(n/36e5),minutes:Math.floor(n/6e4),seconds:Math.floor(n/1e3)}},Do=n(34126),Uo=function(){return Uo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Uo.apply(this,arguments)},Bo=function(e){var t=e.url,n=e.width,r=e.height,o=e.isCroped,a=e.isRetina,i=(0,Do.parseUrl)(t),l=i.url,s=i.query;o=void 0===o||o,a=void 0===a||a;var c=(0,Do.stringify)(Uo(Uo({},s),{mh:r?a?2*r:r:void 0,mw:n?a?2*n:n:void 0,croped:o?1:void 0}));return"".concat(l,"?").concat(c)},xo=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Mo=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Fo=function(e){var t,n,r=function(e){var t,n=$r(e),r=n.length>4?"?":"";return null===(t=new RegExp('"('.concat(n.slice(0,4)).concat(r,")")).exec('["93","358","355","213","1684","376","244","1264","672","1268","54","374","297","61","43","994","1242","973","880","1246","375","32","501","229","1441","975","591","387","267","55","246","673","359","226","257","855","237","1","238"," 345","236","235","56","86","61","61","57","269","242","243","682","506","225","385","53","357","420","45","253","1767","1849","593","20","503","240","291","372","251","500","298","679","358","33","594","689","241","220","995","49","233","350","30","299","1473","590","1671","502","44","224","245","595","509","379","504","852","36","354","91","62","98","964","353","44","972","39","1876","81","44","962","77","254","686","850","82","965","996","856","371","961","266","231","218","423","370","352","853","389","261","265","60","960","223","356","692","596","222","230","262","52","691","373","377","976","382","1664","212","258","95","264","674","977","31","599","687","64","505","227","234","683","672","1670","47","968","92","680","970","507","675","595","51","63","872","48","351","1939","974","40","7","250","262","590","290","1869","1758","590","508","1784","685","378","239","966","221","381","248","232","65","421","386","677","252","27","211","500","34","94","249","597","47","268","46","41","963","886","992","255","66","670","228","690","676","1868","216","90","993","1649","688","256","380","971","44","1","598","998","678","58","84","1284","1340","681","967","260","263"]'))||void 0===t?void 0:t.pop()}(e);return t=function(e){return e?function(e){return Mo(["+"],xo(e.split("").fill(/\d/)),!1)}(e):["+",/\d/]}(r),n=Un[r]||Un.default,Mo(Mo(Mo([],xo(t),!1),[" "],!1),xo(n),!1)},Go=n(89644),Ho=n.n(Go),Wo=function(e){return void 0,void 0,n=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){return t=nr().hosts.api,[2,Ho()({method:"POST",url:"".concat(t,"/v1").concat((0,Yt.getParametrizedUrl)(jn.STAT_GRAPHITE,{metric:e}))})]}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n},Vo=function(){function e(){}return e.escapeURL=function(t){return e.encode(e.decode(t),[Yt.ECharsDecoded.AMP,Yt.ECharsDecoded.DOUBLE_QUOTE,Yt.ECharsDecoded.QUOTE])},e.encode=Yt.htmlEntitiesEncode,e.decode=Yt.htmlEntitiesDecode,e}(),jo=function(e){var t;return null===(t=null==e?void 0:e.featureFlags)||void 0===t?void 0:t.allowViewFeed},zo=function(e){var t=e;return t||(t=window.navigator.userAgent),String(t).toLowerCase().includes("instagram")},Yo=function(e){return e&&e.isSystemMessage},Ko=function(e){return e&&!Yo(e)},qo=n(99666),Xo=null,Qo=function(e){var t=nr().conditionalFeatures[e]||{},n=t.threshold,r=void 0===n?0:n,o=t.users;return 1e3===r||!!Xo&&((void 0===o?[]:o).includes(Xo)||qo.unsigned(String(Xo).toLowerCase())%1e3<r)},Jo=null,Zo=function(e){var t=nr(),n=t.clientId,r=t.performanceMetrics.common[e]||{},o=r.threshold,a=void 0===o?0:o,i=r.users,l=void 0===i?[]:i;return!!r.enabled&&(1e3===a||l.includes(Jo)||qo.unsigned(n)%1e3<a)},$o=function(e){var t;return(null===(t=e.content)||void 0===t?void 0:t.match(/^\[".+\]$/g))?JSON.parse(e.content)[u.TEXT]:e.content},ea=[],ta=function(e){return!Array.isArray(e)||e.every((function(e){return na(e)}))},na=function(e){try{if(e.type===pe.TEXT){if(e.modificator===de.BLOCK_END)return!0;if(""===$o(e).trim())return!0}return!1}catch(e){return!1}};function ra(e){return e.type===pe.SMILE}function oa(e){return Boolean(e.type===pe.LINK||e.type===pe.TEXT&&e.modificator!==de.BLOCK_END)}var aa=function(e){return e.type===pe.MENTION};function ia(e){return e.type===pe.TEXT&&e.modificator===de.BLOCK_END}var la,sa,ca=function(){return ca=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ca.apply(this,arguments)},ua=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},da=function(e){for(var t,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var a=ca({},e);try{for(var i=ua(r),l=i.next();!l.done;l=i.next()){var s=l.value;delete a[s]}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},fa=n(62440),ma=((la={})[fa.ProviderCodes.VK]="vk",la[fa.ProviderCodes.OK]="ok",la[fa.ProviderCodes.FB]="fb",la[fa.ProviderCodes.MailRu]="mr",la[fa.ProviderCodes.Instagram]="instagram",la[fa.ProviderCodes.Google]="google",la[fa.ProviderCodes.Youtube]="youtube",la[fa.ProviderCodes.Twitch]="twitch",la[fa.ProviderCodes.Discord]="discord",la[fa.ProviderCodes.DiscordBot]="discord_bot",la[fa.ProviderCodes.VKPlay]="vkplay",la),pa=function(e){return(Object.entries(ma).find((function(t){return t[1]===e}))||[])[0]},ha=[],va=[],ga=function(){return ha.reduce((function(e,t){return Array.isArray(t.routes)?e.concat(t.routes).concat(t):e.concat(t)}),[])},ya=function(){return va.map((function(e){return e.path}))},_a=function(e,t,n){var r=document.location.origin+(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:e,postId:t});if(n){var o=(0,Do.stringify)({share:n});r+="?".concat(o)}return r},Ea=function(e){return window.open(e)},ba=((sa={})[De.VK]=function(e){return"https://vk.com/share.php?url=".concat(encodeURI(e))},sa[De.FB]=function(e){return"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURI(e))},sa[De.OK]=function(e){return"https://connect.ok.ru/offer?url=".concat(encodeURI(e))},sa[De.TWITTER]=function(e){return"https://twitter.com/share?url=".concat(encodeURI(e))},sa),Sa=function(e,t){return ba[e](t)},Ta=function(){function e(){}return Object.defineProperty(e,"size",{get:function(){return Object.keys(this.store).length},enumerable:!1,configurable:!0}),e.getItem=function(e){return this.store[e]?JSON.parse(this.store[e]):null},e.setItem=function(e,t){this.store[e]=JSON.stringify(t)},e.removeItem=function(e){delete this.store[e]},e.clear=function(){this.store={}},e.store={},e}(),Ia=function(){return Ia=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ia.apply(this,arguments)},Na=function(e,t){var n,r;return Ia(Ia({},e?((n={})["data-test-id"]=e,n):{}),t?((r={})["data-test-value"]=t,r):{})};function Ca(e){return Boolean(e.parentId)}function wa(e){return e.status===qe.SUCCESS}var Oa=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Aa=function(e,t,n){var r,o,a,i,l,s,c,u,d,f;if(e){try{for(var m=Oa(null===(d=null==e?void 0:e.comments)||void 0===d?void 0:d.data),p=m.next();!p.done;p=m.next()){if(n(b=p.value))return b;var h=b.replies;if(null==h?void 0:h.data)try{for(var v=(a=void 0,Oa(null==h?void 0:h.data)),g=v.next();!g.done;g=v.next()){var y=g.value;if(n(y))return y}}catch(e){a={error:e}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}if(null===(f=null==t?void 0:t.post)||void 0===f?void 0:f[e.id])try{for(var _=Oa(t.post[e.id]),E=_.next();!E.done;E=_.next()){var b;if(wa(b=E.value)&&n(b.publishedComment))return b.publishedComment}}catch(e){l={error:e}}finally{try{E&&!E.done&&(s=_.return)&&s.call(_)}finally{if(l)throw l.error}}if(null==t?void 0:t.thread){var S=Object.values(t.thread).flat();try{for(var T=Oa(S),I=T.next();!I.done;I=T.next()){var N=I.value;if(wa(N)&&n(N.publishedComment))return N.publishedComment}}catch(e){c={error:e}}finally{try{I&&!I.done&&(u=T.return)&&u.call(T)}finally{if(c)throw c.error}}}}};new Date("");var Pa=/^http(s)?:\/\/(www\.)?[-a-zA-Z0-9а-яёА-ЯЁ@:%._\+~#=]{1,256}\.[a-zA-Zа-яёА-ЯЁ0-9()]{1,6}([-a-zA-Zа-яёА-ЯЁ0-9()@:%_\+.~#?&//=]*)/i;function La(e){return/^(?:\+?[1-9]{1}[0-9]{7,13})$|^(?:)$/.test(e)}var Ra=function(e){var t=null,n=[];return e.data.forEach((function(e){e.type===pe.TEXT?n.push(e):e.type===pe.IMAGE&&(t=e)})),{cover:t,description:n}};function ka(e){return e.type===bt.TRIAL}function Da(e){return e.type===bt.TRIAL_PRIVATE}function Ua(e){return e.type===bt.DISCOUNT}var Ba={limit:5,sortBy:St.START_TIME_DESC},xa=function(e,t){return null==e?void 0:e.find((function(e){return e.id===t}))},Ma=function(e,t,n){var r=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(e),!1);return t.forEach((function(e){r.find((function(t){return t[n]===e[n]}))||r.push(e)})),r},Fa=function(e){return/^(https?:\/\/)(?:(?:[A-Za-z0-9\u0400-\u04FF](?:[A-Za-z0-9-\u0400-\u04FF]{0,61}[A-Za-z0-9\u0400-\u04FF])?\.)+(?:[A-Za-z\u0400-\u04FF]{2,6}\.?|[A-Za-z0-9-\u0400-\u04FF]{2,}(?:\!-)))(?:\/?|\/\S+)$/i.test(e)},Ga=function(e,t){return t>1?"".concat(e,"?page=").concat(t):e},Ha=n(3873);function Wa(e,t){return function(n){return n.case(e,(function(e,n){return(0,Ha.Uy)(e,(function(e){return t(e,n)}))}))}}function Va(e){return e.type===ut.REPLY}var ja=function(e){return Boolean(Object.values(ut).find((function(t){return t===e})))},za=function(e){return e.reduce((function(e,t){var n=t.total,r=t.unread,o=t.type;return ja(o)?(e.total+=n,e.unread+=r,e):e}),{total:0,unread:0})},Ya=function(e){return e.reduce((function(e,t){var n=t.unread,r=t.type;return ja(r)?e+=n:e}),0)},Ka=function(e){return e.split("_")[0]},qa=function(e){return JSON.parse(JSON.stringify(e))},Xa=function(){return nr().locale.split("_")[0]},Qa=function(){return Math.random().toString(36).slice(2)},Ja=[100,500,1e3,2e3,5e3,1e4,3e4,5e4],Za=function(e,t){if(!e)return t;var n=t.find((function(t){return t.id===e}));return t.filter((function(e){return e.price>=(null==n?void 0:n.price)})).sort((function(e,t){return e.price-t.price}))},$a=function(e){return"string"==typeof e&&parseFloat(e.replace(/[^.|\d]+/g,""))||0},ei=function(e,t,n){return window.location.origin+(0,Yt.getParametrizedUrl)(e,t,n)},ti=function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(e,2);return t[0],null!=t[1]})))},ni=function(e){var t,n,r=null==e?void 0:e.filter((function(e){return"text"===e.type})),o=(null===(t=null==e?void 0:e.find((function(e){return"text"===e.type})))||void 0===t?void 0:t.content)||"";try{n=Boolean(JSON.parse(o))}catch(e){n=!1}return{teaserText:o,teaserMediaDataText:n?r:[],teaserImage:null==e?void 0:e.find((function(e){return"image"===e.type}))}},ri=function(){return ri=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ri.apply(this,arguments)},oi=function(e){var t={},n=(0,Do.parseUrl)(e,{arrayFormat:"comma",parseBooleans:!0,parseNumbers:!0}).query;return Object.keys(n).forEach((function(e){var r=n[e];switch(e){case sn.POSTS_FROM:case sn.POSTS_TO:case sn.SUBSCRIPTION_LEVEL_ID:"number"==typeof r&&(t[e]=r);break;case sn.IS_ONLY_ALLOWED_POSTS:"boolean"==typeof r&&r&&(t[e]=r);break;case sn.POSTS_TAGS_IDS:Array.isArray(r)&&(t[e]=r.map(Number).filter(Boolean)),"number"==typeof r&&(t[e]=[r])}})),t},ai=function(e){var t=oi(e);return ri(ri({},{isOnlyAllowedPosts:!1,postsFrom:null,postsTo:null,postsTagsIds:[],subscriptionLevelId:null}),t)},ii=n(76635),li=function(){return li=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},li.apply(this,arguments)},si=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ci=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ui=function(e){return{isOnlyAllowedPosts:e.currentUser.hasPaidSubscriptions,isOnlyFreePosts:!1,isOnlyPaidPosts:!1,postsFrom:null,postsTo:null,postTags:[],searchQuery:""}},di=function(e,t){if(!e||!t)return!1;var n=li(li({},e),{postTags:ci([],si((null==e?void 0:e.postTags)||[]),!1).sort((function(e,t){return e.id-t.id}))}),r=li(li({},t),{postTags:ci([],si((null==t?void 0:t.postTags)||[]),!1).sort((function(e,t){return e.id-t.id}))});return(0,ii.isEqual)(n,r)},fi=function(e){return e===un.POSTS?"post":"media"},mi=function(e){var t="all";return e===ht.IMAGE&&(t="photo"),e===ht.VIDEO&&(t="video"),e===ht.AUDIO&&(t="audio"),nr().mediaAlbum[t]},pi=function(e){var t={},n=(0,Do.parseUrl)(e,{arrayFormat:"comma",parseBooleans:!0,parseNumbers:!0}).query;return Object.keys(n).forEach((function(e){var r=n[e];switch(e){case rn.POSTS_FROM:case rn.POSTS_TO:"number"==typeof r&&(t[e]=r);break;case rn.SUBSCRIPTION_LEVEL_ID:t[e]="number"==typeof r?[r]:JSON.parse(JSON.stringify(r));break;case rn.IS_ONLY_ALLOWED_POSTS:case rn.HAS_IMAGE:case rn.HAS_AUDIO:case rn.HAS_AUDIO_FILE:case rn.HAS_VIDEO:case rn.HAS_VIDEO_FILE:case rn.HAS_FILE:"boolean"==typeof r&&r&&(t[e]=r)}})),t},hi=(0,Qr.getTranslation)("@boosty/common/utils.promo"),vi=function(){return[{label:hi.discount,value:bt.DISCOUNT},{label:hi.trial,value:bt.TRIAL},{label:hi.trialPrivate,value:bt.TRIAL_PRIVATE}]},gi=function(e){var t;return!!Qo(r.PROMO)||Boolean((null===(t=null==e?void 0:e.allowedPromoTypes)||void 0===t?void 0:t.length)>0)},yi=function(e){var t;return!!Qo(r.PROMO)||Boolean(null===(t=null==e?void 0:e.blog)||void 0===t?void 0:t.allowedPromoTypes)&&e.blog.allowedPromoTypes.length>0},_i=function(){return _i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_i.apply(this,arguments)},Ei=function(e){return _i(_i({},e),{systemId:e.systemId.toLowerCase()})},bi="",Si="",Ti="";try{var Ii=(0,Do.parseUrl)(window.location.search).query,Ni=Ii.from,Ci=Ii.from_type;bi=window.sessionStorage.refFromQuery||Ni||"",Ti=window.sessionStorage.refType||Ci||""}catch(e){ho.error("Failed parse referer from query string: ",e)}try{if(window.sessionStorage.refFromHeader)Si=window.sessionStorage.refFromHeader;else if(document.referrer){var wi=document.referrer.match(/(^https?:\/\/)?([^/]+)/);document.referrer.includes("android-app")?Si=document.referrer:wi&&wi[2]&&(Si=wi[2].split(".").slice(-2).join("."))}}catch(e){ho.error("Failed parse document.referrer: ",e)}try{window.sessionStorage.refFromQuery=bi,window.sessionStorage.refFromHeader=Si,window.sessionStorage.refType=Ti}catch(e){ho.error("Failed write referer to sessionStorage: ",e)}var Oi,Ai,Pi,Li,Ri,ki,Di=function(){var e="";try{e=window.sessionStorage.refFromQuery||window.sessionStorage.refFromHeader}catch(e){ho.error("Failed read referer from sessionStorage: ",e)}return bi||Si||e},Ui=function(){return Ui=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ui.apply(this,arguments)},Bi=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},xi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Mi=function(){function e(e){this.api=e}return e.prototype.http=function(e){var t,n,r;return Bi(this,void 0,Promise,(function(){var o,a,i,l,s,c,u,d;return xi(this,(function(f){switch(f.label){case 0:o=this.api.getTransport(),a=/^https?/.test(e.url),i=/^\/?oauth.*/.test(e.url),l=/^\/?int\/self.*/.test(e.url),s=/^\/\*\/check$/.test(e.url),c=e.data&&!e.isNoProcessData?(0,Yt.getURIParams)(e.data):e.data||null,a||i||l||s||(e.url="/v1".concat(e.url)),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,o.http(Ui(Ui({},e),{data:c}))];case 2:return[2,f.sent()];case 3:throw u=f.sent(),d=new Ar(Ui(Ui({},u),{status:null===(t=u.response)||void 0===t?void 0:t.status,statusText:null===(n=u.response)||void 0===n?void 0:n.statusText,serverError:null===(r=u.response)||void 0===r?void 0:r.data,request:{url:e.url,method:e.method,data:c}})),ho.errorRequest(d),d;case 4:return[2]}}))}))},e.prototype.get=function(e){return Bi(this,void 0,Promise,(function(){return xi(this,(function(t){return e.method="GET",[2,this.http(e)]}))}))},e.prototype.post=function(e){return Bi(this,void 0,Promise,(function(){return xi(this,(function(t){return e.method="POST",[2,this.http(e)]}))}))},e.prototype.put=function(e){return Bi(this,void 0,Promise,(function(){return xi(this,(function(t){return e.method="PUT",[2,this.http(e)]}))}))},e.prototype.delete=function(e){return Bi(this,void 0,Promise,(function(){return xi(this,(function(t){return e.method="DELETE",e.headers={"Content-Type":"application/x-www-form-urlencoded"},[2,this.http(e)]}))}))},e}(),Fi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gi=function(){return Gi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gi.apply(this,arguments)},Hi=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Wi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fi(t,e),t.prototype.assignAgent=function(e,t){return Hi(this,void 0,void 0,(function(){return Wi(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.BLOG_AGENT_ASSIGN,{blogUrl:e}),data:t})]}))}))},t.prototype.unassignAgent=function(e,t){return Hi(this,void 0,void 0,(function(){return Wi(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.BLOG_AGENT_UNASSIGN,{userId:t,blogUrl:e})})]}))}))},t.prototype.fetchAgents=function(e,t){return void 0===t&&(t={}),Hi(this,void 0,void 0,(function(){return Wi(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_AGENT_LIST,{blogUrl:e},Gi({},t))})]}))}))},t}(Mi),ji=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ji(t,e),t.prototype.fetchInfo=function(e){return t=this,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(Jn.VERIFICATION),data:e})]}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}));var t,n,r},t}(Mi),Yi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ki=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},qi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yi(t,e),t.prototype.signUp=function(e){return Ki(this,void 0,void 0,(function(){return qi(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.AUTH_BY_EMAIL_SIGN_UP),data:e})]}))}))},t.prototype.signIn=function(e){return Ki(this,void 0,void 0,(function(){return qi(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.AUTH_BY_EMAIL_SIGN_IN),data:e})]}))}))},t.prototype.changePassword=function(e){return Ki(this,void 0,void 0,(function(){return qi(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.AUTH_BY_EMAIL_CHANGE_PASSWORD),data:e})]}))}))},t.prototype.changePasswordWithCode=function(e){return Ki(this,void 0,void 0,(function(){return qi(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.AUTH_BY_EMAIL_CHANGE_PASSWORD_WITH_CODE),data:e})]}))}))},t.prototype.sendLinkForChangePassword=function(e){return Ki(this,void 0,void 0,(function(){return qi(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.AUTH_BY_EMAIL_SEND_LINK_FOR_CHANGE_PASSWORD),data:e})]}))}))},t}(Mi),Qi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ji=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Zi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},$i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qi(t,e),t.prototype.fetchList=function(e){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BADGE_LIST,{blogUrl:e})})]}))}))},t.prototype.update=function(e,t,n){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(r){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.BADGE,{blogUrl:e,badgeId:t}),data:n})]}))}))},t.prototype.uploadBadgeImage=function(e,t,n){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(r){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.BADGE_IMAGE,{blogUrl:e,sizeName:t}),data:n,isNoProcessData:!0})]}))}))},t.prototype.create=function(e,t){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.BADGE_CREATE,{blogUrl:e}),data:t})]}))}))},t.prototype.remove=function(e,t){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.BADGE,{blogUrl:e,badgeId:t})})]}))}))},t}(Mi),el=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},nl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},rl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return el(t,e),t.prototype.fetchBlackList=function(){return tl(this,void 0,void 0,(function(){return nl(this,(function(e){return[2,this.get({url:jn.BLOG_BLACKLIST})]}))}))},t.prototype.putToBlackList=function(e,t){return tl(this,void 0,void 0,(function(){return nl(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.BLOG_BLACKLIST_ADD_USER,{userId:t,blogUrl:e})})]}))}))},t.prototype.removeFromBlackList=function(e,t){return tl(this,void 0,void 0,(function(){return nl(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.BLOG_BLACKLIST_ADD_USER,{userId:t,blogUrl:e})})]}))}))},t}(Mi),ol=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),al=function(){return al=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},al.apply(this,arguments)},il=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ll=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},sl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ol(t,e),t.prototype.fetch=function(e){return il(this,void 0,void 0,(function(){return ll(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG,{blogUrl:e})})]}))}))},t.prototype.fetchSubscriptionLevels=function(e,t,n){return void 0===t&&(t=!0),il(this,void 0,void 0,(function(){return ll(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_SUBSCRIPTION_LEVELS,{blogUrl:e},{show_deleted:n,show_free_level:t})})]}))}))},t.prototype.create=function(e){return il(this,void 0,void 0,(function(){return ll(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.BLOG_CREATE),data:e})]}))}))},t.prototype.update=function(e,t){return il(this,void 0,void 0,(function(){return ll(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.BLOG,{blogUrl:e}),data:t})]}))}))},t.prototype.coverUpload=function(e,t){return il(this,void 0,void 0,(function(){var n,r;return ll(this,(function(o){return n=nr().hosts.uploadImg,r=n?(0,Yt.getParametrizedUrl)("".concat(n,"/v1").concat(jn.BLOG_COVER_EDIT),{blogUrl:e}):(0,Yt.getParametrizedUrl)(jn.BLOG_COVER_EDIT,{blogUrl:e}),[2,this.put({url:r,data:t,isNoProcessData:!0})]}))}))},t.prototype.downgradeSubscription=function(e,t,n){return il(this,void 0,void 0,(function(){return ll(this,(function(r){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.BLOG_DOWNGRADE,{blogUrl:e,levelId:t}),data:n})]}))}))},t.prototype.fetchPosts=function(e,t){return void 0===t&&(t={}),il(this,void 0,void 0,(function(){return ll(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_POSTS,{blogUrl:e},al({},t))})]}))}))},t.prototype.fetchPostsTags=function(e){return il(this,void 0,void 0,(function(){return ll(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_POSTS_TAGS,{blogUrl:e})})]}))}))},t.prototype.unsubscribe=function(e,t){return il(this,void 0,void 0,(function(){return ll(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.BLOG_UNSUBSCRIBE,{blogUrl:e}),data:t})]}))}))},t.prototype.follow=function(e){return il(this,void 0,void 0,(function(){return ll(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.BLOG_FOLLOW,{blogUrl:e})})]}))}))},t.prototype.complain=function(e){return il(this,void 0,void 0,(function(){return ll(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.BLOG_COMPLAIN,{blogUrl:e})})]}))}))},t.prototype.revertUnsubscribe=function(e){return il(this,void 0,void 0,(function(){return ll(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.BLOG_REVERT_CHANGES,{blogUrl:e})})]}))}))},t.prototype.updateSocialLinks=function(e,t){return il(this,void 0,void 0,(function(){return ll(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.BLOG_SOCIAL_LINKS,{blogUrl:e}),data:t})]}))}))},t.prototype.searchUser=function(e,t,n){return il(this,void 0,void 0,(function(){return ll(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_SEARCH_USER,{blogUrl:e},{chunk:t,limit:n||20})})]}))}))},t.prototype.fetchRef=function(e){return il(this,void 0,void 0,(function(){return ll(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_REF_LINK,{blogUrl:e})})]}))}))},t.prototype.updateFlag=function(e,t){return il(this,void 0,void 0,(function(){return ll(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.BLOG_FLAG_SETTINGS,{blogUrl:e,flag:t.flag}),data:{value:t.value}})]}))}))},t.prototype.fetchPostDonations=function(e,t){return il(this,void 0,void 0,(function(){return ll(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_DONATIONS_SALES,{blogUrl:e},al({},t))})]}))}))},t.prototype.updateRssSettings=function(e,t){return il(this,void 0,void 0,(function(){return ll(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.BLOG_RSS_SETTINGS,{blogUrl:e}),data:t})]}))}))},t.prototype.fetchRssLink=function(e,t){return void 0===t&&(t={}),il(this,void 0,void 0,(function(){return ll(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_RSS_URL,{blogUrl:e},al({},t))})]}))}))},t.prototype.activateTrialSubscription=function(e,t,n,r){return il(this,void 0,void 0,(function(){return ll(this,(function(o){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.BLOG_TRIAL_SUBSCRIBE,{blogUrl:e,levelId:t,promoId:n}),data:r})]}))}))},t}(Mi),cl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ul=function(){return ul=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ul.apply(this,arguments)},dl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},fl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},ml=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cl(t,e),t.prototype.fetch=function(e,t,n,r,o){return void 0===r&&(r=2),dl(this,void 0,void 0,(function(){return fl(this,(function(a){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.POST,{blogUrl:e,postId:t},{comments_limit:n,reply_limit:r,comment_id:o})})]}))}))},t.prototype.create=function(e,t){return dl(this,void 0,void 0,(function(){return fl(this,(function(n){return t.subscription_level_id||delete t.subscription_level_id,t.has_chat||(t.has_chat=!1),[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.POST_CREATE,{blogUrl:e}),data:t})]}))}))},t.prototype.update=function(e,t,n){return dl(this,void 0,void 0,(function(){return fl(this,(function(r){return n.subscription_level_id||delete n.subscription_level_id,[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.POST,{blogUrl:e,postId:t}),data:n})]}))}))},t.prototype.remove=function(e,t){return dl(this,void 0,void 0,(function(){return fl(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.POST,{blogUrl:e,postId:t})})]}))}))},t.prototype.like=function(e,t){return dl(this,void 0,void 0,(function(){return fl(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.POST_LIKE,{blogUrl:e,postId:t})})]}))}))},t.prototype.unlike=function(e,t){return dl(this,void 0,void 0,(function(){return fl(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.POST_LIKE,{blogUrl:e,postId:t})})]}))}))},t.prototype.reaction=function(e,t,n){return dl(this,void 0,void 0,(function(){return fl(this,(function(r){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.POST_REACTION,{blogUrl:e,postId:t}),data:{reaction:n}})]}))}))},t.prototype.removeReaction=function(e,t){return dl(this,void 0,void 0,(function(){return fl(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.POST_REACTION,{blogUrl:e,postId:t})})]}))}))},t.prototype.complain=function(e,t){return dl(this,void 0,void 0,(function(){return fl(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.POST_COMPLAIN,{blogUrl:e,postId:t})})]}))}))},t.prototype.fetchComments=function(e,t,n){return void 0===n&&(n={}),dl(this,void 0,void 0,(function(){return fl(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.COMMENTS,{blogUrl:e,id:t},ul({},n))})]}))}))},t.prototype.complainComment=function(e,t,n){return dl(this,void 0,void 0,(function(){return fl(this,(function(r){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.COMMENTS_COMPLAIN,{blogUrl:e,postId:t,commentId:n})})]}))}))},t.prototype.reactionComment=function(e,t,n,r){return dl(this,void 0,void 0,(function(){return fl(this,(function(o){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.COMMENTS_REACTION,{blogUrl:e,postId:t,commentId:n}),data:{reaction:r}})]}))}))},t.prototype.removeReactionComment=function(e,t,n){return dl(this,void 0,void 0,(function(){return fl(this,(function(r){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.COMMENTS_REACTION,{blogUrl:e,postId:t,commentId:n})})]}))}))},t.prototype.createComment=function(e,t,n,r){return dl(this,void 0,void 0,(function(){return fl(this,(function(o){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.COMMENTS,{blogUrl:e,id:t}),data:{data:n,reply_id:r}})]}))}))},t.prototype.removeComment=function(e,t,n){return dl(this,void 0,void 0,(function(){return fl(this,(function(r){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.COMMENTS_DELETE,{blogUrl:e,postId:t,commentId:n})})]}))}))},t.prototype.restoreComment=function(e,t,n){return dl(this,void 0,void 0,(function(){return fl(this,(function(r){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.COMMENTS_RESTORE,{blogUrl:e,postId:t,commentId:n})})]}))}))},t.prototype.fetchDeferredAccessLevels=function(e,t){return dl(this,void 0,void 0,(function(){return fl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DEFERRED_ACCESS,{blogUrl:e,id:t})})]}))}))},t.prototype.updateDeferredAccessLevels=function(e,t,n){return dl(this,void 0,void 0,(function(){return fl(this,(function(r){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.DEFERRED_ACCESS,{blogUrl:e,id:t}),data:n})]}))}))},t.prototype.removeDeferredAccessLevels=function(e,t){return dl(this,void 0,void 0,(function(){return fl(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.DEFERRED_ACCESS,{blogUrl:e,id:t})})]}))}))},t.prototype.updateComment=function(e,t,n,r){return dl(this,void 0,void 0,(function(){return fl(this,(function(o){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.POST_COMMENT,{blogUrl:e,postId:t,commentId:n}),data:r})]}))}))},t}(Mi),pl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},vl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},gl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pl(t,e),t.prototype.fetch=function(e,t,n){return void 0===t&&(t=10),hl(this,void 0,void 0,(function(){return vl(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT,{blogUrl:e},{limit:t,offset:n})})]}))}))},t.prototype.create=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT,{blogUrl:e}),data:t})]}))}))},t.prototype.remove=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_DELETE,{blogUrl:e,messageId:t})})]}))}))},t.prototype.clean=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_CLEAN,{blogUrl:e},{user_id:t})})]}))}))},t.prototype.fetchBanStat=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_BAN_STAT,{blogUrl:e},{user_id:t})})]}))}))},t.prototype.blockUser=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_BAN,{blogUrl:e}),data:t})]}))}))},t.prototype.unblockUser=function(e,t){var n=t.by_stream,r=t.user_id;return hl(this,void 0,void 0,(function(){return vl(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_BAN,{blogUrl:e},{by_stream:n,user_id:r})})]}))}))},t.prototype.fetchStopWords=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_STOP_WORD,{blogUrl:e},{limit:t.limit,offset:t.offset}),data:t})]}))}))},t.prototype.addStopWord=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_STOP_WORD,{blogUrl:e}),data:t})]}))}))},t.prototype.removeStopWord=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_STOP_WORD,{blogUrl:e},{word:t.word})})]}))}))},t.prototype.fetchModerators=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_MODERATOR,{blogUrl:e},{limit:t.limit,offset:t.offset})})]}))}))},t.prototype.addModerator=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_MODERATOR,{blogUrl:e}),data:{user_id:t}})]}))}))},t.prototype.removeModerator=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_REMOVE_MODERATOR,{blogUrl:e,userId:t})})]}))}))},t.prototype.fetchChatUsers=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_USERS,{blogUrl:e},{search_query:t,with_bans:!0})})]}))}))},t.prototype.fetchChatUserSearchList=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_USER_SEARCH_LIST,{blogUrl:e},{limit:t.limit,search_query:t.search_query})})]}))}))},t.prototype.fetchChatUserStat=function(e,t){return hl(this,void 0,void 0,(function(){return vl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CHAT_USER_STAT,{blogUrl:e},{user_id:t})})]}))}))},t}(Mi),yl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_l=function(){return _l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_l.apply(this,arguments)},El=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},bl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Sl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yl(t,e),t.prototype.fetchCsv=function(e){return El(this,void 0,void 0,(function(){var t,n;return bl(this,(function(r){return t=(0,Yt.getFromCookies)(U.AUTH),n=JSON.parse(t),[2,this.get({url:e,responseType:"blob",headers:{Authorization:"Bearer ".concat(n.accessToken)}})]}))}))},t.prototype.fetchReport=function(e,t,n){return El(this,void 0,void 0,(function(){return bl(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_STAT_REPORT,{blogUrl:e,dataType:t},_l({},n))})]}))}))},t.prototype.fetchReportInfo=function(e,t){return El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_STAT_REPORT_INFO,{blogUrl:e,dataType:t})})]}))}))},t.prototype.fetchBlogBroadcastMessageStats=function(e,t,n){return El(this,void 0,void 0,(function(){return bl(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_BROADCAST_MESSAGE_STATS,{blogUrl:e},{offset:t,limit:n})})]}))}))},t.prototype.fetchBlogHoldsStats=function(e,t,n){return El(this,void 0,void 0,(function(){return bl(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_HOLDS_STATS,{blogUrl:e},{offset:t,limit:n})})]}))}))},t.prototype.fetchBlogBaseStat=function(e){return El(this,void 0,void 0,(function(){return bl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_STAT_BASE,{blogUrl:e})})]}))}))},t.prototype.fetchBlogMetrics=function(e,t){return El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_STAT_METRICS,{blogUrl:e},_l({},t))})]}))}))},t.prototype.fetchBlogCharts=function(e,t){return El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_STAT_CHARTS,{blogUrl:e},_l({},t))})]}))}))},t.prototype.fetchBlogEvents=function(e,t){return El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_STAT_EVENTS,{blogUrl:e},_l({},t))})]}))}))},t.prototype.fetchBlogSearchUsers=function(e,t){return El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_STAT_SEARCH,{blogUrl:e},_l({},t))})]}))}))},t.prototype.fetchBlogRefs=function(e){return El(this,void 0,void 0,(function(){return bl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_STAT_REF,{blogUrl:e})})]}))}))},t.prototype.fetchBlogRefsUsers=function(e,t){return El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_STAT_REF_USERS,{blogUrl:e},_l({},t))})]}))}))},t.prototype.fetchSubscribers=function(e,t){return void 0===t&&(t={}),El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_SUBSCRIBERS,{blogUrl:e},_l({},t))})]}))}))},t.prototype.fetchDonations=function(e,t){return El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_DONATIONS,{blogUrl:e},_l({},t))})]}))}))},t.prototype.fetchPostSales=function(e,t){return El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_POST_SALES,{blogUrl:e},_l({},t))})]}))}))},t.prototype.fetchPostSalesByDate=function(e,t){return El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_POST_SALES_BY_DATE,{blogUrl:e},_l({},t))})]}))}))},t.prototype.fetchPostSalesDaysByMonth=function(e,t){return El(this,void 0,void 0,(function(){return bl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_POST_SALES_DAYS_BY_MONTH,{blogUrl:e},_l({},t))})]}))}))},t}(Mi);!function(e){e.onTime="on_time",e.payments="payments"}(Oi||(Oi={})),function(e){e.time="time",e.amount="amount"}(Ai||(Ai={})),function(e){e.time="time",e.amount="amount"}(Pi||(Pi={})),function(e){e.ASC="lt",e.DESC="gt"}(Li||(Li={})),function(e){e.onTime="time",e.payments="payments"}(Ri||(Ri={})),function(e){e[e.all=0]="all",e[e.day=1]="day",e[e.week=7]="week",e[e.month=30]="month",e[e.year=365]="year"}(ki||(ki={}));var Tl,Il,Nl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cl=function(){return Cl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cl.apply(this,arguments)},wl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Ol=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Al=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Nl(t,e),t.prototype.token=function(e,t){return wl(this,void 0,void 0,(function(){return Ol(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_TOKEN,{dialogId:e}),data:JSON.stringify(t),isNoProcessData:!0})]}))}))},t.prototype.fetchList=function(e){return wl(this,void 0,void 0,(function(){return Ol(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_LIST,{},Cl({},e))})]}))}))},t.prototype.fetchDialogueByUserId=function(e){return wl(this,void 0,void 0,(function(){return Ol(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_BY_USER_ID,{},Cl({},e))})]}))}))},t.prototype.create=function(e){return wl(this,void 0,void 0,(function(){return Ol(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_CREATE),data:e})]}))}))},t.prototype.fetchDialog=function(e){return wl(this,void 0,void 0,(function(){return Ol(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DIALOG,{dialogId:e})})]}))}))},t.prototype.fetchDialogShort=function(e){return wl(this,void 0,void 0,(function(){return Ol(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_SHORT,{dialogId:e})})]}))}))},t.prototype.fetchMessages=function(e,t){return wl(this,void 0,void 0,(function(){return Ol(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_MESSAGE_LIST,{dialogId:e},Cl({},t))})]}))}))},t.prototype.sendMessage=function(e,t,n,r){return wl(this,void 0,void 0,(function(){return Ol(this,(function(o){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_MESSAGE_CREATE,{dialogId:e}),data:{data:t,teaser_data:n,price:r}})]}))}))},t.prototype.sendBroadcastMessage=function(e,t){return wl(this,void 0,void 0,(function(){return Ol(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_BROADCAST_MESSAGE_CREATE,{blogUrl:e}),data:t})]}))}))},t.prototype.markAsReadAll=function(e){return wl(this,void 0,void 0,(function(){return Ol(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_READ_ALL,{},Cl({},e))})]}))}))},t.prototype.markAsReadMessage=function(e){return wl(this,void 0,void 0,(function(){return Ol(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_MESSAGE_READ,{messageId:e})})]}))}))},t.prototype.deleteMessage=function(e,t){return wl(this,void 0,void 0,(function(){return Ol(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_MESSAGE,{dialogId:e},Cl({},t))})]}))}))},t.prototype.fetchMessage=function(e){return wl(this,void 0,void 0,(function(){return Ol(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_CURRENT_MESSAGE,{messageId:e})})]}))}))},t.prototype.fetchContacts=function(e){return wl(this,void 0,void 0,(function(){return Ol(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_CONTACTS,{},Cl({},e))})]}))}))},t.prototype.fetchMailingList=function(e,t){return wl(this,void 0,void 0,(function(){return Ol(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_MAILING_LIST,{blogUrl:e},{sort_by:t.sort_by,sort_order:t.sort_order,offset:t.offset,limit:t.limit}),data:{subscription_months_duration_from:t.subscription_months_duration_from,subscription_months_duration_to:t.subscription_months_duration_to,money_spent_from:t.money_spent_from,money_spent_to:t.money_spent_to,paid_subscription_canceled:t.paid_subscription_canceled,subscription_level_ids:t.subscription_level_ids,chunk:t.chunk}})]}))}))},t.prototype.getCanWriteWithDonationFlag=function(e,t){return void 0===t&&(t={}),wl(this,void 0,void 0,(function(){return Ol(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DIALOG_CAN_WRITE_WITH_DONATION,{blogUrl:e},Cl({},t))})]}))}))},t}(Mi),Pl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ll=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Rl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},kl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pl(t,e),t.prototype.fetchTelegramUrl=function(){return Ll(this,void 0,void 0,(function(){return Rl(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.EXTERNAL_APPS_TELEGRAM_CONNECTION_URL)})]}))}))},t.prototype.disconnectDiscordServer=function(){return Ll(this,void 0,void 0,(function(){return Rl(this,(function(e){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.EXTERNAL_APPS_DISCORD_BOT)})]}))}))},t.prototype.fetchDiscordRoles=function(){return Ll(this,void 0,void 0,(function(){return Rl(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.EXTERNAL_APPS_DISCORD_ROLE)})]}))}))},t.prototype.fetchTelegramGroups=function(e){return Ll(this,void 0,void 0,(function(){return Rl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.EXTERNAL_APPS_TELEGRAM_GROUP,{blogUrl:e})})]}))}))},t}(Mi),Dl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ul=function(){return Ul=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ul.apply(this,arguments)},Bl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},xl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ml=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dl(t,e),t.prototype.fetchFeedPosts=function(e){return void 0===e&&(e={}),Bl(this,void 0,void 0,(function(){return xl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.FEED_POSTS,void 0,Ul(Ul({},e),{only_allowed:e.only_allowed||"false"}))})]}))}))},t.prototype.fetchFeedVideoStreams=function(e){return void 0===e&&(e={}),Bl(this,void 0,void 0,(function(){return xl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.FEED_VIDEO_STREAM,void 0,Ul({},e))})]}))}))},t.prototype.updateFeedSessionTime=function(){return Bl(this,void 0,void 0,(function(){return xl(this,(function(e){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.FEED_SESSION_CREATED_AT)})]}))}))},t}(Mi),Fl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Hl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Wl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fl(t,e),t.prototype.fetch=function(e){return Gl(this,void 0,void 0,(function(){return Hl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.GIFT,{giftKey:e})})]}))}))},t.prototype.fetchGifts=function(){return Gl(this,void 0,void 0,(function(){return Hl(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.GIFT_LIST)})]}))}))},t.prototype.accept=function(e,t){return Gl(this,void 0,void 0,(function(){return Hl(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.GIFT_ACCEPT,{giftKey:e}),data:{is_off:t}})]}))}))},t.prototype.send=function(e,t){return Gl(this,void 0,void 0,(function(){return Hl(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.GIFT_SEND,{giftKey:e}),data:{email:t}})]}))}))},t.prototype.changeAnonymity=function(e,t){return Gl(this,void 0,void 0,(function(){return Hl(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.GIFT,{giftKey:e}),data:{is_anonymous:t}})]}))}))},t}(Mi),Vl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},zl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Yl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vl(t,e),t.prototype.fetchDonation=function(e){return jl(this,void 0,void 0,(function(){return zl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(Kn.DONATION,{donationId:e})})]}))}))},t.prototype.fetchGift=function(e){return jl(this,void 0,void 0,(function(){return zl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(Kn.GIFT,{giftKey:e})})]}))}))},t.prototype.fetchUsers=function(e){return jl(this,void 0,void 0,(function(){return zl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(Kn.USERS,{},{user_ids:e})})]}))}))},t.prototype.fetchComments=function(e){return jl(this,void 0,void 0,(function(){return zl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(Kn.COMMENT,{commentId:e})})]}))}))},t.prototype.fetchMessage=function(e){return jl(this,void 0,void 0,(function(){return zl(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(Kn.MESSAGE,{messageId:e})})]}))}))},t.prototype.sendLetter=function(e){return jl(this,void 0,void 0,(function(){return zl(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(Kn.SEND_LETTER),data:e})]}))}))},t.prototype.fetchBlogStatReportInfo=function(e,t){return jl(this,void 0,void 0,(function(){return zl(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(Kn.BLOG_STAT_REPORT_INFO,{blogUrl:e,dataType:t})})]}))}))},t}(Mi),Kl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ql=function(){return ql=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ql.apply(this,arguments)},Xl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Ql=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Jl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kl(t,e),t.prototype.uploadImage=function(e){return Xl(this,void 0,void 0,(function(){var t,n;return Ql(this,(function(r){return t=nr().hosts.uploadImg,n=t?(0,Yt.getParametrizedUrl)("".concat(t,"/v1").concat(jn.MEDIA_DATA_IMAGE_UPLOAD)):(0,Yt.getParametrizedUrl)(jn.MEDIA_DATA_IMAGE_UPLOAD),[2,this.post({url:n,data:e,isNoProcessData:!0})]}))}))},t.prototype.createUploadFileContainer=function(){return Xl(this,void 0,void 0,(function(){return Ql(this,(function(e){return[2,this.post({url:(0,Yt.getParametrizedUrl)("".concat(jn.MEDIA_DATA_FILE_CONTAINER_CREATE,"?rnd=").concat(Math.random()))})]}))}))},t.prototype.uploadFileChunk=function(e,t,n,r,o){return Xl(this,void 0,void 0,(function(){return Ql(this,(function(a){return[2,this.post({url:e,data:t,headers:ql({"Content-Type":"application/octet-stream"},n),getAbort:o,isNoProcessData:!0,onUploadProgress:r})]}))}))},t.prototype.createUploadAudioContainer=function(){return Xl(this,void 0,void 0,(function(){return Ql(this,(function(e){return[2,this.post({url:(0,Yt.getParametrizedUrl)("".concat(jn.MEDIA_DATA_AUDIO_CONTAINER_CREATE,"?rnd=").concat(Math.random()))})]}))}))},t.prototype.uploadAudioChunk=function(e,t,n,r,o){return Xl(this,void 0,void 0,(function(){return Ql(this,(function(a){return[2,this.post({url:e,data:t,headers:ql({"Content-Type":"application/octet-stream"},n),getAbort:o,isNoProcessData:!0,onUploadProgress:r})]}))}))},t.prototype.getSoundcloudTrackEmbed=function(e){return Xl(this,void 0,void 0,(function(){var t,n,r;return Ql(this,(function(o){switch(o.label){case 0:return[4,this.api.getTransport().http({url:(0,Yt.getParametrizedUrl)("https://soundcloud.com/oembed?format=js&url=:url&iframe=true",{url:e})})];case 1:if(t=o.sent(),n=JSON.parse(t.data.substring(1,t.data.length-2)),null==(r=n.html.match(/<iframe(?:[^>]*) src\s*=\s*['|"](.+?)['|"]/i)))throw new Ar({message:"Failed to extract embed url"});return[2,{url:r[1],title:n.title}]}}))}))},t.prototype.createUploadVideoContainer=function(e){return Xl(this,void 0,void 0,(function(){return Ql(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.MEDIA_DATA_VIDEO_UPLOAD_URL,{},ql({},e))})]}))}))},t.prototype.uploadVideoChunk=function(e,t,n,r,o){return Xl(this,void 0,void 0,(function(){return Ql(this,(function(a){return[2,this.post({url:e,data:t,headers:ql({"Content-Type":"application/octet-stream"},n),getAbort:o,isNoProcessData:!0,onUploadProgress:r})]}))}))},t.prototype.videoUploadFinish=function(e){return Xl(this,void 0,void 0,(function(){return Ql(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.MEDIA_DATA_VIDEO_UPLOAD_FINISH,{id:e})})]}))}))},t}(Mi),Zl=((Tl={})[ge.COMMENT]="new_comment",Tl[ge.DONATION]="new_donation",Tl[ge.MESSAGE]="new_message",Tl[ge.MESSAGE_PURCHASE]="buy_message",Tl[ge.NEWS]="other_news",Tl[ge.NEW_PROMO]="new_promo",Tl[ge.NEW_REFERRAL_REGISTRATION]="new_referal",Tl[ge.NEW_TARGET]="new_target",Tl[ge.POST]="new_post",Tl[ge.POST_PURCHASE]="buy_post",Tl[ge.REFERRAL_IS_BLOGGER]="new_referal_blogger",Tl[ge.REPLY]="new_reply",Tl[ge.STREAM]="new_stream",Tl[ge.SUBSCRIBER]="new_subscriber",Tl),$l=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),es=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ts=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},ns=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $l(t,e),t.prototype.fetchNotificationSettings=function(e){return es(this,void 0,void 0,(function(){return ts(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.NOTIFICATION_SETTINS,void 0,{transports:e})})]}))}))},t.prototype.updateNotificationSettings=function(e){var t=e.transport,n=e.notificationType,r=e.value;return es(this,void 0,void 0,(function(){return ts(this,(function(e){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.NOTIFICATION_SETTINGS_UPDATE,{transport:t,switch:Zl[n]}),data:{value:r}})]}))}))},t}(Mi),rs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),os=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},as=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},is=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rs(t,e),t.prototype.fetchNotifications=function(){return os(this,void 0,void 0,(function(){return as(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.NOTIFICATIONS)})]}))}))},t.prototype.markAsRead=function(e){return os(this,void 0,void 0,(function(){return as(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.NOTIFICATIONS_READ),data:{event_id:e}})]}))}))},t.prototype.remove=function(e){return os(this,void 0,void 0,(function(){return as(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.NOTIFICATION,{eventId:e})})]}))}))},t.prototype.removeAll=function(e){return os(this,void 0,void 0,(function(){return as(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.NOTIFICATIONS),data:{event_id:e}})]}))}))},t}(Mi),ls=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ss=function(){return ss=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ss.apply(this,arguments)},cs=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},us=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},ds=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ls(t,e),t.prototype.getDmrPageUrl=function(e,t){return cs(this,void 0,void 0,(function(){return us(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_GET_URL,{levelId:e}),data:t})]}))}))},t.prototype.removePaymentBind=function(e){return cs(this,void 0,void 0,(function(){return us(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_DELETE_BIND,{bindId:e})})]}))}))},t.prototype.getSinglePaymentGiftSubscriptionDmrPageUrl=function(e,t){return cs(this,void 0,void 0,(function(){return us(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_GET_SINGLE_PAYMENT_GIFT_SUBSCRIPTION_URL,{levelId:e}),data:t})]}))}))},t.prototype.getSinglePaymentDonationDmrPageUrl=function(e,t,n){return cs(this,void 0,void 0,(function(){return us(this,(function(r){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_GET_SINGLE_PAYMENT_DONATION_URL,{blogUrl:e,type:t}),data:n})]}))}))},t.prototype.getSinglePaymentPostDmrPageUrl=function(e,t,n){return cs(this,void 0,void 0,(function(){return us(this,(function(r){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_GET_SINGLE_PAYMENT_POST_URL,{blogUrl:e,postId:t}),data:n})]}))}))},t.prototype.getSinglePaymentMessageDmrPageUrl=function(e,t){return cs(this,void 0,void 0,(function(){return us(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_GET_SINGLE_PAYMENT_MESSAGE_URL,{messageId:e}),data:t})]}))}))},t.prototype.getSinglePaymentOnlyBindDmrPageUrl=function(e){return cs(this,void 0,void 0,(function(){return us(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_GET_SINGLE_PAYMENT_ONLY_BIND_URL,{},ss({},e))})]}))}))},t.prototype.checkPaymentId=function(e){return cs(this,void 0,void 0,(function(){return us(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_CHECK_ID,{paymentId:e})})]}))}))},t.prototype.payWithExistingBind=function(e,t){return cs(this,void 0,void 0,(function(){return us(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_PAY_WITH_BOUND_CARD,{levelId:e}),data:t})]}))}))},t.prototype.payDonationWithExistingBind=function(e,t,n){return cs(this,void 0,void 0,(function(){return us(this,(function(r){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_PAY_SINGLE_PAYMENT_DONATION_WITH_BOUND_CARD,{blogUrl:e,type:t}),data:n})]}))}))},t.prototype.payMessageWithExistingBind=function(e,t){return cs(this,void 0,void 0,(function(){return us(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_GET_SINGLE_PAYMENT_MESSAGE_WITH_BOUND_CARD,{messageId:e}),data:t})]}))}))},t.prototype.payPostWithExistingBind=function(e,t,n){return cs(this,void 0,void 0,(function(){return us(this,(function(r){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_PAY_SINGLE_PAYMENT_POST_WITH_BOUND_CARD,{blogUrl:e,postId:t}),data:n})]}))}))},t.prototype.payGiftSubscriptionWithExistingBind=function(e,t){return cs(this,void 0,void 0,(function(){return us(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_PAY_GIFT_SUBSCRIPTION_WITH_BOUND_CARD,{levelId:e}),data:t})]}))}))},t.prototype.fetchPaymentInfo=function(e,t,n){return cs(this,void 0,void 0,(function(){return us(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_PAYMENT_INFO,{blogUrl:e,levelId:t},ss({},n))})]}))}))},t.prototype.validateApplePaySession=function(e){return cs(this,void 0,void 0,(function(){return us(this,(function(t){return[2,this.post({url:jn.PAYMENT_VALIDATE_APPLE_PAY_SESSION,data:{endpoint_url:e}})]}))}))},t.prototype.fetchAdditionalPayment=function(e,t,n){return cs(this,void 0,void 0,(function(){return us(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_ADDITIONAL_PAYMENT,{blogUrl:e,levelId:t},ss({},n))})]}))}))},t.prototype.fetchTransactionStatus=function(e){return cs(this,void 0,void 0,(function(){return us(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_TRANSACTION_STATUS,{paymentId:e})})]}))}))},t.prototype.sendQiwiSmsCode=function(e,t){return cs(this,void 0,void 0,(function(){return us(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_QIWI_STATUS,{paymentId:e}),data:{code:t}})]}))}))},t.prototype.fetchDefaultCurrency=function(){return cs(this,void 0,void 0,(function(){return us(this,(function(e){return[2,this.get({url:jn.PAYMENT_DEFAULT_CURRENCY})]}))}))},t}(Mi);!function(e){e.zeroPriceSubscription="zero_price_subscription",e.alreadySubscribed="already_subscribed",e.selfSubscriber="self_subscriber",e.selfDonator="self_donater"}(Il||(Il={}));var fs,ms=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ps=function(){return ps=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ps.apply(this,arguments)},hs=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},vs=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},gs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ms(t,e),t.prototype.fetchUnsubs=function(){return hs(this,void 0,void 0,(function(){return vs(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.POLL_UNSUB_REASONS_FETCH)})]}))}))},t.prototype.fetchUnsubsList=function(e){return hs(this,void 0,void 0,(function(){var t,n,r,o,a,i,l,s,c;return vs(this,(function(u){return t=e.blogUrl,n=e.limit,r=e.offset,o=e.sortBy,a=e.orderBy,i=e.levelIds,l=e.answers,s=e.from,c=e.to,[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.POLL_UNSUB_REASONS_FETCH_VOTERS,{blogUrl:t},{limit:n,offset:r,sort_by:o,order:a,level_ids:i,answers:l,from:s,to:c})})]}))}))},t.prototype.voteUnsubs=function(e){return hs(this,void 0,void 0,(function(){return vs(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.POLL_UNSUB_REASONS_VOTE),data:e})]}))}))},t.prototype.fetchPollVoters=function(e,t,n){return hs(this,void 0,void 0,(function(){return vs(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.POLL_USER_GENERATED_FETCH_VOTERS,{blogUrl:e,pollId:t},ps({},n))})]}))}))},t.prototype.createPoll=function(e,t){return hs(this,void 0,void 0,(function(){return vs(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.POLL_USER_GENERATED_CREATE,{blogUrl:e}),data:t})]}))}))},t.prototype.commitVote=function(e,t){return hs(this,void 0,void 0,(function(){return vs(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.POLL_USER_GENERATED_VOTE,{pollId:e}),data:t})]}))}))},t.prototype.retractVote=function(e){return hs(this,void 0,void 0,(function(){return vs(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.POLL_USER_GENERATED_VOTE,{pollId:e})})]}))}))},t.prototype.fetchPoll=function(e,t,n){return hs(this,void 0,void 0,(function(){return vs(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.POLL_USER_GENERATED_POLL,{blogUrl:e,pollId:t},{voters_limit:n})})]}))}))},t.prototype.editPoll=function(e,t,n){return hs(this,void 0,void 0,(function(){return vs(this,(function(r){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.POLL_USER_GENERATED_POLL,{blogUrl:e,pollId:t}),data:n})]}))}))},t}(Mi),ys=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_s=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Es=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},bs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ys(t,e),t.prototype.convertPromotionToApiParams=function(e){var t={type:e.type,value:e.type===bt.DISCOUNT?e.discountPercent:e.trialDurationInDays,end_time:e.endTime&&No(e.endTime),max_activation_count:e.maxActivationCount,access_new_subscriber:e.accessNewSubscriber,access_old_paid_subscriber:e.accessOldPaidSubscriber,access_other_level_subscriber:e.accessOtherLevelSubscriber,description:e.description};return ti(t)},t.prototype.convertFetchPromotionListParams=function(e){var t={limit:e.limit,offset:e.offset,type:e.promotionTypes,level_id:e.levelIds};return e.sortBy&&(t.sort_by="start_time",t.sort_order=e.sortBy===St.START_TIME_ASC?"asc":"desc"),ti(t)},t.prototype.create=function(e,t){return _s(this,void 0,void 0,(function(){return Es(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.LEVEL_ID_PROMO,{blogUrl:e,levelId:t.levelId}),data:this.convertPromotionToApiParams(t)})]}))}))},t.prototype.finish=function(e,t){return _s(this,void 0,void 0,(function(){return Es(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.LEVEL_PROMO_FINISH,{blogUrl:e,promoId:t})})]}))}))},t.prototype.fetchTrialLinkInfo=function(e,t){return _s(this,void 0,void 0,(function(){return Es(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.LEVEL_PROMO_LINK,{blogUrl:e,linkId:t})})]}))}))},t.prototype.fetchList=function(e,t){return _s(this,void 0,void 0,(function(){return Es(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.LEVEL_PROMO,{blogUrl:e},this.convertFetchPromotionListParams(t))})]}))}))},t.prototype.fetchSubscriptionLevelPromo=function(e){return _s(this,void 0,void 0,(function(){return Es(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(Kn.SUBSCRIPTION_LEVEL_PROMO,{promoId:e})})]}))}))},t}(Mi),Ss=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ts=function(){return Ts=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ts.apply(this,arguments)},Is=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Ns=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Cs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ss(t,e),t.prototype.searchBlog=function(e){var t=e.query,n=e.offset,r=e.limit,o=e.forRaid;return Is(this,void 0,void 0,(function(){return Ns(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.SEARCH_BLOG,{},{limit:r,offset:n,search_query:t,for_raid:o})})]}))}))},t.prototype.searchBlogSuggest=function(e){var t=e.query,n=e.offset,r=e.limit;return Is(this,void 0,void 0,(function(){return Ns(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.SEARCH_BLOG_SUGGEST,{},{limit:r,offset:n,search_query:t})})]}))}))},t.prototype.searchPostInBlog=function(e){var t=e.blogUrl,n=e.query,r=e.filter,o=e.offset,a=e.limit;return Is(this,void 0,void 0,(function(){return Ns(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.SEARCH_BLOG_POST,{},Ts(Ts({blog_url:t,search_query:n},r&&{only_allowed:null==r?void 0:r.isOnlyAllowedPosts,subscription_level:null==r?void 0:r.subscriptionLevelId,has_image:null==r?void 0:r.hasImage,has_audio_file:null==r?void 0:r.hasAudioFile,has_audio:null==r?void 0:r.hasAudio,has_ok_video:null==r?void 0:r.hasVideoFile,has_video:null==r?void 0:r.hasVideo,has_file:null==r?void 0:r.hasFile,from_ts:null==r?void 0:r.postsFrom,to_ts:null==r?void 0:r.postsTo}),{limit:a,offset:o}))})]}))}))},t.prototype.searchFeedTags=function(e){var t=e.searchQuery,n=e.offset,r=e.limit;return Is(this,void 0,void 0,(function(){return Ns(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.SEARCH_FEED_TAGS,{},{limit:r,offset:n,search_query:t})})]}))}))},t.prototype.searchPostsInFeed=function(e){var t=e.query,n=e.offset,r=e.limit,o=e.filter;return Is(this,void 0,void 0,(function(){return Ns(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.SEARCH_FEED_POST,{},{limit:r,offset:n,search_query:t,only_allowed:(null==o?void 0:o.isOnlyAllowedPosts)||!1,only_bought:null==o?void 0:o.isOnlyPaidPosts,from_ts:null==o?void 0:o.postsFrom,to_ts:null==o?void 0:o.postsTo,tags_ids:null==o?void 0:o.postTags.map((function(e){return e.id}))})})]}))}))},t}(Mi),ws=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Os=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},As=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ps=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ws(t,e),t.prototype.fetchList=function(e){return Os(this,void 0,void 0,(function(){return As(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.SMILE_LIST,{blogUrl:e})})]}))}))},t.prototype.fetchListByLevel=function(e,t){return Os(this,void 0,void 0,(function(){return As(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.SMILE_LIST_BY_LEVEL,{blogUrl:e,levelId:t})})]}))}))},t.prototype.create=function(e,t){return Os(this,void 0,void 0,(function(){return As(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.SMILE_CREATE,{blogUrl:e}),data:t})]}))}))},t.prototype.update=function(e,t,n){return Os(this,void 0,void 0,(function(){return As(this,(function(r){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.SMILE,{blogUrl:e,smileId:t}),data:n})]}))}))},t.prototype.remove=function(e,t){return Os(this,void 0,void 0,(function(){return As(this,(function(n){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.SMILE,{blogUrl:e,smileId:t})})]}))}))},t.prototype.checkSmileName=function(e,t){return Os(this,void 0,void 0,(function(){return As(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.SMILE_CHECK_NAME,{blogUrl:e}),data:t})]}))}))},t.prototype.uploadImage=function(e,t,n){return Os(this,void 0,void 0,(function(){return As(this,(function(r){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.SMILE_IMAGE,{blogUrl:e,sizeName:t}),data:n,isNoProcessData:!0})]}))}))},t.prototype.fetchUserSet=function(){return Os(this,void 0,void 0,(function(){return As(this,(function(e){return[2,this.get({url:jn.SMILE_USER_SET})]}))}))},t.prototype.changeOrder=function(e,t,n){return Os(this,void 0,void 0,(function(){return As(this,(function(r){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.SMILE_ORDER,{blogUrl:e,levelId:t}),data:n})]}))}))},t.prototype.fetchSmileData=function(e){return Os(this,void 0,void 0,(function(){return As(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.SMILE_DATA,{smileId:e})})]}))}))},t}(Mi),Ls=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rs=function(e){var t=nr().clientId;return{app_id:Lr(),from_id:t,referer:e.referer,referer_type:e.refererType,action:String(e.action),user_id:e.userId,email:e.email,blog_url:e.blogUrl,url:e.url,data0:e.data0,data1:e.data1,data2:e.data2,data3:e.data3,data4:e.data4,data5:e.data5,data6:e.data6,data7:e.data7,data8:e.data8,data9:e.data9}},ks=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ls(t,e),t.prototype.sendStat=function(e){return t=this,void 0,r=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){return t=Array.isArray(e)?e.map(Rs):Rs(e),[2,this.post({url:jn.STAT_CLIENT_INFO,data:{data:JSON.stringify(t)}})]}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}));var t,n,r},t}(Mi),Ds=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Us=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ds(t,e),t.prototype.sendLogs=function(e,t){return n=this,void 0,o=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){return[2,this.post({url:jn.STAT_LOGS,data:{data:JSON.stringify({type:"logs",user:e||0,message:t})}})]}))},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{l(o.next(e))}catch(e){t(e)}}function i(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,i)}l((o=o.apply(n,[])).next())}));var n,r,o},t}(Mi),Bs=function(e){this.logs=new Us(e),this.baseStat=new ks(e)},xs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ms=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Fs=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Gs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xs(t,e),t.prototype.fetch=function(e,t){return Ms(this,void 0,void 0,(function(){return Fs(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.STREAM,{blogUrl:e},{from:t})})]}))}))},t.prototype.remove=function(e){return Ms(this,void 0,void 0,(function(){return Fs(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.STREAM,{blogUrl:e})})]}))}))},t.prototype.fetchCredentials=function(e,t){return Ms(this,void 0,void 0,(function(){return Fs(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.STREAM_CREDENTIALS,{blogUrl:e},{refresh:t})})]}))}))},t.prototype.create=function(e,t){return Ms(this,void 0,void 0,(function(){return Fs(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.STREAM,{blogUrl:e}),data:t})]}))}))},t.prototype.update=function(e,t){return Ms(this,void 0,void 0,(function(){return Fs(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.STREAM,{blogUrl:e}),data:t})]}))}))},t.prototype.complain=function(e){return Ms(this,void 0,void 0,(function(){return Fs(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.STREAM_COMPLAIN,{blogUrl:e})})]}))}))},t.prototype.like=function(e){return Ms(this,void 0,void 0,(function(){return Fs(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.STREAM_LIKE,{blogUrl:e})})]}))}))},t.prototype.unlike=function(e){return Ms(this,void 0,void 0,(function(){return Fs(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.STREAM_LIKE,{blogUrl:e})})]}))}))},t.prototype.notify=function(e){return Ms(this,void 0,void 0,(function(){return Fs(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.STREAM_NOTIFY,{blogUrl:e})})]}))}))},t.prototype.record=function(e,t){return Ms(this,void 0,void 0,(function(){return Fs(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.STREAM_RECORD,{blogUrl:e}),data:{on:t}})]}))}))},t.prototype.sendHeartbeat=function(e,t){var n=t.stop,r=t.immortal,o=t.autoplay;return Ms(this,void 0,void 0,(function(){return Fs(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.STREAM_HEARTBEAT,{blogUrl:e},{stop:n,immortal:r,autoplay:o})})]}))}))},t}(Mi),Hs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ws=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Vs=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},js=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hs(t,e),t.prototype.fetch=function(e,t,n){return Ws(this,void 0,void 0,(function(){return Vs(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_SUBSCRIPTION_LEVELS_BY_ID,{blogUrl:e,levelId:t},{with_content_counters:n})})]}))}))},t.prototype.create=function(e,t){return Ws(this,void 0,void 0,(function(){return Vs(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.BLOG_SUBSCRIPTION_LEVELS_CREATE,{blogUrl:e}),data:t})]}))}))},t.prototype.update=function(e,t,n){return Ws(this,void 0,void 0,(function(){return Vs(this,(function(r){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.BLOG_SUBSCRIPTION_LEVELS_BY_ID,{blogUrl:e,levelId:t}),data:n})]}))}))},t.prototype.remove=function(e,t,n){return Ws(this,void 0,void 0,(function(){return Vs(this,(function(r){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.BLOG_SUBSCRIPTION_LEVELS_BY_ID,{blogUrl:e,levelId:t}),data:n})]}))}))},t}(Mi),zs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ys=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zs(t,e),t.prototype.contactSupport=function(e){return t=this,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.SUPPORT_CONTACT),data:e})]}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}));var t,n,r},t}(Mi),Ks=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qs=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Xs=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Qs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ks(t,e),t.prototype.fetchExternalApp=function(e){return qs(this,void 0,void 0,(function(){return Xs(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.EXTERNAL_APP,{appId:e})})]}))}))},t.prototype.getSupportFrameUrl=function(){return qs(this,void 0,void 0,(function(){return Xs(this,(function(e){return[2,this.get({url:jn.SUPPORT})]}))}))},t}(Mi),Js=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zs=function(){return Zs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zs.apply(this,arguments)},$s=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ec=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Js(t,e),t.prototype.fetchTargetById=function(e,t){return $s(this,void 0,void 0,(function(){return ec(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.TARGET_BY_ID,{targetId:e},{currency:t})})]}))}))},t.prototype.createMoneyTarget=function(e){return $s(this,void 0,void 0,(function(){return ec(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.TARGET_MONEY_CREATE),data:e})]}))}))},t.prototype.createSubscribersTarget=function(e){return $s(this,void 0,void 0,(function(){return ec(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.TARGET_SUBSCRIBERS_CREATE),data:e})]}))}))},t.prototype.edit=function(e,t){return $s(this,void 0,void 0,(function(){return ec(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.TARGET_BY_ID,{targetId:e}),data:t})]}))}))},t.prototype.remove=function(e){return $s(this,void 0,void 0,(function(){return ec(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.TARGET_BY_ID,{targetId:e})})]}))}))},t.prototype.fetchTargets=function(e,t){return void 0===t&&(t={}),$s(this,void 0,void 0,(function(){return ec(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.TARGET_TARGETS,{blogUrl:e},Zs({},t))})]}))}))},t}(Mi),nc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rc=function(){return rc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rc.apply(this,arguments)},oc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ac=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},ic="application/x-www-form-urlencoded",lc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nc(t,e),t.prototype.fetch=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.USER,{id:e})})]}))}))},t.prototype.fetchCurrent=function(){return oc(this,void 0,void 0,(function(){return ac(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.USER_CURRENT)})]}))}))},t.prototype.logout=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.OAUTH_TOKEN,{},e)})]}))}))},t.prototype.fetchCurrentPhone=function(){return oc(this,void 0,void 0,(function(){return ac(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.USER_PHONE)})]}))}))},t.prototype.getSubscriptions=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=!1),oc(this,void 0,void 0,(function(){return ac(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.USER_SUBSCRIPTIONS,{},rc(rc({},e),{with_follow:String(t)}))})]}))}))},t.prototype.getPaymentBinds=function(e,t){return void 0===t&&(t=!1),oc(this,void 0,void 0,(function(){return ac(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.PAYMENT_LIST,{},{deleted:String(t),currency:e})})]}))}))},t.prototype.refreshToken=function(e){return oc(this,void 0,Promise,(function(){var t;return ac(this,(function(n){return t={device_id:e.fromId,grant_type:"refresh_token",refresh_token:e.refreshToken,device_os:e.appId},[2,this.api.getTransport().http({url:jn.OAUTH_REFRESH_TOKEN,method:"POST",config:{headers:{"Content-Type":ic}},data:(0,Do.stringify)(t)})]}))}))},t.prototype.oauthServerAuthorize=function(e){return oc(this,void 0,Promise,(function(){return ac(this,(function(t){return[2,this.api.getTransport().http({url:jn.OAUTH_SERVER_AUTHORIZE,method:"POST",config:{headers:{"Content-Type":ic}},data:(0,Do.stringify)(e)})]}))}))},t.prototype.update=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_CURRENT),data:e})]}))}))},t.prototype.updateUserFlag=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_CURRENT_FLAG,{flag:e})})]}))}))},t.prototype.linkVKPlay=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.put({url:"".concat((0,Yt.getParametrizedUrl)(jn.USER_CURRENT_VKPLAY_LINK)),data:e})]}))}))},t.prototype.updateCurrentUserPhone=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_PHONE_CHANGE),data:e})]}))}))},t.prototype.approveCurrentUserPhone=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.USER_PHONE_APPROVE),data:e})]}))}))},t.prototype.acceptPrivacyPolicy=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_PRIVACY_POLICY),data:e})]}))}))},t.prototype.acceptRefPolicy=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_REF_POLICY),data:e})]}))}))},t.prototype.uploadAvatar=function(e){return oc(this,void 0,void 0,(function(){var t,n;return ac(this,(function(r){return t=nr().hosts.uploadImg,n=t?(0,Yt.getParametrizedUrl)("".concat(t,"/v1").concat(jn.USER_AVATAR)):(0,Yt.getParametrizedUrl)(jn.USER_AVATAR),[2,this.put({url:n,isNoProcessData:!0,data:e})]}))}))},t.prototype.fetchFollowings=function(e){return void 0===e&&(e={}),oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.USER_FOLLOWING,{},rc({},e))})]}))}))},t.prototype.sendEmailConfirmationLetter=function(){return oc(this,void 0,void 0,(function(){return ac(this,(function(e){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_SEND_EMAIL_CONFIRMATION_LETTER)})]}))}))},t.prototype.finishTutorial=function(){return oc(this,void 0,void 0,(function(){return ac(this,(function(e){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_FINISH_TUTORIAL)})]}))}))},t.prototype.removeAuthLink=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.USER_AUTH_LINK,{type:e})})]}))}))},t.prototype.checkPhone=function(e){return oc(this,void 0,void 0,(function(){var t;return ac(this,(function(n){return t=Ta.getItem("auth"),[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.USER_PHONE_CHECK,{},rc({},e)),headers:{Authorization:"Bearer ".concat(t.accessToken)}})]}))}))},t.prototype.checkCurrentUserPhone=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.USER_PHONE_CURRENT_CHECK,{},rc({},e))})]}))}))},t.prototype.checkPhoneAdditionStatus=function(){return oc(this,void 0,void 0,(function(){return ac(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.USER_PHONE_CAN_ADD)})]}))}))},t.prototype.verifyOldPhone=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_PHONE_VERIFY_OLD),data:e})]}))}))},t.prototype.notifySettingsOld=function(e,t){return oc(this,void 0,void 0,(function(){return ac(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_NOTIFY_SETTINGS_OLD,{notificationType:e}),data:t})]}))}))},t.prototype.scheduleAccountDeletion=function(){return oc(this,void 0,void 0,(function(){return ac(this,(function(e){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_CURRENT_SCHEDULED_DELETION)})]}))}))},t.prototype.cancelAccountDeletion=function(){return oc(this,void 0,void 0,(function(){return ac(this,(function(e){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.USER_CURRENT_SCHEDULED_DELETION)})]}))}))},t.prototype.fetchMarketingAlerts=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.USER_MARKETING_ALERTS,{},rc({},e))})]}))}))},t.prototype.dismissMarketingAlert=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.USER_MARKETING_ALERT_DISMISS,{alertId:e})})]}))}))},t.prototype.loginWithExistsToken=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.USER_LOGIN),headers:{Authorization:"Bearer ".concat(e)}})]}))}))},t.prototype.setLocale=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.USER_LOCALE),data:e})]}))}))},t.prototype.updateDialogSettings=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.USER_DIALOG_SETTINGS),data:e})]}))}))},t.prototype.fetchInfoMessages=function(){return oc(this,void 0,void 0,(function(){return ac(this,(function(e){return[2,this.get({url:jn.INFO_MESSAGES})]}))}))},t.prototype.deleteInfoMessage=function(e){return oc(this,void 0,void 0,(function(){return ac(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.INFO_MESSAGES_DELETE,{id:e})})]}))}))},t}(Mi),sc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sc(t,e),t.prototype.saveVideoTimeCode=function(e,t){return n=this,void 0,o=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.VIDEO_TIME_CODE,{videoId:e}),data:{time_code:t}})]}))},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{l(o.next(e))}catch(e){t(e)}}function i(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,i)}l((o=o.apply(n,[])).next())}));var n,r,o},t}(Mi),uc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},fc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uc(t,e),t.prototype.fetchToken=function(){return dc(this,void 0,void 0,(function(){return fc(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(qn.CONNECT_TOKEN)})]}))}))},t.prototype.refreshToken=function(){return dc(this,void 0,void 0,(function(){return fc(this,(function(e){return[2,this.post({url:(0,Yt.getParametrizedUrl)(qn.REFRESH_TOKEN)})]}))}))},t.prototype.fetchPrivateToken=function(e){return dc(this,void 0,void 0,(function(){return fc(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(qn.PRIVATE_TOKEN),data:JSON.stringify(e),isNoProcessData:!0})]}))}))},t}(Mi),pc=function(){function e(){}return e.setTransport=function(e){this.transport=e},e.getTransport=function(){return this.transport},e.stat=new Bs(e),e.agents=new Vi(e),e.blackList=new rl(e),e.user=new lc(e),e.notifications=new is(e),e.notificationSettings=new ns(e),e.authByEmail=new Xi(e),e.blog=new sl(e),e.blogPost=new ml(e),e.blogStat=new Sl(e),e.stream=new Gs(e),e.dialog=new Al(e),e.search=new Cs(e),e.blogPostChat=new gl(e),e.gift=new Wl(e),e.feed=new Ml(e),e.subscriptionLevels=new js(e),e.mediaData=new Jl(e),e.payment=new ds(e),e.support=new Ys(e),e.target=new tc(e),e.externalApps=new kl(e),e.internal=new Yl(e),e.systemApi=new Qs(e),e.webSocket=new mc(e),e.poll=new gs(e),e.smile=new Ps(e),e.badge=new $i(e),e.antiDDoS=new zi(e),e.promo=new bs(e),e.video=new cc(e),e.base=new Mi(e),e}(),hc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},gc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hc(t,e),t.prototype.fetchCategories=function(){return vc(this,void 0,void 0,(function(){return gc(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.CATALOG_CATEGORIES)})]}))}))},t.prototype.fetchSuccessStories=function(){return vc(this,void 0,void 0,(function(){return gc(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.CATALOG_SUCCESS_STORIES)})]}))}))},t}(Mi),_c=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ec=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},bc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Sc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _c(t,e),t.prototype.fetchAll=function(){return Ec(this,void 0,void 0,(function(){return bc(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DOC_PAGES)})]}))}))},t.prototype.fetch=function(e){return Ec(this,void 0,void 0,(function(){return bc(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.DOC_PAGE,{id:e})})]}))}))},t.prototype.requestAccess=function(e){return Ec(this,void 0,void 0,(function(){return bc(this,(function(t){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.DOC_REQUEST_ACCESS),data:e})]}))}))},t}(Mi),Tc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ic=function(){return Ic=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ic.apply(this,arguments)},Nc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Cc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},wc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tc(t,e),t.prototype.getMediaAlbumList=function(e,t){return Nc(this,void 0,void 0,(function(){return Cc(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.MEDIA_ALBUM_TILE,{blogUrl:e},Ic(Ic({},t),{search_query:""}))})]}))}))},t.prototype.getMediaAlbumCounters=function(e,t){return void 0===t&&(t={}),Nc(this,void 0,void 0,(function(){return Cc(this,(function(n){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.MEDIA_ALBUM_COUNTERS,{blogUrl:e},Ic({},t))})]}))}))},t}(Mi),Oc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ac=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oc(t,e),t.prototype.getSignature=function(e){return t=this,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.ONE_LINK_GET_SIGNATURE,{},{action:e})})]}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}));var t,n,r},t}(Mi),Pc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lc=function(){return Lc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lc.apply(this,arguments)},Rc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},kc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Dc=((fs={})[Qt.QIWI]=Jt.QIWI,fs[Qt.BANKCARD]=Jt.BANKCARD,fs[Qt.PAYPAL]=Jt.PAYPAL,fs[Qt.YANDEXMONEY]=Jt.YANDEXMONEY,fs[Qt.VKPAY]=Jt.VKPAY,fs);function Uc(e){return Lc(Lc({},e.currency?{currency:e.currency}:{}),{destination:e.destination})}var Bc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.prototype.fetchBlogPayoutCardFrame=function(){return Rc(this,void 0,void 0,(function(){return kc(this,(function(e){return[2,this.get({url:jn.BLOG_PAYOUT_CARD_FRAME})]}))}))},t.prototype.fetchBlogPayouts=function(e){return Rc(this,void 0,void 0,(function(){return kc(this,(function(t){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.BLOG_PAYOUTS,{blogUrl:e})})]}))}))},t.prototype.createBlogPayout=function(e,t){return Rc(this,void 0,void 0,(function(){return kc(this,(function(n){return[2,this.post({url:(0,Yt.getParametrizedUrl)(jn.BLOG_PAYOUT_CREATE,{systemId:Dc[e.systemId]}),data:Lc(Lc({},Uc(e)),{card_mask:t})})]}))}))},t.prototype.updateBlogPayout=function(e,t){return Rc(this,void 0,void 0,(function(){return kc(this,(function(n){return[2,this.put({url:(0,Yt.getParametrizedUrl)(jn.BLOG_PAYOUT_UPDATE,{payoutId:e}),data:Uc(t)})]}))}))},t.prototype.removeBlogPayout=function(e){return Rc(this,void 0,void 0,(function(){return kc(this,(function(t){return[2,this.delete({url:(0,Yt.getParametrizedUrl)(jn.BLOG_PAYOUT_DELETE,{payoutId:e})})]}))}))},t.prototype.submitCardToYaMoney=function(e){return Rc(this,void 0,void 0,(function(){var t;return kc(this,(function(n){return t={skr_destinationCardNumber:e,skr_responseFormat:"json"},[2,this.api.getTransport().http({url:Qn,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:(0,Yt.getURIParams)(t)})]}))}))},t.prototype.fetchHistory=function(e,t,n){return Rc(this,void 0,void 0,(function(){return kc(this,(function(r){return[2,this.get({url:(0,Yt.getParametrizedUrl)(jn.PAYOUT_HISTORY,{blogUrl:e},{limit:t,offset:n})})]}))}))},t}(Mi),xc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mc=function(){return Mc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mc.apply(this,arguments)},Fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xc(t,e),t.prototype.http=function(e){return t=this,void 0,r=function(){var t,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:t=this.api.getTransport(),e.url="".concat(e.url),e.baseURL="/",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.http(Mc(Mc({},e),{data:e.data&&!e.isNoProcessData?(0,Yt.getURIParams)(e.data):e.data||null}))];case 2:return[2,r.sent()];case 3:throw n=r.sent(),new Ar(n);case 4:return[2]}}))},new((n=Promise)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}));var t,n,r},t}(Mi),Gc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gc(t,e),t.prototype.fetchOfferByType=function(e){var t,n,r,o=e.offerType,a=e.lang;return t=this,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){return[2,this.get({url:(0,Yt.getParametrizedUrl)(Er.OFFERS,{offerType:o,lang:a})})]}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}))},t}(Fc),Wc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},jc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},zc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wc(t,e),t.prototype.fetchTutorialSubscriptionLevels=function(){return Vc(this,void 0,void 0,(function(){return jc(this,(function(e){return[2,this.get({url:Er.TUTORIAL_SUBSCRIPTION_LEVELS})]}))}))},t.prototype.fetchTutorialOffers=function(){return Vc(this,void 0,void 0,(function(){return jc(this,(function(e){return[2,this.get({url:Er.TUTORIAL_OFFERS})]}))}))},t}(Fc),Yc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yc(t,e),t.setTransport=function(e){pc.setTransport(e),this.transport=e},t.getTransport=function(){return this.transport||pc.getTransport()},t.catalog=new yc(t),t.doc=new Sc(t),t.oneLink=new Ac(t),t.payout=new Bc(t),t.mediaAlbum=new wc(t),t.locales={tutorial:new zc(t),offer:new Hc(t)},t}(pc);window.FounderApi=Kc;var qc,Xc=function(){function e(){}return e.scheduleSend=function(){var e=this;this.isDebouncing||(this.isDebouncing=!0,this.timerId=window.setTimeout((function(){e.isDebouncing=!1,e.send()}),1e3))},e.getStatsToSend=function(){var e=this.stats.slice();return this.stats=[],1===e.length?e[0]:e},e.add=function(e){this.stats.push(e),this.scheduleSend()},e.send=function(){return e=this,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){return null!=this.timerId&&clearTimeout(this.timerId),this.stats.length?(e=this.getStatsToSend(),[2,Kc.stat.baseStat.sendStat(e)]):[2,Promise.resolve()]}))},new((t=void 0)||(t=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,i)}l((n=n.apply(e,[])).next())}));var e,t,n},e.stats=[],e.isDebouncing=!1,e}(),Qc=function(){return Qc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qc.apply(this,arguments)},Jc=function(){function e(e){this.parent=e}return e.prototype.sendStat=function(e,t){return void 0===t&&(t=!1),n=this,void 0,o=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,(0,Yt.delay)(0)];case 1:return n.sent(),Xc.add(Qc(Qc({},e),this.getBasicParams())),t?[2,Xc.send()]:[2,Promise.resolve()]}}))},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{l(o.next(e))}catch(e){t(e)}}function i(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,i)}l((o=o.apply(n,[])).next())}));var n,r,o},e.prototype.getBasicParams=function(){var e,t,n,r=this.parent.currentUser,o=null===(t=null===(e=this.parent.routeData)||void 0===e?void 0:e.match)||void 0===t?void 0:t.blogUrl,a=null===(n=this.parent.routeData)||void 0===n?void 0:n.url;return{userId:null!=r?r.id:null,email:null!=r?r.email:null,blogUrl:o,url:a,referer:Di(),refererType:Ti||""}},e}(),Zc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zc(t,e),t.prototype.sendError=function(e){var t=e.error,n=e.errorObject;this.sendStat({action:Fe.APP_ERRORS,data0:t,data1:n})},t}(Jc),eu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eu(t,e),t.prototype.openPopup=function(e){var t=e.source,n=e.price,r={action:Fe.AUTH_POPUP_SHOW,data0:t,data1:null!=n?"".concat(n):void 0};this.sendStat(r)},t.prototype.clickProvider=function(e){var t=e.providerCode,n={action:Fe.AUTH_POPUP_CLICK_PROVIDER,data0:t};this.sendStat(n)},t.prototype.error=function(e){var t=e.providerCode,n=e.step,r=e.status,o={action:Fe.AUTH_ERROR,data0:t,data1:n,data2:String(r)};this.sendStat(o)},t.prototype.refreshToken=function(e){var t=e.method,n=e.path,r=e.status,o={action:Fe.AUTH_REFRESH_TOKEN,data0:t,data1:n,data2:String(r)};this.sendStat(o,!0)},t}(Jc),nu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ru=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nu(t,e),t.prototype.clicked=function(e){var t={action:Fe.BANNER_CLICKED,data0:e};this.sendStat(t)},t.prototype.closed=function(e,t){var n={action:Fe.BANNER_CLOSED,data0:e,data1:t};this.sendStat(n)},t.prototype.shown=function(e){var t={action:Fe.BANNER_SHOWN,data0:e};this.sendStat(t)},t}(Jc),ou=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),au=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ou(t,e),t.prototype.socialLinkClick=function(e){var t=e.type,n=e.url,r={action:Fe.BLOG_SOCIAL_LINK_CLICK,data0:t,data1:n};this.sendStat(r)},t.prototype.selectLocale=function(e){return t=this,void 0,r=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){return t={action:Fe.SELECT_LOCALE,data0:e},[2,this.sendStat(t,!0)]}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}));var t,n,r},t}(Jc),iu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startTime=Date.now(),t.dmrFrameWaitingTimeout=null,t.dmrFrameWaiting=function(){var e=t.getDuration(5);e<60&&t.setDmrFrameWaitingTimeout(),t.sendStat({action:Fe.DMR_FRAME_WAITING,data0:"".concat(Math.min(e,60))})},t}return iu(t,e),t.prototype.dmrFrameStart=function(){this.startTime=Date.now(),this.setDmrFrameWaitingTimeout()},t.prototype.setDmrFrameWaitingTimeout=function(){this.clearDmrFrameWaitingTimeout(),this.dmrFrameWaitingTimeout=window.setTimeout(this.dmrFrameWaiting,5e3)},t.prototype.clearDmrFrameWaitingTimeout=function(){this.dmrFrameWaitingTimeout&&(window.clearTimeout(this.dmrFrameWaitingTimeout),this.dmrFrameWaitingTimeout=null)},t.prototype.getDuration=function(e){return void 0===e&&(e=1),Math.round((Date.now()-this.startTime)/1e3/e)*e},t.prototype.dmrFrameLoaded=function(e){var t=e.paymentMethod,n=e.paymentType,r=e.transactionId;this.clearDmrFrameWaitingTimeout();var o={action:Fe.DMR_FRAME_LOADED,data0:t,data1:n,data2:r||"",data3:String(this.getDuration())};this.sendStat(o),this.startTime=Date.now()},t}(Jc),su=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return su(t,e),t.prototype.openForm=function(e){var t=e.openedFrom,n={action:Fe.DONATION_OPEN_FORM,data0:t};this.sendStat(n)},t}(Jc),uu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),du=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uu(t,e),t.prototype.sendApiError=function(e){var t=e.status,n=e.method,r=e.urlBeforeParametrization,o=e.urlAfterParametrization,a=e.paramsBody,i=e.paramsQuery,l=e.response;this.sendStat({action:Fe.API_ERROR_STATUS,data0:t,data1:n,data2:r,data3:o,data4:i,data5:a,data6:l})},t}(Jc),fu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fu(t,e),t.prototype.showAlert=function(e){var t=e.alertId,n={action:Fe.MARKETING_ALERT_SHOW,data0:String(t)};this.sendStat(n)},t.prototype.dismissAlert=function(e){var t=e.alertId;this.sendStat({action:Fe.MARKETING_ALERT_DISMISS,data0:String(t)})},t.prototype.acceptAlert=function(e){var t=e.alertId;this.sendStat({action:Fe.MARKETING_ALERT_ACCEPT,data0:String(t)},!0)},t}(Jc),pu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pu(t,e),t.prototype.albumOpen=function(){var e={action:Fe.MEDIA_ALBUM_PAGE_OPEN};this.sendStat(e)},t.prototype.albumTypeFilterClick=function(e){var t={action:Fe.MEDIA_ALBUM_TYPE_FILTER_CLICK,data0:e};this.sendStat(t)},t.prototype.tileClick=function(e){var t={action:Fe.MEDIA_ALBUM_TILE_CLICK,data0:e};this.sendStat(t)},t}(Jc),vu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vu(t,e),t.prototype.viewerOpen=function(e){var t=e.contentType,n=e.openingSource,r={action:Fe.MEDIA_VIEWER_OPEN,data0:t,data1:n};this.sendStat(r)},t.prototype.itemShow=function(e){var t=e.contentType,n=e.transitionType,r=e.openingSource,o={action:Fe.MEDIA_VIEWER_ITEM_SHOW,data0:t,data1:n,data2:r};this.sendStat(o)},t}(Jc),yu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yu(t,e),t.prototype.downloadFile=function(){this.sendStat({action:Fe.MESSAGE_FILE_DOWNLOAD})},t.prototype.audioPlay=function(){this.sendStat({action:Fe.MESSAGE_AUDIO_PLAY})},t.prototype.audioPlayError=function(){this.sendStat({action:Fe.MESSAGE_AUDIO_PLAY_ERROR})},t.prototype.incorrectPayload=function(e){this.sendStat({action:Fe.MESSAGE_INCORRECT_PAYLOAD,data0:JSON.stringify(e)})},t}(Jc),Eu=function(){return Eu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Eu.apply(this,arguments)},bu=function(e){return(0,Yt.getFromCookies)(e)},Su=function(e,t,n){void 0===n&&(n={}),(0,Yt.setToCookies)(e,t,Eu(Eu({},n),{secure:!0}))},Tu=function(e){(0,Yt.removeFromCookies)(e)},Iu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Iu(t,e),t.prototype.visitRoute=function(e){var t=e.isBlogger,n=e.shareReferrer,r=e.hasNotifications,o=e.hasMessages,a=nr().locale,i=bu(U.LOCALE),l={action:Fe.ROUTE_ENTER,data0:null!=n?n:void 0,data1:i||a||void 0,data2:t?"1":"0",data3:r?"1":"0",data4:o?"1":"0"};this.sendStat(l)},t.prototype.notificationLinkClick=function(){var e={action:Fe.NOTIFICATIONS_LINK_CLICK};this.sendStat(e)},t.prototype.subscribeMobileClick=function(){var e={action:Fe.SUBSCRIBE_MOBILE_CLICK};this.sendStat(e)},t}(Jc),Cu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cu(t,e),t.prototype.sendDonationWindowAction=function(e){this.sendStat(e)},t.prototype.sendPaymentWindowAction=function(e){this.sendStat(e)},t}(Jc),Ou=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Au=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ou(t,e),t.prototype.downloadFile=function(){var e={action:Fe.POST_FILE_DOWNLOAD};this.sendStat(e)},t.prototype.audioPlay=function(){var e={action:Fe.POST_AUDIO_PLAY};this.sendStat(e)},t.prototype.audioPlayError=function(){var e={action:Fe.POST_AUDIO_PLAY_ERROR};this.sendStat(e)},t}(Jc),Pu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pu(t,e),t.prototype.uploadFile=function(e){var t=e.ext,n=e.type,r=e.size,o={action:Fe.PUBLISHER_UPLOAD_FILE,data0:t,data1:n,data2:String(r)};this.sendStat(o)},t.prototype.uploadFileSuccess=function(e){var t=e.ext,n=e.type,r=e.size,o={action:Fe.PUBLISHER_UPLOAD_FILE_SUCCESS,data0:t,data1:n,data2:String(r)};this.sendStat(o)},t.prototype.uploadFileError=function(e){var t=e.ext,n=e.type,r=e.size,o=e.error,a={action:Fe.PUBLISHER_UPLOAD_FILE_ERROR,data0:o||"",data1:t,data2:n,data3:String(r)};this.sendStat(a)},t.prototype.uploadFileChunkError=function(e){var t=e.ext,n=e.type,r=e.size,o=e.error,a={action:Fe.PUBLISHER_UPLOAD_FILE_CHUNK_ERROR,data0:o||"",data1:t,data2:n,data3:String(r)};this.sendStat(a)},t.prototype.uploadAudio=function(e){var t=e.ext,n=e.type,r=e.size,o={action:Fe.PUBLISHER_UPLOAD_AUDIO,data0:t,data1:n,data2:String(r)};this.sendStat(o)},t.prototype.uploadAudioSuccess=function(e){var t=e.ext,n=e.type,r=e.size,o={action:Fe.PUBLISHER_UPLOAD_AUDIO_SUCCESS,data0:t,data1:n,data2:String(r)};this.sendStat(o)},t.prototype.uploadAudioError=function(e){var t=e.ext,n=e.type,r=e.size,o=e.error,a={action:Fe.PUBLISHER_UPLOAD_AUDIO_ERROR,data0:o||"",data1:t,data2:n,data3:String(r)};this.sendStat(a)},t.prototype.uploadAudioChunkError=function(e){var t=e.ext,n=e.type,r=e.size,o=e.error,a={action:Fe.PUBLISHER_UPLOAD_AUDIO_CHUNK_ERROR,data0:o||"",data1:t,data2:n,data3:String(r)};this.sendStat(a)},t.prototype.uploadVideo=function(e){var t=e.ext,n=e.type,r=e.size,o=e.vid,a=e.videoId,i={action:Fe.PUBLISHER_UPLOAD_VIDEO,data0:t,data1:n,data2:String(r),data3:a,data4:String(o)};this.sendStat(i)},t.prototype.uploadVideoSuccess=function(e){var t=e.ext,n=e.type,r=e.size,o=e.vid,a=e.videoId,i={action:Fe.PUBLISHER_UPLOAD_VIDEO_SUCCESS,data0:t,data1:n,data2:String(r),data3:a,data4:String(o)};this.sendStat(i)},t.prototype.uploadVideoError=function(e){var t=e.ext,n=e.type,r=e.size,o=e.vid,a=e.videoId,i=e.error,l={action:Fe.PUBLISHER_UPLOAD_VIDEO_ERROR,data0:i||"",data1:t,data2:n,data3:String(r),data4:a,data5:String(o)};this.sendStat(l)},t.prototype.uploadVideoRetry=function(e){var t=e.ext,n=e.type,r=e.size,o=e.vid,a=e.videoId,i=e.retryCount,l={action:Fe.PUBLISHER_UPLOAD_VIDEO_RETRY,data0:t,data1:n,data2:String(r),data3:a,data4:String(o),data5:String(i)};this.sendStat(l)},t.prototype.uploadVideoChunkSuccess=function(e){var t=e.range,n=e.ext,r=e.type,o=e.size,a=e.vid,i=e.videoId,l=e.time,s={action:Fe.PUBLISHER_UPLOAD_VIDEO_CHUNK_SUCCESS,data0:t||"",data1:n,data2:r,data3:String(o),data4:i,data5:String(a),data6:String(l)};this.sendStat(s)},t.prototype.uploadVideoChunkError=function(e){var t=e.ext,n=e.type,r=e.size,o=e.vid,a=e.videoId,i=e.error,l=e.range,s=e.time,c={action:Fe.PUBLISHER_UPLOAD_VIDEO_CHUNK_ERROR,data0:i||"",data1:t,data2:n,data3:String(r),data4:a,data5:String(o),data6:l,data7:String(s)};this.sendStat(c)},t.prototype.uploadVideoChunkRetry=function(e){var t=e.ext,n=e.type,r=e.size,o=e.vid,a=e.videoId,i=e.range,l=e.retryCount,s=e.time,c={action:Fe.PUBLISHER_UPLOAD_VIDEO_CHUNK_RETRY,data1:t,data2:n,data3:String(r),data4:a,data5:String(o),data6:i,data7:String(s),data8:String(l)};this.sendStat(c)},t}(Jc),Ru=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ku=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ru(t,e),t.prototype.openShareDropdown=function(){var e={action:Fe.SHARE_DROPDOWN_SHOW};this.sendStat(e)},t.prototype.shareDropdownItemClick=function(e){var t={action:Fe.SHARE_DROPDOWN_CLICK_ITEM,data0:e};this.sendStat(t)},t.prototype.showPostPublishedOverlay=function(){var e={action:Fe.POST_PUBLISHED_OVERLAY_SHOW};this.sendStat(e)},t.prototype.postPublishedOverlayShareClick=function(e){var t={action:Fe.POST_PUBLISHED_OVERLAY_CLICK_SHARE,data0:e};this.sendStat(t)},t}(Jc),Du=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Du(t,e),t.prototype.openPopup=function(e){var t=e.type,n=e.source,r=e.price;this.sendStat({action:Fe.SINGLE_PAYMENT_POPUP_SHOW,data0:n,data1:"".concat(r),data2:t})},t.prototype.show3ds=function(e){var t=e.type;this.sendStat({action:Fe.SINGLE_PAYMENT_POPUP_3DS_SHOW,data0:t})},t.prototype.singlePaymentFinished=function(e){var t=e.result,n=e.type,r=e.price,o=e.paymentId,a=e.transactionId,i=e.dmrErrorCode;this.sendStat({action:Fe.SINGLE_PAYMENT_POPUP_FINISHED,data0:t,data1:a||"",data2:i||"",data3:"".concat(r),data4:n,data5:"".concat(o)})},t}(Jc),Bu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Bu(t,e),t.prototype.openPopup=function(e){var t=e.source,n=e.price;this.sendStat({action:Fe.SUBSCRIBE_POPUP_SHOW,data0:t,data1:"".concat(n)})},t.prototype.show3ds=function(){this.sendStat({action:Fe.SUBSCRIBE_POPUP_3DS_SHOW})},t.prototype.purchaseFinished=function(e){var t=e.result,n=e.price,r=e.paymentId,o=e.transactionId,a=e.dmrErrorCode;this.sendStat({action:Fe.SUBSCRIBE_POPUP_FINISHED,data0:t,data1:o||"",data2:a||"",data3:"".concat(n),data4:"".concat(r)})},t}(Jc),Mu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.sendTrialAction=function(e){this.sendStat({action:Fe.TRIAL_WINDOW_ACTION,data0:e.statType,data1:e.ownerId.toString(),data2:e.promoType,data3:e.promoId,data4:e.subscriptionLevelId,data5:e.promotionIsEnded||"0"})},t}(Jc),Gu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gu(t,e),t.prototype.uploadFile=function(e){var t=e.ext,n=e.type,r=e.size;this.sendStat({action:Fe.UPLOAD_FILE,data0:t,data1:n,data2:String(r)})},t.prototype.uploadFileSuccess=function(e){var t=e.ext,n=e.type,r=e.size;this.sendStat({action:Fe.UPLOAD_FILE_SUCCESS,data0:t,data1:n,data2:String(r)})},t.prototype.uploadFileCancelled=function(){this.sendStat({action:Fe.UPLOAD_FILE_CANCELLED})},t.prototype.uploadFileError=function(e){var t=e.ext,n=e.type,r=e.size,o=e.error;this.sendStat({action:Fe.UPLOAD_FILE_ERROR,data0:o||"",data1:t,data2:n,data3:String(r)})},t.prototype.uploadFileChunkError=function(e){var t=e.ext,n=e.type,r=e.size,o=e.error,a=e.range,i=e.time;this.sendStat({action:Fe.UPLOAD_FILE_CHUNK_ERROR,data0:o||"",data1:t,data2:n,data3:String(r),data4:a,data5:String(i)})},t}(Jc),Wu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wu(t,e),t.prototype.started=function(e){var t=e.vid,n=e.videoId,r=e.duration,o=e.postId;this.sendStat({action:Fe.VIDEO_STARTED,data0:n,data1:String(t),data2:String(r),data4:o})},t.prototype.paused=function(e){var t=e.vid,n=e.videoId,r=e.time,o=e.postId;this.sendStat({action:Fe.VIDEO_PAUSED,data0:n,data1:String(t),data2:String(r),data4:o})},t.prototype.resumed=function(e){var t=e.vid,n=e.videoId,r=e.time,o=e.postId;this.sendStat({action:Fe.VIDEO_RESUMED,data0:n,data1:String(t),data2:String(r),data4:o})},t.prototype.ended=function(e){var t=e.vid,n=e.videoId,r=e.time,o=e.postId;this.sendStat({action:Fe.VIDEO_ENDED,data0:n,data1:String(t),data2:String(r),data4:o})},t.prototype.rewound=function(e){var t=e.vid,n=e.videoId,r=e.from,o=e.to,a=e.postId;this.sendStat({action:Fe.VIDEO_REWOUND,data0:n,data1:String(t),data2:String(r),data3:String(o),data4:a})},t.prototype.progress=function(e){var t=e.vid,n=e.videoId,r=e.time,o=e.percent,a=e.postId;this.sendStat({action:Fe.VIDEO_PROGRESS,data0:n,data1:String(t),data2:String(r),data3:String(o),data4:a})},t.prototype.startWithTimecode=function(e){this.sendStat({action:Fe.VIDEO_STARTED_WITH_TIME_CODE,data0:String(e)})},t.prototype.loadPlayerError=function(){this.sendStat({action:Fe.VIDEO_LOAD_PLAYER_ERROR})},t.prototype.startLoadingPlayer=function(){this.sendStat({action:Fe.VIDEO_START_LOADING_PLAYER})},t.prototype.invalidPlaybackPosition=function(e){var t=e.videoId,n=e.position,r=e.duration,o=e.previousPosition;this.sendStat({action:Fe.VIDEO_INVALID_PLAYBACK_POSITION,data0:String(t),data1:String(n),data2:String(o),data3:String(r)})},t}(Jc);!function(e){e.DMR_FRAME_ERROR="payments_dmr_frame_error",e.CHECK_FAILED="payments_check_failed"}(qc||(qc={}));var ju,zu,Yu=function(){function e(){}return e.prototype.send=function(e){Wo(e)},e}(),Ku=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ku(t,e),t.prototype.dmrFrameError=function(){this.send(qc.DMR_FRAME_ERROR)},t.prototype.checkFailed=function(){this.send(qc.CHECK_FAILED)},t}(Yu);!function(e){e.CREATE_BLOG_SUCCESS="CreateBlogSuccess",e.CREATE_TEAR_SUCCESS="CreateTearSuccess",e.PAID_SUBSCRIPTION_SUCCESS="PaidSubscriptionSuccess",e.CREATE_POST_SUCCESS="createPostSuccess"}(ju||(ju={})),function(e){e.MAIN_EVENT="MainEvent",e.BOOSTY_REGISTRATION="Boosty_Registration",e.BOOSTY_CREATOR_APPLICATION_START="Boosty_CreatorApplicationStart",e.BOOSTY_CREATOR_APPLICATION_COMPLETED="Boosty_CreatorApplicationCompleted",e.BOOSTY_INITIAL_SUBSCRIPTION="Boosty_InitialSubscription"}(zu||(zu={}));var Xu,Qu,Ju=function(){return Ju=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ju.apply(this,arguments)},Zu=function(){function e(){}return e.prototype.add=function(e,t){Array.isArray(window.GtmDataLayer)&&window.GtmDataLayer.push(Ju({event:e},t?{action:t}:{}))},e.prototype.createBlogSuccess=function(){this.add(zu.MAIN_EVENT,ju.CREATE_BLOG_SUCCESS)},e.prototype.createTearSuccess=function(){this.add(zu.MAIN_EVENT,ju.CREATE_TEAR_SUCCESS)},e.prototype.paidSubscriptionSuccess=function(){this.add(zu.MAIN_EVENT,ju.PAID_SUBSCRIPTION_SUCCESS)},e.prototype.registrationSuccess=function(){this.add(zu.BOOSTY_REGISTRATION)},e.prototype.startBecomingAuthor=function(){this.add(zu.BOOSTY_CREATOR_APPLICATION_START)},e.prototype.finishBecomingAuthor=function(){this.add(zu.BOOSTY_CREATOR_APPLICATION_COMPLETED)},e.prototype.createPostSuccess=function(){this.add(zu.MAIN_EVENT,ju.CREATE_POST_SUCCESS)},e.prototype.initialSubscriptionSuccess=function(){this.add(zu.BOOSTY_INITIAL_SUBSCRIPTION)},e}(),$u=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ed=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $u(t,e),t.prototype.selectLocale=function(e){return t=this,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){return[2,this.sendStat({action:Fe.SELECT_LOCALE,data0:e},!0)]}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}));var t,n,r},t}(Jc),td=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return td(t,e),t.prototype.sendPerformanceMetric=function(e){var t=e.metric,n=e.time;this.sendStat({action:t,data0:n.toString()})},t.prototype.sendPerformanceMainStaticFilesMetric=function(e){var t=e.vendorJS,n=e.appJS,r=e.iconsJS,o=e.stylesCSS;this.sendStat({action:k.MAIN_STATIC_FILES,data0:null==t?void 0:t.toString(),data1:null==n?void 0:n.toString(),data2:null==r?void 0:r.toString(),data3:null==o?void 0:o.toString()})},t}(Jc),rd=function(){function e(){}var t;return e.setCurrentUser=function(e){this.currentUser=e},e.setRouteData=function(e){this.routeData=e},t=e,e.log={appErrors:new $c(t),auth:new tu(t),error:new du(t),graphite:{payments:new qu},gtm:new Zu,metrics:new nd(t),post:new Au(t),share:new ku(t),singlePayment:new Uu(t),subscriptionPurchase:new xu(t),blog:new au(t),dmrFrame:new lu(t),navigation:new Nu(t),publisher:new Lu(t),upload:new Hu(t),video:new Vu(t),locale:new ed(t),marketing:new mu(t),message:new _u(t),mediaAlbum:new hu(t),mediaViewer:new gu(t),banner:new ru(t),donation:new cu(t),paymentWindow:new wu(t),trial:new Fu(t)},e}();!function(e){e.SMILES_SELECTOR="SMILES_SELECTOR",e.SMILE_INFO_TOOLTIP="SMILE_INFO_TOOLTIP",e.SUBSCRIBE_LEVEL="SUBSCRIBE_LEVEL",e.SUBSCRIBE_LEVEL_MEDIA="SUBSCRIBE_LEVEL_MEDIA",e.POST_SUBSCRIBE="BLOG_POST_SUBSCRIBE",e.BLOG_STREAM_SUBSCRIBE="BLOG_STREAM_SUBSCRIBE",e.NOTICE_LIST="NOTICE_LIST",e.AFTER_FOLLOW_POPUP="AFTER_FOLLOW_POPUP",e.WEB_VIEW="WEB_VIEW",e.DIRECT="DIRECT"}(Xu||(Xu={})),function(e){e.SUCCESS="SUCCESS",e.FAILURE="FAILURE"}(Qu||(Qu={}));var od,ad=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),id=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ad(t,e),t}(Jc),ld=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ld(t,e),t.prototype.openPopup=function(){var e={action:Fe.BECOME_AUTHOR_POPUP_SHOW};this.sendStat(e)},t}(id),cd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ud=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cd(t,e),t.prototype.open=function(){var e={action:Fe.PHOTO_LAYER_OPEN};this.sendStat(e)},t}(id),dd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return dd(t,e),t.prototype.openPopup=function(){var e={action:Fe.POLICY_POPUP_SHOW};this.sendStat(e)},t.prototype.acceptClick=function(){var e={action:Fe.POLICY_POPUP_ACCEPT};this.sendStat(e)},t}(id),md=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return md(t,e),t.prototype.submit=function(e){var t=e.errorCode,n=e.formType;this.sendStat({action:Fe.POST_FORM_ERRORS,data0:t,data1:n})},t}(id),hd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hd(t,e),t.prototype.showWidget=function(e){var t=e.price,n={action:Fe.WIDGET_DONATE_SHOW,data0:String(t),data1:Lr()};this.sendStat(n)},t.prototype.show3ds=function(){var e={action:Fe.WIDGET_DONATE_3DS_SHOW,data0:Lr()};this.sendStat(e)},t.prototype.singlePaymentFinished=function(e){var t=e.result,n=e.price,r=e.transactionId,o=e.dmrErrorCode,a={action:Fe.WIDGET_DONATE_FINISHED,data0:t,data1:r||"",data2:o||"",data3:String(n),data4:Lr()};this.sendStat(a)},t}(id),gd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gd(t,e),t.prototype[Fe.WIDGET_WEB_VIEW_SUBSCRIBE_CANCEL]=function(){var e={action:Fe.WIDGET_WEB_VIEW_SUBSCRIBE_CANCEL,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_SUBSCRIBE_FAILURE]=function(e){var t=e.error,n={action:Fe.WIDGET_WEB_VIEW_SUBSCRIBE_FAILURE,data0:Lr(),data1:t};this.sendStat(n)},t.prototype[Fe.WIDGET_WEB_VIEW_SUBSCRIBE_SHOW]=function(){var e={action:Fe.WIDGET_WEB_VIEW_SUBSCRIBE_SHOW,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_SUBSCRIBE_SUCCESS]=function(){var e={action:Fe.WIDGET_WEB_VIEW_SUBSCRIBE_SUCCESS,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_POST_PURCHASE_CANCEL]=function(){var e={action:Fe.WIDGET_WEB_VIEW_POST_PURCHASE_CANCEL,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_POST_PURCHASE_FAILURE]=function(e){var t=e.error,n={action:Fe.WIDGET_WEB_VIEW_POST_PURCHASE_FAILURE,data0:Lr(),data1:t};this.sendStat(n)},t.prototype[Fe.WIDGET_WEB_VIEW_POST_PURCHASE_SHOW]=function(){var e={action:Fe.WIDGET_WEB_VIEW_POST_PURCHASE_SHOW,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_POST_PURCHASE_SUCCESS]=function(){var e={action:Fe.WIDGET_WEB_VIEW_POST_PURCHASE_SUCCESS,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_DONATION_CANCEL]=function(){var e={action:Fe.WIDGET_WEB_VIEW_DONATION_CANCEL,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_DONATION_FAILURE]=function(e){var t=e.error,n={action:Fe.WIDGET_WEB_VIEW_DONATION_FAILURE,data0:Lr(),data1:t};this.sendStat(n)},t.prototype[Fe.WIDGET_WEB_VIEW_DONATION_SHOW]=function(){var e={action:Fe.WIDGET_WEB_VIEW_DONATION_SHOW,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_DONATION_SUCCESS]=function(){var e={action:Fe.WIDGET_WEB_VIEW_DONATION_SUCCESS,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_CANCEL]=function(){var e={action:Fe.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_CANCEL,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_FAILURE]=function(e){var t=e.error,n={action:Fe.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_FAILURE,data0:Lr(),data1:t};this.sendStat(n)},t.prototype[Fe.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_SHOW]=function(){var e={action:Fe.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_SHOW,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_SUCCESS]=function(){var e={action:Fe.WIDGET_WEB_VIEW_MESSAGE_PURCHASE_SUCCESS,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_BIND_CARD_CANCEL]=function(){var e={action:Fe.WIDGET_WEB_VIEW_BIND_CARD_CANCEL,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_BIND_CARD_FAILURE]=function(e){var t=e.error,n={action:Fe.WIDGET_WEB_VIEW_BIND_CARD_FAILURE,data0:Lr(),data1:t};this.sendStat(n)},t.prototype[Fe.WIDGET_WEB_VIEW_BIND_CARD_SHOW]=function(){var e={action:Fe.WIDGET_WEB_VIEW_BIND_CARD_SHOW,data0:Lr()};this.sendStat(e)},t.prototype[Fe.WIDGET_WEB_VIEW_BIND_CARD_SUCCESS]=function(){var e={action:Fe.WIDGET_WEB_VIEW_BIND_CARD_SUCCESS,data0:Lr()};this.sendStat(e)},t}(id),_d=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ed=function(){return Ed=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ed.apply(this,arguments)},bd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return _d(t,e),t.setCurrentUser=function(e){rd.setCurrentUser(e),this.currentUser=e},t.setRouteData=function(e){rd.setRouteData(e),this.routeData=e},n=t,t.instance=new t,t.log=Ed(Ed({},rd.log),{postFormErrors:new pd(n),becomeAuthor:new sd(n),photoLayer:new ud(n),widgets:{donate:new vd(n),webView:new yd(n)},acceptPolicy:new fd(n)}),t}(rd);!function(e){e.HEADER_LOGIN="HEADER_LOGIN",e.HEADER_REGISTER="HEADER_REGISTER",e.BLOG_FOLLOW="BLOG_FOLLOW",e.MESSAGE="MESSAGE",e.SUBSCRIBE="SUBSCRIBE",e.SUBSCRIBE_LEVEL="SUBSCRIBE_LEVEL",e.POST_SUBSCRIBE="BLOG_POST_SUBSCRIBE",e.POST_LIKE="BLOG_POST_LIKE",e.POST_COMMENT="BLOG_POST_COMMENT",e.MAIN_BECOME_AUTHOR="MAIN_BECOME_AUTHOR",e.MAIN_LOGIN="MAIN_LOGIN",e.LANDINGS_DA="LANDINGS_DA",e.LANDING_BLOG_2125="LANDING_BLOG_2125",e.OTHER="OTHER"}(od||(od={}));var Sd=function(){return Sd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sd.apply(this,arguments)},Td=function(){(0,Yt.removeFromLocalStorage)(o.AUTH)};function Id(){return nr().browserFamily===C.FIREFOX}var Nd,Cd=function(){return!!navigator.userAgent.match(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari/)};!function(e){e.FILE_SIZE_LIMIT="FILE_SIZE_LIMIT",e.NETWORK_ERROR="NETWORK_ERROR",e.CHUNK_RETRY_LIMIT_EXCEEDED="CHUNK_RETRY_LIMIT_EXCEEDED",e.FILE_RETRY_LIMIT_EXCEEDED="FILE_RETRY_LIMIT_EXCEEDED"}(Nd||(Nd={}));var wd=n(9571),Od=function(){return Od=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Od.apply(this,arguments)},Ad=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Pd=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ld=function(){function e(e){var t=this;this.shouldRetryOn201=!1,this.uploadedBytes=0,this.pendingChunks=[],this.failedChunks=[],this.retries=0,this.fileRetries=0,this.sessionId=(0,wd.Z)(),this.retryTimer=null,this.isUploadCancelled=!1,this.onUploadChunkProgress=function(e){if(t.options.onProgress){var n=t.options.file,r=e.loaded;t.options.onProgress({loaded:t.uploadedBytes,total:n.size,percent:Math.min(100,Math.round((t.uploadedBytes+r)/(n.size/100)))})}},this.options=e}return e.prototype.upload=function(){return Ad(this,void 0,void 0,(function(){return Pd(this,(function(e){if(this.options.file.size>this.getLimitFileSize())throw this.lastError=Nd.FILE_SIZE_LIMIT,this.statUploadFileError(),new Error("Failed upload by limit of file size");return this.statUploadFile(),this.setPendingChunks(),[2,this.uploadPendingChunk(0)]}))}))},e.prototype.isSendSessionIdHeader=function(){return!0},e.prototype.getContentRangeHeaderName=function(){return"X-Content-Range"},e.prototype.getAdditionalUploadHeaders=function(){return{}},e.prototype.getLimitFileSize=function(){return 10485760},e.prototype.getChunkSize=function(){return 10485760},e.prototype.getChunkRetryCount=function(){return 10},e.prototype.getChunkRetryDelay=function(){return 15e3},e.prototype.getRetryCount=function(){return 3},e.prototype.getCommonStatParams=function(){var e=this.options.file,t=e.type,n=e.size;return{ext:e.name.split(".").pop(),type:t,size:n}},e.prototype.getFailedChunksSize=function(){return this.failedChunks.reduce((function(e,t){return e+t.chunk.size}),0)},e.prototype.setExtraOptions=function(e){this.extraOptions=e},e.prototype.statUploadFile=function(){rd.log.upload.uploadFile(this.getCommonStatParams())},e.prototype.statUploadFileSuccess=function(){rd.log.upload.uploadFileSuccess(this.getCommonStatParams())},e.prototype.statUploadFileCancelled=function(){rd.log.upload.uploadFileCancelled()},e.prototype.statUploadFileError=function(){rd.log.upload.uploadFileError(Od(Od({},this.getCommonStatParams()),{error:this.lastError}))},e.prototype.statUploadFileRetry=function(){},e.prototype.statUploadFileChunkSuccess=function(e,t){},e.prototype.statUploadFileChunkError=function(e,t){rd.log.upload.uploadFileChunkError(Od(Od({},this.getCommonStatParams()),{error:this.lastError,range:e,time:t}))},e.prototype.statUploadFileChunkRetry=function(e,t){},e.prototype.setFailedChunks=function(e){var t=this,n=this.options.file,r=this.getChunkSize();e.split(",").forEach((function(e,o,a){for(var i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(e.split("/"),2),l=i[0],s=i[1],c=l.split("-")[1],u=o===a.length-1?Number(s)-1:Number(a[o+1].split("/")[0].split("-")[0]),d=Number(c);d<u;){var f=d+r<u-1?d+r:u;t.failedChunks.push({start:d,end:f,chunk:n.slice(d,f)}),d=f}}))},e.prototype.setPendingChunks=function(){for(var e=this.options.file,t=this.getChunkSize(),n=0;n<e.size;){var r=n+t<e.size-1?n+t:e.size;this.pendingChunks.push({start:n,end:r,chunk:e.slice(n,r)}),n+=t}},e.prototype.uploadPendingChunk=function(e){return Ad(this,void 0,Promise,(function(){return Pd(this,(function(t){switch(t.label){case 0:return[4,this.uploadChunk(e,this.pendingChunks)];case 1:return t.sent(),[2]}}))}))},e.prototype.uploadFailedChunk=function(e){return Ad(this,void 0,Promise,(function(){return Pd(this,(function(t){switch(t.label){case 0:return[4,this.uploadChunk(e,this.failedChunks)];case 1:return t.sent(),[2]}}))}))},e.prototype.uploadChunk=function(e,t){return Ad(this,void 0,Promise,(function(){var n,r,o,a,i,l=this;return Pd(this,(function(s){return n=Date.now(),r=t[e],o=r.start,a=r.end,i=r.chunk,[2,new Promise((function(r,s){return Ad(l,void 0,void 0,(function(){var l,c,u,d,f,m,p,h,v,g,y,_,E=this;return Pd(this,(function(b){switch(b.label){case 0:l=this.options,c=l.file,u=l.url,d=this.getUploadApi(),f=a-o,b.label=1;case 1:b.trys.push([1,13,,14]),this.retryTimer=setTimeout((function(){return Ad(E,void 0,void 0,(function(){return Pd(this,(function(r){switch(r.label){case 0:m(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.retryUploadChunk(e,t,Date.now()-n)];case 2:return r.sent(),[2,!0];case 3:return r.sent(),[2,!1];case 4:return[2]}}))}))}),this.getChunkRetryDelay()),b.label=2;case 2:return b.trys.push([2,11,,12]),[4,d(u,i,Od(Od((_={"Content-Disposition":'attachment; filename="'.concat(encodeURIComponent(c.name),'"')},_[this.getContentRangeHeaderName()]="bytes ".concat(o,"-").concat(a-1,"/").concat(c.size),_),this.isSendSessionIdHeader()?{"X-Session-ID":this.sessionId}:{}),this.getAdditionalUploadHeaders()),(function(e){return E.onUploadChunkProgress(e)}),(function(e){return m=e}))];case 3:return p=b.sent(),h=p.status,v=p.data,this.uploadedBytes+=f,clearTimeout(this.retryTimer),this.isUploadCancelled?(m(),r(),this.statUploadFileCancelled(),[2]):(this.statUploadFileChunkSuccess("".concat(o,"-").concat(a-1),Date.now()-n),e!==t.length-1?[3,7]:this.shouldRetryOn201&&201===h?this.fileRetries===this.getRetryCount()?[3,5]:(this.setFailedChunks(v),this.uploadedBytes-=this.getFailedChunksSize(),this.options.onProgress({loaded:this.uploadedBytes,total:c.size,percent:Math.min(100,Math.round(this.uploadedBytes/(c.size/100)))}),this.fileRetries+=1,this.statUploadFileRetry(),[4,this.uploadFailedChunk(0)]):[3,6]);case 4:return b.sent(),[3,6];case 5:this.lastError=Nd.FILE_RETRY_LIMIT_EXCEEDED,this.statUploadFileError(),s(new Error(this.lastError)),b.label=6;case 6:return r(),this.statUploadFileSuccess(),this.options.onSuccess&&this.options.onSuccess(),[3,10];case 7:return b.trys.push([7,9,,10]),this.retries=0,[4,this.uploadChunk(e+=1,t)];case 8:return b.sent(),r(),[3,10];case 9:return g=b.sent(),s(g),[3,10];case 10:return[3,12];case 11:return b.sent(),this.lastError=Nd.NETWORK_ERROR,this.options.onProgress({loaded:this.uploadedBytes,total:c.size,percent:Math.min(100,Math.round(this.uploadedBytes/(c.size/100)))}),this.statUploadFileChunkError("".concat(o,"-").concat(a-1),Date.now()-n),[3,12];case 12:return[3,14];case 13:return y=b.sent(),s(y),this.statUploadFileError(),this.options.onError&&this.options.onError(),[3,14];case 14:return[2]}}))}))}))]}))}))},e.prototype.retryUploadChunk=function(e,t,n){return Ad(this,void 0,void 0,(function(){var r,o,a;return Pd(this,(function(i){return clearTimeout(this.retryTimer),this.retries<this.getChunkRetryCount()?(this.retries++,r=t[e],o=r.start,a=r.end,this.statUploadFileChunkRetry("".concat(o,"-").concat(a-1),n),[2,this.uploadChunk(e,t)]):(this.lastError=Nd.CHUNK_RETRY_LIMIT_EXCEEDED,this.statUploadFileError(),this.options.onError&&this.options.onError(),[2,Promise.reject()])}))}))},e}(),Rd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kd=function(){return kd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kd.apply(this,arguments)},Dd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rd(t,e),t.prototype.getUploadApi=function(){return Kc.mediaData.uploadAudioChunk.bind(Kc.mediaData)},t.prototype.getLimitFileSize=function(){var t=nr().publisher.audioFiles.limits.fileSize;return t?1024*t*1024:e.prototype.getLimitFileSize.call(this)},t.prototype.getChunkSize=function(){var t=nr().publisher.audioFiles.upload.chunkSize;return t?1024*t*1024:e.prototype.getChunkSize.call(this)},t.prototype.getChunkRetryCount=function(){return nr().publisher.audioFiles.upload.retryCount||e.prototype.getChunkRetryCount.call(this)},t.prototype.getChunkRetryDelay=function(){var t=nr().publisher.audioFiles.upload.retryDelay;return t?1e3*t:e.prototype.getChunkRetryDelay.call(this)},t.prototype.statUploadFile=function(){e.prototype.statUploadFile.call(this),rd.log.publisher.uploadAudio(this.getCommonStatParams())},t.prototype.statUploadFileSuccess=function(){e.prototype.statUploadFileSuccess.call(this),rd.log.publisher.uploadAudioSuccess(this.getCommonStatParams())},t.prototype.statUploadFileError=function(){e.prototype.statUploadFileError.call(this),rd.log.publisher.uploadAudioError(kd(kd({},this.getCommonStatParams()),{error:this.lastError}))},t.prototype.statUploadFileChunkError=function(t,n){e.prototype.statUploadFileChunkError.call(this,t,n),rd.log.publisher.uploadAudioChunkError(kd(kd({},this.getCommonStatParams()),{error:this.lastError}))},t}(Ld),Ud=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bd=function(){return Bd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bd.apply(this,arguments)},xd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ud(t,e),t.prototype.getUploadApi=function(){return Kc.mediaData.uploadFileChunk.bind(Kc.mediaData)},t.prototype.getLimitFileSize=function(){var t=nr().publisher.files.limits.fileSize;return t?1024*t*1024:e.prototype.getLimitFileSize.call(this)},t.prototype.getChunkSize=function(){var t=nr().publisher.files.upload.chunkSize;return t?1024*t*1024:e.prototype.getChunkSize.call(this)},t.prototype.getChunkRetryCount=function(){return nr().publisher.files.upload.retryCount||e.prototype.getChunkRetryCount.call(this)},t.prototype.getChunkRetryDelay=function(){var t=nr().publisher.files.upload.retryDelay;return t?1e3*t:e.prototype.getChunkRetryDelay.call(this)},t.prototype.statUploadFile=function(){e.prototype.statUploadFile.call(this),rd.log.publisher.uploadFile(this.getCommonStatParams())},t.prototype.statUploadFileSuccess=function(){e.prototype.statUploadFileSuccess.call(this),rd.log.publisher.uploadFileSuccess(this.getCommonStatParams())},t.prototype.statUploadFileError=function(){e.prototype.statUploadFileError.call(this),rd.log.publisher.uploadFileError(Bd(Bd({},this.getCommonStatParams()),{error:this.lastError}))},t.prototype.statUploadFileChunkError=function(t,n){e.prototype.statUploadFileChunkError.call(this,t,n),rd.log.publisher.uploadFileChunkError(Bd(Bd({},this.getCommonStatParams()),{error:this.lastError}))},t}(Ld),Md=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fd=function(){return Fd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fd.apply(this,arguments)},Gd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shouldRetryOn201=!0,t}return Md(t,e),t.prototype.isSendSessionIdHeader=function(){return!1},t.prototype.getContentRangeHeaderName=function(){return"Content-Range"},t.prototype.getAdditionalUploadHeaders=function(){return Fd(Fd({},e.prototype.getAdditionalUploadHeaders.call(this)),{"X-Uploading-Mode":"parallel"})},t.prototype.getUploadApi=function(){return Kc.mediaData.uploadVideoChunk.bind(Kc.mediaData)},t.prototype.getLimitFileSize=function(){var t=nr().publisher.videoFiles.limits.fileSize;return t?1024*t*1024:e.prototype.getLimitFileSize.call(this)},t.prototype.getChunkSize=function(){var t=nr().publisher.videoFiles.upload.chunkSize;return t?1024*t*1024:e.prototype.getChunkSize.call(this)},t.prototype.getChunkRetryCount=function(){return nr().publisher.videoFiles.upload.retryCount||e.prototype.getChunkRetryCount.call(this)},t.prototype.getChunkRetryDelay=function(){var t=nr().publisher.videoFiles.upload.retryDelay;return t?1e3*t:e.prototype.getChunkRetryDelay.call(this)},t.prototype.getRetryCount=function(){return nr().publisher.videoFiles.upload.fileRetryCount||e.prototype.getRetryCount.call(this)},t.prototype.getCommonStatParams=function(){return Fd(Fd({},e.prototype.getCommonStatParams.call(this)),this.extraOptions)},t.prototype.setExtraOptions=function(e){this.extraOptions=e},t.prototype.statUploadFile=function(){e.prototype.statUploadFile.call(this),rd.log.publisher.uploadVideo(this.getCommonStatParams())},t.prototype.statUploadFileSuccess=function(){e.prototype.statUploadFileSuccess.call(this),rd.log.publisher.uploadVideoSuccess(this.getCommonStatParams())},t.prototype.statUploadFileError=function(){e.prototype.statUploadFileError.call(this),rd.log.publisher.uploadVideoError(Fd(Fd({},this.getCommonStatParams()),{error:this.lastError}))},t.prototype.statUploadFileRetry=function(){e.prototype.statUploadFileRetry.call(this),rd.log.publisher.uploadVideoRetry(Fd(Fd({},this.getCommonStatParams()),{retryCount:this.fileRetries}))},t.prototype.statUploadFileChunkSuccess=function(t,n){var r=nr().publisher.videoFiles.isStatChunkSuccessEnabled;e.prototype.statUploadFileChunkSuccess.call(this,t,n),r&&rd.log.publisher.uploadVideoChunkSuccess(Fd(Fd({},this.getCommonStatParams()),{range:t,time:n}))},t.prototype.statUploadFileChunkError=function(t,n){e.prototype.statUploadFileChunkError.call(this,t,n),rd.log.publisher.uploadVideoChunkError(Fd(Fd({},this.getCommonStatParams()),{error:this.lastError,range:t,time:n}))},t.prototype.statUploadFileChunkRetry=function(t,n){e.prototype.statUploadFileChunkRetry.call(this,t,n),rd.log.publisher.uploadVideoChunkRetry(Fd(Fd({},this.getCommonStatParams()),{retryCount:this.retries,range:t,time:n}))},t}(Ld),Hd=Gt.createContext(null),Wd=function(){return Gt.useContext(Hd)},Vd=n(73463);function jd(e){return e.displayName||e.name||"Component"}var zd=function(){var e=document.getElementById(te.TOP_MENU),t=document.getElementById(te.NOTICE_LIST);return((null==e?void 0:e.offsetHeight)||0)+((null==t?void 0:t.offsetHeight)||0)};function Yd(e){return t=this,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){return[2,new Promise((function(t){var n=new Image;n.onload=function(){t({width:n.width,height:n.height})},n.src=URL.createObjectURL(e)}))]}))},new((n=Promise)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}));var t,n,r}var Kd=function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){return[2,new Promise((function(t){var n=new FileReader;n.onload=function(e){if(e.target){var n=e.target,r=new DataView(n.result);65496!==r.getUint16(0,!1)&&t(-2);for(var o=r.byteLength,a=2;a<o;){r.getUint16(a+2,!1)<=8&&t(-1);var i=r.getUint16(a,!1);if(a+=2,65505===i){1165519206!==r.getUint32(a+=2,!1)&&t(-1);var l=18761===r.getUint16(a+=6,!1);a+=r.getUint32(a+4,l);var s=r.getUint16(a,l);a+=2;for(var c=0;c<s;c++)274===r.getUint16(a+12*c,l)&&t(r.getUint16(a+12*c+8,l))}else{if(65280!=(65280&i))break;a+=r.getUint16(a,!1)}}t(-1)}},n.readAsArrayBuffer(e)}))]}))},new((t=Promise)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n},qd=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Xd=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Qd=function(e){return qd(void 0,void 0,Promise,(function(){return Xd(this,(function(t){return[2,new Promise((function(t){return qd(void 0,void 0,void 0,(function(){var n,r,o,a,i,l;return Xd(this,(function(s){switch(s.label){case 0:return[4,Kd(e)];case 1:return n=s.sent(),r=document.createElement("canvas"),o=r.getContext("2d"),a="image/png"===e.type?e.type:"image/jpeg",n<=1?t({file:e,url:URL.createObjectURL(e)}):(i=new Image,(l=new FileReader).onload=function(){var t=new DataView(l.result),n=0,r=0,o=[],s=0;if(65496==t.getUint16(n)){n+=2;var c=t.getUint16(n);for(n+=2;n<t.byteLength;){if(65505==c)o[s]={recess:r,offset:n-2},r=n+t.getUint16(n),s++;else if(65498==c)break;n+=t.getUint16(n),c=t.getUint16(n),n+=2}if(o.length>0){var u=[];o.forEach((function(e){return u.push(l.result.slice(e.recess,e.offset))})),u.push(l.result.slice(r));var d=new Blob(u,{type:a});i.src=URL.createObjectURL(d)}else i.src=URL.createObjectURL(e)}else i.src=URL.createObjectURL(e)},l.readAsArrayBuffer(e),i.onload=function(){var l=i.width,s=i.height;switch(n>4&&n<9?(r.width=s,r.height=l):(r.width=l,r.height=s),n){case 2:o.transform(-1,0,0,1,l,0);break;case 3:o.transform(-1,0,0,-1,l,s);break;case 4:o.transform(1,0,0,-1,0,s);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,s,0);break;case 7:o.transform(0,-1,-1,0,s,l);break;case 8:o.transform(0,-1,1,0,0,l)}o.drawImage(i,0,0);var c=r.toDataURL(a);t({file:e,url:c})}),[2]}}))}))}))]}))}))},Jd=function(){return{top:window.pageYOffset,left:window.pageXOffset}},Zd=function(e,t){return void 0===e&&(e="center"),void 0===t&&(t="smooth"),!Cd()&&{behavior:t,block:e}},$d=function(){return $d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$d.apply(this,arguments)},ef=function(){var e=nr(),t="".concat(Lr(),":").concat(e.clientId),n=function(t){return e.oauthProviders&&e.oauthProviders[t]},r=Di(),o=e.appId,a=JSON.stringify({unregId:t,from:r,redirectAppId:o}),i=function(e,t){var n=e,r=e.split("***");if(t)try{var o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(r,3),a=o[0],i=o[2],l=i===fa.ProviderCodes.VK?decodeURIComponent(decodeURIComponent(a)):decodeURIComponent(a);n=encodeURIComponent(JSON.stringify($d($d({},JSON.parse(l)),{isExternalAccountLink:t}))),n+="***"+r.slice(1).join("***"),i===fa.ProviderCodes.VK&&(n=encodeURIComponent(n))}catch(e){e instanceof Error&&ho.error("Failed parse state: ".concat(e&&e.toString()?e.toString():String(e)))}return n};return[n("vk")&&new fa.OAuthProvider({appId:e.oauthProviders.vk.appId,scope:e.oauthProviders.vk.scope,urlTemplate:function(e,t,n,r,o){return"https://oauth.vk.com/authorize?client_id=".concat(e,"&display=page&response_type=code&state=").concat(i(r,o),"&v=5.73&scope=").concat(t,"&redirect_uri=").concat(n)},apiUrl:e.oauthProviders.vk.tokenEndpoint,width:670,height:370,code:fa.ProviderCodes.VK,redirectUrl:e.oauthRedirect,state:a,isAuthorizeEnabled:!0}),n("fb")&&new fa.OAuthProvider({appId:e.oauthProviders.fb.appId,urlTemplate:function(e,t,n,r,o){return"https://www.facebook.com/v3.0/dialog/oauth?client_id=".concat(e,"&redirect_uri=").concat(n,"&state=").concat(i(r,o))},apiUrl:e.oauthProviders.fb.tokenEndpoint,width:620,height:560,code:fa.ProviderCodes.FB,redirectUrl:e.oauthRedirect,state:a,isAuthorizeEnabled:!0}),n("youtube")&&new fa.OAuthProvider({appId:e.oauthProviders.youtube.appId,scope:e.oauthProviders.youtube.scope,urlTemplate:function(e,t,n,r,o){return"https://accounts.google.com/o/oauth2/v2/auth?client_id=".concat(e,"&redirect_uri=").concat(n,"&access_type=offline&response_type=code&state=").concat(i(r,o),"&scope=").concat(t)},apiUrl:e.oauthProviders.youtube.tokenEndpoint,width:600,height:345,code:fa.ProviderCodes.Youtube,redirectUrl:e.oauthRedirect,state:a,isAuthorizeEnabled:!0}),n("google")&&new fa.OAuthProvider({appId:e.oauthProviders.google.appId,scope:e.oauthProviders.google.scope,urlTemplate:function(e,t,n,r,o){return"https://accounts.google.com/o/oauth2/v2/auth?client_id=".concat(e,"&redirect_uri=").concat(n,"&access_type=offline&response_type=code&state=").concat(i(r,o),"&scope=").concat(t)},apiUrl:e.oauthProviders.google.tokenEndpoint,width:600,height:345,code:fa.ProviderCodes.Google,redirectUrl:e.oauthRedirect,state:a,isAuthorizeEnabled:!0}),n("mr")&&new fa.OAuthProvider({appId:e.oauthProviders.mr.appId,urlTemplate:function(e,t,n,r,o){return"https://connect.mail.ru/oauth/authorize?client_id=".concat(e,"&response_type=code&state=").concat(i(r,o),"&redirect_uri=").concat(n)},apiUrl:e.oauthProviders.mr.tokenEndpoint,width:600,height:345,code:fa.ProviderCodes.MailRu,redirectUrl:e.oauthRedirect,state:a,isAuthorizeEnabled:!0}),n("ok")&&new fa.OAuthProvider({appId:e.oauthProviders.ok.appId,scope:e.oauthProviders.ok.scope,redirectUrl:e.oauthRedirect,urlTemplate:function(e,t,n,r,o){return"https://connect.ok.ru/oauth/authorize?client_id=".concat(e,"&response_type=code&state=").concat(i(r,o),"&scope=").concat(t,"&redirect_uri=").concat(n)},apiUrl:e.oauthProviders.ok.tokenEndpoint,width:600,height:345,code:fa.ProviderCodes.OK,state:a,isAuthorizeEnabled:!0}),n("twitch")&&new fa.OAuthProvider({appId:e.oauthProviders.twitch.appId,scope:e.oauthProviders.twitch.scope,urlTemplate:function(e,t,n,r,o){return"https://id.twitch.tv/oauth2/authorize?client_id=".concat(e,"&redirect_uri=").concat(n,"&response_type=code&state=").concat(i(r,o),"&hl=en")},apiUrl:e.oauthProviders.twitch.tokenEndpoint,width:600,height:345,code:fa.ProviderCodes.Twitch,redirectUrl:e.oauthRedirect,state:a,isAuthorizeEnabled:!0}),n("discord")&&new fa.OAuthProvider({appId:e.oauthProviders.discord.appId,scope:e.oauthProviders.discord.scope,urlTemplate:function(e,t,n,r,o){return"https://discordapp.com/api/oauth2/authorize?response_type=code&client_id=".concat(e,"&state=").concat(i(r,o),"&scope=").concat(t,"&access_type=offline&redirect_uri=").concat(n)},apiUrl:e.oauthProviders.discord.tokenEndpoint,width:600,height:345,code:fa.ProviderCodes.Discord,redirectUrl:e.oauthRedirect,isRejectByCloseWindow:!1,isIgnoreTokens:!0,state:a,isAuthorizeEnabled:!1}),n("discordBot")&&new fa.OAuthProvider({appId:e.oauthProviders.discordBot.appId,scope:e.oauthProviders.discordBot.scope,urlTemplate:function(t,n,r,o,a){return"https://discordapp.com/api/oauth2/authorize?response_type=code&client_id=".concat(t,"&state=").concat(i(o,a),"&scope=").concat(n,"&redirect_uri=").concat(r,"&permissions=").concat(e.oauthProviders.discordBot.permissions)},apiUrl:e.oauthProviders.discordBot.tokenEndpoint,width:600,height:750,code:fa.ProviderCodes.DiscordBot,redirectUrl:e.discordLinkRedirect,isRejectByCloseWindow:!1,isIgnoreTokens:!0,state:a,isAuthorizeEnabled:!1}),n("vkplay")&&new fa.OAuthProvider({appId:e.oauthProviders.vkplay.appId,urlTemplate:function(t,n,r,o,a){var l,s=e.isTestServer?"account.dev-vkplay.ru":"account.vkplay.ru",c="",u=null===(l=e.oauthProviders.vkplay.skipGrants)||void 0===l?void 0:l.enabled;return u&&!bu(U.SKIP_GRANTS)&&(c="&skip_grants=".concat(Number(u))),"https://".concat(s,"/oauth2/?client_id=").concat(t,"&response_type=code").concat(c,"&state=").concat(i(o,a),"&redirect_uri=").concat(r)},apiUrl:e.oauthProviders.vkplay.tokenEndpoint,width:670,height:370,code:fa.ProviderCodes.VKPlay,redirectUrl:e.oauthRedirect,state:a,isAuthorizeEnabled:!0})].filter((function(e){return Boolean(e)}))},tf=function(e){return ef().find((function(t){return t.code.toLowerCase()===e.toLowerCase()}))},nf=function(){return nf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nf.apply(this,arguments)},rf=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},of=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},af=function(){var e=new fa.AuthActions({providers:ef(),api:{get:function(e){return rf(void 0,void 0,Promise,(function(){var t,n,r,o;return of(this,(function(a){switch(a.label){case 0:return t=nr(),n=t.isWidget,r=t.isMobile,[4,Kc.base.get({url:e,headers:(o={},o["X-App"]=n&&!r?h.WEB_WIDGETS:Lr(),o)})];case 1:return[2,a.sent().data]}}))}))},post:function(e,t){return rf(void 0,void 0,Promise,(function(){var n,o,a,i,l,s,c,u,d,f,m,p,v;return of(this,(function(g){switch(g.label){case 0:return n=nr(),o=n.isWidget,a=n.isMobile,i=n.fbAuthDisabled.hasOnlyFBAuthSource,l=e===jn.OAUTH_PHONE_TOKEN,s=e===jn.OAUTH_PHONE_AUTHORIZE,c=Qo(r.INVITES)&&bu(U.INVITE),u=Qo(r.FB_AUTH_DISABLED_DISCLAIMER)&&i?null===(v=JSON.parse(bu(U.AUTH)))||void 0===v?void 0:v.accessToken:null,[4,Kc.base.post({url:e,data:t,headers:nf(nf((f={},f["X-App"]=o&&!a?h.WEB_WIDGETS:Lr(),f),l&&c&&(m={},m["X-Invite"]=c,m)),(s||l)&&u&&(p={},p.Authorization="Bearer ".concat(u),p))})];case 1:return d=g.sent(),l?[2,nf(nf({},d.data),{isNewUser:1===Number(d.headers["X-New-User"])})]:[2,d.data]}}))}))}},cookieName:U.AUTH,setCookie:function(e){var t=nr().oauthCookieDomain,n=new Date(Number(e.expiresAt)+18144e5).toUTCString();try{document.cookie="".concat(U.AUTH,"=").concat(encodeURIComponent(JSON.stringify(e)),";domain=").concat(t,";expires=").concat(n,";path=/;SameSite=None;Secure;")}catch(e){ho.error("Failed write auth cookie: ",e)}Ta.setItem("token",e)},resetCookie:function(){var e=nr().oauthCookieDomain;document.cookie="".concat(U.AUTH,"=;expires=").concat(new Date(0).toUTCString()).concat(e?";path=/;domain="+e:"",";Secure;"),document.cookie="".concat(U.NEW_USER,"=;expires=").concat(new Date(0).toUTCString()).concat(e?";path=/;domain="+e:"",";Secure;"),Td(),Ta.removeItem("auth"),Ta.removeItem("token")},getUserData:function(){return rf(void 0,void 0,void 0,(function(){return of(this,(function(e){switch(e.label){case 0:return[4,Kc.user.fetchCurrent()];case 1:return[2,e.sent().data]}}))}))},refreshToken:function(e){return rf(void 0,void 0,void 0,(function(){var t,n;return of(this,(function(r){switch(r.label){case 0:return t=nr().clientId,n=Lr(),e?[4,Kc.user.refreshToken({refreshToken:e,appId:n,fromId:t})]:[3,2];case 1:return[2,r.sent().data];case 2:return[2,void 0]}}))}))}}),t=e.requestAuth.bind(e);return e.requestAuth=function(n,r,o){var a=nr(),i=a.isMobile,l=a.isWidget,s=a.isFromStreams;return!i||l||s?t(n,r,o):e.authWithRedirect(n)},e.tryInstantAuth=e.tryInstantAuth.bind(e),e.tryRestoreAuth=e.tryRestoreAuth.bind(e),e.restoreSession=e.restoreSession.bind(e),e.authorizeByPhone=e.authorizeByPhone.bind(e),e.fetchTokenByPhone=e.fetchTokenByPhone.bind(e),e.authorizeByOAuth=e.authorizeByOAuth.bind(e),e.checkApp=e.checkApp.bind(e),e},lf={authToken:null};function sf(e){lf.authToken=e,af().setCookie(e)}function cf(){var e=af().tryGetCookie();return!e&&lf.authToken?lf.authToken:e||lf.authToken||!Ta.getItem("token")?e:Ta.getItem("token")}function uf(){af().resetCookie(),lf.authToken=null}var df=function(){return df=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},df.apply(this,arguments)};function ff(e){return/^(https?:)?\/\//.test(e)&&e.substring(e.indexOf("//"))}function mf(e){var t,n=nr().hosts.api;return e.startsWith("/")?ff(/^(https?:)?\/\//.test(n)?n:"//".concat(n)):null===(t=ff(e))||void 0===t?void 0:t.substring(ff(e).indexOf("//"),ff(e).indexOf("/",9))}function pf(e){var t=mf(e),n=nr().hosts,r=n.api,o=n.uploadImg,a=n.uploadRegExp,i=ff(r),l=ff(o);return t&&t!==window.location.host&&t!==i&&t!==l&&!new RegExp("^".concat(a,"$")).test(t)}var hf,vf=function(){function e(){}return e.setup=function(){var e=nr().hosts.api;Ho().defaults.baseURL=e,this.setUnregHeaders(),this.setAuthorizationHeader(),this.setRefererHeader(),this.setLocaleHeader(),this.setUserHeaders()},e.setCurrentUserSelector=function(e){this.currentUserSelector=e},e.http=function(e){return t=this,void 0,r=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){return t=nr().isWithCredentialsEnable,[2,Ho()(df(df({cancelToken:new(Ho().CancelToken)((function(t){return e.getAbort&&e.getAbort(t)}))},e),{withCredentials:t&&!pf(e.url)}))]}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}));var t,n,r},e.setUnregHeaders=function(){var e=nr().clientId;Ho().interceptors.request.use((function(t){var n;if(pf(t.url))return t;var r=df({},t.headers);return df(df({},t),{headers:df((n={},n["X-From-Id"]=e,n["X-App"]=Lr(),n),r)})}))},e.setAuthorizationHeader=function(){Ho().interceptors.request.use((function(e){var t,n,r=String(null===(n=e.url)||void 0===n?void 0:n.split("?")[0]).replace(/^\/v\d/,""),o=[jn.OAUTH_PHONE_TOKEN,jn.USER_PHONE_CHECK,jn.OAUTH_PHONE_AUTHORIZE,jn.STAT_CLIENT_INFO,jn.STAT_LOGS],a=/\/v1\/graphite\/\w+(\/{0,1})$/.test(r),i=o.includes(r)||a;if(pf(e.url))return e;var l=cf();if(null==l)return e;var s=df({},e.headers);return df(df({},e),{headers:df(df({},s),!i&&(t={},t.Authorization="Bearer ".concat(l.accessToken),t))})}))},e.setRefererHeader=function(){var e=nr().isRefHeaderEnable;Ho().interceptors.request.use((function(t){var n;return pf(t.url)||!e?t:df(df({},t),{headers:df(df({},t.headers),(n={},n["X-Referer"]=Di(),n))})}))},e.setLocaleHeader=function(){var e=nr(),t=e.isLocaleHeaderEnable,n=e.locale;Ho().interceptors.request.use((function(e){var r;return pf(e.url)||!t?e:df(df({},e),{headers:df(df({},e.headers),(r={},r["X-Locale"]=n,r))})}))},e.setUserHeaders=function(){var e=this;Ho().interceptors.request.use((function(t){var n,r,o,a;if(o=t.url,a=nr().hosts.api,mf(o)!==ff(a))return t;var i=null===(r=null===(n=e.currentUserSelector)||void 0===n?void 0:n.call(e))||void 0===r?void 0:r.defaultCurrency;return df(df({},t),{headers:df(df({},t.headers),i?{"X-Currency":i}:{})})}))},e.axios=Ho(),e}(),gf=n(16060),yf=function(e,t){return(0,gf.LX)(e,t)},_f=function(e,t,n){void 0===n&&(n=!0);var r=Array.isArray(t)?t:[t];return!(e!==ir.MAIN||!r.includes(ir.MAIN))||r.filter((function(e){return e!==ir.MAIN})).some((function(t){return Boolean(yf({path:t,end:n},e))}))},Ef=function(e,t){e.touched;var n=e.errors,r=e.submitCount,o=e.values;return!n[t]||!o[t]&&0===r},bf=n(39779),Sf=n(88574),Tf=n.n(Sf),If=Tf()({prefix:"+",suffix:"",includeThousandsSeparator:!1}),Nf=function(e){var t="",n="";if(e){var r=jr(e.currency);switch(e.currency){case mt.EUR:case mt.USD:t=r;break;case mt.RUB:n=r}e.suffix&&(n+=e.suffix)}return Tf()({prefix:t,suffix:n,allowDecimal:!0,thousandsSeparatorSymbol:" ",allowLeadingZeroes:e&&e.allowLeadingZeroes})},Cf=function(e){return Gt.createElement("span",{dangerouslySetInnerHTML:{__html:e.children}})},wf=function(e,t){var n=void 0===t?{}:t,r=n.onScrolled,o=n.block,a=void 0===o?"center":o,i=n.extraTopGap,l=void 0===i?0:i,s=n.isSmooth,c=void 0===s||s,u=function(e){if(!e)return{top:0,left:0,width:0,height:0};var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,o=window.pageYOffset||r.scrollTop||n.scrollTop,a=window.pageXOffset||r.scrollLeft||n.scrollLeft,i=r.clientTop||n.clientTop||0,l=r.clientLeft||n.clientLeft||0,s=t.top+o-i,c=t.left+a-l;return{top:Math.round(s),left:Math.round(c),width:t.width,height:t.height}}(e).top;if("top"===a){var d=zd();window.scrollTo({top:u-d-l,behavior:c?"smooth":"auto"})}else if("center"===a){var f=window.innerHeight,m=e.offsetHeight;window.scrollTo({top:u-(f-m)/2,behavior:c?"smooth":"auto"})}r&&function(e){var t,n=function(){clearTimeout(t),t=setTimeout((function(){window.removeEventListener("scroll",n),e()}),100)};window.addEventListener("scroll",n),n()}(r)},Of=function(e){return void 0===e&&(e="auto"),window.scrollTo({top:0,left:0,behavior:e})},Af=function(e){try{return window.sessionStorage.getItem(String(e))}catch(t){return t instanceof Error&&ho.error("Failed read key ".concat(String(e)," from sessionStorage: ").concat(t&&t.toString()?t.toString():String(t))),null}},Pf=function(e,t){try{window.sessionStorage.setItem(String(e),t)}catch(t){t instanceof Error&&ho.error("Failed write key ".concat(String(e)," to sessionStorage: ").concat(t&&t.toString()?t.toString():String(t)))}},Lf=function(e){try{window.sessionStorage.removeItem(String(e))}catch(t){t instanceof Error&&ho.error("Failed remove key ".concat(String(e)," from sessionStorage: ").concat(t&&t.toString()?t.toString():String(t)))}},Rf="3119464";!function(e){e.FOLLOW="follow",e.SUBSCRIBE="subscribe",e.REGISTRATION="mt_registration",e.LOGIN="mt_login"}(hf||(hf={}));var kf=function(e){var t=e.counterId,n=e.goalId,r=e.userId,o=nr().clientId;try{window._tmr||(window._tmr=[]),window._tmr.push({id:t,type:"reachGoal",goal:n,userid:r,params:{from_id:o}})}catch(e){}},Df=function(){function e(){}return e.init=function(){this.visibility=this.getVisibility(),window.addEventListener("focus",this.onWindowFocus),window.addEventListener("blur",this.onWindowBlur),document.addEventListener(this.visibility.changeEvent,this.onWindowVisibilityChange)},e.destroy=function(){this.handlers=[],window.removeEventListener("focus",this.onWindowFocus),window.removeEventListener("blur",this.onWindowBlur),document.removeEventListener(this.visibility.changeEvent,this.onWindowVisibilityChange)},e.isVisible=function(){return this.isVisibleState},e.getVisibility=function(){var e={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},t=Object.keys(e).find((function(e){return void 0!==window.document[e]}));return{changeEvent:e[t],state:t}},e.onWindowFocus=function(){e.isVisibleState=!0},e.onWindowBlur=function(){e.isVisibleState=!1},e.onWindowVisibilityChange=function(){e.isVisibleState=!window.document[e.visibility.state],e.handlers.forEach((function(e){return e()}))},e.onChange=function(e){"function"==typeof e&&this.handlers.push(e)},e.removeHandler=function(e){"function"==typeof e&&(this.handlers=this.handlers.filter((function(t){return t!==e})))},e.isVisibleState=!0,e.visibility=null,e.handlers=[],e}(),Uf=(n(48085),function(e,t){return(0,gf.fp)(e,t)}),Bf=n(73557),xf=Bf.TH,Mf=Bf.s0,Ff=function(){return(0,Bf.bx)()},Gf=function(){return(0,Bf.UO)()},Hf=null,Wf=function(e){return Hf=e},Vf=function(){return Hf},jf=function(e){return Af(e)},zf=function(e,t){return Pf(e,t)},Yf=function(){function e(){}return e.savePermission=function(){zf(i.CAN_VIEW_ADULT_CONTENT,"1")},e.canBeViewed=function(e){var t=jf(i.CAN_VIEW_ADULT_CONTENT);return e&&t?"1"===t:e?e.flags.canViewAdultContent:"1"===t},e.sync=function(t,n){t&&!t.flags.canViewAdultContent&&n({flag:i.CAN_VIEW_ADULT_CONTENT}),e.savePermission()},e}(),Kf=function(){return Kf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kf.apply(this,arguments)},qf=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Xf=function(e){return(0,Yt.setStringifiedToLocalStorage)(o.BLOG_POST_DRAFTS,e)},Qf=function(){return((0,Yt.getParsedFromLocalStorage)(o.BLOG_POST_DRAFTS)||[]).map((function(e){return Kf(Kf({},e),{key:Kf(Kf({},e.key),{blogUrl:void 0===e.key.blogUrl?null:e.key.blogUrl})})}))},Jf=function(e){var t=e.key,n=t.blogUrl,r=t.hash,o=t.id,a=t.userId;return Qf().filter((function(e){var t,i,l,s;return!((null===(t=null==e?void 0:e.key)||void 0===t?void 0:t.blogUrl)===n&&(null===(i=null==e?void 0:e.key)||void 0===i?void 0:i.id)===o&&(null===(l=null==e?void 0:e.key)||void 0===l?void 0:l.hash)===r&&(null===(s=null==e?void 0:e.key)||void 0===s?void 0:s.userId)===a)}))},Zf=Gt.createContext(null),$f=function(e){var t=e.data,n=e.filename,r=void 0===n?"boosty.csv":n,o=document.createElement("a");o.href=URL.createObjectURL(new Blob([t],{type:"text/csv"})),o.target="_blank",o.download=r,document.body.appendChild(o),o.click(),document.body.removeChild(o)},em=n(30949),tm=n.n(em);new RegExp("[".concat($t.INACTIVE,"]"),"g");var nm=function(){return nm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nm.apply(this,arguments)},rm=function(){function e(){}return e.getCookieLoginObject=function(){var e=bu(U.ONE_LINK_LOGIN);if(e)try{var t=JSON.parse(e);return"object"!=typeof t?{}:t}catch(e){e instanceof Error&&ho.error("Parse one link cookie was failed: ".concat(e&&e.toString?e.toString():String(e)))}return{}},e.isLoginTracked=function(e){var t=bu(U.ONE_LINK_LOGIN);if(t){var n=JSON.parse(t);return n&&n[e]}return!1},e.track=function(t,n){return r=this,void 0,a=function(){var r,o,a,i,l,s,c,u,d,f,m,p,h,v,g,y,_,E,b,S,T,I;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(N){switch(N.label){case 0:if(r=nr().oneLink,o=r.isEnabled,a=r.projectId,i=r.projectIdForBloggers,l=r.trackPeriodicity,c=(s=n).isAuthorized,u=x.BLOGGER,d=s.roles[u],f=!!bu(U.ONE_LINK_REGISTRATION_USER),m=!!bu(U.ONE_LINK_REGISTRATION_BLOGGER),p=f||m?qt.REGISTRATION:qt.LOGIN,!o||!c||e.isProcessing||p===qt.LOGIN&&e.isLoginTracked(t.id))return[2];e.isProcessing=!0,N.label=1;case 1:return N.trys.push([1,,3,4]),h=t.id,v=t.email,g=t.authSource,[4,Kc.oneLink.getSignature(p)];case 2:return y=N.sent().data,_=y.timestamp,E=y.projects,b=E.reduce((function(e,t){return e[t.projectId]=t.sig,e}),{}),S={action:p,userId:h,email:v,timestamp:_,authSource:g},m||(e.trackByScript(nm(nm({},S),{projectId:a,signature:b[a]})),p===qt.REGISTRATION&&(Tu(U.ONE_LINK_REGISTRATION_USER),kf({counterId:Rf,goalId:hf.REGISTRATION,userId:String(null==t?void 0:t.id)}))),d&&(e.trackByScript(nm(nm({},S),{projectId:i,signature:b[i]})),p===qt.REGISTRATION&&Tu(U.ONE_LINK_REGISTRATION_BLOGGER)),p===qt.LOGIN&&((T=e.getCookieLoginObject())[h]=!0,I=JSON.stringify(T),Su(U.ONE_LINK_LOGIN,I,{expires:l/24/60/60}),kf({counterId:Rf,goalId:hf.LOGIN,userId:String(null==t?void 0:t.id)})),[3,4];case 3:return e.isProcessing=!1,[7];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{l(a.next(e))}catch(e){t(e)}}function i(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,i)}l((a=a.apply(r,[])).next())}));var r,o,a},e.setBloggerRegistrationCookie=function(){Su(U.ONE_LINK_REGISTRATION_BLOGGER,"1",{expires:365})},e.trackByScript=function(e){var t=e.action,n=e.projectId,r=e.userId,o=e.email,a=e.timestamp,i=e.signature,l=e.authSource,s=nr().hosts.oneLinkApi,c=document.createElement("script"),u=document.getElementsByTagName("script")[0];c.type="text/javascript",c.async=!0,c.src=["".concat(s,"/v1/track/").concat(t,"/").concat(n,".js"),"?r=".concat(encodeURIComponent(document.referrer)),"&u=".concat(encodeURIComponent(r.toString())),"&eml=".concat(encodeURIComponent(o)),"&rnd=".concat(Math.random()),"&t=".concat(a),"&s=".concat(i),l.type?"&".concat(l.type,"_id=").concat(l.id):""].join(""),u.parentNode.insertBefore(c,u)},e.isProcessing=!1,e}();function om(e){var t;return!(null===(t=e.subscriptionLevel)||void 0===t?void 0:t.price)&&!e.price}function am(e){var t,n;return(null===(t=null==e?void 0:e.comments)||void 0===t?void 0:t.data)&&(null===(n=null==e?void 0:e.count)||void 0===n?void 0:n.comments)>0}var im,lm,sm=[ir.BLOG_SUBSCRIPTION_LEVELS_ADD,ir.BLOG_SUBSCRIPTION_LEVELS_EDIT,ir.BLOG_PURCHASE,ir.BLOG_PURCHASE_GIFT,ir.BLOG_SINGLE_PAYMENT,ir.BLOG_SINGLE_PAYMENT_DONATION,ir.BLOG_TARGET_ADD,ir.BLOG_TARGET_EDIT,ir.BLOG_TRIAL_ACTIVATION,ir.BLOG_PHOTO_LAYER],cm=function(e){var t=_f(e,"".concat(ir.SEARCH_BY_BLOGS,"/*"),!1),n=_f(e,"".concat(ir.SEARCH_BY_POSTS,"/*"),!1),r=Boolean(yf("".concat(ir.BLOG_POST,"/*"),e)),o=Boolean(yf("".concat(ir.BLOG_STREAM,"/*"),e)),a=Boolean(yf("".concat(ir.MESSAGES,"/*"),e)),i=Boolean(yf("".concat(ir.MEDIA,"/*"),e)),l=_f(e,ir.BLOG,!0),s=_f(e,sm,!1),c=l||s,u=_f(e,ir.MAIN,!0),d=_f(e,ir.FEED,!1);return{isPostPage:r,isStreamPage:o,isMessagesPage:a,isMediaPage:i,isBlogPage:c,isBlogPageStrict:l,isBlogSubPage:s,isMainPage:u,isFeedPage:u||d,isFeedSubPageWithPrefix:d,isSearchByBlogsPage:t,isSearchByPostsPage:n}},um=n(12045),dm=n(86969),fm=(0,um.Jy)("Agents"),mm=(0,dm._l)(fm),pm=mm("fetchAgents",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.agents.fetchAgents(r)];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),hm=mm("unassignAgent",(function(e){var t,n,r=e.blogUrl,o=e.userId;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.agents.unassignAgent(r,o)];case 1:return e.sent(),[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),vm=mm("assignAgent",(function(e){var t,n,r=e.userId,o=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.agents.assignAgent(o,{agent_id:r})];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),gm=(0,um.Jy)("BlackList"),ym=(0,dm._l)(gm),_m=ym("removeFromBlackList",(function(e){var t,n,r=e.blogUrl,o=e.userId;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blackList.removeFromBlackList(r,o)];case 1:return e.sent(),[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Em=ym("fetchBlackList",(function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blackList.fetchBlackList()];case 1:return[2,e.sent().data.data]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t})),bm=ym("putToBlackList",(function(e,t){var n,r,o=e.userId,a=e.blogUrl;return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blackList.putToBlackList(a,o)];case 1:return e.sent(),t(Em({blogUrl:a})),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),Sm=gm("resetBlackList"),Tm=(0,um.Jy)("Blog"),Im=(0,dm._l)(Tm),Nm=Im("fetchBlog",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.fetch(r)];case 1:return[2,{blog:e.sent().data}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Cm=function(){return function(e,t){return void 0,void 0,r=function(){var n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){return(n=t()).blog.blog.meta.networkStatus.isFetched?[2,e(Nm.action({blogUrl:n.blog.blog.data.blogUrl}))]:[2,null]}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r}},wm=(0,um.Jy)("Post"),Om=(0,dm._l)(wm),Am=Om("fetchBlogPosts",(function(e){var t,n,r=e.blogUrl,o=e.limit,a=e.offset,i=e.filter,l=e.repliesLimit,s=void 0===l?nr().comments.feedRepliesLimit:l,c=e.commentsLimit,u=void 0===c?nr().comments.feedLimit:c;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blog.fetchPosts(r,{limit:o,offset:a,comments_limit:u,reply_limit:s,is_only_allowed:null==i?void 0:i.isOnlyAllowedPosts,from_ts:null==i?void 0:i.postsFrom,to_ts:null==i?void 0:i.postsTo,level_id:null==i?void 0:i.subscriptionLevelId,tags_ids:null==i?void 0:i.postsTagsIds})];case 1:return[2,{isLast:(e=t.sent()).data.extra.isLast,offset:e.data.extra.offset,data:e.data.data}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Pm=function(){return Pm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pm.apply(this,arguments)},Lm=function(){return function(e,t){return void 0,void 0,r=function(){var n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){return(n=t()).posts.postsList.meta.networkStatus.isFetched?[2,e(Am.action({blogUrl:n.blog.blog.data.blogUrl,filter:Pm({},1===n.posts.postsList.data.posts.length&&{postsFrom:n.posts.postsList.data.posts[0].createdAt,postsTo:n.posts.postsList.data.posts[0].createdAt}),limit:n.posts.postsList.data.posts.length,offset:null}))]:[2,null]}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r}},Rm=(0,um.Jy)("Stream"),km=(0,dm._l)(Rm),Dm=km("addModerator",(function(e){var t,n,r=e.blogUrl,o=e.userId;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.addModerator(r,o)];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Um=Rm("addNewStreamChatMessages"),Bm=km("addStopWord",(function(e){var t,n,r=e.blogUrl,o=e.word;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.addStopWord(r,{word:o})];case 1:return e.sent(),[2,{}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),xm=Rm("addMentionedUser"),Mm=km("fetchUserBanStat",(function(e){var t,n,r=e.blogUrl,o=e.userId;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.fetchBanStat(r,o)];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Fm=km("blockUserPermanently",(function(e,t){var n,r,o=e.blogUrl,a=e.userId;return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.blockUser(o,{user_id:a,is_permanent:!0,by_stream:!1,clean_messages:!0})];case 1:return e.sent(),t(Mm.action({blogUrl:o,userId:a})),[2,{}]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),Gm=(im={},im[it["10_MINUTES"]]=600,im[it["1_HOUR"]]=3600,im),Hm=km("blockUserTemporarily",(function(e,t){var n,r,o=e.blogUrl,a=e.userId,i=e.period;return void 0,void 0,r=function(){var e,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return i===it.UNTIL_STREAM_END?n=!0:(n=!1,e=Gm[i]),[4,Kc.blogPostChat.blockUser(o,{user_id:a,period:e,by_stream:n,is_permanent:!1})];case 1:return r.sent(),t(Mm.action({blogUrl:o,userId:a})),[2,{}]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),Wm=Rm("changeStreamOnlineStatus"),Vm=Rm("cleanStreamChatMentions"),jm=Rm("removeStreamChatMessagesByUserIdFromWS"),zm=km("cleanStreamChatMessages",(function(e,t){var n,r,o=e.blogUrl,a=e.userId;return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.clean(o,a)];case 1:return e.sent(),t(jm({userId:a})),[2,{}]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),Ym=Rm("cleanStreamChatMessagesFromWS"),Km=Rm("cleanStreamChatUserSearchList"),qm=Rm("clearStream"),Xm=Rm("clearStreamChat"),Qm=km("complainStream",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.stream.complain(r)];case 1:return e.sent(),[2,{}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Jm=km("createStream",(function(e){var t,n,r=e.blogUrl,o=e.stream;return void 0,void 0,n=function(){var e,t,n,a,i,l,s,c;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(u){switch(u.label){case 0:return e=o.teaserData,t=o.description,n=o.publishTime,a=o.title,i=o.subscriptionLevelId,l=o.hasChat,s=o.daNick,c=o.categoryId,[4,Kc.stream.create(r,{teaser_data:JSON.stringify(e),description:JSON.stringify(t),publish_time:n,title:a,subscription_level_id:i,has_chat:l,da_nick:s,category_id:c})];case 1:return[2,u.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Zm=function(){return Zm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zm.apply(this,arguments)},$m=km("fetchModerators",(function(e){var t,n,r=e.blogUrl,o=e.limit,a=e.offset;return void 0,void 0,n=function(){var e,t,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(i){switch(i.label){case 0:return[4,Kc.blogPostChat.fetchModerators(r,{limit:o,offset:a})];case 1:return e=i.sent().data,t=e.data,n=e.extra,[2,Zm(Zm({},n),{data:t})]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),ep=function(){return ep=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ep.apply(this,arguments)},tp=km("fetchStopWords",(function(e){var t,n,r=e.blogUrl,o=e.limit,a=e.offset;return void 0,void 0,n=function(){var e,t,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(i){switch(i.label){case 0:return[4,Kc.blogPostChat.fetchStopWords(r,{limit:o,offset:a})];case 1:return e=i.sent().data,t=e.data,n=e.extra,[2,ep(ep({},n),{data:t})]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),np=km("fetchStream",(function(e){return void 0,void 0,n=function(){var t,n,r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return t=e.blogUrl,n=e.from,[4,Kc.stream.fetch(t,n)];case 1:return r=o.sent(),Object.keys(r.data).length?[2,r.data]:[2,null]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),rp=km("fetchStreamCredentials",(function(e){var t,n,r=e.blogUrl,o=e.refresh,a=void 0!==o&&o;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.stream.fetchCredentials(r,a)];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),op=function(){return op=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},op.apply(this,arguments)},ap=km("fetchStreamChat",(function(e,t){var n,r,o=e.blogUrl,a=e.limit;return void 0,void 0,r=function(){var e,n,r,i,l,s;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(c){switch(c.label){case 0:return[4,Kc.blogPostChat.fetch(o,a)];case 1:return e=c.sent().data,n=e.extra,r=n.banInfo,i=n.isBaned,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["banInfo","isBaned"]),s=e.data,t(Ym()),t(Vm()),[2,op(op({},l),{banRemainingTime:null==r?void 0:r.remainingTime,isBanned:i,isBannedByStreamEnd:Boolean(null==r?void 0:r.isByStream),data:s.reverse()})]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),ip=km("fetchStreamChatUsers",(function(e){var t,n,r=e.blogUrl,o=e.searchQuery;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.fetchChatUsers(r,o)];case 1:return[2,{data:e.sent().data.data,searchQuery:o}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),lp=Rm("streamChatUsersReset"),sp=km("fetchStreamChatUserStat",(function(e){var t,n,r=e.blogUrl,o=e.userId;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.fetchChatUserStat(r,o)];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),cp=Rm("streamChatUserStatReset"),up=km("fetchChatUserSearchList",(function(e,t,n){var r,o,a=e.blogUrl,i=e.searchQuery;return void 0,void 0,o=function(){var e,r,o,l,s,c,u,d,f;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(m){switch(m.label){case 0:return t(Km()),i?[3,2]:(e=n(),r=e.currentUser,o=r.user.data.id,[4,t(ip({blogUrl:a}))]);case 1:for(l=m.sent().data,s=l.owner,c=l.users,u=[s],d=c.length>4?4:c.length,f=0;f<d;f++)u.push(c[f]);return[2,{data:{users:u=u.filter((function(e){return e.id!==o}))}}];case 2:return[4,Kc.blogPostChat.fetchChatUserSearchList(a,{limit:4,search_query:i})];case 3:return[2,m.sent().data]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}))})),dp=km("likeStream",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.stream.like(r)];case 1:return e.sent(),[2,{}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),fp=Rm("markStreamEnded"),mp=(km("notifyStream",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.stream.notify(r)];case 1:return e.sent(),[2,{}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))}),pp=km("recordStream",(function(e){var t=e.blogUrl,n=e.willRecord;return mp(void 0,void 0,void 0,(function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.stream.record(t,n)];case 1:return e.sent(),[2,{on:n}]}}))}))})),hp=km("refetchStream",(function(e,t,n){return void 0,void 0,o=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){return(e=n()).stream.stream.meta.networkStatus.isFetched?[2,t(np.action({blogUrl:e.blog.blog.data.blogUrl}))]:[2,null]}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}));var r,o})),vp=km("removeModerator",(function(e){var t,n,r=e.blogUrl,o=e.userId;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.removeModerator(r,o)];case 1:return e.sent(),[2,{}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),gp=km("removeStopWord",(function(e){var t,n,r=e.blogUrl,o=e.word;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.removeStopWord(r,{word:o})];case 1:return e.sent(),[2,{}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),yp=Rm("resetStream"),_p=km("removeStream",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.stream.remove(r)];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Ep=km("removeStreamChatMessage",(function(e){var t,n,r=e.blogUrl,o=e.messageId;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.remove(r,o)];case 1:return e.sent(),[2,{}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),bp=Rm("removeStreamChatMessageFromWS"),Sp=Rm("removeStreamChatMessagesByUserIdLocally"),Tp=Rm("removeStreamChatMessagesByUserIdFromMentions"),Ip=Rm("removeMentionedUser"),Np=km("sendHeartbeat",(function(e){var t,n,r=e.blogUrl,o=e.stop,a=e.immortal,i=e.autoplay;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.stream.sendHeartbeat(r,{stop:o,immortal:a,autoplay:i})];case 1:return[2,{nextRequestInterval:e.sent().data.data.nextRequestInterval}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Cp=km("sendStreamChatMessage",(function(e){var t,n,r=e.blogUrl,o=e.data;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPostChat.create(r,{data:JSON.stringify(o)})];case 1:return e.sent(),[2,{}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),wp=Rm("setActiveIndexPopover"),Op=Rm("setStreamIsOnline"),Ap=Rm("setStreamViewers"),Pp=Rm("streamLikesCounterUpdate"),Lp=km("unblockUser",(function(e,t){var n,r,o=e.blogUrl,a=e.userId,i=e.byStream;return void 0,void 0,r=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,Kc.blogPostChat.unblockUser(o,{user_id:String(a),by_stream:String(i)})];case 1:return e=n.sent().data,t(Mm.action({blogUrl:o,userId:a})),[2,e]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),Rp=km("unlikeStream",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.stream.unlike(r)];case 1:return e.sent(),[2,{}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),kp=Rm("updateChatBanStatusFromWS"),Dp=km("updateStream",(function(e){var t,n,r=e.blogUrl,o=e.stream;return void 0,void 0,n=function(){var e,t,n,a,i,l;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(s){switch(s.label){case 0:return e=o.description,t=o.subscriptionLevelId,n=o.daNick,a=o.title,i=o.categoryId,l=o.publishTime,[4,Kc.stream.update(r,{description:JSON.stringify(e),subscription_level_id:t,da_nick:n,category_id:i,title:a,publish_time:l})];case 1:return[2,s.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Up=Rm("setStreamChatIsPaused"),Bp=(0,um.Jy)("SubscriptionsSettings"),xp=(0,dm._l)(Bp),Mp=xp("fetchSubscriptions",(function(e,t,n){var r,o,a=e.withFollow,i=e.shouldReset;return void 0,void 0,o=function(){var e,t,r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return e=n().subscriptions.subscriptions,t=e.data,r=e.meta.limit,[4,Kc.user.getSubscriptions({limit:r,offset:i?0:t.length},a)];case 1:return[2,{data:o.sent().data}]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}))})),Fp=Im("fetchBlogSubscriptionLevel",(function(e){var t,n,r=e.blogUrl,o=e.levelId,a=e.withContentCounters;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.subscriptionLevels.fetch(r,o,a)];case 1:return[2,{level:e.sent().data}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Gp=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Hp=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Wp=Im("fetchBlogSubscriptionLevelsByIds",(function(e){var t=e.blogUrl,n=e.levelIds,r=e.withContentCounters;return Gp(void 0,void 0,void 0,(function(){return Hp(this,(function(e){switch(e.label){case 0:return[4,Promise.all(n.map((function(e){return Gp(void 0,void 0,void 0,(function(){return Hp(this,(function(n){switch(n.label){case 0:return[4,Kc.subscriptionLevels.fetch(t,e,r)];case 1:return[2,n.sent().data]}}))}))})))];case 1:return[2,{levels:e.sent()}]}}))}))})),Vp=function(){return function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return cf()?[4,e(Mp.action({withFollow:!0,shouldReset:!0}))]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n}},jp=xp("fetchSubscriptionsSettingsData",(function(e,t,n){var r,o,a=e.pageNumber,i=e.withFollow;return void 0,void 0,o=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return e=n().subscriptions.subscriptionsSettings.meta.limit,cf()?[4,Kc.user.getSubscriptions({limit:e,offset:e*a},i)]:[3,2];case 1:return[2,{data:t.sent().data}];case 2:return[2,null]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}))})),zp=function(){return function(e,t){return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){return t().subscriptions.subscriptionsSettings.meta.networkStatus.isFetched?[2,e(jp.action({pageNumber:0,withFollow:!0}))]:[2,null]}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r}},Yp=Bp("clearSubscriptions"),Kp=Bp("clearBlogSubscriptionLevel"),qp=Im("fetchCurrentBlogSubscriptionLevels",(function(e){var t,n,r=e.blogUrl,o=e.showFree,a=e.showDeleted;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blog.fetchSubscriptionLevels(r,o,a)];case 1:return[2,{subscriptionLevels:(e=t.sent()).data.data,subscriptions:e.data.subscriptions,currentLevelId:e.data.currentId,nextLevelId:e.data.nextId}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Xp=function(){return function(e,t){return void 0,void 0,r=function(){var n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){return(n=t()).subscriptions.subscriptionLevels.meta.networkStatus.isFetched&&n.blog.blog.meta.networkStatus.isFetched?[2,e(qp.action({blogUrl:n.blog.blog.data.blogUrl}))]:[2,null]}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r}},Qp=Im("createBlogSubscriptionLevel",(function(e,t){var n,r,o=e.blogUrl,a=e.level,i=e.discordRoleId,l=e.tgGroupIds;return void 0,void 0,r=function(){var e,n,r,s,c;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(u){switch(u.label){case 0:return e=a.name,n=a.price,r=a.data,s=a.thankMessage,[4,Kc.subscriptionLevels.create(o,{name:e,price:n,data:JSON.stringify(r),thank_msg_data:JSON.stringify(null==s?void 0:s.data),thank_msg_teaser_data:JSON.stringify(null==s?void 0:s.teaser),is_thank_msg_enabled:(null==s?void 0:s.data.length)>0,thank_msg_price:null==s?void 0:s.price,discord_role_id:i||"",tg_group_ids:l||[]})];case 1:return c=u.sent(),t(Xp()),[2,{level:c.data}]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),Jp=Im("editBlogSubscriptionLevel",(function(e,t){var n,r,o=e.blogUrl,a=e.levelId,i=e.level,l=e.discordRoleId,s=e.tgGroupIds;return void 0,void 0,r=function(){var e,n,r,c,u,d;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(f){switch(f.label){case 0:return e=i.name,n=i.price,r=i.data,c=i.thankMessage,u=i.isThankMessageEnabled,[4,Kc.subscriptionLevels.update(o,a,{blog_url:o,name:e,price:n,data:JSON.stringify(r),thank_msg_data:JSON.stringify(null==c?void 0:c.data),thank_msg_teaser_data:JSON.stringify(null==c?void 0:c.teaser),is_thank_msg_enabled:u,thank_msg_price:null==c?void 0:c.price,discord_role_id:l||"",tg_group_ids:s||[]})];case 1:return d=f.sent(),t(Xp()),[2,{level:d.data}]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),Zp=Im("removeBlogSubscriptionLevel",(function(e){var t,n,r=e.blogUrl,o=e.levelId,a=e.postsMigrationLevelId;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.subscriptionLevels.remove(r,o,{posts_migration_level_id:a})];case 1:return[2,e.sent()]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),$p=Bp("resetBlogSubscriptionLevels"),eh=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},th=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},nh=(0,um.Jy)("Target"),rh=(0,dm._l)(nh),oh=rh("fetchTargets",(function(e){var t=e.blogUrl,n=e.type;return eh(void 0,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return[4,Kc.target.fetchTargets(t,{type:n})];case 1:return[2,{data:e.sent().data.data}]}}))}))})),ah=rh("fetchTargetById",(function(e){var t=e.id,n=e.currency;return eh(void 0,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return[4,Kc.target.fetchTargetById(t,n)];case 1:return[2,{target:e.sent().data}]}}))}))})),ih=rh("fetchAllTargets",(function(e){var t=e.blogUrl,n=e.type;return eh(void 0,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return[4,Kc.target.fetchTargets(t,{type:n,show_deleted:!0})];case 1:return[2,{data:e.sent().data.data}]}}))}))})),lh=rh("createMoneyTarget",(function(e){var t=e.blogUrl,n=e.description,r=e.targetSum;return eh(void 0,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return[4,Kc.target.createMoneyTarget({blog_url:t,description:n,target_sum:r})];case 1:return[2,{target:e.sent().data}]}}))}))})),sh=rh("createSubscribersTarget",(function(e){var t=e.blogUrl,n=e.description,r=e.targetSum;return eh(void 0,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return[4,Kc.target.createSubscribersTarget({blog_url:t,description:n,target_sum:r})];case 1:return[2,{target:e.sent().data}]}}))}))})),ch=rh("editTarget",(function(e){var t=e.description,n=e.targetSum,r=e.id;return eh(void 0,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return[4,Kc.target.edit(r,{target_sum:n,description:t,target_id:r})];case 1:return[2,{target:e.sent().data}]}}))}))})),uh=rh("removeTarget",(function(e){var t=e.id;return eh(void 0,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return[4,Kc.target.remove(t)];case 1:return[2,{target:e.sent().data}]}}))}))})),dh=function(e){var t=e.blogUrl,n=e.type;return function(e,r){return eh(void 0,void 0,void 0,(function(){return th(this,(function(o){return r().target.targets.meta.networkStatus.isFetched?[2,e(oh.action({blogUrl:t,type:n}))]:[2,null]}))}))}},fh=nh("incrementSubscribers"),mh=nh("decrementSubscribers"),ph=(0,um.Jy)("Target"),hh=((0,dm._l)(ph),ph("resetTargets")),vh=function(e){return function(t){return void 0,void 0,r=function(){var n,r,o,a;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(i){return r=(n=e||{}).isUnsubscribe,o=n.isInitialSubscription,r||(bd.log.gtm.paidSubscriptionSuccess(),o&&bd.log.gtm.initialSubscriptionSuccess()),a=[t(Cm()),t(Xp()),t(zp()),t(Lm()),t(hp())],r||a.push(t(fh())),[2,Promise.all(a)]}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r}},gh=(0,um.Jy)("Badge"),yh=(0,dm._l)(gh),_h=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Eh=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},bh=yh("fetchBadgesList",(function(e){var t=e.blogUrl;return _h(void 0,void 0,void 0,(function(){return Eh(this,(function(e){switch(e.label){case 0:return[4,Kc.badge.fetchList(t)];case 1:return[2,e.sent().data.data]}}))}))})),Sh=yh("createBadge",(function(e){var t=e.blogUrl,n=e.achievementName,r=e.params;return _h(void 0,void 0,void 0,(function(){var e,o,a,i;return Eh(this,(function(l){switch(l.label){case 0:return e=r.name,o=r.smallImageId,a=r.mediumImageId,i=r.largeImageId,[4,Kc.badge.create(t,{name:e,achievement_name:n,small_image_id:o,medium_image_id:a,large_image_id:i})];case 1:return[2,l.sent().data.data.badge]}}))}))})),Th=yh("updateBadge",(function(e){var t=e.blogUrl,n=e.badgeId,r=e.params;return _h(void 0,void 0,void 0,(function(){var e,o,a,i;return Eh(this,(function(l){switch(l.label){case 0:return e=r.name,o=r.smallImageId,a=r.mediumImageId,i=r.largeImageId,[4,Kc.badge.update(t,n,{name:e,small_image_id:o,medium_image_id:a,large_image_id:i})];case 1:return[2,l.sent().data.data.badge]}}))}))})),Ih=yh("uploadBadgeImage",(function(e){var t=e.blogUrl,n=e.smileSize,r=e.file;return _h(void 0,void 0,void 0,(function(){return Eh(this,(function(e){switch(e.label){case 0:return[4,Kc.badge.uploadBadgeImage(t,n,r)];case 1:return[2,e.sent().data.data.upload]}}))}))})),Nh=yh("removeBadge",(function(e){var t=e.blogUrl,n=e.badgeId;return _h(void 0,void 0,void 0,(function(){return Eh(this,(function(e){switch(e.label){case 0:return[4,Kc.badge.remove(t,n)];case 1:return e.sent(),[2,{}]}}))}))})),Ch=gh("clearBadges"),wh=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Oh=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ah=(0,um.Jy)("DialogueMessages"),Ph=(0,dm._l)(Ah),Lh=function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){switch(t.label){case 0:return[4,Kc.dialog.fetchList({with_subscriptions:e.withSubscriptions,with_subscribers:e.withSubscribers,level_ids:e.levelIds,chunk:e.chunk,offset:e.offset,sort_by:e.sortBy,sort_order:e.sortOrder,limit:100})];case 1:return[2,t.sent().data]}}))}))},Rh=Ph("fetchDialogList",(function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){return[2,Lh(e)]}))}))})),kh=Ph("fetchDialogListMore",(function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){return[2,Lh(e)]}))}))})),Dh=Ph("fetchDialogById",(function(e,t){return wh(void 0,void 0,void 0,(function(){var n;return Oh(this,(function(r){switch(r.label){case 0:return[4,Kc.dialog.fetchDialog(e.dialogId)];case 1:return(null==(n=r.sent().data)?void 0:n.messages)&&t(sv({messages:n.messages.data})),[2,n]}}))}))})),Uh=Ph("fetchDialogByIUserId",(function(e,t){return wh(void 0,void 0,void 0,(function(){var n;return Oh(this,(function(r){switch(r.label){case 0:return[4,Kc.dialog.fetchDialogueByUserId({user_id:e.userId})];case 1:return(null==(n=r.sent().data)?void 0:n.messages)&&t(sv({messages:n.messages.data})),[2,n]}}))}))})),Bh=Ph("fetchCurrentDialog",(function(e,t){return wh(void 0,void 0,void 0,(function(){var n;return Oh(this,(function(r){switch(r.label){case 0:return t(tv()),[4,Kc.dialog.fetchDialogueByUserId({user_id:e.userId})];case 1:return n=r.sent().data,t(ev({relation:n.relation})),[2,n]}}))}))})),xh=Ph("createDialog",(function(e){var t=e.userId;return wh(void 0,void 0,void 0,(function(){var e;return Oh(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Kc.dialog.create({user_id:t})];case 1:return[2,n.sent().data];case 2:throw e=n.sent(),new Ar(e);case 3:return[2]}}))}))})),Mh=Ph("sendMessage",(function(e,t){var n=e.userId,r=e.dialogId,o=e.data,a=e.teaserData,i=e.price;return wh(void 0,void 0,void 0,(function(){var e,l,s,c;return Oh(this,(function(u){switch(u.label){case 0:e=Date.now(),l={authorId:n,createdAt:Math.floor(Date.now()/1e3),data:o,teaser:a,dialogId:r,id:e,isSending:!0,price:i},t(cv({message:l})),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Kc.dialog.sendMessage(r,JSON.stringify(o),JSON.stringify(a),i)];case 2:return s=u.sent().data,t(Wh.action({dialogId:s.dialogId,messageId:s.id})),t(hv({dialogId:r,messageId:e})),t(cv({message:s})),t(av({message:s})),[2,s];case 3:throw c=u.sent(),t(vv({dialogId:r,messageId:e})),new Ar(c);case 4:return[2]}}))}))})),Fh=Ph("sendBroadcastMessage",(function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){switch(t.label){case 0:return[4,Kc.dialog.sendBroadcastMessage(e.blogUrl,{subscription_level_ids:e.subscriptionLevelIds,subscription_months_duration_from:e.subscriptionMonthsDurationFrom,subscription_months_duration_to:e.subscriptionMonthsDurationTo,money_spent_from:e.moneySpentFrom,money_spent_to:e.moneySpentTo,paid_subscription_canceled:e.paidSubscriptionCanceled,exclude_subscriber_ids:e.excludeSubscriberIds,fixed_subscriber_ids:e.fixedSubscriberIds,all_subscribers:e.isAllSubscribers,price:e.price,notify_users_by_email:e.isNotifyUsersByEmail,data:JSON.stringify(e.data),teaser_data:JSON.stringify(e.teaserData)})];case 1:return[2,t.sent().data]}}))}))})),Gh=Ph("fetchMessage",(function(e,t){var n=e.messageId;return wh(void 0,void 0,void 0,(function(){var e;return Oh(this,(function(r){switch(r.label){case 0:return[4,Kc.dialog.fetchMessage(n)];case 1:return e=r.sent().data,t(rv({message:e})),t(av({message:e})),[2,e]}}))}))})),Hh=Ph("deleteMessage",(function(e,t){var n=e.dialogId,r=e.messageIds,o=e.forAll;return wh(void 0,void 0,void 0,(function(){var e;return Oh(this,(function(a){switch(a.label){case 0:return[4,Kc.dialog.deleteMessage(n,{message_ids:r,for_all:o})];case 1:return e=a.sent().data,r.forEach((function(e){t(pv({dialogId:n,messageId:e}))})),[2,e]}}))}))})),Wh=Ph("markAsReadMessage",(function(e){e.dialogId;var t=e.messageId;return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(e){switch(e.label){case 0:return[4,Kc.dialog.markAsReadMessage(t)];case 1:return e.sent(),[2]}}))}))})),Vh=Ph("markAsReadAllMessages",(function(e){var t=e.messageId;return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(e){switch(e.label){case 0:return[4,Kc.dialog.markAsReadAll({message_id:t})];case 1:return e.sent(),[2]}}))}))})),jh=Ph("fetchDialogShort",(function(e,t){var n=e.dialogId;return wh(void 0,void 0,void 0,(function(){var e;return Oh(this,(function(r){switch(r.label){case 0:return[4,Kc.dialog.fetchDialogShort(n)];case 1:return e=r.sent().data,t(nv({dialogue:e})),[2,e]}}))}))})),zh=Ph("fetchMessagesPart",(function(e){var t=e.dialogId,n=e.limit,r=e.reverse,o=e.offset;return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(e){switch(e.label){case 0:return[4,Kc.dialog.fetchMessages(t,{limit:n,reverse:r,offset:o})];case 1:return[2,e.sent().data]}}))}))})),Yh=function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){switch(t.label){case 0:return[4,Kc.dialog.fetchContacts({with_subscriptions:e.withSubscriptions,with_subscribers:e.withSubscribers,level_ids:e.levelIds,chunk:e.chunk,offset:e.offset,sort_by:e.sortBy,sort_order:e.sortOrder,limit:100})];case 1:return[2,t.sent().data]}}))}))},Kh=Ph("fetchContacts",(function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){return[2,Yh(e)]}))}))})),qh=Ph("fetchContactsMore",(function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){return[2,Yh(e)]}))}))})),Xh=function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){switch(t.label){case 0:return[4,Kc.dialog.fetchMailingList(e.blogUrl,{subscription_months_duration_from:e.subscriptionMonthsDurationFrom,subscription_months_duration_to:e.subscriptionMonthsDurationTo,money_spent_from:e.moneySpentFrom,money_spent_to:e.moneySpentTo,paid_subscription_canceled:e.paidSubscriptionCanceled,subscription_level_ids:e.subscriptionLevelIds,sort_by:e.sortBy,sort_order:e.sortOrder,chunk:e.chunk,offset:e.offset,limit:100})];case 1:return[2,t.sent().data]}}))}))},Qh=Ph("fetchMailingList",(function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){return[2,Xh(e)]}))}))})),Jh=Ph("fetchMailingListMore",(function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){return[2,Xh(e)]}))}))})),Zh=Ph("fetchChatMateSubscriptionLevels",(function(e){var t=e.blogUrl,n=e.showFree,r=e.showDeleted;return wh(void 0,void 0,void 0,(function(){var e;return Oh(this,(function(o){switch(o.label){case 0:return[4,Kc.blog.fetchSubscriptionLevels(t,n,r)];case 1:return[2,{levels:(e=o.sent().data).data,subscriptions:e.subscriptions,currentLevelId:e.currentId,nextLevelId:e.nextId}]}}))}))})),$h=Ph("fetchCanWriteWithDonationFlag",(function(e){return wh(void 0,void 0,void 0,(function(){return Oh(this,(function(t){switch(t.label){case 0:return[4,Kc.dialog.getCanWriteWithDonationFlag(e.blogUrl)];case 1:return[2,t.sent().data]}}))}))})),ev=Ah("updateActiveDialogueRelation"),tv=Ah("clearActiveDialogueRelation"),nv=Ah("updateDialogueList"),rv=Ah("updateMessage"),ov=Ah("messageHasBeenPaid"),av=Ah("updateLastMessageDialogue"),iv=Ah("updateContactBlackListedFromWs"),lv=Ah("markAsReadMessageFromWs"),sv=Ah("addMessageListFromActiveDialogue"),cv=Ah("addNewMessageDialogue"),uv=Ah("saveDonationMessage"),dv=Ah("clearDonationMessage"),fv=Ah("dialogueListToggleIsNeedUpdate"),mv=Ah("dialogueBroadcastMessagesDone"),pv=Ah("removeMessageDialogue"),hv=Ah("removeMessageSendingStatus"),vv=Ah("setErrorStatusSendingMessage"),gv=Ah("chatmateSetIsTypingMessage"),yv=Ah("clearMessagesActiveDialog"),_v=Ah("clearMailingList"),Ev=Ah("clearContactList"),bv=Ah("clearDialogList"),Sv=Ah("changeMessagesCount"),Tv=(0,um.Jy)("Payment"),Iv=(0,dm._l)(Tv),Nv=Iv("fetchDefaultCurrency",(function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.payment.fetchDefaultCurrency()];case 1:return[2,e.sent().data]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t})),Cv=Om("fetchPost",(function(e){var t,n,r=e.blogUrl,o=e.postId,a=e.commentId,i=e.commentsLimit,l=void 0===i?nr().comments.fullPageLimit:i,s=e.repliesLimit,c=void 0===s?nr().comments.fullPageRepliesLimit:s;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return e=a?Math.floor(l/2):l,[4,Kc.blogPost.fetch(r,o,e,c,a)];case 1:return[2,{blogPost:t.sent().data}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),wv=(0,um.Jy)("Smile"),Ov=(0,dm._l)(wv),Av=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Pv=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Lv=Ov("fetchSmileUserSet",(function(){return Av(void 0,void 0,void 0,(function(){return Pv(this,(function(e){switch(e.label){case 0:return[4,Kc.smile.fetchUserSet()];case 1:return[2,e.sent().data.data.smiles]}}))}))})),Rv=Ov("createSmile",(function(e){var t=e.blogUrl,n=e.params;return Av(void 0,void 0,void 0,(function(){var e,r,o,a,i;return Pv(this,(function(l){switch(l.label){case 0:return e=n.baseName,r=n.levelId,o=n.smallImageId,a=n.mediumImageId,i=n.largeImageId,[4,Kc.smile.create(t,{base_name:e,level_id:r,small_image_id:o,medium_image_id:a,large_image_id:i})];case 1:return[2,l.sent().data.data.smile]}}))}))})),kv=Ov("updateSmile",(function(e){var t=e.blogUrl,n=e.smileId,r=e.params;return Av(void 0,void 0,void 0,(function(){var e,o,a,i,l;return Pv(this,(function(s){switch(s.label){case 0:return e=r.baseName,o=r.levelId,a=r.smallImageId,i=r.mediumImageId,l=r.largeImageId,[4,Kc.smile.update(t,n,{base_name:e,level_id:o,small_image_id:a,medium_image_id:i,large_image_id:l})];case 1:return[2,s.sent().data.data.smile]}}))}))})),Dv=(Ov("removeSmile",(function(e){var t=e.blogUrl,n=e.smileId;return Av(void 0,void 0,void 0,(function(){return Pv(this,(function(e){switch(e.label){case 0:return[4,Kc.smile.remove(t,n)];case 1:return e.sent(),[2,{}]}}))}))})),Ov("fetchSmileList",(function(e){var t=e.blogUrl;return Av(void 0,void 0,void 0,(function(){return Pv(this,(function(e){switch(e.label){case 0:return[4,Kc.smile.fetchList(t)];case 1:return[2,e.sent().data.data]}}))}))})),Ov("fetchSmileListByLevel",(function(e){var t=e.blogUrl,n=e.levelId;return Av(void 0,void 0,void 0,(function(){return Pv(this,(function(e){switch(e.label){case 0:return[4,Kc.smile.fetchListByLevel(t,n)];case 1:return[2,e.sent().data.data.smiles]}}))}))})),Ov("checkSmileName",(function(e){var t=e.blogUrl,n=e.baseName;return Av(void 0,void 0,void 0,(function(){return Pv(this,(function(e){switch(e.label){case 0:return[4,Kc.smile.checkSmileName(t,{base_name:n})];case 1:return[2,e.sent().data]}}))}))}))),Uv=Ov("uploadSmileImage",(function(e){var t=e.blogUrl,n=e.smileSize,r=e.file;return Av(void 0,void 0,void 0,(function(){return Pv(this,(function(e){switch(e.label){case 0:return[4,Kc.smile.uploadImage(t,n,r)];case 1:return[2,e.sent().data.data.upload]}}))}))})),Bv=(Ov("changeSmileOrder",(function(e){var t=e.blogUrl,n=e.levelId,r=e.params;return Av(void 0,void 0,void 0,(function(){return Pv(this,(function(e){switch(e.label){case 0:return[4,Kc.smile.changeOrder(t,n,{moved_smile_id:r.movedSmileId,smile_ids:r.smileIds})];case 1:return[2,e.sent().data]}}))}))})),wv("clearSmiles")),xv=Ov("fetchSmileData",(function(e){var t=e.smileId;return Av(void 0,void 0,void 0,(function(){return Pv(this,(function(e){switch(e.label){case 0:return[4,Kc.smile.fetchSmileData(t)];case 1:return[2,e.sent().data.data]}}))}))})),Mv=(0,um.Jy)("CurrentUser"),Fv=(0,dm._l)(Mv),Gv=function(){return Gv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gv.apply(this,arguments)},Hv=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Wv=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Vv=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},jv=Mv("setCurrentUserStore"),zv=Mv("resetCurrentUserStore"),Yv=Fv("setCurrentUser",(function(e,t,n){return Hv(void 0,void 0,void 0,(function(){var r,o,a,i,l,s,c,u,d;return Wv(this,(function(f){switch(f.label){case 0:return r=n(),o=r.currentUser,a=r.blog.blog,i=Boolean(yf(ir.BLOG_POST,window.location.pathname)),null==e||(null==e.user||null!=o.user.data&&o.user.data.id===e.user.id)&&(null!=e.user||null===o.user)?[3,2]:(bd.setCurrentUser(e.user),l=[t(Cm()),t(Xp()),t(zp()),t(hp()),t(Vp())],i?(s=yf(ir.BLOG_POST,window.location.pathname),c=s&&s.params.postId,l.push(t(function(e){return function(t,n){return void 0,void 0,o=function(){var r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){return(r=n()).posts.postsList.meta.networkStatus.isFetched?(o=e||r.posts.postsList.data.posts[0].id,[2,t(Cv.action({blogUrl:r.blog.blog.data.blogUrl,postId:o}))]):[2,null]}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}));var r,o}}(c)))):l.push(t(Lm())),(null===(u=null==a?void 0:a.data)||void 0===u?void 0:u.blogUrl)&&l.push(t(dh({blogUrl:null===(d=null==a?void 0:a.data)||void 0===d?void 0:d.blogUrl}))),null==e.user&&l.push(t(zv(null)),t(Yp()),t(Sm()),t(Bv()),t(Ch())),[4,Promise.allSettled(l)]);case 1:f.sent(),f.label=2;case 2:return t(jv(e)),[2]}}))}))})),Kv=Mv("setCurrentUserPhone"),qv=Mv("removePayBind"),Xv=Fv("fetchCurrentUser",(function(e,t){return Hv(void 0,void 0,void 0,(function(){var e;return Wv(this,(function(n){switch(n.label){case 0:return cf()?[4,Kc.user.fetchCurrent()]:[3,2];case 1:return e=n.sent(),[2,t(Yv.action({user:e.data}))];case 2:throw new Ar({message:"Empty auth token"})}}))}))})),Qv=Fv("fetchCurrentUserDialogSettings",(function(){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.fetchCurrent()];case 1:return[2,{dialogSettings:e.sent().data.dialogSettings}]}}))}))})),Jv=Fv("fetchCurrentUserPhone",(function(){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.fetchCurrentPhone()];case 1:return[2,{refPhone:e.sent().data.phone}]}}))}))})),Zv=function(){return function(e,t){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(n){return t().currentUser.user.meta.networkStatus.isFetched?[2,e(Xv.action())]:[2,null]}))}))}},$v=Fv("getPaymentBinds",(function(e){var t=e.withDeleted,n=e.currency;return Hv(void 0,void 0,void 0,(function(){var e;return Wv(this,(function(r){switch(r.label){case 0:return[4,Kc.user.getPaymentBinds(n,t)];case 1:return[2,{list:(e=r.sent().data).data,extra:e.extra}]}}))}))})),eg=Fv("requestToRemovePayBind",(function(e,t){var n=e.id;return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.payment.removePaymentBind(n)];case 1:if(!e.sent().data.status)throw new Ar({message:"Remove bind status false"});return t(qv({id:n})),[2]}}))}))})),tg=Fv("updateUserFlag",(function(e){var t=e.flag;return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.updateUserFlag(t)];case 1:return[2,e.sent().data]}}))}))})),ng=Fv("updateUserData",(function(e){return Hv(void 0,void 0,void 0,(function(){var t,n,r,o,a,i,l,s;return Wv(this,(function(c){switch(c.label){case 0:return t=e.notifyComment,n=e.notifyNews,r=e.notifySubscriber,o=e.socialEmailConfirmed,a=e.canViewAdultContent,i=e.sendMsgRule,l=e.sendMsgLevelId,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["notifyComment","notifyNews","notifySubscriber","socialEmailConfirmed","canViewAdultContent","sendMsgRule","sendMsgLevelId"]),[4,Kc.user.update(Gv(Gv({},s),{notify_comment:t,notify_news:n,notify_subscriber:r,social_email_confirmed:o,can_view_adult_content:a,send_msg_rule:i,send_msg_level_id:l}))];case 1:return[2,c.sent().data]}}))}))})),rg=Fv("updateCurrentUserPhone",(function(e){return Hv(void 0,void 0,void 0,(function(){var t,n,r;return Wv(this,(function(o){switch(o.label){case 0:return t=nr().changePhone.isNotifierFlowForced,n=e.oldPhone,r=e.phone,[4,Kc.user.updateCurrentUserPhone({old_phone:n,phone:r,token:null==e?void 0:e.token,captcha_version:null==e?void 0:e.captchaVersion,force:Boolean(null==e?void 0:e.force)||t})];case 1:return[2,o.sent().data]}}))}))})),og=Fv("approveCurrentUserPhone",(function(e,t){return Hv(void 0,void 0,void 0,(function(){var n,r,o,a,i,l,s;return Wv(this,(function(c){switch(c.label){case 0:return n=nr().changePhone.isNotifierFlowForced,r=e.isOld,o=e.smsCode,a=e.phone,i=e.code,l=e.force,[4,Kc.user.approveCurrentUserPhone({is_old:r,sms_code:o,phone:a,code:i,force:!!l||n})];case 1:return s=c.sent().data,t(Kv(s.phone)),[2,s]}}))}))})),ag=Fv("verifyOldPhone",(function(e){return Hv(void 0,void 0,void 0,(function(){var t;return Wv(this,(function(n){switch(n.label){case 0:return t=nr().changePhone.isNotifierFlowForced,[4,Kc.user.verifyOldPhone({token:null==e?void 0:e.token,captcha_version:null==e?void 0:e.captchaVersion,force:!!(null==e?void 0:e.force)||t})];case 1:return[2,n.sent().data]}}))}))})),ig=Fv("acceptPrivacyPolicy",(function(e){var t=e.acceptVersion;return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.acceptPrivacyPolicy({version:t})];case 1:return[2,e.sent().data]}}))}))})),lg=Fv("acceptRefPolicy",(function(e){var t=e.acceptVersion;return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.acceptRefPolicy({version:t})];case 1:return[2,e.sent().data]}}))}))})),sg=Fv("uploadUserAvatar",(function(e){var t=e.avatar;return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.uploadAvatar(t)];case 1:return[2,e.sent().data]}}))}))})),cg=Fv("editSettings",(function(e,t){return Hv(void 0,void 0,void 0,(function(){var n,r,o,a,i,l,s;return Wv(this,(function(c){switch(c.label){case 0:return n=e.name,r=e.email,o=e.photo,[4,Promise.all([t(ng.action({name:n,email:r})),o?t(sg.action({avatar:o})):null])];case 1:return a=Vv.apply(void 0,[c.sent(),2]),i=a[0],l=a[1],s=null!=l?l.url:i.avatarUrl,[2,Gv(Gv({},i),{avatarUrl:s,hasAvatar:null!=s})]}}))}))})),ug=Fv("sendEmailConfirmationLetter",(function(){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.sendEmailConfirmationLetter()];case 1:return e.sent(),[2]}}))}))})),dg=Fv("dismissEmail",(function(){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.update({email:""})];case 1:return[2,e.sent().data]}}))}))})),fg=Fv("finishTutorial",(function(){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.finishTutorial()];case 1:return e.sent(),[2]}}))}))})),mg=Mv("resetProblemSubscriptions"),pg=Fv("removeAuthLink",(function(e,t){var n=e.type;return Hv(void 0,void 0,void 0,(function(){var e;return Wv(this,(function(r){switch(r.label){case 0:return e=J[n.toUpperCase()],[4,Kc.user.removeAuthLink(e)];case 1:return r.sent(),t(Xv.action()),t(Xp()),[2]}}))}))})),hg=Fv("checkPhone",(function(e){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(t){switch(t.label){case 0:return[4,Kc.user.checkPhone(e)];case 1:return[2,t.sent().data]}}))}))})),vg=Fv("checkPhoneAdditionStatus",(function(){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.checkPhoneAdditionStatus()];case 1:return[2,e.sent().data]}}))}))})),gg=Fv("checkCurrentUserPhone",(function(e){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(t){switch(t.label){case 0:return[4,Kc.user.checkCurrentUserPhone(e)];case 1:return[2,t.sent().data]}}))}))})),yg=(Mv("setAccountDeletionTime"),Fv("deleteAccount",(function(e,t){return Hv(void 0,void 0,void 0,(function(){var e;return Wv(this,(function(n){switch(n.label){case 0:return[4,Kc.user.scheduleAccountDeletion()];case 1:return e=n.sent().data,t(Xv.action()),[2,e]}}))}))}))),_g=Fv("cancelAccountDeletion",(function(e,t){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){switch(e.label){case 0:return[4,Kc.user.cancelAccountDeletion()];case 1:return e.sent(),t(Xv.action()),[2]}}))}))})),Eg=Mv("updateUserBanStatus"),bg=Fv("fetchMarketingAlerts",(function(){return Hv(void 0,void 0,void 0,(function(){var e;return Wv(this,(function(t){switch(t.label){case 0:return e=Xa(),[4,Kc.user.fetchMarketingAlerts({lang:e})];case 1:return[2,t.sent().data]}}))}))})),Sg=Fv("dismissMarketingAlert",(function(e,t){var n=e.alertId;return Hv(void 0,void 0,void 0,(function(){var e;return Wv(this,(function(r){switch(r.label){case 0:return[4,Kc.user.dismissMarketingAlert(n)];case 1:return e=r.sent(),t(bg.action()),[2,e]}}))}))})),Tg=Fv("oauthServerAuthorize",(function(e){return Hv(void 0,void 0,void 0,(function(){var t,n,r;return Wv(this,(function(o){switch(o.label){case 0:return t=e.clientId,n=e.redirectUrl,r=e.responseType,[4,Kc.user.oauthServerAuthorize({client_id:t,redirect_uri:n,response_type:r})];case 1:return[2,o.sent().data]}}))}))})),Ig=Mv("selectCurrency"),Ng=Mv("clearSelectedCurrency"),Cg=Mv("changeDefaultCurrency",(function(e,t,n){var r=e.currency,o=n().currentUser.user,a=o.data,i=o.meta.networkStatus;r!==a.defaultCurrency&&i.isFetched&&t(wg())})),wg=function(){return function(e,t){return Hv(void 0,void 0,void 0,(function(){var n,r,o,a,i,l,s,c;return Wv(this,(function(u){return n=t(),r=n.dialogue.dialogueActive,o=n.blog.blog,a=[e(Xp()),e(hp()),e(Zv()),e(Lm())],(null===(i=null==o?void 0:o.data)||void 0===i?void 0:i.blogUrl)&&a.push(e(dh({blogUrl:null===(l=null==o?void 0:o.data)||void 0===l?void 0:l.blogUrl}))),(null===(s=null==r?void 0:r.data)||void 0===s?void 0:s.id)&&a.push(e(Dh({dialogId:null===(c=null==r?void 0:r.data)||void 0===c?void 0:c.id}))),[2,Promise.all(a)]}))}))}},Og=Mv("linkTelegram"),Ag=Fv("setLocale",(function(e){var t=e.locale;return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(e){return[2,Kc.user.setLocale({lang:Ka(t)})]}))}))})),Pg=Fv("updateUserDialogsSettings",(function(e){return Hv(void 0,void 0,void 0,(function(){return Wv(this,(function(t){switch(t.label){case 0:return[4,Kc.user.updateDialogSettings({send_msg_level_id:e.sendMsgLevelId,can_send_all:e.canSendAll,can_send_donation:e.canSendDonation,can_send_my_authors:e.canSendMyAuthors,can_send_paid_subscribers:e.canSendPaidSubscribers,can_send_subscribers:e.canSendSubscribers})];case 1:return t.sent(),[2]}}))}))})),Lg=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Rg=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},kg=Fv("fetchInfoMessages",(function(){return Lg(void 0,void 0,void 0,(function(){return Rg(this,(function(e){switch(e.label){case 0:return[4,Kc.user.fetchInfoMessages()];case 1:return[2,e.sent().data.data.infoMessages]}}))}))})),Dg=Fv("deleteInfoMessage",(function(e){var t=e.id;return Lg(void 0,void 0,void 0,(function(){return Rg(this,(function(e){switch(e.label){case 0:return[4,Kc.user.deleteInfoMessage(t)];case 1:return e.sent(),[2]}}))}))})),Ug=Fv("linkVKPlay",(function(e){var t,n,r=e.accessTokenVKPlay;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.user.linkVKPlay({access_token:r})];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Bg=Fv("loginWithExistsToken",(function(e){return void 0,void 0,n=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return t=e.accessToken,[4,Kc.user.loginWithExistsToken(t)];case 1:return[2,n.sent()]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),xg=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Mg=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Fg=Fv("fetchNotifications",(function(){return xg(void 0,void 0,void 0,(function(){var e,t,n;return Mg(this,(function(r){switch(r.label){case 0:return[4,Kc.notifications.fetchNotifications()];case 1:return e=r.sent().data.data,t=e.notificationStandalone.events.filter((function(e){var t=e.type;return ja(t)})),n=za(e.notificationStandalone.count.byEventType),[2,{list:t,updateTime:e.notificationStandalone.updateTime,count:n}]}}))}))})),Gg=Fv("markNotificationsAsRead",(function(e,t,n){return void 0===e&&(e={}),xg(void 0,void 0,void 0,(function(){var t,r,o,a;return Mg(this,(function(i){switch(i.label){case 0:return(t=e.notificationIds||(null===(a=n().currentUser.notifications.data)||void 0===a?void 0:a.list.filter((function(e){return!e.isRead})).map((function(e){return e.id})))).length?[4,Kc.notifications.markAsRead(t)]:[3,2];case 1:return r=i.sent().data.data,o=Ya(r.notificationStandalone.count.byEventType),[2,{notificationIds:t,newUnreadCount:o}];case 2:return[2,{notificationIds:t,newUnreadCount:n().currentUser.notifications.data.count.unread}]}}))}))})),Hg=Fv("removeNotification",(function(e){return xg(void 0,void 0,void 0,(function(){return Mg(this,(function(t){switch(t.label){case 0:return[4,Kc.notifications.remove(e.id)];case 1:return t.sent(),[2]}}))}))})),Wg=Fv("removeAllNotifications",(function(e,t,n){return void 0===e&&(e={}),xg(void 0,void 0,void 0,(function(){var e,t,r,o,a;return Mg(this,(function(i){switch(i.label){case 0:return e=null===(a=n().currentUser.notifications.data)||void 0===a?void 0:a.list.map((function(e){return e.id})),[4,Kc.notifications.removeAll(e)];case 1:return t=i.sent().data.data,r=t.notificationStandalone.events.filter((function(e){var t=e.type;return ja(t)})),o=za(t.notificationStandalone.count.byEventType),[2,{list:r,updateTime:t.notificationStandalone.updateTime,count:o}]}}))}))})),Vg=Mv("changeUnreadNotificationsCount"),jg=(lm={},lm[ge.SUBSCRIBER]="new_subscriber",lm[ge.MESSAGE]="new_message",lm[ge.COMMENT]="new_comment",lm[ge.REPLY]="new_reply",lm[ge.NEWS]="other_news",lm[ge.STREAM]="new_stream",lm),zg=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Yg=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Kg=Fv("notifySettingsOld",(function(e){var t=e.notificationType,n=e.transport;return zg(void 0,void 0,void 0,(function(){return Yg(this,(function(e){switch(e.label){case 0:return[4,Kc.user.notifySettingsOld(jg[t],n)];case 1:return[2,e.sent()]}}))}))})),qg=Fv("fetchNotificationSettings",(function(e){var t=e.transports;return zg(void 0,void 0,void 0,(function(){return Yg(this,(function(e){switch(e.label){case 0:return[4,Kc.notificationSettings.fetchNotificationSettings(t)];case 1:return[2,{settings:e.sent().data.settings}]}}))}))})),Xg=Fv("updateNotificationSettings",(function(e){var t=e.notificationType,n=e.transport,r=e.value;return zg(void 0,void 0,void 0,(function(){return Yg(this,(function(e){switch(e.label){case 0:return[4,Kc.notificationSettings.updateNotificationSettings({transport:n,notificationType:t,value:r})];case 1:return[2,e.sent()]}}))}))})),Qg=Fv("toggleUserFlag",(function(e,t){var n,r,o=e.blogUrl,a=e.value,i=e.flag;return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,pc.blog.updateFlag(o,{flag:i,value:a})];case 1:return e.sent(),[2,{value:a,flag:i}]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),Jg=function(){return Jg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jg.apply(this,arguments)},Zg=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},$g=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},ey=Im("editBlogCover",(function(e){var t=e.blogUrl,n=e.file;return Zg(void 0,void 0,void 0,(function(){return $g(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.coverUpload(t,n)];case 1:return[2,{url:e.sent().data.url}]}}))}))})),ty=(Im("becomeStreamer",(function(e,t){var n=e.blogUrl,r=e.hasAdultContent;return Zg(void 0,void 0,void 0,(function(){return $g(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.update(n,Jg({is_streamer:!0},r?{has_adult_content:!0}:{}))];case 1:return e.sent(),t(Zv()),[2,{}]}}))}))})),Im("editBlog",(function(e,t){var n=e.blogUrl,r=e.blog;return Zg(void 0,void 0,void 0,(function(){var e,t,o;return $g(this,(function(a){switch(a.label){case 0:return e=r.title,t=r.description,o=r.hasAdultContent,[4,Kc.blog.update(n,Jg({title:e||"",data:JSON.stringify((i=t,i.map((function(e){return e.type===pe.IMAGE?da(e,"url"):e}))))},null!=o&&{has_adult_content:Boolean(o)}))];case 1:return[2,{blog:a.sent().data}]}var i}))}))}))),ny=Im("createBlog",(function(e,t){var n=e.email,r=e.blogUrl,o=e.hasAdultContent,a=e.isStreamer;return Zg(void 0,void 0,void 0,(function(){var e;return $g(this,(function(i){switch(i.label){case 0:return[4,Kc.blog.create(Jg({email:n,blog_url:r,has_adult_content:o},a?{is_streamer:!0}:{}))];case 1:return e=i.sent(),t(Zv()),[2,{blogUrl:e.data.blogUrl}]}}))}))})),ry=Tm("resetBlogStore"),oy=Im("fetchBlogPostTags",(function(e){var t=e.blogUrl;return Zg(void 0,void 0,void 0,(function(){return $g(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.fetchPostsTags(t)];case 1:return[2,{data:e.sent().data.data}]}}))}))})),ay=function(){return function(e,t){return Zg(void 0,void 0,void 0,(function(){var n;return $g(this,(function(r){return(n=t()).posts.currentBlogPostsTags.meta.networkStatus.isFetched?[2,e(oy.action({blogUrl:n.blog.blog.data.blogUrl}))]:[2,null]}))}))}},iy=Im("unsubscribeBlog",(function(e,t){var n=e.blogUrl,r=e.isKeepFollow;return Zg(void 0,void 0,void 0,(function(){return $g(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.unsubscribe(n,{keep_follow:r})];case 1:return e.sent(),t(Zv()),t(Vp()),t(vh({isUnsubscribe:!0})),t(hp()),[2,{blogUrl:n}]}}))}))})),ly=Im("followBlog",(function(e,t){var n=e.blogUrl;return Zg(void 0,void 0,void 0,(function(){return $g(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.follow(n)];case 1:return e.sent(),t(Vp()),t(hp()),[2]}}))}))})),sy=Im("unfollowBlog",(function(e,t){var n=e.blogUrl;return Zg(void 0,void 0,void 0,(function(){return $g(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.unsubscribe(n)];case 1:return e.sent(),t(Vp()),t(hp()),[2,{blogUrl:n}]}}))}))})),cy=Im("complainBlog",(function(e){var t=e.blogUrl;return Zg(void 0,void 0,void 0,(function(){return $g(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.complain(t)];case 1:return e.sent(),[2,{}]}}))}))})),uy=Im("updateSocialLinks",(function(e,t){var n=e.blogUrl,r=e.socialLinks;return Zg(void 0,void 0,void 0,(function(){var e;return $g(this,(function(o){switch(o.label){case 0:return e=r.reduce((function(e,t){var n;return Jg(Jg({},e),((n={})[t.type]=t.url,n))}),{}),[4,Kc.blog.updateSocialLinks(n,Jg({},e))];case 1:return o.sent(),[2,t(Cm())]}}))}))})),dy=Im("fetchBlogOwner",(function(e){var t=e.blogUrl;return Zg(void 0,void 0,void 0,(function(){return $g(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.fetch(t)];case 1:return[2,e.sent().data.owner]}}))}))})),fy=Im("searchUser",(function(e){var t=e.blogUrl,n=e.chunk,r=e.limit;return Zg(void 0,void 0,void 0,(function(){return $g(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.searchUser(t,n,r)];case 1:return[2,e.sent().data.data]}}))}))})),my=Tm("changeSubscribersCount"),py=Tm("setIsCurrentUserTouchedFeedFilter"),hy=Im("fetchPostDonations",(function(e){return Zg(void 0,void 0,void 0,(function(){var t;return $g(this,(function(n){switch(n.label){case 0:return[4,Kc.blog.fetchPostDonations(e.blogUrl,{limit:e.limit,offset:null===(t=e.offset)||void 0===t?void 0:t.toString(),target_id:e.postId,type:"post"})];case 1:return[2,n.sent().data]}}))}))})),vy=Tm("changeBlacklistedStatus"),gy=Tm("increasePostDonationsSum"),yy=Im("fetchBlogRef",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.fetchRef(r)];case 1:return[2,{bloggerId:e.sent().data.blogger_id}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),_y=Im("fetchRssLink",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,pc.blog.fetchRssLink(r)];case 1:return[2,e.sent().data.rss]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Ey=Im("toggleRss",(function(e,t,n){var r,o,a=e.blogUrl,i=e.value;return void 0,void 0,o=function(){var e,t,r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return void 0!==i?e=i:(t=null===(r=n().blog.blog.data.flags)||void 0===r?void 0:r.isRssFeedEnabled,e=!t),[4,pc.blog.updateFlag(a,{flag:_t.IS_RSS_FEED_ENABLED,value:e})];case 1:return o.sent(),[2,{isRssFeedEnabled:e}]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}))})),by=Tm("resetBlog"),Sy=Im("fetchBlogItem",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.fetch(r)];case 1:return[2,{blog:e.sent().data}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Ty=Im("updateHasAdultContent",(function(e){var t,n,r=e.blogUrl,o=e.hasAdultContent;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.updateFlag(r,{flag:_t.HAS_ADULT_CONTENT,value:o})];case 1:return e.sent(),[2,{hasAdultContent:o}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Iy=(0,um.Jy)("BlogStat"),Ny=(0,dm._l)(Iy),Cy=Iy("clearBlogEvens"),wy=Iy("clearBlogMetrics"),Oy=Iy("clearBlogRefsUsers"),Ay=function(){return Ay=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ay.apply(this,arguments)},Py=function(e,t,n,r,o,a,i){return void 0,void 0,s=function(){var l,s,c;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(u){switch(u.label){case 0:return[4,Kc.blogStat.fetchBlogEvents(e,{event_types:r,from:t,to:n,user_ids:o,limit:a,offset:i})];case 1:return l=u.sent().data,s=l.data,c=l.extra,[2,{data:s.reduce((function(e,t){return t.eventType===gt.PAYOUT||t.eventType===gt.PAYOUT_ERROR&&t.payoutSystem?e.push(Ay(Ay({},t),{payoutSystem:t.payoutSystem.toLowerCase()})):e.push(t),e}),[]),extra:c}]}}))},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{o(s.next(e))}catch(e){t(e)}}function r(e){try{o(s.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof l?o:new l((function(e){e(o)}))).then(n,r)}o((s=s.apply(undefined,[])).next())}));var l,s},Ly=function(){return Ly=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ly.apply(this,arguments)},Ry=function(e,t,n){return void 0,void 0,o=function(){var r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return[4,Kc.blogStat.fetchBlogCharts(e,{last_time:t,limit:n})];case 1:return r=o.sent().data,[2,Ly({},r)]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}));var r,o},ky=Iy("updateBlogChartsForPeriod"),Dy=(Ny("fetchBlogChartsForPeriod",(function(e,t){var n,r,o=e.blogUrl,a=e.lastTime,i=e.limit;return void 0,void 0,r=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,Ry(o,a,i)];case 1:return e=n.sent(),t(ky(e)),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))}),Uy=Ny("fetchBlogEvents",(function(e){var t=e.blogUrl,n=e.limit,r=e.types,o=e.offset,a=e.userIds,i=e.from,l=e.to;return Dy(void 0,void 0,void 0,(function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Py(t,i,l,r,a,n,o)];case 1:return[2,e.sent()]}}))}))})),By=Ny("fetchBlogHolds",(function(e){var t,n,r=e.blogUrl,o=e.offset,a=e.limit;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogStat.fetchBlogHoldsStats(r,o,a)];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),xy=function(){return xy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xy.apply(this,arguments)},My=Ny("fetchBlogMetrics",(function(e){var t,n,r=e.blogUrl,o=e.from,a=e.to;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blogStat.fetchBlogMetrics(r,{from:o,to:a})];case 1:return e=t.sent().data,[2,xy({},e)]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Fy=function(){return Fy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fy.apply(this,arguments)},Gy=Ny("fetchBlogRefs",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blogStat.fetchBlogRefs(r)];case 1:return e=t.sent(),[2,Fy({},e.data)]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Hy=function(){return Hy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hy.apply(this,arguments)},Wy=Ny("fetchBlogRefsUsers",(function(e){var t,n,r=e.blogUrl,o=e.offset,a=e.limit,i=e.onlyBloggers;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blogStat.fetchBlogRefsUsers(r,{offset:o,limit:a,only_bloggers:i})];case 1:return e=t.sent(),[2,Hy({},e.data)]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Vy=function(){return Vy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vy.apply(this,arguments)},jy=Ny("fetchBlogSearchUsers",(function(e){return void 0,void 0,n=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,Kc.blogStat.fetchBlogSearchUsers(e.blogUrl,{chunk:e.chunk,limit:e.limit})];case 1:return t=n.sent().data,[2,Vy({},t)]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),zy=function(){return zy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zy.apply(this,arguments)},Yy=Ny("fetchBlogStatCharts",(function(e){return void 0,void 0,n=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,Kc.blogStat.fetchBlogCharts(e.blogUrl,{last_time:e.lastTime,limit:e.limit})];case 1:return t=n.sent().data,[2,zy({},t)]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),Ky=Ny("fetchStatCsv",(function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blogStat.fetchCsv(e)];case 1:return[2,{data:t.sent().data}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),qy=Ny("fetchReport",(function(e){var t,n,r=e.blogUrl,o=e.dataType,a=e.separator,i=e.from,l=e.to;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogStat.fetchReport(r,o,{separator:a,from:i,to:l})];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Xy=Ny("fetchReportInfo",(function(e){var t,n,r=e.blogUrl,o=e.dataType,a=e.internal;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return a?[4,Kc.internal.fetchBlogStatReportInfo(r,o)]:[3,2];case 1:return e=t.sent(),[3,4];case 2:return[4,Kc.blogStat.fetchReportInfo(r,o)];case 3:e=t.sent(),t.label=4;case 4:return[2,e.data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Qy=Iy("changeReportInfo"),Jy=Iy("updateBlogMetricsForPeriod"),Zy=Im("fetchDonations",(function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blogStat.fetchDonations(e.blogUrl,{limit:e.limit,offset:e.offset.toString(),sort_by:e.sortType,order:e.orderBy,target_id:e.targetId,type:e.type})];case 1:return[2,t.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),$y=Im("fetchPostSales",(function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blogStat.fetchPostSales(e.blogUrl,{limit:e.limit,offset:e.offset.toString(),sort_by:e.sortType,order:e.orderBy,post_ids:e.postIds})];case 1:return[2,t.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),e_=Im("fetchPostSalesByDate",(function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blogStat.fetchPostSalesByDate(e.blogUrl,{from:e.from,to:e.to})];case 1:return[2,t.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),t_=Im("fetchSubscribers",(function(e){return void 0,void 0,n=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,Kc.blogStat.fetchSubscribers(e.blogUrl,{level_id:e.levelId,sort_by:e.sortBy,limit:e.limit,offset:e.offset,is_active:null===(t=e.isActive)||void 0===t?void 0:t.toString(),user_ids:e.userIds,level_ids:e.levelIds,from:e.from,order:e.orderBy})];case 1:return[2,n.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),n_=Im("fetchPostSalesDaysByMonth",(function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blogStat.fetchPostSalesDaysByMonth(e.blogUrl,{date:e.date})];case 1:return[2,t.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),r_=Tm("clearDonations"),o_=Tm("clearPostSales"),a_=Tm("clearSubscribers"),i_=function(){return i_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i_.apply(this,arguments)},l_=Ny("fetchBlogBroadcastMessageStat",(function(e){var t,n,r=e.blogUrl,o=e.offset,a=e.limit;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blogStat.fetchBlogBroadcastMessageStats(r,o,a)];case 1:return e=t.sent().data,[2,i_({},e)]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),s_=function(){return s_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s_.apply(this,arguments)},c_=Ny("fetchBlogBaseStat",(function(e){var t,n,r=e.blogUrl;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.blogStat.fetchBlogBaseStat(r)];case 1:return e=t.sent().data,[2,s_({},e)]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),u_=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},d_=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},f_=wm("updateNewPostId"),m_=wm("updateBlogPostIsPublishedState"),p_=wm("resetRemovedComments"),h_=Om("createBlogPost",(function(e,t){var n=e.blogUrl,r=e.blogPost,o=e.pollId;return u_(void 0,void 0,void 0,(function(){var e,a,i,l,s,c,u,d,f,m,p;return d_(this,(function(h){switch(h.label){case 0:return e=r.title,a=r.data,i=r.subscriptionLevel,l=r.price,s=r.teaser,c=r.tags,u=r.isCommentsDenied,d=r.isWaitingVideo,f=r.publishTime,m=r.hasChat,[4,Kc.blogPost.create(n,{title:e,data:JSON.stringify(a),subscription_level_id:i&&i.id,price:l,teaser_data:JSON.stringify(s),tags:c.map((function(e){return e.title})),deny_comments:u,wait_video:d,publish_time:f,has_chat:m,poll_id:o})];case 1:return(p=h.sent()).data.isPublished&&t(f_({postId:p.data.id})),t(ay()),[2,{blogPost:p.data}]}}))}))})),v_=Om("updateBlogPost",(function(e,t){var n=e.blogUrl,r=e.postId,o=e.blogPost,a=e.pollId;return u_(void 0,void 0,void 0,(function(){var e,i,l,s,c,u,d,f,m,p;return d_(this,(function(h){switch(h.label){case 0:return e=o.title,i=o.data,l=o.subscriptionLevel,s=o.price,c=o.teaser,u=o.tags,d=o.isCommentsDenied,f=o.isWaitingVideo,m=o.publishTime,[4,Kc.blogPost.update(n,r,{title:e,data:JSON.stringify(i),subscription_level_id:l&&l.id,price:s,teaser_data:JSON.stringify(c),tags:u.map((function(e){return e.title})),deny_comments:d,publish_time:m,wait_video:f,poll_id:a})];case 1:return p=h.sent(),t(ay()),[2,{blogPost:p.data}]}}))}))})),g_=Om("removeBlogPost",(function(e,t){var n=e.blogUrl,r=e.postId;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.remove(n,r)];case 1:return e.sent(),[2,{}]}}))}))})),y_=wm("removeRedundantCommentsForPost"),__=Om("reactionBlogPost",(function(e){var t=e.blogUrl,n=e.postId,r=e.reaction;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.reaction(t,n,r)];case 1:return e.sent(),[2,{}]}}))}))})),E_=Om("removeReactionBlogPost",(function(e){var t=e.blogUrl,n=e.postId;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.removeReaction(t,n)];case 1:return e.sent(),[2,{}]}}))}))})),b_=Om("complainBlogPost",(function(e){var t=e.blogUrl,n=e.postId;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.complain(t,n)];case 1:return e.sent(),[2,{}]}}))}))})),S_=Om("complainComment",(function(e){var t=e.blogUrl,n=e.postId,r=e.commentId;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.complainComment(t,n,r)];case 1:return e.sent(),[2]}}))}))})),T_=Om("sendComment",(function(e){var t=e.blogUrl,n=e.postId,r=e.commentData,o=e.replyComment;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.createComment(t,n,JSON.stringify(r),null==o?void 0:o.intId)];case 1:return[2,e.sent().data]}}))}))})),I_=Om("editComment",(function(e){var t=e.blogUrl,n=e.postId,r=e.commentData,o=e.originalComment;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.updateComment(t,n,o.id,{data:JSON.stringify(r)})];case 1:return[2,e.sent().data]}}))}))})),N_=Om("removeComment",(function(e){var t=e.blogUrl,n=e.postId,r=e.commentId;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.removeComment(t,n,r)];case 1:return[2,e.sent()]}}))}))})),C_=Om("reactionComment",(function(e){var t=e.blogUrl,n=e.postId,r=e.commentId,o=e.reaction;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.reactionComment(t,n,r,o)];case 1:return[2,e.sent()]}}))}))})),w_=Om("removeReactionComment",(function(e){var t=e.blogUrl,n=e.postId,r=e.commentId;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.removeReactionComment(t,n,r)];case 1:return[2,e.sent()]}}))}))})),O_=wm("removeCommentFromStore"),A_=Om("restoreComment",(function(e){var t=e.blogUrl,n=e.postId,r=e.commentId;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.restoreComment(t,n,r)];case 1:return[2,e.sent().data]}}))}))})),P_=Om("fetchDeferredAccessLevels",(function(e){var t=e.blogUrl,n=e.postId;return u_(void 0,void 0,void 0,(function(){return d_(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.fetchDeferredAccessLevels(t,n)];case 1:return[2,e.sent().data.data.deferredAccess]}}))}))})),L_=Om("updateDeferredAccessLevels",(function(e,t){var n=e.blogUrl,r=e.postId,o=e.denyComments,a=e.price,i=e.subscriptionLevelId,l=e.applyTime;return u_(void 0,void 0,void 0,(function(){var e;return d_(this,(function(s){switch(s.label){case 0:return[4,Kc.blogPost.updateDeferredAccessLevels(n,r,{deny_comments:o,price:a,subscription_level_id:i,apply_time:l})];case 1:return e=s.sent(),t(P_({blogUrl:n,postId:r})),[2,e.data]}}))}))})),R_=Om("removeDeferredAccessLevels",(function(e,t){var n=e.blogUrl,r=e.postId;return u_(void 0,void 0,void 0,(function(){var e;return d_(this,(function(o){switch(o.label){case 0:return[4,Kc.blogPost.removeDeferredAccessLevels(n,r)];case 1:return e=o.sent(),t(P_({blogUrl:n,postId:r})),[2,e.data]}}))}))})),k_=Om("setBlogPostDrafts",(function(e){return{postDrafts:e.postDrafts}})),D_=Om("saveBlogPostDraft",(function(e){return{blogPostDraft:e.blogPostDraft}})),U_=Om("removeBlogPostDraft",(function(e){return{blogPostDraft:e.blogPostDraft}})),B_=Om("selectBlogPostDraft",(function(e){return{blogPostDraft:e.blogPostDraft}})),x_=wm("resetLastFetchFeedPostsParams"),M_=wm("cancelComment"),F_=(wm("retrySendComment"),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))}),G_=Om("fetchCurrentPost",(function(e){var t=e.blogUrl,n=e.postId,r=e.commentId,o=e.commentsLimit,a=void 0===o?nr().comments.fullPageLimit:o,i=e.repliesLimit,l=void 0===i?nr().comments.fullPageRepliesLimit:i;return F_(void 0,void 0,void 0,(function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.fetch(t,n,a,l,r)];case 1:return[2,{blogPost:e.sent().data}]}}))}))})),H_=Om("refetchPostData",(function(e){var t,n,r=e.blogUrl,o=e.postId;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blogPost.fetch(r,o,0,0)];case 1:return[2,{blogPost:e.sent().data}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),W_=function(){return W_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},W_.apply(this,arguments)},V_=function(e,t){return"later"===t?e.data[e.data.length-1].intId.toString():e.data[0].intId.toString()},j_=Om("fetchComments",(function(e,t,n){var r,o,a=e.blogUrl,i=e.postId,l=e.rootComments,s=e.threadComments,c=e.replace;return void 0,void 0,o=function(){var e,t,r,o,u,d,f,m,p,h,v,g;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(y){switch(y.label){case 0:return e=n().posts.postsList.data.posts,t=e.find((function(e){return e.id===i})),t||ho.error("Can't find post with id ".concat(i," in store")),r={},l&&((null===(f=t.comments)||void 0===f?void 0:f.data.length)>0&&!c?r.offset=V_(t.comments,l.nextCommentsDirection):(u=(null===(p=null===(m=n().posts.postsList.meta.publishingCommentsList)||void 0===m?void 0:m.post[i])||void 0===p?void 0:p.filter((function(e){return wa(e)})))||[]).length>0&&!c&&(r.offset=u[0].publishedComment.intId.toString()),r.limit=l.limit,r.reply_limit=l.repliesLimit,r.order="later"===l.nextCommentsDirection?"bottom":"top"),s&&(o=null===(h=t.comments)||void 0===h?void 0:h.data.find((function(e){return e.intId===s.parentId})),(null==o?void 0:o.replies.data.length)>0?r.offset=V_(o.replies,s.nextCommentsDirection):(u=(null===(g=null===(v=n().posts.postsList.meta.publishingCommentsList)||void 0===v?void 0:v.thread[o.intId])||void 0===g?void 0:g.filter((function(e){return wa(e)})))||[]).length>0&&!c&&(r.offset=u[0].publishedComment.intId.toString()),r.limit=s.limit,r.parent_id=s.parentId,r.order="later"===s.nextCommentsDirection?"bottom":"top"),[4,Kc.blogPost.fetchComments(a,i,r)];case 1:return d=y.sent(),[2,W_(W_({},d.data),{postId:i})]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}))})),z_=wm("clearComments"),Y_=wm("setLastActivePostId"),K_=wm("setCommentViewMeta"),q_=function(){return q_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},q_.apply(this,arguments)},X_=Om("fetchFeedPosts",(function(e){var t,n,r=e.limit,o=e.offset,a=e.filter,i=e.commentsLimit,l=void 0===i?nr().comments.feedLimit:i;return void 0,void 0,n=function(){var e,t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return a.searchQuery?[4,Kc.search.searchPostsInFeed({limit:r,offset:o,filter:a,query:a.searchQuery})]:[3,2];case 1:return[2,{isLast:(e=n.sent()).data.extra.isLast,offset:e.data.extra.offset,data:e.data.data.searchPosts.map((function(e){return q_(q_({},e.post),{searchMetaData:{headline:e.headline,rank:e.rank}})})),blogsData:e.data.data.blogs?(0,ii.keyBy)(e.data.data.blogs,"blogUrl"):{}}];case 2:return[4,Kc.feed.fetchFeedPosts({limit:r,offset:o,comments_limit:l,from_ts:null==a?void 0:a.postsFrom,to_ts:null==a?void 0:a.postsTo,tags_ids:null==a?void 0:a.postTags.map((function(e){return e.id})),only_allowed:a.isOnlyAllowedPosts,is_only_free:a.isOnlyFreePosts,only_bought:a.isOnlyPaidPosts})];case 3:return[2,{isLast:(t=n.sent()).data.extra.isLast,offset:t.data.extra.offset,data:t.data.data.posts,counters:t.data.data.counters,blogsData:t.data.data.blogs?(0,ii.keyBy)(t.data.data.blogs,"blogUrl"):{}}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Q_=Om("fetchMainFeedTags",(function(e,t,n){var r,o,a=e.limit,i=e.offset,l=e.searchQuery,s=e.resetOffset;return void 0,void 0,o=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.search.searchFeedTags({limit:a,offset:s?null:i||n().posts.mainFeedPostTags.data.extra.offset,searchQuery:l})];case 1:return[2,{isLast:(e=t.sent()).data.extra.isLast,offset:e.data.extra.offset,data:e.data.data.searchTags.map((function(e){return e.tag}))}]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}))})),J_=wm("resetBlogPostTags"),Z_=(wm("resetMainFeedTags"),wm("resetFeed")),$_=(Om("searchFeedPosts",(function(e){var t,n,r=e.limit,o=e.offset,a=e.filter,i=e.query;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.search.searchPostsInFeed({limit:r,offset:o,filter:a,query:i})];case 1:return[2,{isLast:(e=t.sent()).data.extra.isLast,offset:e.data.extra.offset,data:e.data.data.searchPosts}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),wm("clearUnreadPaidPostsCount")),eE=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},tE=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},nE=(0,um.Jy)("Internal"),rE=(0,dm._l)(nE),oE=rE("fetchInternalDonation",(function(e){var t=e.donationId;return eE(void 0,void 0,void 0,(function(){return tE(this,(function(e){switch(e.label){case 0:return[4,Kc.internal.fetchDonation(t)];case 1:return[2,e.sent().data]}}))}))})),aE=rE("fetchInternalGift",(function(e){var t=e.giftKey;return eE(void 0,void 0,void 0,(function(){return tE(this,(function(e){switch(e.label){case 0:return[4,Kc.internal.fetchGift(t)];case 1:return[2,e.sent().data]}}))}))})),iE=rE("fetchInternalUsers",(function(e){var t=e.userIds;return eE(void 0,void 0,void 0,(function(){return tE(this,(function(e){switch(e.label){case 0:return[4,Kc.internal.fetchUsers(t)];case 1:return[2,e.sent().data]}}))}))})),lE=rE("fetchInternalComments",(function(e){var t=e.commentId;return eE(void 0,void 0,void 0,(function(){return tE(this,(function(e){switch(e.label){case 0:return[4,Kc.internal.fetchComments(t)];case 1:return[2,e.sent().data]}}))}))})),sE=rE("fetchInternalMessage",(function(e){var t=e.messageId;return eE(void 0,void 0,void 0,(function(){return tE(this,(function(e){switch(e.label){case 0:return[4,Kc.internal.fetchMessage(t)];case 1:return[2,e.sent().data]}}))}))})),cE=(rE("internalSendLetter",(function(e){return eE(void 0,void 0,void 0,(function(){var t,n,r,o;return tE(this,(function(a){switch(a.label){case 0:return t=e.renderUrl,n=e.mailerId,r=e.store,o=e.email,[4,Kc.internal.sendLetter({render_url:t,mailer_id:n,store:r,email:o})];case 1:return[2,a.sent().data]}}))}))})),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))}),uE=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},dE=(0,um.Jy)("ExternalApps"),fE=(0,dm._l)(dE),mE=fE("fetchTelegramUrl",(function(){return cE(void 0,void 0,void 0,(function(){return uE(this,(function(e){switch(e.label){case 0:return[4,Kc.externalApps.fetchTelegramUrl()];case 1:return[2,{url:e.sent().data.url}]}}))}))})),pE=fE("disconnectDiscordServer",(function(e,t){return cE(void 0,void 0,void 0,(function(){return uE(this,(function(e){switch(e.label){case 0:return[4,Kc.externalApps.disconnectDiscordServer()];case 1:return e.sent(),t(Zv()),t(Xp()),[2]}}))}))})),hE=fE("fetchDiscordRoles",(function(){return cE(void 0,void 0,void 0,(function(){return uE(this,(function(e){switch(e.label){case 0:return[4,Kc.externalApps.fetchDiscordRoles()];case 1:return[2,{list:e.sent().data.data}]}}))}))})),vE=fE("fetchTelegramGroups",(function(e){return cE(void 0,void 0,void 0,(function(){return uE(this,(function(t){switch(t.label){case 0:return[4,Kc.externalApps.fetchTelegramGroups(e.blogUrl)];case 1:return[2,{list:t.sent().data.data.groups}]}}))}))})),gE=(0,um.Jy)("Feed"),yE=(0,dm._l)(gE),_E=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},EE=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},bE=yE("fetchFeedStreams",(function(e){var t=e.limit,n=e.offset;return _E(void 0,void 0,void 0,(function(){var e;return EE(this,(function(r){switch(r.label){case 0:return[4,Kc.feed.fetchFeedVideoStreams({limit:t,offset:n})];case 1:return[2,{isLast:(e=r.sent()).data.extra.isLast,offset:e.data.extra.offset,data:e.data.data.streams,blogsData:e.data.data.blogs?(0,ii.keyBy)(e.data.data.blogs,"blogUrl"):{}}]}}))}))})),SE=yE("updateFeedLastVisitTime",(function(){return _E(void 0,void 0,void 0,(function(){return EE(this,(function(e){switch(e.label){case 0:return[4,Kc.feed.updateFeedSessionTime()];case 1:return e.sent(),[2]}}))}))})),TE=gE("resetFeedStreams"),IE=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},NE=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},CE=(0,um.Jy)("Gift"),wE=(0,dm._l)(CE),OE=wE("fetchCurrentGift",(function(e){var t=e.giftKey;return IE(void 0,void 0,void 0,(function(){return NE(this,(function(e){switch(e.label){case 0:return[4,Kc.gift.fetch(t)];case 1:return[2,e.sent().data]}}))}))})),AE=wE("fetchGifts",(function(e){return IE(void 0,void 0,void 0,(function(){return NE(this,(function(e){switch(e.label){case 0:return[4,Kc.gift.fetchGifts()];case 1:return[2,{data:e.sent().data.data}]}}))}))})),PE=wE("acceptGift",(function(e,t){var n=e.giftKey,r=e.renewDisabled;return IE(void 0,void 0,void 0,(function(){var e;return NE(this,(function(o){switch(o.label){case 0:e=!1,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Kc.gift.accept(n,r)];case 2:return o.sent(),t(vh()),e=!0,[3,4];case 3:throw o.sent(),new Ar({message:"accept gift failed"});case 4:return[2,{succeeded:e}]}}))}))})),LE=wE("sendGift",(function(e){var t=e.giftKey,n=e.email;return IE(void 0,void 0,void 0,(function(){var e;return NE(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Kc.gift.send(t,n)];case 1:return r.sent(),[3,3];case 2:throw e=r.sent(),new Ar(e);case 3:return[2]}}))}))})),RE=wE("changeAnonymityGift",(function(e){var t=e.giftKey,n=e.isAnonymous;return IE(void 0,void 0,void 0,(function(){return NE(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Kc.gift.changeAnonymity(t,n)];case 1:return[2,e.sent().data];case 2:throw e.sent(),new Ar({message:"change anonymity gift failed"});case 3:return[2]}}))}))})),kE=CE("clearCurrentGift"),DE=CE("clearAcceptGiftSucceeded"),UE=(0,um.Jy)("MediaPlayingState"),BE=UE("setMediaPlaying"),xE=UE("resetMediaPlaying"),ME=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},FE=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},GE=(0,um.Jy)("MediaData"),HE=(0,dm._l)(GE),WE=HE("uploadImage",(function(e){var t=e.image;return ME(void 0,void 0,void 0,(function(){var e,n;return FE(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=t.data,[4,Kc.mediaData.uploadImage(e)];case 1:return[2,{image:r.sent().data}];case 2:throw n=r.sent(),new Ar(n);case 3:return[2]}}))}))})),VE=GE("updateUploads"),jE=HE("createUploadFileContainer",(function(){return ME(void 0,void 0,void 0,(function(){return FE(this,(function(e){switch(e.label){case 0:return[4,Kc.mediaData.createUploadFileContainer()];case 1:return[2,{container:e.sent().data}]}}))}))})),zE=HE("createUploadAudioContainer",(function(){return ME(void 0,void 0,void 0,(function(){return FE(this,(function(e){switch(e.label){case 0:return[4,Kc.mediaData.createUploadAudioContainer()];case 1:return[2,{container:e.sent().data}]}}))}))})),YE=HE("createUploadVideoContainer",(function(e){var t=e.fileName;return ME(void 0,void 0,void 0,(function(){var e,n,r,o;return FE(this,(function(a){switch(a.label){case 0:return[4,Kc.mediaData.createUploadVideoContainer({file_name:t})];case 1:return e=a.sent().data,n=e.id,r=e.uploadUrl,o=e.videoId,[2,{container:{id:n,url:r,videoId:o}}]}}))}))})),KE=HE("uploadVideoFinish",(function(e){var t=e.id;return ME(void 0,void 0,void 0,(function(){return FE(this,(function(e){switch(e.label){case 0:return[4,Kc.mediaData.videoUploadFinish(t)];case 1:return[2,e.sent().data]}}))}))})),qE=function(){return qE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qE.apply(this,arguments)},XE=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},QE=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},JE=Iv("fetchDmrPageUrl",(function(e){var t=e.blogUrl,n=e.type,r=e.typeDonation,o=e.levelId,a=e.bindId,i=e.payMethod,l=e.price,s=e.id,c=e.period,u=e.applePayToken,d=e.phone,f=e.merchantData,m=e.message,p=e.currency,h=e.promoId;return XE(void 0,void 0,void 0,(function(){var e,v;return QE(this,(function(g){switch(g.label){case 0:switch(v=nr().isMobile,n){case Ce.POST:return[3,1];case Ce.DONATION:return[3,3];case Ce.SUBSCRIPTION:return[3,5];case Ce.MESSAGE:return[3,7];case Ce.GIFT:return[3,9]}return[3,11];case 1:return[4,Kc.payment.getSinglePaymentPostDmrPageUrl(t,String(s),{bind_id:a,pay_method:i,token:u,is_mobile:v,phone:d,currency:p})];case 2:case 4:case 6:case 8:case 10:return e=g.sent(),[3,11];case 3:return[4,Kc.payment.getSinglePaymentDonationDmrPageUrl(t,r,qE(qE({bind_id:a,amount:l,pay_method:i},r===V.TARGET||r===V.POST?{target_id:Number(s)}:{}),{message:JSON.stringify(m),token:u,is_mobile:v,phone:d,merchant_data:f,currency:p}))];case 5:return[4,Kc.payment.getDmrPageUrl(o,{bind_id:a,is_mobile:v,pay_method:i,token:u,period:c,phone:d,currency:p,promo_id:h})];case 7:return[4,Kc.payment.getSinglePaymentMessageDmrPageUrl(Number(s),{bind_id:a,pay_method:i,token:u,is_mobile:v,phone:d,merchant_data:f,currency:p})];case 9:return[4,Kc.payment.getSinglePaymentGiftSubscriptionDmrPageUrl(o,{bind_id:a,pay_method:i,token:u,is_mobile:v,phone:d,merchant_data:f,currency:p})];case 11:if("error"===e.data.status)throw new Ar({message:"Failed fetch DMR url"});return[2,{url:e.data.url,paymentId:e.data.paymentId,status:e.data.status}]}}))}))})),ZE=Iv("runCheckPaymentId",(function(e,t,n){var r=e.blogUrl,o=e.type,a=e.typeDonation,i=e.payMethod,l=e.paymentId;return XE(void 0,void 0,void 0,(function(){var e,s,c,u,d,f,m,p,h,v,g,y,_,E,b,S,T;return QE(this,(function(I){switch(I.label){case 0:if(e=0,s=!1,c=null,!l)throw new Ar({message:"payment id check failed"});u=nr().payment,d=u[i||"default"]||{},f=d.retries,m=void 0===f?10:f,p=d.timeout,h=void 0===p?1500:p,I.label=1;case 1:if(s||!(e<m))return[3,8];e+=1,I.label=2;case 2:return I.trys.push([2,4,,5]),[4,Kc.payment.checkPaymentId(l)];case 3:return(v=I.sent()).data.status&&(s=!0,c=v.data.itemId),[3,5];case 4:return I.sent(),[3,5];case 5:return s?[3,7]:[4,(0,Yt.delay)(h)];case 6:I.sent(),I.label=7;case 7:return[3,1];case 8:if(!s)throw bd.log.graphite.payments.checkFailed(),new Ar({message:"payment id check failed"});switch(g=n().currentUser,y=g.selectedCurrency,_=g.user,E=_.data,b=_.meta.networkStatus,y&&E.defaultCurrency!==y&&b.isFetched&&t(wg()),o){case Ce.SUBSCRIPTION:S=n().blog.blog.data.subscriptionKind,T=S!==lt.PAID,t(vh({isInitialSubscription:T}));break;case Ce.POST:"feed"!==n().posts.postsList.meta.lastPostsListFetchContext&&t(Lm());break;case Ce.DONATION:a===V.TARGET&&t(dh({blogUrl:r})),a===V.DIALOG&&t(fv({isNeedUpdate:!0}));break;case Ce.GIFT:t(OE({giftKey:c}));break;case Ce.MESSAGE:t(Gh({messageId:c}))}return[2,{successful:s,itemId:c}]}}))}))})),$E=Iv("downgradeSubscription",(function(e,t){var n=e.blogUrl,r=e.levelId,o=e.period,a=e.promoId;return XE(void 0,void 0,void 0,(function(){var e;return QE(this,(function(i){switch(i.label){case 0:return[4,Kc.blog.downgradeSubscription(n,r,{period:o,promo_id:a})];case 1:if(!(e=i.sent()).data.status)throw new Ar({message:"Failure - status: false in response"});return t(vh()),[2,e.data]}}))}))})),eb=Iv("revertUnsubscribe",(function(e,t){var n=e.blogUrl;return XE(void 0,void 0,void 0,(function(){var e;return QE(this,(function(r){switch(r.label){case 0:return[4,Kc.blog.revertUnsubscribe(n)];case 1:if(!(e=r.sent()).data.status)throw new Ar({message:"Failure - status: false in response"});return t(vh()),[2,e.data]}}))}))})),tb=Iv("payWithExistingBind",(function(e){var t=e.blogUrl,n=e.targetId,r=e.levelId,o=e.bindId,a=e.price,i=e.period,l=e.currency,s=e.message,c=e.type,u=void 0===c?Ce.SUBSCRIPTION:c,d=e.typeDonation,f=e.promoId;return XE(void 0,void 0,void 0,(function(){var e,c,m,p;return QE(this,(function(h){switch(h.label){case 0:switch(u){case Ce.GIFT:return[3,1];case Ce.MESSAGE:return[3,3];case Ce.DONATION:return[3,5];case Ce.POST:return[3,7]}return[3,9];case 1:return[4,Kc.payment.payGiftSubscriptionWithExistingBind(r,{bind_id:o,currency:l})];case 2:case 4:case 6:case 8:case 10:return e=h.sent(),[3,11];case 3:return[4,Kc.payment.payMessageWithExistingBind(n,{bind_id:o,currency:l})];case 5:return[4,Kc.payment.payDonationWithExistingBind(t,d,qE(qE({bind_id:o},d===V.TARGET||d===V.POST?{target_id:n}:{}),{amount:a,message:JSON.stringify(s),currency:l}))];case 7:return[4,Kc.payment.payPostWithExistingBind(t,n,{bind_id:o,currency:l})];case 9:return[4,Kc.payment.payWithExistingBind(r,{bind_id:o,period:i,currency:l,promo_id:f})];case 11:if(c={status:e.data.status,paymentId:e.data.paymentId,reason:null===(m=e.data)||void 0===m?void 0:m.reason},!e.data.status){if((null===(p=e.data)||void 0===p?void 0:p.reason)===Ne.NEED_3DS)return[2,c];throw new Ar({message:"response status: false"})}return[2,c]}}))}))})),nb=Tv("abandonSubscriptionPurchase"),rb=Iv("validateApplePaySession",(function(e){var t=e.validationUrl;return XE(void 0,void 0,void 0,(function(){return QE(this,(function(e){switch(e.label){case 0:return[4,Kc.payment.validateApplePaySession(t)];case 1:return[2,{data:e.sent().data}]}}))}))})),ob=Iv("fetchPaymentInfo",(function(e){var t=e.blogUrl,n=e.levelId,r=e.period,o=void 0===r?1:r,a=e.currency,i=e.promoId;return XE(void 0,void 0,void 0,(function(){var e;return QE(this,(function(r){switch(r.label){case 0:return e=nr().currencies.default,[4,Kc.payment.fetchPaymentInfo(t,n,{period:o,currency:a||e,promo_id:i})];case 1:return[2,r.sent().data]}}))}))})),ab=(Iv("fetchTransactionStatus",(function(e){var t=e.paymentId;return XE(void 0,void 0,void 0,(function(){var e,n,r;return QE(this,(function(o){switch(o.label){case 0:return[4,Kc.payment.fetchTransactionStatus(t)];case 1:return e=o.sent().data,n=e.status,r=e.url,[2,{status:n,url:r}]}}))}))})),Iv("runCheckTransactionStatus",(function(e,t){var n=e.payMethod,r=e.paymentId;return XE(void 0,void 0,void 0,(function(){var e,t,o,a,i,l,s,c;return QE(this,(function(u){switch(u.label){case 0:e=nr().payment,t=e[n||"default"]||{},o=t.retries,a=void 0===o?10:o,i=t.timeout,l=void 0===i?1500:i,s=null,c=0,u.label=1;case 1:if(!(c<a))return[3,9];c+=1,u.label=2;case 2:return u.trys.push([2,7,,8]),[4,Kc.payment.fetchTransactionStatus(r)];case 3:return(s=u.sent()).data.status===be.WAIT?[3,4]:[2,{status:s.data.status,url:s.data.url}];case 4:return[4,(0,Yt.delay)(l)];case 5:u.sent(),u.label=6;case 6:return[3,8];case 7:return u.sent(),[3,8];case 8:return[3,1];case 9:throw new Ar({message:"transaction status check failed"})}}))}))}))),ib=Iv("sendQiwiSmsCode",(function(e){var t=e.paymentId,n=e.code;return XE(void 0,void 0,void 0,(function(){return QE(this,(function(e){switch(e.label){case 0:return[4,Kc.payment.sendQiwiSmsCode(t,n)];case 1:return[2,e.sent().data]}}))}))})),lb=(0,um.Jy)("Search"),sb=(0,dm._l)(lb),cb=sb("searchBlog",(function(e){var t,n,r=e.query,o=e.limit,a=e.offset,i=e.forRaid;return void 0,void 0,n=function(){var e,t,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(l){switch(l.label){case 0:return[4,Kc.search.searchBlog({limit:o,offset:a,query:r,forRaid:i})];case 1:return e=l.sent().data,t=e.data.searchBlogs,n=e.extra,[2,{data:t,offset:n.offset,isLast:n.isLast}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),ub=sb("searchBlogSuggest",(function(e){var t,n,r=e.query,o=e.limit,a=e.offset;return void 0,void 0,n=function(){var e,t,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(i){switch(i.label){case 0:return[4,Kc.search.searchBlogSuggest({limit:o,offset:a,query:r})];case 1:return e=i.sent().data,t=e.data.searchBlogs,n=e.extra,[2,{data:t,offset:n.offset,isLast:n.isLast}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),db=function(){return db=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},db.apply(this,arguments)},fb=sb("searchPostInBlog",(function(e){var t,n,r=e.blogUrl,o=e.query,a=e.filter,i=e.limit,l=e.offset;return void 0,void 0,n=function(){var e,t,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(s){switch(s.label){case 0:return[4,Kc.search.searchPostInBlog({blogUrl:r,query:o,limit:i,offset:l,filter:a})];case 1:return e=s.sent().data,t=e.data.searchPosts,n=e.extra,[2,{data:t.map((function(e){return db(db({},e),{post:db(db({},e.post),{searchMetaData:{headline:e.headline,rank:e.rank}})})})),offset:n.offset,isLast:n.isLast}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),mb=lb("clearSearchPostInBlog"),pb=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},hb=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},vb=(0,um.Jy)("SinglePayment"),gb=(0,dm._l)(vb),yb=gb("fetchSinglePaymentDmrPageUrl",(function(e){var t=e.blogUrl,n=e.type,r=e.typeDonation,o=e.bindId,a=e.price,i=e.payMethod,l=e.id,s=e.applePayToken,c=e.isMobile,u=e.merchantData,d=e.phone,f=e.levelId,m=e.currency;return pb(void 0,void 0,void 0,(function(){var e;return hb(this,(function(p){switch(p.label){case 0:switch(n){case Ce.POST:return[3,1];case Ce.DONATION:return[3,3];case Ce.GIFT:return[3,5]}return[3,7];case 1:return[4,Kc.payment.getSinglePaymentPostDmrPageUrl(t,String(l),{bind_id:o,pay_method:i,token:s,currency:m})];case 2:case 4:case 6:return e=p.sent(),[3,7];case 3:return[4,Kc.payment.getSinglePaymentDonationDmrPageUrl(t,r,{bind_id:o,amount:a,pay_method:i,target_id:Number(l),token:s,is_mobile:c,merchant_data:u,currency:m})];case 5:return[4,Kc.payment.getSinglePaymentGiftSubscriptionDmrPageUrl(f,{merchant_data:u,pay_method:i,token:s,phone:d,currency:m})];case 7:return[2,{url:e.data.url,paymentId:e.data.paymentId,status:e.data.status}]}}))}))})),_b=gb("fetchSinglePaymentOnlyBindDmrPageUrl",(function(e){var t=e.payMethod,n=e.isMobile,r=e.currency;return pb(void 0,void 0,void 0,(function(){var e;return hb(this,(function(o){switch(o.label){case 0:return[4,Kc.payment.getSinglePaymentOnlyBindDmrPageUrl({pay_method:t,is_mobile:n,currency:r})];case 1:return[2,{url:(e=o.sent()).data.url,paymentId:e.data.paymentId,status:e.data.status}]}}))}))})),Eb=Im("fetchSubscriptionLevels",(function(e){var t,n,r=e.blogUrl,o=e.showFree,a=void 0!==o&&o;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.blog.fetchSubscriptionLevels(r,a,!1)];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),bb=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Sb=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Tb=(0,um.Jy)("Support"),Ib=(0,dm._l)(Tb),Nb=Ib("contactSupport",(function(e){var t=e.name,n=e.email,r=e.text;return bb(void 0,void 0,void 0,(function(){return Sb(this,(function(e){switch(e.label){case 0:return[4,Kc.support.contactSupport({name:t,email:n,text:r})];case 1:return e.sent(),[2,{}]}}))}))})),Cb=Ib("getSupportFrameUrl",(function(){return bb(void 0,void 0,void 0,(function(){return Sb(this,(function(e){switch(e.label){case 0:return[4,Kc.systemApi.getSupportFrameUrl()];case 1:return[2,{url:e.sent().data.url}]}}))}))})),wb=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Ob=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ab=(0,um.Jy)("OAuth"),Pb=(0,dm._l)(Ab),Lb=af(),Rb=Pb("checkApp",(function(e){return wb(void 0,void 0,void 0,(function(){return Ob(this,(function(t){switch(t.label){case 0:return[4,Lb.checkApp({client_id:e.appId,redirect_uri:e.redirectUri})];case 1:return[2,t.sent()]}}))}))})),kb=Pb("authorizeByPhone",(function(e){return wb(void 0,void 0,void 0,(function(){var t;return Ob(this,(function(n){switch(n.label){case 0:return[4,Lb.authorizeByPhone({client_id:e.phone,data:e.token})];case 1:return[2,{expires_in:(t=n.sent()).expires_in,client_id:t.client_id,code:t.code}]}}))}))})),Db=Pb("authorizeByOAuth",(function(e){return wb(void 0,void 0,void 0,(function(){return Ob(this,(function(t){switch(t.label){case 0:return[4,Lb.authorizeByOAuth({client_id:e.appId,redirect_uri:e.redirectUri,response_type:e.responseType,state:e.state,scope:e.code})];case 1:return[2,{url:t.sent().url}]}}))}))})),Ub=Pb("fetchTokenByPhone",(function(e){return wb(void 0,void 0,void 0,(function(){return Ob(this,(function(t){switch(t.label){case 0:return[4,Lb.fetchTokenByPhone({device_id:e.deviceId,sms_code:e.smsCode,device_os:e.deviceOS,client_id:e.clientId,code:e.code,allowed_actor_status:e.allowedActorStatus})];case 1:return[2,t.sent()]}}))}))})),Bb=function(e){return function(t,n,r){return function(o){return(e(t,n,r)||Promise.reject({})).then((function(e){return wb(void 0,void 0,void 0,(function(){var t;return Ob(this,(function(n){switch(n.label){case 0:return t=Number(bu(U.NEW_USER)),[4,o(Yv.action({user:e}))];case 1:return n.sent(),t===he.REGISTER&&bd.log.gtm.registrationSuccess(),[2,!0]}}))}))})).catch((function(e){switch(e.level){case fa.AuthFailureLevel.SEVERE:ho.error(e.reason,e.operation),o(Yv.action({user:null}));break;case fa.AuthFailureLevel.EXPECTED:ho.message(e.reason,e.operation),o(Yv.action({user:null}));break;case fa.AuthFailureLevel.MINOR:ho.message(e.reason,e.operation)}return!1}))}}},xb={requestAuth:function(e,t){return Bb(af().requestAuth)(e,!0,t)},tryInstantAuth:Bb(af().tryInstantAuth),tryRestoreAuth:Bb(af().tryRestoreAuth),restoreSession:Bb(af().restoreSession),authorizeByOAuth:Db,authorizeByPhone:kb,fetchTokenByPhone:Ub,checkApp:Rb},Mb=(0,um.Jy)("AuthByEmail"),Fb=(0,dm._l)(Mb),Gb=Fb("signIn",(function(e){var t,n,r=e.email,o=e.password,a=e.recaptchaToken;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.authByEmail.signIn({email:r,password:o,recaptchaToken:a})];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Hb=Fb("signUp",(function(e){var t,n,r=e.name,o=e.email,a=e.password,i=e.recaptchaToken;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.authByEmail.signUp({name:r,email:o,password:a,recaptchaToken:i})];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),Wb=(Fb("changePassword",(function(e){var t,n,r=e.oldPassword,o=e.password;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.authByEmail.changePassword({old_password:r,password:o})];case 1:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))}),Vb=(Fb("changePasswordWithCode",(function(e){return Wb(void 0,void 0,void 0,(function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.authByEmail.changePasswordWithCode(e)];case 1:return[2,t.sent().data]}}))}))})),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))}),jb=Fb("sendLinkForChangePassword",(function(e){var t=e.email;return Vb(void 0,void 0,void 0,(function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.authByEmail.sendLinkForChangePassword({email:t})];case 1:return[2,e.sent().data]}}))}))})),zb=(0,um.Jy)("WebSocket"),Yb=(0,dm._l)(zb)("fetchWebSocketToken",(function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.webSocket.fetchToken()];case 1:return[2,{token:e.sent().data.token}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),Kb=(0,um.Jy)("Poll"),qb=(0,dm._l)(Kb),Xb=qb("fetchPollUnsubs",(function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.poll.fetchUnsubs()];case 1:return[2,e.sent().data]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t})),Qb=qb("fetchUnsubsList",(function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.poll.fetchUnsubsList(e)];case 1:return[2,t.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),Jb=qb("voteUnsubs",(function(e){return void 0,void 0,n=function(){var t,n,r,o,a,i;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(l){switch(l.label){case 0:t=e.isAnonymous,n=e.answer,r=e.other,o=e.bloggerId,a=!1,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Kc.poll.voteUnsubs({is_anonymous:t,answer:n,other:r,blogger_id:o})];case 2:return l.sent(),a=!0,[3,4];case 3:throw i=l.sent(),new Ar(i);case 4:return[2,{succeeded:a}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),Zb=Kb("clearCurrentPoll"),$b=(0,um.Jy)("Promo"),eS=(0,dm._l)($b),tS=eS("activateTrial",(function(e,t){var n,r,o=e.blogUrl,a=e.levelId,i=e.promoId;return void 0,void 0,r=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,Kc.blog.activateTrialSubscription(o,a,i)];case 1:return e=n.sent(),t(qp.action({blogUrl:o})),t(Lm()),[2,e.data]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))})),nS=eS("createPromo",(function(e){return void 0,void 0,n=function(){var t,n,r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return t=e.blogUrl,n=e.data,[4,Kc.promo.create(t,n)];case 1:return r=a.sent(),[2,null===(o=r.data)||void 0===o?void 0:o.data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),rS=eS("fetchPromoList",(function(e){return void 0,void 0,n=function(){var t,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return t=e.blogUrl,n=e.filter,[4,pc.promo.fetchList(t,n)];case 1:return[2,r.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),oS=eS("fetchTrialLinkInfo",(function(e){return void 0,void 0,n=function(){var t,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return t=e.blogUrl,n=e.linkId,[4,Kc.promo.fetchTrialLinkInfo(t,n)];case 1:return[2,r.sent().data.data.promo]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),aS=eS("finishPromo",(function(e){return void 0,void 0,n=function(){var t,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return t=e.blogUrl,n=e.promoId,[4,Kc.promo.finish(t,n)];case 1:return[2,r.sent().data.data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),iS=Im("fetchSubscriptionLevelPromo",(function(e){var t,n,r=e.promoId;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.promo.fetchSubscriptionLevelPromo(r)];case 1:return[2,{data:e.sent().data.data}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),lS=$b("setPromoListFilter"),sS=(0,um.Jy)("Polls"),cS=(0,dm._l)(sS),uS=cS("createPoll",(function(e){return void 0,void 0,n=function(){var t,n,r,o,a,i;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(l){switch(l.label){case 0:return t=e.blogUrl,n=e.hasOther,r=e.isMultiple,o=e.title,a=e.options,i=e.finishTime,[4,Kc.poll.createPoll(t,{has_other:n,is_multiple:r,title:o,options:JSON.stringify(a),finish_time:i})];case 1:return[2,l.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),dS=cS("editPoll",(function(e){return void 0,void 0,n=function(){var t,n,r,o,a,i,l;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(s){switch(s.label){case 0:return t=e.blogUrl,n=e.pollId,r=e.hasOther,o=e.isMultiple,a=e.title,i=e.options,l=e.finishTime,[4,Kc.poll.editPoll(t,n,{title:a,options:JSON.stringify(i),has_other:r,is_multiple:o,finish_time:l})];case 1:return[2,s.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),fS=cS("fetchPoll",(function(e){return void 0,void 0,n=function(){var t,n,r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return t=e.blogUrl,n=e.pollId,r=e.limit,[4,Kc.poll.fetchPoll(t,n,r)];case 1:return[2,o.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),mS=function(){return mS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mS.apply(this,arguments)},pS=cS("fetchPollVoters",(function(e,t,n){return void 0,void 0,o=function(){var t,r,o,a,i;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(l){switch(l.label){case 0:return t=e.blogUrl,r=e.pollId,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["blogUrl","pollId"]),a=n().posts.postsList.data.posts.find((function(e){var t;return(null===(t=e.poll)||void 0===t?void 0:t.id)===r})),i=a.poll.options.find((function(e){return e.id===o.option})).voters.extra.offset,[4,Kc.poll.fetchPollVoters(t,r,mS(mS({},o),{offset:i}))];case 1:return[2,l.sent().data]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}));var r,o})),hS=cS("commitVote",(function(e,t){return void 0,void 0,r=function(){var n,r,o,a,i,l;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(s){switch(s.label){case 0:return n=e.blogUrl,r=e.pollId,o=e.answer,a=e.other,i=e.isAnonymous,[4,Kc.poll.commitVote(r,{answer:o,other:a,is_anonymous:i})];case 1:return l=s.sent(),t(fS({blogUrl:n,pollId:r})),[2,l.data]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r})),vS=cS("retractVote",(function(e,t){return void 0,void 0,r=function(){var n,r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return n=e.blogUrl,r=e.pollId,[4,Kc.poll.retractVote(r)];case 1:return o=a.sent(),t(fS({blogUrl:n,pollId:r})),[2,o.data]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r})),gS=sS("markPollAsFinished",(function(e,t){var n=e.blogUrl,r=e.pollId;t(fS({blogUrl:n,pollId:r}))})),yS=(0,um.Jy)("OverlayPopupState"),_S=yS("setOverlayPopup"),ES=yS("resetOverlayPopup"),bS=(0,um.Jy)("Video"),SS=(0,dm._l)(bS)("savePlaybackPosition",(function(e){var t,n,r=e.videoId,o=e.position;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,Kc.video.saveVideoTimeCode(r,o)];case 1:return e.sent(),[2,{}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),TS=bS("saveLocalPlaybackPosition"),IS=Im("fetchPayoutHistory",(function(e){var t,n,r=e.blogUrl,o=e.pageNumber,a=e.limit;return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,Kc.payout.fetchHistory(r,a,a*o)];case 1:return[2,{data:(n=(e=t.sent()).data.data,n.map((function(e){return function(e){return _i(_i({},e),{systemId:e.systemId.toLowerCase()})}(e)}))),offset:e.data.extra.offset,total:e.data.extra.total}]}var n}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),NS=function(e){return e===ht.VIDEO?"video":e===ht.IMAGE?"image":e===ht.AUDIO?"audio":"all"},CS=n(72514),wS=function(){return wS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wS.apply(this,arguments)},OS=function(){return OS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},OS.apply(this,arguments)},AS=function(e){var t={groupBy:"post",items:[]};return e.data.mediaPosts.forEach((function(e){t.items.push({post:e.post,mediaItems:e.media})})),OS(OS({},e),{data:t})},PS=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},LS=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},RS=Im("fetchMediaAlbum",(function(e,t,n){var r=e.blogUrl,o=e.limit,a=e.type,i=void 0===a?ht.ALL:a,l=e.isOnlyAllowedPosts,s=e.subscriptionLevelId,c=e.postsFrom,u=e.postsTo,d=e.postsTagsIds,f=e.groupBy,m=e.reset;return PS(void 0,void 0,void 0,(function(){var e,t,a,p,h;return LS(this,(function(v){switch(v.label){case 0:return e=null===(h=null===(p=n().blog.mediaAlbumList.data)||void 0===p?void 0:p.extra)||void 0===h?void 0:h.offset,t={type:NS(i),limit:o,limit_by:f,only_allowed:l||!1,subscription_level:s,from_ts:c,to_ts:u,tags_ids:d,offset:m?null:e},[4,Kc.mediaAlbum.getMediaAlbumList(r,t)];case 1:return a=v.sent(),"media"===f?[2,(g=a.data,y={groupBy:"media",items:[]},g.data.mediaPosts.forEach((function(e){e.media.forEach((function(t){y.items.push({id:(0,CS.Z)(e.post.id),post:e.post,media:t})}))})),wS(wS({},g),{data:y}))]:[2,AS(a.data)]}var g,y}))}))})),kS=Im("fetchMediaAlbumCounters",(function(e){var t=e.blogUrl,n=e.isOnlyAllowedPosts,r=e.subscriptionLevelId,o=e.postsFrom,a=e.postsTo,i=e.postsTagsIds;return PS(void 0,void 0,void 0,(function(){var e,l,s;return LS(this,(function(c){switch(c.label){case 0:return e={only_allowed:n||!1,subscription_level:r,from_ts:o,to_ts:a,tags_ids:i},[4,Kc.mediaAlbum.getMediaAlbumCounters(t,e)];case 1:return l=c.sent(),[2,(s={},s[ht.ALL]=Object.values(l.data.data.mediaCounters).reduce((function(e,t){return e+t}),0),s[ht.IMAGE]=l.data.data.mediaCounters.image,s[ht.VIDEO]=l.data.data.mediaCounters.okVideo,s[ht.AUDIO]=l.data.data.mediaCounters.audioFile,s)]}}))}))})),DS=Tm("clearMediaAlbum"),US=Tm("clearMediaAlbumCounters"),BS=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},xS=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},MS=(0,um.Jy)("Catalog"),FS=(0,dm._l)(MS),GS=FS("fetchCatalogCategories",(function(){return BS(void 0,void 0,void 0,(function(){return xS(this,(function(e){switch(e.label){case 0:return[4,Kc.catalog.fetchCategories()];case 1:return[2,{list:e.sent().data.data}]}}))}))})),HS=FS("fetchCatalogSuccessStories",(function(){return BS(void 0,void 0,void 0,(function(){return xS(this,(function(e){switch(e.label){case 0:return[4,Kc.catalog.fetchSuccessStories()];case 1:return[2,{list:e.sent().data.data}]}}))}))})),WS=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},VS=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},jS=(0,um.Jy)("Doc"),zS=(0,dm._l)(jS),YS=jS("resetDocStore"),KS=zS("fetchDocArticles",(function(){return WS(void 0,void 0,void 0,(function(){return VS(this,(function(e){switch(e.label){case 0:return[4,Kc.doc.fetchAll()];case 1:return[2,{articles:e.sent().data.data}]}}))}))})),qS=zS("fetchDocArticle",(function(e){var t=e.id;return WS(void 0,void 0,void 0,(function(){return VS(this,(function(e){switch(e.label){case 0:return[4,Kc.doc.fetch(t)];case 1:return[2,{article:e.sent().data}]}}))}))})),XS=(zS("requestAccess",(function(e){var t=e.name,n=e.email,r=e.text;return WS(void 0,void 0,void 0,(function(){return VS(this,(function(e){switch(e.label){case 0:return[4,Kc.doc.requestAccess({name:t,email:n,text:r})];case 1:return e.sent(),[2,{}]}}))}))})),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))}),QS=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},JS=(0,um.Jy)("payout"),ZS=(0,dm._l)(JS),$S=ZS("fetchBlogPayoutCardFrame",(function(){return XS(void 0,void 0,void 0,(function(){return QS(this,(function(e){switch(e.label){case 0:return[4,Kc.payout.fetchBlogPayoutCardFrame()];case 1:return[2,e.sent().data]}}))}))})),eT=ZS("fetchBlogPayouts",(function(e){var t=e.blogUrl;return XS(void 0,void 0,void 0,(function(){return QS(this,(function(e){switch(e.label){case 0:return[4,Kc.payout.fetchBlogPayouts(t)];case 1:return[2,{data:(n=e.sent().data.data,n.map((function(e){return Ei(e)})))}]}var n}))}))})),tT=ZS("createBlogPayout",(function(e,t){return XS(void 0,void 0,void 0,(function(){var n;return QS(this,(function(r){switch(r.label){case 0:return[4,Kc.payout.createBlogPayout(e)];case 1:return n=r.sent(),t(Zv()),[2,Ei(n.data)]}}))}))})),nT=ZS("updateBlogPayout",(function(e){return XS(void 0,void 0,void 0,(function(){var t;return QS(this,(function(n){switch(n.label){case 0:return[4,Kc.payout.updateBlogPayout(e.payoutId,e.payoutData)];case 1:return t=n.sent(),[2,Ei(t.data)]}}))}))})),rT=ZS("removeBlogPayout",(function(e){return XS(void 0,void 0,void 0,(function(){return QS(this,(function(t){switch(t.label){case 0:return[4,Kc.payout.removeBlogPayout(e.payoutId)];case 1:return[2,t.sent().data]}}))}))})),oT=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},aT=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},iT=(0,um.Jy)("Tutorial"),lT=(0,dm._l)(iT),sT=lT("fetchTutorialSubscriptionLevels",(function(){return oT(void 0,void 0,void 0,(function(){return aT(this,(function(e){switch(e.label){case 0:return[4,Kc.locales.tutorial.fetchTutorialSubscriptionLevels()];case 1:return[2,{data:e.sent().data}]}}))}))})),cT=lT("fetchTutorialOffers",(function(){return oT(void 0,void 0,void 0,(function(){return aT(this,(function(e){switch(e.label){case 0:return[4,Kc.locales.tutorial.fetchTutorialOffers()];case 1:return[2,{data:e.sent().data}]}}))}))})),uT=(0,um.Jy)("ExternalApp"),dT=(0,dm._l)(uT),fT=af().checkApp,mT=dT("fetchExternalApp",(function(e){var t,n,r=e.appId,o=e.redirectUri;return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,fT({client_id:r,redirect_uri:o})];case 1:return e.sent(),[4,Kc.systemApi.fetchExternalApp(r)];case 2:return[2,e.sent().data]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))})),pT=(0,um.Jy)("Offer"),hT=(0,dm._l)(pT)("fetchOfferByType",(function(e){return void 0,void 0,n=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,Kc.locales.offer.fetchOfferByType(e)];case 1:return t=n.sent().data,[2,{offerType:e.offerType,text:t.text}]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n})),vT=!1,gT=null,yT=[jn.OAUTH_TOKEN,jn.OAUTH_REFRESH_TOKEN],_T=function(e){var t=e.dispatch;return function(e){return function(n){vT||(vf.axios.interceptors.response.use((function(e){return e}),(function(e){return void 0,void 0,r=function(){var n,r,o,a,i,l;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(s){switch(s.label){case 0:if(!(null!=cf()&&e.response&&yT.every((function(t){return!e.config.url.startsWith(t)}))&&(401===e.response.status||400===e.response.status&&e.response.data.error_description&&null!=e.response.data.error_description.match(/authorization/i))))return[3,5];s.label=1;case 1:return s.trys.push([1,3,4,5]),null==gT&&(n=e.response,r=n.config,o=r.method,a=r.url,i=n.status,bd.log.auth.refreshToken({method:o,path:a,status:i}),gT=t(xb.restoreSession())),[4,Promise.race([(0,Yt.delay)(1e4),gT])];case 2:return s.sent()?[2,vf.axios.request(e.config)]:(uf(),[3,5]);case 3:return l=s.sent(),ho.error(l),uf(),[3,5];case 4:return gT=null,[7];case 5:return[2,Promise.reject(e)]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r})),vT=!0),e(n)}}},ET=n(64195),bT=n(53990),ST=function(){return ST=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ST.apply(this,arguments)},TT=(0,bT.reducerWithInitialState)({agents:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});!function(e){Br()("agents","networkStatus",pm.async,e,(function(e){return e.result.data}))}(TT),function(e){Br()("agents","networkStatus",vm.async,e,(function(e){var t=e.store,n=e.result;return ST(ST({},t.agents.data),n.data)}))}(TT),function(e){Br()("agents","networkStatus",hm.async,e,(function(e){var t=e.store,n=(e.result,e.params);return t.agents.data.filter((function(e){return e.id!==n.userId}))}))}(TT);var IT=function(){return IT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},IT.apply(this,arguments)},NT=function(){return NT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},NT.apply(this,arguments)},CT=function(){return CT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},CT.apply(this,arguments)},wT={id:"00000000-0000-0000-0000-000000000000",name:"",largeUrl:"",mediumUrl:"",smallUrl:"",isCreated:!1},OT=function(){return OT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},OT.apply(this,arguments)},AT=(0,bT.reducerWithInitialState)({badges:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});!function(e){Br()("badges","networkStatus",bh.async,e,(function(e){return e.result.badges}))}(AT),function(e){e.case(Th.async.done,(function(e,t){var n=t.result;return t.params,OT(OT({},e),{badges:OT(OT({},e.badges),{data:e.badges.data.map((function(e){return e.id===n.id?n:e}))})})}))}(AT),function(e){e.case(Sh.async.done,(function(e,t){var n=t.result;return NT(NT({},e),{badges:NT(NT({},e.badges),{data:e.badges.data.map((function(e){return e.achievement.name===n.achievement.name?n:e}))})})}))}(AT),function(e){e.case(Nh.async.done,(function(e,t){var n=t.params;return CT(CT({},e),{badges:CT(CT({},e.badges),{data:e.badges.data.map((function(e){return e.id!==n.badgeId?e:CT(CT({},e),wT)}))})})}))}(AT),function(e,t){e.case(Ch,(function(e){return IT({},t)}))}(AT,{badges:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});var PT=function(){return PT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},PT.apply(this,arguments)},LT=function(){return LT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},LT.apply(this,arguments)},RT=(0,bT.reducerWithInitialState)({blackList:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});!function(e){Br()("blackList","networkStatus",Em.async,e,(function(e){return e.result}))}(RT),function(e){e.case(Sm,(function(e){return LT(LT({},e),{blacklist:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}))}(RT),function(e){e.case(_m.async.done,(function(e,t){var n=t.params.userId;return PT(PT({},e),{blackList:PT(PT({},e.blackList),{data:e.blackList.data.filter((function(e){return e.id!==n}))})})}))}(RT);var kT=function(){return kT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kT.apply(this,arguments)},DT=function(){return DT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},DT.apply(this,arguments)},UT=function(){return UT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},UT.apply(this,arguments)},BT=function(){return BT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},BT.apply(this,arguments)},xT=function(){return xT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xT.apply(this,arguments)},MT=function(){return MT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},MT.apply(this,arguments)},FT=function(e){var t=e.state,n=e.blogUrl,r=e.isSubscribed,o=e.networkStatus;return t.blog.data&&t.blog.data.blogUrl===n?MT(MT({},t),{blog:MT(MT({},t.blog),{data:t.blog.data?MT(MT({},t.blog.data),{isSubscribed:null!==r?r:t.blog.data.isSubscribed,count:MT(MT({},t.blog.data.count),{subscribers:null!==r?t.blog.data.count.subscribers+(r?1:-1):t.blog.data.count.subscribers})}):null,meta:t.blog.meta?MT(MT({},t.blog.meta),{followNetworkStatus:o||{isFetching:!1,isFetched:!1,error:null}}):null})}):t},GT=function(){return GT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},GT.apply(this,arguments)},HT=function(e){e.case(by,(function(e){return GT(GT({},e),{blog:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editCoverNetworkStatus:{isFetching:!1,isFetched:!1,error:null},followNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}))},WT=(0,bT.reducerWithInitialState)({blog:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editCoverNetworkStatus:{isFetching:!1,isFetched:!1,error:null},followNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogItem:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},rss:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});WT.case(cg.async.done,(function(e,t){var n=t.result,r=n.id,o=n.email,a=n.name,i=n.avatarUrl;if(null!=e.blog.data&&r===e.blog.data.owner.id){var l=null!=i?i:e.blog.data.owner.avatarUrl;return DT(DT({},e),{blog:DT(DT({},e.blog),{data:DT(DT({},e.blog.data),{owner:DT(DT({},e.blog.data.owner),{name:a,email:o,avatarUrl:l,hasAvatar:null!=l&&String(l).length>0})})})})}return e})),function(e){e.case(vy,(function(e,t){var n,r,o=t.userId,a=t.isBlackListed;return(null===(r=null===(n=e.blog.data)||void 0===n?void 0:n.owner)||void 0===r?void 0:r.id)!==o?e:kT(kT({},e),{blog:kT(kT({},e.blog),{data:kT(kT({},e.blog.data),{isBlackListed:a})})})}))}(WT),function(e){e.case(my,(function(e,t){var n=t.count;return UT(UT({},e),{blog:UT(UT({},e.blog),{data:UT(UT({},e.blog.data),{count:UT(UT({},e.blog.data.count),{subscribers:n})})})})}))}(WT),function(e){Br()("blog","editCoverNetworkStatus",ey.async,e,(function(e){return{coverUrl:e.result.url}}))}(WT),function(e){Br()("blog","createNetworkStatus",ny.async,e)}(WT),function(e){Br()("blog","editNetworkStatus",ty.async,e,(function(e){e.params;var t=e.result;return{title:t.blog.title,description:t.blog.description,hasAdultContent:t.blog.hasAdultContent}}))}(WT),function(e){Br()("blog","networkStatus",Nm.async,e,(function(e){e.store;var t=e.result;return BT({},t.blog)}))}(WT),function(e){e.case(ly.async.started,(function(e,t){var n=t.blogUrl;return FT({state:e,blogUrl:n,isSubscribed:null,networkStatus:{isFetching:!0,isFetched:!1,error:null}})})).case(sy.async.started,(function(e,t){var n=t.blogUrl;return FT({state:e,blogUrl:n,isSubscribed:null,networkStatus:{isFetching:!0,isFetched:!1,error:null}})})).case(iy.async.started,(function(e,t){var n=t.blogUrl;return FT({state:e,blogUrl:n,isSubscribed:null,networkStatus:{isFetching:!0,isFetched:!1,error:null}})})).case(ly.async.done,(function(e,t){var n=t.params.blogUrl;return FT({state:e,blogUrl:n,isSubscribed:!0,networkStatus:{isFetching:!1,isFetched:!0,error:null}})})).case(sy.async.done,(function(e,t){var n=t.params.blogUrl;return FT({state:e,blogUrl:n,isSubscribed:!1,networkStatus:{isFetching:!1,isFetched:!0,error:null}})})).case(iy.async.done,(function(e,t){var n=t.params.blogUrl;return FT({state:e,blogUrl:n,isSubscribed:!1,networkStatus:{isFetching:!1,isFetched:!0,error:null}})})).case(ly.async.failed,(function(e,t){var n=t.error;return FT({state:e,blogUrl:null,isSubscribed:null,networkStatus:kr(n)})})).case(sy.async.failed,(function(e,t){var n=t.error;return FT({state:e,blogUrl:null,isSubscribed:null,networkStatus:kr(n)})})).case(iy.async.failed,(function(e,t){var n=t.error;return FT({state:e,blogUrl:null,isSubscribed:null,networkStatus:kr(n)})}))}(WT),function(e){Br()("rss","networkStatus",_y.async,e,(function(e){return e.result}))}(WT),function(e){e.withHandling(Wa(Ey.async.done,(function(e,t){var n=t.result.isRssFeedEnabled;e.blog.data.flags.isRssFeedEnabled=n})))}(WT),function(e){e.withHandling(Wa(Ty.async.done,(function(e,t){var n=t.result.hasAdultContent;e.blog.data.hasAdultContent=n})))}(WT),HT(WT),function(e){Br()("blogItem","networkStatus",Sy.async,e,(function(e){e.store;var t=e.result;return xT({},t.blog)}))}(WT);var VT=function(){return VT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},VT.apply(this,arguments)},jT=function(){return jT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jT.apply(this,arguments)},zT=function(){return zT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zT.apply(this,arguments)},YT=function(){return YT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},YT.apply(this,arguments)},KT=function(){return KT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},KT.apply(this,arguments)},qT=(0,bT.reducerWithInitialState)({blogBase:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogMetrics:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogMetricsStatCharts:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogEvents:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogRefs:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogRefsUsers:{data:{data:{referrals:[]},extra:{total:null,offset:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogSearchUsers:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogUnsubscribes:{data:{data:{unsubscribeAnswers:[]},extra:{isLast:null,offset:null,total:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogSubscribers:{data:{list:[],total:0},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogDonations:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},postSales:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},postSalesByDate:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},postSalesDaysByMonth:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogHolds:{data:{data:{holds:[]},extra:{total:null,offset:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},broadcastMessageStats:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},reports:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});!function(e){Br()("postSalesDaysByMonth","networkStatus",n_.async,e,(function(e){return e.result}))}(qT),function(e){e.withHandling(Wa(Cy,(function(e){e.blogEvents.data={data:[],extra:null}})))}(qT),function(e){e.case(wy,(function(e){return jT(jT({},e),{blogBase:jT(jT({},e.blogBase),{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}),blogMetrics:jT(jT({},e.blogMetrics),{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}),blogMetricsStatCharts:jT(jT({},e.blogMetricsStatCharts),{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}})})}))}(qT),function(e){e.withHandling(Wa(Oy,(function(e){e.blogRefsUsers.data={data:{referrals:[]},extra:{total:null,offset:null}}})))}(qT),function(e){Br()("blogBase","networkStatus",c_.async,e,(function(e){return e.result}))}(qT),function(e){Br()("blogEvents","networkStatus",Uy.async,e,(function(e){return e.result}))}(qT),function(e){Br()("blogHolds","networkStatus",By.async,e,(function(e){return e.result}))}(qT),function(e){Br()("blogMetrics","networkStatus",My.async,e,(function(e){return e.result}))}(qT),function(e){Br()("blogRefs","networkStatus",Gy.async,e,(function(e){return e.result}))}(qT),function(e){Br()("blogRefsUsers","networkStatus",Wy.async,e,(function(e){return e.result}))}(qT),function(e){Br()("blogSearchUsers","networkStatus",jy.async,e,(function(e){return e.result.data}))}(qT),function(e){Br()("blogMetricsStatCharts","networkStatus",Yy.async,e,(function(e){return e.result}))}(qT),function(e){e.case(ky,(function(e,t){return YT(YT({},e),{blogMetricsStatCharts:YT(YT({},e.blogMetricsStatCharts),{data:YT(YT({},e.blogMetricsStatCharts.data),t)})})}))}(qT),function(e){e.case(Jy,(function(e,t){return KT(KT({},e),{blogMetricsNew:KT(KT({},e.blogMetrics),{data:KT(KT({},e.blogMetrics.data),t)})})}))}(qT),function(e){Br()("blogSubscribers","networkStatus",t_.async,e,(function(e){var t=e.result;return{list:t.data,total:t.total}}))}(qT),function(e){e.case(a_,(function(e){var t=qa(e);return t.blogSubscribers={data:{list:[],total:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},t}))}(qT),function(e){Br()("blogDonations","networkStatus",Zy.async,e,(function(e){return e.result}))}(qT),function(e){e.case(r_,(function(e){var t=qa(e);return t.blogDonations={data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},t}))}(qT),function(e){Br()("postSales","networkStatus",$y.async,e,(function(e){return e.result}))}(qT),function(e){e.case(o_,(function(e){var t=qa(e);return t.postSales={data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},t}))}(qT),function(e){Br()("postSalesByDate","networkStatus",e_.async,e,(function(e){return e.result}))}(qT),function(e){Br()("broadcastMessageStats","networkStatus",l_.async,e,(function(e){return e.result}))}(qT),function(e){e.case(Qb.async.started,(function(e){return zT(zT({},e),{blogUnsubscribes:zT(zT({},e.blogUnsubscribes),{meta:zT(zT({},e.blogUnsubscribes.meta),{networkStatus:{isFetching:!0,isFetched:!1,error:null}})})})})).case(Qb.async.done,(function(e,t){var n=t.result;return zT(zT({},e),{blogUnsubscribes:zT(zT({},e.blogUnsubscribes),{data:n,meta:zT(zT({},e.blogUnsubscribes.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null}})})})})).case(Qb.async.failed,(function(e,t){var n=t.error;return zT(zT({},e),{blogUnsubscribes:zT(zT({},e.blogUnsubscribes),{meta:zT(zT({},e.blogUnsubscribes.meta),{networkStatus:kr(n)})})})}))}(qT),function(e){Br()("reports","networkStatus",qy.async,e,(function(e){var t,n=e.result.data.report;return(t={})[n.type]=n,t}))}(qT),function(e){Br()("reports","networkStatus",Xy.async,e,(function(e){var t,n=e.params.dataType,r=e.result.data.report;return(t={})[n]=r,t}))}(qT),qT.case(Qy,(function(e,t){var n,r=t.data;return VT(VT({},e),{reports:VT(VT({},e.reports),{data:VT(VT({},e.reports.data),(n={},n[r.type]=r,n))})})}));var XT,QT=function(){return QT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},QT.apply(this,arguments)},JT=(0,bT.reducerWithInitialState)({data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}},stored:!1}).case(Xb.async.started,(function(e){return QT(QT({},e),{meta:QT(QT({},e.meta),{networkStatus:{isFetching:!0,isFetched:!1,error:null}})})})).case(Xb.async.done,(function(e,t){var n=t.result;return QT(QT({},e),{data:n,meta:QT(QT({},e.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null}})})})).case(Xb.async.failed,(function(e,t){var n=t.error;return QT(QT({},e),{meta:QT(QT({},e.meta),{networkStatus:kr(n)})})})).case(Zb,(function(e){return QT({},{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}},stored:!1})})).case(Jb.async.done,(function(e,t){var n=t.result.succeeded;return QT(QT({},e),{stored:n})})),ZT=function(){return ZT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ZT.apply(this,arguments)},$T=function(){return $T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$T.apply(this,arguments)},eI=function(){return eI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},eI.apply(this,arguments)},tI=function(){return tI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tI.apply(this,arguments)},nI=function(){return nI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nI.apply(this,arguments)},rI=function(){return rI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rI.apply(this,arguments)},oI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},aI=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},iI=(0,bT.reducerWithInitialState)({user:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},updateNetworkStatus:{isFetching:!1,isFetched:!1,error:null},acceptPrivacyPolicyNetworkStatus:{isFetching:!1,isFetched:!1,error:null},acceptRefPolicyNetworkStatus:{isFetching:!1,isFetched:!1,error:null},uploadAvatarNetworkStatus:{isFetching:!1,isFetched:!1,error:null},fetchTelegramLoginUrlNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},selectedCurrency:null,paymentBinds:{data:{list:[],extra:{allowDeleteLastBind:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},phone:{data:{refPhone:null,phone:null,expiresIn:null,code:null},meta:{refPhoneNetworkStatus:{isFetching:!1,isFetched:!1,error:null},networkStatus:{isFetching:!1,isFetched:!1,error:null}}},recaptcha:{data:{score:null,success:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},marketingAlerts:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},notifications:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},notificationSettings:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},infoMessages:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}).case(jv,(function(e,t){var n,r=t.user;return rI(rI(rI({},e),Boolean(r)&&{notifications:rI(rI({},e.notifications),{data:rI(rI({},e.notifications.data),{count:rI(rI({},null===(n=e.notifications.data)||void 0===n?void 0:n.count),{unread:Ya(r.counts.standaloneNotify)})})})}),{user:rI(rI({},e.user),{data:r,meta:rI(rI({},e.user.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null}})})})})).case(Sv,(function(e,t){return rI(rI({},e),{user:rI(rI({},e.user),{data:rI(rI({},e.user.data),{unreadMsgCount:t.userUnreadCounter})})})})).case(Kv,(function(e,t){return rI(rI({},e),{user:rI(rI({},e.user),{data:rI(rI({},e.user.data),{authSource:rI(rI({},e.user.data.authSource),{list:aI(aI([],oI(e.user.data.authSource.list),!1),[v.PHONE],!1)})})}),phone:rI(rI({},e.phone),{data:rI(rI({},e.phone.data),{phone:t})})})})).case(Xv.async.started,(function(e){return rI(rI({},e),{user:rI(rI({},e.user),{meta:rI(rI({},e.user.meta),{networkStatus:{isFetching:!0,isFetched:!1,error:null}})})})})).case(Xv.async.failed,(function(e,t){var n=t.error;return rI(rI({},e),{user:rI(rI({},e.user),{meta:rI(rI({},e.user.meta),{networkStatus:{isFetching:!1,isFetched:!1,error:n}})})})})).case(zv,(function(){return{user:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},updateNetworkStatus:{isFetching:!1,isFetched:!1,error:null},acceptPrivacyPolicyNetworkStatus:{isFetching:!1,isFetched:!1,error:null},acceptRefPolicyNetworkStatus:{isFetching:!1,isFetched:!1,error:null},uploadAvatarNetworkStatus:{isFetching:!1,isFetched:!1,error:null},fetchTelegramLoginUrlNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},selectedCurrency:null,paymentBinds:{data:{list:[],extra:{allowDeleteLastBind:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},phone:{data:{refPhone:null,phone:null,expiresIn:null,code:null},meta:{refPhoneNetworkStatus:{isFetching:!1,isFetched:!1,error:null},networkStatus:{isFetching:!1,isFetched:!1,error:null}}},recaptcha:{data:{score:null,success:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},marketingAlerts:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},notifications:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},notificationSettings:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},infoMessages:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}})).case(ny.async.done,(function(e,t){var n=t.params,r=t.result;return rI(rI({},e),{user:rI(rI({},e.user),{data:rI(rI({},e.user.data),{blogUrl:r.blogUrl,email:n.email,isBlogger:!0})})})})).case(qv,(function(e,t){var n=e.paymentBinds.data.list.filter((function(e){return e.id!==t.id}));return rI(rI({},e),{paymentBinds:rI(rI({},e.paymentBinds),{data:rI(rI({},e.paymentBinds.data),{list:n})})})})).case(cg.async.started,(function(e,t){var n=t.email,r=t.name;return rI(rI({},e),{user:rI(rI({},e.user),{data:rI(rI({},e.user.data),{email:n,name:r})})})})).case(fg.async.done,(function(e){return rI(rI({},e),{user:rI(rI({},e.user),{data:rI(rI({},e.user.data),{isTutorialFinished:!0})})})})).case(mg,(function(e){return rI(rI({},e),{user:rI(rI({},e.user),{data:rI(rI({},e.user.data),{problemSubscriptions:[]})})})})).case(mE.async.started,(function(e){return rI(rI({},e),{user:rI(rI({},e.user),{data:rI({},e.user.data),meta:rI(rI({},e.user.meta),{fetchTelegramLoginUrlNetworkStatus:{isFetching:!0,isFetched:!1,error:null}})})})})).case(mE.async.done,(function(e,t){var n=t.result.url;return rI(rI({},e),{user:rI(rI({},e.user),{data:rI(rI({},e.user.data),{externalApps:rI(rI({},e.user.data.externalApps),{telegram:rI(rI({},e.user.data.externalApps.telegram),{loginUrl:n})})}),meta:rI(rI({},e.user.meta),{fetchTelegramLoginUrlNetworkStatus:{isFetching:!1,isFetched:!0,error:null}})})})})).case(mE.async.failed,(function(e,t){var n=t.error;return rI(rI({},e),{user:rI(rI({},e.user),{meta:rI(rI({},e.user.meta),{fetchTelegramLoginUrlNetworkStatus:kr(n)})})})})).case(Ig,(function(e,t){var n=t.currency;return rI(rI({},e),{selectedCurrency:n,paymentBinds:{data:{list:[],extra:{allowDeleteLastBind:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})})).case(Ng,(function(e){return rI(rI({},e),{selectedCurrency:null})})).case(pp.async.done,(function(e,t){var n=t.result.on;return rI(rI({},e),{user:rI(rI({},e.user),{data:rI(rI({},e.user.data),{shouldStreamRecord:n})})})})).case(Og,(function(e,t){var n=t.username;return rI(rI({},e),{user:rI(rI({},e.user),{data:rI(rI({},e.user.data),{externalApps:rI(rI({},e.user.data.externalApps),{telegram:rI(rI({},e.user.data.externalApps.telegram),{hasAccount:!0,username:n})})})})})})).case(Pg.async.done,(function(e,t){var n=t.params;return rI(rI({},e),{user:rI(rI({},e.user),{data:rI(rI({},e.user.data),{dialogSettings:n})})})}));Br()("paymentBinds","networkStatus",$v.async,iI,(function(e){var t=e.result;return{list:t.list,extra:t.extra}})),Br()("user","updateNetworkStatus",tg.async,iI,(function(e){return e.result})),Br()("user","updateNetworkStatus",ng.async,iI,(function(e){return e.result})),Br()("user","acceptPrivacyPolicyNetworkStatus",ig.async,iI,(function(e){return e.result})),Br()("user","acceptRefPolicyNetworkStatus",lg.async,iI,(function(e){return e.result})),Br()("user","uploadAvatarNetworkStatus",sg.async,iI,(function(e){return{avatarUrl:e.result.url,hasAvatar:!0}})),Br()("phone","networkStatus",hg.async,iI,(function(e){return{isExist:e.result.isExist}})),Br()("phone","networkStatus",vg.async,iI,(function(e){return{canAdd:e.result.canAdd}})),Br()("phone","refPhoneNetworkStatus",Jv.async,iI,(function(e){return{refPhone:e.result.refPhone}})),Br()("phone","networkStatus",rg.async,iI,(function(e){var t=e.result;return{phone:t.phone,expiresIn:t.expiresIn,code:t.code}})),Br()("phone","networkStatus",og.async,iI),Br()("phone","networkStatus",ag.async,iI,(function(e){var t=e.result;return{phone:t.phone,expiresIn:t.expiresIn,code:t.code}})),Br()("marketingAlerts","networkStatus",bg.async,iI,(function(e){return e.result.data})),function(e){e.case(dg.async.done,(function(e,t){var n=t.result;return $T($T({},e),{user:$T($T({},e.user),{data:$T($T({},e.user.data),n)})})}))}(iI),function(e){e.case(Eg,(function(e,t){var n=t.isReadOnly,r=t.isTotalBaned;return nI(nI({},e),{user:nI(nI({},e.user),{data:nI(nI(nI({},e.user.data),null!==n&&{isReadOnly:n}),null!==r&&{isTotalBaned:r})})})}))}(iI),XT=iI,Br()("user","networkStatus",Kg.async,XT,(function(e){var t,n=e.store,r=e.params;return{notifications:tI(tI({},n.user.data.notifications),(t={},t[r.notificationType]=r.transport,t))}})),function(e){e.case(Fg.async.started,(function(e){var t=qa(e);return t.notifications.meta.networkStatus={isFetching:!0,isFetched:!1,error:null},t})).case(Fg.async.failed,(function(e,t){var n=qa(e);return n.notifications.meta.networkStatus=kr(t.error),n})).case(Fg.async.done,(function(e,t){var n=t.result,r=qa(e);return r.notifications.data=n,r.notifications.meta.networkStatus={isFetching:!1,isFetched:!0,error:null},r})).case(Gg.async.done,(function(e,t){var n=t.result,r=qa(e);return r.notifications.data.list=r.notifications.data.list.map((function(e){return eI(eI({},e),{isRead:!0})})),r.notifications.data.count.unread=n.newUnreadCount,r})).case(Hg.async.done,(function(e,t){var n=t.params,r=qa(e);return r.notifications.data&&(r.notifications.data.list=r.notifications.data.list.filter((function(e){return e.id!==n.id}))),r})).case(Wg.async.done,(function(e,t){var n=t.result,r=qa(e);return r.notifications.data=n,r})).case(Vg,(function(e,t){var n,r=qa(e);return r.notifications.data=eI(eI({},r.notifications.data),{count:eI(eI({},null===(n=r.notifications.data)||void 0===n?void 0:n.count),{unread:t})}),r}))}(iI),function(e){e.withHandling(Wa(Qg.async.done,(function(e,t){var n=t.result,r=n.flag,o=n.value;switch(r){case _t.HAS_ADULT_CONTENT:e.user.data.blog.hasAdultContent=o;break;case _t.SHOW_POST_DONATION:e.user.data.blog.showPostDonations=o}})))}(iI),function(e){Br()("notificationSettings","networkStatus",qg.async,e,(function(e){return e.result.settings}))}(iI),function(e){Br()("infoMessages","networkStatus",kg.async,e,(function(e){return e.result}))}(iI),function(e){e.case(Dg.async.done,(function(e,t){var n;return ZT(ZT({},e),{infoMessages:ZT(ZT({},e.infoMessages),{data:(null===(n=e.infoMessages.data)||void 0===n?void 0:n.filter((function(e){return e.id!==t.params.id})))||null})})}))}(iI);var lI=iI,sI=n(76160),cI=n(4242),uI=function(){return uI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},uI.apply(this,arguments)},dI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},fI=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},mI=function(){return mI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mI.apply(this,arguments)},pI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},hI=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},vI=(0,bT.reducerWithInitialState)({unreadMsgCount:0,dialogueActive:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},dialogues:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},messages:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},messageDonation:null,isNeedUpdate:!1,recipientsCount:{data:{recipientsCount:0,isSending:!1},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},contacts:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},mailingList:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},chatMateSubscriptionLevels:{data:{blogUrl:null,levels:[],subscriptions:[],currentLevelId:null,nextLevelId:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editNetworkStatus:{isFetching:!1,isFetched:!1,error:null},removeNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},chatMateInfo:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},canWriteDonationMessage:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},currentDialogSmileSet:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}).case(Sv,(function(e,t){var n=t.dialogId,r=t.dialogUnreadCounter,o=e.dialogues.data.data.map((function(e){return e.id===n?mI(mI({},e),{unreadMsgCount:r}):e}));return mI(mI({},e),{dialogues:mI(mI({},e.dialogues),{data:mI(mI({},e.dialogues.data),{data:o})})})})).case(iv,(function(e,t){var n,r,o=t.isBlackListed,a=t.userId;return e.dialogueActive?(null===(r=null===(n=e.dialogueActive.data)||void 0===n?void 0:n.chatmate)||void 0===r?void 0:r.id)!==a?e:mI(mI({},e),{dialogueActive:mI(mI({},e.dialogueActive),{data:mI(mI({},e.dialogueActive.data),{relation:mI(mI({},e.dialogueActive.data.relation),{isBlackListed:o,canWrite:!o,canWriteMe:!o})})})}):e})).case(nv,(function(e,t){var n=t.dialogue;return e.dialogues.data.data.find((function(e){return e.id===n.id}))?mI({},e):mI(mI({},e),{dialogues:mI(mI({},e.dialogues),{data:mI(mI({},e.dialogues.data),{data:hI([n],pI(e.dialogues.data.data),!1)})})})})).case(mv,(function(e,t){var n=t.recipientsCount;return mI(mI({},e),{recipientsCount:mI(mI({},e.recipientsCount),{data:{recipientsCount:n}})})})).case(ev,(function(e,t){var n=t.relation;return mI(mI({},e),{dialogueActive:mI(mI({},e.dialogueActive),{data:mI(mI({},e.dialogueActive.data),{relation:n})})})})).case(tv,(function(e){return mI(mI({},e),{dialogueActive:mI(mI({},e.dialogueActive),{data:mI(mI({},e.dialogueActive.data),{relation:mI(mI({},e.dialogueActive.data.relation),{canWrite:void 0,canWriteMe:void 0})})})})})).case(yv,(function(e){return mI(mI({},e),{dialogueActive:mI(mI({},e.dialogueActive),{data:null,meta:mI(mI({},e.dialogueActive.meta),{networkStatus:{isFetching:!1,isFetched:!1,error:null}})}),messages:mI(mI({},e.messages),{data:mI(mI({},e.messages.data),{data:[],extra:null}),meta:mI(mI({},e.messages.meta),{networkStatus:{isFetching:!1,isFetched:!1,error:null}})})})})).case(Ev,(function(e){return mI(mI({},e),{contacts:mI(mI({},e.contacts),{data:mI(mI({},e.contacts.data),{data:[],extra:null}),meta:mI(mI({},e.contacts.meta),{networkStatus:{isFetching:!1,isFetched:!1,error:null}})})})})).case(_v,(function(e){return mI(mI({},e),{mailingList:mI(mI({},e.mailingList),{data:mI(mI({},e.mailingList.data),{data:[],extra:null}),meta:mI(mI({},e.mailingList.meta),{networkStatus:{isFetching:!1,isFetched:!1,error:null}})})})})).case(bv,(function(e){return mI(mI({},e),{dialogues:mI(mI({},e.dialogues),{data:mI(mI({},e.dialogues.data),{data:[],extra:null}),meta:mI(mI({},e.dialogues.meta),{networkStatus:{isFetching:!1,isFetched:!1,error:null}})})})})).case(uv,(function(e,t){var n=t.message;return mI(mI({},e),{messageDonation:n})})).case(dv,(function(e){return mI(mI({},e),{messageDonation:null})})).case(fv,(function(e,t){var n=t.isNeedUpdate;return mI(mI({},e),{isNeedUpdate:n})}));!function(e){e.case(sv,(function(e,t){var n=t.messages;return uI(uI({},e),{messages:uI(uI({},e.messages),{data:uI(uI({},e.messages.data),{data:n})})})})).case(cv,(function(e,t){var n,r,o=t.message;return(null===(r=null===(n=e.dialogueActive)||void 0===n?void 0:n.data)||void 0===r?void 0:r.id)!==o.dialogId||e.messages.data.data.some((function(e){return e.id===o.id}))?e:uI(uI({},e),{messages:uI(uI({},e.messages),{data:uI(uI({},e.messages.data),{data:fI(fI([],dI(e.messages.data.data),!1),[o],!1)})})})})).case(av,(function(e,t){var n=t.message,r=e.dialogues.data.data.map((function(e){return e.id===n.dialogId?uI(uI({},e),{lastMessage:n}):e})).sort((function(e,t){var n,r;return(null===(n=null==t?void 0:t.lastMessage)||void 0===n?void 0:n.createdAt)-(null===(r=null==e?void 0:e.lastMessage)||void 0===r?void 0:r.createdAt)}));return uI(uI({},e),{dialogues:uI(uI({},e.dialogues),{data:uI(uI({},e.dialogues.data),{data:r})})})})).case(pv,(function(e,t){var n=t.dialogId,r=t.messageId,o=e.messages.data.data.map((function(e){return e.id===r?uI(uI({},e),{data:[],isDeleted:!0}):e})),a=o.find((function(e){return e.id===r})),i=e.dialogues.data.data.map((function(e){var t;return e.id===n&&(null===(t=null==e?void 0:e.lastMessage)||void 0===t?void 0:t.id)===r?uI(uI({},e),{lastMessage:a}):e}));return uI(uI({},e),{dialogues:uI(uI({},e.dialogues),{data:uI(uI({},e.dialogues.data),{data:i})}),messages:uI(uI({},e.messages),{data:uI(uI({},e.messages.data),{data:o})})})})).case(lv,(function(e,t){var n=t.actorId,r=t.dialogId,o=t.messageId,a=e.dialogues.data.data.map((function(e){return e.id===r&&(null==e?void 0:e.lastMessage.id)===o&&(null==e?void 0:e.lastMessage.authorId)!==n?uI(uI({},e),{lastMessage:uI(uI({},e.lastMessage),{isRead:!0})}):e})),i=e.messages.data.data.map((function(e){return e.id<=o&&e.authorId!==n?uI(uI({},e),{isRead:!0}):e}));return uI(uI({},e),{dialogues:uI(uI({},e.dialogues),{data:uI(uI({},e.dialogues.data),{data:a})}),messages:uI(uI({},e.messages),{data:uI(uI({},e.messages.data),{data:i})})})})).case(ov,(function(e,t){var n=t.dialogId,r=t.messageId,o=e.dialogues.data.data.map((function(e){return e.id===n&&(null==e?void 0:e.lastMessage.id)===r?uI(uI({},e),{lastMessage:uI(uI({},e.lastMessage),{isPaid:!0})}):e})),a=e.messages.data.data.map((function(e){return e.id===r?uI(uI({},e),{isPaid:!0}):e}));return uI(uI({},e),{messages:uI(uI({},e.messages),{data:uI(uI({},e.messages.data),{data:a})}),dialogues:uI(uI({},e.dialogues),{data:uI(uI({},e.dialogues.data),{data:o})})})})).case(rv,(function(e,t){var n=t.message,r=e.messages.data.data.map((function(e){return e.id===n.id?uI({},n):e}));return uI(uI({},e),{messages:uI(uI({},e.messages),{data:uI(uI({},e.messages.data),{data:r})})})})).case(hv,(function(e,t){t.dialogId;var n=t.messageId;return uI(uI({},e),{messages:uI(uI({},e.messages),{data:uI(uI({},e.messages.data),{data:e.messages.data.data.filter((function(e){return e.id!==n}))})})})})).case(vv,(function(e,t){t.dialogId;var n=t.messageId,r=e.messages.data.data.map((function(e){return e.id===n?uI(uI({},e),{isSending:!1,isSendingError:!0}):e}));return uI(uI({},e),{messages:uI(uI({},e.messages),{data:uI(uI({},e.messages.data),{data:r})})})})).case(gv,(function(e,t){var n=t.isTyping;return uI(uI({},e),{dialogueActive:uI(uI({},e.dialogueActive),{data:uI(uI({},e.dialogueActive.data),{chatmate:uI(uI({},e.dialogueActive.data.chatmate),{isTyping:n})})})})})).case(Fh.async.done,(function(e,t){var n=t.result;return uI(uI({},e),{recipientsCount:uI(uI({},e.recipientsCount),{data:uI(uI({},e.recipientsCount.data),{recipientsCount:n.data.recipientsCount,isSending:!0})})})}))}(vI),Br()("canWriteDonationMessage","networkStatus",$h.async,vI,(function(e){return e.result})),Br()("dialogues","networkStatus",Rh.async,vI,(function(e){return e.result})),Br()("dialogues","networkStatus",kh.async,vI,(function(e){var t=e.store,n=e.result;return mI(mI({},n),{data:hI(hI([],pI(t.dialogues.data.data),!1),pI(n.data),!1)})})),Br()("messages","networkStatus",zh.async,vI,(function(e){var t=e.store,n=e.result;return mI(mI({},n),{data:(0,sI.Z)((0,cI.Z)(n.data,t.messages.data.data,(function(e,t){return e.id===t.id})),"id")})})),Br()("chatMateSubscriptionLevels","networkStatus",Zh.async,vI,(function(e){return e.result})),Br()("contacts","networkStatus",Kh.async,vI,(function(e){return e.result})),Br()("contacts","networkStatus",qh.async,vI,(function(e){var t=e.store,n=e.result;return mI(mI({},n),{data:hI(hI([],pI(t.contacts.data.data),!1),pI(n.data),!1)})})),Br()("mailingList","networkStatus",Qh.async,vI,(function(e){return e.result})),Br()("mailingList","networkStatus",Jh.async,vI,(function(e){var t=e.store,n=e.result;return mI(mI({},n),{data:hI(hI([],pI(t.mailingList.data.data),!1),pI(n.data),!1)})})),Br()("dialogueActive","networkStatus",Dh.async,vI,(function(e){return e.result})),Br()("dialogueActive","networkStatus",Uh.async,vI,(function(e){return e.result}));var gI=vI,yI=(0,bT.reducerWithInitialState)({discordRoles:{data:{list:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},telegramGroups:{data:{list:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});Br()("discordRoles","networkStatus",hE.async,yI,(function(e){return{list:e.result.list}})),Br()("telegramGroups","networkStatus",vE.async,yI,(function(e){return{list:e.result.list}}));var _I=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},EI=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},bI=(0,bT.reducerWithInitialState)({streamsList:{data:{isLast:!1,offset:null,streams:[]},blogsData:{},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});!function(e){e.withHandling(Wa(bE.async.started,(function(e,t){t.reset&&(e.streamsList.data={isLast:null,offset:null,streams:[]},e.streamsList.blogsData={}),e.streamsList.meta.networkStatus={isFetching:!0,isFetched:!1,error:null}}))),e.withHandling(Wa(bE.async.failed,(function(e,t){var n=t.error;e.streamsList.meta.networkStatus=kr(n)}))),e.withHandling(Wa(bE.async.done,(function(e,t){var n=t.params,r=t.result;e.streamsList.data={isLast:r.isLast,offset:r.isLast?null:r.offset,streams:null!=n.offset?EI(EI([],_I(e.streamsList.data.streams),!1),_I(r.data),!1):r.data},e.streamsList.blogsData=r.blogsData,e.streamsList.meta.networkStatus={isFetching:!1,isFetched:!0,error:null}}))),e.withHandling(Wa(TE,(function(e){e.streamsList={data:{isLast:!1,offset:null,streams:[]},blogsData:{},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})))}(bI);var SI=function(){return SI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},SI.apply(this,arguments)},TI=(0,bT.reducerWithInitialState)({gifts:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},currentGift:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},acceptGift:{data:{succeeded:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});Br()("currentGift","networkStatus",OE.async,TI,(function(e){return e.result})),Br()("gifts","networkStatus",AE.async,TI,(function(e){return e.result.data})),Br()("acceptGift","networkStatus",PE.async,TI,(function(e){return{succeeded:e.result.succeeded}})),TI.case(RE.async.done,(function(e,t){var n;return SI(SI({},e),{gifts:SI(SI({},e.gifts),{data:e.gifts.data.map((function(e){return e.key===t.result.key?t.result:e}))}),currentGift:SI(SI({},e.currentGift),{data:(null===(n=e.currentGift.data)||void 0===n?void 0:n.key)===t.result.key?t.result:e.currentGift.data})})})),TI.case(DE,(function(e){return SI(SI({},e),{acceptGift:{data:{succeeded:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})})),TI.case(kE,(function(e){return SI(SI({},e),{currentGift:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}));var II=(0,bT.reducerWithInitialState)({message:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},donation:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},gift:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},users:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},comments:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});Br()("donation","networkStatus",oE.async,II,(function(e){return e.result})),Br()("gift","networkStatus",aE.async,II,(function(e){return e.result})),Br()("users","networkStatus",iE.async,II,(function(e){return e.result.data})),Br()("comments","networkStatus",lE.async,II,(function(e){return e.result.data})),Br()("message","networkStatus",sE.async,II,(function(e){return e.result.data}));var NI=function(){return NI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},NI.apply(this,arguments)},CI=(0,bT.reducerWithInitialState)({uploads:{}}).case(WE.async.started,(function(e,t){var n=qa(e);return n.uploads[t.image.uploadId]={data:null,meta:{isFetching:!0,isFetched:!1,error:null},uploadData:t.image},n})).case(WE.async.done,(function(e,t){var n=qa(e);return n.uploads[t.params.image.uploadId]={data:t.result.image,meta:{isFetching:!1,isFetched:!0,error:null},uploadData:t.params.image},n})).case(WE.async.failed,(function(e,t){var n=qa(e);return n.uploads[t.params.image.uploadId]={data:null,meta:kr(t.error),uploadData:t.params.image},n})).case(VE,(function(e,t){if(!t.uploadsSucceeded.length)return e;var n=NI({},e);return t.uploadsSucceeded.forEach((function(e){delete n.uploads[e]})),n})),wI=(0,bT.reducerWithInitialState)({currentMediaId:null}).withHandling(Wa(BE,(function(e,t){var n=t.mediaId;e.currentMediaId=n}))).withHandling(Wa(xE,(function(e){e.currentMediaId=null}))),OI=(0,bT.reducerWithInitialState)({currentPopupId:null,currentPopupType:null}).withHandling(Wa(_S,(function(e,t){var n=t.popupId,r=t.popupType;e.currentPopupId=n,e.currentPopupType=r}))).withHandling(Wa(ES,(function(e){e.currentPopupId=null,e.currentPopupType=null}))),AI=function(){return AI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},AI.apply(this,arguments)},PI=nr().currencies,LI=function(){return{dmrPageUrl:{data:{url:null,paymentId:null,status:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},payWithExistingBind:{data:{status:null,paymentId:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},pollingCheck:{data:{successful:!1},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},paymentInfo:{data:{onTime:0,periodPayment:0,nextPayTime:0,additionalPayment:0},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},currency:{data:{defaultCurrency:PI.default},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}},RI=(0,bT.reducerWithInitialState)(LI());Br()("dmrPageUrl","networkStatus",JE.async,RI,(function(e){return{url:e.result.url,paymentId:e.result.paymentId,status:e.result.status}})).case(JE.async.started,(function(e){return AI(AI({},e),{dmrPageUrl:{data:AI(AI({},e.dmrPageUrl.data),{url:null}),meta:{networkStatus:{isFetching:!0,isFetched:!1,error:null}}}})})),Br()("payWithExistingBind","networkStatus",tb.async,RI,(function(e){return{paymentId:e.result.paymentId,status:e.result.status}})),Br()("pollingCheck","networkStatus",ZE.async,RI,(function(e){return{successful:e.result.successful}})),RI.case(nb,(function(e){return AI(AI({},LI()),{currency:e.currency})})),Br()("paymentInfo","networkStatus",ob.async,RI,(function(e){return e.result})),Br()("currency","networkStatus",Nv.async,RI,(function(e){return e.result}));var kI=function(e,t,n){var r,o=e[t].findIndex((function(e){return n(e)}));return-1===o&&ho.error("No comment found in publishingList of ".concat(t,", all comments: ").concat((r=e[t],JSON.stringify(r,void 0,2)))),o},DI=function(e){return Boolean(null==e?void 0:e.parentId)?null==e?void 0:e.parentId:null==e?void 0:e.intId},UI=function(e,t){var n=[],r=[];return e.forEach((function(e){wa(e)&&Boolean(t.find((function(t){return t.intId===e.publishedComment.intId})))?r.push(e):n.push(e)})),{newPublishingList:n,removedElements:r}},BI=function(){return BI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},BI.apply(this,arguments)},xI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},MI=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},FI=function(){return FI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},FI.apply(this,arguments)},GI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},HI=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},WI=function(){return WI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},WI.apply(this,arguments)},VI=function(){return VI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},VI.apply(this,arguments)},jI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},zI=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},YI=function(){return YI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},YI.apply(this,arguments)},KI=function(){return KI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},KI.apply(this,arguments)},qI=function(){return qI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qI.apply(this,arguments)},XI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},QI=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},JI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ZI=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},$I=function(e,t,n){var r=e.postsList.data.posts.findIndex((function(e){return e.id===t}));if(-1===r)return null;var o=e.postsList.data.posts[r];return o?Aa(o,e.postsList.meta.publishingCommentsList,(function(e){return e.id===n})):null},eN=function(e,t,n){var r,o;(null===(r=null==e?void 0:e.reacted)||void 0===r?void 0:r.actor)&&(e.reactions[e.reacted.actor]=e.reactions[e.reacted.actor]-1),n&&(e.reactions[n]=e.reactions[n]+1),e.reacted={actor:n,author:t?n:null===(o=null==e?void 0:e.reacted)||void 0===o?void 0:o.author}},tN=function(){return tN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tN.apply(this,arguments)},nN=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},rN=function(){return rN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rN.apply(this,arguments)},oN=function(){return oN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oN.apply(this,arguments)},aN=function(){return aN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},aN.apply(this,arguments)},iN=function(){return iN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},iN.apply(this,arguments)},lN=function(){return lN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lN.apply(this,arguments)},sN=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},cN=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},uN=(0,bT.reducerWithInitialState)({polls:{meta:{polls:{},voters:{},votes:{}}},postsList:{data:{isLast:!1,offset:null,posts:[]},blogsData:{},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},commentsNetworkStatus:{post:{},thread:{}},publishingCommentsList:{post:{},thread:{}},lastPostsListFetchContext:null,lastFetchFeedPostsParams:null,editCommentNetworkStatus:{},removePostNetworkStatus:{isFetching:!1,isFetched:!1,error:null},createPostNetworkStatus:{isFetching:!1,isFetched:!1,error:null},updatePostNetworkStatus:{isFetching:!1,isFetched:!1,error:null},deferredAccessNetworkStatus:{isFetching:!1,isFetched:!1,error:null},commentsViewMeta:{lastCommentPageTypeVisited:null,postIdsToRefetch:[]},justRemovedComments:{}}},feedCounters:{data:null},postsSearch:{data:{searchPosts:[],offset:null,isLast:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},currentBlogPostsTags:{data:{tags:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},mainFeedPostTags:{data:{tags:[],extra:{offset:null,isLast:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},currentPost:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},postDrafts:{data:{postDrafts:[],activeBlogPostDraft:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},newPostId:null,isCurrentUserTouchedFeedFilter:!1,lastActivePostId:null,postDonationsNetworkStatuses:{}});!function(e){e.withHandling(Wa(T_.async.started,(function(e,t){var n=t.postId,r=t.commentData,o=t.replyComment,a=t.publishTimestamp,i=!o,l=i?e.postsList.meta.publishingCommentsList.post:e.postsList.meta.publishingCommentsList.thread,s=i?n:DI(o);l[s]||(l[s]=[]),l[s].push({commentData:r,replyComment:o,status:qe.LOADING,publishTimestamp:a})}))).withHandling(Wa(T_.async.done,(function(e,t){var n,r=t.result,o=t.params,a=r.post.id,i=e.postsList.data.posts.findIndex((function(e){return e.id===a}));(n=e.postsList.data.posts[i]).count.comments=n.count.comments+1;var l,s,c,u,d,f,m=!o.replyComment;l=m?e.postsList.meta.publishingCommentsList.post:e.postsList.meta.publishingCommentsList.thread,s=m?a:DI(o.replyComment),c=o,u=r,d=kI(l,s,(function(e){return e.publishTimestamp===c.publishTimestamp})),(f=l[s][d]).status=qe.SUCCESS,f.publishedComment=u}))).withHandling(Wa(T_.async.failed,(function(e,t){var n=t.params,r=!n.replyComment;!function(e,t,n){var r=kI(e,t,(function(e){return e.publishTimestamp===n.publishTimestamp}));e[t][r].status=qe.ERROR}(r?e.postsList.meta.publishingCommentsList.post:e.postsList.meta.publishingCommentsList.thread,r?n.postId:DI(n.replyComment),n)}))).withHandling(Wa(M_,(function(e,t){var n=t.postId,r=t.parentId,o=t.publishTimestamp,a=!r,i=a?e.postsList.meta.publishingCommentsList.post:e.postsList.meta.publishingCommentsList.thread,l=a?n:r;!function(e,t,n){e[t].splice(n,1)}(i,l,kI(i,l,(function(e){return e.publishTimestamp===o})))})))}(uN),function(e){e.withHandling(Wa(j_.async.started,(function(e,t){var n=t.postId,r=t.threadComments;r?e.postsList.meta.commentsNetworkStatus.thread[r.parentId]={isFetching:!0,isFetched:!1,error:null}:e.postsList.meta.commentsNetworkStatus.post[n]={isFetching:!0,isFetched:!1,error:null}}))).withHandling(Wa(j_.async.done,(function(e,t){var n,r,o,a,i,l=t.result,s=l.data,c=l.postId,u=l.extra,d=t.params,f=e.postsList.data.posts,m=f.findIndex((function(e){return e.id===c})),p=f[m];if(d.threadComments){e.postsList.meta.commentsNetworkStatus.thread[d.threadComments.parentId]={isFetching:!1,isFetched:!0,error:null};var h=e.postsList.data.posts[m].comments.data.find((function(e){return e.intId===d.threadComments.parentId}));if(h){var v=(g="later"===d.threadComments.nextCommentsDirection)?Ma(h.replies.data,s,"intId"):Ma(s,h.replies.data,"intId");h.replies.data=v,g?(h.replies.extra.isFirst=u.isFirst,(null===(r=null===(n=e.postsList.meta.publishingCommentsList)||void 0===n?void 0:n.thread)||void 0===r?void 0:r[d.threadComments.parentId])&&(e.postsList.meta.publishingCommentsList.thread[d.threadComments.parentId]=UI(e.postsList.meta.publishingCommentsList.thread[d.threadComments.parentId],s).newPublishingList)):h.replies.extra.isLast=u.isLast}}else if(e.postsList.meta.commentsNetworkStatus.post[c]={isFetching:!1,isFetched:!0,error:null},d.replace)e.postsList.data.posts[m].comments.data.forEach((function(t){var n=t.intId;e.postsList.meta.publishingCommentsList.thread[n]&&(e.postsList.meta.publishingCommentsList.thread[n]=e.postsList.meta.publishingCommentsList.thread[n].filter((function(e){return e.status===qe.LOADING})))})),e.postsList.meta.publishingCommentsList.post[c]=null===(o=e.postsList.meta.publishingCommentsList.post[c])||void 0===o?void 0:o.filter((function(e){return e.status===qe.LOADING})),e.postsList.data.posts[m].comments.data=s,e.postsList.data.posts[m].comments.extra.isFirst=u.isFirst,e.postsList.data.posts[m].comments.extra.isLast=u.isLast;else{var g;if(v=(g="later"===d.rootComments.nextCommentsDirection)?Ma(p.comments.data,s,"intId"):Ma(s,p.comments.data,"intId"),e.postsList.data.posts[m].comments.data=v,g){if(e.postsList.data.posts[m].comments.extra.isFirst=u.isFirst,null===(i=null===(a=e.postsList.meta.publishingCommentsList)||void 0===a?void 0:a.post)||void 0===i?void 0:i[c]){var y=UI(e.postsList.meta.publishingCommentsList.post[c],s),_=y.newPublishingList,E=y.removedElements;e.postsList.meta.publishingCommentsList.post[c]=_,E.forEach((function(t){e.postsList.meta.publishingCommentsList.thread[t.publishedComment.intId]=void 0}))}}else e.postsList.data.posts[m].comments.extra.isLast=u.isLast}}))).withHandling(Wa(j_.async.failed,(function(e,t){var n=t.params.postId,r=t.error,o=t.params;o.threadComments?e.postsList.meta.commentsNetworkStatus.thread[o.threadComments.parentId]=kr(r):e.postsList.meta.commentsNetworkStatus.post[n]=kr(r)})))}(uN),function(e){Br()("postsList","deferredAccessNetworkStatus",P_.async,e,(function(e){var t=e.store,n=e.result,r=e.params;return{posts:t.postsList.data.posts.map((function(e){return e.id===r.postId?BI(BI({},e),{deferredAccessLevel:n}):e}))}}))}(uN),function(e){e.case(f_,(function(e,t){var n=t.postId;return FI(FI({},e),{newPostId:n})}))}(uN),function(e){e.withHandling(Wa(__.async.started,(function(e,t){var n=t.postId,r=t.reaction;e.postsList.data.posts=e.postsList.data.posts.map((function(e){var t;if(e.id===n){var o=e.count.reactions;(null===(t=null==e?void 0:e.reacted)||void 0===t?void 0:t.actor)&&(o[e.reacted.actor]=o[e.reacted.actor]-1),o[r]=o[r]+1,e.reacted={actor:r}}return e})),e.postsSearch.data.searchPosts=e.postsSearch.data.searchPosts.map((function(e){var t;if(e.post.id===n){var o=e.post.count.reactions;(null===(t=null==e?void 0:e.post.reacted)||void 0===t?void 0:t.actor)&&(o[e.post.reacted.actor]=o[e.post.reacted.actor]-1),o[r]=o[r]+1,e.post.reacted={actor:r}}return e}))}))),e.withHandling(Wa(__.async.failed,(function(e,t){var n=t.params,r=n.postId,o=n.reaction;e.postsList.data.posts.forEach((function(e){e.id===r&&(e.count.reactions[o]=e.count.reactions[o]-1,e.reacted.actor=null)}))}))),e.withHandling(Wa(E_.async.started,(function(e,t){var n=t.postId;e.postsList.data.posts=e.postsList.data.posts.map((function(e){if(e.id===n){var t=e.reacted.actor;e.count.reactions[t]=e.count.reactions[t]-1,e.reacted.actor=null,e.reacted.author=null}return e})),e.postsSearch.data.searchPosts=e.postsSearch.data.searchPosts.map((function(e){if(e.post.id===n){var t=e.post.reacted.actor;e.post.count.reactions[t]=e.post.count.reactions[t]-1,e.post.reacted.actor=null,e.post.reacted.author=null}return e}))})))}(uN),function(e){Br()("postDrafts","networkStatus",k_.async,e,(function(e){var t=e.store,n=e.result;return e.params,KI(KI({},t.postDrafts.data),{postDrafts:n.postDrafts.sort((function(e,t){return t.updatedAt-e.updatedAt}))})}))}(uN),function(e){Br()("postDrafts","networkStatus",D_.async,e,(function(e){var t=e.store,n=e.params,r=t.postDrafts.data.postDrafts.find((function(e){return e.key.hash===n.blogPostDraft.key.hash}))||{},o=VI(VI({},r),n.blogPostDraft),a=t.postDrafts.data.postDrafts.filter((function(e){return e!==r}));return VI(VI({},t.postDrafts.data),{postDrafts:zI([o],jI(a),!1),activeBlogPostDraft:o})}))}(uN),function(e){Br()("postDrafts","networkStatus",U_.async,e,(function(e){var t,n=e.store,r=e.params;return WI(WI({},n.postDrafts.data),{postDrafts:n.postDrafts.data.postDrafts.filter((function(e){return e.key.hash!==r.blogPostDraft.key.hash})),activeBlogPostDraft:(null===(t=n.postDrafts.data.activeBlogPostDraft)||void 0===t?void 0:t.key.hash)===r.blogPostDraft.key.hash?null:n.postDrafts.data.activeBlogPostDraft})}))}(uN),function(e){Br()("postDrafts","networkStatus",B_.async,e,(function(e){var t=e.store,n=e.params;return YI(YI({},t.postDrafts.data),{activeBlogPostDraft:n.blogPostDraft?t.postDrafts.data.postDrafts.find((function(e){return e.key.hash===n.blogPostDraft.key.hash})):null})}))}(uN),function(e){Br()("postsList","networkStatus",Am.async,e,(function(e){var t=e.store,n=e.result,r=e.params;return{isLast:n.isLast,offset:n.isLast?t.postsList.data.offset:n.offset,posts:null!=r.offset?QI(QI([],XI(t.postsList.data.posts),!1),XI(n.data),!1):n.data,blogUrl:r.blogUrl}}),{setMetaStarted:function(){return{lastPostsListFetchContext:"blog"}}}),Br()("postsList","networkStatus",Cv.async,e,(function(e){var t=e.store,n=e.result.blogPost;return qI(qI({},t.postsList.data),{offset:null,posts:[n]})}),{setMetaStarted:function(){return{lastPostsListFetchContext:"post"}}}),Br()("postsSearch","networkStatus",fb.async,e,(function(e){var t=e.store,n=e.result;return qI(qI({},t.postsSearch.data),{searchPosts:n.data,offset:n.offset,isLast:n.isLast})})),Br()("currentPost","networkStatus",G_.async,e,(function(e){return e.store,e.result.blogPost})),Br()("postsList","removePostNetworkStatus",g_.async,e,(function(e){var t=e.store,n=(e.result,e.params);return qI(qI({},t.postsList.data),{posts:t.postsList.data.posts.filter((function(e){return e.id!==n.postId}))})})),Br()("postsList","updatePostNetworkStatus",v_.async,e,(function(e){var t=e.store,n=e.result;return qI(qI({},t.postsList.data),{posts:Xr(t.postsList.data.posts.map((function(e){return e.id===n.blogPost.id?qI(qI({},n.blogPost),{comments:e.comments}):e})))})})),Br()("postsList","createPostNetworkStatus",h_.async,e,(function(e){var t=e.store,n=e.result;return qI(qI({},t.postsList.data),{posts:Xr(QI([n.blogPost],XI(t.postsList.data.posts),!1))})})),e.withHandling(Wa(mb,(function(e){e.postsSearch.data={searchPosts:[],isLast:null,offset:null}}))),e.withHandling(Wa(X_.async.started,(function(e,t){t.reset&&(e.postsList.data={isLast:null,offset:null,posts:[]},e.postsList.blogsData={}),e.postsList.meta.lastPostsListFetchContext="feed",e.postsList.meta.lastPostsListFetchUserId=t.userId,e.postsList.meta.lastFetchFeedPostsParams=t,e.postsList.meta.networkStatus={isFetching:!0,isFetched:!1,error:null}}))),e.withHandling(Wa(X_.async.failed,(function(e,t){var n=t.error;e.postsList.meta.networkStatus=kr(n)}))),e.withHandling(Wa(X_.async.done,(function(e,t){var n=t.params,r=t.result;e.postsList.data={isLast:r.isLast,offset:r.isLast?null:r.offset,posts:null!=n.offset?QI(QI([],XI(e.postsList.data.posts),!1),XI(r.data),!1):r.data},r.counters&&(n.filter.isOnlyAllowedPosts||n.filter.isOnlyPaidPosts)&&!n.offset&&(e.feedCounters.data=r.counters),e.postsList.blogsData=r.blogsData,e.postsList.meta.networkStatus={isFetching:!1,isFetched:!0,error:null}}))),e.withHandling(Wa(H_.async.done,(function(e,t){var n,r,o=t.result,a=t.params,i=null===(n=e.postsList)||void 0===n?void 0:n.data.posts.findIndex((function(e){return e.id===a.postId}));if(i>-1){var l=null===(r=e.postsList)||void 0===r?void 0:r.data.posts[i].comments;e.postsList.data.posts[i]=qI(qI({},o.blogPost),{comments:l})}}))),e.withHandling(Wa($_,(function(e){e.feedCounters.data=null}))),e.withHandling(Wa(x_,(function(e){e.postsList.meta.lastFetchFeedPostsParams=null})))}(uN),function(e){Br()("currentBlogPostsTags","networkStatus",oy.async,e,(function(e){return e.store,{tags:e.result.data}}))}(uN),function(e){e.withHandling(Wa(Q_.async.started,(function(e,t){t.resetOffset&&(e.mainFeedPostTags.data.tags=[]),e.mainFeedPostTags.meta.networkStatus={isFetching:!0,isFetched:!1,error:null}}))),e.withHandling(Wa(Q_.async.failed,(function(e,t){var n=t.error;e.mainFeedPostTags.meta.networkStatus=kr(n)}))),e.withHandling(Wa(Q_.async.done,(function(e,t){var n=t.result,r=t.params;e.mainFeedPostTags.meta.networkStatus={isFetching:!1,isFetched:!0,error:null},e.mainFeedPostTags.data.extra.offset=n.offset,e.mainFeedPostTags.data.extra.isLast=n.isLast,r.resetOffset?e.mainFeedPostTags.data.tags=n.data:e.mainFeedPostTags.data.tags=ZI(ZI([],JI(e.mainFeedPostTags.data.tags||[]),!1),JI(n.data),!1)})))}(uN),function(e){e.withHandling(Wa(C_.async.started,(function(e,t){var n=t.postId,r=t.commentId,o=t.reaction,a=t.isOwner,i=$I(e,n,r);i&&eN(i,a,o)}))),e.withHandling(Wa(C_.async.failed,(function(e,t){var n=t.params,r=n.postId,o=n.commentId,a=n.reaction,i=n.isOwner,l=$I(e,r,o);l&&(l.reacted={actor:null,author:i?null:l.reacted.author},l.reactions[a]=l.reactions[a]-1)}))),e.withHandling(Wa(w_.async.started,(function(e,t){var n=t.postId,r=t.commentId,o=t.isOwner,a=$I(e,n,r);eN(a,o,null)})))}(uN),function(e){e.case(O_,(function(e,t){var n=t.postId,r=t.commentId,o=e.postsList.data.posts.map((function(e){return e.id===n?tN(tN({},e),{comments:tN(tN({},e.comments),{data:e.comments.data.filter((function(e){return e.id!==r}))})}):e}));return tN(tN({},e),{posts:tN(tN({},e.postsList),{data:tN(tN({},e.postsList.data),{posts:o})})})}))}(uN),function(e){e.case(A_.async.done,(function(e,t){var n=t.params.postId,r=t.result,o=e.postsList.data.posts.map((function(e){if(e.id===n){var t=e.comments.data.map((function(e){return e.intId===r.intId?aN(aN({},e),{data:r.data,isDeleted:!1,isRemoved:!1}):Ca(r)&&r.parentId===e.intId?aN(aN({},e),{replies:aN(aN({},e.replies),{data:e.replies.data.map((function(e){return e.intId===r.intId?aN(aN({},e),{data:r.data,isDeleted:!1,isRemoved:!1}):e}))})}):e}));return aN(aN({},e),{comments:aN(aN({},e.comments),{data:t}),count:aN(aN({},e.count),{comments:e.count.comments+1})})}return e}));return aN(aN({},e),{posts:aN(aN({},e.postsList),{data:aN(aN({},e.postsList.data),{posts:o})})})}))}(uN),function(e){e.case(py,(function(e,t){return iN(iN({},e),{isCurrentUserTouchedFeedFilter:t})}))}(uN),function(e){e.case(m_,(function(e,t){var n=t.postId;return lN(lN({},e),{posts:lN(lN({},e.postsList),{data:lN(lN({},e.postsList.data),{posts:cN([],sN(e.postsList.data.posts.map((function(e){return e.id===n?(e.isPublished=!0,lN({},e)):e}))),!1)})})})}))}(uN),function(e){e.withHandling(Wa(z_,(function(e,t){var n,r,o,a,i,l=t.postId;if(l){var s=e.postsList.data.posts.findIndex((function(e){return e.id===l}));if(-1===s)return;var c=e.postsList.data.posts[s];(null===(n=e.postsList.meta.publishingCommentsList.post)||void 0===n?void 0:n[l])&&(c.comments.data.forEach((function(t){e.postsList.meta.publishingCommentsList.thread[t.intId]&&(e.postsList.meta.publishingCommentsList.thread[t.intId]=void 0)})),e.postsList.meta.publishingCommentsList.post[l].forEach((function(t){wa(t)&&e.postsList.meta.publishingCommentsList.thread[t.publishedComment.intId]&&(e.postsList.meta.publishingCommentsList.thread[t.publishedComment.intId]=void 0)}))),e.postsList.meta.commentsNetworkStatus.post[l]={isFetching:!1,isFetched:!1,error:null},c.comments.data.forEach((function(t){e.postsList.meta.commentsNetworkStatus.thread[t.intId]&&(e.postsList.meta.commentsNetworkStatus.thread[t.intId]={isFetching:!1,isFetched:!1,error:null})})),null===(a=null===(o=null===(r=e.postsList.meta.publishingCommentsList)||void 0===r?void 0:r.post)||void 0===o?void 0:o[l])||void 0===a||a.forEach((function(t){wa(t)&&e.postsList.meta.commentsNetworkStatus.thread[t.publishedComment.intId]&&(e.postsList.meta.commentsNetworkStatus.thread[t.publishedComment.intId]={isFetching:!1,isFetched:!1,error:null})})),(null===(i=e.postsList.meta.publishingCommentsList.post)||void 0===i?void 0:i[l])&&(e.postsList.meta.publishingCommentsList.post[l]=void 0),c.comments={data:[],extra:{isFirst:!0,isLast:!0}}}else e.postsList.meta.publishingCommentsList={post:{},thread:{}}})))}(uN),function(e){e.withHandling(Wa(Y_,(function(e,t){var n=t.postId;e.lastActivePostId=n})))}(uN),function(e){e.withHandling(Wa(I_.async.started,(function(e,t){var n=t.originalComment;e.postsList.meta.editCommentNetworkStatus[n.intId]={isFetching:!0,isFetched:!1,error:null}}))).withHandling(Wa(I_.async.done,(function(e,t){var n=t.result,r=t.params,o=r.postId,a=r.originalComment,i=e.postsList.data.posts;e.postsList.meta.editCommentNetworkStatus[a.intId]={isFetching:!1,isFetched:!0,error:null};var l=i.find((function(e){return e.id===o}));if(l){var s=Aa(l,e.postsList.meta.publishingCommentsList,(function(e){return e.intId===a.intId}));s&&(s.data=n.data,s.updatedAt=n.createdAt,s.isUpdated=!0)}}))).withHandling(Wa(I_.async.failed,(function(e,t){var n=t.params.originalComment,r=t.error;e.postsList.meta.editCommentNetworkStatus[n.intId]=kr(r)})))}(uN),function(e){e.case(Z_,(function(e){return rN(rN({},e),{postsList:{data:{isLast:!1,offset:null,posts:[],blogUrl:null},blogsData:{},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},commentsNetworkStatus:{post:{},thread:{}},editCommentNetworkStatus:{},publishingCommentsList:{post:{},thread:{}},lastFetchFeedPostsParams:null,lastPostsListFetchContext:null,removePostNetworkStatus:{isFetching:!1,isFetched:!1,error:null},createPostNetworkStatus:{isFetching:!1,isFetched:!1,error:null},updatePostNetworkStatus:{isFetching:!1,isFetched:!1,error:null},deferredAccessNetworkStatus:{isFetching:!1,isFetched:!1,error:null},justRemovedComments:{},commentsViewMeta:{lastCommentPageTypeVisited:null,postIdsToRefetch:[]}}}})}))}(uN),function(e){e.case(J_,(function(e){return oN(oN({},e),{postsTags:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}))}(uN),function(e){e.withHandling(Wa(K_,(function(e,t){var n=t.type,r=t.postIds;e.postsList.meta.commentsViewMeta={lastCommentPageTypeVisited:n,postIdsToRefetch:r}})))}(uN),function(e){e.withHandling(Wa(N_.async.done,(function(e,t){var n=t.params,r=n.commentId,o=n.postId;e.postsList.meta.justRemovedComments[o]=nN(nN([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(e.postsList.meta.justRemovedComments[o]||[]),!1),[r],!1);var a=e.postsList.data.posts.find((function(e){return e.id===o}));if(a){var i=Aa(a,e.postsList.meta.publishingCommentsList,(function(e){return e.id===r}));i.isDeleted=!0,a.count.comments=a.count.comments-1}e.postsList.meta.commentsViewMeta.postIdsToRefetch.includes(o)||e.postsList.meta.commentsViewMeta.postIdsToRefetch.push(o)}))),e.withHandling(Wa(A_.async.done,(function(e,t){var n=t.params,r=n.commentId,o=n.postId;e.postsList.meta.justRemovedComments[o]&&(e.postsList.meta.justRemovedComments[o]=e.postsList.meta.justRemovedComments[o].filter((function(e){return e!==r})),0===e.postsList.meta.justRemovedComments[o].length&&(e.postsList.meta.commentsViewMeta.postIdsToRefetch=e.postsList.meta.commentsViewMeta.postIdsToRefetch.filter((function(e){return e!==o}))));var a=e.postsList.data.posts.find((function(e){return e.id===o}));if(a){var i=Aa(a,e.postsList.meta.publishingCommentsList,(function(e){return e.id===r}));i.isDeleted=!1}a.count.comments=a.count.comments+1}))),e.withHandling(Wa(p_,(function(e){e.postsList.meta.justRemovedComments={}})))}(uN),function(e){e.withHandling(Wa(y_,(function(e,t){var n,r,o,a=t.postId,i=nr().comments,l=i.feedLimit,s=i.feedRepliesLimit,c=e.postsList.data.posts.find((function(e){return e.id===a}));if(c){(null===(n=e.postsList.meta.publishingCommentsList)||void 0===n?void 0:n.post[a])&&(e.postsList.meta.publishingCommentsList.post[a]=e.postsList.meta.publishingCommentsList.post[a].filter((function(e){return e.status!==qe.ERROR})));var u=(null===(o=null===(r=e.postsList.meta.publishingCommentsList)||void 0===r?void 0:r.post[a])||void 0===o?void 0:o.length)||0;c.comments.data.length+u>l&&(c.comments.extra.isLast=!1,u>=l?(c.comments.data=[],e.postsList.meta.publishingCommentsList.post[a]=e.postsList.meta.publishingCommentsList.post[a].slice(-l)):c.comments.data=c.comments.data.slice(-(l-u)));var d=function(t){var n,r,o,a,i=(null===(r=null===(n=e.postsList.meta.publishingCommentsList)||void 0===n?void 0:n.thread[t.intId])||void 0===r?void 0:r.length)||0;((null===(a=null===(o=t.replies)||void 0===o?void 0:o.data)||void 0===a?void 0:a.length)||0)+i>s&&(t.replies.extra.isLast=!1,i>=s?(t.replies.data=[],e.postsList.meta.publishingCommentsList.thread[t.intId]=e.postsList.meta.publishingCommentsList.thread[t.intId].slice(-s)):t.replies.data=t.replies.data.slice(-(s-i)))};c.comments.data.forEach((function(t){var n;(null===(n=e.postsList.meta.publishingCommentsList)||void 0===n?void 0:n.thread[t.intId])&&(e.postsList.meta.publishingCommentsList.thread[t.intId]=e.postsList.meta.publishingCommentsList.thread[t.intId].filter((function(e){return e.status!==qe.ERROR}))),d(t)})),u>0&&e.postsList.meta.publishingCommentsList.post[a].forEach((function(e){wa(e)&&d(e.publishedComment)}))}})))}(uN),function(e){e.withHandling(Wa(hy.async.started,(function(e,t){var n=t.postId;e.postDonationsNetworkStatuses[n]={isFetching:!0,isFetched:!1,error:null}}))).withHandling(Wa(hy.async.done,(function(e,t){var n,r=t.result,o=t.params;e.postDonationsNetworkStatuses[o.postId]={isFetching:!1,isFetched:!0,error:null};var a=null===(n=e.postsList.data)||void 0===n?void 0:n.posts.find((function(e){return e.int_id===o.postId}));a.donators.data=HI(HI([],GI(a.donators.data),!1),GI(r.data.donations),!1),a.donators.extra={isLast:a.donators.data.length<=r.extra.total,offset:r.extra.offset}}))).withHandling(Wa(hy.async.failed,(function(e,t){var n=t.params,r=t.error;e.postDonationsNetworkStatuses[n.postId]=kr(r)})))}(uN),function(e){e.withHandling(Wa(gy,(function(e,t){var n=t.intId,r=t.value,o=e.postsList.data.posts.find((function(e){var t=e.int_id;return n===t}));o&&(o.donations+=r)})))}(uN),function(e){e.withHandling(Wa(fS.async.started,(function(e,t){var n=t.pollId;e.polls.meta.polls[n]={isFetching:!0,isFetched:!1,error:null}}))).withHandling(Wa(fS.async.done,(function(e,t){var n=t.result.data.poll,r=t.params.pollId,o=e.postsList.data.posts.find((function(e){var t;return(null===(t=null==e?void 0:e.poll)||void 0===t?void 0:t.id)===r}));o.poll=n,e.polls.meta.polls[r]={isFetching:!1,isFetched:!0,error:null}}))).withHandling(Wa(fS.async.failed,(function(e,t){var n=t.params.pollId,r=t.error;e.polls.meta.polls[n]=kr(r)})))}(uN),function(e){e.withHandling(Wa(hS.async.started,(function(e,t){var n=t.pollId;e.polls.meta.votes[n]={isFetching:!0,isFetched:!1,error:null}}))).withHandling(Wa(hS.async.done,(function(e,t){t.result;var n=t.params.pollId;e.polls.meta.votes[n]={isFetching:!1,isFetched:!0,error:null}}))).withHandling(Wa(hS.async.failed,(function(e,t){var n=t.params.pollId,r=t.error;e.polls.meta.votes[n]=kr(r)})))}(uN),function(e){e.withHandling(Wa(vS.async.started,(function(e,t){var n=t.pollId;e.polls.meta.votes[n]={isFetching:!0,isFetched:!1,error:null}}))).withHandling(Wa(vS.async.done,(function(e,t){t.result;var n=t.params.pollId;e.polls.meta.votes[n]={isFetching:!1,isFetched:!0,error:null}}))).withHandling(Wa(vS.async.failed,(function(e,t){var n=t.params.pollId,r=t.error;e.polls.meta.votes[n]=kr(r)})))}(uN),function(e){e.withHandling(Wa(pS.async.started,(function(e,t){var n=t.pollId,r=t.option;e.polls.meta.voters[n]||(e.polls.meta.voters[n]={}),e.polls.meta.voters[n][r]={isFetching:!0,isFetched:!1,error:null}}))).withHandling(Wa(pS.async.done,(function(e,t){var n=t.result,r=n.data.voters,o=n.extra,a=t.params,i=a.pollId,l=a.option,s=e.postsList.data.posts.find((function(e){var t;return(null===(t=null==e?void 0:e.poll)||void 0===t?void 0:t.id)===i})),c=s.poll.options.find((function(e){return e.id===l}));c.voters={data:{voters:MI(MI([],xI(c.voters.data.voters),!1),xI(r),!1)},extra:o},e.polls.meta.voters[i][l]={isFetching:!1,isFetched:!0,error:null}}))).withHandling(Wa(pS.async.failed,(function(e,t){var n=t.params,r=n.pollId,o=n.option,a=t.error;e.polls.meta.voters[r][o]=kr(a)})))}(uN),function(e){e.withHandling(Wa(gS,(function(e,t){var n=t.pollId,r=e.postsList.data.posts.find((function(e){var t;return(null===(t=null==e?void 0:e.poll)||void 0===t?void 0:t.id)===n}));r.poll.isFinished=!0})))}(uN);var dN=function(){return dN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dN.apply(this,arguments)},fN=function(){return{promoListFilter:Ba,promotionsList:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},privatePromo:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},currentPromo:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}},mN=(0,bT.reducerWithInitialState)(fN()).withHandling(Wa(aS.async.done,(function(e,t){var n,r=t.result,o=null===(n=e.promotionsList.data)||void 0===n?void 0:n.list.find((function(e){return e.id===r.promo.id}));o&&(o.isFinished=r.promo.isFinished,o.count=r.promo.count,o.endTime=r.promo.endTime)}))).withHandling(Wa(lS,(function(e,t){e.promoListFilter=t})));Br()("promotionsList","networkStatus",rS.async,mN,(function(e){var t=e.result;return{list:t.data.promos,extra:dN(dN({},t.extra),{offset:parseInt(t.extra.offset)})}})),function(e){Br()("privatePromo","networkStatus",oS.async,e,(function(e){return e.result}))}(mN),function(e){Br()("currentPromo","networkStatus",iS.async,e,(function(e){return e.result.data}))}(mN);var pN=function(){return pN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pN.apply(this,arguments)},hN=(0,bT.reducerWithInitialState)({singlePaymentDmrPageUrl:{data:{url:null,paymentId:null,status:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},singlePaymentOnlyBindDmrPageUrl:{data:{url:null,paymentId:null,status:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},pollingCheck:{data:{status:!1},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});Br()("singlePaymentDmrPageUrl","networkStatus",yb.async,hN,(function(e){var t=e.result;return{url:t.url,paymentId:t.paymentId,status:t.status}})),Br()("singlePaymentOnlyBindDmrPageUrl","networkStatus",_b.async,hN,(function(e){var t=e.result;return{url:t.url,paymentId:t.paymentId,status:t.status}})).case(_b.async.started,(function(e){return pN(pN({},e),{singlePaymentOnlyBindDmrPageUrl:{data:pN(pN({},e.singlePaymentOnlyBindDmrPageUrl.data),{url:null}),meta:{networkStatus:{isFetching:!0,isFetched:!1,error:null}}}})})),Br()("pollingCheck","networkStatus",ZE.async,hN,(function(e){return{status:e.result.successful}}));var vN=hN,gN=(0,bT.reducerWithInitialState)({smileSet:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},smileData:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});!function(e){Br()("smileSet","networkStatus",Lv.async,e,(function(e){return{smiles:e.result}}))}(gN),function(e){Br()("smileData","networkStatus",xv.async,e,(function(e){return e.result}))}(gN);var yN=function(){return yN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yN.apply(this,arguments)},_N=function(){return _N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_N.apply(this,arguments)},EN=function(){return EN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},EN.apply(this,arguments)},bN=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},SN=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},TN=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},IN=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},NN=function(){return NN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},NN.apply(this,arguments)},CN=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},wN=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ON=function(){return ON=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ON.apply(this,arguments)},AN=function(){return AN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},AN.apply(this,arguments)},PN=function(){return PN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},PN.apply(this,arguments)},LN=function(){return LN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},LN.apply(this,arguments)},RN=function(){return RN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},RN.apply(this,arguments)},kN=function(){return kN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kN.apply(this,arguments)},DN=function(){return DN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},DN.apply(this,arguments)},UN=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},BN=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},xN=function(){return xN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xN.apply(this,arguments)},MN=function(){return MN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},MN.apply(this,arguments)},FN=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},GN=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},HN=function(){return HN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},HN.apply(this,arguments)},WN=function(){return WN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},WN.apply(this,arguments)},VN=function(){return VN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},VN.apply(this,arguments)},jN=function(){return jN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jN.apply(this,arguments)},zN=function(){return zN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zN.apply(this,arguments)},YN=function(){return YN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},YN.apply(this,arguments)},KN=function(){return KN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},KN.apply(this,arguments)},qN=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},XN=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},QN=function(){return QN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},QN.apply(this,arguments)},JN=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ZN=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},$N=function(){return $N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$N.apply(this,arguments)},eC=function(){return eC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},eC.apply(this,arguments)},tC=function(){return tC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tC.apply(this,arguments)},nC=function(){return nC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nC.apply(this,arguments)},rC=function(){return rC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rC.apply(this,arguments)},oC=function(){return oC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oC.apply(this,arguments)},aC=function(){return aC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},aC.apply(this,arguments)},iC=function(){return iC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},iC.apply(this,arguments)},lC=function(){return lC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lC.apply(this,arguments)},sC=function(){return sC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sC.apply(this,arguments)},cC=function(){return cC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cC.apply(this,arguments)},uC=function(){return uC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},uC.apply(this,arguments)},dC=function(){return dC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dC.apply(this,arguments)},fC=function(){return fC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fC.apply(this,arguments)},mC=function(){return mC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mC.apply(this,arguments)},pC=function(){return pC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pC.apply(this,arguments)},hC=function(){return hC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hC.apply(this,arguments)},vC=function(){return vC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vC.apply(this,arguments)},gC=(0,bT.reducerWithInitialState)({stream:{data:{stream:null,credentials:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createStreamNetworkStatus:{isFetching:!1,isFetched:!1,error:null},credentialsNetworkStatus:{isFetching:!1,isFetched:!1,error:null},updateStreamNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChat:{data:{banRemainingTime:null,isBanned:null,isBannedByStreamEnd:!1,isLast:!0,offset:0,data:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},chatSettingsNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamModerators:{data:{isLast:null,offset:0,data:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamUsers:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChatUsers:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChatUserStat:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChatMentions:[],streamStopWords:{data:{isLast:!0,offset:0,data:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChatUserSearchList:{data:{users:null,mentionedUser:null,activeIndexPopover:0},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChatFromWebSocket:[],streamChatIsPaused:!1});!function(e){Br()("streamChat","networkStatus",ap.async,e,(function(e){var t=e.store,n=e.result;return DN(DN(DN({},t.streamChat.data),n),{data:BN([],UN(n.data),!1)})}))}(gC),function(e){Br()("streamChat","networkStatus",zm.async,e,(function(e){var t=e.store,n=e.result,r=e.params;return PN(PN({},n),{data:t.streamChat.data.data.filter((function(e){return Ko(e)&&e.author.id!==r.userId}))})}))}(gC),function(e){e.case(bp,(function(e,t){var n=t.messageId;return tC(tC({},e),{streamChat:tC(tC({},e.streamChat),{data:tC(tC({},e.streamChat.data),{data:e.streamChat.data.data.filter((function(e){return Ko(e)&&e.id!==n}))})}),streamChatFromWebSocket:e.streamChatFromWebSocket.filter((function(e){return Ko(e)&&e.id!==n})),streamChatMentions:e.streamChatMentions.filter((function(e){return Ko(e)&&e.id!==n}))})}))}(gC),function(e){e.case(Sp,(function(e,t){var n=t.userId;return oC(oC({},e),{streamChat:oC(oC({},e.streamChat),{data:oC(oC({},e.streamChat.data),{data:e.streamChat.data.data.filter((function(e){return Ko(e)&&e.author.id!==n}))})})})}))}(gC),function(e){e.case(jm,(function(e,t){var n=t.userId;return ON(ON({},e),{streamChatFromWebSocket:e.streamChatFromWebSocket.filter((function(e){return Ko(e)&&e.user.id!==n}))})}))}(gC),function(e){e.withHandling(Wa(Ym,(function(e){e.streamChatFromWebSocket=[]})))}(gC),function(e){e.withHandling(Wa(Xm,(function(e){e.streamChat={data:{banRemainingTime:null,isBanned:null,isBannedByStreamEnd:!1,isLast:!0,offset:0,data:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},chatSettingsNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}}})))}(gC),function(e){e.withHandling(Wa(dp.async.done,(function(e){e.stream.data.stream=jN(jN({},e.stream.data.stream),{count:jN(jN({},e.stream.data.stream.count),{likes:e.stream.data.stream.count.likes+1}),isLiked:!0})})))}(gC),function(e){e.withHandling(Wa(Rp.async.done,(function(e){e.stream.data.stream=pC(pC({},e.stream.data.stream),{count:pC(pC({},e.stream.data.stream.count),{likes:e.stream.data.stream.count.likes-1}),isLiked:!1})})))}(gC),function(e){e.case(np.async.done,(function(e,t){var n=t.result;return HN(HN({},e),{stream:{data:HN(HN({},e.stream.data),{stream:n}),meta:HN(HN({},e.stream.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null}})}})})),e.case(np.async.failed,(function(e,t){var n=t.error;return HN(HN({},e),{stream:{data:HN(HN({},e.stream.data),{stream:null}),meta:HN(HN({},e.stream.meta),{networkStatus:kr(n)})},streamChat:{data:HN(HN({},e.streamChat.data),{chatSettings:null}),meta:HN(HN({},e.streamChat.meta),{chatSettingsNetworkStatus:kr(n)})}})}))}(gC),function(e){Br()("stream","createStreamNetworkStatus",Jm.async,e,(function(e){var t=e.store,n=e.result;return kN(kN({},t.stream.data),{stream:n})}))}(gC),function(e){Br()("stream","updateStreamNetworkStatus",Dp.async,e,(function(e){var t=e.store,n=e.result;return vC(vC({},t.stream.data),{stream:n})}))}(gC),function(e){Br()("stream","networkStatus",_p.async,e,(function(e){var t=e.store;return $N($N({},t.stream.data),{stream:null})}))}(gC),function(e){Br()("stream","credentialsNetworkStatus",rp.async,e,(function(e){var t=e.store,n=e.result;return WN(WN({},t.stream.data),{credentials:n})}))}(gC),function(e){Br()("streamModerators","networkStatus",$m.async,e,(function(e){var t=e.store,n=e.result;return MN(MN({},t.streamModerators.data),n)}))}(gC),function(e){Br()("streamModerators","networkStatus",Dm.async,e,(function(e){var t=e.store,n=e.result;return EN(EN({},t.streamModerators.data),{data:SN(SN([],bN(t.streamModerators.data.data),!1),[n],!1)})}))}(gC),function(e){Br()("streamModerators","networkStatus",vp.async,e,(function(e){var t=e.store,n=(e.result,e.params);return KN(KN({},t.streamModerators.data),{data:XN([],qN(t.streamModerators.data.data.filter((function(e){return e.id!==n.userId}))),!1)})}))}(gC),function(e){Br()("streamStopWords","networkStatus",tp.async,e,(function(e){var t=e.store,n=e.result,r=e.params;return{isLast:n.isLast,offset:n.isLast?t.streamStopWords.data.offset:n.offset,data:null!=r.offset?GN(GN([],FN(t.streamStopWords.data.data),!1),FN(n.data),!1):n.data}}))}(gC),function(e){Br()("streamStopWords","networkStatus",Bm.async,e,(function(e){var t=e.store,n=(e.result,e.params);return NN(NN({},t.streamStopWords.data),{data:wN(wN([],CN(t.streamStopWords.data.data),!1),[n.word],!1)})}))}(gC),function(e){Br()("streamStopWords","networkStatus",gp.async,e,(function(e){var t=e.store,n=(e.result,e.params);return QN(QN({},t.streamStopWords.data),{data:ZN([],JN(t.streamStopWords.data.data.filter((function(e){return e!==n.word}))),!1)})}))}(gC),function(e){Br()("streamUsers","networkStatus",Mm.async,e,(function(e){var t,n=e.store,r=e.result,o=e.params;return VN(VN({},n.streamUsers.data),((t={})[o.userId]=r,t))}))}(gC),function(e){Br()("streamUsers","networkStatus",Lp.async,e,(function(e){var t,n=e.store,r=e.result,o=e.params;return mC(mC({},n.streamUsers.data),((t={})[o.userId]=r,t))}))}(gC),function(e){e.case(yp,(function(e){return aC(aC({},e),{stream:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},credentialsNetworkStatus:{isFetching:!1,isFetched:!1,error:null},createStreamNetworkStatus:{isFetching:!1,isFetched:!1,error:null},updateStreamNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}))}(gC),function(e){e.case(qm,(function(e){return RN(RN({},e),{stream:RN(RN({},e.stream),{data:{stream:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},credentialsNetworkStatus:{isFetching:!1,isFetched:!1,error:null},createStreamNetworkStatus:{isFetching:!1,isFetched:!1,error:null},updateStreamNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}})})}))}(gC),function(e){e.case(Ap,(function(e,t){var n=t.viewers;return cC(cC({},e),{stream:cC(cC({},e.stream),{data:cC(cC({},e.stream.data),{stream:cC(cC({},e.stream.data.stream),{count:cC(cC({},e.stream.data.stream.count),{viewers:n})})})})})}))}(gC),function(e){e.case(Pp,(function(e,t){var n=t.streamLikesCounter;return fC(fC({},e),{stream:fC(fC({},e.stream),{data:fC(fC({},e.stream.data),{stream:fC(fC({},e.stream.data.stream),{count:fC(fC({},e.stream.data.stream.count),{likes:n})})})})})}))}(gC),function(e){e.case(Wm,(function(e,t){var n=t.isOnline;return yN(yN({},e),{stream:yN(yN({},e.stream),{data:yN(yN({},e.stream.data),{stream:yN(yN({},e.stream.data.stream),{isOnline:n})})})})}))}(gC),function(e){e.case(fp,(function(e){return zN(zN({},e),{stream:zN(zN({},e.stream),{data:zN(zN({},e.stream.data),{stream:zN(zN({},e.stream.data.stream),{isEnded:!0,isOnline:!1,endTime:Number(new Date)/1e3})})})})}))}(gC),function(e){e.case(kp,(function(e,t){var n=t.isBanned,r=t.blogId,o=t.ownerId,a=t.remainingTime,i=void 0===a?null:a,l=t.isByStream,s=void 0!==l&&l;return o!==r?e:hC(hC({},e),{streamChat:hC(hC({},e.streamChat),{data:hC(hC({},e.streamChat.data),{banRemainingTime:i,isBanned:n,isBannedByStreamEnd:s})})})}))}(gC),function(e){Br()("streamChatUsers","networkStatus",ip.async,e,(function(e){return e.result}))}(gC),function(e){e.case(lp,(function(e){return uC(uC({},e),{streamChatUsers:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}))}(gC),function(e){Br()("streamChatUserStat","networkStatus",sp.async,e,(function(e){return e.result}))}(gC),function(e){e.case(cp,(function(e){return dC(dC({},e),{streamChatUserStat:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}))}(gC),function(e){Br()("streamChatUserSearchList","networkStatus",up.async,e,(function(e){var t=e.store,n=e.result;return xN(xN({},t.streamChatUserSearchList.data),{users:n.data.users})}))}(gC),function(e){e.case(xm,(function(e,t){var n=t.user;return _N(_N({},e),{streamChatUserSearchList:_N(_N({},e.streamChatUserSearchList),{data:_N(_N({},e.streamChatUserSearchList.data),{mentionedUser:n})})})}))}(gC),function(e){e.case(Ip,(function(e){return YN(YN({},e),{streamChatUserSearchList:YN(YN({},e.streamChatUserSearchList),{data:YN(YN({},e.streamChatUserSearchList.data),{mentionedUser:null})})})}))}(gC),function(e){e.case(Km,(function(e){return LN(LN({},e),{streamChatUserSearchList:{data:LN(LN({},e.streamChatUserSearchList.data),{users:null,activeIndexPopover:0}),meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}))}(gC),function(e){e.case(Op,(function(e,t){return sC(sC({},e),{stream:sC(sC({},e.stream),{data:sC(sC({},e.stream.data),{stream:sC(sC({},e.stream.data.stream),{isOnline:t.isOnline})})})})}))}(gC),function(e){e.case(Ep.async.done,(function(e,t){var n=t.params;return eC(eC({},e),{streamChat:eC(eC({},e.streamChat),{data:eC(eC({},e.streamChat.data),{data:e.streamChat.data.data.filter((function(e){return Ko(e)&&e.id!==n.messageId}))})}),streamChatFromWebSocket:e.streamChatFromWebSocket.filter((function(e){return Ko(e)&&e.id!==n.messageId})),streamChatMentions:e.streamChatMentions.filter((function(e){return Ko(e)&&e.id!==n.messageId}))})}))}(gC),function(e){e.case(Up,(function(e,t){return lC(lC({},e),{streamChatIsPaused:t})}))}(gC),function(e){e.withHandling(Wa(Um,(function(e,t){var n,o,a=t.messages,i=t.currentUserId,l=null===(o=null===(n=nr())||void 0===n?void 0:n.chat)||void 0===o?void 0:o.messagesStoreLimit,s=Qo(r.CHAT_STORE_LIMIT);a.forEach((function(t){if(Yo(t)){e.streamChatFromWebSocket=e.streamChatFromWebSocket.filter((function(e){return Ko(e)||Yo(t)&&e.type!==t.type}));var n=e.streamChatFromWebSocket[e.streamChatFromWebSocket.length-1],r=Yo(n)&&n.type===t.type;e.streamChatFromWebSocket=IN(IN([],TN(e.streamChatFromWebSocket),!1),TN(r?[]:[t]),!1)}else if(!e.streamChat.data.data.some((function(e){return Ko(e)&&e.id===t.id}))){var o=t.data.find((function(e){return e.type===pe.MENTION})),a=o&&o.id===i,c=o&&t.author.id===i;if((a||c)&&(e.streamChatMentions=IN(IN([],TN(e.streamChatMentions),!1),[t],!1)),s&&l&&!e.streamChatIsPaused){var u=e.streamChatFromWebSocket.length+e.streamChat.data.data.length;return e.streamChat.data.data=e.streamChat.data.data.slice(u>=l?1:0),void(e.streamChatFromWebSocket=IN(IN([],TN(e.streamChatFromWebSocket),!1),[t],!1).slice(-l))}e.streamChatFromWebSocket=IN(IN([],TN(e.streamChatFromWebSocket),!1),[t],!1)}}))})))}(gC),function(e){e.case(jm,(function(e,t){var n=t.userId;return rC(rC({},e),{streamChatFromWebSocket:e.streamChatFromWebSocket.filter((function(e){return Ko(e)&&e.user.id!==n}))})}))}(gC),function(e){e.case(Tp,(function(e,t){var n=t.userId;return nC(nC({},e),{streamChatMentions:e.streamChatMentions.filter((function(e){return Ko(e)&&e.user.id!==n}))})}))}(gC),function(e){e.case(Vm,(function(e){return AN(AN({},e),{streamChatMentions:[]})}))}(gC),function(e){e.case(wp,(function(e,t){var n=t.activeIndexPopover;return iC(iC({},e),{streamChatUserSearchList:iC(iC({},e.streamChatUserSearchList),{data:iC(iC({},e.streamChatUserSearchList.data),{activeIndexPopover:null!=n?n:0})})})}))}(gC);var yC=function(){return yC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yC.apply(this,arguments)},_C=(0,Qr.getTranslation)("@common/redux.reducers.SubscriptionLevelsReducer"),EC=(0,bT.reducerWithInitialState)({subscriptionLevels:{}});!function(e){e.withHandling(Wa(Eb.async.started,(function(e,t){e.subscriptionLevels[t.blogUrl]?e.subscriptionLevels[t.blogUrl].meta.networkStatus={isFetching:!0,isFetched:!1,error:null}:e.subscriptionLevels[t.blogUrl]={meta:{networkStatus:{isFetching:!0,isFetched:!1,error:null}},data:null}}))).withHandling(Wa(Eb.async.done,(function(e,t){var n=t.result,r=t.params;e.subscriptionLevels[r.blogUrl].data={levels:n.data.map((function(e){var t=n.subscriptions.find((function(t){return t.levelId===e.id}))||{levelId:e.id,offTime:null,nextPayTime:null,customPrice:null};return yC(yC(yC({},e),t),{name:0===e.price?_C.freeLevelName:e.name,isCurrent:e.id===n.currentId,isNext:e.id===n.nextId})}))},e.subscriptionLevels[r.blogUrl].meta.networkStatus={isFetching:!1,isFetched:!0,error:null}}))).withHandling(Wa(Eb.async.failed,(function(e,t){var n=t.error,r=t.params;e.subscriptionLevels[r.blogUrl].meta.networkStatus=kr(n)})))}(EC);var bC=function(){return bC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bC.apply(this,arguments)},SC=function(){return SC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},SC.apply(this,arguments)},TC=function(){return TC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},TC.apply(this,arguments)},IC=function(){return IC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},IC.apply(this,arguments)},NC=function(){return NC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},NC.apply(this,arguments)},CC=function(){return CC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},CC.apply(this,arguments)},wC=function(){return wC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wC.apply(this,arguments)},OC=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},AC=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},PC=function(){return PC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},PC.apply(this,arguments)},LC=function(){return LC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},LC.apply(this,arguments)},RC=function(){return RC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},RC.apply(this,arguments)},kC=(0,bT.reducerWithInitialState)({subscriptionLevel:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},subscriptionLevels:{data:{blogUrl:null,levels:[],subscriptions:[],currentLevelId:null,nextLevelId:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editNetworkStatus:{isFetching:!1,isFetched:!1,error:null},removeNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},subscriptions:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},limit:30,total:0,isLast:!0}},subscriptionsSettings:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},limit:30,total:0}}});!function(e){e.case(Mp.async.started,(function(e){return wC(wC({},e),{subscriptions:wC(wC({},e.subscriptions),{meta:wC(wC({},e.subscriptions.meta),{networkStatus:{isFetching:!0,isFetched:!1,error:null}})})})})).case(Mp.async.done,(function(e,t){var n=t.result.data,r=n.data,o=n.total,a=n.offset;return wC(wC({},e),{subscriptions:wC(wC({},e.subscriptions),{data:0===a?r:AC(AC([],OC(e.subscriptions.data),!1),OC(r),!1),meta:wC(wC({},e.subscriptions.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null},total:o,offset:a,isLast:(0===a?0:e.subscriptions.data.length)+r.length>=o})})})})).case(Mp.async.failed,(function(e,t){var n=t.error;return wC(wC({},e),{subscriptions:wC(wC({},e.subscriptions),{meta:wC(wC({},e.subscriptions.meta),{networkStatus:kr(n)})})})}))}(kC),function(e){Br()("subscriptionLevels","createNetworkStatus",Qp.async,e,(function(e){var t=e.store,n=e.result;return{levels:t.subscriptionLevels.data.levels.concat(n.level),currentLevelId:t.subscriptionLevels.data.currentLevelId}}))}(kC),function(e){e.case(Jp.async.started,(function(e){return TC(TC({},e),{subscriptionLevels:TC(TC({},e.subscriptionLevels),{meta:TC(TC({},e.subscriptionLevels.meta),{editNetworkStatus:{isFetching:!0,isFetched:!1,error:null}})})})})).case(Jp.async.done,(function(e,t){var n=t.result;return TC(TC({},e),{subscriptionLevels:TC(TC({},e.subscriptionLevels),{data:TC(TC({},e.subscriptionLevels.data),{levels:e.subscriptionLevels.data.levels.map((function(e){return e.id===n.level.id?n.level:e}))}),meta:TC(TC({},e.subscriptionLevels.meta),{editNetworkStatus:{isFetching:!1,isFetched:!0,error:null}})})})})).case(Jp.async.failed,(function(e,t){var n=t.error;return TC(TC({},e),{subscriptionLevels:TC(TC({},e.subscriptionLevels),{meta:TC(TC({},e.subscriptionLevels.meta),{editNetworkStatus:kr(n)})})})}))}(kC),function(e){e.case(Fp.async.started,(function(e){return IC(IC({},e),{subscriptionLevel:IC(IC({},e.subscriptionLevel),{meta:IC(IC({},e.subscriptionLevel.meta),{networkStatus:{isFetching:!0,isFetched:!1,error:null}})})})})).case(Fp.async.done,(function(e,t){var n=t.result;return IC(IC({},e),{subscriptionLevel:IC(IC({},e.subscriptionLevel),{data:n.level,meta:IC(IC({},e.subscriptionLevel.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null}})})})})).case(Fp.async.failed,(function(e,t){var n=t.error;return IC(IC({},e),{subscriptionLevel:IC(IC({},e.subscriptionLevel),{meta:IC(IC({},e.subscriptionLevel.meta),{networkStatus:kr(n)})})})}))}(kC),function(e){e.case(Wp.async.started,(function(e){return NC(NC({},e),{subscriptionLevels:NC(NC({},e.subscriptionLevels),{meta:NC(NC({},e.subscriptionLevels.meta),{networkStatus:{isFetching:!0,isFetched:!1,error:null}})})})})).case(Wp.async.done,(function(e,t){var n=t.result,r=t.params;return NC(NC({},e),{subscriptionLevels:NC(NC({},e.subscriptionLevels),{data:{blogUrl:r.blogUrl,levels:n.levels,subscriptions:[],currentLevelId:null,nextLevelId:null},meta:NC(NC({},e.subscriptionLevels.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null}})})})})).case(Wp.async.failed,(function(e,t){var n=t.error;return NC(NC({},e),{subscriptionLevels:NC(NC({},e.subscriptionLevels),{meta:NC(NC({},e.subscriptionLevels.meta),{networkStatus:kr(n)})})})}))}(kC),function(e){e.case(Zp.async.started,(function(e){return LC(LC({},e),{subscriptionLevels:LC(LC({},e.subscriptionLevels),{meta:LC(LC({},e.subscriptionLevels.meta),{removeNetworkStatus:{isFetching:!0,isFetched:!1,error:null}})})})})).case(Zp.async.done,(function(e,t){var n=t.params;return LC(LC({},e),{subscriptionLevels:LC(LC({},e.subscriptionLevels),{data:LC(LC({},e.subscriptionLevels.data),{levels:e.subscriptionLevels.data.levels.filter((function(e){return e.id!==n.levelId}))}),meta:LC(LC({},e.subscriptionLevels.meta),{removeNetworkStatus:{isFetching:!1,isFetched:!0,error:null}})})})})).case(Zp.async.failed,(function(e,t){var n=t.error;return LC(LC({},e),{subscriptionLevels:LC(LC({},e.subscriptionLevels),{meta:LC(LC({},e.subscriptionLevels.meta),{removeNetworkStatus:kr(n)})})})}))}(kC),function(e){e.case(qp.async.started,(function(e){return CC(CC({},e),{subscriptionLevels:CC(CC({},e.subscriptionLevels),{meta:CC(CC({},e.subscriptionLevels.meta),{networkStatus:{isFetching:!0,isFetched:!1,error:null}})})})})).case(qp.async.done,(function(e,t){var n=t.result,r=t.params;return CC(CC({},e),{subscriptionLevels:CC(CC({},e.subscriptionLevels),{data:{blogUrl:r.blogUrl,levels:n.subscriptionLevels,subscriptions:n.subscriptions,currentLevelId:n.currentLevelId,nextLevelId:n.nextLevelId},meta:CC(CC({},e.subscriptionLevels.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null}})})})})).case(qp.async.failed,(function(e,t){var n=t.error;return CC(CC({},e),{subscriptionLevels:CC(CC({},e.subscriptionLevels),{meta:CC(CC({},e.subscriptionLevels.meta),{networkStatus:kr(n)})})})}))}(kC),function(e){e.case($p,(function(e){return RC(RC({},e),{subscriptionLevels:{data:null,meta:{createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editNetworkStatus:{isFetching:!1,isFetched:!1,error:null},removeNetworkStatus:{isFetching:!1,isFetched:!1,error:null},networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}))}(kC),function(e,t){e.case(Yp,(function(){return SC({},t)}))}(kC,{subscriptionLevel:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},subscriptionLevels:{data:{blogUrl:null,levels:[],subscriptions:[],currentLevelId:null,nextLevelId:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editNetworkStatus:{isFetching:!1,isFetched:!1,error:null},removeNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},subscriptions:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},limit:30,total:0,isLast:!0}},subscriptionsSettings:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},limit:30,total:0}}}),function(e){e.case(Kp,(function(e){return bC(bC({},e),{subscriptionLevel:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}))}(kC),function(e){e.case(jp.async.started,(function(e){return PC(PC({},e),{subscriptionsSettings:PC(PC({},e.subscriptionsSettings),{meta:PC(PC({},e.subscriptionsSettings.meta),{networkStatus:{isFetching:!0,isFetched:!1,error:null}})})})})).case(jp.async.done,(function(e,t){var n=t.result;if(n){var r=n.data,o=r.data,a=r.total;return PC(PC({},e),{subscriptionsSettings:PC(PC({},e.subscriptionsSettings),{data:o,meta:PC(PC({},e.subscriptionsSettings.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null},total:a})})})}return e})).case(jp.async.failed,(function(e,t){var n=t.error;return PC(PC({},e),{subscriptionsSettings:PC(PC({},e.subscriptionsSettings),{meta:PC(PC({},e.subscriptionsSettings.meta),{networkStatus:kr(n)})})})}))}(kC);var DC=function(){return DC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},DC.apply(this,arguments)},UC=function(){return UC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},UC.apply(this,arguments)},BC=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},xC=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},MC=(0,bT.reducerWithInitialState)({targets:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},targetsAll:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}).case(fh,(function(e){return UC(UC({},e),{targets:UC(UC({},e.targets),{data:e.targets.data?e.targets.data.map((function(e){return e.type===Ye.MONEY?e:UC(UC({},e),{currentSum:e.currentSum<e.targetSum?e.currentSum+1:e.currentSum,finishTime:e.currentSum+1===e.targetSum?Date.now():0})})):null})})})).case(mh,(function(e){return UC(UC({},e),{targets:UC(UC({},e.targets),{data:e.targets.data?e.targets.data.map((function(e){return e.type===Ye.MONEY?e:UC(UC({},e),{currentSum:e.currentSum-1,finishTime:e.currentSum+1===e.targetSum?Date.now():0})})):null})})}));!function(e){e.case(hh,(function(e){return DC(DC({},e),{targets:{data:null,meta:DC(DC({},e.targets.meta),{networkStatus:{isFetching:!1,isFetched:!1,error:null}})}})}))}(MC),Br()("targets","networkStatus",oh.async,MC,(function(e){var t=e.result;return xC([],BC(t.data),!1)})),Br()("targetsAll","networkStatus",ih.async,MC,(function(e){var t=e.result;return xC([],BC(t.data),!1)})),Br()("targets","networkStatus",lh.async,MC,(function(e){var t=e.store,n=e.result;return xC(xC([],BC(t.targets.data),!1),[n.target],!1)})),Br()("targets","networkStatus",sh.async,MC,(function(e){var t=e.store,n=e.result;return xC(xC([],BC(t.targets.data),!1),[n.target],!1)})),Br()("targets","networkStatus",ch.async,MC,(function(e){var t=e.store,n=e.result;return xC([],BC(t.targets.data.map((function(e){return e.id===n.target.id?n.target:e}))),!1)})),Br()("targets","networkStatus",ah.async,MC,(function(e){var t=e.store,n=e.result;return t.targets.data.find((function(e){return e.id===n.target.id}))?t.targets.data.map((function(e){return e.id===n.target.id?UC(UC({},e),{selectedCurrencyCurrentSum:n.target.currentSum,selectedCurrencyTargetSum:n.target.targetSum}):e})):xC(xC([],BC(t.targets.data),!1),[n.target],!1)})),Br()("targets","networkStatus",uh.async,MC,(function(e){var t=e.store,n=e.params;return xC([],BC(t.targets.data.filter((function(e){return e.id!==n.id}))),!1)}));var FC,GC=function(){return GC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},GC.apply(this,arguments)},HC=(0,bT.reducerWithInitialState)({positions:{}}).case(TS,(function(e,t){var n=GC({},e),r=t.position,o=t.videoId;return n.positions[o]=r,n})),WC=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},VC=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},jC=function(){return jC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jC.apply(this,arguments)},zC=function(){return zC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zC.apply(this,arguments)},YC=function(){return YC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},YC.apply(this,arguments)},KC=WT,qC=function(){return YC(YC({},{blog:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editCoverNetworkStatus:{isFetching:!1,isFetched:!1,error:null},followNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogItem:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},rss:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}),{payoutHistory:{data:{history:[],offset:null,total:0},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},mediaAlbumList:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},mediaAlbumCounters:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})};!function(e){Br()("payoutHistory","networkStatus",IS.async,e,(function(e){e.store;var t=e.result;return{history:t.data,total:t.total,offset:t.offset}})),e.case(Yv.async.done,(function(e,t){return null===t.params.user?jC(jC({},e),{payoutHistory:jC(jC({},e.payoutHistory),{data:{history:[],offset:null,total:0},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}})}):e}))}(KC),FC=qC,KC.case(ry,FC),HT(KC),function(e){e.withHandling(Wa(RS.async.started,(function(e,t){var n,r;t.reset&&(null===(r=null===(n=e.mediaAlbumList.data)||void 0===n?void 0:n.data)||void 0===r?void 0:r.items)&&(e.mediaAlbumList.data.data.items=[]),e.mediaAlbumList.meta.networkStatus={isFetching:!0,isFetched:!1,error:null}}))).withHandling(Wa(RS.async.done,(function(e,t){var n=t.result,r=n.data,o=n.extra,a=t.params;e.mediaAlbumList.meta.networkStatus={isFetching:!1,isFetched:!0,error:null},e.mediaAlbumList.data||(e.mediaAlbumList.data={extra:null,data:{groupBy:a.groupBy,items:[]}}),e.mediaAlbumList.data.extra={isLast:o.isLast,offset:o.isLast?null:o.offset},e.mediaAlbumList.data.data.groupBy=a.groupBy,e.mediaAlbumList.data.data.items=VC(VC([],WC(e.mediaAlbumList.data.data.items||[]),!1),WC(r.items),!1)}))).withHandling(Wa(RS.async.failed,(function(e,t){var n=t.error;e.mediaAlbumList.meta.networkStatus=kr(n)}))).withHandling(Wa(DS,(function(e){e.mediaAlbumList={data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})))}(KC),function(e){Br()("mediaAlbumCounters","networkStatus",kS.async,e,(function(e){return zC({},e.result)})),e.case(US,(function(e){return zC(zC({},e),{mediaAlbumCounters:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}})}))}(KC);var XC=(0,bT.reducerWithInitialState)({categories:{data:{list:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},successStories:{data:{list:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});Br()("categories","networkStatus",GS.async,XC,(function(e){return{list:e.result.list}})),Br()("successStories","networkStatus",HS.async,XC,(function(e){return{list:e.result.list}}));var QC=(0,bT.reducerWithInitialState)({articles:{data:{articles:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},article:{data:{article:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}).case(YS,(function(){return{articles:{data:{articles:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},article:{data:{article:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}}));Br()("articles","networkStatus",KS.async,QC,(function(e){return{articles:e.result.articles}})),Br()("article","networkStatus",qS.async,QC,(function(e){return{article:e.result.article}}));var JC=function(){return JC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},JC.apply(this,arguments)},ZC=function(){var e;return{offers:(e={},e[at.USER_AGREEMENT]={en:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},ru:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},e[at.PAYMENT_TERMS]={en:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},ru:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},e[at.PRIVACY_POLICY]={en:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},ru:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},e[at.PRIVACY_POLICY_CHANGE_LIST]={en:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},ru:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},e[at.COOKIE_POLICY]={en:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},ru:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},e[at.REF_POLICY]={en:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},ru:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},e)}},$C=(0,bT.reducerWithInitialState)(ZC()).case(hT.async.started,(function(e,t){var n,r;return JC(JC({},e),{offers:JC(JC({},e.offers),(n={},n[t.offerType]=JC(JC({},e.offers[t.offerType]),(r={},r[t.lang]=JC(JC({},e.offers[t.offerType][t.lang]),{data:null,meta:{networkStatus:{isFetching:!0,isFetched:!1,error:null}}}),r)),n))})})).case(hT.async.done,(function(e,t){var n,r,o=t.params,a=t.result;return JC(JC({},e),{offers:JC(JC({},e.offers),(n={},n[o.offerType]=JC(JC({},e.offers[o.offerType]),(r={},r[o.lang]=JC(JC({},e.offers[o.offerType][o.lang]),{data:a.text,meta:{networkStatus:{isFetching:!1,isFetched:!0,error:null}}}),r)),n))})})).case(hT.async.failed,(function(e,t){var n,r,o=t.params,a=t.error;return JC(JC({},e),{offers:JC(JC({},e.offers),(n={},n[o.offerType]=JC(JC({},e.offers[o.offerType]),(r={},r[o.lang]=JC(JC({},e.offers[o.offerType][o.lang]),{data:null,meta:{networkStatus:kr(a)}}),r)),n))})})),ew=(0,bT.reducerWithInitialState)({payouts:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},updateNetworkStatus:{isFetching:!1,isFetched:!1,error:null},removeNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},cardFrame:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});Br()("cardFrame","networkStatus",$S.async,ew,(function(e){return e.result})),Br()("payouts","networkStatus",eT.async,ew,(function(e){return e.result.data})),Br()("payouts","createNetworkStatus",tT.async,ew,(function(e){return e.store,[e.result]})),Br()("payouts","updateNetworkStatus",nT.async,ew,(function(e){var t=e.store,n=e.result;return t.payouts.data.map((function(e){return e.id===n.id?n:e}))})),Br()("payouts","removeNetworkStatus",rT.async,ew,(function(e){var t=e.store,n=e.params;return t.payouts.data.filter((function(e){return e.id!==n.payoutId}))}));var tw=(0,bT.reducerWithInitialState)({externalApp:{data:{app:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}});Br()("externalApp","networkStatus",mT.async,tw,(function(e){return{app:e.result}}));var nw,rw=function(){return rw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rw.apply(this,arguments)},ow=(0,bT.reducerWithInitialState)({tutorialSubscriptionLevels:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},tutorialOffers:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}).case(sT.async.started,(function(e){return rw(rw({},e),{tutorialSubscriptionLevels:{meta:rw(rw({},e.tutorialSubscriptionLevels.meta),{networkStatus:{isFetching:!0,isFetched:!1,error:null}})}})})).case(sT.async.done,(function(e,t){var n=t.result.data;return rw(rw({},e),{tutorialSubscriptionLevels:{data:rw({},n),meta:rw(rw({},e.tutorialSubscriptionLevels.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null}})}})})).case(sT.async.failed,(function(e,t){var n=t.error;return rw(rw({},e),{subscriptionLevels:{meta:rw(rw({},e.tutorialSubscriptionLevels.meta),{networkStatus:kr(n)})}})})).case(cT.async.started,(function(e){return rw(rw({},e),{tutorialOffers:{meta:rw(rw({},e.tutorialSubscriptionLevels.meta),{networkStatus:{isFetching:!0,isFetched:!1,error:null}})}})})).case(cT.async.done,(function(e,t){var n=t.result.data;return rw(rw({},e),{tutorialOffers:{data:rw({},n),meta:rw(rw({},e.tutorialSubscriptionLevels.meta),{networkStatus:{isFetching:!1,isFetched:!0,error:null}})}})})).case(cT.async.failed,(function(e,t){var n=t.error;return rw(rw({},e),{tutorialOffers:{meta:rw(rw({},e.tutorialSubscriptionLevels.meta),{networkStatus:kr(n)})}})})),aw=function(){return aw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},aw.apply(this,arguments)},iw=(0,ET.UY)(aw(aw({},{agents:TT,blackList:RT,currentUser:lI,blog:WT,blogStat:qT,dialogue:gI,externalApps:yI,gift:TI,mediaData:CI,mediaPlayingState:wI,subscriptions:kC,target:MC,payment:RI,internal:II,currentPoll:JT,singlePayment:vN,smiles:gN,badges:AT,overlayPopupState:OI,promo:mN,stream:gC,posts:uN,feed:bI,subscriptionLevels:EC,video:HC}),{blog:KC,catalog:XC,doc:QC,payout:ew,tutorial:ow,offers:$C,singlePayment:vN,system:tw})),lw=function(e,t){return"SET_FULL_STATE"===t.type?iw(t.payload,t):iw(e,t)};try{nw=JSON.parse(Vo.decode(document.getElementById("initial-state").innerHTML))}catch(e){nw={}}var sw,cw,uw,dw,fw,mw,pw,hw,vw,gw,yw,_w=function(e){return e.agents.agents.data},Ew=function(e){return e.agents.agents.meta.networkStatus},bw=n(60985),Sw=function(e,t){return(null==t?void 0:t.post)||null},Tw=function(e){return e.posts.currentPost.data},Iw=function(e,t,n){return(null==e?void 0:e.find((function(e){return e.id===n})))||((null==t?void 0:t.id)===n?t:null)},Nw=function(e){return e.posts.postsList.meta.networkStatus},Cw=function(e){return e.posts.postsList.meta.lastFetchFeedPostsParams},ww=function(e){return e.posts.postsList.meta.publishingCommentsList},Ow=function(e){return e.posts.postsList.meta.editCommentNetworkStatus},Aw=function(e){return e.posts.postsList.meta.justRemovedComments||{}},Pw=function(e){return e.posts.postsList.meta.commentsViewMeta.lastCommentPageTypeVisited},Lw=function(e){return e.posts.postsList.meta.commentsViewMeta.postIdsToRefetch},Rw=(0,bw.P1)(Nw,(function(e){return e.isFetched})),kw=(0,bw.P1)((function(e){return e.posts.postsList.meta.createPostNetworkStatus}),(function(e){return e.isFetching})),Dw=(0,bw.P1)([function(e){return e.posts.postsList.meta.updatePostNetworkStatus},function(e){return e.posts.postsList.meta.removePostNetworkStatus}],(function(e,t){return e.isFetching||t.isFetching})),Uw=function(e){var t,n;return null!==(n=null===(t=e.posts.postsList.data)||void 0===t?void 0:t.posts)&&void 0!==n?n:[]},Bw=function(e){return e.posts.postsList.data.posts},xw=function(e){return e.posts.postsList.data.blogUrl},Mw=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.posts.postDrafts)||void 0===t?void 0:t.data)||void 0===n?void 0:n.postDrafts)&&void 0!==r?r:[]},Fw=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.posts.postDrafts)||void 0===t?void 0:t.data)||void 0===n?void 0:n.activeBlogPostDraft)&&void 0!==r?r:null},Gw=function(e){return e.posts.newPostId},Hw=function(e){return e.blog.blog.data},Ww=function(e){return e.blog.blog.meta.networkStatus},Vw=function(e){return e.blog.blog.meta.followNetworkStatus},jw=function(e){return e.blog.blog.meta.editNetworkStatus},zw=function(e){return e.blog.blog.meta.createNetworkStatus},Yw=function(e){return e.blog.blog.meta.editCoverNetworkStatus},Kw=(0,bw.P1)(Hw,(function(e){return null!=e?e.owner:null})),qw=(0,bw.P1)(Hw,(function(e){return null!=e?e.owner.name:null})),Xw=(0,bw.P1)(Hw,(function(e){return null!=e?e.owner.id:null})),Qw=(0,bw.P1)(Hw,(function(e){return null!=e&&e.category?e.category.mnemonic:null})),Jw=(0,bw.P1)(Hw,(function(e){return null!=e?e.thanksMsg:null})),Zw=(0,bw.P1)(Hw,(function(e){return null!=e&&Boolean(e.coverUrl)})),$w=(0,bw.P1)(Hw,(function(e){return null!=e&&e.description&&!ta(e.description)})),eO=(0,bw.P1)(Hw,(function(e){return null!=e&&!!e.title})),tO=(0,bw.P1)(jw,(function(e){return e.isFetching})),nO=(0,bw.P1)(Hw,(function(e){return null!=e&&e.blogUrl})),rO=(0,bw.P1)(Hw,(function(e){return e&&e.socialLinks.length>0})),oO=((0,bw.P1)(Hw,(function(e){return null!=e&&e.isOwner})),(0,bw.P1)(Hw,(function(e){return null!=e&&Boolean(e.isBlackListed)}))),aO=(0,bw.P1)(Hw,(function(e){return e&&(e.isReadOnly||e.isTotalBaned)})),iO=(0,bw.P1)(Hw,(function(e){return e&&e.isTotalBaned})),lO=(0,bw.P1)(Hw,(function(e){return e&&e.isReadOnly})),sO=(0,bw.P1)(Hw,(function(e){return e&&e.banDescription})),cO=(0,bw.P1)(Hw,(function(e){var t;return null!=e&&(null===(t=e.flags)||void 0===t?void 0:t.isRssFeedEnabled)})),uO=((0,bw.P1)(Hw,(function(e){return null!=e&&e.hasAdultContent})),function(e){return null!=e.blog&&e.blog.rss}),dO=(0,bw.P1)(Hw,(function(e){return null!=e&&e.count.posts>0})),fO=function(e){return e.blogStat.blogBase.data||{}},mO=function(e){return e.blogStat.blogBase.meta.networkStatus},pO=function(e){return e.blogStat.blogRefs.meta.networkStatus},hO=function(e){return e.blogStat.blogRefsUsers.data||{}},vO=function(e){return e.blogStat.blogRefsUsers.meta.networkStatus},gO=function(e){return e.blogStat.blogRefs.data||{}},yO=function(e){return e.blogStat.blogMetrics.data||{}},_O=function(e){return e.blogStat.blogMetrics.meta.networkStatus},EO=function(e){return e.blogStat.blogMetricsStatCharts.data||{}},bO=function(e){return e.blogStat.blogMetricsStatCharts.meta.networkStatus},SO=function(e){return e.blogStat.blogEvents.data},TO=function(e){return e.blogStat.blogEvents.meta.networkStatus},IO=function(e){return e.blogStat.blogSearchUsers.data},NO=function(e){return e.blogStat.blogSearchUsers.meta.networkStatus},CO=function(e){return e.blogStat.blogHolds.data.data.holds},wO=function(e){return e.blogStat.blogHolds.data.extra},OO=function(e){return e.blogStat.blogHolds.meta.networkStatus},AO=function(e){return e.blogStat.blogSubscribers.data.list},PO=function(e){return e.blogStat.blogSubscribers.data.total},LO=function(e){return e.blogStat.blogSubscribers.meta.networkStatus},RO=function(e){return e.blogStat.blogDonations.data},kO=function(e){return e.blogStat.blogDonations.meta.networkStatus},DO=function(e){return e.blogStat.postSales.data||{}},UO=function(e){return e.blogStat.postSales.meta.networkStatus},BO=function(e){return e.blogStat.postSalesByDate.data||{}},xO=function(e){return e.blogStat.postSalesByDate.meta.networkStatus},MO=function(e){return e.blogStat.postSalesDaysByMonth.data||{}},FO=function(e){return e.blogStat.postSalesDaysByMonth.meta.networkStatus},GO=function(e){return e.blogStat.broadcastMessageStats.data||{}},HO=function(e){return e.blogStat.broadcastMessageStats.meta.networkStatus},WO=function(e){return e.blogStat.reports.data},VO=function(e){return e.blogStat.reports.meta.networkStatus},jO=function(e){return e.payment.paymentInfo.data},zO=function(e){return e.payment.paymentInfo.meta.networkStatus},YO=function(e){return e.payment.dmrPageUrl.data.url},KO=function(e){return e.payment.dmrPageUrl.data.paymentId},qO=function(e){return e.payment.payWithExistingBind.data.paymentId},XO=function(e){var t;return null===(t=e.currentUser.user)||void 0===t?void 0:t.data},QO=(0,bw.P1)(XO,(function(e){return e.recaptcha.data})),JO=((0,bw.P1)(QO,(function(e){return e.success})),(0,bw.P1)(XO,(function(e){return null==e?void 0:e.blogUrl}))),ZO=(0,bw.P1)(XO,(function(e){return null!=e&&e.hasAvatar})),$O=(0,bw.P1)(XO,(function(e){return null!=e&&e.hasPayout})),eA=(0,bw.P1)(XO,(function(e){return null!=e&&e.externalApps&&e.externalApps.telegram&&e.externalApps.telegram.hasAccount})),tA=(0,bw.P1)(XO,(function(e){return null!=e&&e.externalApps&&e.externalApps.telegram&&e.externalApps.telegram.loginUrl})),nA=(0,bw.P1)(XO,(function(e){return null!=e&&e.externalApps&&e.externalApps.telegram&&e.externalApps.telegram.username})),rA=(0,bw.P1)(XO,(function(e){return null!=e&&e.externalApps&&e.externalApps.discord&&e.externalApps.discord.hasAccount})),oA=(0,bw.P1)(XO,(function(e){return null!=e&&e.externalApps&&e.externalApps.discord&&e.externalApps.discord.username})),aA=(0,bw.P1)(XO,(function(e){return null!=e&&e.externalApps&&e.externalApps.discord&&e.externalApps.discord.hasServer})),iA=(0,bw.P1)(XO,(function(e){return null!=e&&e.externalApps&&e.externalApps.discord&&e.externalApps.discord.serverName})),lA=(0,bw.P1)(XO,(function(e){return null!=e&&e.isTestUser})),sA=function(e){return e.currentUser.user.meta.networkStatus},cA=function(e){return e.currentUser.user.meta.acceptRefPolicyNetworkStatus},uA=function(e){return e.currentUser.paymentBinds.data.list},dA=function(e){return e.currentUser.paymentBinds.data.extra},fA=function(e){return e.currentUser.paymentBinds.meta.networkStatus},mA=function(e){return e.currentUser.user.meta.fetchTelegramLoginUrlNetworkStatus},pA=function(e){var t;return null===(t=e.currentUser.phone)||void 0===t?void 0:t.data},hA=function(e){return e.currentUser.phone.meta.networkStatus},vA=function(e){var t,n;return null===(n=null===(t=e.currentUser.phone)||void 0===t?void 0:t.data)||void 0===n?void 0:n.refPhone},gA=function(e){return e.currentUser.phone.meta.refPhoneNetworkStatus},yA=function(e){var t;return null===(t=e.currentUser.notifications)||void 0===t?void 0:t.data},_A=function(e){return e.currentUser.notifications.meta.networkStatus},EA=(0,bw.P1)(XO,(function(e){return e.payment.currency.data.defaultCurrency}),(function(e,t){return(null==e?void 0:e.defaultCurrency)||t})),bA=(0,bw.P1)((function(e){return e.currentUser}),EA,(function(e,t){return(null==e?void 0:e.selectedCurrency)||t})),SA=function(e){return e.currentUser.notificationSettings.data},TA=function(e){return e.currentUser.notificationSettings.meta.networkStatus},IA=function(e){var t;return null===(t=e.currentUser)||void 0===t?void 0:t.marketingAlerts.data},NA=function(e){var t;return null===(t=e.currentUser)||void 0===t?void 0:t.marketingAlerts.meta.networkStatus},CA=function(e){return e.currentUser.user.meta.uploadAvatarNetworkStatus},wA=function(e){return e.currentUser.infoMessages.data},OA=function(e){return e.currentUser.infoMessages.meta.networkStatus},AA=(0,bw.P1)(XO,(function(e){return!!e})),PA=(0,bw.P1)(Hw,AA,(function(e,t){var n;return t&&(null===(n=null==e?void 0:e.accessRights)||void 0===n?void 0:n.canView)})),LA=(0,bw.P1)(Hw,AA,(function(e,t){var n;return t&&(null===(n=null==e?void 0:e.accessRights)||void 0===n?void 0:n.canEdit)})),RA=((0,bw.P1)(Hw,AA,(function(e,t){var n;return t&&(null===(n=null==e?void 0:e.accessRights)||void 0===n?void 0:n.canCreate)})),(0,bw.P1)(Hw,AA,(function(e,t){var n;return t&&(null===(n=null==e?void 0:e.accessRights)||void 0===n?void 0:n.canCreateComments)}))),kA=(0,bw.P1)(Hw,AA,(function(e,t){var n;return t&&(null===(n=null==e?void 0:e.accessRights)||void 0===n?void 0:n.canDeleteComments)})),DA=(0,bw.P1)(Hw,AA,(function(e,t){var n;return t&&(null===(n=null==e?void 0:e.accessRights)||void 0===n?void 0:n.canSetPayout)})),UA=(0,bw.P1)(XO,AA,(function(e,t){return t&&e.isBlogger})),BA=((0,bw.P1)(XO,AA,(function(e,t){return t&&e.isStreamer})),(0,bw.P1)(XO,AA,(function(e,t){return t&&e.isModerator}))),xA=function(e,t){return t&&(e.isReadOnly||e.isTotalBaned)},MA=(0,bw.P1)(XO,AA,xA),FA=(0,bw.P1)(Hw,(function(e){return null==e?void 0:e.isBlackListed})),GA=(0,bw.P1)(XO,AA,(function(e,t){return t&&e.isTotalBaned})),HA=(0,bw.P1)(Hw,XO,AA,(function(e,t,n){var r;return n&&((null==e?void 0:e.isOwner)||(null===(r=null==e?void 0:e.owner)||void 0===r?void 0:r.id)===t.id)})),WA=(0,bw.P1)(LA,DA,BA,GA,(function(e,t,n,r){return e&&!t&&!n&&!r})),VA=function(e,t){return t&&Boolean(null==e?void 0:e.hasAccess)},jA=((0,bw.P1)(AA,HA,WA,(function(e,t,n){return e&&!t&&!n})),(0,bw.P1)(HA,WA,(function(e,t){return!e&&!t})),function(e,t){return e||t}),zA=function(e,t){return e&&!t},YA=function(e,t,n){return e&&!t&&!n},KA=function(e,t){return e&&t},qA=function(e,t){return e||t},XA=function(e,t,n){return e&&!t&&!n},QA=function(e,t){return e&&t},JA=function(e,t){return e&&!t},ZA=function(e,t){return!e||e&&t},$A=((0,bw.P1)(UA,LA,ZA),(0,bw.P1)(Sw,AA,VA)),eP=(0,bw.P1)(Sw,AA,(function(e,t){return t&&e&&!e.isCommentsDenied})),tP=(0,bw.P1)((function(e,t){return(null==t?void 0:t.comment)||null}),Hw,XO,AA,WA,(function(e,t,n,r,o){var a,i,l;return r&&(n.id===(null===(a=null==e?void 0:e.author)||void 0===a?void 0:a.id)||o&&(null===(i=null==e?void 0:e.author)||void 0===i?void 0:i.id)===(null===(l=null==t?void 0:t.owner)||void 0===l?void 0:l.id))})),nP=(0,bw.P1)($A,PA,jA),rP=((0,bw.P1)($A,MA,zA),(0,bw.P1)($A,MA,FA,YA),(0,bw.P1)($A,HA,WA,(function(e,t,n){return e&&!(t||n)})),(0,bw.P1)(aO,$A,eP,HA,WA,MA,GA,RA,FA,(function(e,t,n,r,o,a,i,l,s){return(!r&&!o&&l||(r||o&&!e)&&!a||t&&!a&&n)&&!s}))),oP=((0,bw.P1)(tP,rP,KA),(0,bw.P1)(tP,kA,qA),(0,bw.P1)(nP,MA,FA,XA),(0,bw.P1)(nP,FA,QA),(0,bw.P1)(nP,tP,JA),(0,bw.P1)(HA,WA,tP,(function(e,t,n){return(e||t)&&!n})),function(e){return e.promo}),aP=(0,bw.P1)(oP,(function(e){var t;return null===(t=e.promotionsList.data)||void 0===t?void 0:t.list})),iP=(0,bw.P1)(oP,(function(e){var t;return null===(t=e.promotionsList.data)||void 0===t?void 0:t.extra})),lP=(0,bw.P1)(oP,(function(e){return e.promoListFilter})),sP=(0,bw.P1)(oP,(function(e){return e.promotionsList.meta.networkStatus})),cP=function(e){return e.promo.privatePromo.data},uP=function(e){return e.promo.privatePromo.meta.networkStatus},dP=function(e){return e.dialogue.isNeedUpdate},fP=function(e){return e.dialogue.recipientsCount.data},mP=function(e){var t;return null===(t=e.dialogue)||void 0===t?void 0:t.dialogueActive.data},pP=function(e){var t,n;return null===(n=null===(t=e.dialogue)||void 0===t?void 0:t.dialogueActive.data)||void 0===n?void 0:n.id},hP=function(e){var t,n,r;return null===(r=null===(n=null===(t=e.dialogue)||void 0===t?void 0:t.dialogueActive)||void 0===n?void 0:n.data)||void 0===r?void 0:r.relation},vP=function(e){var t,n,r;return null===(r=null===(n=null===(t=e.dialogue)||void 0===t?void 0:t.dialogueActive)||void 0===n?void 0:n.data)||void 0===r?void 0:r.chatmate.id},gP=function(e){var t,n;return null===(n=null===(t=e.dialogue)||void 0===t?void 0:t.dialogueActive.data)||void 0===n?void 0:n.chatmate.url},yP=function(e){var t,n;return null===(n=null===(t=e.dialogue)||void 0===t?void 0:t.dialogueActive.data)||void 0===n?void 0:n.chatmate.name},_P=function(e){var t,n,r,o;return null===(o=null===(r=null===(n=null===(t=e.dialogue)||void 0===t?void 0:t.dialogueActive)||void 0===n?void 0:n.data)||void 0===r?void 0:r.messages)||void 0===o?void 0:o.data},EP=function(e){var t;return null===(t=e.dialogue)||void 0===t?void 0:t.dialogueActive.meta.networkStatus},bP=function(e){var t;return null===(t=e.dialogue)||void 0===t?void 0:t.messageDonation},SP=function(e){return e.dialogue.chatMateSubscriptionLevels.data},TP=function(e){return e.dialogue.chatMateSubscriptionLevels.data.levels},IP=function(e,t){return e.find((function(e){return e.id===t}))},NP=function(e){return e.dialogue.chatMateSubscriptionLevels.meta.networkStatus},CP=function(e){return e.dialogue.dialogues.data.data},wP=function(e){return e.dialogue.dialogues.data.extra},OP=function(e){return e.dialogue.dialogues.meta.networkStatus},AP=function(e){return e.dialogue.contacts.data.data},PP=function(e){return e.dialogue.contacts.data.extra},LP=function(e){return e.dialogue.contacts.meta.networkStatus},RP=function(e){return e.dialogue.mailingList.data.data},kP=function(e){return e.dialogue.mailingList.data.extra},DP=function(e){return e.dialogue.mailingList.meta.networkStatus},UP=function(e){return e.dialogue.messages.data.data},BP=function(e,t){return null==e?void 0:e.find((function(e){return e.id===t}))},xP=function(e){var t;return null===(t=e.dialogue.canWriteDonationMessage.data)||void 0===t?void 0:t.canWrite},MP=function(){return MP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},MP.apply(this,arguments)},FP=function(e){return e.feed.streamsList.data},GP=(0,bw.P1)([function(e){return e.posts.postsList.blogsData},function(e){return e.feed.streamsList.blogsData}],(function(e,t){return MP(MP({},t),e)})),HP=function(e){return e.feed.streamsList.meta.networkStatus},WP=function(e){var t;return null===(t=e.posts.feedCounters.data)||void 0===t?void 0:t.newNotAllowedPosts},VP=function(e){return e.mediaPlayingState.currentMediaId},jP=function(e){return e.stream.streamModerators.data},zP=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.stream.stream)||void 0===t?void 0:t.data)||void 0===n?void 0:n.stream)&&void 0!==r?r:null},YP=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.stream.stream)||void 0===t?void 0:t.data)||void 0===n?void 0:n.credentials)&&void 0!==r?r:null},KP=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.stream.stream)||void 0===t?void 0:t.meta)||void 0===n?void 0:n.networkStatus)&&void 0!==r?r:null},qP=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.stream.stream)||void 0===t?void 0:t.meta)||void 0===n?void 0:n.credentialsNetworkStatus)&&void 0!==r?r:null},XP=function(e){return e.stream.streamStopWords.data},QP=function(e){return e.stream.streamUsers.data},JP=function(e){return e.stream.streamUsers.meta.networkStatus},ZP=((0,bw.P1)(JP,(function(e){return e.isFetched})),(0,bw.P1)(JP,(function(e){return!e.isFetched}))),$P=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.stream.streamChatUsers)||void 0===t?void 0:t.data)||void 0===n?void 0:n.data)&&void 0!==r?r:null},eL=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.stream.streamChatUsers)||void 0===t?void 0:t.data)||void 0===n?void 0:n.searchQuery)&&void 0!==r?r:null},tL=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.stream.streamChatUsers)||void 0===t?void 0:t.meta)||void 0===n?void 0:n.networkStatus)&&void 0!==r?r:null},nL=function(e){return e.stream.streamChatUserStat.data},rL=function(e){return e.stream.streamChatUserStat.meta.networkStatus},oL=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},aL=function(e){return e.subscriptions.subscriptions.data||[]},iL=function(e){return e.subscriptions.subscriptions.meta.networkStatus},lL=function(e){return e.subscriptions.subscriptions.meta.isLast},sL=(0,bw.P1)(aL,(function(e){return e.reduce((function(e,t){return e.some((function(e){return t.ownerId===e.ownerId}))?e:oL(oL([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(e),!1),[t],!1)}),[])})),cL=function(e){return e.subscriptions.subscriptionLevel.data},uL=function(e){return e.subscriptions.subscriptionLevel.meta.networkStatus},dL=function(){return dL=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dL.apply(this,arguments)},fL=(0,Qr.getTranslation)("@common/redux.selectors.SubscriptionLevelsSelectors"),mL=function(e){return e.subscriptions.subscriptionLevels.data},pL=(0,bw.P1)(mL,(function(e){var t=null==e?void 0:e.currentLevelId,n=null==e?void 0:e.levels,r=null==n?void 0:n.find((function(e){return e.id===t}));return(null==r?void 0:r.price)>0?r:null})),hL=(0,bw.P1)(mL,(function(e){return null==e?void 0:e.blogUrl})),vL=(0,bw.P1)(mL,(function(e){return null==e?void 0:e.currentLevelId})),gL=(0,bw.P1)(mL,(function(e){return null==e?void 0:e.nextLevelId})),yL=(0,bw.P1)(mL,(function(e){return(null==e?void 0:e.subscriptions)||[]})),_L=(0,bw.P1)(mL,(function(e){return(null==e?void 0:e.levels)||[]})),EL=(0,bw.P1)([mL,vL,gL,yL],(function(e,t,n,r){return e?e.levels.map((function(e){return 0===e.price?dL(dL({},e),{name:fL.freeLevelName}):e})).map((function(e){var o=r.find((function(t){return t.levelId===e.id}))||{levelId:e.id,offTime:null,nextPayTime:null,customPrice:null};return dL(dL(dL({},e),o),{isCurrent:e.id===t,isNext:e.id===n})})):[]})),bL=(0,bw.P1)(EL,(function(e){return e.filter((function(e){return!e.deleted&&e.price>0}))})),SL=(0,bw.P1)([EL,vL],(function(e){return e.filter((function(e){return!e.deleted}))})),TL=(0,bw.P1)([SL,cL],(function(e,t){return e.filter((function(e){return t&&t.id!==e.id&&e.price>0}))})),IL=(0,bw.P1)(EL,(function(e){var t=e.filter((function(e){return!e.deleted&&e.price>0}));return t&&t[0]})),NL=function(e){return e.subscriptions.subscriptionLevels.meta.networkStatus},CL=function(e){return e.subscriptions.subscriptionLevels.meta.createNetworkStatus},wL=function(e){return e.subscriptions.subscriptionLevels.meta.editNetworkStatus},OL=(0,bw.P1)(mL,(function(e){return null!=e&&e.levels&&e.levels.length>1})),AL=(0,bw.P1)(EL,(function(e){return e.find((function(e){return e.isCurrent}))||null})),PL=((0,bw.P1)(EL,(function(e){return e.find((function(e){return e.isNext}))||null})),(0,bw.P1)(AL,(function(e){return e&&e.externalApps.telegram.isConfigured}))),LL=(0,bw.P1)(AL,(function(e){return e&&e.externalApps.discord.isConfigured})),RL=(0,bw.P1)(Hw,bL,(function(e,t){return(null==e?void 0:e.isSubscribed)&&!t.some((function(e){return e.isCurrent&&e.price>0}))})),kL=(0,bw.P1)(Hw,bL,(function(e,t){return(null==e?void 0:e.isSubscribed)&&t.some((function(e){return e.isCurrent&&e.price>0}))})),DL=function(e){return e.subscriptionLevels.subscriptionLevels},UL=function(e){return e.mediaData.uploads},BL=function(e){return e.currentPoll},xL=function(e){return e.blogStat.blogUnsubscribes},ML=function(e,t){return(null==t?void 0:t.pollId)||null},FL=function(e){return e.posts.polls.meta},GL=(0,bw.P1)(FL,ML,(function(e,t){return e.polls[t]})),HL=(0,bw.P1)(FL,ML,(function(e,t){return e.votes[t]})),WL=function(e){return e.singlePayment.singlePaymentOnlyBindDmrPageUrl.data.url},VL=function(e){return e.subscriptions.subscriptionsSettings.data||[]},jL=function(e){return e.subscriptions.subscriptionsSettings.meta.networkStatus},zL=function(e){var t=e.subscriptions.subscriptionsSettings,n=t.data,r=t.meta,o=r.limit,a=r.total;return n?Math.ceil(a/o):0},YL=function(e){return e.gift.gifts.data||[]},KL=function(e){return e.gift.gifts.meta.networkStatus},qL=function(e){return e.gift.currentGift.data},XL=function(e){return e.gift.currentGift.meta.networkStatus},QL=function(e){return e.gift.acceptGift.data.succeeded},JL=function(e){return e.gift.acceptGift.meta.networkStatus},ZL=function(e){return e.smiles.smileSet.data},$L=function(e){return e.smiles.smileSet.meta.networkStatus},eR=((0,bw.P1)(ZL,(function(e){return e?e.smiles.filter((function(e){var t,n;return 0===(null===(n=null===(t=null==e?void 0:e.access)||void 0===t?void 0:t.subscriptionLevel)||void 0===n?void 0:n.price)})):[]})),(0,bw.P1)([ZL,function(e,t){return t}],(function(e,t){return e?e.smiles.filter((function(e){var n,r;return(null===(r=null===(n=null==e?void 0:e.access)||void 0===n?void 0:n.subscriptionLevel)||void 0===r?void 0:r.price)<=t})):[]})),function(e){return e.posts.postDonationsNetworkStatuses}),tR=function(e){return e.stream.streamChat.data},nR=function(e){return e.stream.streamChat.meta.networkStatus},rR=(0,bw.P1)(tR,(function(e){return e.data||[]})),oR=(0,bw.P1)(tR,(function(e){return{banRemainingTime:e.banRemainingTime,isBanned:e.isBanned,isBannedByStreamEnd:e.isBannedByStreamEnd,isLast:e.isLast,offset:e.offset}})),aR=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.stream.streamChatUserSearchList)||void 0===t?void 0:t.data)||void 0===n?void 0:n.users)&&void 0!==r?r:null},iR=function(e){var t,n;return null!==(n=null===(t=e.stream.streamChatUserSearchList)||void 0===t?void 0:t.data.activeIndexPopover)&&void 0!==n?n:0},lR=function(e){return e.target.targetsAll.data},sR=function(e){return e.target.targetsAll.meta.networkStatus},cR=function(e){return e.target.targets.data},uR=function(e){return e.target.targets.meta.networkStatus},dR=(0,bw.P1)(cR,(function(e){return e&&e.length>0})),fR=function(e){return e.stream.streamChatMentions},mR=((0,bw.PW)((function(e){var t=e.currentUser.user.data;return t?e.stream.streamChatMentions.filter((function(e){return Ko(e)&&t.id!==e.author.id})):[]}),(function(e,t){return t.length===e.length})),function(e){return e.blackList.blackList.data}),pR=function(e){return e.blackList.blackList.meta.networkStatus},hR=function(e){return e.video.positions},vR=function(e){return e.blog.payoutHistory.data.total},gR=function(e){return e.blog.payoutHistory.data.history},yR=function(e){return e.blog.payoutHistory.meta.networkStatus},_R=function(e){return e.blog.mediaAlbumList.data},ER=function(e){return e.blog.mediaAlbumList.meta.networkStatus},bR=function(e){return e.blog.mediaAlbumCounters.data},SR=function(e){return e.blog.mediaAlbumCounters.meta.networkStatus},TR=function(e){return e.catalog.successStories.data.list},IR=function(e){return e.catalog.successStories.meta.networkStatus},NR=function(e){return e.externalApps.discordRoles.data.list},CR=function(e){return e.externalApps.discordRoles.meta.networkStatus},wR=function(e){return e.externalApps.telegramGroups.data.list},OR=function(e){return e.externalApps.telegramGroups.meta.networkStatus},AR=function(e){return e.payout.payouts.data},PR=function(e){return e.payout.cardFrame.data},LR=(0,bw.P1)([function(e){return e.payout.payouts.meta.createNetworkStatus},function(e){return e.payout.payouts.meta.removeNetworkStatus}],(function(e,t){return e.isFetching||t.isFetching})),RR=function(e){var t;return null===(t=e.posts.postsList.data)||void 0===t?void 0:t.offset},kR=function(e){var t;return null===(t=e.posts.postsList.data)||void 0===t?void 0:t.isLast},DR=function(e){return e.posts.postsList.meta.networkStatus},UR=function(e){return e.posts.postsList.meta.lastPostsListFetchContext},BR=function(e){return e.posts.postsList.meta.lastPostsListFetchUserId},xR=function(e){return e.posts.postsList.meta.commentsNetworkStatus},MR=function(e){return e.posts.isCurrentUserTouchedFeedFilter},FR=function(e){var t;return null===(t=e.posts.postsSearch.data)||void 0===t?void 0:t.searchPosts},GR=function(e){var t;return null===(t=e.posts.postsSearch.data)||void 0===t?void 0:t.offset},HR=function(e){var t;return null===(t=e.posts.postsSearch.data)||void 0===t?void 0:t.isLast},WR=function(e){var t;return(null===(t=e.posts.currentBlogPostsTags.data)||void 0===t?void 0:t.tags)||[]},VR=function(e){return e.posts.currentBlogPostsTags.meta.networkStatus},jR=function(e){return e.posts.mainFeedPostTags.data},zR=function(e){return e.posts.mainFeedPostTags.meta.networkStatus},YR=((sw={})[ln.ADD_PHOTO]=ZO,sw[ln.ADD_COVER]=Zw,sw[ln.ADD_TITLE]=eO,sw[ln.EDIT_ABOUT]=$w,sw[ln.ADD_SOCIAL]=rO,sw[ln.WRITE_POST]=dO,sw[ln.ADD_LEVEL]=OL,sw[ln.ADD_TARGET]=dR,sw[ln.ADD_PAYOUT]=$O,sw),KR=function(e){return e.tutorial.tutorialSubscriptionLevels.data},qR=function(e){return e.tutorial.tutorialSubscriptionLevels.meta.networkStatus},XR=function(e){var t;return null===(t=e.tutorial.tutorialOffers.data)||void 0===t?void 0:t.locales},QR=function(e){return e.offers.offers},JR=function(e,t,n){return{id:t,data:e[t][n].data,networkStatus:e[t][n].meta.networkStatus}},ZR=(0,bw.P1)(QR,(function(e){var t;return(t={})[le.RU]=JR(e,at.PRIVACY_POLICY_CHANGE_LIST,le.RU),t[le.EN]=JR(e,at.PRIVACY_POLICY_CHANGE_LIST,le.EN),t})),$R=function(e){return e.system.externalApp.data.app},ek=function(e){return e.system.externalApp.meta.networkStatus},tk=n(58267),nk=n(43292),rk=function(){return(0,ET.MT)(lw,aw(aw(aw({},{currentUser:{user:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},updateNetworkStatus:{isFetching:!1,isFetched:!1,error:null},acceptPrivacyPolicyNetworkStatus:{isFetching:!1,isFetched:!1,error:null},acceptRefPolicyNetworkStatus:{isFetching:!1,isFetched:!1,error:null},uploadAvatarNetworkStatus:{isFetching:!1,isFetched:!1,error:null},fetchTelegramLoginUrlNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},selectedCurrency:null,paymentBinds:{data:{list:[],extra:{allowDeleteLastBind:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},phone:{data:{refPhone:null,phone:null,expiresIn:null,code:null},meta:{refPhoneNetworkStatus:{isFetching:!1,isFetched:!1,error:null},networkStatus:{isFetching:!1,isFetched:!1,error:null}}},recaptcha:{data:{score:null,success:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},marketingAlerts:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},notifications:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},notificationSettings:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},infoMessages:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},agents:{agents:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},blackList:{blackList:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},blog:{blog:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editCoverNetworkStatus:{isFetching:!1,isFetched:!1,error:null},followNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogItem:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},rss:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},blogStat:{blogBase:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogMetrics:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogMetricsStatCharts:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogEvents:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogRefs:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogRefsUsers:{data:{data:{referrals:[]},extra:{total:null,offset:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogSearchUsers:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogUnsubscribes:{data:{data:{unsubscribeAnswers:[]},extra:{isLast:null,offset:null,total:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogSubscribers:{data:{list:[],total:0},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogDonations:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},postSales:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},postSalesByDate:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},postSalesDaysByMonth:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},blogHolds:{data:{data:{holds:[]},extra:{total:null,offset:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},broadcastMessageStats:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},reports:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},dialogue:{unreadMsgCount:0,dialogueActive:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},dialogues:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},messages:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},messageDonation:null,isNeedUpdate:!1,recipientsCount:{data:{recipientsCount:0,isSending:!1},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},contacts:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},mailingList:{data:{data:[],extra:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},chatMateSubscriptionLevels:{data:{blogUrl:null,levels:[],subscriptions:[],currentLevelId:null,nextLevelId:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editNetworkStatus:{isFetching:!1,isFetched:!1,error:null},removeNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},chatMateInfo:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},canWriteDonationMessage:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},currentDialogSmileSet:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},externalApps:{discordRoles:{data:{list:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},telegramGroups:{data:{list:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},gift:{gifts:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},currentGift:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},acceptGift:{data:{succeeded:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},mediaData:{uploads:{}},subscriptions:{subscriptionLevel:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},subscriptionLevels:{data:{blogUrl:null,levels:[],subscriptions:[],currentLevelId:null,nextLevelId:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createNetworkStatus:{isFetching:!1,isFetched:!1,error:null},editNetworkStatus:{isFetching:!1,isFetched:!1,error:null},removeNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},subscriptions:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},limit:30,total:0,isLast:!0}},subscriptionsSettings:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},limit:30,total:0}}},target:{targets:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},targetsAll:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},payment:LI(),internal:{message:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},donation:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},gift:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},users:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},comments:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},currentPoll:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}},stored:!1},singlePayment:{singlePaymentDmrPageUrl:{data:{url:null,paymentId:null,status:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},singlePaymentOnlyBindDmrPageUrl:{data:{url:null,paymentId:null,status:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},pollingCheck:{data:{status:!1},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},smiles:{smileSet:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},smileData:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},badges:{badges:{data:[],meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},mediaPlayingState:{currentMediaId:null},overlayPopupState:{currentPopupId:null,currentPopupType:null},promo:fN(),stream:{stream:{data:{stream:null,credentials:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},createStreamNetworkStatus:{isFetching:!1,isFetched:!1,error:null},credentialsNetworkStatus:{isFetching:!1,isFetched:!1,error:null},updateStreamNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChat:{data:{banRemainingTime:null,isBanned:null,isBannedByStreamEnd:!1,isLast:!0,offset:0,data:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},chatSettingsNetworkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamModerators:{data:{isLast:null,offset:0,data:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamUsers:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChatUsers:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChatUserStat:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChatMentions:[],streamStopWords:{data:{isLast:!0,offset:0,data:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChatUserSearchList:{data:{users:null,mentionedUser:null,activeIndexPopover:0},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},streamChatFromWebSocket:[],streamChatIsPaused:!1},posts:{polls:{meta:{polls:{},voters:{},votes:{}}},postsList:{data:{isLast:!1,offset:null,posts:[]},blogsData:{},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null},commentsNetworkStatus:{post:{},thread:{}},publishingCommentsList:{post:{},thread:{}},lastPostsListFetchContext:null,lastFetchFeedPostsParams:null,editCommentNetworkStatus:{},removePostNetworkStatus:{isFetching:!1,isFetched:!1,error:null},createPostNetworkStatus:{isFetching:!1,isFetched:!1,error:null},updatePostNetworkStatus:{isFetching:!1,isFetched:!1,error:null},deferredAccessNetworkStatus:{isFetching:!1,isFetched:!1,error:null},commentsViewMeta:{lastCommentPageTypeVisited:null,postIdsToRefetch:[]},justRemovedComments:{}}},feedCounters:{data:null},postsSearch:{data:{searchPosts:[],offset:null,isLast:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},currentBlogPostsTags:{data:{tags:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},mainFeedPostTags:{data:{tags:[],extra:{offset:null,isLast:null}},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},currentPost:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},postDrafts:{data:{postDrafts:[],activeBlogPostDraft:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},newPostId:null,isCurrentUserTouchedFeedFilter:!1,lastActivePostId:null,postDonationsNetworkStatuses:{}},subscriptionLevels:{subscriptionLevels:{}},feed:{streamsList:{data:{isLast:!1,offset:null,streams:[]},blogsData:{},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},video:{positions:{}}}),{blog:qC(),catalog:{categories:{data:{list:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},successStories:{data:{list:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},doc:{articles:{data:{articles:[]},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},article:{data:{article:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},tutorial:{tutorialSubscriptionLevels:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},tutorialOffers:{data:null,meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},offers:ZC(),singlePayment:{singlePaymentDmrPageUrl:{data:{url:null,paymentId:null,status:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},singlePaymentOnlyBindDmrPageUrl:{data:{url:null,paymentId:null,status:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}},pollingCheck:{data:{status:!1},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}},system:{externalApp:{data:{app:null},meta:{networkStatus:{isFetching:!1,isFetched:!1,error:null}}}}}),nw),(0,tk.Uo)((0,ET.md)(nk.Z,_T)))},ok=n(44179),ak=function(){return ak=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ak.apply(this,arguments)},ik=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},lk=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},sk=function(){function e(){}return e.setToken=function(e){return this.token=e,this},e.updateOptions=function(e){return this.options=ak(ak({},this.options),e),this},e.connect=function(){var e=this,t=nr(),n=t.hosts.websocket,r=t.websocket.isDebug;return this.isConnected?(ho.message("Couldn't connect to websocket. Instance already connected."),this):(this.centrifuge=new ok(n,{debug:r,refreshAttempts:null,onPrivateSubscribe:function(t,n){return ik(e,void 0,void 0,(function(){var e;return lk(this,(function(r){switch(r.label){case 0:return[4,Kc.webSocket.fetchPrivateToken(t.data)];case 1:return e=r.sent(),n(e),[2]}}))}))},onRefresh:function(t,n){return ik(e,void 0,void 0,(function(){var e;return lk(this,(function(t){switch(t.label){case 0:return[4,Kc.webSocket.refreshToken()];case 1:return e=t.sent(),n(e),[2]}}))}))}}),this.centrifuge.setToken(this.token),this.centrifuge.on("connect",(function(){return e.onConnect()})),this.centrifuge.connect(),this)},e.disconnect=function(){var e;return null===(e=this.centrifuge)||void 0===e||e.disconnect(),this},e.presence=function(e){return ik(this,void 0,void 0,(function(){var t;return lk(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.centrifuge.presence(this.channels[e])];case 1:return[2,n.sent().presence];case 2:throw t=n.sent(),new Error(t);case 3:return[2]}}))}))},e.presenceStats=function(e){return ik(this,void 0,void 0,(function(){var t,n,r;return lk(this,(function(o){switch(o.label){case 0:return[4,this.centrifuge.presenceStats(this.channels[e])];case 1:return t=o.sent(),n=t.num_clients,r=t.num_users,[2,{numClients:n,numUsers:r}]}}))}))},e.startSubscribeBatching=function(){return this.centrifuge.startSubscribeBatching(),this},e.stopSubscribeBatching=function(){return this.centrifuge.stopSubscribeBatching(),this},e.publishEvent=function(e,t,n){return ik(this,void 0,void 0,(function(){var r;return lk(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.centrifuge.publish(e,{type:t,data:n})];case 1:return o.sent(),[3,3];case 2:return r=o.sent(),ho.error("Couldn't publish message into websocket channel \"".concat(e,'", reason: '),r),[3,3];case 3:return[2]}}))}))},e.subscribe=function(e,t){var n=this;e.forEach((function(e){var r;n.isConnected?n._subscribe(e.type,e.channel):n.pendingSubscriptions[e.type]=ak(ak({},e),{useBatching:null!==(r=null==t?void 0:t.useBatching)&&void 0!==r&&r})}))},e._subscribe=function(e,t){var n=this,r=this.centrifuge.subscribe(t,(function(t){n.runHandlers(e,t)}));return r.on("error",(function(r){ho.error("Error WS subscription: ",r),"already subscribed"===(null==r?void 0:r.message)&&(n.unsubscribe(e),setTimeout((function(){n._subscribe(e,t)}),1e3))})),this.subscriptions[e]=r,this.channels[e]=t,this},e.onConnect=function(){var e=this;if(setTimeout((function(){return e.trigger(nt.CONNECT)})),Object.keys(this.pendingSubscriptions).length){var t=[];Object.keys(this.pendingSubscriptions).forEach((function(n){var r=e.pendingSubscriptions[n];r.useBatching?t.push(r):e._subscribe(r.type,r.channel)})),t.length>1&&this.startSubscribeBatching(),t.forEach((function(t){e._subscribe(t.type,t.channel)})),t.length>1&&this.stopSubscribeBatching(),this.pendingSubscriptions={}}},e.unsubscribe=function(e){return this.channels[e]?(this.subscriptions[e].unsubscribe(),this.subscriptions[e].removeAllListeners(),this.channels[e]=null,this):this},e.register=function(e){var t=e.channel,n=e.message,r=e.handler;this.handlers[t][n].push(r)},e.unregister=function(e){var t=e.channel,n=e.message,r=e.handler,o=this.handlers[t];o[n]=r?o[n].filter((function(e){return e!==r})):[]},e.runHandlers=function(e,t){var n,r,o=null===(n=this.handlers)||void 0===n?void 0:n[e];null===(r=null==o?void 0:o[t.data.type])||void 0===r||r.forEach((function(n){try{n(t)}catch(n){n instanceof Error&&ho.error("Failed processing WS handler of channel ".concat(e,"\n(message=").concat(JSON.stringify(t),")\n(error=").concat(n&&n.toString()?n.toString():String(n),")"))}}))},Object.defineProperty(e,"isConnected",{get:function(){var e;return(null===(e=this.centrifuge)||void 0===e?void 0:e.isConnected())||!1},enumerable:!1,configurable:!0}),e.on=function(e,t){this.internalHandlers[e].push(t)},e.off=function(e,t){this.internalHandlers[e]=this.internalHandlers[e].filter((function(e){return e!==t}))},e.trigger=function(e){this.internalHandlers[e].forEach((function(e){return e()}))},e.token=null,e.handlers=((cw={})[Xe.USER]=((uw={})[Qe.DIALOG_MESSAGE_COUNTERS]=[],uw[Qe.SUBSCRIBERS_CHANGE_COUNT]=[],uw[Qe.NOTIFICATIONS_CHANGE_COUNT]=[],uw[Qe.PUBLISH_POST]=[],uw[Qe.CHAT_BAN]=[],uw[Qe.CHAT_UNBAN]=[],uw[Qe.USER_BAN]=[],uw[Qe.USER_UNBAN]=[],uw[Qe.BLACK_LISTED]=[],uw[Qe.UNBLACK_LISTED]=[],uw[Qe.BLOG_SUBSCRIBER_STAT]=[],uw[Qe.VIDEO_UPLOADED]=[],uw[Qe.VIDEO_UPLOADED_FAILED]=[],uw[Qe.USER_CHANGE_CURRENCY]=[],uw[Qe.BOOSTY_USER_LINK]=[],uw[Qe.UPLOAD_ORIGINAL_SMILE_IMAGE]=[],uw[Qe.UPLOAD_ORIGINAL_BADGE_IMAGE]=[],uw[Qe.UPLOAD_ORIGINAL_ROLE_IMAGE]=[],uw[Qe.TELEGRAM_LINKED]=[],uw[Qe.BLOG_STAT_REPORT_CREATED]=[],uw[Qe.BLOG_STAT_REPORT_FAILED]=[],uw),cw[Xe.CHAT]=((dw={})[Ze.MESSAGE]=[],dw[Ze.DELETE_MESSAGE]=[],dw[Ze.CLEAN_CHAT_MESSAGES]=[],dw[Ze.STREAM_START]=[],dw[Ze.STREAM_END]=[],dw[Ze.STREAM_LIKE_COUNTER]=[],dw[Ze.STREAM_ONLINE_STATUS]=[],dw),cw[Xe.PRIVATE]=((fw={})[Ze.MESSAGE]=[],fw[Ze.DELETE_MESSAGE]=[],fw[Ze.CLEAN_CHAT_MESSAGES]=[],fw[Ze.STREAM_START]=[],fw[Ze.STREAM_END]=[],fw[Ze.STREAM_LIKE_COUNTER]=[],fw[Ze.STREAM_ONLINE_STATUS]=[],fw),cw[Xe.STREAM]=((mw={})[Je.STREAM_START]=[],mw[Je.STREAM_END]=[],mw[Je.STREAM_LIKE_COUNTER]=[],mw[Je.STREAM_ONLINE_STATUS]=[],mw[Je.STREAM_INFO_UPDATE]=[],mw),cw[Xe.DIALOG]=((pw={})[et.DIALOG_MESSAGE]=[],pw[et.DIALOG_MESSAGE_READ]=[],pw[et.DIALOG_DELETE_MESSAGE]=[],pw[et.DIALOG_MESSAGE_PAID]=[],pw[et.DIALOG_BROADCAST_MESSAGES_DONE]=[],pw),cw[Xe.CUSTOM]=((hw={})[$e.DIALOG_CHATMATE_ACTION]=[],hw),cw[Xe.GLOBAL]=((vw={})[tt.STREAM_ONLINE_STATUS]=[],vw),cw),e.internalHandlers=((gw={})[nt.CONNECT]=[],gw),e.channels={},e.subscriptions={},e.pendingSubscriptions={},e}(),ck=null,uk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dk=Gt.createContext({theme:Ke.LIGHT,setTheme:Yt.noop,toggleTheme:Yt.noop}),fk=function(){return Gt.useContext(dk)},mk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={theme:t.props.theme||Ke.LIGHT},t.setTheme=function(e){t.setState({theme:e})},t.toggleTheme=function(){t.setState((function(e){return{theme:e.theme===Ke.LIGHT?Ke.DARK:Ke.LIGHT}}))},t}return uk(t,e),t.prototype.componentDidUpdate=function(e,t){t.theme!==this.state.theme&&(0,Yt.setToLocalStorage)(o.THEME,this.state.theme)},t.prototype.render=function(){return Gt.createElement(dk.Provider,{value:{theme:this.state.theme,setTheme:this.setTheme,toggleTheme:this.toggleTheme}},this.props.children)},t}(Gt.PureComponent),pk=n(20588),hk=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},vk=(0,Qr.getTranslation)("@common/hooks.AccessLabel"),gk=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},yk=(0,Qr.getTranslation)("@common/hooks.Complaint"),_k=function(){var e=(0,Vt.v9)(XO);return{currentUser:e,isAuthorized:Boolean(e),isBlogger:null==e?void 0:e.isBlogger}},Ek=function(){return Ek=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ek.apply(this,arguments)},bk=function(e){var t=(0,Vt.v9)(Hw),n=(0,Vt.v9)(GP),r=_k().isAuthorized;return t&&t.blogUrl===e?Ek(Ek({},t.accessRights),{canReportBlog:!t.accessRights.canCreate&&r,canFollowBlog:!t.accessRights.canCreate}):n[e]?Ek(Ek({},n[e].accessRights),{canSetPayout:!1,canReportBlog:!n[e].accessRights.canCreate&&r,canFollowBlog:!n[e].accessRights.canCreate}):{canView:!1,canEdit:!1,canCreate:!1,canCreateComments:!1,canDeleteComments:!1,canSetPayout:!1,canReportBlog:!1,canFollowBlog:!1}},Sk=function(e){var t=(0,Vt.v9)(XO);return Boolean(t)&&(null==t?void 0:t.blogUrl)===e},Tk=function(e){var t=(0,Vt.v9)(Hw),n=(0,Vt.v9)(GP);return(null==t?void 0:t.blogUrl)===e?t.isBlackListed:!!n[e]&&n[e].isBlackListed},Ik=function(e){var t=e.post,n=(0,Vt.v9)(XO),r=Boolean(n),o=Sk(t.user.blogUrl),a=bk(t.user.blogUrl),i=a.canCreate,l=a.canEdit,s=a.canView,c=a.canCreateComments,u=Tk(t.user.blogUrl);return(0,Gt.useMemo)((function(){var e=c||r&&!t.isCommentsDenied&&!u&&(t.hasAccess||!t.price),a=VA(t,r),d=xA(n,r),f=jA(a,s),m=zA(a,d),p=YA(a,d,u);return{canViewPost:f,canLikePost:m,canReportPost:r&&!o,canPublishPost:i,canEditPost:l,canDeletePost:l,canReactOnPost:p,canPublishComment:e}}),[n,t])},Nk=function(e){var t=e.post,n=e.comment,r=(0,Vt.v9)(XO),o=Boolean(r),a=Ik({post:t}),i=a.canViewPost,l=a.canPublishComment,s=bk(t.user.blogUrl),c=s.canEdit,u=s.canCreateComments,d=s.canDeleteComments,f=Tk(t.user.blogUrl);return(0,Gt.useMemo)((function(){var e=n.author.id===(null==r?void 0:r.id),t=xA(r,o),a=XA(i,t,f),s=QA(i,l),m=KA(e,l),p=JA(i,e),h=qA(e,d);return{isCommentAuthor:e,canPublishComment:l,canReactOnComment:a,canReplyComment:s,canEditComment:m,canReportComment:p,canRemoveComment:h,canBlockCommentAuthor:c&&!e,canCreateComments:u,canDeleteComments:d}}),[r,t])},Ck=function(){var e=_k(),t=e.currentUser,n=e.isAuthorized;return{isBanned:xA(t,n),isAuthorized:n,isBlogger:null==t?void 0:t.isBlogger,isStreamer:null==t?void 0:t.isStreamer,isModerator:null==t?void 0:t.isModerator,isReadOnly:null==t?void 0:t.isReadOnly,isTestUser:null==t?void 0:t.isTestUser,isTotalBanned:null==t?void 0:t.isTotalBaned}},wk=function(e,t){return e.id<t.id?1:-1},Ok=function(e){var t=(0,Gt.useRef)();return(0,Gt.useEffect)((function(){t.current=e}),[e]),t.current};!function(e){e.START="START",e.PAYMENT="PAYMENT",e.SUCCESS="SUCCESS",e.FAILURE="FAILURE",e.ALREADY_SUBSCRIBED="ALREADY_SUBSCRIBED",e.LOADING="LOADING",e.SHARE_PAYMENT="SHARE_PAYMENT"}(yw||(yw={}));var Ak=/\n/g,Pk=/\n+/g,Lk=/(<br ?\/?>)/gi,Rk=/(<br ?\/?>)+/gi,kk="<br>",Dk=/\u00a0/g,Uk=/(<p><br><\/p>)+/g,Bk=function(){return Bk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bk.apply(this,arguments)},xk=function(e,t,n){var r=[];return e.forEach((function(e){t>=e[f.START]&&n<=e[f.END]&&r.push(e[f.STYLE])})),Array.from(new Set(r))},Mk=function(e,t){return t===s.BOLD?"<b>".concat(e,"</b>"):t===s.CODE?"<code>".concat(e,"</code>"):t===s.ITALIC?"<i>".concat(e,"</i>"):t===s.STRIKETHROUGH?"<s>".concat(e,"</s>"):t===s.UNDERLINE?'<u class="cdx-underline">'.concat(e,"</u>"):e},Fk=function(e,t){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(JSON.parse(e),3),r=n[0],o=n[2];if(0===o.length)return Vo.encode(r).replace(Pk,kk);var a=function(e,t){return void 0===t&&(t=0),Array.isArray(e)?e.map((function(e){return[e[d.STYLE],e[d.OFFSET]-t,e[d.OFFSET]-t+e[d.LENGTH]]})):[]}(o,t),i=function(e,t){var n=t.map((function(e){return[e[f.START],e[f.END]]})).flat();return n.push(0,e.length),Array.from(new Set(n)).sort((function(e,t){return e-t}))}(r,a);return function(e,t,n){for(var r=[],o=1;o<t.length;o++){var a=xk(n,t[o-1],t[o]).reduce((function(e,t){return Mk(e,t)}),Vo.encode(e.slice(t[o-1],t[o]))).replace(Ak,kk);r.push(a)}return r.join("")}(r,i,a)},Gk=function(e,t){var n=e.url,r=nr().hosts.main,o=Fk(e.content,t),a=0===n.indexOf("https://".concat(r)),i="noopener noreferrer".concat(a?"":" nofollow");return'<a href="'.concat(Vo.escapeURL(n),'" target="_blank" rel="').concat(i,'">').concat(o,"</a>")},Hk=function(e,t){void 0===t&&(t=28);var n=e.smallUrl,r=e.mediumUrl,o=e.largeUrl,a=e.id,i=e.name;return'<img\n\t\talt="'.concat(i,'"\n\t\tsrc="').concat(Vo.escapeURL(n),'"\n\t\tsrcset="').concat(Vo.escapeURL(r)," 2x, ").concat(Vo.escapeURL(o),' 3x"\n\t\tstyle="vertical-align: middle; width: ').concat(t,"px; height: ").concat(t,'px; cursor: pointer;"\n\t\tdata-id="').concat(a,'"\n\t\tdata-type="smile"\n\t/>')},Wk=function(e){var t=e.id,n=e.name,r=e.className,o=r?r.toString():"";return'<span\n\t\tclass="mention '.concat(o,'"\n\t\tdata-mention-id="').concat(t,'"\n\t\tdata-display-name="').concat(n,'"\n\t\tcontenteditable="false">').concat(n,"</span>")},Vk=function(e,t){if(e===pe.TEXT||e===pe.LINK||e===pe.SMILE||e===pe.MENTION)return{type:"paragraph",data:{text:t}};throw new Error("Invalid type ".concat(e))};function jk(e){return e.type===pe.TEXT}function zk(e){return e.type===pe.TEXT&&e.modificator===de.BLOCK_END}var Yk=function(e){return JSON.parse(e.content)[u.TEXT]},Kk=function(e){return Yk(e).length},qk=function(e){return!e||zk(e)||!oa(e)&&!ra(e)&&!aa(e)},Xk=function(e,t){void 0===t&&(t={});var n={time:Date.now(),blocks:[]};if(e){var r="",o=0,a=function(e){r+=e},i=function(e){o+=e},l=function(){r=""},s=function(){o=0};return e.forEach((function(c,u){var d,f=e[u+1];switch(c.type){case pe.TEXT:case pe.LINK:if(oa(c)){a(c.type!==pe.LINK||t.isDisableLinks?Fk(c.content,o):Gk(c,o));var m=Kk(c);i(m),qk(f)&&(n.blocks.push(Vk(c.type,r)),l(),s())}break;case pe.SMILE:a(Hk(c,t.smileSize)),i(1),qk(f)&&(n.blocks.push(Vk(c.type,r)),l(),s());break;case pe.MENTION:a(Wk(c));var p=c.name.length;i(p),qk(f)&&(n.blocks.push(Vk(c.type,r)),l(),s());break;case pe.IMAGE:n.blocks.push((d=c,{type:pe.IMAGE,data:{id:d.id,url:d.url,complete:!0}}));break;case pe.AUDIO:case pe.VIDEO:n.blocks.push(function(e){return e.type===pe.AUDIO?{type:pe.AUDIO,data:{type:e.type,url:e.url,title:e.title}}:{type:pe.VIDEO,data:{type:e.type,url:e.url,playerUrls:e.playerUrls,defaultPreview:e.defaultPreview,preview:e.preview,previewId:e.previewId,title:e.title,duration:e.duration,vid:e.vid}}}(c));break;case pe.AUDIO_FILE:case pe.VIDEO_FILE:case pe.FILE:n.blocks.push(function(e){var t={id:e.id,src:e.url,title:e.title,size:e.size,complete:e.complete};if(function(e){return e.type===pe.VIDEO_FILE}(e)){var n=e.vid,r=e.playerUrls,o=e.duration,a=e.defaultPreview,i=e.preview,l=e.previewId,s=e.timeCode,c=e.viewsCounter,u=e.showViewsCounter;return{type:pe.VIDEO_FILE,data:Bk(Bk({},t),{complete:!0,videoId:n,playerUrls:r,duration:o,defaultPreview:a,preview:i,previewId:l,vid:n,timeCode:s,viewsCounter:c,showViewsCounter:u})}}return{type:e.type,data:t}}(c))}})),n}return n},Qk=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Jk=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Zk=function(e){return"A"===e.nodeName},$k=function(e){return"IMG"===e.nodeName},eD=function(e){return"SPAN"===e.nodeName&&e.classList.contains("mention")},tD=function(e,t){var n=t||{},r=n.allowLinks,o=n.customLinkRegexp,a=n.shouldAddBlockEnd,i=void 0===a||a,c=r?function(e,t){return e.replace(t||Mn,(function(e){return"<a href='".concat(e,"'>").concat(e,"</a>")}))}(e,o):e,u=(new DOMParser).parseFromString(c.replace(Lk,"&#10;"),"text/html"),f=0,m=u.body.innerText,p=[],h=[],v=[],g=[],y=[],_=[],E=function(e){if(Zk(e))try{h.push({type:pe.LINK,href:e.getAttribute("href"),start:f,end:f+e.textContent.length,content:m.slice(f,f+e.textContent.length),styles:[]})}catch(e){ho.error("Could not parse link node due to invalid format.",e)}if($k(e))try{var t=e.getAttribute("data-id"),n=e.getAttribute("alt"),r=e.getAttribute("src"),o=e.getAttribute("srcset"),a=Qk(o.split(",").map((function(e){return e.trim().split(" ")[0]})),2),i=a[0],l=a[1];g.push({type:pe.SMILE,start:f,end:f,content:"",styles:[],id:t,name:n,smallUrl:r,mediumUrl:i,largeUrl:l})}catch(e){ho.error("Could not parse smile node due to invalid format.",e)}if(eD(e))try{t=Number(e.getAttribute("data-mention-id")),n=e.getAttribute("data-display-name"),y.push({type:pe.MENTION,content:e.textContent,start:f,end:f+e.textContent.length,styles:[],id:t,name:n})}catch(e){ho.error("Could not parse mention node due to invalid format.",e)}var c;Zk(e)||$k(e)||eD(e)||e.nodeType===Node.TEXT_NODE||p.push([(c=e.nodeName,{B:s.BOLD,I:s.ITALIC,S:s.STRIKETHROUGH,U:s.UNDERLINE,CODE:s.CODE}[c]),f,f+e.textContent.length]),e.nodeType===Node.TEXT_NODE?f+=e.textContent.length:e.childNodes.forEach(E)};u.body.childNodes.forEach(E);var b=Jk(Jk(Jk([],Qk(h),!1),Qk(g),!1),Qk(y),!1).sort((function(e,t){return e.start-t.start}));if(b.length>0){for(var S=b.reduce((function(e,t){return e.push([t.start,t.end]),e}),[]).flat(),T=Jk(Jk([0],Qk(S),!1),[m.length],!1),I=0;I<T.length;I+=2)T[I]!==T[I+1]&&v.push({type:pe.TEXT,content:m.slice(T[I],T[I+1]),start:T[I],end:T[I+1],styles:[]});Jk(Jk([],Qk(b),!1),Qk(v),!1).sort((function(e,t){return e.start-t.start})).forEach((function(e){switch(p.forEach((function(t){if(!(t[d.OFFSET]>=e.end||t[d.LENGTH]<=e.start)){var n=[t[d.STYLE],Math.max(e.start,t[d.OFFSET]),Math.min(e.end,t[d.LENGTH])];n[d.LENGTH]=n[d.LENGTH]-n[d.OFFSET],e.styles.push(n)}})),e.type){case pe.SMILE:_.push({type:e.type,smallUrl:e.smallUrl,mediumUrl:e.mediumUrl,largeUrl:e.largeUrl,id:e.id,name:e.name});break;case pe.LINK:_.push({type:e.type,content:JSON.stringify([e.content,l[0],e.styles]),url:e.href});break;case pe.MENTION:_.push({type:e.type,id:e.id,name:e.name});break;default:_.push({type:e.type,content:JSON.stringify([e.content,l[0],e.styles]),modificator:""})}}))}else p.forEach((function(e){return e[d.LENGTH]=e[d.LENGTH]-e[d.OFFSET]})),_.push({type:pe.TEXT,content:JSON.stringify([m,l[0],p]),modificator:""});return i&&_.push({type:pe.TEXT,content:"",modificator:de.BLOCK_END}),_},nD=function(e){var t=e.blocks,n=[];return t.forEach((function(e){var t=e.type,r=e.data;switch(t){case"paragraph":n.push.apply(n,Jk([],Qk(tD(r.text)),!1));break;case pe.AUDIO:case pe.VIDEO:n.push(function(e){var t=e.type,n=e.url,r=e.title,o=e,a=o.playerUrls,i=o.vid,l=o.defaultPreview,s=o.preview,c=o.previewId,u=o.duration,d=o.timeCode,f=o.viewsCounter,m=o.showViewsCounter,p=o.id;return{type:t,playerUrls:a,url:t===pe.AUDIO?to(n):n,title:r,vid:i,id:p,defaultPreview:l,preview:s,previewId:c,duration:u,timeCode:d,viewsCounter:f,showViewsCounter:m}}(r));break;case pe.AUDIO_FILE:case pe.VIDEO_FILE:case pe.FILE:n.push(function(e,t){var n=t.complete,r=t.id,o=t.size,a=t.src,i=t.title,l=t,s=l.defaultPreview,c=l.preview,u=l.previewId,d=l.duration,f=l.playerUrls;return{complete:n,id:r,size:o,title:i,type:e,url:a,vid:l.vid,playerUrls:f,defaultPreview:s,preview:c,previewId:u,duration:d,timeCode:l.timeCode,viewsCounter:l.viewsCounter,showViewsCounter:l.showViewsCounter}}(t,r));break;case pe.IMAGE:n.push(function(e){var t=e.id,n=e.url;return{type:pe.IMAGE,id:t,url:n}}(r))}})),n},rD=Object.values(ie),oD={coub:function(e){var t=e.match(/coub.com\/view\/(\w+)/i);return Array.isArray(t)&&t[1]?"https://coub.com/embed/".concat(t[1],"?muted=false&autostart=false&originalSize=false&startWithHD=false"):null},vimeo:function(e){var t=e.match(/vimeo\.com\/(?:channels\/\S+\/)?(\d+)\/?(\S+)?/i);return Array.isArray(t)&&t[1]?t[2]?"https://player.vimeo.com/video/".concat(t[1],"?h=").concat(t[2]):"https://player.vimeo.com/video/".concat(t[1]):null},youtube:function(e){var t=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=|live\/|shorts\/)|youtu\.be\/)([^"&?\/ ]{11})/i);return Array.isArray(t)&&t[1]?"https://www.youtube.com/embed/".concat(t[1]):null},ok:function(e){var t=e.match(/ok.ru\/(?:video|live)\/(\d+)/i);return Array.isArray(t)&&t[1]?"https://ok.ru/videoembed/".concat(t[1]):null},twitch:function(e){var t=nr().hosts.main,n=/www.twitch.tv\/videos\/(\w+)/i,r=/www.twitch.tv\/(\w+)/i;if(n.test(e)){var o=e.match(n);return Array.isArray(o)&&o[1]?"https://player.twitch.tv/?autoplay=false&video=".concat(o[1],"&parent=").concat(t):null}return r.test(e)?(o=e.match(r),Array.isArray(o)&&o[1]?"https://player.twitch.tv/?autoplay=false&channel=".concat(o[1],"&parent=").concat(t):null):null},giphy:function(e){var t=e.match(/giphy.com\/(?:gifs|stickers|clips)\/[^/]+\-([\w\d]+)(\/(?:embed|tile))?\/?$/i),n=e.match(/giphy.com\/embed\/([\w\d]+)\/?$/i),r=e.match(/media.giphy.com\/media\/([\w\d]+)\/(?:giphy|source|200w_d)\.(?:gif|mp4)$/i),o=e.match(/giphy.com\/gifs\/([\w\d]+)\/html5$/i),a=null;if(Array.isArray(t)&&t[1])a=t[1];else if(Array.isArray(n)&&n[1])a=n[1];else if(Array.isArray(r)&&r[1])a=r[1];else{if(!Array.isArray(o)||!o[1])return null;a=o[1]}return a?"https://giphy.com/embed/".concat(a):null},kinescope:function(e){var t=e.match(/(?:kinescope\.io\/)(?:(?:embed\/)?)(\w+)/i);return Array.isArray(t)&&t[1]?"https://kinescope.io/embed/".concat(t[1],"?t=0"):null}},aD=Object.keys(oD),iD=["soundcloud"];function lD(e){return/^https?:(\/\/)?/.test(e)?Object.values(oD).map((function(t){return t(e)})).find((function(e){return null!=e})):null}var sD,cD=function(e){return void 0===e&&(e={}),void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){return[2,new Promise((function(t){var n=document.createElement("input");n.type="file",e.multiple&&n.setAttribute("multiple","multiple"),e.accept&&n.setAttribute("accept",e.accept),n.style.display="none",document.body.appendChild(n),n.addEventListener("change",(function(e){var r=e.target.files;t(r),document.body.removeChild(n)}),!1),n.click()}))]}))},new((t=Promise)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n};!function(e){e.ENTER="ENTER",e.CTRL_ENTER="CTRL_ENTER"}(sD||(sD={}));var uD=function(e,t){return t===sD.CTRL_ENTER?e.key===ae.ENTER&&e.ctrlKey&&!(e.metaKey||e.shiftKey):t===sD.ENTER&&e.key===ae.ENTER&&!(e.ctrlKey||e.metaKey||e.shiftKey)},dD=function(e,t){var n=e.lastIndexOf(" ",t-1),r=e.lastIndexOf(String.fromCharCode(160),t-1),o=-1===n?-1===r?0:r+1:n+1,a=e.indexOf(" ",t);return{start:o,end:-1===a?e.length:a}},fD=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},mD=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},pD="\n",hD=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},vD=function(e){var t=e.element,n=e.container,r=e.threshold,o=void 0===r?0:r,a=e.rootMargin,i=void 0===a?"0px 0px 0px 0px":a,l=e.lock,s=void 0!==l&&l,c=hD((0,Gt.useState)(!1),2),u=c[0],d=c[1];return(0,Gt.useEffect)((function(){var e=t.current,r=n?n.current:window.document;if(null!==e){var a=new IntersectionObserver((function(t){var n=hD(t,1)[0];s?n.isIntersecting&&(d(!0),a.unobserve(e)):d(n.isIntersecting)}),{root:r,threshold:o,rootMargin:i});return a.observe(e),function(){a.unobserve(e)}}return Yt.noop}),[n,t,o,i,s]),u},gD=function(e){var t=e.inputRef,n=e.timeout,r=void 0===n?100:n,o=(0,Gt.useRef)(!1),a=(0,Gt.useRef)((function(){t.current&&(o.current=!0,window.setTimeout((function(){o.current=!1}),r))}));return(0,Gt.useEffect)((function(){var e;return null===(e=t.current)||void 0===e||e.addEventListener("blur",a.current),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("blur",a.current)}}),[]),{wasFocused:function(){return!0===o.current}}},yD=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},_D=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},ED=function(){var e=nr().recaptcha,t=e.isEnabled,n=e.siteKeyV2,r=e.siteKeyV3;return{isRecaptchaEnabled:t,generateRecaptchaV3Token:function(e){return yD(void 0,void 0,void 0,(function(){return _D(this,(function(n){return[2,new Promise((function(n,o){if(t||ho.error("Google Recaptcha is disabled in config"),window.grecaptcha)try{window.grecaptcha.ready((function(){return yD(void 0,void 0,void 0,(function(){var t;return _D(this,(function(o){switch(o.label){case 0:return[4,window.grecaptcha.execute(r,{action:e})];case 1:return t=o.sent(),n(t),[2]}}))}))}))}catch(e){o(ho.error("Could not send token, Recaptcha is not initialized"))}else o(new Error("Google Recaptcha script is not available"))}))]}))}))},renderRecaptchaV2:function(e,r,o,a){t||ho.error("Google Recaptcha is disabled in config");try{window.grecaptcha.render(e,{sitekey:n,callback:function(e){return r(e)},"expired-callback":o,"error-callback":a})}catch(e){ho.error("Could not render grecaptcha widget due to error: ",e)}}}},bD=function(e){return"".concat(L.DATA_TO_KEEP,":").concat(e)},SD=function(e){var t=e.onAttach,n=e.isFileValid,r=e.acceptedMimetypes,o=(0,Gt.useRef)(),a=function(){var e=document.getElementById(o.current);e&&e.remove(),o.current=void 0};(0,Gt.useEffect)((function(){return function(){a()}}),[]);var i=function(){a()};return{openAttachDialog:function(){var e;o.current||(e=document.createElement("input"),o.current=Qa(),e.setAttribute("id",o.current),e.setAttribute("type","file"),r&&e.setAttribute("accept",r),e.style.opacity="0",e.style.position="fixed",e.style.bottom="0",document.body.appendChild(e)),document.getElementById(o.current).onchange=function(e){!function(e){var r,o;o=function(){var r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(Array.from(e.target.files),1),o=r[0],void 0===n?[3,2]:[4,n(o)];case 1:a.sent()?t([o]):i(),a.label=2;case 2:return[2]}}))},new((r=Promise)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(void 0,[])).next())}))}(e)};var a=document.getElementById(o.current);null==a||a.click()},removeAttachedFile:i}},TD=(0,Qr.getTranslation)("@common/hooks.web.Image"),ID=function(e,t){var n=nr().publisher.images.limits,r=n.maxSize,o=n.maxWidth,a=n.unit,i=(0,Qr.getParametrizedText)(TD.errors.UPLOAD_ERROR,{fileName:e});switch(t){case oe.IMAGE_SIZE_LIMIT:i+=" — ".concat((0,Qr.getParametrizedText)(TD.errors[t],{limit:Lo(r,a,Z.MB)}));break;case oe.IMAGE_WIDTH_LIMIT:i+=" — ".concat((0,Qr.getParametrizedText)(TD.errors[t],{limit:o}));break;case oe.NETWORK_ERROR:case oe.INVALID_FORMAT:i+=" — ".concat(TD.errors[t]);break;case oe.UNKNOWN_ERROR:i=(0,Qr.getParametrizedText)(TD.errors.UNKNOWN_ERROR,{fileName:e})}return i},ND=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},CD=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};function wD(e){return"uploaded"in e}var OD,AD=function(){return e="start-donation-payment",{setData:function(t){Pf(bD(e),JSON.stringify(t))},getData:function(){return JSON.parse(Af(bD(e)))},clearData:function(){Lf(bD(e))}};var e},PD=function(e){var t=e.id,n=e.userId,r=e.type,o=e.typeDonation,a=e.from,i=nr().isMobile,l=xf(),s=(0,Vt.v9)(Hw),c=(0,Vt.v9)(mP);return{sendPaymentStat:function(e,u){var d,f,m,p=n||(null===(d=null==c?void 0:c.chatmate)||void 0===d?void 0:d.id)||(null===(f=null==s?void 0:s.owner)||void 0===f?void 0:f.id),h=a||(null===(m=l.state)||void 0===m?void 0:m.from),v=-1!==[V.AUTHOR,V.DIALOG,V.POST].indexOf(o),g=u||{},y=g.canWriteMessage,_=g.hasMessage,E=g.param1,b=g.param2,S=g.currency,T=g.amount,I=g.paymentMethod;if(v){var N={action:Fe.DONATION_WINDOW_ACTION,data0:e,data1:o,data2:T?T.toString():"0",data3:i?"1":"0",data4:y?"1":"0",data5:_?"1":"0",data6:S,data7:null==E?void 0:E.toString(),data8:null==b?void 0:b.toString(),data9:I};bd.log.paymentWindow.sendDonationWindowAction(N)}else N={action:Fe.PAYMENT_WINDOW_ACTION,data0:e,data1:r,data2:null==p?void 0:p.toString(),data3:null==h?void 0:h.toString(),data4:null==t?void 0:t.toString(),data5:i?"1":"0",data6:null==E?void 0:E.toString(),data7:null==b?void 0:b.toString(),data8:S,data9:I},bd.log.paymentWindow.sendPaymentWindowAction(N)}}},LD=function(e){var t=e.onClose,n=e.levelId,r=(0,Vt.v9)(yL),o=(0,Vt.v9)(_L),a=xa(o,n),i=null==r?void 0:r.find((function(e){return e.levelId===(null==a?void 0:a.id)})),l=(null==i?void 0:i.offTime)||(null==i?void 0:i.nextPayTime);return{selectedLevel:a,selectedLevelOffTime:l,onClose:t}},RD=(0,Qr.getTranslation)("@common/hooks.Payment.StepFailure"),kD=function(e){var t=e.isActive,n=e.isSinglePayment,r=e.type,o=e.typeDonation,a=e.price,i=e.paymentId,l=e.transactionId,s=e.errorCode,c=e.onClose,u=e.onRetry,d=e.onContactSupport;return(0,Gt.useEffect)((function(){t&&(n?bd.log.singlePayment.singlePaymentFinished({result:Qu.FAILURE,type:r,typeDonation:o,price:a,paymentId:i,transactionId:l,dmrErrorCode:s}):bd.log.subscriptionPurchase.purchaseFinished({result:Qu.FAILURE,price:a,paymentId:i,transactionId:l,dmrErrorCode:s}))}),[t]),{headerText:function(){switch(s){case _e.ERR_CARD_LIMIT_ONLINE:case _e.ERR_NOT_ENROLLED:return RD.errors.cardLimit.header;case _e.ERR_CARD_EXPIRED:return RD.errors.cardExpired.header;case _e.ERR_NOT_ENOUGH_MONEY:return RD.errors.notEnoughMoney.header;default:return RD.errors.common.header}}(),text:function(){switch(s){case _e.ERR_CARD_LIMIT_ONLINE:case _e.ERR_NOT_ENROLLED:return RD.errors.cardLimit.text;case _e.ERR_CARD_EXPIRED:return RD.errors.cardExpired.text;case _e.ERR_NOT_ENOUGH_MONEY:return RD.errors.notEnoughMoney.text;default:return RD.errors.common.text}}(),type:r,onClose:c,onRetry:u,onContactSupport:d}},DD=function(e){var t=e.blogUrl,n=e.type,r=e.typeDonation,o=e.message,a=e.id,i=e.period,l=e.levelId,s=e.price,c=e.currency,u=e.promoId,d=e.onSuccess,f=(0,Vt.I0)();return{type:n,price:s,onPayment:function(e){return void 0,void 0,m=function(){var d;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(m){switch(m.label){case 0:return[4,f((0,dm.Ax)(JE.action)({levelId:l,period:i,blogUrl:t,payMethod:Ee.APPLE_PAY,id:a,price:s,type:n,typeDonation:r,message:o,currency:c,applePayToken:JSON.stringify(e.paymentData),promoId:u}))];case 1:d=m.sent().paymentId;try{return[2,f((0,dm.Ax)(ZE.action)({paymentId:d,blogUrl:t,type:n,typeDonation:r,payMethod:Ee.APPLE_PAY}))]}catch(e){throw new Error(e)}return[2]}}))},new((d=void 0)||(d=Promise))((function(e,t){function n(e){try{o(m.next(e))}catch(e){t(e)}}function r(e){try{o(m.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof d?o:new d((function(e){e(o)}))).then(n,r)}o((m=m.apply(undefined,[])).next())}));var d,m},onSuccess:d}},UD=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},BD=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},xD=function(e){var t=(0,Vt.I0)(),n=e.isActive,r=e.payMethod,o=e.binds,a=e.paymentBindsNetworkStatus,i=e.selectedBind,l=e.blogUrl,s=e.levelId,c=e.type,u=e.typeDonation,d=e.message,f=e.bindId,m=e.price,p=e.period,h=e.id,v=e.applePayToken,g=e.currency,y=e.promoId,_=e.onSuccess,E=e.onError,b=e.on3dsDisplayed,S=e.onCPGDisplayed,T=e.onCancel,I=e.onLoading,N=e.onTransactionStart,C=e.onGoToPayment,w=(0,Vt.v9)(YO),O=(0,Vt.v9)(KO),A=(0,Vt.v9)(qO),P=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),L=P[0],R=P[1],k=!a.isFetched,D=0===(null==o?void 0:o.length)&&!k,U=null===(null==i?void 0:i.id)||D,B=function(e){return UD(void 0,void 0,void 0,(function(){var n;return BD(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),I(),[4,t((0,dm.Ax)(ZE.action)({paymentId:e,blogUrl:l,type:c,typeDonation:u}))];case 1:return r.sent(),_(),[3,3];case 2:throw n=r.sent(),E(),new Error(n);case 3:return[2]}}))}))},x=function(){var e=w?w.match(/trampoline%2F([^&]+)/):null;return e&&e[1]};return(0,Gt.useEffect)((function(){n&&(a.isFetched&&U||L)&&UD(void 0,void 0,void 0,(function(){var e;return BD(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t((0,dm.Ax)(JE.action)({levelId:s,payMethod:r,blogUrl:l,type:c,typeDonation:u,message:d,bindId:f,price:m,period:p,id:h,currency:g,applePayToken:v,promoId:y}))];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),ho.error("Failed fetch DMR url: ",e),E(),[3,3];case 3:return[2]}}))}))}),[n,U,i]),(0,Gt.useEffect)((function(){n&&O&&N(O,x())}),[n,O]),(0,Gt.useEffect)((function(){n&&A&&N(A,x())}),[n,A]),{dmrUrl:w,isActive:n,isNewBind:U,isNeed3ds:L,isLoadingBinds:k,onDmrSuccess:function(){return UD(void 0,void 0,void 0,(function(){var e;return BD(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,B(O)];case 1:return t.sent(),_(),[3,3];case 2:return e=t.sent(),ho.error(e),[3,3];case 3:return[2]}}))}))},onDmrError:E,onDmr3dsDisplayed:b,onDmrCPGDisplayed:S,onPayWithExistingBind:function(){return UD(void 0,void 0,void 0,(function(){var e,n,r;return BD(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),I(),[4,t((0,dm.Ax)(tb.action)({type:c,typeDonation:u,message:d,blogUrl:l,price:m,bindId:i.id,targetId:String(h),currency:g,period:c===Ce.DONATION||c===Ce.POST?null:p,levelId:c===Ce.DONATION||c===Ce.POST?null:s,promoId:y}))];case 1:return e=o.sent(),n=e.paymentId,e.reason!==Ne.NEED_3DS?[3,2]:(R(!0),C(),[3,4]);case 2:return[4,B(n)];case 3:o.sent(),N(n,x()),o.label=4;case 4:return[3,6];case 5:return r=o.sent(),ho.error("Failed pay with existing bind: ",r),E(),[3,6];case 6:return[2]}}))}))},onCancel:T}},MD=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},FD=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},GD=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},HD=function(e){var t=e.isActive,n=e.blogUrl,r=e.binds,o=e.selectedBind,a=e.paymentBindsNetworkStatus,i=e.levelId,l=e.type,s=e.typeDonation,c=e.message,u=e.bindId,d=e.price,f=e.period,m=e.id,p=e.currency,h=e.promoId,v=e.onSuccess,g=e.onError,y=e.onLoading,_=e.onCancel,E=(0,Vt.I0)(),b=GD((0,Gt.useState)(null),2),S=b[0],T=b[1],I=GD((0,Gt.useState)(""),2),N=I[0],C=I[1],w=GD((0,Gt.useState)(!1),2),O=w[0],A=w[1],P=0===(null==r?void 0:r.length)&&a.isFetched,L=null===(null==o?void 0:o.id)||P,R=function(e){return MD(void 0,void 0,void 0,(function(){var t;return FD(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),y(),[4,E((0,dm.Ax)(ZE.action)({paymentId:e,blogUrl:n,type:l,typeDonation:s,payMethod:Ee.PAYPAL}))];case 1:return r.sent(),v(),[3,3];case 2:throw t=r.sent(),g(),new Error(t);case 3:return[2]}}))}))};return(0,Gt.useEffect)((function(){t&&a.isFetched&&L&&MD(void 0,void 0,void 0,(function(){var e,t,r,o,a,v,y,_;return FD(this,(function(b){switch(b.label){case 0:A(!0),b.label=1;case 1:return b.trys.push([1,7,,8]),[4,E((0,dm.Ax)(JE.action)({levelId:i,payMethod:Ee.PAYPAL,blogUrl:n,type:l,typeDonation:s,message:c,bindId:u,price:d,period:f,id:m,currency:p,promoId:h}))];case 2:return e=b.sent(),t=e.status,r=e.paymentId,o=e.url,T(r),t!==be.REDIRECT?[3,3]:(C(o),[3,6]);case 3:return t!==be.WAIT?[3,5]:[4,E((0,dm.Ax)(ab.action)({payMethod:Ee.PAYPAL,paymentId:r}))];case 4:return a=b.sent(),v=a.status,y=a.url,v===be.REDIRECT?C(y):g(),[3,6];case 5:g(),b.label=6;case 6:return[3,8];case 7:return _=b.sent(),ho.error("Failed fetch DMR url: ",_),g(),[3,8];case 8:return A(!1),[2]}}))}))}),[t,L,o]),(0,Gt.useEffect)((function(){t||(T(null),C(""),A(!1))}),[t]),{dmrUrl:N,isLoading:O,isActive:t,isNewBind:L,onPayWithExistingBind:function(){return MD(void 0,void 0,void 0,(function(){var e,t;return FD(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),y(),[4,E((0,dm.Ax)(tb.action)({type:l,typeDonation:s,message:c,blogUrl:n,period:f,price:d,currency:p,bindId:o.id,targetId:String(m),levelId:l===Ce.DONATION||l===Ce.POST?null:i,promoId:h}))];case 1:return e=r.sent().paymentId,[4,R(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),ho.error("Failed pay with existing bind: ",t),g(),[3,4];case 4:return[2]}}))}))},onDmrSuccess:function(){return MD(void 0,void 0,void 0,(function(){var e;return FD(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,R(S)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),ho.error(e),g(),[3,3];case 3:return[2]}}))}))},onDmrError:g,onCancel:_}},WD=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},VD=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},jD=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},zD=(0,Qr.getTranslation)("@common/hooks.Payment.PaymentByQiwi"),YD=function(e){var t=e.isActive,n=e.blogUrl,r=e.binds,o=e.selectedBind,a=e.paymentBindsNetworkStatus,i=e.levelId,l=e.type,s=e.typeDonation,c=e.message,u=e.bindId,d=e.price,f=e.period,m=e.id,p=e.currency,h=e.promoId,v=e.onSuccess,g=e.onError,y=e.onLoading,_=e.onCancel,E=nr().qiwi.accountInfoUrl,b=(0,Vt.I0)(),S=jD((0,Gt.useState)(""),2),T=S[0],I=S[1],N=jD((0,Gt.useState)(null),2),C=N[0],w=N[1],O=jD((0,Gt.useState)(""),2),A=O[0],P=O[1],L=jD((0,Gt.useState)(!1),2),R=L[0],k=L[1],D=jD((0,Gt.useState)(!1),2),U=D[0],B=D[1],x=jD((0,Gt.useState)(null),2),M=x[0],F=x[1],G=0===(null==r?void 0:r.length)&&a.isFetched,H=null===(null==o?void 0:o.id)||G,W=function(){return WD(void 0,void 0,void 0,(function(){var e,t,r,o,a,v,y,_;return VD(this,(function(E){switch(E.label){case 0:B(!0),E.label=1;case 1:return E.trys.push([1,7,,8]),[4,b((0,dm.Ax)(JE.action)({levelId:i,payMethod:Ee.QIWI,blogUrl:n,type:l,typeDonation:s,message:c,bindId:u,price:d,period:f,id:m,currency:p,phone:"+".concat(T),promoId:h}))];case 2:return e=E.sent(),t=e.status,r=e.paymentId,o=e.url,w(r),t!==be.REDIRECT?[3,3]:(P(o),[3,6]);case 3:return t!==be.WAIT?[3,5]:[4,b((0,dm.Ax)(ab.action)({payMethod:Ee.QIWI,paymentId:r}))];case 4:return a=E.sent(),v=a.status,y=a.url,v===be.NEED_DATA?(w(r),k(!0)):v===be.REDIRECT?P(y):g(),[3,6];case 5:g(),E.label=6;case 6:return[3,8];case 7:return _=E.sent(),ho.error("Failed fetch DMR url: ",_),g(),[3,8];case 8:return B(!1),[2]}}))}))},V=function(e){return WD(void 0,void 0,void 0,(function(){var t;return VD(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),y(),[4,b((0,dm.Ax)(ZE.action)({paymentId:e,blogUrl:n,type:l,typeDonation:s,payMethod:Ee.QIWI}))];case 1:return r.sent(),v(),[3,3];case 2:throw t=r.sent(),g(),new Error(t);case 3:return[2]}}))}))};return(0,Gt.useEffect)((function(){t||(I(""),w(null),P(""),k(!1),B(!1),F(null))}),[t]),{accountInfoUrl:E,dmrUrl:A,phone:T,errorSmsCode:M,isSmsCodeDisplayed:R,isLoading:U,isActive:t,isNewBind:H,onPhoneChange:function(e,t){I(t)},onSmsCodeFill:function(e){var t;t=e,WD(void 0,void 0,void 0,(function(){return VD(this,(function(e){switch(e.label){case 0:return F(null),[4,b((0,dm.Ax)(ib.action)({paymentId:C,code:t}))];case 1:return e.sent().success?V(C):F(zD.errorSmsCode),[2]}}))}))},onSmsCodeChange:function(e){F(null)},onResendSmsCode:function(){W()},onSubmit:function(){H?W():WD(void 0,void 0,void 0,(function(){var e,t;return VD(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),y(),[4,b((0,dm.Ax)(tb.action)({type:l,typeDonation:s,message:c,blogUrl:n,period:f,price:d,currency:p,bindId:o.id,targetId:String(m),levelId:l===Ce.DONATION||l===Ce.POST?null:i,promoId:h}))];case 1:return e=r.sent().paymentId,[4,V(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),ho.error("Failed pay with existing bind: ",t),g(),[3,4];case 4:return[2]}}))}))},onOpenExternalWindow:function(){V(C)},onCancel:_}},KD=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},qD=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},XD=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},QD=function(e){var t=e.isActive,n=e.blogUrl,r=e.binds,o=e.selectedBind,a=e.paymentBindsNetworkStatus,i=e.levelId,l=e.type,s=e.typeDonation,c=e.message,u=e.bindId,d=e.price,f=e.period,m=e.currency,p=e.id,h=e.promoId,v=e.onSuccess,g=e.onError,y=e.onLoading,_=e.onCancel,E=(0,Vt.I0)(),b=XD((0,Gt.useState)(null),2),S=b[0],T=b[1],I=XD((0,Gt.useState)(""),2),N=I[0],C=I[1],w=XD((0,Gt.useState)(!1),2),O=w[0],A=w[1],P=0===(null==r?void 0:r.length)&&a.isFetched,L=null===(null==o?void 0:o.id)||P,R=function(e){return KD(void 0,void 0,void 0,(function(){var t;return qD(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),y(),[4,E((0,dm.Ax)(ZE.action)({paymentId:e,blogUrl:n,type:l,typeDonation:s,payMethod:Ee.YANDEX}))];case 1:return r.sent(),v(),[3,3];case 2:throw t=r.sent(),g(),new Error(t);case 3:return[2]}}))}))};return(0,Gt.useEffect)((function(){t&&a.isFetched&&L&&KD(void 0,void 0,void 0,(function(){var e,t,r,o,a,v,y,_;return qD(this,(function(b){switch(b.label){case 0:A(!0),b.label=1;case 1:return b.trys.push([1,7,,8]),[4,E((0,dm.Ax)(JE.action)({levelId:i,payMethod:Ee.YANDEX,blogUrl:n,type:l,typeDonation:s,message:c,bindId:u,price:d,period:f,currency:m,id:p,promoId:h}))];case 2:return e=b.sent(),t=e.status,r=e.paymentId,o=e.url,T(r),t!==be.REDIRECT?[3,3]:(C(o),[3,6]);case 3:return t!==be.WAIT?[3,5]:[4,E((0,dm.Ax)(ab.action)({payMethod:Ee.YANDEX,paymentId:r}))];case 4:return a=b.sent(),v=a.status,y=a.url,v===be.REDIRECT?C(y):g(),[3,6];case 5:g(),b.label=6;case 6:return[3,8];case 7:return _=b.sent(),ho.error("Failed fetch DMR url: ",_),g(),[3,8];case 8:return A(!1),[2]}}))}))}),[t,L,o]),(0,Gt.useEffect)((function(){t||(T(null),C(""),A(!1))}),[t]),{dmrUrl:N,isLoading:O,isActive:t,isNewBind:L,onSubmit:function(){KD(void 0,void 0,void 0,(function(){var e,t;return qD(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),y(),[4,E((0,dm.Ax)(tb.action)({type:l,typeDonation:s,message:c,blogUrl:n,period:f,price:d,bindId:o.id,targetId:String(p),currency:m,levelId:l===Ce.DONATION||l===Ce.POST?null:i,promoId:h}))];case 1:return e=r.sent().paymentId,[4,R(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),ho.error("Failed pay with existing bind: ",t),g(),[3,4];case 4:return[2]}}))}))},onOpenExternalWindow:function(){R(S)},onCancel:_}},JD=function(){return JD=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},JD.apply(this,arguments)},ZD=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},$D=(0,Qr.getTranslation)("@common/hooks.Payment.StepPayment"),eU={payMethod:null,id:null,description:"",createAt:null,expireAt:null,payType:null,deleted:!1},tU=[Ee.CARD,Ee.CARD_GLOBAL],nU=function(e){var t=(0,Vt.I0)(),n=e.isActive,o=e.isSinglePayment,a=e.blogUrl,i=e.levelId,l=e.type,s=e.typeDonation,c=e.messageDonation,u=e.price,d=e.period,f=e.id,m=e.applePayToken,p=e.canWriteMessage,h=e.userId,v=e.promoId,g=e.onSuccess,y=e.onError,_=e.onCancel,E=e.onLoading,b=e.onTransactionStart,S=e.onPaymentMethodChange,T=e.onGoToPayment,I=nr(),N=I.isMergePaymentBindsCards,C=I.currencies.methods,w=PD({id:f,type:l,typeDonation:s,userId:h}).sendPaymentStat,O=(0,Vt.v9)(uA),A=(0,Vt.v9)(fA),P=(0,Vt.v9)(bA),L=C[P],R=(null==L?void 0:L.indexOf(Ee.CARD))>=0,k=(Qo(r.PAYMENT_APPLE_PAY)||o)&&(null==L?void 0:L.indexOf(Ee.APPLE_PAY))>=0,D=Qo(r.PAYMENT_YANDEX)&&(null==L?void 0:L.indexOf(Ee.YANDEX))>=0,U=Qo(r.PAYMENT_QIWI)&&(null==L?void 0:L.indexOf(Ee.QIWI))>=0,B=Qo(r.PAYMENT_PAYPAL)&&(null==L?void 0:L.indexOf(Ee.PAYPAL))>=0,x=Qo(r.PAYMENT_CARD_GLOBAL)&&(null==L?void 0:L.indexOf(Ee.CARD_GLOBAL))>=0,M=ZD((0,Gt.useState)(L[0]),2),F=M[0],G=M[1],H=ZD((0,Gt.useState)(!1),2),W=H[0],j=H[1],z=F===Ee.CARD||F===Ee.CARD_GLOBAL?$D.new.card:$D.new.wallet,Y=function(e){return O.filter((function(t){return t.payMethod===e||N&&tU.includes(e)&&tU.includes(t.payMethod)}))},K=function(e){return Y(e).length>0},q=function(e){return K(e)?Y(e)[0]:null},X=ZD((0,Gt.useState)(q(F)),2),Q=X[0],J=X[1],Z=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n="");var r={param1:t,param2:n,currency:P,amount:u,canWriteMessage:p,hasMessage:c.length>0,paymentMethod:F};w(e,r)};(0,Gt.useEffect)((function(){n&&0===O.length&&!A.isFetching&&t($v.action({withDeleted:!1,currency:P})),n||(G(C[P][0]),j(!1))}),[n]),(0,Gt.useEffect)((function(){var e=C[P][0];G(e),S(e)}),[P]),(0,Gt.useEffect)((function(){J(q(F))}),[O,n]);var $=s===V.AUTHOR?void 0:f,ee={binds:Y(F),isLoadingBinds:!A.isFetched,paymentBindsNetworkStatus:A,selectedBind:Q,levelId:i,blogUrl:a,type:l,typeDonation:s,message:c,bindId:null==Q?void 0:Q.id,price:u,id:$,period:d,applePayToken:m,currency:P,promoId:v,onSuccess:g,onError:y,onCancel:_,on3dsDisplayed:function(){j(!0),Z(We.PURCHASE_DMR_SHOW),o?bd.log.singlePayment.show3ds({type:l}):bd.log.subscriptionPurchase.show3ds()},onCPGDisplayed:function(){j(!1),Z(We.PURCHASE_DMR_SHOW)},onLoading:E,onTransactionStart:b,onPaymentMethodChange:S,onGoToPayment:T};return{isYandexMoneyEnabled:D,isQiwiEnabled:U,isPayPalEnabled:B,isCardGlobalEnabled:x,isCardEnabled:R,isApplePayEnabled:k,selectedMethod:F,selectedBind:Q,isOnlyPaymentDisplayed:W,isSinglePayment:o,type:l,price:u,hasBinds:K(F),binds:Y(F).concat(eU),newBindTitle:z,payments:{card:xD(JD({isActive:n&&F===Ee.CARD,payMethod:Ee.CARD},ee)),cardGlobal:xD(JD({isActive:n&&F===Ee.CARD_GLOBAL,payMethod:Ee.CARD_GLOBAL},ee)),paypal:HD(JD({isActive:n&&F===Ee.PAYPAL},ee)),yandex:QD(JD({isActive:n&&F===Ee.YANDEX},ee)),qiwi:YD(JD({isActive:n&&F===Ee.QIWI},ee)),applePay:DD({blogUrl:a,id:$,levelId:i,period:d,price:u,type:l,typeDonation:s,message:c,currency:P,onSuccess:g})},onMethodChange:function(e){Z(We.PURCHASE_METHOD_CHANGE,F,e),G(e),J(q(e))},onBindChange:function(e){J(e),Z(We.PURCHASE_BIND_CHANGE,e.payMethod)}}},rU=(0,Qr.getTranslation)("@common/hooks.Payment.StepStart"),oU=function(e){var t,n=e.isActive,r=e.blogUrl,o=e.levelId,a=e.price,i=e.period,l=e.id,s=e.userId,c=e.onPriceChange,u=e.onPeriodChange,d=e.onGoToPayment,f=e.onSuccess,m=e.onError,p=e.onCancel,h=e.onGoToStepShare,v=nr(),g=v.subscriptionLevel.paymentLimits,y=v.currencies.default,_=g.maxPaymentSum[y],E=(0,Vt.I0)(),b=PD({id:l,userId:s,type:Ce.SUBSCRIPTION}).sendPaymentStat,S=(0,Vt.v9)(pL),T=(0,Vt.v9)(_L),I=xa(T,o),N=(0,Vt.v9)(TP),C=IP(N,o),w=I||C,O=Ok(w),A=(0,Vt.v9)(yL),P=(0,Vt.v9)(iL),L=(0,Vt.v9)(jO),R=(0,Vt.v9)(zO),k=(0,Vt.v9)(bA),D=(0,Vt.v9)(XO),U=null==S||0===S.price,B=(null==w?void 0:w.price)<(null==S?void 0:S.price),x=(null==S?void 0:S.price)>0,M=null==A?void 0:A.find((function(e){return e.levelId===(null==S?void 0:S.id)})),F=B?(null==M?void 0:M.offTime)||L.nextPayTime:null,G=B?L.onTime:null,H=B?L.periodPayment:L.additionalPayment,W=x&&H>0&&!B,V=x?rU.changeSubscription:rU.buySubscription,j=rU.cancel,z=k!==y?(null==w?void 0:w.currencyPrices[y])*i:0,Y=(null==L?void 0:L.periodPayment)||a,K=(0,Gt.useMemo)((function(){var e;return null===(e=null==w?void 0:w.promos)||void 0===e?void 0:e.find((function(e){return!e.isFinished&&Ua(e)}))}),[w]),q=null===(t=null==K?void 0:K.discount)||void 0===t?void 0:t.percent,X=null==K?void 0:K.id,Q=X&&L.additionalPayment;return(0,Gt.useEffect)((function(){!O&&w&&c(null==w?void 0:w.currencyPrices[k])}),[w]),(0,Gt.useEffect)((function(){D&&n&&a>0&&i&&E((0,dm.Ax)(ob.action)({blogUrl:r,levelId:o,period:i,currency:k,promoId:X}))}),[a,i,n,D]),(0,Gt.useEffect)((function(){(null==A?void 0:A.length)&&P.isFetched||!r||E(qp.action({blogUrl:r}))}),[r]),{currentLevel:S,selectedLevel:w,paymentInfo:L,paymentInfoNetworkStatus:R,price:Y,discountPrice:Q,originPrice:z,period:i,discount:q,isStandaloneLevel:U,isDowngrade:B,isChangeLevel:x,currentLevelOffTime:F,selectedLevelOnTime:G,summary:0===(null==L?void 0:L.additionalPayment)?rU.noNeedToPay:W&&!B?"".concat(rU.surcharge," ").concat(Vr({amount:H,currency:k})):"",isDiscountByCurrentLevel:W,buttonPurchaseTitle:V,buttonCancelTitle:j,promoId:X,onCustomPriceChange:function(e){var t=$a(e);t>=(null==w?void 0:w.currencyPrices[k])&&c(t)},onCustomPriceBlur:function(e){var t=$a(e),n=Math.max(Math.min(t,_),null==w?void 0:w.currencyPrices[k]);c(n)},onPeriodChange:u,onPurchaseClick:function(){var e,t;0===L.additionalPayment?(void 0,void 0,t=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E((0,dm.Ax)($E.action)({blogUrl:r,levelId:o,period:i,promoId:X}))];case 1:return t.sent(),f(),[3,3];case 2:return e=t.sent(),ho.error('Failed downgrade subscription from level "'.concat(null==S?void 0:S.id,'" to level "').concat(null==w?void 0:w.id,'": '),e),m(),[3,3];case 3:return[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}))):d()},onCancelClick:function(){p()},onDescriptionOpen:function(){b(We.SHOW_DESCRIPTION)},onGoToStepShare:h}};!function(e){e.TOO_LOW="TOO_LOW",e.TOO_HIGH="TOO_HIGH"}(OD||(OD={}));var aU,iU,lU=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},sU=function(e){var t=e.isActive,n=e.type,r=e.sum,o=e.typeDonation,a=e.donationMessage,i=e.onSumChange,l=e.onGoToPayment,s=e.onHasAccess,c=e.onMessageChange,u=e.onCancel,d=e.canWriteDonationMessage,f=e.onGoToStepShare,m=e.isAuthorized,p=e.blogUrl,h=nr().donation.paymentLimits,v=h.maxPaymentSum,g=h.minPaymentSum,y=h.defaultPaymentSum,_=Sk(p),E=(0,Vt.v9)(bA),b=(0,Vt.I0)(),S=AD(),T=S.getData,I=S.clearData,N=lU((0,Gt.useState)(),2),C=N[0],w=N[1],O=lU((0,Gt.useState)(!1),2),A=O[0],P=O[1],L=(0,Gt.useCallback)((function(e){return e<g[E]?OD.TOO_LOW:e>v[E]?OD.TOO_HIGH:null}),[E]);(0,Gt.useEffect)((function(){if(t)if(m){var e=void 0,n=T();n?(e=n.sum,c(n.message),b(Ig({currency:n.currency})),n.goToPayment&&!_&&P(!0)):e=y[E],i(e),w(L(e)),I()}else i(y[E]),w(L(y[E]))}),[t,m]),(0,Gt.useEffect)((function(){A&&(k(),P(!1))}),[A]);var R=function(e){var t="min"===e?g[E]:v[E];return Vr({amount:t,currency:E,useGrouping:!0})},k=function(){l()};return{type:n,typeDonation:o,minSumAmount:R("min"),maxSumAmount:R("max"),maxMessageLength:200,currency:E,message:a,sumError:C,sum:r,canWriteDonationMessage:d,onCustomPriceChange:function(e){var t=$a(e);i(t),w(L(t))},onPurchaseClick:k,onMessageChange:function(e){var t=e.slice(0,200);c(t)},onHasAccess:s,onCancel:u,onGoToStepShare:f,blogUrl:p}},cU=function(e){var t=e.isActive,n=e.id,r=e.userId,o=e.onGoToPayment,a=e.onSetLevelId,i=e.onPriceChange,l=PD({id:n,userId:r,type:Ce.GIFT}).sendPaymentStat,s=(0,Vt.v9)(_L),c=(0,Vt.v9)(bA),u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(0),2),d=u[0],f=u[1],m=null==s?void 0:s.filter((function(e){return!e.deleted&&e.price>0})),p=m?m[d]:null;return(0,Gt.useEffect)((function(){t&&Boolean(p)&&(a(p.id),i(p.currencyPrices[c]))}),[t,p,c]),{currentSubscriptionLevelIndex:d,subscriptionLevels:m,subscriptionLevelsLength:(null==m?void 0:m.length)||0,currentSubscriptionLevel:p,onCurrentSubscriptionLevelIndexChange:f,onGoToPayment:o,onDescriptionOpen:function(){l(We.SHOW_DESCRIPTION)}}},uU=n(5236),dU=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},fU=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},mU=(0,Qr.getTranslation)("@common/hooks.Payment.StepStartSinglePayment"),pU=function(e){var t,n,r=e.isActive,o=e.blogUrl,a=e.type,i=e.typeDonation,l=e.id,s=e.price,c=e.onPriceChange,u=e.onGoToPayment,d=e.onHasAccess,f=e.onGoToStepShare,m=nr(),p=m.singlePaymentMaxPrice,h=m.donation.paymentLimits,v=h.defaultPaymentSum,g=h.minPaymentSum,y=h.maxPaymentSum,_=(0,Vt.I0)(),E=(0,Vt.v9)(uR),b=(0,Vt.v9)(yP),S=(0,Vt.v9)(qw),T=(t=(0,Vt.v9)(cR),n=Number(l),t&&t.find((function(e){return e.id===n}))||null),I=Ok(T),N=(0,Vt.v9)(Tw),C=(0,Vt.v9)(Bw),w=Iw(C,N,String(l)),O=Ok(w),A=(0,Vt.v9)(UP),P=BP(A,Number(l)),L=Ok(P),R=(0,Vt.v9)(bA),k=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),D=k[0],U=k[1],B=ni(null==w?void 0:w.teaser),x=B.teaserText,M=B.teaserMediaDataText,F=a===Ce.MESSAGE?b:S,G=function(){return v[R]<g[R]?g:v[R]>y[R]?y:v},H=(0,Gt.useCallback)((function(){return dU(void 0,void 0,void 0,(function(){return fU(this,(function(e){switch(e.label){case 0:return[4,W()];case 1:return e.sent(),[2]}}))}))}),[P]),W=function(){return dU(void 0,void 0,void 0,(function(){return fU(this,(function(e){return[2,_((0,dm.Ax)(Gh.action)({messageId:String(l)}))]}))}))},j=function(){_((0,dm.Ax)(ah.action)({id:T.id,currency:R}))},z=function(){switch(a){case Ce.DONATION:return g[R];case Ce.POST:return null==w?void 0:w.currencyPrices[R];case Ce.MESSAGE:return null==P?void 0:P.currencyPrices[R]}return null},Y=function(){return a===Ce.DONATION?y[R]:p},K=function(e){0===e?U(mU.errors.donation.empty):e<z()?U("".concat(mU.errors.donation.minSum," ").concat(Vr({amount:z(),currency:R}))):e>Y()?U("".concat(mU.errors.donation.maxSum," ").concat(Vr({amount:Y(),currency:R}))):(c(e),U(null))},q=function(e){var t=$a(e);a===Ce.DONATION?K(t):t>=z()&&c(t)},X=(0,Gt.useCallback)((0,uU.Z)(q,400),[R,q,K]);return(0,Gt.useEffect)((function(){r&&(a!==Ce.DONATION||i!==V.TARGET||E.isFetched||dU(void 0,void 0,void 0,(function(){return fU(this,(function(e){return[2,_((0,dm.Ax)(oh.action)({blogUrl:o}))]}))})),a!==Ce.POST||w||dU(void 0,void 0,void 0,(function(){return fU(this,(function(e){return[2,_((0,dm.Ax)(G_.action)({blogUrl:o,postId:String(l)}))]}))})),a!==Ce.MESSAGE||P||H())}),[r]),(0,Gt.useEffect)((function(){if(r){if(!I&&T){var e=G();j(),c(null==e?void 0:e[R])}!O&&w&&c(w.currencyPrices[R]),!L&&P&&c(P.currencyPrices[R])}}),[r,T,w,P]),(0,Gt.useEffect)((function(){U(null),T&&(j(),c(G()[R])),w&&c(w.currencyPrices[R]),P&&c(P.currencyPrices[R])}),[R]),{bloggerName:F,target:T,blogPost:w,message:P,type:a,typeDonation:i,price:s,teaserText:x,teaserMediaDataText:M,error:D,onCustomPriceChange:X,onCustomPriceBlur:function(e){var t=$a(e);if(a===Ce.DONATION)K(t);else{var n=Math.max(Math.min(t,Y()),z());c(n)}},onPurchaseClick:function(){u()},onHasAccess:d,onGoToStepShare:f}},hU=function(e){var t,n=e.isActive,r=e.isSinglePayment,o=e.type,a=e.typeDonation,i=e.id,l=e.price,s=e.paymentId,c=e.transactionId,u=e.currency,d=e.onClose,f=e.onSendMoreClick,m=(0,Vt.I0)(),p=(0,Vt.v9)(qw),h=(0,Vt.v9)(Jw),v=(0,Vt.v9)(nO),g=(0,Vt.v9)(XO),y=(0,Vt.v9)(Tw),_=(0,Vt.v9)(Bw),E=Iw(_,y,String(i)),b=(0,Vt.v9)(UP),S=BP(b,Number(i)),T=(0,Vt.v9)(yP),I=(0,Vt.v9)(qL),N=Boolean(null==g?void 0:g.email)&&(null===(t=null==g?void 0:g.emailConfirmed)||void 0===t?void 0:t.noSocial);return(0,Gt.useEffect)((function(){n&&(r?bd.log.singlePayment.singlePaymentFinished({result:Qu.SUCCESS,type:o,typeDonation:a,price:l,paymentId:s,transactionId:c}):bd.log.subscriptionPurchase.purchaseFinished({result:Qu.SUCCESS,price:l,paymentId:s,transactionId:c}))}),[n]),{blogOwnerName:p,blogThanksMsg:h,currentUser:g,blogPost:E,message:S,chatMateName:T,gift:I,blogUrl:v,isEmailConfirmed:N,type:o,sum:Vr({amount:l,currency:u,useGrouping:!0}),typeDonation:a,onClose:d,onUpdateUserData:function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,m((0,dm.Ax)(ng.action)(e))];case 1:return t.sent(),[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n},onSendEmailConfirmationLetter:function(){m((0,dm.Ax)(ug.action)())},onSendMoreClick:f}},vU=function(){return vU=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vU.apply(this,arguments)},gU=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},yU=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},_U=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},EU=(0,Qr.getTranslation)("@common/hooks.Payment"),bU=[Ce.DONATION,Ce.POST,Ce.MESSAGE],SU=!1,TU=function(e){var t,n,r,o,a=e.type,i=e.typeDonation,l=e.blogUrl,s=e.levelId,c=e.id,u=e.dialogId,d=e.userId,f=e.donationAmount,m=e.source,p=e.onGoToPost,h=e.onClose,v=e.onSuccess,g=void 0===v?Yt.noop:v,y=e.onContactSupport,_=e.isShare,E=e.isFromFeed,b=_k().isAuthorized,S=(0,Vt.v9)(Bw),T=nr().currencies.methods,I=xf(),N=(0,Vt.I0)(),C=PD({id:c,userId:d,type:a,typeDonation:i}).sendPaymentStat,w=(0,Vt.v9)(XO),O=(0,Vt.v9)(sA),A=(0,Vt.v9)(Ww),P=(0,Vt.v9)(bA),L=Ok(P),R=(0,Vt.v9)(Hw),k=(0,Vt.v9)(mP),D=(0,Vt.v9)(EP),U=(0,Vt.v9)(bP),B=(0,Vt.v9)(NL),x=(0,Vt.v9)(NP),M=(0,Vt.v9)(hL),F=(0,Vt.v9)(jO),G=(0,Vt.v9)(pL),H=(0,Vt.v9)(_L),W=xa(H,s),j=null===(t=function(e){var t;return null===(t=null==e?void 0:e.promos)||void 0===t?void 0:t.find((function(e){return!e.isFinished&&Ua(e)}))}(W))||void 0===t?void 0:t.id,z=(0,Vt.v9)(TP),Y=IP(z,s),K=W||Y,q=l===(null==R?void 0:R.blogUrl)&&l===M,X=(null==G?void 0:G.id)===s&&a!==Ce.GIFT,Q=a===Ce.MESSAGE,J=m===Xu.WEB_VIEW,Z=Boolean(yf("".concat(ir.MESSAGES,"/*"),I.pathname)),$=Boolean(yf("".concat(ir.BLOG_STREAM,"/*"),I.pathname))&&a===Ce.SUBSCRIPTION,ee=Z&&a===Ce.SUBSCRIPTION,te=a===Ce.DONATION&&i===V.DIALOG,ne=a===Ce.DONATION&&(i===V.AUTHOR||i===V.POST),re=a===Ce.DONATION&&i===V.TARGET,oe=(0,Vt.v9)(xP),ae=Z?!(x.isFetched&&D.isFetched||Q||te):!A.isFetched||!q||!B.isFetched,ie=a===Ce.DONATION&&i!==V.TARGET,le=bU.includes(a),se=a===Ce.GIFT,ce=(0,Gt.useCallback)((function(){return _?yw.SHARE_PAYMENT:ae?yw.LOADING:X?yw.ALREADY_SUBSCRIBED:i===V.DIALOG?yw.PAYMENT:yw.START}),[_,ae,X,i]),ue=_U((0,Gt.useState)(Boolean(f)?f:0),2),de=ue[0],fe=ue[1],me=_U((0,Gt.useState)(1),2),pe=me[0],he=me[1],ve=_U((0,Gt.useState)(null),2),ge=ve[0],ye=ve[1],_e=_U((0,Gt.useState)(T[P][0]),2),Ee=_e[0],be=_e[1],Se=_U((0,Gt.useState)(null),2),Te=Se[0],Ie=Se[1],Ne=_U((0,Gt.useState)(null),2),we=Ne[0],Oe=Ne[1],Ae=_U((0,Gt.useState)((function(){return ce()})),2),Pe=Ae[0],Le=Ae[1],Re=_U((0,Gt.useState)(null),2),ke=Re[0],De=Re[1],Ue=_U((0,Gt.useState)(""),2),Be=Ue[0],xe=Ue[1],Me=function(){return gU(void 0,void 0,void 0,(function(){var e,t;return yU(this,(function(n){switch(n.label){case 0:return e=l,k&&(te||ee)&&(e=k.chatmate.url),!Z||te||ee?[3,2]:[4,Ge()];case 1:t=n.sent().chatmate,e=t.url,n.label=2;case 2:return e&&N((0,dm.Ax)(Nm.action)({blogUrl:e})),[2]}}))}))},Fe=function(e){return gU(void 0,void 0,void 0,(function(){return yU(this,(function(t){switch(t.label){case 0:return[4,N((0,dm.Ax)(qp.action)({blogUrl:l,showFree:e}))];case 1:return t.sent(),[2]}}))}))},Ge=function(){return gU(void 0,void 0,void 0,(function(){var e,t,n;return yU(this,(function(r){switch(r.label){case 0:return u?[4,N((0,dm.Ax)(Dh.action)({dialogId:u}))]:[3,2];case 1:return t=r.sent(),[3,4];case 2:return[4,N((0,dm.Ax)(Uh.action)({userId:d}))];case 3:t=r.sent(),r.label=4;case 4:return n=(e=t).chatmate.url,[4,N((0,dm.Ax)(Zh.action)({blogUrl:n,showFree:!1}))];case 5:return r.sent(),[2,vU({},e)]}}))}))},He=function(){se||(le?bd.log.singlePayment.openPopup({source:m,price:de,type:a}):bd.log.subscriptionPurchase.openPopup({source:m,price:null==K?void 0:K.currencyPrices[P]}),SU=!0)},Ve=function(e,t){void 0===t&&(t="");var n={param1:t,currency:P,amount:de||f,canWriteMessage:Boolean(oe),hasMessage:Boolean(Be),paymentMethod:Ee};C(e,n)},je=function(e){e>0&&de!==e&&a===Ce.DONATION&&Ve(We.CHANGE_AMOUNT,e.toString()),fe(e)},ze=function(){Le(yw.PAYMENT)},Ye=function(){h(),Ve(We.CANCEL)},Ke=function(){Le(yw.SHARE_PAYMENT)},qe=function(){m===Xu.BLOG_STREAM_SUBSCRIBE?p((0,Yt.getParametrizedUrl)(ir.BLOG_STREAM,{blogUrl:l})):a!==Ce.POST||E?(a===Ce.SUBSCRIPTION&&Z&&Ge(),h()):p((0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:l,postId:c})),Ve(We.RESULT_SUCCESS_CLOSE)};return(0,Gt.useEffect)((function(){if(SU=!1,Q||(A.isFetched&&($||D.isFetched)||Me(),Z||(B.isFetched||Fe(),q||(Me(),Fe())),ae||He()),(Z&&!k||Q&&J)&&Ge(),ne||re||fe((null==K?void 0:K.currencyPrices[P])||f),re){var e=nr().donation.paymentLimits,t=e.defaultPaymentSum,n=e.minPaymentSum,r=e.maxPaymentSum,o=t[P];t[P]<n[P]?o=n[P]:t[P]>r[P]&&(o=r[P]),fe(o)}return ae||Pe===yw.PAYMENT||Ve(We.SHOW),function(){N(nb()),N(Ng())}}),[]),(0,Gt.useEffect)((function(){Pe===yw.PAYMENT&&Ve(We.PAYMENT_STEP,(de||f).toString())}),[Pe]),(0,Gt.useEffect)((function(){X&&Pe!==yw.SUCCESS&&Le(yw.ALREADY_SUBSCRIBED)}),[X]),(0,Gt.useEffect)((function(){ne&&Pe===yw.START&&b&&N($h({blogUrl:l}))}),[b,ne,Pe]),(0,Gt.useEffect)((function(){ae||Pe===yw.SUCCESS||Le(ce()),ae||SU||He(),!ae&&(null==R?void 0:R.isTotalBaned)&&h()}),[ae,ne]),(0,Gt.useEffect)((function(){K&&fe(null==K?void 0:K.currencyPrices[P]),L&&P!==L&&Ve(We.CHANGE_CURRENCY,P)}),[P]),{currentUser:w,currentUserNetworkStatus:O,currency:P,step:Pe,isResultPage:Pe===yw.SUCCESS||Pe===yw.FAILURE,isHiddenTitle:ie,title:function(){var e,t=a===Ce.SUBSCRIPTION?null==F?void 0:F.additionalPayment:de,n=" ".concat(EU.byPrice[se?"gift":"common"]," ").concat(Vr({amount:t,currency:P}));switch(a){case Ce.SUBSCRIPTION:e=Pe===yw.ALREADY_SUBSCRIBED?EU.alreadySubscribed:(null==G?void 0:G.currencyPrices[P])>0?EU.changeSubscriptionLevel:EU.subscriptionPurchase;break;case Ce.DONATION:e=ne?EU.forDonation:EU.forGoal;break;case Ce.POST:e=EU.forPost;break;case Ce.STREAM:e=EU.forStream;break;case Ce.MESSAGE:e=EU.forMessage;break;case Ce.GIFT:e=Pe===yw.PAYMENT?EU.forGift.payment:EU.forGift.common}return Pe===yw.SHARE_PAYMENT&&(e=ne?EU.donationShare:EU.paymentShare),Pe===yw.PAYMENT?{text:"".concat(e," ").concat(n),isBackEnable:!0}:Pe===yw.SUCCESS?{text:null,isBackEnable:!1}:Pe===yw.LOADING?{text:EU.waiting,isBackEnable:!1}:Pe===yw.FAILURE?{text:null,isBackEnable:!1}:{text:e,isBackEnable:!1}}(),isDonationPayment:ne,chatMate:null==k?void 0:k.chatmate,targetAuthor:null==R?void 0:R.owner,isSinglePayment:le,isGift:se,steps:{start:oU({isActive:!le&&!se&&Pe===yw.START,blogUrl:(null===(n=null==k?void 0:k.chatmate)||void 0===n?void 0:n.url)||l,levelId:s,id:c,userId:d,price:de,period:pe,onPriceChange:je,onPeriodChange:function(e){he(e),Ve(We.CHANGE_PERIOD,e.toString())},onGoToPayment:ze,onSuccess:function(){Le(yw.SUCCESS),Ve(We.PURCHASE_RESULT_SHOW,yw.SUCCESS)},onError:function(){Le(yw.FAILURE),Ve(We.PURCHASE_RESULT_SHOW,yw.FAILURE)},onCancel:Ye,onGoToStepShare:Ke}),startSinglePayment:pU({isActive:le&&!se&&Pe===yw.START,blogUrl:(null===(r=null==k?void 0:k.chatmate)||void 0===r?void 0:r.url)||l,type:a,typeDonation:i,id:c,userId:d,price:de||f,onPriceChange:je,onGoToPayment:ze,onHasAccess:qe,onGoToStepShare:Ke}),startDonationPayment:sU({isActive:ne&&Pe===yw.START,isAuthorized:b,blogUrl:l,type:a,typeDonation:i,id:c,userId:d,donationMessage:Be,sum:de,canWriteDonationMessage:b?oe:Boolean(null==R?void 0:R.flags.acceptDonationMessages),onMessageChange:xe,onSumChange:je,onGoToPayment:ze,onHasAccess:qe,onCancel:Ye,onGoToStepShare:Ke}),startGiftSubscription:cU({isActive:se&&Pe===yw.START,id:c,userId:d,onGoToPayment:ze,onPriceChange:je,onSetLevelId:function(e){Ie(e),Ve(We.CHANGE_LEVEL,e.toString())}}),payment:nU({isActive:Pe===yw.PAYMENT,isSinglePayment:le,blogUrl:(null===(o=null==k?void 0:k.chatmate)||void 0===o?void 0:o.url)||l,levelId:se?Te:s,promoId:j,type:a,typeDonation:i,messageDonation:Pe===yw.PAYMENT?[V.AUTHOR,V.POST].includes(i)&&Boolean(Be.trim())?tD(Be):i===V.DIALOG?U:[]:[],canWriteMessage:oe,userId:d,price:de||f,period:pe,id:c,onSuccess:function(){var e;if(Le(yw.SUCCESS),Ve(We.PURCHASE_RESULT_SHOW,yw.SUCCESS),a!==Ce.DONATION||i!==V.DIALOG||J||(Ge(),h()),a===Ce.POST&&E&&!J&&(p((0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:l,postId:c}),{state:{isFromFeed:!0}}),N(H_({blogUrl:l,postId:String(c)}))),a===Ce.DONATION&&i===V.POST&&R.flags.showPostDonations){var t=null===(e=null==S?void 0:S.find((function(e){return e.int_id===c})))||void 0===e?void 0:e.id;t&&N(H_({blogUrl:l,postId:t}))}a!==Ce.MESSAGE||J||h(),g()},onError:function(e){De(e),Le(yw.FAILURE),Ve(We.PURCHASE_RESULT_SHOW,yw.FAILURE)},onCancel:function(){a===Ce.DONATION&&i===V.DIALOG?h():(Le(yw.START),Ve(We.PURCHASE_PREVIOUS_STEP))},onLoading:function(){Le(yw.LOADING)},onGoToPayment:ze,onTransactionStart:function(e,t){ye(e),Oe(t)},onPaymentMethodChange:function(e){be(e)}}),failure:kD({isActive:Pe===yw.FAILURE,isSinglePayment:le,errorCode:ke,type:a,typeDonation:i,price:de||(null==K?void 0:K.currencyPrices[P]),paymentId:ge,transactionId:we,onClose:function(){h(),Ve(We.RESULT_FAIL_CLOSE)},onRetry:function(){N(nb()),a===Ce.DONATION&&i===V.DIALOG?Le(yw.PAYMENT):Le(yw.START),Ve(We.RESULT_FAIL_AGAIN)},onContactSupport:function(){Ve(We.RESULT_FAIL_SUPPORT),y()}}),success:hU({isActive:Pe===yw.SUCCESS,isSinglePayment:le,type:a,typeDonation:i,id:c,price:de||(null==K?void 0:K.currencyPrices[P]),currency:P,paymentId:ge,transactionId:we,onClose:qe,onSendMoreClick:function(){Le(yw.START),xe(""),Ve(We.RESULT_SUCCESS_MORE)}}),alreadySubscribed:LD({levelId:s,onClose:function(){h()}})},onGoToStep:function(e){Le(e),Ve(We.PURCHASE_PREVIOUS_STEP)},onPopupClose:function(){var e=Pe===yw.PAYMENT?We.PURCHASE_CROSS_CLICK:We.CROSS_CLICK;Ve(e),h()}}};!function(e){e.LOADING="LOADING",e.FIRST="FIRST"}(aU||(aU={})),function(e){e.KEY="streamKey",e.URL="streamUrl"}(iU||(iU={}));var IU=(0,Qr.getTranslation)("@common/hooks.StreamForm"),NU=function(e){var t,n=nr(),o=n.currencies.default,a=n.posts.paidPosts.paymentLimits,i=Qo(r.STREAM_RECORD);return{accessLevel:CU(e.subscriptionLevels),data:e.data||[],price:e.price||null,priceFormatted:(0,Yt.getFormattedNumber)(e.price||a.minPaymentSum[o]),publishTime:(t=e.publishTime,t>Date.now()?t:null),subscriptionLevel:e.subscriptionLevel||null,teaser:e.teaser||[],teaserUploadId:null,description:e.description||[],title:e.title||"",hasChat:e.hasChat||!0,daNick:e.daNick||"",recordStreamIsVisible:i,recordStreamIsEnabled:e.isTemplate||!e.createdAt,willRecord:e.willRecord}},CU=function(e){var t=nr().posts.paidPosts.isCreateEnable;switch(!0){case!!e.length:return E.ONLY_SUBSCRIBERS;case t:return E.ONLY_PRICE;default:return E.OPEN}},wU=function(e){return[E.ONLY_PRICE,E.SUBSCRIBERS_AND_PRICE].includes(e)},OU=function(e){return e===Ve.VIDEO_STREAM_IS_ONLINE?IU.stream.errors.videoStreamIsOnline:IU.stream.errors.common},AU=function(){return AU=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},AU.apply(this,arguments)},PU=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},LU=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},RU=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},kU={width:138,height:150},DU=function(){return DU=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},DU.apply(this,arguments)},UU=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},BU=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},xU=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},MU=function(){return MU=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},MU.apply(this,arguments)},FU=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},GU=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},HU=n(37241),WU=Vt.v9,VU=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},jU=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},zU=function(e){var t=Qo(r.VK_PLAYER),n=e.isAuthorizationRequired,o=e.shouldSubscribeToStreamChannelOnMount,a=e.forceConnectToPrivateChannel,i=e.shouldConnectToChatChannels,l=void 0===i||i,s=_k().isAuthorized,c=WU(sA),u=WU(zP),d=null!=u?u:{},f=d.id,m=d.wsStreamChannel,p=d.wsChatChannel,h=d.wsStreamViewersChannel,v=d.wsChatChannelPrivate,g=d.hasAccess,y=Ok(f),_=Ok(s),E=(0,Gt.useRef)(m),b=(0,Gt.useRef)(p),S=(0,Gt.useRef)(h),T=(0,Gt.useRef)(v),I=(s||!n)&&g&&!c.isFetching,N=(0,Gt.useRef)(I),C=(0,Gt.useCallback)((function(){(I||N.current)&&sk.subscribe([{type:Xe.STREAM,channel:m},{type:Xe.VIEWERS,channel:h}])}),[I,N,sk]),w=(0,Gt.useCallback)((function(){sk.unsubscribe(Xe.STREAM).unsubscribe(Xe.VIEWERS)}),[I,N,sk]),O=function(e){var t=e.data.event;t===ye.STARTED||t===ye.RESUMED?C():t===ye.PAUSED&&w()},A=function(){if(I||N.current){var e=b.current||p,n=T.current||v,r=E.current||m,i=S.current||h;if(e&&r){var c=s&&n&&l&&(o||a),u=[l&&{type:Xe.CHAT,channel:e},c&&{type:Xe.PRIVATE,channel:n}].filter(Boolean);o?sk.subscribe(jU([{type:Xe.STREAM,channel:r},{type:Xe.VIEWERS,channel:i}],VU(u),!1),{useBatching:!0}):(sk.subscribe(jU([{type:Xe.STREAM,channel:r}],VU(u),!1)),t||window.addEventListener("message",O,!1))}}},P=function(){sk.unsubscribe(Xe.STREAM).unsubscribe(Xe.CHAT).unsubscribe(Xe.VIEWERS).unsubscribe(Xe.PRIVATE),t||window.removeEventListener("message",O,!1)},L=function(){P(),A()};return(0,Gt.useEffect)((function(){return A(),sk.on(nt.CONNECT,L),function(){sk.off(nt.CONNECT,L),P()}}),[]),(0,Gt.useEffect)((function(){N.current=I}),[I]),(0,Gt.useEffect)((function(){null!=y&&y!==f&&(P(),A())}),[f]),(0,Gt.useEffect)((function(){g&&(S.current=h,E.current=m,b.current=p,T.current=v,P(),A())}),[h,m,p,v,g]),(0,Gt.useEffect)((function(){void 0!==_&&_!==s&&(P(),A())}),[s]),{subscribeOnStreamChannel:C,unsubscribeFromStreamChannel:w}},YU=function(e){var t=(0,Vt.v9)(Hw),n=bk(null==t?void 0:t.blogUrl).canView,r=e.banStatus;return{shouldShowBanDisclaimer:!n&&r.any}},KU=(0,Gt.createContext)({banStatus:{any:!1,total:!1,readonly:!1}}),qU=function(){return(0,Gt.useContext)(KU)},XU=function(){return XU=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},XU.apply(this,arguments)},QU=(0,Gt.createContext)(null),JU=function(){return(0,Gt.useContext)(QU)},ZU=(Gt.createContext({isPossibleToAdd:!0}),function(){return ZU=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ZU.apply(this,arguments)}),$U=function(e){var t=e.start,n=e.end,r=ko(t,n),o=r.days,a=r.hours-24*o,i=r.minutes-60*a-24*o*60;return{days:o,hours:a,minutes:i,seconds:r.seconds-60*i-60*a*60-24*o*60*60}},eB=1e3,tB=function(){return tB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tB.apply(this,arguments)},nB=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},rB=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},oB=function(e){var t=e.initialQuery,n=e.search,r=e.limit,o=void 0===r?20:r,a=e.onResultChange,i=void 0===a?Yt.noop:a,l=e.onNetworkStatusChange,s=void 0===l?Yt.noop:l,c=nB(Gt.useState({items:[],isLast:!0,offset:null}),2),u=c[0],d=c[1],f=nB(Gt.useState({isFetching:!1,isFetched:!1,error:null}),2),m=f[0],p=f[1],h=function(e,t){return void 0,void 0,a=function(){var r,a,i,l;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),p((function(e){return tB(tB({},e),{isFetching:!0,isFetched:!1,error:null})})),r=(null==t?void 0:t.isNextPage)?u.offset:null,[4,n({query:e,offset:r,limit:o})];case 1:return a=s.sent(),i=(null==a?void 0:a.items)||[],d((function(e){return{items:(null==t?void 0:t.isNextPage)?rB(rB([],nB(e.items),!1),nB(i),!1):i,isLast:a.isLast,offset:a.offset}})),p((function(e){return tB(tB({},e),{isFetching:!1,isFetched:!0,error:null})})),[3,3];case 2:return l=s.sent(),p((function(e){return tB(tB({},e),kr(l))})),[3,3];case 3:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function o(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof r?a:new r((function(e){e(a)}))).then(n,o)}i((a=a.apply(undefined,[])).next())}));var r,a};return(0,Gt.useEffect)((function(){i({data:u})}),[u]),(0,Gt.useEffect)((function(){s(m)}),[m]),(0,Gt.useEffect)((function(){t&&!u.items.length&&h(t)}),[]),{items:u.items,isLast:u.isLast,networkStatus:m,onSearch:h,onClearResult:function(){d({items:[],isLast:!0,offset:null})}}},aB=function(e,t){return e.deleted&&!t.deleted?1:!e.deleted&&t.deleted?-1:0},iB=function(e){var t=e.blogUrl,n=e.showDeleted,r=void 0===n||n,o=e.keepDeletedAtTheEnd,a=void 0===o||o,i=e.showFree,l=void 0===i||i,s=(0,Vt.I0)(),c=(0,Vt.v9)(EL),u=(0,Vt.v9)(bL),d=(0,Vt.v9)(NL),f=function(){s(qp.action({blogUrl:t,showDeleted:r}))};(0,Gt.useEffect)((function(){f()}),[t]);var m=(0,Gt.useMemo)((function(){return r?a?c.sort(aB):c:u}),[r,a,c,u]),p=(0,Gt.useMemo)((function(){return l?m:m.filter((function(e){return e.price>0}))}),[m,l]);return{fetchCurrentBlogSubscriptionLevels:f,subscriptionLevels:p,subscriptionLevelsNetworkStatus:d}},lB=function(e){var t=e.realCheckedState,n=e.promise,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(t),2),o=r[0],a=r[1];return(0,Gt.useEffect)((function(){t!==o&&a(t)}),[t]),{isChecked:o,optimisticToggle:function(e){return void 0,void 0,r=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:a(!(t=o)),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n(e)];case 2:return r.sent(),[3,4];case 3:return r.sent(),a(t),[3,4];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function o(e){try{i(r.next(e))}catch(e){n(e)}}function a(e){try{i(r.throw(e))}catch(e){n(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var t,r}}},sB=function(e){var t=void 0===e?{initialOpened:!1,throttleMs:0}:e,n=t.initialOpened,r=void 0!==n&&n,o=t.throttleMs,a=void 0===o?100:o,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(r),2),l=i[0],s=i[1],c=(0,Gt.useRef)(!1),u=(0,Gt.useCallback)((function(){c.current=!0,setTimeout((function(){c.current=!1}),a)}),[]),d=(0,Gt.useCallback)((function(){c.current||(s(!0),u())}),[]),f=(0,Gt.useCallback)((function(){c.current||(s(!1),u())}),[]),m=(0,Gt.useCallback)((function(){c.current||(s(!l),u())}),[l]);return{isOpened:l,open:d,close:f,toggleOpen:m}},cB=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},uB=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},dB=n(72779),fB=n.n(dB),mB=function(){return mB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mB.apply(this,arguments)},pB=function(e){var t=e.className,n=e.classNameSvg,r=e.glyph,o=e.onClick,a=e.title,i=e.style,l=void 0===i?{}:i,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","classNameSvg","glyph","onClick","title","style"]);return Gt.createElement("span",{className:fB()("Icon_block_Hvwi5",t),onClick:o,title:a,style:l},Gt.createElement("svg",mB({className:fB()("Icon_svg__DRUh",n)},s),Gt.createElement("use",{xlinkHref:"#".concat(r.id)})))},hB=n(22696),vB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vB(t,e),t.prototype.render=function(){var e=this.props,t=e.classNames,n=t.block,r=t.icon,o=t.tooltip,a=e.onClick,i=e.children;return Gt.createElement("div",{className:fB()("Hint_block_JvH8x",n),onClick:a},Gt.createElement(pB,{glyph:hB.qE2,className:fB()("Hint_icon_m3vrk",r)}),Gt.createElement("div",{className:fB()("Hint_tooltip_lwcp9",o)},i))},t.defaultProps={classNames:{}},t}(Gt.PureComponent);const yB="TabItem_container_VSqU9",_B="TabItem_active_lXfvy";var EB,bB,SB=function(e){var t,n=e.className,r=e.title,o=e.onClick,a=e.active,i=e.id;return Gt.createElement("span",{onClick:o,className:fB()(yB,(t={},t[_B]=a,t),n),id:i},r)},TB=function(e){var t,n=e.className,r=e.iconClassName,o=e.icon,a=e.title,i=e.onClick,l=e.url,s=e.id,c=e.active;return Gt.createElement(jt.OL,{onClick:i,to:l,className:fB()(yB,n,(t={},t[_B]=c,t)),id:s},Gt.createElement(pB,{glyph:o,className:fB()("TabItem_icon_FVk_2",r)}),a)},IB=function(){return IB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},IB.apply(this,arguments)},NB=function(e){return e.url?Gt.createElement(TB,IB({},e)):Gt.createElement(SB,IB({},e))},CB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeIndex:t.props.activeTab||0},t.isActive=function(e){return t.state.activeIndex===e},t.onClick=function(e,n){t.setState({activeIndex:e})},t}return CB(t,e),t.prototype.componentDidMount=function(){var e=this.props.activeTab;e&&this.setState({activeIndex:e})},t.prototype.componentDidUpdate=function(e){var t=this.props.activeTab;e.activeTab!==t&&this.setState({activeIndex:t})},t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.classNameActive,o=t.children;return Gt.createElement("nav",{className:fB()("AsideTabs_wrapper__I8NM",n)},Gt.Children.map(o,(function(t,n){var o;return t?Gt.cloneElement(t,{className:fB()(t.props.className,(o={},o[r]=e.isActive(n),o)),active:e.isActive(n),onClick:function(t){e.onClick(n,t)}},t.props.title):null})))},t.Tab=NB,t}(Gt.Component),OB=((EB={})[g.XXXS]=16,EB[g.XXS]=20,EB[g.XXS_OVERSIZE]=25,EB[g.XS]=30,EB[g.XS_PLUS]=32,EB[g.XS_OVERSIZE]=35,EB[g.S]=40,EB[g.S_PLUS_EXTRA]=46,EB[g.S_PLUS]=42,EB[g.S_OVERSIZE]=50,EB[g.S_MAX]=55,EB[g.SM]=60,EB[g.SM_OVERSIZE]=65,EB[g.SMM]=70,EB[g.M]=75,EB[g.L]=80,EB),AB=((bB={})[fa.ProviderCodes.FB]={glyph:hB.a0s,classNameIcon:"Avatar_fbIcon_kBOQA",classNameContainer:"Avatar_fbContainer_TUslu"},bB[fa.ProviderCodes.Google]={glyph:hB.pGr,classNameIcon:"",classNameContainer:"Avatar_googleContainer_MSwGO"},bB[fa.ProviderCodes.Youtube]={glyph:hB.iQP,classNameIcon:"Avatar_youtubeIcon_Ei4A2",classNameContainer:"Avatar_youtubeContainer_N7fmT"},bB[fa.ProviderCodes.MailRu]={glyph:hB.l6t,classNameIcon:"Avatar_mailIcon_XlNZF",classNameContainer:"Avatar_mailContainer_U0xqy"},bB[fa.ProviderCodes.OK]={glyph:hB.Fvb,classNameIcon:"Avatar_okIcon_QcU9I",classNameContainer:"Avatar_okContainer__jzDz"},bB[fa.ProviderCodes.VK]={glyph:hB.LuJ,classNameIcon:"Avatar_vkIcon_MDE9q",classNameContainer:"Avatar_vkContainer_EbwxT"},bB[fa.ProviderCodes.Twitch]={glyph:hB.z$6,classNameIcon:"Avatar_twitchIcon_mSsG4",classNameContainer:"Avatar_twitchContainer_QRjQ9"},bB),PB=function(e){var t=e.img,n=e.className,r=e.size,o=void 0===r?g.S:r,a=e.providerType,i=e.onClick,l=OB[o],s={width:l,height:l},c=pa(a),u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),d=u[0],f=u[1];return Gt.createElement("div",{className:fB()("Avatar_block_sxeSg",n),onClick:i},t&&!d&&Gt.createElement("img",{src:Bo({url:t,width:l,height:l}),alt:"avatar",className:"Avatar_avatar_heWdk",height:l,style:s,width:l,onError:function(){f(!0)},onLoad:function(e){var t=e.currentTarget,n=t.naturalHeight,r=t.naturalWidth;1===n&&1===r&&f(!0)}}),(!t||d)&&Gt.createElement("div",{className:"Avatar_defaultAvatar_zi324",style:s},Gt.createElement(pB,{glyph:hB.Ru6,className:"Avatar_icon_J8HI9"})),c&&AB[c]&&Gt.createElement("div",{className:fB()("Avatar_providerIconContainer_WMEg6",AB[c].classNameContainer)},Gt.createElement(pB,{className:fB()("Avatar_providerIcon_ueHtI",AB[c].classNameIcon),glyph:AB[c].glyph})))};const LB={small:"Badge_small_BOk2J",medium:"Badge_medium__VweM",large:"Badge_large_yxPYN",fadeIn:"Badge_fadeIn_LASQu"};var RB=function(e){var t,n=e.classNames,r=void 0===n?{}:n,o=e.pixelSize,a=e.size,i=e.badge,l=i.smallUrl,s=i.mediumUrl,c=i.largeUrl,u=i.name,d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((t={},t[Y.SMALL]=["18",LB.small,l,s],t[Y.MEDIUM]=["36",LB.medium,s,c],t[Y.LARGE]=["72",LB.large,c,null],t[Y.ORIGINAL]=["72",LB.large,c,null],t)[a]||["36",LB.small,l,s],4),f=d[0],m=d[1],p=d[2],h=d[3];return Gt.createElement("div",{className:fB()(m,r.root)},Gt.createElement("img",{className:fB()(LB.image,r.image),src:p,srcSet:h?"".concat(h," 2x"):null,width:o||f,height:o||f,alt:u}))},kB=function(){return kB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kB.apply(this,arguments)},DB=(0,Gt.forwardRef)((function(e,t){var n=e.dataAttributes,r=e.testId,o=e.isDisabled,a=e.children,i=e.onClick,l=e.onMouseDown,s=e.className,c=e.type,u=void 0===c?"button":c,d=e.autoFocus,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["dataAttributes","testId","isDisabled","children","onClick","onMouseDown","className","type","autoFocus"]);return Gt.createElement("button",kB({ref:t,type:u,className:fB()("BaseButton_button_yO8r5",s),disabled:o,onClick:i,onMouseDown:l,autoFocus:d},f,n,Na(r)),a)}));DB.displayName=jd(DB);var UB,BB=DB;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.AZURE_RADIANCE=1]="AZURE_RADIANCE"}(UB||(UB={}));var xB=function(){return xB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xB.apply(this,arguments)},MB=(0,Gt.forwardRef)((function(e,t){var n,r=e.withIcon,o=e.isActivated,a=e.className,i=e.bgColor,l=void 0===i?UB.DEFAULT:i,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["withIcon","isActivated","className","bgColor"]);return Gt.createElement(BB,xB({ref:t,className:fB()("ContainedButton_button_mJG1l",a,(n={},n.ContainedButton_disabled_xyhyE=e.isDisabled||e.disabled,n.ContainedButton_withIcon_DqSMT=r,n.ContainedButton_activated_RwGzY=o,n.ContainedButton_colorDefault_fJta6=l===UB.DEFAULT,n.ContainedButton_colorAzureRadiance_ZYNYd=l===UB.AZURE_RADIANCE,n))},s),e.children)}));MB.displayName=jd(MB);var FB=MB,GB=function(){return GB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},GB.apply(this,arguments)},HB=function(e){var t,n=e.withIcon,r=e.className,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["withIcon","className"]);return Gt.createElement(BB,GB({},o,{className:fB()("OutlinedButton_button_gVLJD",r,(t={},t.OutlinedButton_disabled_eJ2hB=o.isDisabled,t.OutlinedButton_withIcon_IU2Ea=n,t))}),o.children)},WB=function(){return WB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},WB.apply(this,arguments)},VB=function(e){var t=e.className,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className"]);return Gt.createElement("button",WB({},n,{className:fB()("LinkButton_button_LwwDl",t)}),n.children)},jB=function(){return jB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jB.apply(this,arguments)},zB=function(e){var t=e.dataAttributes,n=e.isDisabled,r=e.children,o=e.onClick,a=e.onMouseDown,i=e.className,l=e.type,s=void 0===l?"button":l,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["dataAttributes","isDisabled","children","onClick","onMouseDown","className","type"]);return Gt.createElement("button",jB({},c,{className:fB()("InlineButton_inlineBtn_YwyQe",i),disabled:n,onClick:o,onMouseDown:a,type:s},t),r)},YB=function(){return YB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},YB.apply(this,arguments)},KB=function(e){var t,n,r=e.classNames,o=void 0===r?{}:r,a=e.title,i=e.content,l=e.footer,s=e.testIds,c=e.isBreakWords,u=e.isBordered;return Gt.createElement("div",YB({className:fB()("Board_container_ArScH",o.root,(t={},t.Board_containerBordered_VvGaG=u,t))},Na(null==s?void 0:s.root)),a&&Gt.createElement("div",YB({className:fB()("Board_title_hEZvy",o.title)},Na(null==s?void 0:s.title)),a),i&&Gt.createElement("div",YB({className:fB()("Board_content_GwSAl",(n={},n.Board_breakWord_tg1tn=c,n))},Na(null==s?void 0:s.content)),i),l&&Gt.createElement("div",YB({className:"Board_footer_zT7Yz"},Na(null==s?void 0:s.footer)),l))},qB=function(e){var t=e.className,n=e.titleClassName,r=e.title,o=e.onClick,a=e.containerRef,i=e.children,l=e.customStyles;return Gt.createElement("div",{className:fB()("Card_block_ezGsl",t),style:l,ref:a,onClick:o},r&&Gt.createElement("div",{className:fB()("Card_title_JIPZ2",n)},r),i)},XB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),QB=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isChecked:t.props.isDefaultChecked},t.onClick=function(){var e=t.props,n=e.onToggle,r=e.isDisabled,o=e.checked;r||(Object.prototype.hasOwnProperty.call(t.props,"checked")?n(!o):t.setState((function(e){return{isChecked:!e.isChecked}}),(function(){return n(t.state.isChecked)})))},t}return XB(t,e),t.prototype.getCheckedState=function(){return Object.prototype.hasOwnProperty.call(this.props,"checked")?this.props.checked:this.state.isChecked},t.prototype.render=function(){var e=this.props.render;return Gt.createElement("div",{onClick:this.onClick,className:this.props.className},e({isChecked:this.getCheckedState()}))},t.defaultProps={isDefaultChecked:!1},t}(Gt.PureComponent);const JB="CirclesAnimation_animatedRing_SEnmL";var ZB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ZB(t,e),t.prototype.render=function(){return Gt.createElement("div",{className:"CirclesAnimation_wrapper_BLZ9e"},this.props.isAnimated&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:JB}),Gt.createElement("div",{className:fB()(JB,"CirclesAnimation_delay_LFf2R")})),Gt.createElement("div",{className:"CirclesAnimation_content_Dfcn9"},this.props.children))},t}(Gt.PureComponent),ex=n(74050),tx=["Su","Mo","Tu","We","Th","Fr","Sa"],nx=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"];const rx={arrowContainer:"DatePicker_arrowContainer_SmJPA",arrowIcon:"DatePicker_arrowIcon_AQQGR",arrowPrev:"DatePicker_arrowPrev_yf92d",footer:"DatePicker_footer_v3znw",button:"DatePicker_button_JSRID",accept:"DatePicker_accept_VlUn4",root:"DatePicker_root_Oy3lz",fadeIn:"DatePicker_fadeIn_iuIrd"};var ox=(0,Qr.getTranslation)("@common/components.ui.DatePicker"),ax=function(e){var t=e.className;return Gt.createElement("div",{className:rx.arrowContainer},Gt.createElement(pB,{glyph:hB.y9O,className:fB()(rx.arrowIcon,t)}))},ix=function(e){var t=e.className,n=e.defaultValue,r=e.minDate,o=e.maxDate,a=e.onAccept,i=e.onCancel,l=e.onTileDisabled,s=e.onActiveDateChange,c=e.onChange,u=e.onClickMonth,d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(n),2),f=d[0],m=d[1],p=n!==f;return Gt.createElement("div",{className:fB()(rx.root,t)},Gt.createElement(ex.ZP,{showFixedNumberOfWeeks:!0,value:f,tileDisabled:l,onActiveDateChange:s,onClickMonth:u,selectRange:!0,onChange:function(e){m(e),c(e)},minDate:r,maxDate:o,formatShortWeekday:function(e,t){return(nr().locale===ce.EN?tx:nx)[t.getDay()]},locale:nr().locale===ce.EN?"en-US":"ru-RU",navigationLabel:function(e){var t=e.date;return go(No(t),"LLLL/yyyy").toUpperCase()},prevLabel:Gt.createElement(ax,{className:rx.arrowPrev}),nextLabel:Gt.createElement(ax,null)}),Gt.createElement("div",{className:rx.footer},Gt.createElement(FB,{className:fB()(rx.button,rx.accept),onClick:function(){return a(f)},isDisabled:!p},ox.accept),Gt.createElement(HB,{className:fB()(rx.button,rx.cancel),onClick:function(){return i()}},ox.cancel)))},lx=n(96090),sx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cx={entering:"FadeIn_entering_S45QR",entered:"FadeIn_entered_uFjQ8",exiting:"FadeIn_exiting_Xdrrj",exited:"FadeIn_exited_F4xW6"},ux=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sx(t,e),t.prototype.render=function(){var e=this,t=null!=this.props.in,n=this.props.timeout||0,r=!t||this.props.in;return Gt.createElement(lx.Transition,{appear:!t,timeout:n,in:r},(function(t){return e.props.children(fB()("FadeIn_fade_ecikC",cx[t]))}))},t}(Gt.Component),dx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fx=(0,Qr.getTranslation)("@common/components.ui.FileButton"),mx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return dx(t,e),t.prototype.render=function(){var e,t=this.props,n=t.id,r=t.format,o=t.onChange,a=t.name,i=t.isValid,l=void 0===i||i,s=t.children,c=t.className,u=Array.isArray(r)?r.join(","):r;return Gt.createElement("div",{className:"FileButton_container_S5fmr"},Gt.createElement("label",{htmlFor:n,className:fB()(c,"FileButton_label_wRR_W",(e={},e.FileButton_error_Gu8wj=!l,e))},Gt.createElement("input",{accept:u,className:"FileButton_input__fX_o",id:n,name:a,onChange:o,type:"file"}),Boolean(s)?s:Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{glyph:hB.VSK,className:"FileButton_icon_Owzfl"}),Gt.createElement("span",{className:"FileButton_text_sAKVP"},fx.chooseFile))))},t}(Gt.Component),px=function(e){var t=e.text,n=e.className;return Gt.createElement("div",{className:fB()("FileDescription_container__GxKK",n)},t)};const hx={standard:"Form_standard_f_1gD",small:"Form_small_VtkRg"};var vx,gx,yx,_x,Ex,bx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(e){e.preventDefault(),t.props.onSubmit(e)},t}return bx(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children;return Gt.createElement("form",{className:fB()(hx.block,t),onSubmit:this.onSubmit},n)},t.defaultProps={onSubmit:Yt.noop},t}(Gt.Component),Tx=function(){return Tx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tx.apply(this,arguments)},Ix=function(e){var t,n=e.children,r=e.className,o=e.isSmallIndent,a=e.testId;return Gt.createElement("div",Tx({className:fB()((t={},t[hx.standard]=!o,t[hx.small]=o,t),r)},Na(a)),n)},Nx=function(e){var t=e.title,n=e.buttons,r=e.children;return Gt.createElement("div",{className:"FormCard_container_w_Zgu"},t&&Gt.createElement("div",{className:"FormCard_head_N18EM"},t),r&&Gt.createElement("div",{className:"FormCard_body_xVqFu"},r),n&&Gt.createElement("div",{className:"FormCard_footer_sgGdX"},n))},Cx=function(e){return function(t){return t.prototype.getTestId=oo(e),t}};!function(e){e.ROOT="ROOT",e.CONTENT="CONTENT"}(vx||(vx={})),(Ex=gx||(gx={})).HOVER="hover",Ex.CLICK="click",(_x=yx||(yx={})).CENTER="center",_x.LEFT="left",_x.RIGHT="right",_x.CENTER_TOP="centerTop",_x.CENTER_BOTTOM="centerBottom",_x.LEFT_TOP="leftTop",_x.RIGHT_TOP="rightTop",_x.CENTER_VIEWPORT="centerViewport",_x.RIGHT_TOP_ALIGNED="rightTopAligned",_x.BOTTOM_RIGHT_ALIGNED="bottomRightAligned";var wx=function(e){var t=xf().search,n=(0,Do.parse)(t),r=(null==n?void 0:n.comment)&&"string"==typeof n.comment&&n.comment===e.toString();return(0,Gt.useEffect)((function(){if(r&&"string"==typeof n.comment){var e=document.getElementById("comment:".concat(n.comment));e&&wf(e,{onScrolled:function(){var e,t;e=n.comment,(t=document.getElementById("comment:".concat(e)))&&(t.classList.add("flashing"),setTimeout((function(){t.classList.remove("flashing")}),3e3))}})}}),[r]),{isHighlighted:r}};const Ox={content:"TooltipPortal_content_Vmttd",root:"TooltipPortal_root_Aj3na",center:"TooltipPortal_center_KscFY",right:"TooltipPortal_right_h30lY",left:"TooltipPortal_left_eGFWw",leftTop:"TooltipPortal_leftTop_WMNYn",centerViewport:"TooltipPortal_centerViewport_QlXXK",placeholder:"TooltipPortal_placeholder_p0fTg",fadeIn:"TooltipPortal_fadeIn_g2ap2"};var Ax=function(e){e.stopPropagation()},Px=function(e){var t=e.classNames,n=e.onClickOutSide,r=e.onMouseLeave,o=e.tooltipRef,a=e.align,i=e.content,l=e.children,s=function(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)({y:0,x:0}),2),t=e[0],n=e[1],r=function(){return n({x:window.scrollX,y:window.scrollY})};return(0,Gt.useEffect)((function(){return window.addEventListener("scroll",r),r(),function(){window.removeEventListener("scroll",r)}}),[]),t}(),c=function(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)({width:0,height:0}),2),t=e[0],n=e[1],r=function(){return n({width:window.innerWidth,height:window.innerHeight})};return(0,Gt.useEffect)((function(){return window.addEventListener("resize",r),window.addEventListener("orientationchange",r),r(),function(){window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r)}}),[]),t}(),u=fk().theme,d=o.current,f=d.clientWidth,m=d.clientHeight,p=d.getBoundingClientRect(),h=p.x,v=p.y,g=(0,Gt.useMemo)((function(){return{top:v,left:a===yx.CENTER_VIEWPORT?0:h,width:a===yx.CENTER_VIEWPORT?"100%":"".concat(f,"px"),height:"".concat(m,"px")}}),[s,c]);return(0,Ht.createPortal)(Gt.createElement("div",{className:fB()(t.root,Ox.root,u),onClick:n},Gt.createElement("div",{className:Ox.placeholder,style:g,onMouseLeave:r},i,Gt.createElement("div",{className:fB()(t.content,Ox.content,Ox[a]),onClick:Ax},l))),document.getElementById("tooltip"))};const Lx={content:"Tooltip_content_ibUr0",root:"Tooltip_root_TzhW7",visible:"Tooltip_visible_wV169",byHover:"Tooltip_byHover_RQgvf",center:"Tooltip_center_Xx5Kx",right:"Tooltip_right_jk_wa",left:"Tooltip_left_MGWUv",centerTop:"Tooltip_centerTop_Okdcp",centerBottom:"Tooltip_centerBottom_lrsK1",leftTop:"Tooltip_leftTop_k2ZOS",rightTop:"Tooltip_rightTop_gNMN8",rightTopAligned:"Tooltip_rightTopAligned_ymL_z",bottomRightAligned:"Tooltip_bottomRightAligned_SAkWv",children:"Tooltip_children_VVh5K",hidden:"Tooltip_hidden_vYZFZ",fadeIn:"Tooltip_fadeIn_G6vyF"};var Rx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kx=function(){return kx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kx.apply(this,arguments)},Dx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isVisible:!1},t.tooltip=Gt.createRef(),t.onClick=function(){t.props.trigger===gx.CLICK&&t.setVisibility(!0)},t.onGlobalMouseOver=function(){t.props.trigger===gx.HOVER&&t.props.isGlobal&&!t.state.isVisible&&t.setVisibility(!0)},t.onGlobalMouseEnter=function(){t.props.trigger===gx.HOVER&&t.props.isGlobal&&t.setVisibility(!0)},t.onGlobalMouseLeave=function(){t.props.trigger===gx.HOVER&&t.props.isGlobal&&t.setVisibility(!1)},t.onGlobalClickOutSide=function(e){e.stopPropagation(),t.props.trigger===gx.CLICK&&(t.setVisibility(!1),t.props.onClickOutside(e))},t.onClickOutside=function(e){t.props.isGlobal||t.tooltip.current&&t.tooltip.current.contains(e.target)||(t.setVisibility(!1),t.props.onClickOutside(e))},t.onKeyUp=function(e){e.key===ae.ESCAPE&&(t.setVisibility(!1),t.props.onClickOutside(e))},t}return Rx(t,e),t.prototype.componentDidMount=function(){this.props.isGlobal||window.addEventListener("click",this.onClickOutside,!0),window.addEventListener("keyup",this.onKeyUp),window.addEventListener("visibilitychange",this.onGlobalMouseLeave),window.addEventListener("touchstart",this.onGlobalMouseLeave)},t.prototype.componentWillUnmount=function(){this.props.isGlobal||window.removeEventListener("click",this.onClickOutside,!0),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("visibilitychange",this.onGlobalMouseLeave),window.removeEventListener("touchstart",this.onGlobalMouseLeave)},t.prototype.setVisibility=function(e){var t=this;e?this.props.onTooltipOpen():this.props.onTooltipClose(),this.setState((function(n){return n.isVisible!==e&&(e?t.props.onDrop():t.props.onCollapse()),t.props.onVisibilityChange(e),{isVisible:e}}))},t.prototype.render=function(){var e,t,n=this.props,r=n.classNames,o=n.content,a=n.children,i=n.trigger,l=n.align,s=n.isGlobal,c=this.state.isVisible,u=Boolean(s&&c&&o);return Gt.createElement("div",kx({ref:this.tooltip,className:fB()(Lx.root,r.root,(e={},e[Lx.byHover]=i===gx.HOVER&&!s,e[Lx.visible]=c&&!s,e)),onClick:this.onClick,onMouseEnter:this.onGlobalMouseEnter,onMouseOver:this.onGlobalMouseOver},Na(this.getTestId(vx.ROOT))),o&&Gt.createElement("div",kx({className:fB()(Lx.content,r.content,Lx[l])},Na(this.getTestId(vx.CONTENT))),o),u&&Gt.createElement(Px,{onMouseLeave:this.onGlobalMouseLeave,classNames:r,onClickOutSide:this.onGlobalClickOutSide,tooltipRef:this.tooltip,align:l,content:a},o),Gt.createElement("div",{className:fB()(Lx.children,r.childrenWrapper,(t={},t[Lx.hidden]=u,t))},a))},t.defaultProps={classNames:{},trigger:gx.HOVER,align:yx.CENTER,isGlobal:!1,onClickOutside:Yt.noop,onDrop:Yt.noop,onCollapse:Yt.noop,onVisibilityChange:Yt.noop,onTooltipOpen:Yt.noop,onTooltipClose:Yt.noop},function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}([Cx("Tooltip")],t)}(Gt.Component),Ux=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ux(t,e),t.prototype.render=function(){var e=this.props,t=e.classNames,n=e.children,r=e.tooltipAlign,o=e.tooltipTrigger,a=e.icon,i=void 0===a?hB.qE2:a;return Gt.createElement(Dx,{classNames:{root:t.tooltip,content:t.tooltipContent},align:r||yx.RIGHT,trigger:o,content:Gt.createElement("div",{className:"HintWithIcon_container_QaGHz"},n)},Gt.createElement(pB,{glyph:i,className:fB()("HintWithIcon_icon_qq9bs",t.icon)}))},t.defaultProps={classNames:{}},t}(Gt.PureComponent);const xx="InputField_inputField_vzhmi",Mx="InputField_invalid_Og_tf";var Fx=function(){return Fx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fx.apply(this,arguments)},Gx=function(e){var t,n=e.innerRef,r=e.className,o=e.autoFocus,a=e.disabled,i=e.id,l=e.isValid,s=e.maxLength,c=e.name,u=e.onBlur,d=e.onChange,f=e.onFocus,m=e.onKeyDown,p=e.onKeyUp,h=e.placeholder,v=e.value,g=e.dataAttributes,y=e.autocomplete,_=e.readonly,E=e.type,b=e.style,S=e.tabIndex;return Gt.createElement("input",Fx({ref:n,style:b,className:fB()(xx,(t={},t[Mx]=!l,t),r),disabled:a,autoFocus:o,id:i,maxLength:s,name:c,onBlur:u,onChange:d,onFocus:f,onKeyDown:m,onKeyUp:p,placeholder:h,value:v,autoComplete:y,readOnly:_,type:E,tabIndex:S},g))},Hx=function(e){var t,n=e.innerRef,r=e.className,o=e.autoFocus,a=e.disabled,i=e.id,l=e.isValid,s=e.maxLength,c=e.name,u=e.onBlur,d=e.onChange,f=e.onFocus,m=e.onKeyDown,p=e.onKeyUp,h=e.placeholder,v=e.readonly,g=e.rows,y=void 0===g?10:g,_=e.value,E=e.tabIndex,b=e.dataAttributes,S=e.testId;return Gt.createElement("textarea",Fx({ref:n,className:fB()(xx,"InputField_textArea_RURQi",(t={},t[Mx]=!l,t),r),value:_,placeholder:h,id:i,autoFocus:o,disabled:a,name:c,onBlur:u,onChange:d,onFocus:f,onKeyDown:m,onKeyUp:p,maxLength:s,readOnly:v,rows:y,tabIndex:E},Na(S),b))},Wx=function(e){var t,n=e.innerRef,r=e.className,o=e.autoFocus,a=e.disabled,i=e.id,l=e.isValid,s=e.maxLength,c=e.name,u=e.onBlur,d=e.onChange,f=e.onFocus,m=e.onKeyDown,p=e.onKeyUp,h=e.placeholder,v=e.value,g=e.mask,y=e.dataAttributes,_=e.testId,E=e.guide,b=e.keepCharPositions,S=e.showMask,T=e.pipe,I=e.placeholderChar,N=e.type,C=e.autocomplete,w=e.readonly,O=e.tabIndex;return Gt.createElement(tm(),Fx({ref:n,className:fB()(xx,(t={},t[Mx]=!l,t),r),disabled:a,autoFocus:o,id:i,maxLength:s,name:c,onBlur:u,onChange:d,onFocus:f,onKeyDown:m,onKeyUp:p,placeholder:h,value:v,mask:g,guide:E,keepCharPositions:b,pipe:T,showMask:S,placeholderChar:I,type:N,autoComplete:C,readOnly:w,tabIndex:O},Na(_),y))},Vx=function(e){return e.mask?Gt.createElement(Wx,Fx({},e)):function(e){var t=e.multiline,n=e.rows;return!!t||!!n}(e)?Gt.createElement(Hx,Fx({},e)):Gt.createElement(Gx,Fx({},e))},jx=Gt.forwardRef((function(e,t){return Gt.createElement(Vx,Fx({innerRef:t},e))})),zx=function(e){var t=e.className,n=e.text,r=e.id,o=e.children;return n||o?Gt.createElement("label",{htmlFor:r,className:fB()("Label_label_jOBgY",t)},n||o):null},Yx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yx(t,e),t.prototype.render=function(){var e,t,n=this.props,r=n.className,o=n.classNames,a=void 0===o?{}:o,i=n.classNameRightElement,l=n.description,s=n.descriptionPosition,c=n.error,u=n.id,d=n.isValid,f=n.isRightElementShifted,m=n.isErrorInFlow,p=n.label,h=n.rightElement,v=n.bottomElement,g=Boolean(l)&&s===j.TOP,y=Boolean(l)&&s===j.BOTTOM;return Gt.createElement("div",{className:fB()("Input_container_M2APT",r)},Gt.createElement(zx,{text:p,id:u}),g&&Gt.createElement("div",{className:fB()("Input_descriptionTopCaption_JGfYd",Boolean(p)&&"Input_descriptionTopCaptionWithLabel_Qc94T")},Gt.createElement("span",null,l)),Gt.createElement("div",{className:"Input_inputContainer_lPXgf"},this.props.children,h&&Gt.createElement("div",{className:fB()("Input_rightElement_UfudP",(e={},e.Input_rightElementShifted_jneq1=f,e),i)},h),v&&Gt.createElement("div",{className:"Input_bottomElement_tCZoW"},v),!1===d&&Gt.createElement(pB,{glyph:hB.Ucq,className:"Input_invalidIcon_Z4HNH"})),y&&Gt.createElement("div",{className:"Input_descriptionBottomCaption_Nh7D_"},Gt.createElement("span",null,l)),c&&Gt.createElement("div",{className:fB()("Input_errorCaption_XG5D3",a.errorCaption,(t={},t.Input_errorCaptionStatic_lLxh3=m,t))},Gt.createElement("span",{role:"status",className:fB()("Input_error_n7k0B","Input_caption_oqN7G")},c)))},t.defaultProps={descriptionPosition:j.BOTTOM},t}(Gt.Component),qx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xx=function(){return Xx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xx.apply(this,arguments)},Qx=(0,Qr.getTranslation)("@common/components.ui.Input"),Jx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.staticValueRef=Gt.createRef(),t.state={value:"",paddingLeft:0},t.onChange=function(e){var n=t.props.onChange;n?n(e):t.setState({value:e.target.value})},t}return qx(t,e),t.prototype.componentDidMount=function(){if(this.staticValueRef.current){var e=this.staticValueRef.current,t=e.offsetWidth,n=e.offsetLeft;this.setState({paddingLeft:t+n-1})}},t.prototype.getValue=function(){return this.props.value||this.state.value},t.prototype.render=function(){var e=this.props,t=e.innerRef,n=e.autoFocus,r=e.className,o=e.classNameInput,a=e.classNameRightElement,i=e.classNameCounter,l=e.classNameErrorCaption,s=e.description,c=e.descriptionPosition,u=e.disabled,d=e.error,f=e.id,m=e.isValid,p=e.isRightElementShifted,h=e.label,v=e.limit,g=e.multiline,y=e.name,_=e.onBlur,E=e.onFocus,b=e.onKeyDown,S=e.onKeyUp,T=e.placeholder,I=e.rows,N=e.withCounter,C=e.staticValue,w=e.mask,O=e.rightElement,A=e.bottomElement,P=e.dataAttributes,L=e.testId,R=e.guide,k=e.keepCharPositions,D=e.showMask,U=e.pipe,B=e.placeholderChar,x=e.type,M=e.autocomplete,F=e.readonly,G=e.isErrorInFlow,H=this.state.paddingLeft,W=H?{paddingLeft:"".concat(H,"px")}:{};return Gt.createElement(Kx,{isErrorInFlow:G,className:r,classNameRightElement:a,isValid:m,error:d,label:h,description:s,descriptionPosition:c,id:f,rightElement:O,bottomElement:A,isRightElementShifted:p,classNames:{errorCaption:l}},C&&Gt.createElement("label",{ref:this.staticValueRef,htmlFor:f,className:"Input_staticText_b7u8D"},C),Gt.createElement(jx,{style:W,ref:t,className:o,autoFocus:n,disabled:u,id:f,isValid:m,maxLength:v,multiline:g,name:y,onBlur:_,onChange:this.onChange,onFocus:E,onKeyDown:b,onKeyUp:S,placeholder:T,rows:I,value:this.getValue(),mask:w,dataAttributes:P,testId:L,guide:R,keepCharPositions:k,pipe:U,placeholderChar:B,showMask:D,type:x,readonly:F,autocomplete:M}),N&&Gt.createElement("div",{className:fB()("Input_counter_P0joS",i)},Gt.createElement("span",null,this.getValue().length),v&&Gt.createElement("span",null," / ",v),Gt.createElement("span",{className:"Input_symbolsLabel_Tgvca"},Qx.symbols)))},t.defaultProps={className:"",autoFocus:!1,multiline:!1,isValid:!0,onBlur:Yt.noop,onFocus:Yt.noop,onKeyDown:Yt.noop,onKeyUp:Yt.noop,descriptionPosition:j.BOTTOM,dataAttributes:{},guide:!0,type:"text"},t}(Gt.Component),Zx=Gt.forwardRef((function(e,t){return Gt.createElement(Jx,Xx({innerRef:t},e))})),$x=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eM=function(){return eM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},eM.apply(this,arguments)},tM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getMask=function(){return function(e){return Fo(e)}},t.onChange=function(e){var n=t.props.onChange,r=e.target.value.replace(new RegExp("^\\+8(\\s\\(9.*)$"),"+7$1");n(r,$r(r))},t}return $x(t,e),t.prototype.render=function(){var e=this.props,t=e.innerRef,n=e.autoFocus,r=e.error,o=e.label,a=e.placeholder,i=e.description,l=e.name,s=e.value,c=e.rightElement,u=e.dataAttributes,d=e.guide,f=e.keepCharPositions,m=e.showMask,p=e.pipe,h=e.placeholderChar,v=e.isValid,g=e.isDisabled,y=e.onBlur,_=e.onFocus,E=e.onKeyDown,b=e.onKeyUp;return Gt.createElement(Zx,{ref:t,autoFocus:n,type:"tel",autocomplete:"tel",error:r,label:o,placeholder:a,description:i,onChange:this.onChange,onBlur:y,onFocus:_,onKeyDown:E,onKeyUp:b,name:l,value:s,disabled:g,rightElement:c,mask:this.getMask(),showMask:m,guide:d,keepCharPositions:f,placeholderChar:h,pipe:p,dataAttributes:u,isValid:v})},t.defaultProps={onChange:Yt.noop},t}(Gt.PureComponent),nM=Gt.forwardRef((function(e,t){return Gt.createElement(tM,eM({innerRef:t},e))})),rM=function(){return rM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rM.apply(this,arguments)},oM=function(e){var t=e.error,n=e.value,r=e.isGlobalMask,o=e.isMasked,a=void 0===o||o,i=e.onMaskVisibleChange,l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(a),2),s=l[0],c=l[1],u=r?a:s,d=Boolean(t);return Gt.createElement(Zx,rM({},e,{type:u?"password":"text",classNameInput:fB()("PasswordInput_input_qlnhm",d&&"PasswordInput_inputWithError_VbyNJ"),classNameRightElement:d&&"PasswordInput_iconWithError_CZxVJ",rightElement:Boolean(n)&&Gt.createElement(pB,{className:"PasswordInput_icon_EUgH6",glyph:u?hB.kGT:hB.tCy,onClick:function(){r?i(!a):c(!s)}})}))};const aM="Link_block_f6iQc",iM="Link_defaultStyled_t7118";var lM=function(){return lM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lM.apply(this,arguments)},sM=[ir.SUPPORT_CONTACT,ir.SETTINGS_EDIT,ir.SETTINGS_SUBSCRIPTIONS],cM=function(e){var t=e.className,n=e.to,r=e.noStyles,o=void 0!==r&&r,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","to","noStyles"]),i=xf().pathname,l=nr().isError,s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=/^(https?:\/\/|mailto:|javascript:)/.test(String(n))||l;return(0,Gt.useEffect)((function(){u(n===i&&!sM.includes(n))}),[n,i]),!n||c?Gt.createElement("span",lM({className:fB()(o?iM:aM,t)},a),a.children):d?Gt.createElement("a",lM({className:fB()(o?iM:aM,t)},a,{href:String(n)}),a.children):Gt.createElement(jt.rU,lM({className:fB()(o?iM:aM,t),to:n},a),a.children)},uM=function(e){var t;return Gt.createElement("div",{className:fB()("Spinner_loader_gVQ7j",e.className),style:{width:e.size,height:e.size}},Gt.createElement("svg",{className:"Spinner_circular_cF6R9",viewBox:"25 25 50 50"},Gt.createElement("circle",{className:fB()((t={},t.Spinner_path_ikk2a=!e.solid,t.Spinner_pathSolid_h6u_O=e.solid,t.Spinner_thick_InIT1=e.thick,t)),cx:"50",cy:"50",r:"20",fill:"none",strokeMiterlimit:"10"})))};uM.defaultProps={size:100};var dM=function(e){var t=e.className,n=e.size,r=void 0===n?50:n;return Gt.createElement("div",{className:fB()("Loader_root_yIe19",t)},Gt.createElement(uM,{size:r}))},fM=function(e){var t=e.sum,n=e.currency;return Gt.createElement(Gt.Fragment,null,Vr({amount:Number(t),currency:n,useGrouping:!0}))},mM=n(37492),pM=n.n(mM);const hM="Pagination_paginationItem_uhBIU",vM="Pagination_disabledItem_ECfNZ",gM="Pagination_arrow_EHNHE",yM="Pagination_link_ue3X_";var _M=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),EM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentPage:0},t.onPageChange=function(e){var n=e.selected;t.setState({currentPage:n},(function(){return t.props.onPageChange(n)}))},t}return _M(t,e),t.prototype.componentDidUpdate=function(e,t){var n=this.props.forcePage;void 0!==n&&n!==this.state.currentPage&&this.setState({currentPage:this.props.forcePage})},t.prototype.render=function(){var e,t,n=this.state.currentPage,r=this.props,o=r.pageCount,a=r.marginPages,i=r.ragesPagesLimit,l=r.initialPage,s=r.forcePage,c=r.className,u=r.itemClassName,d=r.disableInitialCallback,f=0===n,m=n===o-1;return Gt.createElement(pM(),{pageCount:o,pageRangeDisplayed:i,marginPagesDisplayed:a,containerClassName:fB()("Pagination_container_QIyLO",c),pageLinkClassName:fB()(hM,u),activeLinkClassName:"Pagination_paginationItemSelected_HgSpV",previousLabel:Gt.createElement("div",{className:fB()(hM,f&&vM,u)},Gt.createElement(pB,{glyph:hB.y9O,className:fB()(gM,(e={},e.Pagination_arrowDisabled_Q8U72=f,e))})),previousLinkClassName:yM,nextLabel:Gt.createElement("div",{className:fB()(hM,m&&vM,u)},Gt.createElement(pB,{glyph:hB.y9O,className:fB()(gM,"Pagination_arrowRight_Plt7p",(t={},t.Pagination_arrowDisabled_Q8U72=m,t))})),nextLinkClassName:yM,breakLabel:Gt.createElement("div",{className:"Pagination_ellipsis_oXO6_"},"..."),breakLinkClassName:yM,onPageChange:this.onPageChange,initialPage:l,forcePage:s,disableInitialCallback:d})},t.defaultProps={ragesPagesLimit:3,marginPages:1},t}(Gt.PureComponent),bM=n(11882),SM=function(e){var t=e.onOutsideClick,n=e.children;return Gt.createElement(bM.default,{onOutsideClick:t},n)},TM=n(40381),IM=function(e){var t,n=e.children,r=e.className,o=e.isAutoHeight,a=e.isVisible,i=e.getRef,l=void 0===i?function(){return null}:i,s=e.onClick,c=(0,Gt.useRef)(),u=(0,Gt.useRef)();return(0,Gt.useEffect)((function(){l(c.current)}),[]),(0,Gt.useEffect)((function(){return a?((0,TM.disableBodyScroll)(c.current,{reserveScrollBarGap:!0}),u.current=c.current):(0,TM.enableBodyScroll)(c.current),function(){(0,TM.enableBodyScroll)(u.current)}}),[a]),Gt.createElement("div",{ref:c,className:fB()("ScrollBox_scrollContainer_g0g0j",r,(t={},t.ScrollBox_scrollContainerFixedHeight_Sxrzx=!o,t)),onClick:s},n)},NM=function(){return NM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},NM.apply(this,arguments)},CM=function(e){var t=e.title,n=e.footer,r=e.styles,o=e.isHiddenClose,a=e.onClose,i=e.classNames,l=i.block,s=i.close,c=i.title,u=i.content,d=i.footer,f=e.testIds,m=e.children;return Gt.createElement("section",NM({className:fB()("PopupContent_block_P9UTg",l),style:r},Na(null==f?void 0:f.block)),!o&&Gt.createElement(pB,{className:fB()("PopupContent_close_s4F2c",s),glyph:hB.bMz,onClick:a}),t&&Gt.createElement("h2",{className:fB()("PopupContent_title_IHD2G",c)},t),Gt.createElement("div",{className:fB()("PopupContent_content_A2EA3",u)},m),n&&Gt.createElement("div",{className:fB()("PopupContent_footer_nPMmz",d)},n))};CM.defaultProps={onClose:Yt.noop,classNames:{}};var wM,OM=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AM=function(){return AM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},AM.apply(this,arguments)},PM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getPopupRef=function(e){t.props.getWrapperRef(e)},t.outsideClickHandler=function(){var e=t.props,n=e.isModal,r=e.onClose;n||r()},t.onCloseClick=function(){t.props.onClose()},t}return OM(t,e),t.prototype.componentWillUnmount=function(){var e=this.props,t=e.classNames.root;if(e.inPortal&&t){var n=document.getElementById("modal");null==n||n.classList.remove(t)}},t.prototype.render=function(){var e=this,t=this.props,n=t.classNames,r=n.wrapper,o=n.root,a=t.isColorful,i=t.inPortal,l=Gt.createElement(ux,null,(function(t){var n;return Gt.createElement(IM,{isVisible:!0,getRef:e.getPopupRef,className:fB()("Popup_wrapper_ZeN1U",t,r)},Gt.createElement(SM,{onOutsideClick:e.outsideClickHandler},Gt.createElement(CM,AM({},e.props,{classNames:AM(AM({},e.props.classNames),{block:fB()("Popup_block_EdudK",e.props.classNames.block,(n={},n.Popup_blockColorful_kSNX_=a,n))})}),a&&Gt.createElement("div",{className:"Popup_colorfulBg_h8rA6"},Gt.createElement("div",{className:"middleFlash"})),e.props.children)))}));if(i){var s=document.getElementById("modal");return o&&(null==s||s.classList.add(o)),(0,Ht.createPortal)(l,s)}return l},t.defaultProps={classNames:{},isModal:!0,getWrapperRef:Yt.noop,onClose:Yt.noop,inPortal:!1},t}(Gt.Component),LM=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.percent;return Gt.createElement("div",{className:fB()("ProgressBar_root_auf7c",n.root)},Gt.createElement("div",{className:fB()("ProgressBar_progressLine_mQ_fy",n.progressLine),style:{width:"".concat(r,"%")}}))},RM=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kM=function(){return kM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kM.apply(this,arguments)},DM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.containerRef=t.props.innerRef||Gt.createRef(),t.scrollTop=0,t.scrollLeft=0,t.scrollInterval=null,t.state={hasScrolled:!1},t.onScroll=function(e){var n=t.props.onScroll,r=t.containerRef.current,o=r.scrollTop,a=r.scrollLeft;o===t.scrollTop&&a===t.scrollLeft||(t.clearScrollInterval(),t.setState({hasScrolled:!0})),n&&n(e)},t.onResize=function(){t.setScrollInterval()},t}return RM(t,e),t.prototype.componentDidMount=function(){this.scroll(),this.setScrollInterval(),window.addEventListener("resize",this.onResize),window.addEventListener("orientationchange",this.onResize)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),window.removeEventListener("orientationchange",this.onResize),this.clearScrollInterval()},t.prototype.setScrollInterval=function(){var e,t=this;null===this.scrollInterval&&(null===(e=this.containerRef)||void 0===e?void 0:e.current)&&(this.scrollTop=this.containerRef.current.scrollTop,this.scrollLeft=this.containerRef.current.scrollLeft,this.scrollInterval=window.setInterval((function(){return t.scroll()}),100),this.setState({hasScrolled:!1}))},t.prototype.clearScrollInterval=function(){window.clearInterval(this.scrollInterval),this.scrollInterval=null},t.prototype.scroll=function(){var e;(null===(e=this.containerRef)||void 0===e?void 0:e.current)&&(this.containerRef.current.scrollTop+=1,this.containerRef.current.scrollTop-=1)},t.prototype.render=function(){var e=this.state.hasScrolled&&!this.props.onScroll?null:this.onScroll;return Gt.createElement("div",{ref:this.containerRef,className:fB()("ScrollableComponent_container_thZKg",this.props.className),onScroll:e},this.props.children)},t}(Gt.PureComponent),UM=Gt.forwardRef((function(e,t){return Gt.createElement(DM,kM({innerRef:t},e),e.children)})),BM=n(25491),xM=n.n(BM),MM=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),FM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={gotOnScreen:!1},t.onChange=function(e){e&&(t.setState({gotOnScreen:!0}),t.props.onShow())},t}return MM(t,e),t.prototype.render=function(){return Gt.createElement(xM(),{partialVisibility:!0,active:!this.state.gotOnScreen,onChange:this.onChange,delayedCall:!0},Gt.createElement("div",{className:fB()("VisibilityTracker_pixel_TDcEP",this.props.className)}))},t}(Gt.Component);!function(e){e.ROOT="ROOT",e.TOGGLE="TOGGLE",e.SIMPLE_OPTION="SIMPLE_OPTION",e.CHECKING_OPTION="CHECKING_OPTION"}(wM||(wM={}));var GM=function(e){var t=e.renderIcon,n=e.label,r=e.selected,o=void 0!==r&&r;return Gt.createElement(Gt.Fragment,null,Gt.createElement("span",{className:"LabelWithIcon_iconWrapper_hxzmp"},t({selected:o})),n)},HM=function(){return HM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},HM.apply(this,arguments)},WM=function(e){var t=e.label,n=e.isDisabled,r=e.labelClassName,o=e.checkboxClassName;return function(e){var a,i,l,s=e.isChecked;return Gt.createElement("div",{className:fB()("SimpleCheckBox_container_lZsmQ",(a={},a.SimpleCheckBox_containerDisabled_bJQ9v=n,a))},Gt.createElement("div",{className:fB()("SimpleCheckBox_checkbox_cnRA7",(i={},i.SimpleCheckBox_checked_ilnv6=s,i.SimpleCheckBox_checkboxDisabled_cg4dF=n,i),o)}),t&&Gt.createElement("div",{className:fB()("SimpleCheckBox_label_VqMNU",r,(l={},l.SimpleCheckBox_labelDisabled_DwH3w=n,l))},t))}},VM=function(e){var t=e.onToggle,n=void 0===t?Yt.noop:t,r=e.isDefaultChecked,o=e.label,a=e.isDisabled,i=e.containerClassName,l=e.labelClassName,s=e.checkboxClassName,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["onToggle","isDefaultChecked","label","isDisabled","containerClassName","labelClassName","checkboxClassName"]);return Gt.createElement(QB,HM({onToggle:n,isDefaultChecked:r,isDisabled:a,className:fB()("SimpleCheckBox_checkboxWrapper__Zcx4",i),render:WM({label:o,isDisabled:a,labelClassName:l,checkboxClassName:s})},c))},jM="SelectOption";const zM="SelectOption_option_U4zs3",YM="SelectOption_simpleOptionContainer_w0X09",KM="SelectOption_selected_sD0JY";var qM=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XM=function(){return XM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},XM.apply(this,arguments)},QM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.optionRef=Gt.createRef(),t}return qM(t,e),t.prototype.componentDidMount=function(){this.props.selected&&this.scrollToSelected()},t.prototype.scrollToSelected=function(){this.optionRef.current.parentElement.scrollTop=this.optionRef.current.offsetTop},t.prototype.render=function(){var e,t=this.props,n=t.id,r=t.value,o=t.valueObject,a=t.label,i=t.selected,l=t.onSelect,s=t.classNameOption,c=t.Component;return Gt.createElement("div",XM({ref:this.optionRef,className:fB()(zM,YM,(e={},e[KM]=i,e),s),onClick:function(){return l(o,!i)}},Na(this.getTestId(wM.SIMPLE_OPTION))),c?Gt.createElement(c,{id:n,valueObject:o,selected:i,label:a,value:r}):o&&"renderIcon"in o?Gt.createElement(GM,{renderIcon:o.renderIcon,label:a,selected:i}):a)},function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}([Cx(jM)],t)}(Gt.PureComponent),JM=oo(jM),ZM=function(e){var t,n=e.id,r=e.value,o=e.valueObject,a=e.label,i=e.selected,l=e.classNameOption,s=e.classNameOptionCheckBoxLabel,c=e.Component,u=e.disabled,d=e.onSelect,f=null!=c?"":a;return Gt.createElement("div",XM({title:a,className:fB()(zM,YM,(t={},t[KM]=i,t),l,u&&"SelectOption_disabled_edtCZ"),onClick:function(){return u?void 0:d(o,!i)}},Na(JM(wM.CHECKING_OPTION))),Gt.createElement(VM,{isDefaultChecked:i,label:f,checked:i,labelClassName:fB()("SelectOption_checkBoxLabel_OdpPq",s),checkboxClassName:"SelectOption_checkBox_fodf1"}),null!=c?Gt.createElement(c,{id:n,valueObject:o,selected:i,label:a,value:r}):null)},$M=function(e){return e.withCheckBox?Gt.createElement(ZM,XM({},e)):Gt.createElement(QM,XM({},e))};const eF={optionsContainer:"Select_optionsContainer_Tm6EZ",mainBox:"Select_mainBox_yfm53",disabled:"Select_disabled_ynU2M",invalid:"Select_invalid_sadpV",mainBoxActive:"Select_mainBoxActive_OFxob",arrow:"Select_arrow_rW0cm",noOptions:"Select_noOptions_wvs3Z",placeholder:"Select_placeholder_ORxRd",inline:"Select_inline_APdhk",error:"Select_error_rFT04",mainContainer:"Select_mainContainer_jbtdt",optionsContainerWrapper:"Select_optionsContainerWrapper_q7FnB",optionsContainerWrapperTop:"Select_optionsContainerWrapperTop_eaSKr",optionsContainerWrapperBottom:"Select_optionsContainerWrapperBottom_Sf_6w",optionsContainerTop:"Select_optionsContainerTop_M87YH",reset:"Select_reset_wHxFb",mainBoxInline:"Select_mainBoxInline_RPsGa",mainBoxInlineActive:"Select_mainBoxInlineActive_eVxjD",errorCaption:"Select_errorCaption_B4riC",inFlow:"Select_inFlow_lWn4b",caption:"Select_caption_xrBoP",invalidIcon:"Select_invalidIcon_MBjnH",fadeIn:"Select_fadeIn_P7Edz"};var tF=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nF=function(){return nF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nF.apply(this,arguments)},rF=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},oF=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},aF=(0,Qr.getTranslation)("@common/components.ui.Select"),iF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.optionsWrapperRef=Gt.createRef(),t.state={isOpened:!1,isTop:!1},t.mainBox=Gt.createRef(),t.getOption=function(e){return{label:String(e[t.props.labelProp]),value:String(e[t.props.valueProp]),id:String(e[t.props.valueProp]),valueObject:e}},t.getMainLabel=function(){var e=t.props,n=e.isMulti,r=e.selected,o=e.placeholder,a=e.classNames,i=e.Component;if(null!=t.props.selectionLabel)return t.props.selectionLabel;if(n&&r&&Array.isArray(r)&&r.length){var l=t.props.multiSelectedOptionsShownLimit||2;if(r.length<=l)return r.map((function(e){return t.getOption(e).label})).join(", ");var s=qr([aF.chosenSingle,aF.chosenMultiple,aF.chosenMultiple],r.length),c=qr([aF.pointsThen1,aF.pointsThen2,aF.pointsThen5],r.length);return"".concat(s," ").concat(r.length," ").concat(c)}if(r&&!Array.isArray(r)){var u=t.getOption(r);return i?Gt.createElement(i,nF({},u)):"object"==typeof u.valueObject&&"renderIcon"in u.valueObject?Gt.createElement(GM,{renderIcon:u.valueObject.renderIcon,label:u.label}):u.label}return Gt.createElement("span",{className:fB()(eF.placeholder,a.placeholder)},o)},t.calcIntersection=function(){var e=t.optionsWrapperRef.current.getBoundingClientRect().bottom;t.setState({isTop:window.innerHeight<=e})},t.onToggle=function(){var e=t.props.isDisabled,n=t.state.isOpened;e||(n?t.setState({isOpened:!1,isTop:!1}):n||t.setState({isOpened:!0},t.calcIntersection))},t.onDropdownHide=function(e){t.isMainBoxContainsTarget(e.target)||t.setState({isOpened:!1})},t.onSelect=function(e){var n=t.props,r=n.isMulti,o=n.valueProp,a=n.onSelect;if(!0===r){var i=null!=t.props.selected?t.props.selected:[];a(i.some((function(t){return t[o]===e[o]}))?i.filter((function(t){return e[o]!==t[o]})):oF(oF([],rF(i),!1),[e],!1))}else a(e),t.setState({isOpened:!1})},t.onReset=function(e){var n;e.stopPropagation(),null===(n=t.props)||void 0===n||n.onReset()},t}return tF(t,e),t.prototype.componentDidUpdate=function(e,t){!e.isDisabled&&this.props.isDisabled&&this.state.isOpened&&this.setState({isOpened:!1})},t.prototype.isSelected=function(e){var t=this.props,n=t.isMulti,r=t.selected,o=t.valueProp;return!0===n?null!=r&&r.some((function(t){return t[o]===e[o]})):Boolean(r)&&Boolean(e)&&r[o]===e[o]},t.prototype.isMainBoxContainsTarget=function(e){return this.mainBox.current.contains(e)},t.prototype.getOptions=function(){var e=this.props.options.map(this.getOption);return this.props.allowEmpty?oF([{value:null,id:null,valueObject:null,label:this.props.placeholder}],rF(e),!1):e},t.prototype.render=function(){var e,t,n,r=this,o=this.props,a=o.className,i=o.classNames,l=o.arrowIconGlyph,s=o.isDisabled,c=o.isInline,u=o.isMulti,d=o.options,f=o.label,m=o.error,p=o.disabledOptionValues,h=void 0===p?[]:p,v=o.onReset,g=o.isErrorInFlow,y=o.loadMoreCallback,_=o.loadMoreIsLoading,E=this.state,b=E.isOpened,S=E.isTop;return Gt.createElement("div",nF({className:fB()(eF.mainContainer,a,(e={},e[eF.inline]=c,e))},Na(this.getTestId(wM.ROOT))),f&&Gt.createElement(zx,{text:f}),Gt.createElement("div",nF({},Na(this.getTestId(wM.TOGGLE)),{ref:this.mainBox,className:fB()(i.mainBox,(t={},t[eF.mainBox]=!c,t[eF.mainBoxActive]=!c&&b,t[eF.mainBoxInline]=c,t[eF.mainBoxInlineActive]=c&&b,t[eF.disabled]=s,t[eF.invalid]=!!m,t)),onClick:this.onToggle}),Gt.createElement("span",{className:fB()(eF.mainLabel,i.mainLabel)},this.getMainLabel()),Boolean(v)&&!b&&Gt.createElement(pB,{glyph:hB.bMz,onClick:this.onReset,className:eF.reset}),m?Gt.createElement(pB,{glyph:hB.Ucq,className:eF.invalidIcon}):Gt.createElement(pB,{glyph:l||hB.y9O,className:fB()(eF.arrow,i.arrow)})),b&&Gt.createElement(Dx,{onClickOutside:this.onDropdownHide,trigger:gx.CLICK},Gt.createElement(UM,{ref:this.optionsWrapperRef,className:fB()(eF.optionsContainer,(n={},n[eF.optionsContainerTop]=S&&!f,n),i.options)},d?Gt.createElement(Gt.Fragment,null,this.getOptions().map((function(e){return Gt.createElement($M,nF({},e,{disabled:h.includes(e.value),selected:r.isSelected(e.valueObject),withCheckBox:u,onSelect:r.onSelect,key:e.id,classNameOption:i.option,classNameOptionCheckBoxLabel:i.optionCheckBoxLabel,Component:r.props.Component}))})),_?Gt.createElement(uM,{size:20}):y&&Gt.createElement(FM,{onShow:y})):Gt.createElement("span",{className:eF.noOptions},aF.noOptions))),m&&Gt.createElement("div",{className:fB()(eF.errorCaption,i.errorCaption,g&&eF.inFlow)},Gt.createElement("span",{className:fB()(eF.error,eF.caption)},m)))},t.defaultProps={classNames:{},allowEmpty:!1,labelProp:"label",valueProp:"value"},function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}([Cx("Select")],t)}(Gt.Component),lF=iF;const sF="Empty_button_HLJbk";var cF=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.icon,o=e.title,a=e.description,i=e.button,l=e.onClick,s=e.buttonView;return Gt.createElement("div",{className:fB()(n.root,"Empty_root_OkK8k")},Boolean(r)&&Gt.createElement(pB,{glyph:r,className:fB()("Empty_icon_wTZi3",n.icon)}),Boolean(n.picture)&&Gt.createElement("div",{className:fB()("Empty_picture_VecmE",n.picture)}),Gt.createElement("div",{className:"Empty_title_Ci0i7"},o),Gt.createElement("div",{className:"Empty_description_OZcDL"},a,Boolean(i)&&Gt.createElement(Gt.Fragment,null,"outlined"===s?Gt.createElement(HB,{className:sF,onClick:l},i):Gt.createElement(Gt.Fragment,null," ",Gt.createElement(VB,{className:sF,onClick:l},i)))))};const uF="TabItem_container_qGIZ6";var dF,fF=function(e){var t,n=e.className,r=e.title,o=e.onClick,a=e.active;return Gt.createElement("span",{onClick:o,className:fB()(uF,(t={},t.TabItem_active_RS5JT=a,t),n)},r)},mF=function(e){var t,n=e.className,r=e.title,o=e.onClick,a=e.url,i=e.active;return Gt.createElement(jt.OL,{onClick:o,to:a,className:fB()(uF,n,(t={},t.TabItem_active_RS5JT=i,t))},r)},pF=function(){return pF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pF.apply(this,arguments)},hF=function(e){return Boolean(e.url)?Gt.createElement(mF,pF({},e)):Gt.createElement(fF,pF({},e))},vF=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeIndex:t.props.activeTab||0},t.navRef=Gt.createRef(),t.isActive=function(e){return t.state.activeIndex===e},t.centerActiveTab=function(e){if(t.props.shouldCenterActiveTab){var n=t.navRef.current;n.scrollLeft=e.offsetLeft-n.offsetLeft+e.offsetWidth/2-n.offsetWidth/2}},t.afterOrientationChange=function(){t.onActiveTabChange(),window.removeEventListener("resize",t.afterOrientationChange)},t.onOrientationChange=function(){window.addEventListener("resize",t.afterOrientationChange)},t.onActiveTabChange=function(){var e=t.state.activeIndex,n=t.props.onChange,r=t.navRef.current.childNodes[e];n(e),r&&t.centerActiveTab(r)},t.onClick=function(e,n){var r=t.props.onChange;t.centerActiveTab(n.target),t.setState({activeIndex:e},(function(){return r(e)}))},t}return vF(t,e),t.prototype.componentDidMount=function(){var e=this.props.activeTab;e&&this.setState({activeIndex:e},this.onActiveTabChange),window.addEventListener("orientationchange",this.onOrientationChange)},t.prototype.componentWillUnmount=function(){window.removeEventListener("orientationchange",this.onOrientationChange)},t.prototype.componentDidUpdate=function(e){var t=this.props.activeTab;e.activeTab!==t&&this.setState({activeIndex:t},this.onActiveTabChange)},t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.classNameHead,o=t.classNameActive,a=t.classNameContent,i=t.children,l=t.withContent;return Gt.createElement("div",{className:n},Gt.createElement("nav",{ref:this.navRef,className:r},Gt.Children.map(i,(function(t,n){var r;return t?Gt.cloneElement(t,{className:fB()(t.props.className,(r={},r[o]=e.isActive(n),r)),active:e.isActive(n),onClick:function(t){e.onClick(n,t)}},t.props.title):null}))),l&&Gt.Children.map(i,(function(t,n){return t&&e.isActive(n)?Gt.createElement("section",{className:a},t.props.children):null})))},t.Tab=hF,t.defaultProps={withContent:!0,shouldCenterActiveTab:!1,onChange:Yt.noop},t}(Gt.Component);!function(e){e.NORMAL="normal",e.SMALL="small",e.MIDDLE="middle"}(dF||(dF={}));const yF={checkbox:"ToggleSwitch_checkbox_IhnSs",checkboxDisabled:"ToggleSwitch_checkboxDisabled_gBtgw",checkboxChecked:"ToggleSwitch_checkboxChecked_ObnNX",checkboxNormal:"ToggleSwitch_checkboxNormal_BKe_C",checkboxMiddle:"ToggleSwitch_checkboxMiddle_Ue6wL",checkboxSmall:"ToggleSwitch_checkboxSmall_JViNg",circle:"ToggleSwitch_circle_qQ3l_",label:"ToggleSwitch_label_lGdnx",labelText:"ToggleSwitch_labelText_OygOJ",left:"ToggleSwitch_left_Bg3yO",disabled:"ToggleSwitch_disabled_b8MEq",fadeIn:"ToggleSwitch_fadeIn_o0skt"};var _F,EF=function(){return EF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},EF.apply(this,arguments)},bF=function(e){var t,n,r=e.isChecked,o=e.size,a=e.isDisabled;return Gt.createElement("div",{className:fB()(yF.checkbox,yF["checkbox".concat((0,Yt.strCapitalize)(o))],(t={},t[yF.checkboxChecked]=r,t),(n={},n[yF.checkboxDisabled]=a,n))},Gt.createElement("div",{className:yF.circle}))},SF=function(e){var t=e.label,n=e.classNames,r=e.size,o=void 0===r?dF.NORMAL:r,a=e.togglePosition,i=void 0===a?"right":a,l=e.isDisabled;return Gt.createElement(QB,EF({className:e.classNames.wrapper},e,{render:function(r){var a,s,c;return t?Gt.createElement(zx,{className:fB()(yF.label,n.label,(a={},a[yF.left]="left"===i,a),(s={},s[yF.disabled]=l,s),(c={},c[n.labelDisabled]=l,c))},"right"===i?Gt.createElement(Gt.Fragment,null,Gt.createElement("span",{className:fB()(yF.labelText,n.labelText)},t),Gt.createElement(bF,EF({isDisabled:e.isDisabled},r,{size:o}))):Gt.createElement(Gt.Fragment,null,Gt.createElement(bF,EF({isDisabled:e.isDisabled},r,{size:o})),Gt.createElement("span",{className:fB()(yF.labelText,n.labelText)},t))):Gt.createElement(bF,EF({},r,{isDisabled:e.isDisabled,size:o}))}}))};SF.defaultProps={classNames:{}},function(e){e.CONTAINER="CONTAINER",e.INPUT="INPUT"}(_F||(_F={}));var TF,IF,NF,CF=function(){return CF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},CF.apply(this,arguments)},wF=oo("RadioBox"),OF=function(e){var t=e.className,n=e.onChange,r=e.children,o=e.name,a=e.value,i=e.isDefaultChecked,l=void 0!==i&&i,s=e.isChecked,c=e.isDisabled;return Gt.createElement("div",CF({className:fB()("RadioBox_container_HxShE",t)},Na(wF(_F.CONTAINER))),Gt.createElement("input",CF({className:"RadioBox_radio_KkRIp",name:o,type:"radio",value:a,defaultChecked:l,disabled:c,onChange:n},Na(wF(_F.INPUT)),void 0!==s?{checked:s}:{})),Gt.createElement("div",{className:"RadioBox_box_us6us"},r))},AF=function(){return AF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},AF.apply(this,arguments)},PF=function(e){return Gt.createElement("div",AF({className:fB()("RadioBoxGroup_container_x2pvZ",e.className)},Na(e.testId)),e.label&&Gt.createElement("p",{className:fB()("RadioBoxGroup_label_p7mOY",e.labelClassName)},e.label),Gt.createElement("div",{className:"RadioBoxGroup_group_g7d80"},e.children))},LF=n(72964),RF=n(75056),kF=n(68356);!function(e){e.ROOT="ROOT",e.CONTENT="CONTENT"}(TF||(TF={})),function(e){e.HOVER="hover",e.CLICK="click"}(IF||(IF={})),function(e){e.TOP="top",e.RIGHT="right",e.LEFT="left",e.BOTTOM="bottom",e.TOP_START="top-start",e.TOP_END="top-end",e.RIGHT_START="right-start",e.RIGHT_END="right-end",e.BOTTOM_START="bottom-start",e.BOTTOM_END="bottom-end",e.LEFT_START="left-start",e.LEFT_END="left-end"}(NF||(NF={}));var DF,UF="Tooltip",BF=function(){return BF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},BF.apply(this,arguments)},xF=oo(UF),MF=function(e){var t=e.floatingRef,n=e.position,r=e.top,o=void 0===r?0:r,a=e.left,i=void 0===a?0:a,l=e.floatingProps,s=e.className,c=e.children;return Gt.createElement("div",BF({ref:t,className:fB()("TooltipContent_root_aQuYV",s),style:{position:n,top:o,left:i}},l,Na(xF(TF.CONTENT))),c)},FF=function(){return FF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},FF.apply(this,arguments)},GF=oo(UF),HF=function(e){var t,n=e.content,r=e.children,o=e.offset,a=void 0===o?5:o,i=e.shiftPadding,l=void 0===i?15:i,s=e.flipPadding,c=void 0===s?5:s,u=e.trigger,d=e.position,f=void 0===d?NF.BOTTOM:d,m=e.isGlobal,p=e.classNames,h=void 0===p?{}:p,v=e.getCloseCallback,g=e.onToggleOpen,y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),_=y[0],E=y[1],b=function(e){E(e),g&&g(e)},S=nr().isMobile,T=u||S?IF.CLICK:IF.HOVER,I=fk().theme,N=(0,LF.YF)({open:_,onOpenChange:b,placement:f,whileElementsMounted:RF.Me,middleware:[(0,kF.RR)({padding:c}),(0,kF.cv)(a),(0,kF.uY)({padding:l}),(0,kF.Cp)()]}),C=N.x,w=N.y,O=N.reference,A=N.floating,P=N.strategy,L=N.context,R=N.middlewareData,k=(0,LF.XI)(L,{move:!1,enabled:T===IF.HOVER}),D=(0,LF.eS)(L,{enabled:T===IF.CLICK}),U=(0,LF.KK)(L),B=(0,LF.bQ)(L),x=(0,LF.qs)(L,{role:"tooltip"}),M=(0,LF.NI)([k,D,U,B,x]),F=M.getReferenceProps,G=M.getFloatingProps;(0,Gt.useEffect)((function(){var e;(null===(e=R.hide)||void 0===e?void 0:e.referenceHidden)&&b(!1)}),[null===(t=null==R?void 0:R.hide)||void 0===t?void 0:t.referenceHidden]),(0,Gt.useEffect)((function(){v&&v((function(){return E(!1)}))}),[]);var H=function(){return Gt.createElement(MF,{floatingRef:A,floatingProps:G(),position:P,top:w,left:C,className:h.content},n)};return Gt.createElement("div",FF({className:fB()("TooltipFloating_root_n1Jc8",h.root)},Na(GF(TF.ROOT))),Gt.createElement("div",FF({ref:O},F()),r),m&&Gt.createElement(LF.ll,{id:"floating-tooltip"},_&&n&&Gt.createElement("div",{className:I},H())),!m&&_&&n&&H())},WF=(0,Gt.createContext)(null),VF=function(e){var t=e.children,n=e.name,r=e.value,o=e.onChange,a=(0,Gt.useMemo)((function(){return{currentValue:r,name:n,setCurrentValue:o}}),[r,n,o]);return Gt.createElement(WF.Provider,{value:a},t)};VF.Item=function(e){var t=e.value,n=e.children,r=(0,Gt.useContext)(WF),o=r.setCurrentValue,a=r.currentValue,i=r.name;return Gt.createElement("label",{className:fB()("VerticalRadioTabItem_root_TdF_J",t===a&&"VerticalRadioTabItem_active_WPi2_")},Gt.createElement("input",{type:"radio",value:t,onChange:function(){o(t)},name:i,className:"VerticalRadioTabItem_input_z_eR3"}),n)},function(e){e.VERTICAL="vertical",e.HORIZONTAL="horizontal"}(DF||(DF={}));const jF={container:"Swipe_container_la6yb",vertical:"Swipe_vertical_Pf5VV",horizontal:"Swipe_horizontal_OdOAi"};var zF=function(e){var t=e.children,n=e.scroll,r=void 0===n?DF.HORIZONTAL:n;return Gt.createElement("div",{className:fB()(jF.container,jF[r])},t)},YF=function(e){var t,n,r=e.classNames,o=void 0===r?{}:r,a=e.id,i=e.isChecked,l=e.isDefaultChecked,s=e.isDisabled,c=e.label,u=e.name,d=e.value,f=e.onRadioButtonClick,m=void 0===f?Yt.noop:f;return Gt.createElement("label",{htmlFor:a,className:fB()("RadioButton_root_F7IYN",(t={},t.RadioButton_rootDisabled_kcqCw=s,t),o.root)},Gt.createElement("input",{type:"radio",id:a,className:fB()("RadioButton_radio_Mcaxl",o.radio),value:d,name:u,disabled:s,onChange:function(e){e.currentTarget.checked&&m(e.currentTarget.value)},defaultChecked:l,checked:i}),Boolean(c)&&Gt.createElement("span",{className:fB()("RadioButton_labelText_qwbzR",o.label,(n={},n[fB()("RadioButton_labelTextDisabled_zqTRQ",o.labelDisabled)]=s,n))},c))};const KF={arrow:"TurnBlock_arrow_UBm2G",arrowContainer:"TurnBlock_arrowContainer_o9cxn",arrowContainerDisabled:"TurnBlock_arrowContainerDisabled_AnIAE",turnBlock:"TurnBlock_turnBlock_v3AsU",arrowContainerRight:"TurnBlock_arrowContainerRight_qx87Z",fadeIn:"TurnBlock_fadeIn_oY1Xl"};var qF=function(){return qF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qF.apply(this,arguments)},XF=function(e){var t,n,r=e.onItemIndexChange,o=e.currentItemIndex,a=e.itemsLength,i=e.className,l=e.isLooped,s=void 0!==l&&l,c=e.testAttrId,u=void 0===c?{}:c,d=a-1,f=o>0,m=o<d;return Gt.createElement("div",{className:fB()(KF.turnBlock,i)},Gt.createElement("div",qF({className:fB()(KF.arrowContainer,(t={},t[KF.arrowContainerDisabled]=!f&&!s,t)),onClick:function(){f?r(o-1):s&&0===o&&r(d)}},Na(u.prevButton)),Gt.createElement(pB,{glyph:hB.y9O,className:KF.arrow})),Gt.createElement("div",qF({className:fB()(KF.arrowContainer,KF.arrowContainerRight,(n={},n[KF.arrowContainerDisabled]=!m&&!s,n)),onClick:function(){m?r(o+1):s&&o===d&&r(0)}},Na(u.nextButton)),Gt.createElement(pB,{glyph:hB.y9O,className:fB()(KF.arrow,KF.arrowRight)})))};const QF={container:"Dropdown_container_ycpyS",fadeIn:"Dropdown_fadeIn_b7vHJ"};var JF=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isActive:!1},t.onButtonClick=function(e){e.preventDefault(),t.setState({isActive:!0})},t.onContainerHide=function(){return t.setState({isActive:!1})},t}return JF(t,e),t.prototype.render=function(){var e=this.state.isActive,t=this.props,n=t.className,r=t.classNameActive,o=t.classNameButton,a=t.classNameContainer,i=t.children,l=t.button,s=t.isShowDropdown,c=t.onClickOutside,u=null!=s?s:e;return Gt.createElement("div",{className:fB()(QF.dropdown,e&&r,n)},Gt.createElement("div",{className:fB()(QF.button,o),onClick:this.onButtonClick},l),u&&Gt.createElement("div",{className:fB()(QF.container,a)},Gt.createElement(Dx,{onClickOutside:c||this.onContainerHide,trigger:gx.CLICK},i)))},t}(Gt.PureComponent),$F=function(e){var t,n=e.className,r=e.title,o=e.onClick;return Gt.createElement("div",{className:fB()("DropdownItem_block_EtyZL",n,(t={},t.DropdownItem_blockClickable_hJXfh=!!o,t)),onClick:o},r)},eG=function(e){var t=e.onClick,n=void 0===t?Yt.noop:t,r=e.classNames,o=e.children,a=e.tooltipPosition,i=void 0===a?yx.CENTER:a,l=nr().isMobile,s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),c=s[0],u=s[1];return l?Gt.createElement("div",{className:fB()("CommonHint_mobileBlock_LQMCM",r.block)},Gt.createElement("div",{className:fB()("CommonHint_mobileIcon_DHDWD",r.icon),onClick:function(e){e.stopPropagation(),e.preventDefault(),n(e),u(!0)}},"?"),c&&Gt.createElement("div",{className:fB()("CommonHint_mobileHint_fQmCu",r.tooltip)},Gt.createElement(Dx,{onClickOutside:function(){u(!1)},trigger:gx.CLICK,align:i},o))):Gt.createElement("div",{className:fB()("CommonHint_desktopBlock_G5hxf",r.block),onClick:n},Gt.createElement(pB,{glyph:hB.qE2,className:fB()("CommonHint_desktopIcon_yogxF",r.icon)}),Gt.createElement("div",{className:fB()("CommonHint_desktopTooltip_RTCRv",r.tooltip)},o))},tG=function(){return tG=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tG.apply(this,arguments)},nG=(0,Gt.forwardRef)((function(e,t){var n,r=e.children,o=e.isActive,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["children","isActive"]),i=(0,LF.PC)();return Gt.createElement("div",tG({className:fB()("PopoverList_item_OsoCA",(n={},n.PopoverList_active_Bk80A=o,n)),ref:t,role:"option",id:i,tabIndex:o?0:-1,"aria-selected":o},a),r)}));nG.displayName="PopoverListItem";var rG,oG=function(){return oG=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oG.apply(this,arguments)},aG=function(e){var t=e.items,n=e.x,r=e.y,o=e.floating,a=e.strategy,i=e.getFloatingProps,l=e.onClick,s=e.listRef,c=e.activeIndex,u=e.getItemProps;return Gt.createElement("div",oG({className:"PopoverList_popoverContent_vXtai",style:{position:a,top:null!=r?r:0,left:null!=n?n:0,outline:0}},i({ref:o})),Boolean(t)&&t.map((function(e,t){return Gt.createElement(nG,oG({key:e.id},u({key:e.id,ref:function(e){s.current[t]=e},onClick:function(){l(e)}}),{isActive:c===t}),Gt.createElement(PB,{size:g.XXXS,img:e.avatarUrl,className:"PopoverList_avatar_H4bAW"}),e.name)})))},iG=function(){return iG=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},iG.apply(this,arguments)},lG=function(e){var t=e.context,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["context"]);return Gt.createElement(LF.wD,{context:t,initialFocus:-1,visuallyHiddenDismiss:!0},Gt.createElement(aG,iG({},n)))},sG=n(60042),cG=n.n(sG);!function(e){e.ROOT="root",e.SUBMIT="submit",e.CANCEL="cancel"}(rG||(rG={}));var uG=["Su","Mo","Tu","We","Th","Fr","Sa"],dG=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],fG=function(e,t,n){return e[n].find((function(e){return e.value===mG(t)}))},mG=function(e){return String(e).padStart(2,"0")},pG=function(e,t){void 0===t&&(t=1);for(var n=e===F.HOURS?24:60,r=[],o=0;o<n;o+=t){var a=mG(o);r.push({label:a,id:a,value:a})}return r},hG=function(e){var t=e.date;return go(Number(t)/1e3,"LLLL/yyyy").toUpperCase()},vG=function(e,t){return(nr().locale===ce.EN?uG:dG)[t.getDay()]};const gG={arrowContainer:"DatePicker_arrowContainer_Bgllr",arrowIcon:"DatePicker_arrowIcon_VMDbk",arrowPrev:"DatePicker_arrowPrev_qN_Zq",timeRow:"DatePicker_timeRow_cY6kY",footer:"DatePicker_footer_mhf9F",timeRowDelimiter:"DatePicker_timeRowDelimiter_SuMKa",button:"DatePicker_button_oBxgx",accept:"DatePicker_accept_VZY00",root:"DatePicker_root_YlM47",fadeIn:"DatePicker_fadeIn_Y5LpY"};var yG=function(){return yG=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yG.apply(this,arguments)},_G=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},EG=oo("DateTimePicker"),bG=(0,Qr.getTranslation)("@boosty/common/components.ui.DatePicker.DateTimePicker"),SG=function(e){var t=e.className;return Gt.createElement("div",{className:gG.arrowContainer},Gt.createElement(pB,{glyph:pk.y9O,className:cG()(gG.arrowIcon,t)}))},TG=function(e){var t=e.className,n=e.innerRef,r=e.type,o=e.defaultValue,a=e.minDate,i=e.maxDate,l=e.onCancel,s=e.onAccept,c=_G((0,Gt.useState)(o||null),2),u=c[0],d=c[1],f=_G((0,Gt.useState)({hours:null,minutes:null}),2),m=f[0],p=f[1],h={hours:pG(F.HOURS),minutes:pG(F.MINUTES)},v=function(e){return function(t){var n;p(yG(yG({},m),((n={})[e]=t,n)))}};return(0,Gt.useEffect)((function(){if(r===H.DATETIME){var e=new Date;p({hours:o?fG(h,o.getHours(),F.HOURS):fG(h,(e.getHours()+1)%24,F.MINUTES),minutes:fG(h,o?o.getMinutes():(e.getMinutes()+1)%60,F.MINUTES)})}}),[]),Gt.createElement("div",yG({className:cG()(gG.root,t),ref:n},Na(EG(rG.ROOT))),Gt.createElement(ex.ZP,{showFixedNumberOfWeeks:!0,onChange:function(e){d(e)},value:u,minDate:a,maxDate:i,formatShortWeekday:vG,locale:nr().locale===ce.EN?"en-US":"ru-RU",navigationLabel:hG,prevLabel:Gt.createElement(SG,{className:gG.arrowPrev}),nextLabel:Gt.createElement(SG,null)}),r===H.DATETIME&&Gt.createElement("div",{className:gG.timeRow},Gt.createElement(lF,{selected:m.hours,options:h.hours,onSelect:v(F.HOURS),isDisabled:!u}),Gt.createElement("span",{className:gG.timeRowDelimiter},":"),Gt.createElement(lF,{selected:m.minutes,options:h.minutes,onSelect:v(F.MINUTES),isDisabled:!u})),Gt.createElement("div",{className:gG.footer},Gt.createElement(FB,yG({className:cG()(gG.button,gG.accept),onClick:function(){var e=u;if(r===H.DATETIME){var t=m.hours,n=m.minutes;e=new Date(e.setHours(Number(t.value),Number(n.value),0,0))}s(e)}},Na(EG(rG.SUBMIT))),bG.accept),Gt.createElement(HB,yG({className:cG()(gG.button,gG.cancel),onClick:l},Na(EG(rG.CANCEL))),bG.cancel)))},IG=Gt.forwardRef((function(e,t){return Gt.createElement(TG,yG({innerRef:t},e))})),NG=(0,Qr.getTranslation)("@boosty/common/components.ui.DatePicker.DateRangePicker"),CG=function(e){var t=e.className;return Gt.createElement("div",{className:gG.arrowContainer},Gt.createElement(pB,{glyph:pk.y9O,className:cG()(gG.arrowIcon,t)}))},wG=function(e){var t=e.className,n=e.defaultValue,r=e.minDate,o=e.maxDate,a=e.hasFooter,i=e.onCancel,l=e.onAccept,s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(e.defaultValue||null),2),c=s[0],u=s[1],d=Array.isArray(c)&&n!==c;return Gt.createElement("div",{className:cG()(gG.root,t)},Gt.createElement(ex.ZP,{showFixedNumberOfWeeks:!0,onChange:function(t){var n;u(t),null===(n=e.onChange)||void 0===n||n.call(e,t)},value:c,selectRange:!0,minDate:r,maxDate:o,formatShortWeekday:function(e,t){return(nr().locale===ce.EN?uG:dG)[t.getDay()]},locale:nr().locale===ce.EN?"en-US":"ru-RU",navigationLabel:function(e){var t=e.date;return go(Number(t)/1e3,"LLLL/yyyy").toUpperCase()},prevLabel:Gt.createElement(CG,{className:gG.arrowPrev}),nextLabel:Gt.createElement(CG,null)}),a&&Gt.createElement("div",{className:gG.footer},Gt.createElement(FB,{className:cG()(gG.button,gG.accept),onClick:function(){return l(c)},isDisabled:!d},NG.accept),Gt.createElement(HB,{className:cG()(gG.button,gG.cancel),onClick:function(){return i()}},NG.cancel)))};const OG={root:"Note_root_b2MJI",title:"Note_title_NBZFh",text:"Note_text_OMinM",icon:"Note_icon_Fl6zT",fadeIn:"Note_fadeIn_tZ2PY"};var AG,PG=function(e){var t=e.text,n=e.title,r=e.type,o=void 0===r?"error":r,a=e.classNames,i=void 0===a?{}:a;return Gt.createElement("section",{className:cG()(OG.root,OG[o],i.root)},Gt.createElement(pB,{glyph:pk.Gc9,className:cG()(OG.icon,OG[o])}),Gt.createElement("div",{className:OG.content},Gt.createElement("header",{className:cG()(OG.title,OG[o])},n),t&&Gt.createElement("p",{className:OG.text},t)))};!function(e){e.ROOT="root"}(AG||(AG={}));var LG=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const RG="DateField_caption_Q_pQQ",kG="DateField_inFlow_1DLid";var DG,UG,BG,xG=function(){return xG=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xG.apply(this,arguments)},MG=oo("DateSelector"),FG=function(e){var t,n,r,o=e.classNames,a=void 0===o?{}:o,i=e.isDisabled,l=void 0!==i&&i,s=e.minDate,c=void 0===s?new Date:s,u=e.maxDate,d=e.isSelectStyle,f=e.isErrorInFlow,m=e.datePattern,p=void 0===m?"dd/MMMM/yyyy/&/HH/mm (O)":m,h=e.label,v=e.value,g=e.error,y=e.note,_=function(e){var t=e.datePattern,n=e.isDisabled,r=(0,Gt.useRef)(null),o=LG((0,Gt.useState)(!1),2),a=o[0],i=o[1],l=LG((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=function(){i(!1),c(!1)};return(0,Gt.useEffect)((function(){n&&u()}),[n]),(0,Gt.useLayoutEffect)((function(){var e;a&&(e=(0,Ht.findDOMNode)(r.current).getBoundingClientRect().bottom,c(window.innerHeight<=e))}),[a]),{isOpen:a,isTop:s,datePickerRef:r,onAcceptClick:function(t){u(),e.onAccept(t)},showDatePicker:function(){i(!0)},hideDatePicker:u,getFormattedCurrentValue:function(e){return go(e.valueOf(),t,!0)}}}({datePattern:p,isDisabled:l,onAccept:e.onAccept}),E=_.datePickerRef,b=_.isOpen,S=_.isTop,T=_.showDatePicker,I=_.hideDatePicker,N=_.getFormattedCurrentValue,C=_.onAcceptClick;return Gt.createElement("div",{className:"DateField_root_W6yx4"},Boolean(h)&&Gt.createElement(zx,{text:h}),Gt.createElement("div",xG({className:cG()("DateField_dateSelector_UpspC",(t={},t.DateField_dateSelectStyled_OPU20=d,t))},Na(MG(AG.ROOT))),Gt.createElement("button",{className:cG()("DateField_inputButton_UJTqq",g&&"DateField_buttonError_Ult8h",l&&"DateField_disabled_Hk706"),type:"button",onClick:T,disabled:l},Gt.createElement("span",null,N(v)),Gt.createElement(pB,{glyph:hB.Mi4,className:"DateField_calendar_He6TO"})),b&&Gt.createElement("div",{className:cG()("DateField_datePickerWrapper_pUWjb",(n={},n.DateField_datePickerWrapperTop_zkaVg=S,n.DateField_datePickerWrapperBottom_om0Pq=!S,n))},Gt.createElement(Dx,{onClickOutside:I,trigger:gx.CLICK},Gt.createElement(IG,{ref:E,type:H.DATETIME,className:cG()("DateField_datePicker_iWAik",(r={},r.DateField_datePickerTop_yH3mV=S,r.DateField_datePickerBottom_VBuRW=!S,r.DateField_datePickerStretched_UrvGi=d,r)),defaultValue:v,minDate:c,maxDate:u,onAccept:C,onCancel:I}))),g?Gt.createElement("div",{className:cG()(RG,"DateField_error_jeEVg",a.errorCaption,f&&kG)},g):y?Gt.createElement("div",{className:cG()(RG,"DateField_note_gC14F",a.noteCaption,f&&kG)},"function"==typeof y?y(v):y):null))},GG=function(e){var t=e.onCloseClick,n=void 0===t?Yt.noop:t,r=function(e){switch(e){case p.SUCCESS:return hB.R$2;case p.ERROR:return hB.Ucq}return null}(e.type);return Gt.createElement(ux,null,(function(t){return Gt.createElement("div",{className:fB()(t,"Alerts_alert_q6R_6")},r&&Gt.createElement(pB,{glyph:r,className:"Alerts_icon__2D3a"}),Gt.createElement("span",{className:"Alerts_text_sw9a9"},e.text),Gt.createElement(pB,{glyph:hB.bMz,className:"Alerts_close_qJx86",onClick:function(){return n(e)}}))}))},HG=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),WG=function(){return WG=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},WG.apply(this,arguments)},VG=Gt.createContext({}),jG=function(){return Gt.useContext(VG)},zG=function(e){function t(t){var n=e.call(this,t)||this;return n.state={alerts:[]},n.showAlert=function(e){var t=(0,Yt.getRandomInt)(),r=e.isPermanent,o=e.timeout,a=void 0===o?5e3:o;n.setState({alerts:n.state.alerts.concat(WG(WG({},e),{id:t}))}),r||setTimeout((function(){return n.hideAlert(t)}),a)},n.hideAllAlerts=function(){n.setState({alerts:[]})},n.onCloseAlertClick=function(e){n.hideAlert(e.id)},n.providedValue={showAlert:n.showAlert,hideAllAlerts:n.hideAllAlerts},n}return HG(t,e),t.prototype.hideAlert=function(e){this.setState({alerts:this.state.alerts.filter((function(t){return t.id!==e}))})},t.prototype.render=function(){var e=this;return Gt.createElement(VG.Provider,{value:this.providedValue},this.props.children,this.state.alerts.length>0&&Gt.createElement("div",{className:"Alerts_block_fvqHL"},this.state.alerts.map((function(t,n){return Gt.createElement(GG,WG({key:n,onCloseClick:e.onCloseAlertClick},t))}))))},t}(Gt.PureComponent),YG=zG,KG=((DG={})[ir.BLOG_ACCEPT_GIFT_BIND_CARD]=ir.BLOG_ACCEPT_GIFT,DG[ir.BLOG_TRIAL_ACTIVATION_BIND_CARD]=ir.BLOG_TRIAL_ACTIVATION,DG[ir.BLOG_POST_TRIAL_ACTIVATION_BIND_CARD]=ir.BLOG_POST_TRIAL_ACTIVATION,DG[ir.BLOG_MEDIA_TRIAL_ACTIVATION_BIND_CARD]=ir.BLOG_MEDIA_TRIAL_ACTIVATION,DG);!function(e){e.BIND_CARD="BIND_CARD",e.ERROR="ERROR",e.SUCCESS="SUCCESS"}(UG||(UG={})),function(e){e.TRIAL="TRIAL",e.DEFAULT="DEFAULT"}(BG||(BG={}));var qG,XG=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},QG=(0,Qr.getTranslation)("@common/hooks.useBindNewCard"),JG=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ZG=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},$G=function(e,t){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(t||[],1)[0],r=Ok(n);(0,Gt.useEffect)((function(){null!=r&&null!=n&&r!==n&&e(r)}),[n,r])},eH=(n(64262),function(e){return e.reduce((function(e,t){if(ra(t))return e+" ";try{return e+Yk(t)}catch(t){return e}}),"")}),tH=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},nH=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},rH=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},oH=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},aH=/((http(s)?):\/\/[a-zA-Zа-яёА-ЯЁ0-9][a-zA-Zа-яёА-ЯЁ0-9-]+[a-zA-Zа-яёА-ЯЁ0-9]\.[^\s]{2,}|https?:\/\/[a-zA-Zа-яёА-ЯЁ0-9]+\.[^\s]{2,})/gi,iH=function(e){return e.reduce((function(e,t){if(oa(t)){var n=Yk(t),r=tD(n,{customLinkRegexp:aH,allowLinks:!0,shouldAddBlockEnd:!1});e.push.apply(e,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(r),!1))}else e.push(t);return e}),[])},lH=function(e){var t=[],n=[];return null==e||e.forEach((function(e){(oa(e)||ra(e)||ia(e))&&t.push(e),e.type===pe.IMAGE&&n.push(e)})),{initialInlineData:t,initialImages:n}},sH=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},cH=function(e){var t=e.initialValue,n=e.clearOnSubmit,r=void 0===n||n,o=e.canPostLinks,a=e.maxInlineDataLength,i=e.restoreDataOnError,l=e.publish,s=void 0===l?Yt.noop:l,c=e.showAlert,u=e.onPublishError,d=void 0===u?Yt.noop:u,f=Ok(t),m=lH(t),h=m.initialInlineData,v=m.initialImages,g=sH((0,Gt.useState)(h),2),y=g[0],_=g[1],E=sH((0,Gt.useState)(h),2),b=E[0],S=E[1],T=sH((0,Gt.useState)(v),2),I=T[0],N=T[1],C=function(e){var t=e.showAlert,n=e.initialImages,r=nr().publisher.images.limits,o=rH((0,Gt.useState)(n),2),a=o[0],i=o[1],l=function(e){var t=e.acceptedMimetypes,n=void 0===t?"image/*":t,r=e.limits,o=void 0===r?nr().publisher.images.limits:r,a=e.uploadsSelector,i=void 0===a?function(){return{}}:a,l=e.showAlert,s=e.uploadImage,c=e.onUploadSuccess,u=ND((0,Gt.useState)([]),2),d=u[0],f=u[1],m=(0,Vt.v9)(i),h=(0,Vt.I0)(),v=function(e){f(d.filter((function(t){return t!==e}))),E()},g=function(e){return function(t){return r=function(){var n,r,o,a,i,l,s;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(c){switch(c.label){case 0:return n=e.showAlert,o=(r=e.limits).checkWidth,a=r.maxWidth,i=r.maxSize,l=r.unit,[4,Yd(t)];case 1:return s=c.sent(),o&&(s.height>=a||s.width>=a)?(n({type:p.ERROR,text:ID(t.name,oe.IMAGE_WIDTH_LIMIT),isPermanent:!0}),[2,!1]):ro(t.size,Z.B,l)>i?(n({type:p.ERROR,text:ID(t.name,oe.IMAGE_SIZE_LIMIT),isPermanent:!0}),[2,!1]):[2,!0]}}))},new((n=Promise)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(void 0,[])).next())}));var n,r}}({showAlert:l,limits:o}),y=SD({onAttach:function(e){var t=e.map((function(){return Qa()}));f(CD(CD([],ND(d),!1),ND(t),!1)),e.forEach((function(e,n){!function(e,t){var n,r;r=function(){var n,r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,h(s({uploadId:t,data:e,type:pe.IMAGE}))];case 1:return a.sent(),null==c||c(),[3,3];case 2:return n=a.sent(),r=n,o=oe.UNKNOWN_ERROR,r.response?"wrong_image_format"===r.response.data.error&&(o=oe.INVALID_FORMAT):o=oe.NETWORK_ERROR,l({type:p.ERROR,text:ID(e.name,o)}),v(t),[3,3];case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(void 0,[])).next())}))}(e,t[n])}))},isFileValid:g,acceptedMimetypes:n}),_=y.openAttachDialog,E=y.removeAttachedFile;return{images:(0,Gt.useMemo)((function(){return d.map((function(e){var t=m[e];if(t)return{file:t.data,uploaded:t.uploadData,status:t.meta}})).filter((function(e){return Boolean(e)}))}),[m,d]),openAttachDialog:_,deleteFile:v,clearFiles:function(){f([]),E()}}}({limits:r,uploadsSelector:UL,showAlert:t,uploadImage:function(e){return(0,dm.Ax)(WE)({image:e})}}),s=l.images,c=l.openAttachDialog,u=l.deleteFile,d=l.clearFiles;return(0,Gt.useEffect)((function(){i(n),n.length||d()}),[n]),{images:oH(oH([],rH(a),!1),rH(s),!1),openAttachDialog:c,deleteFile:function(e){var t=a.findIndex((function(t){return t.id===e}));if(t>-1){var n=oH([],rH(a),!1);n.splice(t,1),i(n)}else u(e)},clearFiles:function(){i([]),d()}}}({initialImages:I,showAlert:c}),w=C.images,O=C.openAttachDialog,A=C.deleteFile,P=C.clearFiles;(0,Gt.useEffect)((function(){f!==t&&(N(v),S(h))}),[v,h]);var L=function(){S([]),_([]),N([]),P()},R=eH(y),k=R.length,D=R.length&&!Boolean(R.match(/^[\n]+$/g));return{editorData:b,inlineData:y,inlineDataLength:k,canPublish:D,images:w,onInlineDataChange:function(e){_(e)},onPublish:function(e){return void 0,void 0,n=function(){var t,n,l,c;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(u){switch(u.label){case 0:if(t=function(e){var t=e.findIndex((function(e){return oa(e)&&Yk(e).trim()||!oa(e)&&e.modificator!==de.BLOCK_END})),n=e.length-nH([],tH(e),!1).reverse().findIndex((function(e){return oa(e)&&Yk(e).trim()||!oa(e)&&e.modificator!==de.BLOCK_END}));return e.reduce((function(r,o,a){if(oa(o)){if(a>=t&&a<=n){var i=Yk(o);a===n-1&&(i=i.trimEnd());var l=tD(i,{shouldAddBlockEnd:!1}),s=e[a+1],c=ia(l[l.length-1]);s&&ra(s)&&c&&l.pop(),r.push.apply(r,nH([],tH(l),!1))}}else r.push(o);return r}),[])}(e||y),n=eH(t).length,ta(t)&&!w.length)return S([]),_([]),N([]),[2];if(a&&n>=a)return[2];if(!t.length&&!w.length)return[3,4];o&&(t=iH(t)),l=w.map((function(e){return wD(e)?{type:pe.IMAGE,id:e.file.id,url:e.file.url}:e})),r&&L(),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,s({inlineData:t,imagesData:l})];case 2:return u.sent(),[3,4];case 3:return c=u.sent(),d(c),i&&(S(t),_(t)),[3,4];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n},openAttachDialog:O,deleteFile:A,setEditorData:S,clearData:L}},uH=function(e){var t=e.getPosition,n=e.videoId,o=e.isSavingTimeCodeEnabled,a=e.duration,i=(0,Vt.I0)(),l=(0,Vt.v9)(hR)[n]||0,s=(0,Gt.useRef)(null),c=(0,Gt.useRef)(null),u=(0,Gt.useRef)(null),d=nr().playbackPosition.defaultInterval,f=Qo(r.PLAYBACK_POSITION_SAVING)&&o,m=function(){var e=Math.floor(t()),r=e>=0&&e<=a;r||Number.isNaN(e)||bd.log.video.invalidPlaybackPosition({videoId:n,position:e,duration:a,previousPosition:u.current}),r&&f&&e!==u.current&&(clearTimeout(c.current),c.current=null,u.current=e,i(TS({videoId:n,position:e})),i(SS.action({videoId:n,position:e})))},p=function(){clearTimeout(s.current),s.current=window.setTimeout((function(){m(),p()}),1e3*d)};return{savePlaybackPosition:m,deferredSavePlaybackPosition:function(){var e=Math.floor(t());i(TS({videoId:n,position:e})),c.current||(c.current=window.setTimeout((function(){m(),c.current=null}),3e3))},startAutoSavingPlaybackPosition:function(){p()},stopAutoSavingPlaybackPosition:function(){clearTimeout(s.current)},localPlaybackPosition:l}},dH=n(5300),fH=function(){return(0,dH.useOverlayPopups)()},mH=function(){var e=fH().showPopup;return{showAuth:function(t){void 0===t&&(t={});var n=t.onClose,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["onClose"]);e({type:a.AUTH_SIGN_IN,data:r,onClose:n})}}},pH=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},hH=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},vH=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},gH=(0,Qr.getTranslation)("@boosty/common/hooks.AssignAgent");!function(e){e.AGENT_ALREADY_EXISTS="agent_already_exists",e.BLOG_NOT_FOUND="blog_not_found",e.UNKNOWN_ERROR="unknown_error"}(qG||(qG={}));var yH,_H,EH,bH=function(){var e=(0,Vt.v9)(mR);return function(t){return Boolean(null==e?void 0:e.find((function(e){return e.id===t})))}},SH={isFetching:!1,isFetched:!1,error:null},TH=[],IH=function(e){var t,n,r,o=(0,Vt.v9)(hL),a=(0,Vt.v9)(bL),i=(0,Vt.v9)(NL),l=(0,Vt.v9)(DL);return o===e?[a,i]:[(null===(n=null===(t=l[e])||void 0===t?void 0:t.data)||void 0===n?void 0:n.levels)||TH,(null===(r=l[e])||void 0===r?void 0:r.meta.networkStatus)||SH]},NH=(0,Gt.createContext)(null),CH=function(){return(0,Gt.useContext)(NH)},wH=(0,Gt.createContext)(null),OH=function(){return(0,Gt.useContext)(wH)},AH=function(){var e=Gf(),t=e.blogUrl,n=e.postId,r=e.streamId,o=e.mediaType,a=OH(),i=(0,Vt.v9)(bL),l=(0,Vt.I0)(),s=Mf(),c=(0,Gt.useCallback)((function(e,c){var u,d=i.find((function(t){return t.id===e})),f=Boolean(n),m=Boolean(r),p=Boolean(o);if(null!=(null==d?void 0:d.offTime))l(eb({blogUrl:t}));else{var h=nn.BLOG_FEED;f?h=nn.POST:m?h=nn.STREAM:p&&(h=nn.MEDIA),s((0,Yt.getParametrizedUrl)(a.purchase,{blogUrl:t,streamId:r,postId:n,levelId:e,mediaType:o},((u={}).ssource=c,u)),{state:{from:h}})}}),[t,n,r,o]);return{subscribeByLevel:c}},PH=function(){return PH=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},PH.apply(this,arguments)},LH=function(){var e=(0,Vt.I0)();return{publishComment:function(t){return void 0,void 0,r=function(){var n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return n=Date.now(),[4,e((0,dm.Ax)(T_.action)(PH(PH({},t),{publishTimestamp:n})))];case 1:return[2,r.sent()]}}))},new((n=Promise)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r},publishingCommentsList:(0,Vt.v9)(ww)}},RH=(0,Gt.createContext)({openConfirmation:Yt.noop}),kH=function(){return(0,Gt.useContext)(RH)},DH=(0,Qr.getTranslation)("@boosty/common/hooks.Comment.useBlockComment"),UH=function(e){var t=e.post,n=e.comment,r=Nk({post:t,comment:n}).canBlockCommentAuthor,o=bH(),a=kH().openConfirmation,i=function(){e.actions.onPutToBlackList(n.author.id,n.id)};return{canBlockComment:r&&!o(e.comment.author.id),blockComment:function(){a({onConfirm:i,description:(0,Qr.getParametrizedText)(DH.banUser,{user:n.author.name})})}}},BH=function(e){var t,n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),r=n[0],o=n[1],a=JU(),i=e.comment,l=e.actions,s=Tk(a.user.blogUrl),c=Nk({post:a,comment:i}),u=c.canRemoveComment,d=c.canCreateComments,f=(0,Vt.v9)(Aw),m=null===(t=null==f?void 0:f[null==a?void 0:a.id])||void 0===t?void 0:t.includes(i.id);return(0,Gt.useEffect)((function(){!0===m&&o(!1)}),[m]),{canRemoveComment:u,isRemoved:m,isRemoving:r,remove:function(){o(!0),l.onRemoveComment({commentId:i.id,authorId:i.author.id}),s&&!d&&l.removeCommentFromStore(i.id)},restoreComment:function(){l.onRestoreComment(i.id)}}},xH=function(){return xH=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xH.apply(this,arguments)},MH=function(e){var t=JU();return{canReplyComment:Nk({comment:e.comment,post:t}).canReplyComment,replyOnComment:function(t){e.actions.onReplyComment(t)}}},FH=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},GH=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},HH=(0,Qr.getTranslation)("@boosty/common/hooks.Comment.useReactionOnComment"),WH=function(e){var t=e.post,n=e.comment;return{reactionOnComment:function(t,n){return FH(void 0,void 0,void 0,(function(){var r,o,a;return GH(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e.actions.onReactionComment(t,n)];case 1:return i.sent(),[3,3];case 2:return r=i.sent(),o=r.statusText,a=(null==o?void 0:o.toLowerCase())===K.FORBIDDEN,e.showAlert({type:p.ERROR,text:a?HH.errorReactionForbidden:HH.errorReactionUnknown}),[3,3];case 3:return[2]}}))}))},removeReaction:function(t){return FH(void 0,void 0,void 0,(function(){var n,r,o;return GH(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,e.actions.onRemoveReactionComment(t)];case 1:return a.sent(),[3,3];case 2:return n=a.sent(),r=n.statusText,o=(null==r?void 0:r.toLowerCase())===K.FORBIDDEN,e.showAlert({type:p.ERROR,text:o?HH.errorReactionForbidden:HH.errorReactionUnknown}),[3,3];case 3:return[2]}}))}))},canReactOnComment:Nk({post:t,comment:n}).canReactOnComment}},VH=function(e){return{canReportComment:!Nk({post:e.post,comment:e.comment}).isCommentAuthor,report:function(){e.actions.onReportComment(e.comment.id)}}},jH=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},zH=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},YH=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},KH=(0,Qr.getTranslation)("@boosty/common/hooks.Comment.useLoadExtraComments"),qH=function(e){var t,n,r,o,a=e.parentId,i=e.showAlert,l=JU(),s=l.user.blogUrl,c=Gt.useContext(Zf).repliesLimit,u=YH((0,Gt.useState)(!1),2),d=u[0],f=u[1],m=YH((0,Gt.useState)(!1),2),h=m[0],v=m[1],g=void 0!==a,y=(0,Vt.v9)(xR),_=g?null===(t=y.thread)||void 0===t?void 0:t[a]:null===(n=y.post)||void 0===n?void 0:n[null==l?void 0:l.id],E=g?null===(o=null===(r=l.comments.data.find((function(e){return e.intId===a})))||void 0===r?void 0:r.replies)||void 0===o?void 0:o.extra:l.comments.extra,b=(0,Vt.I0)(),S=function(e){return function(){return jH(void 0,void 0,void 0,(function(){var t,n,r;return zH(this,(function(o){switch(o.label){case 0:t=document.body.scrollHeight,n=nr().comments.extraCommentsLimit,o.label=1;case 1:return o.trys.push([1,3,4,5]),r=g?{blogUrl:s,postId:l.id,threadComments:{limit:n,parentId:a,nextCommentsDirection:e}}:{blogUrl:s,postId:l.id,rootComments:{limit:n,repliesLimit:c,nextCommentsDirection:e}},"earlier"===e?f(!0):v(!0),[4,b((0,dm.Ax)(j_.action)(r))];case 2:return o.sent(),window.scrollBy({top:document.body.scrollHeight-t,behavior:"smooth"}),[3,5];case 3:return o.sent(),u=g?KH.showRepliesError:KH.showCommentsError,i({type:p.ERROR,text:u}),[3,5];case 4:return"earlier"===e?f(!1):v(!1),[7];case 5:return[2]}var u}))}))}};return{loadCommentsForPost:function(){return jH(void 0,void 0,void 0,(function(){var e,t;return zH(this,(function(n){switch(n.label){case 0:return l&&(e=l.comments.data.length)<nr().comments.fullPageLimit?(t=nr().comments.fullPageLimit-e,[4,b((0,dm.Ax)(j_.action)({blogUrl:s,postId:l.id,rootComments:{limit:t,repliesLimit:c,nextCommentsDirection:"earlier"}}))]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},loadCommentsForFeed:function(){return jH(void 0,void 0,void 0,(function(){return zH(this,(function(e){switch(e.label){case 0:return l&&l.comments.data.length>nr().comments.feedLimit?(b(z_({blogUrl:s,postId:l.id})),[4,b((0,dm.Ax)(j_.action)({blogUrl:s,postId:l.id,rootComments:{limit:nr().comments.feedLimit,repliesLimit:nr().comments.feedRepliesLimit}}))]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},loadEarlierComments:S("earlier"),loadLaterComments:S("later"),hasLaterComments:!1===(null==E?void 0:E.isFirst),hasEarlierComments:!1===(null==E?void 0:E.isLast),areEarlierCommentsFetching:d,areLaterCommentsFetching:h,areInitialCommentsFetching:(null==_?void 0:_.isFetching)||!1}},XH=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},QH=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},JH=function(){var e=xf(),t=Gf().postId,n=(0,Vt.v9)(Uw),r=(0,Vt.I0)(),o=(0,Vt.v9)(Pw),a=(0,Vt.v9)(Lw),i=yf(ir.BLOG_POST,e.pathname),l=!i;(0,Gt.useEffect)((function(){if(o||r(K_(i?{type:"post",postIds:[t]}:{type:"feed",postIds:[]})),i&&t&&("feed"===o||a.length>0&&!a.includes(t))){var e=n.find((function(e){return e.id===t}));(null==e?void 0:e.hasAccess)&&(r(K_({type:"post",postIds:QH(QH([],XH(a),!1),[t],!1)})),r(j_.action({blogUrl:e.user.blogUrl,postId:t,replace:!0,rootComments:{limit:nr().comments.fullPageLimit,repliesLimit:nr().comments.fullPageRepliesLimit}})))}else l&&"post"===o&&nr().comments.feedLimit>0&&(n.forEach((function(e){a.includes(e.id)&&e.hasAccess?r(j_.action({blogUrl:e.user.blogUrl,postId:e.id,replace:!0,rootComments:{limit:nr().comments.feedLimit,repliesLimit:nr().comments.feedRepliesLimit}})):r(y_({postId:e.id}))})),r(K_({type:"feed",postIds:[]})))}),[t])},ZH=function(e){var t=JU();return e.id===(null==t?void 0:t.user.id)},$H=function(e){var t=(0,Vt.I0)(),n=JU(),r=CH(),o=LH().publishComment,a=function(r){t(M_({postId:n.id,parentId:e,publishTimestamp:r}))};return{cancel:a,retry:function(e,t,i){a(e),o({blogUrl:r,postId:n.id,commentData:t,replyComment:i})}}},eW=function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),n=t[0],r=t[1];return{isEditing:n,startEditing:function(){r(!0)},finishEditing:function(){r(!1)},canEdit:Nk({comment:e.comment,post:e.post}).canEditComment}},tW=(0,Qr.getTranslation)("@boosty/common/hooks.Comment.useEditComment"),nW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},rW=function(e){var t=e.onError,n=(0,Vt.I0)(),r=_k().currentUser,o=nW((0,Gt.useState)(null),2),a=o[0],i=o[1],l=nW((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=nW((0,Gt.useState)(!1),2),d=u[0],f=u[1],m=(0,Gt.useCallback)((function(){return void 0,void 0,r=function(){var e,r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,3,4]),c(!0),[4,n((0,dm.Ax)(yg.action)())];case 1:return a.sent(),f(!0),[3,4];case 2:return e=a.sent(),o=function(e){var t,n;return"have_money_in_balance"===(null===(t=e.serverError)||void 0===t?void 0:t.error)?wt.NOT_EMPTY_BALANCE:"have_paid_subscribers"===(null===(n=e.serverError)||void 0===n?void 0:n.error)?wt.PAID_SUBSCRIBERS:null}(r=e),o?i(o):t(r),[3,4];case 3:return c(!1),[7];case 4:return[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function o(e){try{i(r.next(e))}catch(e){n(e)}}function a(e){try{i(r.throw(e))}catch(e){n(e)}}function i(n){var r;n.done?t(n.value):(r=n.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var e,r}),[]);return{currentUser:r,deleteAccount:m,isDeleting:s,isSuccess:d,cannotDeleteReason:a}},oW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},aW=function(e){var t=e.onError,n=(0,Vt.I0)(),r=oW((0,Gt.useState)(!1),2),o=r[0],a=r[1],i=oW((0,Gt.useState)(!1),2),l=i[0],s=i[1],c=(0,Gt.useCallback)((function(){return void 0,void 0,r=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),a(!0),[4,n((0,dm.Ax)(_g.action)())];case 1:return r.sent(),s(!0),[3,4];case 2:return e=r.sent(),t(e),[3,4];case 3:return a(!1),[7];case 4:return[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function o(e){try{i(r.next(e))}catch(e){n(e)}}function a(e){try{i(r.throw(e))}catch(e){n(e)}}function i(n){var r;n.done?t(n.value):(r=n.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var e,r}),[]);return{cancelAccountDeletion:c,isCancelling:o,isCancelled:l}};!function(e){e.WITH_SUBSCRIPTIONS="with_subscriptions",e.WITH_SUBSCRIBERS="with_subscribers"}(yH||(yH={})),function(e){e.DIALOGUE_LIST="dialogueList",e.DIALOGUE_CONTACT_LIST="dialogueContactList",e.DIALOGUE_BROADCAST="dialogueBroadcast"}(_H||(_H={})),function(e){e.TEASER="teaser",e.MESSAGE="message"}(EH||(EH={}));var iW,lW,sW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},cW=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},uW=(0,Qr.getTranslation)("@boosty/common/hooks.Dialogue.DialogueContactListSelector"),dW={levelIds:[],withSubscriptions:!1,withSubscribers:!1,limit:100,offset:0};!function(e){e.date="date",e.name="name",e.unread="unread"}(iW||(iW={})),function(e){e.ASC="asc",e.DESC="desc"}(lW||(lW={}));var fW,mW=(0,Qr.getTranslation)("@boosty/common/hooks.Dialogue.DialogueChatList.utils.useSortingList"),pW=[{getLabel:function(){return mW.sortByDate},value:[iW.date,lW.DESC]},{getLabel:function(){return mW.sortByUnreadNew},value:[iW.unread,lW.DESC]},{getLabel:function(){return mW.sortByUnreadOld},value:[iW.unread,lW.ASC]},{getLabel:function(){return mW.sortByNameAsc},value:[iW.name,lW.ASC]},{getLabel:function(){return mW.sortByNameDesc},value:[iW.name,lW.DESC]}],hW=[{getLabel:function(){return mW.sortByNameAsc},value:[iW.name,lW.ASC]},{getLabel:function(){return mW.sortByNameDesc},value:[iW.name,lW.DESC]}],vW=[{getLabel:function(){return mW.sortByNameAsc},value:[iW.name,lW.ASC]},{getLabel:function(){return mW.sortByNameDesc},value:[iW.name,lW.DESC]}],gW=function(e,t){return e.find((function(e){return(0,ii.isEqual)(e.value,t)}))},yW=function(e){void 0===e&&(e=null);var t=pW[0],n=hW[0],r=vW[0];try{var o=function(e){return void 0===e&&(e=null),{dialogueList:e?e[U.DIALOGUE_LIST_SORT]||null:bu(U.DIALOGUE_LIST_SORT)||null,contactList:e?e[U.CONTACT_LIST_SORT]||null:bu(U.CONTACT_LIST_SORT)||null,mailingList:e?e[U.MAILING_LIST_SORT]||null:bu(U.MAILING_LIST_SORT)||null}}(e),a=o.dialogueList,i=o.contactList,l=o.mailingList,s=JSON.parse(a),c=JSON.parse(i),u=JSON.parse(l);t=gW(pW,null==s?void 0:s.value)||pW[0],n=gW(hW,null==c?void 0:c.value)||hW[0],r=gW(vW,null==u?void 0:u.value)||vW[0]}catch(e){ho.error("Failed parse cookies:",e)}return{sortDialogueList:t,sortContactList:n,sortMailingList:r}},_W=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},EW=function(){return EW=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},EW.apply(this,arguments)},bW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},SW=function(){return SW=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},SW.apply(this,arguments)},TW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},IW=function(){return IW=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},IW.apply(this,arguments)},NW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},CW=function(){return CW=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},CW.apply(this,arguments)},wW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},OW=(0,Qr.getTranslation)("@boosty/common/hooks.Dialogue.DialogueChatList"),AW=function(e){var t=(0,Vt.I0)(),n=wW((0,Gt.useState)(e.dialogueMode===ft.BROADCAST?OW.newMailing:OW.title),2),r=n[0],o=n[1],a=wW((0,Gt.useState)(""),2),i=a[0],l=a[1],s=wW((0,Gt.useState)(dW),2),c=s[0],u=s[1],d=wW((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=wW((0,Gt.useState)(_H.DIALOGUE_LIST),2),h=p[0],v=p[1],g=Ok(h),y=i.length>2,_=JSON.stringify(c)===JSON.stringify(dW),E=(0,Gt.useRef)(!0),b=Ok(i),S=(0,Vt.v9)(XO),T=(0,Vt.v9)(AP),I=(0,Vt.v9)(fP),N=(0,Vt.v9)(CP),C=(0,Vt.v9)(dP),w=(0,Vt.v9)(RP),O=(0,Vt.v9)(OP),A=(0,Vt.v9)(EL),P=function(){var e=yW(),t=e.sortDialogueList,n=e.sortContactList,r=e.sortMailingList,o=_W((0,Gt.useState)(t),2),a=o[0],i=o[1],l=_W((0,Gt.useState)(n),2),s=l[0],c=l[1],u=_W((0,Gt.useState)(r),2),d=u[0],f=u[1];return{selectedDialogueListSort:a,selectedContactListSort:s,selectedMailingListSort:d,setDialogueListSort:function(e){i(e),Su(U.DIALOGUE_LIST_SORT,JSON.stringify(e))},setContactListSort:function(e){c(e),Su(U.CONTACT_LIST_SORT,JSON.stringify(e))},setMailingListSort:function(e){f(e),Su(U.MAILING_LIST_SORT,JSON.stringify(e))}}}(),L=P.selectedDialogueListSort,R=P.selectedContactListSort,k=P.selectedMailingListSort,D=P.setDialogueListSort,B=P.setContactListSort,x=P.setMailingListSort,M=function(e){var t=e.searchValue,n=e.filter,r=e.selectedSorting,o=e.setSorting,a=e.setVisibleLoader,i=(0,Vt.I0)(),l=(0,Vt.v9)(PP);return{onFilterContactsDebounced:(0,Gt.useMemo)((function(){return(0,uU.Z)((function(e){return i(Kh.action(EW(EW({},n),{chunk:e,offset:0})))}),500)}),[t]),onSortContactListChange:function(e){var r=t.length>2?t:"",l=e.value,s=bW(l,2),c=s[0],u=s[1];a(!0),o(e),i(Kh.action(EW(EW({},n),{chunk:r,sortBy:c,sortOrder:u,offset:0})))},onFilterContactsForceUpdate:function(e){i(Kh.action(EW(EW({},n),{chunk:e,offset:0})))},fetchContactListMore:function(){return void 0,void 0,o=function(){var e,o,a,s,c,u,d;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(f){switch(f.label){case 0:return e=l.total,o=l.offset,a=e===Number(o),s=t||"",c=bW(r.value,2),u=c[0],d=c[1],a?[3,2]:[4,i((0,dm.Ax)(qh.action)(EW(EW({},n),{chunk:s,sortBy:u,sortOrder:d,offset:o})))];case 1:f.sent(),f.label=2;case 2:return[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function r(e){try{i(o.next(e))}catch(e){n(e)}}function a(e){try{i(o.throw(e))}catch(e){n(e)}}function i(n){var o;n.done?t(n.value):(o=n.value,o instanceof e?o:new e((function(e){e(o)}))).then(r,a)}i((o=o.apply(undefined,[])).next())}));var e,o},fetchContactList:function(){var e=t.length>2?t:"";a(!0),i(Kh.action(EW(EW({},n),{chunk:e,sortBy:r.value[0],sortOrder:r.value[1]})))}}}({searchValue:i,filter:c,selectedSorting:R,setSorting:B,setVisibleLoader:m}),F=M.onFilterContactsForceUpdate,G=M.onSortContactListChange,H=M.onFilterContactsDebounced,W=M.fetchContactListMore,V=M.fetchContactList,j=function(e){var t=e.searchValue,n=e.filter,r=e.selectedSorting,o=e.setSorting,a=e.setVisibleLoader,i=(0,Vt.I0)(),l=(0,Vt.v9)(wP);return{onFilterDialoguesDebounced:(0,Gt.useMemo)((function(){return(0,uU.Z)((function(e){return i(Rh.action(SW(SW({},n),{chunk:e,offset:0})))}),500)}),[t]),onFilterDialoguesForceUpdate:function(e){i(Rh.action(SW(SW({},n),{chunk:e,offset:0})))},onSortDialogueListChange:function(e){var r=t.length>2?t:"",l=e.value,s=TW(l,2),c=s[0],u=s[1];o(e),a(!0),i(Rh.action(SW(SW({},n),{chunk:r,sortOrder:u,sortBy:c,offset:0})))},fetchDialogueListMore:function(){return void 0,void 0,o=function(){var e,o,a,s,c,u,d;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(f){switch(f.label){case 0:return e=l.total,o=l.offset,a=e===Number(o),s=t||"",c=TW(r.value,2),u=c[0],d=c[1],a?[3,2]:[4,i((0,dm.Ax)(kh.action)(SW(SW({},n),{chunk:s,sortOrder:d,sortBy:u,offset:o})))];case 1:f.sent(),f.label=2;case 2:return[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function r(e){try{i(o.next(e))}catch(e){n(e)}}function a(e){try{i(o.throw(e))}catch(e){n(e)}}function i(n){var o;n.done?t(n.value):(o=n.value,o instanceof e?o:new e((function(e){e(o)}))).then(r,a)}i((o=o.apply(undefined,[])).next())}));var e,o},fetchDialogueList:function(){var e=t.length>2?t:"";a(!0),i(Rh.action(SW(SW({},n),{chunk:e,sortBy:r.value[0],sortOrder:r.value[1]})))}}}({searchValue:i,filter:c,selectedSorting:L,setSorting:D,setVisibleLoader:m}),z=j.onFilterDialoguesForceUpdate,Y=j.onSortDialogueListChange,K=j.onFilterDialoguesDebounced,q=j.fetchDialogueListMore,X=j.fetchDialogueList,Q=function(e){var t=e.currentUser,n=e.filter,r=e.searchValue,o=e.selectedSorting,a=e.setSorting,i=e.setVisibleLoader,l=(0,Vt.I0)(),s=(0,Vt.v9)(kP);return{onFilterMailingListDebounced:(0,Gt.useMemo)((function(){return(0,uU.Z)((function(e){return l(Qh.action(IW(IW({blogUrl:t.blogUrl,chunk:e,sortBy:o.value[0],sortOrder:o.value[1]},n),{offset:0})))}),500)}),[r]),onSortMailingListChange:function(e){var o=r.length>2?r:"",s=e.value,c=NW(s,2),u=c[0],d=c[1];i(!0),a(e),l(Qh.action(IW(IW({blogUrl:t.blogUrl,chunk:o,sortBy:u,sortOrder:d},n),{offset:0})))},onFilterMailingListForceUpdate:function(e){l(Qh.action(IW(IW({blogUrl:t.blogUrl,chunk:e,sortBy:o.value[0],sortOrder:o.value[1]},n),{offset:0})))},fetchMailingContactListMore:function(){return void 0,void 0,a=function(){var e,a,i,c,u,d,f;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(m){switch(m.label){case 0:return e=s.total,a=s.offset,i=e===Number(a),c=r||"",u=NW(o.value,2),d=u[0],f=u[1],i?[3,2]:[4,l((0,dm.Ax)(Jh.action)(IW(IW({blogUrl:t.blogUrl,chunk:c,sortBy:d,sortOrder:f},n),{offset:a})))];case 1:m.sent(),m.label=2;case 2:return[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function r(e){try{i(a.next(e))}catch(e){n(e)}}function o(e){try{i(a.throw(e))}catch(e){n(e)}}function i(n){var a;n.done?t(n.value):(a=n.value,a instanceof e?a:new e((function(e){e(a)}))).then(r,o)}i((a=a.apply(undefined,[])).next())}));var e,a},fetchMailingListData:function(){var e=r.length>2?r:"";i(!0),l(Qh.action(IW({blogUrl:t.blogUrl,chunk:e,sortBy:o.value[0],sortOrder:o.value[1]},n)))}}}({currentUser:S,searchValue:i,filter:e.mailingListFilter,selectedSorting:k,setSorting:x,setVisibleLoader:m}),J=Q.onFilterMailingListDebounced,Z=Q.onFilterMailingListForceUpdate,$=Q.onSortMailingListChange,ee=Q.fetchMailingContactListMore,te=Q.fetchMailingListData,ne=function(t){var n=t===_H.DIALOGUE_BROADCAST||e.dialogueMode===ft.BROADCAST?OW.newMailing:OW.newDialog;v(t),o(n),t===_H.DIALOGUE_BROADCAST&&e.onDialogueChangeMode(ft.BROADCAST)},re=function(){l(""),v(_H.DIALOGUE_LIST),o(OW.title),e.onContactIdsReset(),e.onDialogueChangeMode(ft.DEFAULT)},oe=function(){h===_H.DIALOGUE_LIST&&g!==_H.DIALOGUE_BROADCAST?X():h===_H.DIALOGUE_BROADCAST?te():h===_H.DIALOGUE_CONTACT_LIST&&V()};return(0,Gt.useEffect)((function(){return i.length>2?(m(!0),h===_H.DIALOGUE_LIST?K(i):h===_H.DIALOGUE_BROADCAST?J(i):H(i)):(null==b?void 0:b.length)>2&&(m(!0),h===_H.DIALOGUE_LIST?z(""):h===_H.DIALOGUE_BROADCAST?Z(""):F("")),function(){h===_H.DIALOGUE_LIST?K.cancel():h===_H.DIALOGUE_BROADCAST?J.cancel():H.cancel()}}),[i]),(0,Gt.useEffect)((function(){O.isFetched&&!N.length&&y&&ne(_H.DIALOGUE_CONTACT_LIST)}),[O]),(0,Gt.useEffect)((function(){m(!1)}),[T,N,w]),(0,Gt.useEffect)((function(){E.current?((!N.length||!T.length)&&oe(),E.current=!1):oe()}),[c,h,e.mailingListFilter]),(0,Gt.useEffect)((function(){v(e.dialogueMode===ft.DEFAULT?_H.DIALOGUE_LIST:_H.DIALOGUE_BROADCAST)}),[e.dialogueMode]),(0,Gt.useEffect)((function(){I.recipientsCount>0&&!I.isSending&&X()}),[I]),(0,Gt.useEffect)((function(){C&&(X(),t(fv({isNeedUpdate:!1})))}),[C]),{title:r,currentUser:S,subscriptionLevels:A,activeSection:h,contactList:T,dialogueList:N,filter:c,searchValue:i,isDefaultFilter:_,isSearchValueChanged:y,isVisibleLoader:f,sortTypesDialogueList:pW,sortTypesContactList:hW,sortTypesMailingList:vW,selectedContactListSort:R,selectedDialogueListSort:L,selectedMailingListSort:k,fetchDialogueListMore:q,fetchContactListMore:W,fetchMailingContactListMore:ee,getSelectedTypesChatMate:function(){var e=[];return c.withSubscriptions&&e.push(yH.WITH_SUBSCRIPTIONS),c.withSubscribers&&e.push(yH.WITH_SUBSCRIBERS),e},onBackClick:re,onReadAllMessages:function(){return t(Vh.action({}))},onSectionChange:ne,onContactSelect:function(){return re()},onTypesChatMateSelect:function(e){var t=e.includes(yH.WITH_SUBSCRIBERS),n=e.includes(yH.WITH_SUBSCRIPTIONS);t||(c.levelIds=[]),u(CW(CW({},c),{withSubscribers:t,withSubscriptions:n}))},onSearchInputChange:function(e){var t=e.currentTarget.value;l(t)},onSubscriptionsLevelSelect:function(e){u(CW(CW({},c),{levelIds:e}))},onSortDialogueListChange:Y,onSortContactListChange:G,onSortMailingListChange:$}},PW=["".concat(ir.MESSAGES,"/*")],LW=function(e){var t,n=e.dialogId,r=e.userId,o=e.onGoToMessages,a=(0,Vt.I0)(),i=(0,Vt.v9)(XO),l=(0,Vt.v9)(mR),s=(0,Vt.v9)(pR),c=(0,Vt.v9)(mP),u=(0,Vt.v9)(EP),d=(0,Vt.v9)(AP),f=(0,Vt.v9)(CP),m=(0,Vt.v9)(vP),p=(0,Vt.v9)(SP),h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),v=h[0],g=h[1],y=i.blogUrl,_=u.isFetched,E=null===(t=null==l?void 0:l.map((function(e){return e.id})))||void 0===t?void 0:t.includes(m),b=_&&(!(null==c?void 0:c.relation.canWrite)&&!(null==c?void 0:c.relation.needDonation)||E);return function(){var e=_k(),t=e.currentUser,n=t.blogUrl,r=t.webSocket.dialogs,o=e.isAuthorized,a=xf().pathname,i=PW.some((function(e){return Boolean(yf(e,a))})),l=o;(0,Gt.useEffect)((function(){return l&&i&&sk.updateOptions({blogUrl:n}).subscribe([{type:Xe.DIALOG,channel:r}]),function(){i||sk.unsubscribe(Xe.DIALOG)}}),[])}(),(0,Gt.useEffect)((function(){var e,t,i,u=null===(e=null==c?void 0:c.chatmate)||void 0===e?void 0:e.id,d=null==c?void 0:c.id,f=r&&r!==u||n&&n!==d,m=Boolean(n)||Boolean(r);f?(void 0,void 0,i=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),a(yv()),n?(o((0,Yt.getParametrizedUrl)(ir.MESSAGES,{},{dialogId:n})),[4,a((0,dm.Ax)(Dh.action)({dialogId:n}))]):[3,2];case 1:return t.sent(),[3,4];case 2:return r?[4,a((0,dm.Ax)(Uh.action)({userId:r}))]:[3,4];case 3:(e=t.sent().id)&&o((0,Yt.getParametrizedUrl)(ir.MESSAGES,{},{dialogId:e})),t.label=4;case 4:return[3,6];case 5:return t.sent(),o((0,Yt.getParametrizedUrl)(ir.MESSAGES)),[3,6];case 6:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function r(e){try{a(i.next(e))}catch(e){n(e)}}function o(e){try{a(i.throw(e))}catch(e){n(e)}}function a(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(r,o)}a((i=i.apply(undefined,[])).next())}))):r||n||o((0,Yt.getParametrizedUrl)(ir.MESSAGES)),(null==l?void 0:l.length)||s.isFetched||a(Em.action({blogUrl:y})),g(m)}),[n,r]),{currentUser:i,dialogueActive:c,isFetched:_,isDialogueOpened:v,isDisabledPublisher:b,contactList:d,dialogList:f,subscriptionLevels:p,clearStorage:function(){a(yv()),a(bv()),a(Ev())}}};!function(e){e.TOP="toTop",e.BOTTOM="toBottom"}(fW||(fW={}));var RW,kW=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},DW=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},UW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},BW={moneySpentFrom:null,moneySpentTo:null,subscriptionMonthsDurationFrom:null,subscriptionMonthsDurationTo:null,subscriptionLevelIds:[],paidSubscriptionCanceled:!1},xW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},MW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},FW=n(4305),GW=function(){return GW=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},GW.apply(this,arguments)},HW=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},WW=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},VW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},jW=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},zW=(0,Qr.getTranslation)("@boosty/common/hooks.Dialogue.DialogueMessages");!function(e){e.LOADING="LOADING",e.START="START",e.SUCCESS="SUCCESS",e.ERROR_ALREADY_ACCEPTED="ERROR_ALREADY_ACCEPTED",e.ERROR_CANT_BE_ACCEPTED="ERROR_CANT_BE_ACCEPTED"}(RW||(RW={}));var YW,KW=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},qW=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},XW=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},QW=(0,Qr.getTranslation)("@boosty/common/hooks.Gift.AcceptGift");!function(e){e.INVALID_EMAIL="invalid_email",e.TOO_MANY_SENDS="send_gift_limit",e.GIFT_ALREADY_TAKEN="gift_already_received",e.GIFT_NOT_FOUND="gift_not_found"}(YW||(YW={}));var JW,ZW=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},$W=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},eV=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},tV=(0,Qr.getTranslation)("@boosty/common/hooks.Gift.SendGift"),nV=function(){var e=xf(),t=cm(e.pathname),n=t.isMediaPage,r=t.isBlogPage,o=t.isStreamPage;return t.isPostPage?nn.POST:n?nn.MEDIA:o?nn.STREAM:r?nn.BLOG_FEED:nn.MAIN_FEED},rV=function(){var e=OH().singlePayment,t=Mf(),n=xf().state,r=Gf().mediaType,o=nV(),a=(0,Gt.useCallback)((function(a){var i=a.paymentPurposeType,l=a.paymentPurposeId,s=a.blogUrl,c=a.postId;t((0,Yt.getParametrizedUrl)(e,{blogUrl:s,postId:c,paymentPurposeType:i,paymentPurposeId:l,mediaType:r}),{state:{from:o,isFromFeed:null==n?void 0:n.isFromFeed}})}),[e,r]);return{openSinglePayment:a}};!function(e){e.POLL_FINISHED="poll_finished",e.INVALID_VOTE="invalid_vote"}(JW||(JW={}));var oV=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},aV=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},iV=(0,Qr.getTranslation)("@boosty/common/hooks.Poll"),lV=function(e){var t,n=e.post,o=n.poll,i=n.user.blogUrl,l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(),2),s=l[0],c=l[1],u=Qo(r.USER_GENERATED_POLLS),d=bk(i).canEdit;!function(e,t){var n=jG().showAlert;(0,Gt.useEffect)((function(){e&&n({type:p.ERROR,text:t})}),[e])}(null==s?void 0:s.error,null==s?void 0:s.text);var f=fH().showPopup,m=(0,Vt.v9)((function(e){return HL(e,{pollId:null==o?void 0:o.id})})),h=(0,Vt.v9)((function(e){return GL(e,{pollId:null==o?void 0:o.id})})),v=(0,Vt.I0)(),g=d||(null===(t=null==o?void 0:o.answer)||void 0===t?void 0:t.length)>0||(null==o?void 0:o.isFinished),y=(0,Gt.useCallback)((function(e){return oV(void 0,void 0,void 0,(function(){var t,n,r;return aV(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,v((0,dm.Ax)(hS.action)({blogUrl:i,answer:e,pollId:o.id}))];case 1:return a.sent(),[3,3];case 2:return t=a.sent(),n=t,r=t.serverError.error,c({error:n,text:iV.errors.commit[r]||iV.errors.commit.default}),r===JW.POLL_FINISHED&&b(),r===JW.INVALID_VOTE&&S(),[3,3];case 3:return[2]}}))}))}),[i,o]),_=(0,Gt.useCallback)((function(){return oV(void 0,void 0,void 0,(function(){var e,t,n;return aV(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,v((0,dm.Ax)(vS.action)({blogUrl:i,pollId:o.id}))];case 1:return r.sent(),[3,3];case 2:return e=r.sent(),t=e,n=e.serverError.error,c({error:t,text:iV.errors.commit[n]||iV.errors.commit.default}),n===JW.POLL_FINISHED&&b(),n===JW.INVALID_VOTE&&S(),[3,3];case 3:return[2]}}))}))}),[i,o]),E=(0,Gt.useCallback)((function(){f({type:a.POLL_DETAILS,data:{blogUrl:i,postId:n.id}})}),[i,n]),b=(0,Gt.useCallback)((function(){v(gS({blogUrl:i,pollId:o.id}))}),[i,o]),S=(0,Gt.useCallback)((function(){v((0,dm.Ax)(fS.action)({blogUrl:i,pollId:o.id}))}),[i,o]);return{pollVoteNetworkStatus:m,pollDataNetworkStatus:h,arePollsEnabled:u,arePollsResultsVisible:g,canUserSeePollAsAuthor:d,finishPoll:b,commitVote:y,retractVote:_,goToPollDetails:E}},sV=function(){return sV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sV.apply(this,arguments)},cV=(0,Qr.getTranslation)("@boosty/common/hooks.usePollForm"),uV=function(){var e=nr().polls.finishTime,t=e.minDelay,n=e.maxDelay,r=e.defaultCreationDelay;return{min:new Date(Date.now()+vo(t)),max:new Date(Date.now()+vo(n)),defaultMin:new Date(Date.now()+vo(t+r))}},dV=function(e){return e?{title:e.title[0],options:e.options.map((function(e){return e.text})),isMultiple:e.isMultiple,hasOther:null==e?void 0:e.hasOther,finishTime:(null==e?void 0:e.finishTime)?new Date(vo(e.finishTime)):null}:{title:"",options:["",""],isMultiple:!1,hasOther:!1}},fV=function(e){var t,n,r,o;return{title:null!==(t=null==e?void 0:e.title)&&void 0!==t?t:"",options:null!==(n=null==e?void 0:e.options)&&void 0!==n?n:["",""],isMultiple:null!==(r=null==e?void 0:e.isMultiple)&&void 0!==r&&r,finishTime:null!==(o=null==e?void 0:e.finishTime)&&void 0!==o?o:null}},mV=function(e){return cV.errors.create.default},pV=function(){return pV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pV.apply(this,arguments)},hV=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},vV=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},gV=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},yV=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},_V=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},EV=(0,Qr.getTranslation)("@boosty/common/hooks.Post"),bV=(0,Qr.getTranslation)("@boosty/common/hooks.Post"),SV=function(){var e=jG().showAlert,t=(0,Vt.I0)(),n=(0,Gt.useCallback)((function(n){var r,o,a=n.post;return void 0,void 0,o=function(){var n,r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t((0,dm.Ax)(b_.action)({blogUrl:a.user.blogUrl,postId:a.id}))];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),r=n.statusText,o=(null==r?void 0:r.toLowerCase())===K.FORBIDDEN,e({type:p.ERROR,text:o?bV.errorForbidden:bV.errorUnknown}),[3,3];case 3:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}))}),[]);return{reportPost:n}},TV=function(){return TV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},TV.apply(this,arguments)},IV=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},NV=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},CV=(0,Qr.getTranslation)("@boosty/common/hooks.Post"),wV=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},OV=(0,Qr.getTranslation)("@boosty/common/hooks.Report"),AV=function(e){var t=(void 0===e?{}:e).onReport,n=_k().isAuthorized,r=wV((0,Gt.useState)(!1),2),o=r[0],a=r[1],i=wV((0,Gt.useState)(""),2),l=i[0],s=i[1];return(0,Gt.useEffect)((function(){s(o?OV.reportSent:OV.report)}),[o]),(0,Gt.useEffect)((function(){s(OV.report)}),[n]),{reportText:l,sendReport:function(e){e.preventDefault(),t(),a(!0)}}},PV=function(){return PV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},PV.apply(this,arguments)},LV=function(){return LV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},LV.apply(this,arguments)},RV=function(){return RV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},RV.apply(this,arguments)},kV=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},DV=function(){var e,t,n,r,o=nr().fbAuthDisabled._debugForceVKOverride,a=_k().currentUser,i=o?fa.ProviderCodes.VK.toLowerCase():fa.ProviderCodes.FB.toLowerCase();return 1===(null===(t=null===(e=null==a?void 0:a.authSource)||void 0===e?void 0:e.list)||void 0===t?void 0:t.length)&&(null===(r=null===(n=null==a?void 0:a.authSource)||void 0===n?void 0:n.type)||void 0===r?void 0:r.toLowerCase())===i},UV=(0,Qr.getTranslation)("@boosty/common/hooks.useFBAuthDisabled"),BV=function(){var e=nr().fbAuthDisabled.hasOnlyFBAuthSource,t=jG().showAlert,n=_k().isAuthorized,o=Qo(r.FB_AUTH_DISABLED_DISCLAIMER);return{isFBAuthRelinkFlowActive:o&&e,isFBAuthRelinkSupportDisclaimerVisible:o&&!n,showErrorAlert:function(){t({type:p.ERROR,text:UV.error,timeout:5e3})}}},xV=function(){return xV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xV.apply(this,arguments)},MV=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},FV=function(){return FV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},FV.apply(this,arguments)},GV=function(){return GV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},GV.apply(this,arguments)},HV=function(e,t){return(0,Yt.getParametrizedUrl)(ir.BLOG_DONATE,{blogUrl:e},t?{forPost:t}:void 0)},WV=function(e){var t,n=(void 0===e?{}:e).post,o=Gf(),a=o.mediaType,i=o.blogUrl,l=xf(),s=l.pathname,c=l.state,u=OH(),d=Mf(),f=nV(),m=HV((null===(t=null==n?void 0:n.user)||void 0===t?void 0:t.blogUrl)||i,null==n?void 0:n.int_id.toString());return{openDonationPayment:function(e){var t=(void 0===e?{}:e).isShare;_f(s,[ir.BLOG,ir.ABOUT])&&Qo(r.SHARE_DONATION_LINK)?d(m,{state:GV(GV({},c||{}),{isShare:t,byClick:!0})}):d((0,Yt.getParametrizedUrl)(u.donationPayment,{blogUrl:(null==n?void 0:n.user.blogUrl)||i,postId:null==n?void 0:n.id,mediaType:a||null,paymentPurposeType:Ce.DONATION,paymentPurposeDonationType:n?V.POST:V.AUTHOR,paymentPurposeId:(null==n?void 0:n.int_id)||"send"},{from:f}),{state:GV(GV({},c||{}),{isShare:t,from:f,byClick:!0,returnToPost:(null==c?void 0:c.isFromFeed)?null==n?void 0:n.id:void 0})})},getDonationLink:function(){return m}}},VV=function(){return VV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},VV.apply(this,arguments)},jV=function(){var e=(0,Vt.I0)(),t=(0,Gt.useCallback)((function(t){return void 0,void 0,r=function(){var n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return n=function(e){var t=nr().mediaAlbum;return e.type===ht.AUDIO?t.audio.loadingLimit:e.type===ht.IMAGE?t.photo.loadingLimit:e.type===ht.VIDEO?t.video.loadingLimit:t.all.loadingLimit}(t),[4,e((0,dm.Ax)(RS.action)(VV({limit:n},t)))];case 1:return r.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r}),[]),n=(0,Vt.v9)(_R),r=(0,Vt.v9)(ER);return VV(VV({mediaAlbum:n},r),{getMediaAlbum:t,resetMediaAlbum:function(){e(DS())}})},zV=function(){return zV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zV.apply(this,arguments)},YV=function(){return YV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},YV.apply(this,arguments)};function KV(e,t){var n,r,o,a,i,l,s=YV(YV({},e),((n={})[t.id]=t.value,n)),c=t.value,u=t.id;switch(t.id){case A.ANY:return c&&"boolean"==typeof c?((r={})[u]=c,r):e;case A.FREE:return YV(YV({},s),((o={})[A.ANY]=!1,o[A.SUBSCRIBERS]=!1,o[A.LEVEL]=0,o));case A.SUBSCRIBERS:return YV(YV({},s),((a={})[A.ANY]=!1,a[A.FREE]=!1,a[A.LEVEL]=0,a));case A.LEVEL:return YV(YV({},s),((i={})[A.ANY]=!1,i[A.FREE]=!1,i[A.SUBSCRIBERS]=!1,i));case A.NONE:case A.DONATER:default:return YV(YV({},s),((l={})[A.ANY]=!1,l))}}var qV=function(){return qV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qV.apply(this,arguments)},XV=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},QV=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},JV=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ZV=(0,Qr.getTranslation)("@boosty/common/hooks.Settings.PrivacySettings"),$V=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ej=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},tj=function(){var e,t,n,r,o=[],a=nr().notificationSettings;try{for(var i=$V(Object.values(a)),l=i.next();!l.done;l=i.next()){var s=l.value;try{for(var c=(n=void 0,$V(s)),u=c.next();!u.done;u=c.next()){var d=u.value;o.includes(d)||o.push(d)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o},nj=(0,Qr.getTranslation)("@boosty/common/components.AccountScheduledForDeletionInfoText"),rj=function(e){var t=e.currentUser,n=e.className,r=t.scheduledDeletionTime,o=(0,dH.useOverlayPopups)().showPopup,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(Co(r)),2),l=i[0],s=i[1],c=(0,Gt.useCallback)((function(){o({type:a.CANCEL_ACCOUNT_DELETION})}),[o]);return(0,Gt.useEffect)((function(){var e=window.setTimeout((function(){return s(Co(r))}),6e4);return function(){window.clearTimeout(e)}}),[l]),Gt.createElement("div",{className:cG()("AccountScheduledForDeletionInfoText_message_OLqub",n)},1e3*r<Date.now()?Gt.createElement("span",null,nj.deleted):Gt.createElement("span",null,nj.yourAccountWillBeDeletedIn," ",l,". ",nj.ifYouDidNotDoThat," ",Gt.createElement(VB,{className:"AccountScheduledForDeletionInfoText_link_cavLk",onClick:c,type:"button"},nj.cancel)," ",nj.itRightNow))},oj=function(e){var t=e.currentUser;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"AccountScheduledForDeletionNotice_containerIcon_W07RW"},Gt.createElement(pB,{className:"AccountScheduledForDeletionNotice_icon_xdbWy",glyph:hB.FCX})),Gt.createElement(rj,{currentUser:t}))},aj=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ij=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},lj=function(){return lj=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lj.apply(this,arguments)},sj=(0,Qr.getTranslation)("@boosty/common/components.ApiErrorBoundary"),cj=function(){var e=nr().collectionApiErrorStatistics,t=e.isEnable,n=e.ignoredEndpoints,r=jG().showAlert;return(0,Gt.useEffect)((function(){Ho().interceptors.response.use((function(e){return e}),(function(e){return void 0,void 0,a=function(){var o,a,i,l,s,c,u,d,f,m,h,v,g,y,_,E,b,S,T,I,N,C;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(w){switch(w.label){case 0:if(o=new Ar(lj(lj({},e),{status:null===(I=e.response)||void 0===I?void 0:I.status,statusText:null===(N=e.response)||void 0===N?void 0:N.statusText,serverError:null===(C=e.response)||void 0===C?void 0:C.data,request:{url:e.response.config.url,method:e.response.config.method,data:e.response.config.data}})),a=o.status,i=o.request,l=i.url,s=i.method,c=i.data,u=o.response,d=/\/v1\/graphite\/\w+(\/{0,1})$/,f=l.includes(jn.STAT_CLIENT_INFO),m=d.test(l),h=a>=400&&a<=526,(v=413===a)&&r({type:p.ERROR,text:sj.requestTooLarge}),!h)return[3,5];if(m)return[3,4];w.label=1;case 1:return w.trys.push([1,3,,4]),[4,Wo("api_error_".concat(a))];case 2:return w.sent(),[3,4];case 3:return g=w.sent(),ho.error("Failed send to graphite: ",g),[3,4];case 4:if(!f&&t&&(y=l.split("?")[0].replace("/v1",""),O=y,_=ij([],aj(new Set(ij(ij(ij(ij([],aj(Object.values(jn)),!1),aj(Object.values(Jn)),!1),aj(Object.values(Kn)),!1),aj(Object.values(qn)),!1))),!1).find((function(e){return _f(O,e)})),E=n.some((function(e){var t=e.url,n=e.method;return t===_&&n===s})),b=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(zn),!1).includes(_),S=JSON.stringify((0,Do.parseUrl)(l).query),T=b?function(e){return void 0===e&&(e={}),delete e.token,delete e.email,delete e.password,delete e.old_password,delete e.code,delete e.access_token,delete e.refresh_token,JSON.stringify(e)}((0,Do.parse)(c)):JSON.stringify((0,Do.parse)(c)),!E))try{bd.log.error.sendApiError({status:a.toString(),method:s,urlBeforeParametrization:_,urlAfterParametrization:y,paramsQuery:S,paramsBody:v?"":T,response:JSON.stringify(u.data)})}catch(e){ho.error("Failed send to ClickHouse: ",e)}w.label=5;case 5:return[2,Promise.reject(e)]}var O}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function r(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(n,r)}i((a=a.apply(undefined,[])).next())}));var o,a}))}),[]),null},uj=function(){return uj=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},uj.apply(this,arguments)},dj=function(e){var t=e.children,n=(0,dH.useOverlayPopups)(),r=n.showPopup,o=n.closePopup;return Gt.createElement(RH.Provider,{value:{openConfirmation:function(e){var t=r({type:a.CONFIRM,data:uj(uj({},e),{onConfirm:function(n){return void 0,void 0,a=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return[4,e.onConfirm(n)];case 1:return r.sent(),o(t.id),[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function o(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof r?a:new r((function(e){e(a)}))).then(n,o)}i((a=a.apply(undefined,[])).next())}));var r,a}})})}}},t)},fj=function(){return fj=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fj.apply(this,arguments)},mj=Gt.createContext({}),pj=function(e){var t=function(t){return Gt.createElement(mj.Consumer,null,(function(n){return Gt.createElement(e,fj({},t,n))}))};return t.displayName="withContext",t},hj=function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),n=t[0],r=t[1],o={setActiveStep:r,removeActiveStep:function(){return r(null)}};return Gt.createElement(mj.Provider,{value:fj(fj({},o),{activeStep:n})},e.children)},vj=function(){return Gt.useContext(mj)},gj=function(e){var t=e.popups;return Gt.createElement(YG,null,Gt.createElement(dH.OverlayPopupsProvider,{popups:t},Gt.createElement(dj,null,Gt.createElement(hj,null,e.children))))},yj=function(e){var t=e.className,n=e.children,o=nr().isMobile,i=Mf(),l=(0,dH.useOverlayPopups)().showPopup;return Qo(r.MY_GAMES_SUPPORT)?Gt.createElement(cM,{to:ir.SUPPORT_HELP,target:"_blank",className:t},n):Gt.createElement("span",{className:cG()("SupportLink_link_pmSyg",t),onClick:function(){o?i(ir.SUPPORT_CONTACT):l({type:a.CONTACT_SUPPORT})}},n)},_j=(0,Qr.getTranslation)("@boosty/common/components.BannedUserNotice.desktop"),Ej=function(){return Gt.createElement("div",{className:"BannedUserNotice_root_TytuD"},(0,Qr.getReactText)(_j.notice,{Blocked:function(e){var t=e.text;return Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{glyph:hB.Ucq,className:"BannedUserNotice_invalidIcon_wdC3Q"}),Gt.createElement("span",{className:"BannedUserNotice_emphasise_Hx5g5"},t))},Support:function(e){var t=e.text;return Gt.createElement(Gt.Fragment,null," ",Gt.createElement(yj,null,t))}}))};const bj={title:"Error_title_xCwM9",image:"Error_image_UyOvH",container:"Error_container_Zi9yk",text:"Error_text_oGNAL",support:"Error_support_BiMeM",blogName:"Error_blogName_j4vTC",button:"Error_button_Ig1i9",buttonLink:"Error_buttonLink_d_vXm",fadeIn:"Error_fadeIn_J7cza"};var Sj=(0,Qr.getTranslation)("@common/components.Error"),Tj=function(e){var t=e.error,n=e.errorTitle,o=e.errorText,a=e.containerClassName,i=e.imageClassName,l=e.titleClassName,s=e.textClassName,c=e.linkClassName,u=e.buttonsClassName,d=xf().pathname,f=nr(),m=f.clientId,p=f.supportEmail,h=f.supportUrl,v=Qo(r.MY_GAMES_SUPPORT),g=![K.INTERNAL_SERVER_ERROR,K.BAD_GATEWAY].includes(t)&&v,y=encodeURIComponent("".concat(Sj.letterSubject," ").concat(d," ").concat(Lr(),":").concat(m)),_=Gt.useMemo((function(){return t?function(e,t){switch(e){case K.BLOG_NOT_FOUND:var n=t.split("/")[1];return{title:Sj.blogNotFound.title,text:Gt.createElement(Gt.Fragment,null,Sj.blogNotFound.text.start,Gt.createElement("span",{className:bj.blogName},n),Sj.blogNotFound.text.end)};case K.FORBIDDEN:return{title:Sj.forbidden.title,text:Sj.forbidden.text};case K.BAD_REQUEST:return{title:Sj.badRequest.title,text:Sj.badRequest.text};case K.PAGE_NOT_FOUND:return{title:Sj.pageNotFound.title,text:Sj.pageNotFound.text};case K.STREAM_NOT_FOUND:return{title:Sj.streamNotFound.title,text:Sj.streamNotFound.text};case K.STREAM_RECORD_NOT_FOUND:return{title:Sj.streamRecordNotFound.title,text:Sj.streamRecordNotFound.text};case K.INTERNAL_SERVER_ERROR:return{title:Sj.internalServerError.title,text:Sj.internalServerError.text};case K.BAD_GATEWAY:return{title:Sj.badGateway.title,text:Sj.badGateway.text};case K.POST_NOT_FOUND:return{title:Sj.postNotFound.title,text:Sj.postNotFound.text};default:return{title:Sj.default.title,text:Sj.default.text}}}(t,d):{title:n,text:o}}),[t,d]);return(0,Gt.useEffect)((function(){if(t){var e={error:t};if(t===K.APP_ERROR)try{var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(window.errorsLogger.reportsLog,1)[0];e.errorObject=JSON.stringify(n)}catch(e){ho.error("Failed serialize errorObject",e)}finally{Kc.stat.logs.sendLogs(ho.getUserId(),ho.getLogs().join("\n"))}bd.log.appErrors.sendError(e)}}),[]),Gt.createElement("div",{className:fB()(bj.container,a)},Gt.createElement("div",{className:fB()(bj.image,i)}),Gt.createElement("h4",{className:fB()(bj.title,l)},_.title),Gt.createElement("p",{className:fB()(bj.text,s)},_.text),Gt.createElement("p",{className:fB()(bj.text,bj.support,s)},g?Gt.createElement(Gt.Fragment,null,(0,Qr.getReactText)(Sj.supportNoEmail,{Link:function(e){var t=e.text;return Gt.createElement(cM,{to:h,className:fB()(bj.link,c)},t)}})):Gt.createElement(Gt.Fragment,null,(0,Qr.getReactText)((0,Qr.getParametrizedText)(Sj.support,{supportEmail:p}),{Link:function(e){var t=e.text;return Gt.createElement(cM,{to:"mailto:".concat(p,"?subject=").concat(y),className:fB()(bj.link,c)},t)}}))),Gt.createElement("div",{className:fB()(bj.buttons,u)},Gt.createElement(FB,{className:bj.button},Gt.createElement("a",{className:bj.buttonLink,href:ir.MAIN},Sj.goToMainPage))))},Ij=(0,Qr.getTranslation)("@boosty/common/components.BannedPage"),Nj=function(){return Gt.createElement("div",{className:"BannedPage_root_rJVNz"},Gt.createElement("div",{className:"BannedPage_icon_DMJep"}),Gt.createElement("div",{className:"BannedPage_header_x227U"},Ij.pageBlocked),Gt.createElement("div",{className:"BannedPage_message_XRiJp"},Ij.blockedMessage),Gt.createElement("div",{className:"BannedPage_buttonWrapper__z458"},Gt.createElement(FB,{onClick:function(){return window.location.href="/"}},Ij.toMain)))},Cj=function(e){var t=e.error,n=e.errorTitle,r=e.errorText;return t===K.USER_BANNED?Gt.createElement(Nj,null):Gt.createElement(Tj,{error:t,errorTitle:n,errorText:r,containerClassName:"Error_container_ISnJv",imageClassName:"Error_image_aBxNt",titleClassName:"Error_title_ABSgp",textClassName:"Error_text_laleB",linkClassName:"Error_link_MXQu7",buttonsClassName:"Error_buttons_mY4KY"})};const wj="Footer_copyright_XW34x",Oj="Footer_link_x8PN9",Aj="Footer_block_ylyfI",Pj="Footer_content_zgU_7";var Lj,Rj=(0,Qr.getTranslation)("@boosty/common/components.Footer"),kj=function(e){var t,n=e.brandLink,r=void 0===n?ir.BRAND:n,o=e.privacyPolicyLink,a=void 0===o?ir.OFFERS_PRIVACY_POLICY:o,i=e.blogLink,l=e.userAgreementLink,s=e.blockClassName,c=e.contentClassName,u=e.copyrightClassName,d=e.linksClassName,f=e.linkClassName,m=e.isTransparent,p=nr(),h=p.corporateBlogUrl,v=p.isError502,g=p.offer.userAgreement,y=!Rr(),_="© ".concat((new Date).getFullYear()," ").concat(nr().copyright);return v?Gt.createElement("div",{className:cG()(Aj,s)},Gt.createElement("div",{className:cG()(Pj,c)},Gt.createElement("div",{className:cG()(wj,u)},_))):Gt.createElement("div",{className:cG()(Aj,s,(t={},t.Footer_blockTransparent_d36I0=m,t))},Gt.createElement("div",{className:cG()(Pj,c)},Gt.createElement("div",{className:cG()(wj,u)},_),Gt.createElement("div",{className:cG()("Footer_links_aSoMa",d)},y&&Gt.createElement(cM,{className:cG()(Oj,f),to:i||h},Rj.ourBlog),Gt.createElement("a",{className:cG()(Oj,f),href:l||(null==g?void 0:g.url),rel:"noopener noreferrer"},Rj.userAgreement),Gt.createElement("a",{className:cG()(Oj,f),href:a,rel:"noopener noreferrer"},Rj.privacyPolicy),y&&Gt.createElement(cM,{className:cG()(Oj,f),to:r},Rj.brand),Gt.createElement(yj,{className:cG()(Oj,f)},Rj.support))))},Dj=function(e){return Gt.createElement(kj,{blockClassName:"Footer_block_SJoX4",contentClassName:"Footer_content_PwrVj",copyrightClassName:"Footer_copyright_esp6t",linksClassName:"Footer_links_SJiJc",linkClassName:"Footer_link_cERM5",isTransparent:e.isTransparent})};!function(e){e.ACCEPT_BUTTON="ACCEPT_BUTTON"}(Lj||(Lj={}));var Uj=(0,Qr.getTranslation)("@boosty/common/components.GdprOffer"),Bj=oo("GdprOffer"),xj=function(e){var t=e.classNames,n=void 0===t?{}:t,r=function(){var e=nr(),t=e.isError502,n=e.offer.cookiePolicy,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!0),2),o=r[0],a=r[1],i=(0,Vt.I0)(),l=(0,Vt.v9)(XO);return(0,Gt.useEffect)((function(){a(Boolean(l?l.flags.GDPR:Boolean(JSON.parse(bu(U.GDPR)||null))))}),[null==l?void 0:l.flags]),{cookiePolicy:n,isAccepted:o,isError502:t,onAcceptClick:function(e){e.preventDefault(),a(!0),l?i((0,dm.Ax)(tg.action)({flag:U.GDPR.toUpperCase()})):Su(U.GDPR,"1",{expires:7300})}}}(),o=r.cookiePolicy,a=r.isAccepted,i=r.isError502,l=r.onAcceptClick;return i||a?null:Gt.createElement("div",{className:cG()("GdprOffer_root_UFqrk",n.root)},Gt.createElement("div",{className:cG()("GdprOffer_content_kE4dq",n.content)},Gt.createElement("div",{className:n.text},Gt.createElement("span",null,Uj.offerText," "),Gt.createElement(cM,{className:cG()("GdprOffer_link_oFiKK",n.link),to:o.url,target:"_blank",rel:"noopener noreferrer"},Uj.moreDetails)),Gt.createElement("div",{className:cG()(n.acceptContainer)},Gt.createElement(FB,{className:n.acceptButton,testId:Bj(Lj.ACCEPT_BUTTON),onClick:l,withIcon:!0},Uj.accept))))},Mj=function(){return Gt.createElement(xj,{classNames:{root:"GdprOffer_root_pCuOO",content:"GdprOffer_content_u3ufc",acceptButton:"GdprOffer_accept_Kltoi"}})},Fj=function(e,t){return t?!t.flags[e]:null===JSON.parse((0,Yt.getFromLocalStorage)(e))},Gj=n(66379),Hj=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Wj=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Vj=(0,Qr.getTranslation)("@boosty/common/components.Helpers.components.HelperItem"),jj=function(e){var t=e.text,n=e.targetSelector,r=e.portalSelector,o=e.defaultPosition,a=o.placement,i=o.offset,l=e.buttonText,s=void 0===l?Vj.ok:l,c=e.onOkClick,u=Hj((0,Gt.useState)(!1),2),d=u[0],f=u[1],m=(0,Gt.useRef)(null),p=(0,Gt.useRef)(null),h=(0,LF.YF)({open:d,whileElementsMounted:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return RF.Me.apply(void 0,Wj(Wj([],Hj(e),!1),[{animationFrame:!0}],!1))},middleware:[(0,kF.cv)({mainAxis:7+i.mainAxis,crossAxis:i.crossAxis}),(0,Gj.x7)({element:p.current,padding:27})],placement:a}),v=h.x,g=h.y,y=h.refs,_=h.context;if((0,Gt.useEffect)((function(){var e=document.querySelector(n);return e&&(y.setReference(e),f(!0)),function(){var e;null===(e=m.current)||void 0===e||e.disconnect()}}),[]),(0,Gt.useEffect)((function(){return m.current=new MutationObserver((function(e){var t=e.some((function(e){return e.addedNodes})),r=e.some((function(e){return e.removedNodes}));if(t||r){var o=document.querySelector(n);if(!d&&t&&o)return y.setReference(o),void f(!0);d&&r&&!o&&(y.setReference(null),f(!1))}})),m.current.observe(document.body,{childList:!0,subtree:!0}),function(){m.current.disconnect()}}),[d]),d){var E=Gt.createElement("div",{ref:y.setFloating,style:{left:null!=v?v:0,top:null!=g?g:0},className:"HelperItem_root_SZEe_"},Gt.createElement("div",{className:"HelperItem_text_j1mck"},t),Gt.createElement("div",{className:"HelperItem_ok_Q1fMX",onClick:function(){f(!1),c()}},s),Gt.createElement(LF.Y$,{className:"HelperItem_floatingArrow_QAATv",ref:p,context:_,tipRadius:2}));return r?(0,Ht.createPortal)(E,document.querySelector(r)):E}return null},zj=function(){return zj=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zj.apply(this,arguments)},Yj=function(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)([]),2),t=e[0],n=e[1],r=Xa(),o=nr().helpers,a=xf(),i=(0,Vt.I0)(),l=(0,Vt.v9)(XO),s=(0,Vt.v9)(pA),c={currentUser:l,phone:s};(0,Gt.useEffect)((function(){var e=o.reduce((function(e,t){var n=Array.isArray(t)?d(t):t,o=n.expireTime,a=n.url,i=n.conditions,s=n.selector,c=n.text,m=n.buttonText,p=n.position,h=n.flagName,v=n.portalSelector,g=!function(e){return!!e&&e<Number(new Date)}(o)&&function(e){return!e||_f(window.location.pathname,e)}(a)&&u(i)&&Fj(h,l);return g&&e.push({text:c[r],buttonText:null==m?void 0:m[r],defaultPosition:p,targetSelector:s,portalSelector:v,onOkClick:function(){return f(h)}}),e}),[]);n(e)}),[a.pathname,l]);var u=function(e){var t=Object.keys(e);return!t.length||t.every((function(t){var n=c[t];return!!n&&function(e,t){var n=Object.keys(t);return!n||n.every((function(n){return(0,ii.get)(e,n)===t[n]}))}(n,e[t])}))},d=function(e){var t=e.find((function(e){var t=e.flagName;return Fj(t,l)}));return t||e[0]},f=function(e){l?i(tg.action({flag:e})):(0,Yt.setToLocalStorage)(e,"false")};return t.length?Gt.createElement(Gt.Fragment,null,t.map((function(e,t){return Gt.createElement(jj,zj({key:"".concat(e.text,"-").concat(e.targetSelector,"-").concat(t)},e))}))):null};const Kj={monochrome:"Layout_monochrome_T6NVz",layout:"Layout_layout_e7uEn",responsive:"Layout_responsive_ttkZp",content:"Layout_content_DHSAI",grid:"Layout_grid_vmyYz",threeColsLeft:"Layout_threeColsLeft_H_mjN",threeColsCenter:"Layout_threeColsCenter_UVHo0",threeColsRight:"Layout_threeColsRight_Hsa8D",fadeIn:"Layout_fadeIn_hWTwM"};var qj,Xj=function(e){var t,n;return Gt.createElement("div",{className:cG()(Kj.layout,(t={},t[Kj.responsive]=e.isResponsivePageWidth&&!e.isFullPageWidth,t[Kj.monochrome]=e.isMonochromeBackground,t))},Gt.createElement("div",{className:cG()((n={},n[Kj.content]=!e.isFullPageWidth&&!e.isResponsivePageWidth,n))},e.children))},Qj=function(e){return Gt.createElement("div",{className:Kj.grid},e.children)},Jj=function(e){var t=e.className,n=e.index;return Gt.createElement("div",{className:cG()(Kj.col,t),id:"column-".concat(n)},e.children)},Zj=function(e){var t=e.left,n=e.center,r=e.right;return Gt.createElement(Qj,null,Gt.createElement(Jj,{className:Kj.threeColsLeft,index:0},t||null),Gt.createElement(Jj,{className:Kj.threeColsCenter,index:1},n||null),Gt.createElement(Jj,{className:Kj.threeColsRight,index:2},r||null))},$j=function(e){return e?Boolean(e.flags[M.IS_LEGAL_INFO_SEEN]):!0===JSON.parse((0,Yt.getFromLocalStorage)(o.IS_LEGAL_INFO_SEEN))},ez=(0,Qr.getTranslation)("@boosty/common/components.LegalInfo"),tz=function(){var e=nr(),t=e.legalInfo,n=t.isEnabled,r=t.text,a=e.isWebView,i=(0,Vt.I0)(),l=(0,Vt.v9)(XO),s=Ok(l),c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!0),2),u=c[0],d=c[1],f=Xa();(0,Gt.useEffect)((function(){d($j(l))}),[]),(0,Gt.useEffect)((function(){(!s&&l||s&&l&&s.flags!==l.flags)&&d($j(l))}),[l]);var m=function(){l?i(tg.action({flag:M.IS_LEGAL_INFO_SEEN})):((0,Yt.setToLocalStorage)(o.IS_LEGAL_INFO_SEEN,"true"),d(!0))};return a||!n||u?null:Gt.createElement("div",{className:"LegalInfo_root_Is5qm"},Gt.createElement("div",{className:"LegalInfo_closeIconWrapper_FiyB0",onClick:function(){m()}},Gt.createElement(pB,{glyph:hB.Bt0,className:"LegalInfo_closeIcon_KqyqS"})),Gt.createElement("div",{className:"LegalInfo_title_Zfvkr"},Gt.createElement(pB,{glyph:hB.Gc9,className:"LegalInfo_infoIcon_rWHzW"}),ez.title),Gt.createElement("div",{className:"LegalInfo_text_TpiAp"},r[f]),Gt.createElement("button",{className:"LegalInfo_close_Pp5jf",onClick:function(){m()}},ez.close))},nz=oo("TopMenu");!function(e){e.LOGO="Logo"}(qj||(qj={}));var rz={Logo:nz(qj.LOGO)},oz=(0,Qr.getTranslation)("@boosty/common/components.MainFeedAlert"),az=function(){var e=function(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),t=e[0],n=e[1],r=(0,Vt.I0)(),o=(0,Vt.v9)(XO),a=xf(),i=Mf();(0,Gt.useEffect)((function(){if(o){var e=o.flags.isMainFeedAlertSeen;n(!e)}}),[o]);var l=function(){r(tg.action({flag:M.IS_MAIN_FEED_ALERT_SEEN}))},s=function(){l(),n(!1)},c=nr().locale===ce.RU,u=cm(a.pathname).isMainPage;return{isVisible:t,markAsSeen:l,handleTryClick:function(){s()},handleCloseClick:function(){s()},isRuLocale:c,goToFeedPage:function(){i(ir.MAIN)},isFeedPage:u}}(),t=e.isVisible,n=e.markAsSeen,r=e.handleTryClick,o=e.handleCloseClick,a=e.isRuLocale,i=e.isFeedPage,l=e.goToFeedPage,s=function(e){var t=e.elementSelector,n=e.triggerCondition,r=void 0===n||n,o=e.paddingX,a=void 0===o?12:o,i=e.paddingY,l=void 0===i?7:i,s=e.backgroundElementClassName,c=e.elementWrapperClassName,u=e.inactive,d=e.onClick,f=(0,Gt.useRef)(Math.random().toString()).current,m=(0,Gt.useRef)(Math.random().toString()).current,p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(Gt.useState(""),2),h=p[0],v=p[1];return(0,Gt.useEffect)((function(){if(r){var e=document.querySelector(t),n=document.getElementById(f);if(!e&&!n)return;var o=e.cloneNode(!0),i=e.getBoundingClientRect();o.style.position="fixed",o.style.top="".concat(i.y,"px"),o.style.left="".concat(i.x,"px"),u&&(o.style.pointerEvents="none",o.style.cursor="default"),n.style.position="fixed",n.style.top="".concat(i.y,"px"),n.style.left="".concat(i.x,"px");var s=i.width+2*a,c=i.height+2*l;n.style.width="".concat(s,"px"),n.style.height="".concat(c,"px"),n.style.padding="".concat(l,"px ").concat(a,"px"),n.style.transform="translate(-".concat(a,"px, -").concat(l,"px)"),v(o.outerHTML)}}),[r]),{renderHighlightedElement:function(){return Gt.createElement("div",null,Gt.createElement("div",{className:s,id:f}),Gt.createElement("div",{className:c,id:m,dangerouslySetInnerHTML:{__html:h},onClick:d}))},elementBackgroundId:f,elementWrapperId:m}}({triggerCondition:t,elementSelector:'[data-test-id="'.concat(rz.Logo,'"]'),backgroundElementClassName:"MainFeedAlert_logoBackground_sOXSU",inactive:i,onClick:function(e){e.preventDefault(),n(),l()}}).renderHighlightedElement;if(!t)return null;var c=!i&&!nr().isMobile;return Gt.createElement(PM,{classNames:{wrapper:"MainFeedAlert_root_LqJwe",block:cG()("MainFeedAlert_popup_QZz4k",c&&"MainFeedAlert_small_drUi0"),content:"MainFeedAlert_popupContent_Gkqtr"},isHiddenClose:!0,onClose:n},Gt.createElement("div",{className:cG()("MainFeedAlert_closeContainer_SVDkh",c&&"MainFeedAlert_outside_bvW3z"),onClick:o},Gt.createElement(pB,{glyph:hB.Bt0,className:"MainFeedAlert_closeIcon_kDmUC"})),Gt.createElement("div",{className:cG()("MainFeedAlert_preview_ciDW6",c&&"MainFeedAlert_smallPreview_bxXee",a?"MainFeedAlert_ru_A17Uu":"MainFeedAlert_en_TijRO")}),Gt.createElement("div",{className:"MainFeedAlert_title_MANpm"},oz.title),Gt.createElement("div",{className:cG()("MainFeedAlert_description_PMha8",c&&"MainFeedAlert_descriptionSmall_LX4I_")},oz.description),i&&Gt.createElement(FB,{className:"MainFeedAlert_button_H1wQT",onClick:r},oz.ok),Gt.createElement("div",{className:"MainFeedAlert_logoTutorialWrapper_xTpio"},s(),Gt.createElement("div",{className:"MainFeedAlert_arrow_YX5Bj"}),Gt.createElement("div",{className:"MainFeedAlert_textBlock_OEnOf"},Gt.createElement("div",{className:"MainFeedAlert_introTitle_o_NYz"},i?oz.introTitleFeed:oz.introTitleOther),Gt.createElement("div",{className:"MainFeedAlert_introDescription_KGqN4"},oz.introDescription))))},iz=(0,Qr.getTranslation)("@boosty/common/components.MarketingAlert"),lz=function(){var e=_k().isAuthorized,t=function(){var e=(0,Vt.I0)(),t=_k().isAuthorized,n=(0,Vt.v9)(IA),r=(0,Vt.v9)(NA),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),a=o[0],i=o[1];(0,Gt.useEffect)((function(){t&&!r.isFetched&&e(bg.action())}),[t]),(0,Gt.useEffect)((function(){(null==n?void 0:n.length)>0&&i(function(e){return e.sort(wk)[0]}(n))}),[n]);var l=function(){e(Sg.action({alertId:a.id})),i(null)};return{alerts:n,alert:a,onShow:function(){bd.log.marketing.showAlert({alertId:a.id})},onDismiss:function(){l(),bd.log.marketing.dismissAlert({alertId:a.id})},onAccept:function(){l(),bd.log.marketing.acceptAlert({alertId:a.id})}}}(),n=t.alert,r=t.onShow,o=t.onAccept,a=t.onDismiss,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),l=i[0],s=i[1];if((0,Gt.useEffect)((function(){s(zd())}),[e]),(0,Gt.useEffect)((function(){n&&r()}),[n]),!n)return null;var c=n.imageUrl,u=n.link,d=n.text,f=n.title;return Gt.createElement("div",{style:{top:"".concat(l,"px")},className:"MarketingAlert_root_kzVDS"},Gt.createElement("button",{className:"MarketingAlert_close_T3kFC",type:"button",onClick:function(){a()}},Gt.createElement(pB,{className:"MarketingAlert_closeIcon_vAiEx",glyph:hB.bMz})),c&&Gt.createElement("img",{className:"MarketingAlert_image_K5KFc",src:c}),Gt.createElement("div",{className:"MarketingAlert_title_k5vUz"},f),Gt.createElement("div",{className:"MarketingAlert_text_YYJHp"},d),u&&Gt.createElement(cM,{to:u,target:"_blank",rel:"noopener noreferrer"},Gt.createElement(FB,{className:"MarketingAlert_link_kSR9E",onClick:function(){o()}},iz.more)))},sz=function(){return sz=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sz.apply(this,arguments)},cz=function(e){var t=e.id,n=void 0===t?null:t,r=e.classNames,o=void 0===r?{}:r,a=e.dataAttributes,i=e.children;return Gt.createElement("div",sz({id:n,className:cG()("Notice_root_BZCVG",o.block)},a),Gt.createElement("div",{className:cG()("Notice_content_YaPuP",o.content)},i))};const uz="PaymentProblemNotification_bloggerName_qXPld",dz="PaymentProblemNotification_bloggerNameBlock_J_6au";var fz,mz,pz,hz,vz,gz,yz=(0,Qr.getTranslation)("@boosty/common/components.PaymentProblemNotification"),_z=function(){var e,t=(0,Vt.v9)(XO).problemSubscriptions;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"PaymentProblemNotification_cardErrorPicture_Y_loW"}),Gt.createElement("div",{className:"PaymentProblemNotification_messageBlock_fAFMB"},Gt.createElement("div",{className:"PaymentProblemNotification_messageContent_gZi4I"},Gt.createElement("span",null,(0,Qr.getParametrizedText)(yz.noticeMessage,{blogName:"".concat(t[0].name)}))," ",1===(e=t.map((function(e){return e.name}))).length?Gt.createElement("div",{className:dz},Gt.createElement("div",{className:cG()(uz)},e[0]),","):2===e.length?Gt.createElement("div",{className:dz},Gt.createElement("div",{className:uz},e[0])," ",yz.and," ",Gt.createElement("div",{className:uz},e[1]),","):Gt.createElement("div",{className:dz},Gt.createElement("div",{className:uz},e[0]),", ",Gt.createElement("div",{className:uz},e[1])," ",yz.and," ",yz.otherAuthors,",")," ",yz.checkBalance," ",Gt.createElement("span",{className:"PaymentProblemNotification_link_joqIb"},yz.cardData))))};!function(e){e.BANNED_NOTICE="bannedNotice",e.PAYMENT_PROBLEM_NOTICE="paymentProblem",e.EMAIL_CONFIRMATION_NOTICE="emailConfirmation",e.AUTH_FB_WITHOUT_PHONE="authFbWithoutPhone",e.NOTICE_BLOCK="noticeBlock",e.ACCOUNT_DELETION_NOTICE="accountDeletionNotice"}(fz||(fz={})),function(e){e.NAME="name",e.EMAIL="email",e.OLD_PHONE="oldPhone",e.SMS_CODE="smsCode",e.PHONE="phone",e.SOCIAL_LINKS="socialLinks",e.PHOTO="photo"}(mz||(mz={})),function(e){e[e.INACTIVE=0]="INACTIVE",e[e.ACTIVE=1]="ACTIVE",e[e.RETRY=2]="RETRY",e[e.LOCKED=3]="LOCKED"}(pz||(pz={})),function(e){e[e.EMPTY=0]="EMPTY",e[e.LOCKED=1]="LOCKED",e[e.OLD_PHONE_NO_VERIFY=2]="OLD_PHONE_NO_VERIFY",e[e.OLD_PHONE_VERIFY=3]="OLD_PHONE_VERIFY",e[e.NEW_PHONE=4]="NEW_PHONE",e[e.COMPLETE=5]="COMPLETE"}(hz||(hz={})),function(e){e.ALREADY_EXISTED_PHONE="already_existed_phone",e.INVALID_OLD_PHONE="invalid_old_phone",e.INVALID_PHONE="invalid_phone",e.VERIFY_GATE_ERROR="verify_gate_error",e.INVALID_CODE="invalid_code",e.INVALID_SMS_CODE="invalid_sms_code",e.TRY_CODE_REACHED="try_code_reached",e.TRY_CODE_LIMIT="try_code_limit",e.SMS_GATE_RATELIMIT="sms_gate_ratelimit"}(vz||(vz={})),function(e){e.INACTIVE="*",e.ACTIVE="_"}(gz||(gz={}));var Ez=(0,Qr.getTranslation)("@boosty/common/components.NoticeList.components.BlockedFbNotification"),bz=function(){return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlockedFbNotification_containerIcon_rhJWv"},Gt.createElement(pB,{className:"BlockedFbNotification_icon_BlCJD",glyph:hB.FCX})),Gt.createElement("div",{className:"BlockedFbNotification_message_w6K1i"},Gt.createElement("span",null,Ez.blockedFbNotification," ",Gt.createElement(cM,{className:"BlockedFbNotification_link_yarEg",onClick:function(){window.setTimeout((function(){document.querySelector("[name=".concat(mz.PHONE,"]")).scrollIntoView(Zd())}),1)},to:ir.SETTINGS_EDIT},Ez.enterPhone),",  ",Ez.reasonEnterPhone)))},Sz=n(9699),Tz=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit"),Iz=function(e){var t;return Sz.Ry().shape(((t={})[mz.NAME]=Sz.Z_().required((function(){return Tz.errors.common.required})).min(3,(function(){return Tz.errors.name.min})).max(50,(function(){return Tz.errors.name.max})),t[mz.EMAIL]=e.hasEmail?Sz.Z_().email("Invalid email").required():Sz.Z_().email("Invalid email"),t[mz.PHOTO]=Sz.nK().test("fileSize","file is to large",(function(e){return!e||e&&e.size<10485760})),t[mz.SOCIAL_LINKS]=Sz.nK().test("url","url is not a valid",(function(e){return!e||!e.some((function(e){return e.url&&e.url.trim().length>0&&!Fa(e.url)}))})),t))};const Nz="EmailConfirmation_email_yhOIb",Cz="EmailConfirmation_button_cobiW",wz="EmailConfirmation_message_c1rfO",Oz="EmailConfirmation_link_d00X2";var Az=(0,Qr.getTranslation)("@boosty/common/components.NoticeList.components.EmailConfirmation"),Pz=function(e){var t=e.currentUser,n=e.confirmEmail,r=void 0===n?Yt.noop:n,o=e.dismissEmail,a=void 0===o?Yt.noop:o,i=e.sendEmailConfirmationLetter,l=function(e){var t=e.confirmEmail,n=e.dismissEmail,r=e.sendEmailConfirmationLetter,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),a=o[0],i=o[1],l=null,s=function(){window.setTimeout((function(){var e=document.querySelector("[name=".concat(mz.EMAIL,"]"));e.scrollIntoView(Zd()),e.focus()}),1)};return(0,Gt.useEffect)((function(){return function(){window.clearTimeout(l)}}),[]),{isRecentlySentConfirmationLetter:a,onAddEmailClick:function(){s()},onChangeEmailClick:function(){s()},onDismissButtonClick:function(){n(),i(!1)},onConfirmButtonClick:function(){t()},onResendClick:function(e){e.preventDefault(),r(),i(!0),window.clearTimeout(l),l=window.setTimeout((function(){i(!1)}),3e4)}}}({confirmEmail:r,dismissEmail:a,sendEmailConfirmationLetter:void 0===i?Yt.noop:i}),s=l.isRecentlySentConfirmationLetter,c=l.onAddEmailClick,u=l.onConfirmButtonClick,d=l.onChangeEmailClick,f=l.onResendClick,m=l.onDismissButtonClick,p=function(){var e=t.email,n=t.emailConfirmed,r=n.social,o=n.noSocial,a=Boolean(t.email),i=a&&!o;return a?a&&!r&&o?Gt.createElement("div",{className:wz},Gt.createElement("span",null,Az.isYourEmail," ",Gt.createElement("span",{className:Nz},e),"?"),Gt.createElement("div",{className:"EmailConfirmation_buttonsContainer_xHNT5"},Gt.createElement(FB,{className:cG()(Cz),onClick:u},Az.confirm),Gt.createElement(HB,{className:cG()(Cz),onClick:m},Az.dismiss))):i&&s?Gt.createElement("div",{className:wz},Gt.createElement("span",null,Az.confirmationLetterSentMessage," "),Gt.createElement("span",{className:Nz},e)):i&&!s?Gt.createElement("div",{className:wz},Gt.createElement("span",null,Az.confirmEmail," ",Gt.createElement("span",{className:Nz},e),". ",Az.hasNotReceivedConfirmationLetter," ",Gt.createElement(cM,{className:Oz,onClick:f,to:ir.SETTINGS_EDIT},Az.resendConfirmationLetter)," ",Az.or," ",Gt.createElement(cM,{className:Oz,onClick:d,to:ir.SETTINGS_EDIT},Az.changeEmail))):null:Gt.createElement("div",{className:wz},Gt.createElement("span",null,Az.noEmail," "),Gt.createElement(cM,{className:Oz,onClick:c,to:ir.SETTINGS_EDIT},Az.enterEmail))}();return Gt.createElement(Gt.Fragment,null,p?Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"EmailConfirmation_envelopeIcon__qJsQ"}),p):null)};const Lz="InfoMessage_link_Fs9DT";var Rz,kz,Dz,Uz=function(e){var t=e.data,n=t.title,r=t.description,o=t.actionText,i=t.expandText,l=t.hasPopup,s=t.fullDescription,c=t.link,u=nr().isMobile,d=(0,dH.useOverlayPopups)().showPopup;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"InfoMessage_iconContainer_x3Znu"},Gt.createElement(pB,{glyph:hB.FCX,className:"InfoMessage_icon_Q0fJH"})),Gt.createElement("div",{className:"InfoMessage_text_CpyyV"},Gt.createElement("span",{className:"InfoMessage_warning_XrpLm"},n,"."),u?Gt.createElement("br",null):Gt.createElement(Gt.Fragment,null," "),r," ",l?Gt.createElement("button",{className:Lz,onClick:function(){d({type:a.INFO_MESSAGE_POPUP,data:{title:n,text:s,buttonText:o,link:c}})}},i):Gt.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:Lz},o)))},Bz=oo("NoticeList"),xz=function(e){var t=e.isBanned,n=e.isAuthorized,r=e.currentUser,o=e.confirmEmail,a=e.dismissEmail,i=e.sendEmailConfirmationLetter,l=e.classNames,s=e.accountScheduledForDeletionNotice,c=e.bannedNotice,u=Mf(),d=function(){var e=(0,Vt.I0)(),t=(0,Vt.v9)(XO),n=(0,Vt.v9)(wA),r=(0,Vt.v9)(OA),o=(null==n?void 0:n.length)>0;return(0,Gt.useEffect)((function(){(null==t?void 0:t.hasInfoMessages)&&!r.isFetched&&e(kg.action())}),[t]),{infoMessages:n,hasInfoMessages:o,closeMessage:function(t){e(Dg.action({id:t}))}}}(),f=d.hasInfoMessages,m=d.infoMessages;if(!r)return null;var p=r.email,h=r.emailConfirmed,g=h.social,y=h.noSocial,_=r.authSource,E=_.type,b=_.list,S=!!p&&g&&y,T=r.problemSubscriptions.length>0,I=b.includes(v.PHONE),N=E===v.FB&&!I,C=r.isScheduledForDeletion;return t||T||N||!S||C||f?Gt.createElement(cz,{id:te.NOTICE_LIST,classNames:{block:l.block,content:l.content},dataAttributes:{"data-test-id":Bz(fz.NOTICE_BLOCK)}},t?Gt.createElement("div",{className:l.notice,"data-test-id":Bz(fz.BANNED_NOTICE)},Gt.createElement((function(){return c}),null)):Gt.createElement(Gt.Fragment,null,f&&m.map((function(e){return Gt.createElement("div",{key:e.id,className:l.notice},Gt.createElement(Uz,{data:e}))})),C&&Gt.createElement("div",{className:cG()(l.notice,l.scheduledForDeletion),"data-test-id":Bz(fz.ACCOUNT_DELETION_NOTICE)},Gt.createElement((function(){return s}),null)),T&&Gt.createElement("div",{className:cG()(l.notice,l.problemSubscriptions),onClick:function(e){var t;e.preventDefault();var n=r.problemSubscriptions[0],o=(0,Yt.getParametrizedUrl)(ir.BLOG_PURCHASE,{blogUrl:n.blogUrl,levelId:n.levelId},((t={}).ssource=Xu.NOTICE_LIST,t));u(o,{state:{withoutBinsList:!0,from:en.PAYMENT_PROBLEM_NOTIFICATION}})},"data-test-id":Bz(fz.PAYMENT_PROBLEM_NOTICE)},Gt.createElement(_z,null)),n&&!S&&Gt.createElement("div",{className:l.notice,"data-test-id":Bz(fz.EMAIL_CONFIRMATION_NOTICE)},Gt.createElement(Pz,{currentUser:r,confirmEmail:o,dismissEmail:a,sendEmailConfirmationLetter:i})),N&&Gt.createElement("div",{className:l.notice,"data-test-id":Bz(fz.AUTH_FB_WITHOUT_PHONE)},Gt.createElement(bz,null)))):null},Mz=function(){return Mz=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mz.apply(this,arguments)},Fz=function(e){return Gt.createElement(xz,Mz({},e,{classNames:{block:"NoticeList_block_TEbBD",content:"NoticeList_content_Z5852",notice:"NoticeList_notice_WzJOs",problemSubscriptions:"NoticeList_problemSubscriptions_yqvcC"}}))},Gz=n(60520);!function(e){e.TITLE="title",e.AUTO_SIZE_TOGGLER="isImageChangeSizeAuto",e.IMAGE_LARGE="imageLarge",e.IMAGE_MEDIUM="imageMedium",e.IMAGE_SMALL="imageSmall",e.IMAGE_ORIGINAL="original"}(Rz||(Rz={})),function(e){e[e.CREATE=0]="CREATE",e[e.EDIT=1]="EDIT"}(kz||(kz={})),function(e){e[e.SMILE=0]="SMILE",e[e.BADGE=1]="BADGE",e[e.ROLE=2]="ROLE"}(Dz||(Dz={}));const Hz={root:"ImageUploader_root_QHJTG",active:"ImageUploader_active_c5cb_",empty:"ImageUploader_empty_J1b63",large:"ImageUploader_large_HFYhj",medium:"ImageUploader_medium_HQI4q",small:"ImageUploader_small_v6fkZ",error:"ImageUploader_error_jZT5T",innerWrapper:"ImageUploader_innerWrapper_GMtPa",iconDownload:"ImageUploader_iconDownload_U7bRx",sizeLabel:"ImageUploader_sizeLabel_m3WIl",spinner:"ImageUploader_spinner_bFqXw",image:"ImageUploader_image_l7Nq3",imageLoaded:"ImageUploader_imageLoaded_V6Udc",fadeIn:"ImageUploader_fadeIn_HOBqh"};var Wz,Vz=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},jz=((Wz={})[Rz.IMAGE_ORIGINAL]=Hz.large,Wz[Rz.IMAGE_LARGE]=Hz.large,Wz[Rz.IMAGE_MEDIUM]=Hz.medium,Wz[Rz.IMAGE_SMALL]=Hz.small,Wz),zz=function(e){var t,n,r,o,a=e.className,i=e.size,l=e.onUpload,s=e.previewImage,c=e.isActive,u=e.hasSizeLabel,d=e.name,f=e.isLoading,m=Vz((0,Gz.U$)(d),3),p=m[0],h=m[1],v=m[2],g=Vz((0,Gt.useState)(!1),2),y=g[0],_=g[1],E=Vz((0,Gt.useState)(!1),2),b=E[0],S=E[1],T=Vz((0,Gt.useState)(!1),2),I=T[0],N=T[1],C=(0,Gt.useRef)(null),w=(0,Gt.useMemo)((function(){return f||b}),[f,b]);(0,Gt.useEffect)((function(){N(Boolean(null==h?void 0:h.error)),h.error&&(v.setValue(null),S(!1),_(!1))}),[h.error]),(0,Gt.useEffect)((function(){(null==s?void 0:s.length)&&(_(!0),S(!0))}),[s]);var O=fB()(Hz.root,a,((t={})[Hz.active]=c,t),((n={})[Hz.empty]=!y&&!w,n),((r={})[Hz.error]=I,r),jz[d]);return Gt.createElement("label",{id:p.name,className:O},Gt.createElement("span",{className:Hz.innerWrapper,style:{width:"".concat(i,"px"),height:"".concat(i,"px")}},(y||w)&&!I&&Gt.createElement("img",{ref:C,onLoadStart:function(){S(!0)},onLoad:function(){S(!1)},onError:function(){N(!0),S(!1)},className:fB()(Hz.image,(o={},o[Hz.imageLoaded]=!w,o)),src:s,alt:d}),(!y||I)&&c&&!w&&Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{className:Hz.iconDownload,glyph:hB.DjJ}),u&&Gt.createElement("span",{className:Hz.sizeLabel},i,"px")),w&&Gt.createElement(uM,{size:20,className:Hz.spinner}),c&&Gt.createElement("input",{className:Hz.input,type:"file",accept:".png",hidden:!0,name:null==p?void 0:p.name,onChange:function(e){var t=Array.from(e.target.files);S(!0),t.forEach((function(e){e&&function(e){var t=this,n=new FileReader;n.readAsDataURL(e),n.onloadstart=function(){_(!1)},n.onloadend=function(){return n=t,void 0,o=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,l(e)];case 1:return t.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{l(o.next(e))}catch(e){t(e)}}function i(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,i)}l((o=o.apply(n,[])).next())}));var n,r,o},n.onerror=function(){N(!0)}}(e)})),p.onChange(e)}})))};const Yz="TitleEditor_input_KpFlO";var Kz=function(){return Kz=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kz.apply(this,arguments)},qz=(0,Qr.getTranslation)("@common/components.SmilesOrBadgesForm.components.TitleEditor"),Xz=function(e){var t=e.label,n=e.description,r=e.className,o=e.isLoading,a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gz.U$)(Rz.TITLE),2),i=a[0],l=a[1],s=Boolean(l.error);return Gt.createElement("div",{className:fB()("TitleEditor_root_n9AR1",r)},Gt.createElement(Zx,Kz({id:Rz.TITLE,name:Rz.TITLE,isErrorInFlow:!0,className:Yz,classNameInput:Yz,error:s&&l.error,placeholder:qz.placeholder,description:!s&&n.length?n:"",label:t},i,{rightElement:o&&Gt.createElement(uM,{size:20,solid:!0,className:"TitleEditor_spinner_ThKwK"})})))};const Qz={root:"ImageAutoSizeToggler_root_qB4w3",description:"ImageAutoSizeToggler_description_Iuk9l"};var Jz=function(){return Jz=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jz.apply(this,arguments)},Zz=function(e){var t=e.isAutoSizeEnabled,n=e.isDisabled,r=e.className,o=e.onToggle,a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gz.U$)(Rz.AUTO_SIZE_TOGGLER),1)[0];return Gt.createElement("div",{className:fB()(Qz.root,r)},Gt.createElement(SF,Jz({checked:t,classNames:{wrapper:Qz.toggler},onToggle:n?Yt.noop:o},a,{isDisabled:n})))};function $z(e,t){switch(e){case Y.ORIGINAL:return 4096;case Y.LARGE:return t?112:72;case Y.MEDIUM:return t?56:36;case Y.SMALL:return t?28:18}return null}const eY={wrapper:"ImagesEditor_wrapper_sco8Z",title:"ImagesEditor_title_wvMcb",arrow:"ImagesEditor_arrow_nXIMw",error:"ImagesEditor_error_pc2f4",fadeIn:"ImagesEditor_fadeIn_gIIZ0"};var tY,nY=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},rY=(0,Qr.getTranslation)("@common/components.SmilesOrBadgesForm.components.ImagesEditor"),oY=((tY={})[Y.LARGE]=Rz.IMAGE_LARGE,tY[Y.MEDIUM]=Rz.IMAGE_MEDIUM,tY[Y.SMALL]=Rz.IMAGE_SMALL,tY[Y.ORIGINAL]=Rz.IMAGE_ORIGINAL,tY),aY=function(e){var t=e.isAutoSize,n=e.images,r=e.className,o=e.onImageChange,a=e.onError,i=e.isSmile,l=(0,Gz.u6)(),s=nY((0,Gt.useState)(null),2),c=s[0],u=s[1],d=nY((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=function(e){return function(n){return void 0,void 0,i=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:m(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,o(e,n)];case 2:return r.sent(),u(null),[3,4];case 3:return function(e,t){var n=rY.errors[e];u(n),l.setFieldError(oY[t],n)}(r.sent(),e),a(rY.errors.default_error),m(!1),[3,4];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{a(i.next(e))}catch(e){t(e)}}function o(e){try{a(i.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof r?a:new r((function(e){e(a)}))).then(n,o)}a((i=i.apply(undefined,[])).next())}));var r,i}};return(0,Gt.useEffect)((function(){var e;t&&f&&m((e=n,!(Object.values(e).every((function(e){return Boolean(e)}))||c)))}),[n]),Gt.createElement("div",{className:fB()(eY.root,r)},Gt.createElement("div",{className:eY.title},rY.label),Gt.createElement("div",{className:eY.wrapper},Gt.createElement(zz,{isLoading:f,className:eY.uploader,isActive:!0,hasSizeLabel:!t,onUpload:p(t?Y.ORIGINAL:Y.LARGE),previewImage:null==n?void 0:n[Y.LARGE],size:$z(Y.LARGE,i),name:t?Rz.IMAGE_ORIGINAL:Rz.IMAGE_LARGE}),Gt.createElement(pB,{className:eY.arrow,glyph:hB.WTy}),Gt.createElement(zz,{isLoading:f,className:eY.uploader,isActive:!t,hasSizeLabel:!t,onUpload:p(Y.MEDIUM),previewImage:null==n?void 0:n[Y.MEDIUM],size:$z(Y.MEDIUM,i),name:Rz.IMAGE_MEDIUM}),Gt.createElement(pB,{className:eY.arrow,glyph:hB.WTy}),Gt.createElement(zz,{isLoading:f,className:eY.uploader,isActive:!t,hasSizeLabel:!t,onUpload:p(Y.SMALL),previewImage:null==n?void 0:n[Y.SMALL],size:$z(Y.SMALL,i),name:Rz.IMAGE_SMALL})),(null==c?void 0:c.length)&&Gt.createElement("div",{className:eY.error},c))},iY=(0,Qr.getTranslation)("@common/components.SmilesOrBadgesForm.components.ImageRequirements"),lY=function(e){var t,n,r,o,a=nr(),i=a.badge,l=a.smile,s=e.isAutoResize,c=e.isSmile,u=e.className,d=c?l.maxFilesize:i.maxFilesize,f=Gt.createElement(Gt.Fragment,null,Gt.createElement("br",null),"- ",iY.nonAnimateRequirement);return Gt.createElement("div",{className:u},Gt.createElement(Gt.Fragment,null,s?iY.descriptionAuto:iY.descriptionManual,Gt.createElement("br",null)),Gt.createElement("br",null),(r=Lo(d.original,Z.B,void 0,!0),o=Lo(d.medium,Z.B,void 0,!0),Gt.createElement(Gt.Fragment,null,iY.requirementsLabel,Gt.createElement("br",null),"- ",iY.sizeRequirement," ",s?r:o)),Gt.createElement("br",null),(t=(0,Qr.getParametrizedText)(iY.autoRequirements.resolution,{minSize:c?"112 x 112":"72 x 72",maxSize:"4096 x 4096"}),n=iY.manualRequirements.similar,Gt.createElement(Gt.Fragment,null,"- ",s?t:n)),!c&&f,Gt.createElement("br",null),"- ",iY.squareRequirement,Gt.createElement("br",null))};const sY={buttonDelete:"SmilesOrBadgesForm_buttonDelete_B2y0R",formInProgress:"SmilesOrBadgesForm_formInProgress_wURKQ",spinner:"SmilesOrBadgesForm_spinner_w0VNj",titleEditor:"SmilesOrBadgesForm_titleEditor_AXujU",buttons:"SmilesOrBadgesForm_buttons_Dhrlc",button:"SmilesOrBadgesForm_button_HRg3E",buttonSubmit:"SmilesOrBadgesForm_buttonSubmit_toE98",buttonDeleteIcon:"SmilesOrBadgesForm_buttonDeleteIcon_b6m4m",buttonDeleteSpinner:"SmilesOrBadgesForm_buttonDeleteSpinner_LnDzD",toggler:"SmilesOrBadgesForm_toggler_luoTq",description:"SmilesOrBadgesForm_description_s5Qh4",fadeIn:"SmilesOrBadgesForm_fadeIn_AjbY0"};var cY,uY=(0,Qr.getTranslation)("@common/components.SmilesOrBadgesForm"),dY=function(e){var t,n,r=e.type,o=e.onAutoResizeChange,a=e.onImageChange,i=e.onCancel,l=e.onRemove,s=e.titleLabel,c=e.isAutoResize,u=e.isEditForm,d=e.isFormReady,f=e.formik,m=e.isNameChecking,p=e.onError,h=e.images,v=void 0===h?{}:h,g=v.large,y=v.medium,_=v.small,E=v.original,b=r===Dz.SMILE;return Gt.createElement("div",{className:sY.root},f.isSubmitting&&Gt.createElement(uM,{className:sY.spinner,size:50}),Gt.createElement(Gz.Hy,{value:f},Gt.createElement("form",{className:fB()((t={},t[sY.formInProgress]=f.isSubmitting,t)),onSubmit:f.handleSubmit},Gt.createElement(Xz,{label:s,description:b?uY.titleDescriptionLatin:uY.titleDescriptionChange,className:sY.titleEditor,isLoading:m}),Gt.createElement(aY,{isAutoSize:c,className:sY.imageEditor,onError:p,isSmile:b,images:(n={},n[Y.LARGE]=g,n[Y.MEDIUM]=y,n[Y.SMALL]=_,n),onImageChange:a}),Gt.createElement(Zz,{className:sY.toggler,isAutoSizeEnabled:c,isDisabled:Boolean(null==E?void 0:E.length),onToggle:o}),Gt.createElement(lY,{className:sY.description,isAutoResize:c,isSmile:b}),Gt.createElement("div",{className:sY.buttons},Gt.createElement(FB,{type:"submit",className:fB()(sY.button,sY.buttonSubmit),isDisabled:!d||f.isSubmitting||m},uY.save),Gt.createElement(HB,{className:fB()(sY.button,sY.buttonCancel),onClick:i},uY.cancel),u&&Gt.createElement(HB,{className:fB()(sY.button,sY.buttonDelete),isDisabled:f.isSubmitting,onClick:l},Gt.createElement(pB,{className:sY.buttonDeleteIcon,glyph:hB.IT9}),uY.delete)))))},fY=(0,Qr.getTranslation)("@common/components.SmilesOrBadgesForm"),mY=/^[a-zA-Z0-9]+$/,pY=/^[а-яА-ЯёЁa-zA-Z0-9]+$/,hY=function(e){var t,n=e.type,r=e.checkNameCallback,o=e.initialValues;return Sz.Ry().shape(((t={})[Rz.TITLE]=Sz.Z_().matches(n===Dz.SMILE?mY:pY,n===Dz.SMILE?fY.errors.title.symbolsSmiles:fY.errors.title.symbolsBadgesAndRoles).max(20,fY.errors.title.maxLength).required(fY.errors.title.required).test("equal",fY.errors.title.equal,(function(e){return void 0,void 0,a=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:if(t=o.title,n===Dz.BADGE||n===Dz.ROLE||t===e||!e)return[2,!0];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r(e)];case 2:return a.sent(),[2,!0];case 3:return a.sent(),[2,!1];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function r(e){try{i(a.next(e))}catch(e){n(e)}}function o(e){try{i(a.throw(e))}catch(e){n(e)}}function i(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(r,o)}i((a=a.apply(undefined,[])).next())}));var t,a})),t))},vY=function(){return vY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vY.apply(this,arguments)},gY=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},yY=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},_Y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},EY=function(e){var t,n,r,o=e.initialData,a=void 0===o?{}:o,i=a.title,l=a.imagesUrls,s=e.initialAutoSize,c=e.blogUrl,u=e.type,d=e.action,f=e.onImageUpload,m=e.onSubmit,p=void 0===m?Yt.noopPromise:m,h=e.onCancel,v=void 0===h?Yt.noop:h,g=e.onSuccess,y=void 0===g?Yt.noop:g,_=e.onError,E=void 0===_?Yt.noop:_,b=(0,Vt.I0)(),S=_Y((0,Gt.useState)(null),2),T=S[0],I=S[1],N=_Y((0,Gt.useState)(s),2),C=N[0],w=N[1],O=_Y((0,Gt.useState)(!1),2),A=O[0],P=O[1],L=_Y((0,Gt.useState)(!1),2),R=L[0],k=L[1],D=(0,Gt.useRef)(!1),U=(0,Gt.useMemo)((function(){var e,t,n=T?null===(t=Object.keys(T))||void 0===t?void 0:t.reduce((function(e,t){var n;return vY(vY({},e),((n={})[t]=T[t].url,n))}),{}):{};return(e={})[Y.LARGE]=(C?n[Y.ORIGINAL]:n[Y.LARGE])||(null==l?void 0:l.largeUrl),e[Y.MEDIUM]=n[Y.MEDIUM]||(null==l?void 0:l.mediumUrl),e[Y.SMALL]=n[Y.SMALL]||(null==l?void 0:l.smallUrl),e}),[T]),B=(0,Gt.useRef)(((t={})[Rz.TITLE]=i||"",t[Rz.IMAGE_ORIGINAL]=U[Y.LARGE],t[Rz.IMAGE_LARGE]=U[Y.LARGE],t[Rz.IMAGE_MEDIUM]=U[Y.MEDIUM],t[Rz.IMAGE_SMALL]=U[Y.SMALL],t[Rz.AUTO_SIZE_TOGGLER]=C,t)),x=(0,Gz.TA)({initialValues:B.current,validationSchema:hY({type:u,initialValues:B.current,checkNameCallback:function(e){return gY(this,void 0,void 0,(function(){return yY(this,(function(t){switch(t.label){case 0:return[4,b((0,dm.Ax)(Dv.action)({blogUrl:c,baseName:(0,Yt.strCapitalize)(e)}))];case 1:return[2,t.sent()]}}))}))}}),validateOnBlur:!1,validateOnChange:!1,validateOnMount:!1,onSubmit:F}),M=(0,Gt.useMemo)((function(){return(0,uU.Z)(x.validateForm,500)}),[x.validateForm]);function F(){var e;return gY(this,void 0,void 0,(function(){var t,n;return yY(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,p()];case 1:return r.sent(),y(),[3,3];case 2:return t=r.sent(),n=(null===(e=t.serverError)||void 0===e?void 0:e.error)||pt.DEFAULT,E(n),[3,3];case 3:return[2]}}))}))}return n={onFetchCroppedImage:function(e){var t=e.data,n=t.size,r=t.resizedId,o=t.url;I((function(e){var t;return vY(vY({},e),((t={})[n]={id:r,url:o},t))}))}},r=n.onFetchCroppedImage,(0,Gt.useEffect)((function(){return sk.register({channel:Xe.USER,message:Qe.UPLOAD_ORIGINAL_SMILE_IMAGE,handler:r}),function(){sk.unregister({channel:Xe.USER,message:Qe.UPLOAD_ORIGINAL_SMILE_IMAGE,handler:r})}}),[]),(0,Gt.useEffect)((function(){return sk.register({channel:Xe.USER,message:Qe.UPLOAD_ORIGINAL_BADGE_IMAGE,handler:r}),function(){sk.unregister({channel:Xe.USER,message:Qe.UPLOAD_ORIGINAL_BADGE_IMAGE,handler:r})}}),[]),(0,Gt.useEffect)((function(){return sk.register({channel:Xe.USER,message:Qe.UPLOAD_ORIGINAL_ROLE_IMAGE,handler:r}),function(){sk.unregister({channel:Xe.USER,message:Qe.UPLOAD_ORIGINAL_ROLE_IMAGE,handler:r})}}),[]),(0,Gt.useEffect)((function(){D.current?M(x.values):D.current=!0}),[x.values,M]),(0,Gt.useEffect)((function(){k(x.isValidating)}),[x.values[Rz.TITLE]&&x.isValidating]),(0,Gt.useEffect)((function(){var e=x.values,t=x.errors,n=Boolean(Object.keys(t).length),r=C?[Rz.TITLE,Rz.IMAGE_ORIGINAL]:[Rz.TITLE,Rz.IMAGE_LARGE,Rz.IMAGE_MEDIUM,Rz.IMAGE_SMALL],o=Object.values(U).every((function(e){return Boolean(e)})),a=r.some((function(t){return e[t]!==x.initialValues[t]}));P(!x.isValidating&&!n&&o&&a)}),[x.isValidating,x.errors,T]),{isAutoResize:C,isFormReady:A,isNameChecking:R,type:u,action:d,imagesPackage:T,images:U,formik:x,onImageChange:function(e,t){var n;return gY(this,void 0,void 0,(function(){var r,o,a,i;return yY(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,f(e,t)];case 1:return r=l.sent(),o=r.id,a=r.url,I((function(t){var n;return vY(vY({},t),((n={})[e]={id:o,url:a},n))})),[3,3];case 2:throw i=l.sent(),(null===(n=i.serverError)||void 0===n?void 0:n.error)||pt.DEFAULT;case 3:return[2]}}))}))},onAutoResizeChange:function(){return w(!C)},onSubmit:F,onCancel:v,onSuccess:y,onError:E}},bY=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},SY=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},TY=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},IY=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},NY=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},CY=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},wY=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},OY=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},AY=function(){return AY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},AY.apply(this,arguments)},PY=(0,Qr.getTranslation)("@common/components.SmilesOrBadgesForm.components.forms.BadgesCreateForm"),LY=function(e){var t=function(e){var t=e.blogUrl,n=e.initialName,r=e.achievementName,o=e.onCancel,a=e.onError,i=e.onSuccess,l=EY({blogUrl:t,initialData:{title:n},initialAutoSize:!0,type:Dz.BADGE,action:kz.CREATE,onSubmit:function(){var e,n,o;return bY(this,void 0,void 0,(function(){var a,i,c;return SY(this,(function(u){switch(u.label){case 0:return a=l.formik.values.title,i=l.imagesPackage,c=void 0===i?{}:i,[4,s((0,dm.Ax)(Sh.action)({achievementName:r,blogUrl:t,params:{name:(0,Yt.strCapitalize)(a),largeImageId:null===(e=null==c?void 0:c[Y.LARGE])||void 0===e?void 0:e.id,mediumImageId:null===(n=null==c?void 0:c[Y.MEDIUM])||void 0===n?void 0:n.id,smallImageId:null===(o=null==c?void 0:c[Y.SMALL])||void 0===o?void 0:o.id}}))];case 1:return u.sent(),[2]}}))}))},onCancel:o,onSuccess:i,onImageUpload:function(e,n){return bY(this,void 0,Promise,(function(){return SY(this,(function(r){switch(r.label){case 0:return[4,s((0,dm.Ax)(Ih.action)({blogUrl:t,smileSize:e,file:n}))];case 1:return[2,r.sent()]}}))}))},onError:a}),s=(0,Vt.I0)();return{form:l}}(e).form;return Gt.createElement(dY,AY({},t,{initialAutoSize:!0,titleLabel:PY.title}))},RY=function(){return RY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},RY.apply(this,arguments)},kY=(0,Qr.getTranslation)("@common/components.SmilesOrBadgesForm.components.forms.BadgesEditForm"),DY=function(e){var t=function(e){var t=e.blogUrl,n=e.badgeData,r=void 0===n?{}:n,o=r.id,a=r.name,i=r.smallUrl,l=r.mediumUrl,s=r.largeUrl,c=e.onCancel,u=e.onSuccess,d=e.onError,f=(0,Vt.I0)(),m=EY({blogUrl:t,initialData:{id:o,title:a,imagesUrls:{smallUrl:i,mediumUrl:l,largeUrl:s}},type:Dz.BADGE,action:kz.EDIT,onSubmit:function(){var e,n,r;return TY(this,void 0,void 0,(function(){var i,l,s;return IY(this,(function(c){switch(c.label){case 0:return i=m.formik.values.title,l=m.imagesPackage,s=void 0===l?{}:l,[4,f((0,dm.Ax)(Th.action)({blogUrl:t,badgeId:o,params:{name:(0,Yt.strCapitalize)(i||a),largeImageId:null===(e=null==s?void 0:s[Y.LARGE])||void 0===e?void 0:e.id,mediumImageId:null===(n=null==s?void 0:s[Y.MEDIUM])||void 0===n?void 0:n.id,smallImageId:null===(r=null==s?void 0:s[Y.SMALL])||void 0===r?void 0:r.id}}))];case 1:return c.sent(),[2]}}))}))},onCancel:c,onSuccess:u,onImageUpload:function(e,n){return TY(this,void 0,Promise,(function(){return IY(this,(function(r){switch(r.label){case 0:return[4,f((0,dm.Ax)(Ih.action)({blogUrl:t,smileSize:e,file:n}))];case 1:return[2,r.sent()]}}))}))},onError:d});return{form:m}}(e).form;return Gt.createElement(dY,RY({},t,{onRemove:e.onClickRemoveButton,initialAutoSize:!1,titleLabel:kY.title,isEditForm:!0}))},UY=function(){return UY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},UY.apply(this,arguments)},BY=(0,Qr.getTranslation)("@common/components.SmilesOrBadgesForm.components.forms.SmilesCreateForm"),xY=function(e){var t=e.blogUrl,n=function(e){var t=e.blogUrl,n=e.levelId,r=e.onCancel,o=void 0===r?Yt.noop:r,a=e.onSuccess,i=void 0===a?Yt.noop:a,l=e.onError,s=void 0===l?Yt.noop:l,c=EY({blogUrl:t,initialAutoSize:!0,type:Dz.SMILE,action:kz.CREATE,onSubmit:function(){var e,r,o;return NY(this,void 0,void 0,(function(){var a;return CY(this,(function(i){switch(i.label){case 0:return a=d.formik.values.title,u?[4,f((0,dm.Ax)(Rv.action)({blogUrl:t,params:{baseName:(0,Yt.strCapitalize)(a),levelId:n,largeImageId:null===(e=null==u?void 0:u[Y.LARGE])||void 0===e?void 0:e.id,mediumImageId:null===(r=null==u?void 0:u[Y.MEDIUM])||void 0===r?void 0:r.id,smallImageId:null===(o=null==u?void 0:u[Y.SMALL])||void 0===o?void 0:o.id}}))]:[2];case 1:return i.sent(),[2]}}))}))},onImageUpload:function(e,n){return NY(this,void 0,void 0,(function(){return CY(this,(function(r){switch(r.label){case 0:return[4,f((0,dm.Ax)(Uv.action)({blogUrl:t,smileSize:e,file:n}))];case 1:return[2,r.sent()]}}))}))},onCancel:o,onSuccess:i,onError:s}),u=c.imagesPackage,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(c,["imagesPackage"]),f=(0,Vt.I0)();return{form:d}}({levelId:e.levelId,blogUrl:t,onCancel:e.onCancel,onSuccess:e.onSuccess,onError:e.onError}).form;return Gt.createElement(dY,UY({},n,{titleLabel:BY.title}))},MY=function(){return MY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},MY.apply(this,arguments)},FY=(0,Qr.getTranslation)("@common/components.SmilesOrBadgesForm.components.forms.SmilesEditForm"),GY=function(e){var t=function(e){var t=e.blogUrl,n=e.levelId,r=e.smileData,o=void 0===r?{}:r,a=o.id,i=o.baseName,l=o.smallUrl,s=o.mediumUrl,c=o.largeUrl,u=e.onCancel,d=e.onSuccess,f=e.onError,m=EY({blogUrl:t,initialData:{id:a,title:i,imagesUrls:{smallUrl:l,mediumUrl:s,largeUrl:c}},initialAutoSize:!1,type:Dz.SMILE,action:kz.EDIT,onImageUpload:function(e,n){return wY(this,void 0,void 0,(function(){return OY(this,(function(r){switch(r.label){case 0:return[4,p((0,dm.Ax)(Uv.action)({blogUrl:t,smileSize:e,file:n}))];case 1:return[2,r.sent()]}}))}))},onSubmit:function(){var e,r,o;return wY(this,void 0,void 0,(function(){var l,s,c;return OY(this,(function(u){switch(u.label){case 0:return l=m.formik.values.title,s=m.imagesPackage,c=void 0===s?{}:s,[4,p((0,dm.Ax)(kv.action)({blogUrl:t,smileId:a,params:{baseName:(0,Yt.strCapitalize)(l||i),levelId:n,largeImageId:null===(e=null==c?void 0:c[Y.LARGE])||void 0===e?void 0:e.id,mediumImageId:null===(r=null==c?void 0:c[Y.MEDIUM])||void 0===r?void 0:r.id,smallImageId:null===(o=null==c?void 0:c[Y.SMALL])||void 0===o?void 0:o.id}}))];case 1:return u.sent(),[2]}}))}))},onCancel:u,onSuccess:d,onError:f}),p=(0,Vt.I0)();return{form:m}}(e).form;return Gt.createElement(dY,MY({},t,{onRemove:e.onClickRemoveButton,titleLabel:FY.title,isEditForm:!0,initialAutoSize:!1}))},HY=function(){return HY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},HY.apply(this,arguments)},WY=(0,Qr.getTranslation)("@common/components.OverlayPopups.components.BadgesCreatePopup"),VY=function(e){var t=e.onClose,n=e.onSuccess,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["onClose","onSuccess"]);return Gt.createElement(PM,{title:WY.title,onClose:t},Gt.createElement(LY,HY({onCancel:t,onSuccess:function(){n(),t()},initialName:WY.initialName},r)))},jY=function(){return jY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jY.apply(this,arguments)},zY=(0,Qr.getTranslation)("@common/components.OverlayPopups.components.BadgesEditPopup"),YY=function(e){var t=e.onClose,n=e.onSuccess,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["onClose","onSuccess"]);return Gt.createElement(PM,{title:zY.title,onClose:t},Gt.createElement(DY,jY({onCancel:t,onSuccess:function(){n(),t()}},r)))};!function(e){e.ROOT="ROOT"}(cY||(cY={}));var KY=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qY=function(){return qY=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qY.apply(this,arguments)},XY=600,QY=["https://cpg.money.mail.ru"],JY=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isLoaded:!1,height:"100%"},t.onPostMessage=function(e){if(null!=t.props.src&&(e.origin===t.props.src.substring(0,t.props.src.indexOf("/",9))||QY.includes(e.origin)))try{var n=JSON.parse(e.data);if(n.action&&"billing"===n.type){switch(n.action){case W.OPEN_CPG_WINDOW:t.props.onOpenCPGWindow();break;case W.PAGE_LOAD:t.onLoaded();break;case W.PAY_SUCCESS:t.props.onSuccess(n);break;case W.PAY_ERROR:t.props.onError(n.action_params.code);break;case W.PAY_CANCEL:t.props.onCancel();break;case W.RESIZE_FRAME:var r=Id()?27:3,o=n.action_params.height+r;t.state.isLoaded||t.onLoaded(),t.setState({height:"".concat(o,"px")}),t.props.onResize(o);break;case W.PAGE_3DS:o=nr().dmr.dmrFrame3dsHeight,t.setState({height:"".concat(o,"px")}),t.props.onDmr3dsPage(n),t.props.onResize(o);break;case W.WAITER_START:t.props.onDmrLoading(n)}t.props.onDmrEvent(n)}else if(n.action&&"paypal"===n.type)switch(n.action){case W.PAYPAL_PAY:var a=nr().dmr.dmrFrameHeight;o=nr().isWebView?XY:a,t.setState({height:"".concat(o,"px")});break;case W.PAYPAL_CANCEL:t.setState({height:"".concat(150,"px")});break;case W.PAYPAL_RENDER:t.onLoaded(),zo()&&t.setState({height:"".concat(XY,"px")});break;case W.PAYPAL_ERROR:t.props.onError()}}catch(e){ho.error("FAILED DMR MESSAGE PARSE OR PROCESSING: ",e)}},t}return KY(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.height,n=e.src,r=nr().dmr.dmrFrameHeight;this.setState({height:t?"".concat(t,"px"):String(r)}),n&&bd.log.dmrFrame.dmrFrameStart(),window.addEventListener("message",this.onPostMessage)},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.onPostMessage),bd.log.dmrFrame.clearDmrFrameWaitingTimeout()},t.prototype.componentDidUpdate=function(e,t){this.props.src&&e.src!==this.props.src&&bd.log.dmrFrame.dmrFrameStart()},t.prototype.onLoaded=function(){var e=this.props,t=e.paymentMethod,n=e.paymentType,r=e.transactionId;this.setState({isLoaded:!0}),bd.log.dmrFrame.dmrFrameLoaded({paymentMethod:t,paymentType:n,transactionId:r})},t.prototype.render=function(){var e,t=this.props,n=t.src,r=t.className,o=t.loaderClassName,a=t.LoadingComponent,i=this.state,l=i.isLoaded,s=i.height;return n?Gt.createElement(Gt.Fragment,null,!l&&Gt.createElement("div",{className:o},Gt.createElement(a,null)),Gt.createElement("iframe",qY({src:n,style:{height:s},sandbox:"allow-scripts allow-forms allow-same-origin allow-popups",className:fB()(r,(e={},e.DMRFrame_hiddenFrame_4qcpF=!l,e))},Na(this.getTestId(cY.ROOT))))):Gt.createElement(a,null)},t.defaultProps={onResize:Yt.noop,onDmr3dsPage:Yt.noop,onDmrLoading:Yt.noop,onDmrEvent:Yt.noop,onOpenCPGWindow:Yt.noop},function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}([Cx("DMRFrame")],t)}(Gt.Component),ZY=function(e){var t=Gt.createElement(ux,null,(function(t){return Gt.createElement("div",{className:fB()(t,e.isGlobal?"Loading_veil_FKGaw":"Loading_center_vmTCD")},Gt.createElement(uM,{size:150}))}));return e.isGlobal?Ht.createPortal(t,document.getElementById("modal")):t},$Y=(0,Qr.getTranslation)("@common/containers.BindNewCard.components.BindCardStep.components.BindCardStepTrial"),eK=function(e){var t=function(e){var t,n=e.sendTrialActionStat,r=(0,Vt.I0)(),o=(0,Vt.v9)(bL),a=(0,Vt.v9)(NL),i=(0,Vt.v9)(cP),l=(0,Vt.v9)(uP),s=Gf(),c=s.blogUrl,u=s.levelId,d=s.promoId,f=xf(),m=(0,Do.parse)(f.search).linkId,p=o.find((function(e){return e.levelId===Number(u)})),h=function(){var e;return m?i:p?null===(e=null==p?void 0:p.promos)||void 0===e?void 0:e.find((function(e){return e.id===Number(d)})):null}(),v=(Date.now()+Fn*(null===(t=null==h?void 0:h.trial)||void 0===t?void 0:t.days))/1e3;return(0,Gt.useEffect)((function(){a.isFetched||r((0,dm.Ax)(qp.action)({blogUrl:c})),m&&!l.isFetched&&r((0,dm.Ax)(oS.action)({blogUrl:c,linkId:m}))}),[]),(0,Gt.useEffect)((function(){p&&n(We.TRIAL_ACTION_BIND_CARD_SHOW)}),[a]),{promoDateEnd:v,subscriptionLevelsNetworkStatus:a,privatePromoNetworkStatus:l}}({sendTrialActionStat:e.sendTrialActionStat}),n=t.promoDateEnd,r=t.subscriptionLevelsNetworkStatus;return t.privatePromoNetworkStatus.isFetched&&r.isFetched?Gt.createElement("div",{className:"BindCardStepTrial_root_nKJCD"},Gt.createElement(pB,{glyph:hB.Gc9,className:"BindCardStepTrial_icon_dW9A9"}),Gt.createElement("div",{className:"BindCardStepTrial_text_QPvC0"},(0,Qr.getReactText)((0,Qr.getParametrizedText)($Y.information,{date:go(n,"dd/MM/yyyy")}),{Bold:function(e){var t=e.text;return Gt.createElement("span",{className:"BindCardStepTrial_bold_ILCQw"},t)}}))):Gt.createElement("div",{className:"BindCardStepTrial_spinner_AwrrM"},Gt.createElement(uM,{size:50}))};const tK="BindCardStep_iframe_oAC3W",nK="BindCardStep_optionsRadioLabel__jdVn",rK="BindCardStep_optionsRadioLabelDisabled_Dn9DU";var oK,aK,iK=(0,Qr.getTranslation)("@common/containers.BindNewCard.components.BindCardStep"),lK=function(e){var t,n,o,a=e.dmrUrl,i=e.description,l=e.payMethod,s=e.currency,c=e.isTrial,u=e.sendTrialActionStat,d=e.onError,f=e.onSuccess,m=e.onCurrencyChanged,p=e.onPayMethodChanged,h=nr().currencies.bindCard,v=Qo(r.BIND_CARD_CURRENCY_SELECTION),g=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),y=g[0],_=g[1],E=[{label:(0,Qr.getParametrizedText)(iK.rubles,{currency:mt.RUB}),value:mt.RUB},{label:(0,Qr.getParametrizedText)(iK.dollars,{currency:mt.USD}),value:mt.USD}],b=function(e){p(e)};return Gt.createElement("div",{className:"BindCardStep_root_GVXGT"},Gt.createElement("p",{className:"BindCardStep_description_trmtM"},i),c&&Gt.createElement(eK,{sendTrialActionStat:u}),v&&Gt.createElement("div",{className:"BindCardStep_options_F6MmY"},Gt.createElement(lF,{className:"BindCardStep_optionsSelect_YS3RY",onSelect:function(e){m(e.value)},options:E,label:iK.currency,selected:(o=s,E.find((function(e){return e.value===o})))}),Gt.createElement("div",{className:"BindCardStep_optionsRadioGroup_K_rEs"},Gt.createElement(YF,{classNames:{label:nK,labelDisabled:rK},label:iK.russianCard,isChecked:l===Ee.CARD,value:Ee.CARD,onRadioButtonClick:b,isDisabled:s!==mt.RUB}),Gt.createElement(YF,{classNames:{label:nK,labelDisabled:rK},label:iK.globalCard,isChecked:l===Ee.CARD_GLOBAL,value:Ee.CARD_GLOBAL,onRadioButtonClick:b,isDisabled:s!==mt.RUB}))),c&&Gt.createElement("div",{className:"BindCardStep_warning_Qdfiy"},(0,Qr.getParametrizedText)(iK.warning,{price:Vr({amount:h[s],currency:s})})),Gt.createElement("div",{className:fB()("BindCardStep_dmrFrameWrapper_G1lKs",(t={},t.BindCardStep_dmrFrameWrapper3ds_ZjovK=y,t))},Gt.createElement(JY,{src:a,LoadingComponent:ZY,className:fB()(tK,(n={},n.BindCardStep__3ds_jwdZf=y,n)),loaderClassName:fB()(tK,"BindCardStep_iframeLoader_qSTuK"),onError:d,onSuccess:function(){f()},onDmr3dsPage:function(){_(!0)},paymentMethod:l})))},sK=(0,Qr.getTranslation)("@common/components.PaymentPopupFinalStep"),cK=function(e){var t=e.title,n=e.classNamePicture,r=e.buttonText,o=e.onButtonClick,a=e.children;return Gt.createElement("div",{className:"PaymentPopupFinalStep_root_wm6Yf"},Gt.createElement("div",{className:"PaymentPopupFinalStep_content_VE2Uc"},Gt.createElement("div",{className:fB()("PaymentPopupFinalStep_picture_d72Jx",n)}),Gt.createElement("h4",{className:"PaymentPopupFinalStep_header__XRZX"},t),Gt.createElement("p",{className:"PaymentPopupFinalStep_text_x_oF6"},a)),Gt.createElement("div",{className:"PaymentPopupFinalStep_footer_vx2IQ"},Gt.createElement(FB,{className:"PaymentPopupFinalStep_closeButton_Xrjtc",onClick:o},r||sK.close)))},uK=function(e){var t=e.title,n=e.description,r=e.isError,o=e.onClose;return Gt.createElement(cK,{title:t,classNamePicture:r?"InfoStep_pictureBindCardError_uBmTm":"InfoStep_pictureBindCardSuccess__tDnq",onButtonClick:o},n)},dK=function(e){var t=e.dmrUrl,n=e.step,r=e.title,o=e.description,a=e.payMethod,i=e.currency,l=e.isTrial,s=e.sendTrialActionStat,c=e.onError,u=e.onSuccess,d=e.onCurrencyChanged,f=e.onPayMethodChanged,m=e.onClose;return n===UG.BIND_CARD?Gt.createElement(lK,{dmrUrl:t,description:o,payMethod:a,currency:i,isTrial:l,sendTrialActionStat:s,onError:c,onSuccess:u,onCurrencyChanged:d,onPayMethodChanged:f}):Gt.createElement(uK,{title:r,description:o,onClose:m,isError:n===UG.ERROR})},fK=function(){return fK=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fK.apply(this,arguments)},mK=function(e){var t=e.onBindSuccess,n=void 0===t?Yt.noop:t,r=e.shouldCloseOnSuccess,o=(0,Vt.I0)(),a=(0,Vt.v9)(bA),i=function(e){var t,n,r;void 0===e&&(e={});var o=e.shouldCloseOnSuccess,a=void 0!==o&&o,i=(0,Vt.I0)(),l=xf(),s=l.pathname,c=l.search,u=Mf(),d=(0,Vt.v9)(bL),f=(0,Vt.v9)(WL),m=(0,Vt.v9)(EA),p=XG((0,Gt.useState)(UG.BIND_CARD),2),h=p[0],v=p[1],g=XG((0,Gt.useState)(m),2),y=g[0],_=g[1],E=XG((0,Gt.useState)(Yr(y)?Ee.CARD:Ee.CARD_GLOBAL),2),b=E[0],S=E[1],T=Uf(ga(),s)[0],I=T.route.path,N=(0,Do.parse)(c),C=Gf(),w=C.levelId,O=C.promoId,A=N.linkId,P=d.find((function(e){return e.levelId===Number(w)})),L=nr(),R=L.isMobile,k=L.currencies.bindCard,D=A?bt.TRIAL_PRIVATE:bt.TRIAL,U=_f(s,[ir.BLOG_TRIAL_ACTIVATION_BIND_CARD,ir.BLOG_POST_TRIAL_ACTIVATION_BIND_CARD,ir.BLOG_MEDIA_TRIAL_ACTIVATION_BIND_CARD]),B=function(){return KG[I]||ir.SETTINGS_EDIT},x=function(){var e=(0,Yt.getParametrizedUrl)(B(),C,N),t=T.route.path;[ir.BLOG_ACCEPT_GIFT_BIND_CARD,ir.BLOG_TRIAL_ACTIVATION_BIND_CARD,ir.BLOG_POST_TRIAL_ACTIVATION_BIND_CARD,ir.BLOG_MEDIA_TRIAL_ACTIVATION_BIND_CARD].includes(t)?setTimeout((function(){return u(e)})):u(e)};(0,Gt.useEffect)((function(){i(_b.action({payMethod:b,currency:y,isMobile:R}))}),[b,y]);var M=U?BG.TRIAL:BG.DEFAULT;return{dmrUrl:f,step:h,title:h===UG.BIND_CARD?null===(n=null===(t=QG.title)||void 0===t?void 0:t[h])||void 0===n?void 0:n[M]:null===(r=QG.title)||void 0===r?void 0:r[h],description:h===UG.BIND_CARD?(0,Qr.getParametrizedText)(QG.description[h][M],{price:Vr({amount:k[y],currency:y})}):QG.description[h],currency:y,payMethod:b,isTrial:U,sendTrialActionStat:function(e){var t=P.ownerId;bd.log.trial.sendTrialAction({ownerId:t,statType:e,subscriptionLevelId:w,promoId:O,promoType:D})},onClose:x,onError:function(){v(UG.ERROR)},onSuccess:function(){var e;U?(e=(0,Yt.getParametrizedUrl)(B(),C,N),u(e,{state:{isActivate:!0}})):a?x():v(UG.SUCCESS)},onCurrencyChanged:function(e){Yr(e)||S(Ee.CARD_GLOBAL),_(e)},onPayMethodChanged:function(e){S(e)}}}({shouldCloseOnSuccess:r}),l=i.step,s=i.title,c=i.onSuccess,u=i.dmrUrl,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(i,["step","title","onSuccess","dmrUrl"]),f=d.isTrial,m=d.sendTrialActionStat,p=d.onClose,h=l===UG.BIND_CARD?s:null;return Gt.createElement(PM,{onClose:function(){f&&m(We.TRIAL_ACTION_BIND_CARD_CLOSE),p()},title:h,classNames:{title:"BindNewCardPopup_title_z5TWz",block:"BindNewCardPopup_block_k1aoF"}},Gt.createElement(dK,fK({step:l,title:s,onClose:p,onSuccess:function(){var e;e=a,o((0,dm.Ax)($v.action)({withDeleted:!0,currency:e})),f&&m(We.TRIAL_ACTION_BIND_CARD_SUCCESS),c(),n()},dmrUrl:u},d)))};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INVERTED=1]="INVERTED"}(oK||(oK={})),function(e){e[e.CONFIRM=0]="CONFIRM",e[e.CANCEL=1]="CANCEL"}(aK||(aK={}));const pK={description:"ConfirmPopup_description_OjX0W",block:"ConfirmPopup_block_veBKC",content:"ConfirmPopup_content_Q58S7",footer:"ConfirmPopup_footer_xhLYd",buttons:"ConfirmPopup_buttons_Aqu1C",confirmButton:"ConfirmPopup_confirmButton_CLVQk",errorContainer:"ConfirmPopup_errorContainer__1qJ1",error:"ConfirmPopup_error_IvPD6",fadeIn:"ConfirmPopup_fadeIn_V9o5B"};var hK,vK,gK,yK,_K=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),EK=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},bK=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},SK=(0,Qr.getTranslation)("@common/components.OverlayPopups.components.ConfirmPopup"),TK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isLoading:!1,hasError:!1},t.onConfirmClick=function(){return EK(t,void 0,void 0,(function(){var e;return bK(this,(function(t){switch(t.label){case 0:e=this.props.onConfirm,this.setState({isLoading:!0,hasError:!1}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e()];case 2:return t.sent(),[3,4];case 3:return t.sent(),this.setState({isLoading:!1,hasError:!0}),[3,4];case 4:return[2]}}))}))},t}return _K(t,e),t.prototype.getButtonText=function(e){var t=this.props,n=t.buttonsOrder,r=t.confirmButtonText,o=t.cancelButtonText;return e===aK.CONFIRM&&n===oK.DEFAULT||e===aK.CANCEL&&n===oK.INVERTED?r||SK.confirmButtonText:o||SK.cancelButtonText},t.prototype.render=function(){var e=this.props,t=e.classNames,n=void 0===t?{}:t,r=n.root,o=n.block,a=n.title,i=n.close,l=n.content,s=n.footer,c=n.buttons,u=n.confirmButton,d=n.cancelButton,f=n.description,m=e.description,p=e.footer,h=e.buttonsOrder,v=e.onClose,g=e.title,y=this.state,_=y.isLoading,E=y.hasError;return Gt.createElement(PM,{title:g||SK.confirmAction,onClose:v,classNames:{wrapper:r,block:fB()(pK.block,o),title:a,close:i,content:l,footer:fB()(pK.footer,s)},footer:Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:fB()(pK.buttons,c)},Gt.createElement(FB,{className:fB()(pK.confirmButton,u),onClick:h===oK.INVERTED?v:this.onConfirmClick,isDisabled:_},this.getButtonText(aK.CONFIRM)),Gt.createElement(HB,{className:fB()(pK.cancelButton,d),onClick:h===oK.INVERTED?this.onConfirmClick:v},this.getButtonText(aK.CANCEL))),E&&Gt.createElement("div",{className:pK.errorContainer},Gt.createElement("span",{className:pK.error},SK.error)),p)},Gt.createElement("div",{className:pK.descriptionContainer},Gt.createElement("span",{className:fB()(pK.description,f)},m)))},t.defaultProps={buttonsOrder:oK.DEFAULT},t}(Gt.Component),IK=function(){return IK=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},IK.apply(this,arguments)},NK=(0,Qr.getTranslation)("@common/components.OverlayPopups.components.SmilesCreatePopup"),CK=function(e){var t=e.onClose,n=e.onSuccess,r=void 0===n?Yt.noop:n,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["onClose","onSuccess"]);return Gt.createElement(PM,{title:NK.title,onClose:t},Gt.createElement(xY,IK({onCancel:t,onSuccess:function(){r(),t()}},o)))},wK=function(){return wK=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wK.apply(this,arguments)},OK=(0,Qr.getTranslation)("@common/components.OverlayPopups.components.SmilesEditPopup"),AK=function(e){var t=e.smileData,n=e.onClose,r=e.onSuccess,o=void 0===r?Yt.noop:r,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["smileData","onClose","onSuccess"]);return Gt.createElement(PM,{title:OK.title,onClose:n},Gt.createElement(GY,wK({smileData:t,onCancel:n,onSuccess:function(){o(),n()}},a)))},PK=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),LK=(0,Qr.getTranslation)("@common/components.OverlayPopups.components.UnbindCardErrorPopup"),RK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return PK(t,e),t.prototype.render=function(){var e=this.props,t=e.classNames,n=e.paymentMethod,r=e.onClose,o=n===Ee.CARD;return Gt.createElement(PM,{title:LK.title,onClose:r,classNames:{block:fB()("UnbindCardErrorPopup_popup_tdgeq",t.block),title:t.title}},Gt.createElement("div",null,LK.start," ",o?LK.card:LK.wallet,LK.end))},t.defaultProps={classNames:{}},t}(Gt.PureComponent),kK=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},DK=(0,Qr.getTranslation)("@common/components.OverlayPopups.components.UnsubscribePopup"),UK=function(e){var t=e.nextPayTimeNormalize,n=e.blogName,r=e.hasPromo,o=e.onClose,a=e.onConfirm,i=kK((0,Gt.useState)(!0),2),l=i[0],s=i[1],c=kK((0,Gt.useState)(!1),2),u=c[0],d=c[1];return Gt.createElement(TK,{classNames:{root:"UnsubscribePopup_wrapper_ZkUhs",block:"UnsubscribePopup_block_cinPV",content:"UnsubscribePopup_content_P3Dbm",title:"UnsubscribePopup_title_h6et0",buttons:fB()("UnsubscribePopup_buttons_Wb_a4",u&&"UnsubscribePopup_disabledButtons_UkLr2"),confirmButton:"UnsubscribePopup_confirmButton_tRU8g",cancelButton:"UnsubscribePopup_cancelButton_FPKuw"},title:DK.title,description:u?Gt.createElement("div",{className:"UnsubscribePopup_spinnerContainer_orGus"},Gt.createElement(uM,{size:100})):Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"UnsubscribePopup_description_OpV92"},r?(0,Qr.getReactText)(DK.descriptionPromo,{BlogName:function(){return Gt.createElement(Gt.Fragment,null,n)}}):(0,Qr.getReactText)((0,Qr.getParametrizedText)(DK.description,{nextPayTimeNormalize:t}),{NextPayTime:function(e){var t=e.text;return Gt.createElement("span",{className:"UnsubscribePopup_nextPayTime_f06cF"},t)},BlogName:function(){return Gt.createElement(Gt.Fragment,null,n)}})),Gt.createElement(VM,{checkboxClassName:"UnsubscribePopup_checkboxContainer_IhoNw",labelClassName:"UnsubscribePopup_label_AWpuw",label:r?DK.keepFollowPromo:DK.keepFollow,checked:l,onToggle:s})),onClose:o,onConfirm:function(){d(!0),a(l)},buttonsOrder:oK.INVERTED,confirmButtonText:DK.confirm,cancelButtonText:DK.cancel})},BK=function(){return(0,dH.useOverlayPopups)()};!function(e){e[e.ENTER_SOCIAL_NETWORK=0]="ENTER_SOCIAL_NETWORK",e[e.ENTER_PHONE=1]="ENTER_PHONE",e[e.ENTER_CODE=2]="ENTER_CODE",e[e.ENTER_NAME=3]="ENTER_NAME",e[e.ENTER_LAST_ACCOUNT=4]="ENTER_LAST_ACCOUNT"}(hK||(hK={})),function(e){e.PHONE_INPUT="phoneInput",e.NAME_INPUT="nameInput",e.CHECK_PHONE_BUTTON="checkPhoneButton",e.CONTINUE_BUTTON="continueButton",e.FILLED_PHONE="filledPhone",e.CHANGE_PHONE_BUTTON="changePhoneButton"}(vK||(vK={})),function(e){e.INVALID_CHECK="invalid_check"}(gK||(gK={})),function(e){e.OAUTH_INVALID_REQUEST="oauth_invalid_request"}(yK||(yK={}));var xK,MK=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),FK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentTimer:t.props.timeout},t.counter=function(){var e=t.state.currentTimer,n=t.props.onTimeout;e-1<0?(n(),window.clearInterval(t.timerId)):t.setState({currentTimer:e-1})},t}return MK(t,e),t.prototype.componentDidMount=function(){this.timerId=window.setInterval(this.counter,1e3)},t.prototype.componentWillUnmount=function(){window.clearInterval(this.timerId)},t.prototype.componentDidUpdate=function(e,t){e.timeout!==this.props.timeout&&this.setState({currentTimer:this.props.timeout})},t.prototype.render=function(){var e=this.state.currentTimer,t=Math.floor(e/60),n=e-60*t;return Gt.createElement(Gt.Fragment,null,String(t).padStart(2,"0"),":",String(n).padStart(2,"0"))},t}(Gt.Component);!function(e){e.CODE_INPUT="codeInput",e.RESEND_BUTTON="resendButton",e.TIMER="timer"}(xK||(xK={}));var GK=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HK=(0,Qr.getTranslation)("@common/components.SecretCodeInput"),WK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={expiresIn:t.props.expiresIn||60,secretCode:["","","","","",""]},t.inputsWrapper=Gt.createRef(),t.onResendClick=function(){(0,t.props.resend)(),t.setState({expiresIn:t.props.expiresIn||60})},t.onSecretCodeChange=function(e){var n=t.props,r=n.onFill,o=n.onChange,a=t.state.secretCode,i=Number(e.target.dataset.codeIndex);a[i]=e.target.value,t.setState({secretCode:a},(function(){var e=a.join("");a[i]&&t.moveCaret(i+1),o&&o(e),6===e.length&&r(e)}))},t.onKeyDown=function(e){var n=t.state.secretCode,r=Number(e.target.dataset.codeIndex);e.key!==ae.BACKSPACE||n[r]||(n[r-1]="",t.setState({secretCode:n}),t.moveCaret(r-1))},t.onTimeout=function(){t.setState({expiresIn:0})},t}return GK(t,e),t.prototype.componentDidUpdate=function(e){e.isLoading===this.props.isLoading||this.props.isLoading||(this.setState({secretCode:["","","","","",""]}),this.moveCaret(0))},t.prototype.moveCaret=function(e){var t=this.inputsWrapper.current.querySelector("[".concat("data-code-index",'="').concat(e,'"]'));t&&t.focus()},t.prototype.render=function(){var e=this,t=this.state,n=t.secretCode,r=t.expiresIn,o=this.props,a=o.title,i=o.error,l=o.isLoading,s=o.isLocked,c=o.isRetry,u=o.classNames,d=l||s;return Gt.createElement("div",{className:null==u?void 0:u.main},a&&Gt.createElement("div",{className:"SecretCodeInput_title_lqdAJ"},a),Gt.createElement("div",{className:fB()(null==u?void 0:u.inputs,"SecretCodeInput_inputs_EwP1I"),ref:this.inputsWrapper},n.map((function(t,n){var r;return Gt.createElement(Zx,{autocomplete:"one-time-code",name:"code-".concat(n),key:n,value:t,className:"SecretCodeInput_inputWrapper_WqYyw",onChange:e.onSecretCodeChange,dataAttributes:(r={},r["data-code-index"]=String(n),r["data-test-id"]=e.getTestId("".concat(xK.CODE_INPUT,"-").concat(n)),r),classNameInput:"SecretCodeInput_input_yYgOo",onKeyDown:e.onKeyDown,autoFocus:0===n,type:"tel",mask:[/\d/],disabled:d})}))),Gt.createElement("div",{className:fB()("SecretCodeInput_info_K1_lp",null==u?void 0:u.info)},i&&Gt.createElement("div",{className:fB()("SecretCodeInput_error_fOteG",null==u?void 0:u.error)},i),!s&&Gt.createElement(Ix,{isSmallIndent:!0,className:fB()("SecretCodeInput_footer_XIzZO",null==u?void 0:u.footer)},r&&!c?Gt.createElement("span",{className:"SecretCodeInput_timer_rpCYT","data-test-id":this.getTestId(xK.TIMER)},HK.resendCodeIn," ",Gt.createElement(FK,{timeout:r,onTimeout:this.onTimeout})):Gt.createElement(VB,{type:"button",onClick:this.onResendClick,"data-test-id":this.getTestId(xK.RESEND_BUTTON)},HK.sendCodeAgain))))},function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}([Cx("SecretCodeInput")],t)}(Gt.Component),VK=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={step:t.props.initialStep||t.props.steps[0]},t.getStep=function(e){var n=t.props.steps,r=t.state.step,o=e<1?Math.max(n.indexOf(r)+e,0):Math.min(n.indexOf(r)+e,n.length-1);return n[o]},t.setStep=function(e){t.setState({step:e})},t.goNext=function(){var e=t.getStep(1);t.setState({step:e})},t.goBack=function(){var e=t.getStep(-1);t.setState({step:e})},t}return VK(t,e),t.prototype.render=function(){var e=this.props.steps,t=this.state.step;return Gt.createElement(Gt.Fragment,null,this.props.children({step:t,index:e.indexOf(t),goNext:this.goNext,goBack:this.goBack,setStep:this.setStep}))},t}(Gt.Component);const zK="ByPhone_phoneRow_NI7GD",YK="ByPhone_button_yD09a";var KK=function(){return KK=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},KK.apply(this,arguments)},qK=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},XK=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},QK=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},JK=(0,Qr.getTranslation)("@boosty/common/components.Authorization.components.ByPhone"),ZK=[hK.ENTER_PHONE,hK.ENTER_NAME,hK.ENTER_CODE],$K=oo("ByPhone"),eq=(0,Vt.$j)((function(e){return{user:XO(e)}}),(function(e){return{actions:(0,ET.DE)({checkPhone:(0,dm.Ax)(hg),authorizeByPhone:(0,dm.Ax)(xb.authorizeByPhone),fetchTokenByPhone:(0,dm.Ax)(xb.fetchTokenByPhone),updateUserData:(0,dm.Ax)(ng),fetchCurrentUser:(0,dm.Ax)(Xv),fetchCurrentUserPhone:(0,dm.Ax)(Jv)},e)}}))((function(e){var t,n=e.onChangeStep,o=void 0===n?Yt.noop:n,a=e.onErrorsChange,i=void 0===a?Yt.noop:a,l=e.onEmptyUser,s=void 0===l?Yt.noop:l,c=e.onLoading,u=e.isLoading,d=e.actions,f=e.step,m=e.buttonsColor,p=e.isExternalAccountLink,v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["onChangeStep","onErrorsChange","onEmptyUser","onLoading","isLoading","actions","step","buttonsColor","isExternalAccountLink"]),g=(0,Gt.useRef)(),y=(0,Gt.useRef)(),_=QK((0,Gt.useState)(""),2),E=_[0],b=_[1],S=QK((0,Gt.useState)(""),2),T=S[0],I=S[1],N=QK((0,Gt.useState)(""),2),C=N[0],w=N[1],O=QK((0,Gt.useState)({phone:"",name:"",code:""}),2),A=O[0],P=O[1],L=QK((0,Gt.useState)(""),2),R=L[0],k=L[1],D=QK((0,Gt.useState)(!1),2),B=D[0],x=D[1],M=ED(),F=M.isRecaptchaEnabled,G=M.generateRecaptchaV3Token,H=M.renderRecaptchaV2,W=function(e,t){var n;P(KK(KK({},A),((n={})[e]=t,n)))},V=function(e){e.target.value&&A.name&&W("name",""),w(e.target.value)},j=function(){return qK(void 0,void 0,void 0,(function(){var e;return XK(this,(function(t){switch(t.label){case 0:return T.length?(x(!0),F?[4,G(rt.AUTH_BY_PHONE)]:[3,2]):(W("phone",JK.errors.onEmpty.phone),[2]);case 1:return e=t.sent(),z("".concat(e,":").concat(ee.V3)),[3,3];case 2:z(),t.label=3;case 3:return[2]}}))}))},z=function(e){return qK(void 0,void 0,void 0,(function(){var n,r,o;return XK(this,(function(a){switch(a.label){case 0:n=d.authorizeByPhone,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n(KK({phone:T},e&&{token:e}))];case 2:return r=a.sent(),k(r.code),x(!1),t(hK.ENTER_CODE),[3,4];case 3:return(o=a.sent()).serverError.error===gK.INVALID_CHECK?(g.current.blur(),H(y.current,Y,K,q)):(W("phone",JK.errors.phone),x(!1),bd.log.auth.error({providerCode:"phone",step:"authorize",status:null==o?void 0:o.status})),[3,4];case 4:return[2]}}))}))},Y=function(e){z("".concat(e,":").concat(ee.V2))},K=function(){W("recaptcha",JK.errors.recaptchaExpired)},q=function(){W("recaptcha",JK.errors.recaptchaError)},X=function(){C.trim().length>=3?$(!0):W("name",JK.errors.name)},Q=function(){W("code",""),t(hK.ENTER_PHONE)},J=function(e){return qK(void 0,void 0,void 0,(function(){var t,n,r,o,a,i,l,u,f,m,v,g,y,_,E,b,S;return XK(this,(function(I){switch(I.label){case 0:t=d.fetchTokenByPhone,n=nr(),r=n.clientId,o=n.isWidget,a=n.isMobile,W("code",""),c(!0),I.label=1;case 1:return I.trys.push([1,3,,4]),[4,t(KK({deviceId:r,smsCode:e,deviceOS:o&&!a?h.WEB_WIDGETS:Lr(),clientId:T,code:R},p?{allowedActorStatus:0}:{}))];case 2:return(v=I.sent())?Z(v):W("code",JK.errors.code),[3,4];case 3:return i=I.sent(),l=(null==i?void 0:i.reason)||{},u=l.status,f=l.serverError,m=l.response,412===u&&p?(v={accessToken:null===(E=null==m?void 0:m.data)||void 0===E?void 0:E.access_token,refreshToken:null===(b=null==m?void 0:m.data)||void 0===b?void 0:b.refresh_token,expiresAt:Date.now()+1e3*(null===(S=null==m?void 0:m.data)||void 0===S?void 0:S.expires_in)},Ta.setItem("auth",v),s(v)):(y=(g=f||{}).error,_=g.errorDescription,400===u&&y===yK.OAUTH_INVALID_REQUEST&&_.includes("user already exists")?W("code",JK.errors.userAlreadyExists):W("code",JK.errors.code),bd.log.auth.error({providerCode:"phone",step:"fetch_token",status:u})),[3,4];case 4:return c(!1),[2]}}))}))},Z=function(e){return qK(void 0,void 0,void 0,(function(){var n,o;return XK(this,(function(a){switch(a.label){case 0:return n=nr().oauthCookieDomain,Ta.setItem("auth",e),[4,d.checkPhone({phone:T})];case 1:return o=a.sent(),Su(U.NEW_USER,o.isExist?"0":"1",{domain:n,path:"/"}),o.isExist?$():t(hK.ENTER_NAME),Qo(r.INVITES)&&Tu(U.INVITE),[2]}}))}))},$=function(e){return void 0===e&&(e=!1),qK(void 0,void 0,void 0,(function(){return XK(this,(function(t){switch(t.label){case 0:return sf(Ta.getItem("auth")),[4,d.fetchCurrentUser()];case 1:return t.sent(),e?[4,d.updateUserData({name:C})]:[3,3];case 2:t.sent(),t.label=3;case 3:return d.fetchCurrentUserPhone(),v.onSuccess(!0),[2]}}))}))},te=function(e){var t=e.currentTarget.value;W("phone",La(t)?"":JK.errors.invalidPhone),b(t),I(eo(t))};return(0,Gt.useEffect)((function(){i()}),[A]),Gt.createElement("div",{className:"ByPhone_form_ziUnB"},Gt.createElement(jK,{initialStep:f,steps:ZK},(function(e){var n,r=e.setStep,a=nr().isMobile;return t=function(e){r(e),o(e)},Gt.createElement(Gt.Fragment,null,e.step===hK.ENTER_PHONE&&Gt.createElement(Gt.Fragment,null,Gt.createElement(Sx,{onSubmit:j},Gt.createElement(Ix,{className:zK},Gt.createElement(Zx,{className:cG()((n={},n.ByPhone_phoneInputError_y6mEu=Boolean(A.phone.length),n)),ref:g,autocomplete:"tel",type:"tel",autoFocus:!a,isValid:!A.phone,error:A.phone,value:E,name:"phoneNumber",placeholder:JK.phonePlaceholder,onChange:te,dataAttributes:{"data-test-id":$K(vK.PHONE_INPUT)}}),Gt.createElement("div",{className:"ByPhone_recaptchaContainer_lcvsF",ref:y})),Gt.createElement(Ix,{isSmallIndent:!0},Gt.createElement(FB,KK({isDisabled:B||!!A.phone,type:"submit",className:YK,bgColor:m},Na($K(vK.CHECK_PHONE_BUTTON))),JK.enter)))),e.step===hK.ENTER_NAME&&Gt.createElement(Gt.Fragment,null,Gt.createElement(Ix,null,Gt.createElement(Zx,{error:A.name,placeholder:JK.namePlaceholder,onChange:V,name:"name",value:C,dataAttributes:{"data-test-id":$K(vK.NAME_INPUT)}})),Gt.createElement(Ix,null,Gt.createElement(FB,KK({onClick:X,className:YK,bgColor:m},Na($K(vK.CONTINUE_BUTTON))),JK.finish))),e.step===hK.ENTER_CODE&&Gt.createElement(Gt.Fragment,null,Gt.createElement(Ix,{className:zK,isSmallIndent:!0},Gt.createElement("div",{className:"ByPhone_buttonWrapper_dZMXW"},Gt.createElement(VB,KK({onClick:Q},Na($K(vK.CHANGE_PHONE_BUTTON))),JK.change)),Gt.createElement("div",KK({className:"ByPhone_filledField_lWOkP"},Na($K(vK.FILLED_PHONE))),E)),Gt.createElement(Ix,{isSmallIndent:!0},Gt.createElement(WK,{classNames:{inputs:"ByPhone_secretCodeInputs_VMQm1",footer:"ByPhone_secretCodeFooter_OTqSY"},error:A.code,onFill:J,resend:j,isLoading:u}))))})))}));const tq="LastAccount_button_iFeMb";var nq=(0,Qr.getTranslation)("@boosty/common/components.Authorization.components.LastAccount"),rq=function(e){var t,n=e.storedAcc,r=e.buttonsColor,o=e.onContinue,a=e.onEnterAccount,i=pa(n.provider),l=n.phone||(0,Qr.getParametrizedText)(nq.via,{provider:(t=i,Jr.providers[t])});return Gt.createElement("div",{className:"LastAccount_block_BAhGX"},Gt.createElement("div",{className:"LastAccount_header_M6MsL"},(0,Qr.getParametrizedText)(nq.youHaveAccount,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})),Gt.createElement(PB,{className:"LastAccount_avatar_sdYEC",img:n.avatarUrl,size:g.SM,providerType:n.provider}),Gt.createElement("div",{className:"LastAccount_nameHeader_yQ8en"},n.name),Gt.createElement("div",{className:"LastAccount_providerHeader_iAJvK"},l),Gt.createElement(FB,{className:tq,bgColor:r,onClick:function(){return a(i||n.provider)}},nq.continue),Gt.createElement(HB,{className:tq,onClick:o},nq.enterAnotherAccount))};const oq="Offer_link_BeZld";var aq=(0,Qr.getTranslation)("@boosty/common/components.Authorization.components.Offer"),iq=function(){var e=nr().offer,t=e.userAgreement,n=e.privacyPolicy,r=e.paymentTerms,o=e.cookiePolicy;return Gt.createElement("div",{className:"Offer_offer_iciax"},aq.offerText," ",Gt.createElement(cM,{className:oq,to:"".concat(t.host).concat(t.url),target:"_blank"},aq.offerLinkUserAgreement),", ",Gt.createElement(cM,{className:oq,to:"".concat(r.host).concat(r.url),target:"_blank"},aq.offerLinkPaymentTerms),", ",Gt.createElement(cM,{className:oq,to:"".concat(n.host).concat(ir.OFFERS_PRIVACY_POLICY),target:"_blank"},aq.offerLinkPrivacyPolicy)," ",aq.offerLinkAnd," ",Gt.createElement(cM,{className:oq,to:"".concat(o.host).concat(o.url),target:"_blank"},aq.offerLinkCookiePolicy))},lq=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},sq=(0,Qr.getTranslation)("@boosty/common/components.Authorization.hooks.useAuthorization"),cq=(0,Qr.getTranslation)("@boosty/common/components.Authorization.hooks.useFBAuthDisabledDisclaimer");const uq="Authorization_subtitle_Dl5IF",dq="Authorization_socialItem_N1mUr",fq="Authorization_icon_d5XqY";var mq,pq,hq=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},vq=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},gq=(0,Qr.getTranslation)("@boosty/common/components.Authorization"),yq=((mq={})[fa.ProviderCodes.FB]={glyph:hB.a0s,className:"Authorization_fbIcon_m6b0L"},mq[fa.ProviderCodes.Google]={glyph:hB.pGr,className:"Authorization_googleIcon_xIilB"},mq[fa.ProviderCodes.Youtube]={glyph:hB.iQP,className:"Authorization_youtubeIcon_CZjS_"},mq[fa.ProviderCodes.MailRu]={glyph:hB.l6t,className:"Authorization_mailIcon_CotCX"},mq[fa.ProviderCodes.OK]={glyph:hB.Fvb,className:"Authorization_okIcon_XBQLX"},mq[fa.ProviderCodes.VK]={glyph:hB.LuJ,className:"Authorization_vkIcon_eeEKU"},mq[fa.ProviderCodes.Twitch]={glyph:hB.z$6,className:"Authorization_twitchIcon_rq6gw"},mq),_q=function(e){var t,n,r=e.buttonsColor,o=e.isOnlyContent,a=e.isLastAccountDisabled,i=e.isUserNotFoundByPhone,l=e.isExternalAccountLink,s=nr(),c=s.projectName,u=s.supportEmail,d=function(e){var t=e.isExternalAccountLink,n=e.isUserNotFoundByPhone,r=e.isLastAccountDisabled,o=nr().isAuthorizeByPhoneEnabled,a=(0,Vt.I0)(),i=lq((0,Gt.useState)(!1),2),l=i[0],s=i[1],c=lq((0,Gt.useState)(hK.ENTER_SOCIAL_NETWORK),2),u=c[0],d=c[1],f=_k(),m=(0,Vt.v9)(sA),p=function(t){e.onSuccess&&e.onSuccess(t)},h=function(t){d(t),e.onAfterChangeStep&&e.onAfterChangeStep(t),e.onChangeStep&&e.onChangeStep(t)},g=function(t){void 0===t&&(t=!0),s(t),e.onLoading&&e.onLoading(t)},y=ef().filter((function(e){return e.isAuthorizeEnabled&&function(e){return e!==fa.ProviderCodes.FB||!Mr()}(e.code)}));return(0,Gt.useEffect)((function(){a((0,dm.Ax)(xb.tryInstantAuth)),f.isAuthorized&&a((0,dm.Ax)(xb.tryRestoreAuth)),h(n?hK.ENTER_NAME:bu(U.LAST_ACCOUNT)&&!r?hK.ENTER_LAST_ACCOUNT:hK.ENTER_SOCIAL_NETWORK)}),[]),{currentStep:u,providers:y,isAuthorizeByPhoneEnabled:o,isLoading:m.isFetching||l,getTitle:function(){return u===hK.ENTER_NAME?sq.enterName:u===hK.ENTER_CODE?sq.enterCode:o&&u===hK.ENTER_PHONE?sq.enterByPhone:sq.enterBySocialNetworks},onLoading:g,onChangeStep:h,onErrorsChange:function(){return e.onErrorsChange&&e.onErrorsChange()},onSuccess:p,onEmptyUser:function(t){e.onEmptyUser&&e.onEmptyUser(t,!0)},authVia:function(e){return r=function(){var n,r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return(n=tf(e))?(g(),bd.log.auth.clickProvider({providerCode:n.code}),[4,Promise.resolve(a((0,dm.Ax)(xb.requestAuth(n,t))))]):[3,2];case 1:return r=o.sent(),g(!1),r&&p(Boolean(r)),[3,3];case 2:e===v.PHONE&&h(hK.ENTER_PHONE),o.label=3;case 3:return[2]}}))},new((n=Promise)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(void 0,[])).next())}));var n,r}}}({isUserNotFoundByPhone:i,isLastAccountDisabled:a,isExternalAccountLink:l,onLoading:e.onLoading,onChangeStep:e.onChangeStep,onAfterChangeStep:e.onAfterChangeStep,onSuccess:e.onSuccess,onEmptyUser:e.onEmptyUser}),f=d.currentStep,m=d.providers,p=d.isLoading,h=d.isAuthorizeByPhoneEnabled,g=d.authVia,y=d.getTitle,_=d.onSuccess,E=d.onEmptyUser,b=d.onChangeStep,S=d.onErrorsChange,T=d.onLoading,I=function(){var e=nr().clientId,t=BV(),n=t.isFBAuthRelinkFlowActive,r=t.isFBAuthRelinkSupportDisclaimerVisible;return{supportLetterSubject:encodeURIComponent("".concat(cq.letterSubject," ").concat(Lr(),":").concat(e)),isFBAuthCautionVisible:n,isFBAuthSupportVisible:r}}(),N=I.supportLetterSubject,C=I.isFBAuthCautionVisible,w=I.isFBAuthSupportVisible;return n=f===hK.ENTER_LAST_ACCOUNT?Gt.createElement(rq,{storedAcc:JSON.parse(bu(U.LAST_ACCOUNT)||null),buttonsColor:r,onEnterAccount:function(e){return hq(void 0,void 0,void 0,(function(){return vq(this,(function(t){return[2,g(e)]}))}))},onContinue:function(){return b(hK.ENTER_SOCIAL_NETWORK)}}):Gt.createElement(Gt.Fragment,null,!C&&Gt.createElement("h4",{className:uq},y()),h&&f!==hK.ENTER_SOCIAL_NETWORK&&Gt.createElement(eq,{isLoading:p,isExternalAccountLink:l,buttonsColor:r,step:i?hK.ENTER_NAME:hK.ENTER_PHONE,onSuccess:_,onLoading:T,onChangeStep:b,onErrorsChange:S,onEmptyUser:E}),f!==hK.ENTER_NAME&&Gt.createElement(Gt.Fragment,null,f!==hK.ENTER_SOCIAL_NETWORK&&Gt.createElement("h4",{className:uq},gq.orHint),f===hK.ENTER_SOCIAL_NETWORK&&C&&Gt.createElement("div",{className:"Authorization_disclaimer_r1B5Q"},Gt.createElement("div",{className:"Authorization_disclaimerCaution_AKYQE"},Gt.createElement("div",{className:cG()(dq,"Authorization_socialItemFbBanned_Lqq1y")},Gt.createElement(pB,{className:cG()(fq,"Authorization_fbIconBanned_zQEh6"),glyph:hB.rI5})),Gt.createElement("div",{className:"Authorization_disclaimerCautionTitle_pcjdr"},(0,Qr.getReactText)(gq.fbBanned.caution.title,{Br:function(){return Gt.createElement("br",null)}}))),Gt.createElement("div",{className:"Authorization_description_EwTaB"},(0,Qr.getParametrizedText)(gq.fbBanned.caution.description,{projectName:c.latinCapitalized}))),Gt.createElement("div",{className:"Authorization_providers_ZohCR"},m.map((function(e){return Gt.createElement("div",{key:e.code,title:gq.providers[e.code],onClick:function(){return hq(void 0,void 0,void 0,(function(){return vq(this,(function(t){return[2,g(e.code)]}))}))},className:dq,role:"button","data-provider":e.code},Gt.createElement(pB,{className:cG()(fq,yq[e.code].className),glyph:yq[e.code].glyph}))}))),f===hK.ENTER_SOCIAL_NETWORK&&w&&Gt.createElement("div",{className:"Authorization_support_I7W4m"},gq.fbBanned.support.text,Gt.createElement("br",null),Gt.createElement(cM,{to:"mailto:".concat(u,"?subject=").concat(N)},gq.fbBanned.support.link))),f===hK.ENTER_SOCIAL_NETWORK&&Gt.createElement("div",{className:"Authorization_authByPhoneButton_Vy_Zd",onClick:function(){return b(hK.ENTER_PHONE)}},Gt.createElement(pB,{glyph:hB.S9Z,className:"Authorization_phoneIcon_h4dxL"}),Gt.createElement(VB,{type:"button"},gq.enterByPhoneButton))),Gt.createElement(Gt.Fragment,null,p&&!o&&Gt.createElement(ZY,{isGlobal:!0}),Gt.createElement("div",{className:cG()("Authorization_root_bj8xU",(t={},t.Authorization_onlyContent_vR1fj=o,t))},n,!C&&Gt.createElement(iq,null)))},Eq=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},bq=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.AuthSignUpPopup.components.AuthSignUpFounder.hooks.useAuthSignUpPopup"),Sq=function(){return Sq=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sq.apply(this,arguments)},Tq=function(e){var t=e.classNames,n=void 0===t?{}:t,r=function(e){var t=BV(),n=t.isFBAuthRelinkFlowActive,r=t.showErrorAlert,o=Eq((0,Gt.useState)(!1),2),a=o[0],i=o[1],l=Eq((0,Gt.useState)(hK.ENTER_SOCIAL_NETWORK),2),s=l[0],c=l[1];return{title:n?bq.signInFBBanned:s===hK.ENTER_CODE?bq.enterCode:s===hK.ENTER_LAST_ACCOUNT?"":bq.signUp,isLastAccountDisabled:n,isAuthorizationInProgress:a,setIsAuthorizationInProgress:i,setAuthStep:c,onSuccess:function(){i(!1),e.onClose(!1),e.onSuccess&&e.onSuccess()},onClose:function(){n?r():(i(!1),e.onClose(!0))}}}({onClose:e.onClose,onSuccess:e.onSuccess}),o=r.title,a=r.isLastAccountDisabled,i=r.isAuthorizationInProgress,l=r.setIsAuthorizationInProgress,s=r.setAuthStep,c=r.onClose,u=r.onSuccess;return Gt.createElement(PM,{title:o,onClose:c,classNames:Sq(Sq({},n),{wrapper:i?"AuthSignUpFounder_hidden_r6fBy":""})},Gt.createElement(_q,{isLastAccountDisabled:a,onLoading:l,onSuccess:u,onChangeStep:s}))};!function(e){e.USERNAME="username",e.EMAIL="email",e.PASSWORD="password",e.CONFIRM_PASSWORD="confirmPassword"}(pq||(pq={}));var Iq,Nq,Cq=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},wq=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Oq=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.AuthByProvider"),Aq=((Iq={})[fa.ProviderCodes.FB]={icon:hB.a0s,getTitle:function(){return Oq.fb}},Iq[fa.ProviderCodes.Google]={icon:hB.pGr,getTitle:function(){return Oq.google}},Iq),Pq=function(e){var t=e.providerText,n=e.onSuccess,r=(0,Vt.I0)(),o=ef().filter((function(e){return e.isAuthorizeEnabled}));return Gt.createElement("div",{className:"AuthByProvider_root_ZHCv1"},o.map((function(e){return Gt.createElement(HB,{key:e.code,className:"AuthByProvider_button_BLV8B",onClick:function(){return Cq(void 0,void 0,void 0,(function(){return wq(this,(function(t){return[2,(o=e.code,Cq(void 0,void 0,Promise,(function(){var e,t;return wq(this,(function(a){switch(a.label){case 0:return(e=tf(o))?[4,Promise.resolve(r((0,dm.Ax)(xb.requestAuth(e,!1))))]:[3,2];case 1:(t=a.sent())&&n(Boolean(t)),a.label=2;case 2:return[2]}}))})))];var o}))}))}},Gt.createElement(pB,{className:"AuthByProvider_buttonIcon_k1Z8i",glyph:Aq[e.code].icon}),Gt.createElement("span",{className:"AuthByProvider_buttonText_kexEV"},(0,Qr.getParametrizedText)(t,{provider:Aq[e.code].getTitle()})))})))},Lq=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.SignUpForm"),Rq=Sz.Ry().shape(((Nq={})[pq.USERNAME]=Sz.Z_().trim().required((function(){return function(){return Lq.errors.usernameRequired}})).min(3,(function(){return function(){return Lq.errors.usernameRules}})).max(25,(function(){return Lq.errors.usernameRules})),Nq[pq.EMAIL]=Sz.Z_().required((function(){return Lq.errors.emailRequired})).email((function(){return Lq.errors.emailInvalid})),Nq[pq.PASSWORD]=Sz.Z_().required((function(){return Lq.errors.passwordRequired})).matches(/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d@#$?~%^`|<>&\*()+=!_\-.\[\]\{\}]*$/,(function(){return Lq.errors.passwordRules})),Nq[pq.CONFIRM_PASSWORD]=Sz.Z_().required((function(){return Lq.errors.passwordConfirmRequired})).oneOf([Sz.iH(pq.PASSWORD)],(function(){return Lq.errors.passwordMatch})),Nq));const kq="SignUpForm_formRow_nhOWm";var Dq,Uq=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.SignUpForm"),Bq=function(e){var t=e.className,n=e.isLoading,r=e.isValidCaptcha,o=e.isMaskedPassword,a=e.shouldValidateOnChange,i=e.setShouldValidateOnChange,l=e.setIsMaskedPassword,s=e.recaptchaRef,c=e.onSubmit,u=e.onSuccess;return Gt.createElement("div",{className:cG()("SignUpForm_root_lQgNL",t)},n&&Gt.createElement("div",{className:"SignUpForm_spinnerContainer_IxJwK"},Gt.createElement(uM,{size:50})),Gt.createElement(Gz.J9,{initialValues:{username:"",email:"",password:"",confirmPassword:""},validationSchema:Rq,validateOnBlur:a,validateOnChange:a,onSubmit:c},(function(e){var t=e.isValid,n=e.errors,a=e.touched,c=e.handleSubmit,d=!t||!r;return Gt.createElement(Sx,{className:"SignUpForm_form_rXWnj",onSubmit:function(){i(!0),c()}},Gt.createElement(Ix,{className:kq},Gt.createElement(Gz.gN,{name:pq.USERNAME},(function(e){var t=e.field,r=t.value,o=t.onChange,i=t.onBlur,l=t.name,s=!a.username||a.username&&!n.username,c=!s&&n.username;return Gt.createElement(Zx,{isErrorInFlow:!0,isValid:s,error:c,type:"text",placeholder:Uq.username,name:l,onBlur:i,onChange:o,value:r})}))),Gt.createElement(Ix,{className:kq},Gt.createElement(Gz.gN,{name:pq.EMAIL},(function(e){var t=e.field,r=t.value,o=t.onChange,i=t.onBlur,l=t.name,s=!(!a.email||a.email&&!n.email)&&n.email;return Gt.createElement(Zx,{isValid:!a.email||a.email&&!n.email,isErrorInFlow:!0,error:s,type:"text",placeholder:Uq.email,name:l,onBlur:i,onChange:o,value:r})}))),Gt.createElement(Ix,{className:kq},Gt.createElement(Gz.gN,{name:pq.PASSWORD},(function(e){var t=e.field,r=t.value,i=t.onChange,s=t.onBlur,c=t.name,u=!a.password||a.password&&!n.password,d=!u&&n.password;return Gt.createElement(oM,{isGlobalMask:!0,isMasked:o,isValid:u,isErrorInFlow:!0,error:d,placeholder:Uq.password,name:c,onMaskVisibleChange:l,onBlur:s,onChange:i,value:r})}))),Gt.createElement(Ix,{className:kq},Gt.createElement(Gz.gN,{name:pq.CONFIRM_PASSWORD},(function(e){var t=e.field,r=t.value,i=t.onChange,s=t.onBlur,c=t.name,u=!a.confirmPassword||a.confirmPassword&&!n.confirmPassword,d=!u&&n.confirmPassword;return Gt.createElement(oM,{isGlobalMask:!0,isMasked:o,isValid:u,isErrorInFlow:!0,error:d,placeholder:Uq.confirmPassword,name:c,onMaskVisibleChange:l,onBlur:s,onChange:i,value:r})}))),Gt.createElement("div",{className:r&&"SignUpForm_recaptchaContainer_T_3Uv",ref:s}),Gt.createElement(FB,{className:d&&"SignUpForm_submitDisabled_lWDr7",type:"submit",isDisabled:d},Uq.signUp),Gt.createElement(Pq,{providerText:Uq.signUpWithProvider,onSuccess:u}),Gt.createElement("div",{className:"SignUpForm_offersText_p6HNg"},(0,Qr.getReactText)(Uq.offerText,{LinkTerms:function(e){var t=e.text;return Gt.createElement(cM,{target:"_blank",to:(0,Yt.getParametrizedUrl)(ir.OFFERS_PAYMENT_TERMS)},t)},LinkPrivacy:function(e){var t=e.text;return Gt.createElement(cM,{target:"_blank",to:(0,Yt.getParametrizedUrl)(ir.OFFERS_PRIVACY_POLICY)},t)}})))})))};!function(e){e.INVALID_CREDENTIALS="invalid_credentials",e.AUTH_EMAIL_ALREADY_EXISTS="auth_email_already_exists"}(Dq||(Dq={}));var xq,Mq,Fq=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Gq=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Hq=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Wq=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.SignUpForm.hooks.useSignUpForm"),Vq=function(e){void 0===e&&(e={onClose:Yt.noop,onSuccess:Yt.noop});var t=ED(),n=t.isRecaptchaEnabled,r=t.generateRecaptchaV3Token,o=t.renderRecaptchaV2,i=jG().showAlert,l=(0,dH.useOverlayPopups)().showPopup,s=Hq((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=Hq((0,Gt.useState)(!0),2),f=d[0],m=d[1],h=Hq((0,Gt.useState)(!0),2),v=h[0],g=h[1],y=Hq((0,Gt.useState)(!1),2),_=y[0],E=y[1],b=(0,Vt.I0)(),S=(0,Gt.useRef)(null),T=function(e){g(!0)},I=function(){g(!1)},N=function(){g(!1)},C=function(e,t){return Fq(void 0,void 0,void 0,(function(){var r,a,l,s,c,u;return Gq(this,(function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),E(!0),[4,b((0,dm.Ax)(Hb.action)({name:e.username.trim(),email:e.email.trim(),password:e.password,recaptchaToken:t}))];case 1:return r=d.sent(),a={accessToken:null==r?void 0:r.access_token,refreshToken:null==r?void 0:r.refresh_token,expiresAt:Date.now()+1e3*(null==r?void 0:r.expires_in)},Ta.setItem("auth",a),sf(a),[4,b((0,dm.Ax)(Xv.action)())];case 2:return d.sent(),w(),E(!1),[3,4];case 3:return l=d.sent(),E(!1),s=l.serverError,c=s.error,u=s.errorDescription,c===Dq.INVALID_CREDENTIALS&&n?(g(!1),o(S.current,T,I,N)):c===Dq.AUTH_EMAIL_ALREADY_EXISTS?i({type:p.ERROR,text:u}):i({type:p.ERROR,text:Wq.oops}),[3,4];case 4:return[2]}}))}))},w=function(){e.onClose(!1),e.onSuccess&&e.onSuccess()};return{isLoading:_,isValidCaptcha:v,isMaskedPassword:f,shouldValidateOnChange:c,setIsMaskedPassword:m,setShouldValidateOnChange:u,recaptchaRef:S,onSubmit:function(e){return Fq(void 0,void 0,void 0,(function(){var t;return Gq(this,(function(o){switch(o.label){case 0:return n?[4,r(rt.AUTH_BY_EMAIL)]:[3,2];case 1:return t=o.sent(),C(e,t),[3,3];case 2:C(e),o.label=3;case 3:return[2]}}))}))},onSuccess:w,onClose:function(){e.onClose(!0)},onShowPopup:function(){e.onClose(!0),l({type:a.AUTH_SIGN_IN})}}},jq=function(){return jq=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jq.apply(this,arguments)},zq=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.AuthSignUpPopup.components.AuthSignUpFounderX"),Yq=function(e){var t=e.classNames,n=void 0===t?{}:t,r=Vq({onClose:e.onClose,onSuccess:e.onSuccess}),o=r.isLoading,a=r.isValidCaptcha,i=r.isMaskedPassword,l=r.shouldValidateOnChange,s=r.setIsMaskedPassword,c=r.setShouldValidateOnChange,u=r.recaptchaRef,d=r.onSubmit,f=r.onSuccess,m=r.onClose,p=r.onShowPopup;return Gt.createElement(PM,{title:zq.title,onClose:m,classNames:jq(jq({},n),{block:cG()("AuthSignUpFounderX_popup_z65zF",n.block),content:cG()("AuthSignUpFounderX_content_z3V9S",n.content)}),footer:(0,Qr.getReactText)(zq.question,{LinkButton:function(e){var t=e.text;return Gt.createElement(VB,{onClick:p},t)}})},Gt.createElement(Bq,{isMaskedPassword:i,isLoading:o,isValidCaptcha:a,shouldValidateOnChange:l,setIsMaskedPassword:s,setShouldValidateOnChange:c,recaptchaRef:u,onSubmit:d,onSuccess:f}))},Kq=function(){return Kq=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kq.apply(this,arguments)},qq=function(e){return Rr()?Gt.createElement(Yq,Kq({},e)):Gt.createElement(Tq,Kq({},e))},Xq=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Qq=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.AuthSignInPopup.components.AuthSignInFounder.hooks.useAuthSignInPopup"),Jq=function(){return Jq=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jq.apply(this,arguments)},Zq=function(e){var t,n=e.classNames,r=void 0===n?{}:n,o=function(e){var t=BV(),n=t.isFBAuthRelinkFlowActive,r=t.showErrorAlert,o=Xq((0,Gt.useState)(!1),2),a=o[0],i=o[1],l=Xq((0,Gt.useState)(hK.ENTER_SOCIAL_NETWORK),2),s=l[0],c=l[1];return{title:n?Qq.signInFBBanned:s===hK.ENTER_CODE?Qq.enterCode:s===hK.ENTER_LAST_ACCOUNT?"":Qq.signIn,isLastAccountDisabled:n,isAuthorizationInProgress:a,setIsAuthorizationInProgress:i,setAuthStep:c,onSuccess:function(){i(!1),!e.disableCloseOnSuccess&&e.onClose(!1),e.onSuccess&&e.onSuccess()},onClose:function(){n?r():(i(!1),e.onClose(!0))}}}({disableCloseOnSuccess:e.disableCloseOnSuccess,onClose:e.onClose,onSuccess:e.onSuccess}),a=o.title,i=o.isLastAccountDisabled,l=o.isAuthorizationInProgress,s=o.setIsAuthorizationInProgress,c=o.setAuthStep,u=o.onClose,d=o.onSuccess;return Gt.createElement(PM,{title:a,onClose:u,classNames:Jq(Jq({},r),{wrapper:cG()(r.wrapper,(t={},t.AuthSignInFounder_hidden_XOyTJ=l,t))})},Gt.createElement(_q,{isLastAccountDisabled:i,onLoading:s,onSuccess:d,onChangeStep:c}))};!function(e){e.EMAIL="email",e.PASSWORD="password"}(xq||(xq={}));var $q=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.LoginForm"),eX=Sz.Ry().shape(((Mq={})[xq.EMAIL]=Sz.Z_().trim().required((function(){return $q.errors.emailRequired})).email((function(){return $q.errors.emailInvalid})),Mq[xq.PASSWORD]=Sz.Z_().required((function(){return $q.errors.passwordRequired})),Mq));const tX={root:"LoginForm_root_WtYw7",spinnerContainer:"LoginForm_spinnerContainer_jSZ1X",form:"LoginForm_form_jBjXn",formRow:"LoginForm_formRow_Pmb00",submitDisabled:"LoginForm_submitDisabled_WBLhf",invalidCredentials:"LoginForm_invalidCredentials_ZUrL4",recaptchaContainer:"LoginForm_recaptchaContainer_ooAgZ",forgotPassword:"LoginForm_forgotPassword_a9zJ3",button:"LoginForm_button_whV6w",offersText:"LoginForm_offersText_XERMj",fadeIn:"LoginForm_fadeIn_rn63G"};var nX,rX=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.LoginForm"),oX=function(e){var t=e.isLoading,n=e.isInvalidCredentials,r=e.isValidCaptcha,o=e.shouldValidateOnChange,a=e.setShouldValidateOnChange,i=e.recaptchaRef,l=e.onSubmit,s=e.onSuccess,c=e.onForgotPassword;return Gt.createElement("div",{className:tX.root},t&&Gt.createElement("div",{className:tX.spinnerContainer},Gt.createElement(uM,{size:50})),Gt.createElement(Gz.J9,{initialValues:{email:"",password:""},validationSchema:eX,validateOnBlur:o,validateOnChange:o,onSubmit:l},(function(e){var t=e.isValid,o=e.errors,l=e.touched,u=e.handleSubmit,d=!t||!r;return Gt.createElement(Sx,{className:tX.form,onSubmit:function(){a(!0),u()}},Gt.createElement(Ix,{className:tX.formRow},Gt.createElement(Gz.gN,{name:xq.EMAIL},(function(e){var t=e.field,n=t.value,r=t.onChange,a=t.onBlur,i=t.name,s=!l.email||l.email&&!o.email,c=!s&&o.email;return Gt.createElement(Zx,{isErrorInFlow:!0,isValid:s,error:c,type:"text",name:i,onBlur:a,onChange:r,value:n,className:tX.input,placeholder:rX.email})}))),Gt.createElement(Ix,{className:tX.formRow},Gt.createElement(Gz.gN,{name:xq.PASSWORD},(function(e){var t=e.field,n=t.value,r=t.onChange,a=t.onBlur,i=t.name,s=!l.password||l.password&&!o.password,c=!s&&o.password;return Gt.createElement(oM,{isValid:s,isErrorInFlow:!0,error:c,placeholder:rX.password,name:i,onBlur:a,onChange:r,value:n})}))),n&&Gt.createElement("div",{className:tX.invalidCredentials},rX.errors.invalidCredentials),Gt.createElement("div",{className:!r&&tX.recaptchaContainer,ref:i}),Gt.createElement("div",{className:tX.forgotPassword},Gt.createElement("div",{className:tX.button,onClick:c},rX.forgotPassword)),Gt.createElement(FB,{className:d&&tX.submitDisabled,type:"submit",isDisabled:d},rX.logIn),Gt.createElement(Pq,{providerText:rX.loginWithProvider,onSuccess:s}),Gt.createElement("div",{className:tX.offersText},(0,Qr.getReactText)(rX.offerText,{LinkTerms:function(e){var t=e.text;return Gt.createElement(cM,{target:"_blank",to:(0,Yt.getParametrizedUrl)(ir.OFFERS_PAYMENT_TERMS)},t)},LinkPrivacy:function(e){var t=e.text;return Gt.createElement(cM,{target:"_blank",to:(0,Yt.getParametrizedUrl)(ir.OFFERS_PRIVACY_POLICY)},t)}})))})))};!function(e){e.INVALID_CREDENTIALS="invalid_credentials"}(nX||(nX={}));var aX,iX,lX,sX=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},cX=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},uX=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},dX=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.LoginForm.hooks.useLoginForm");!function(e){e[e.START=0]="START",e[e.SUCCESS=1]="SUCCESS"}(aX||(aX={})),function(e){e.EMAIL="email"}(iX||(iX={}));var fX=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.ForgotPasswordForm.components.ForgotPasswordStart"),mX=Sz.Ry().shape(((lX={})[iX.EMAIL]=Sz.Z_().required((function(){return fX.errors.emailRequired})).email((function(){return fX.errors.emailInvalid})),lX)),pX=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.ForgotPasswordForm.components.ForgotPasswordStart"),hX=function(e){var t=e.isLoading,n=e.onSubmit,r=e.onCancel;return Gt.createElement("div",{className:"ForgotPasswordStart_root_IWQVV"},t&&Gt.createElement("div",{className:"ForgotPasswordStart_spinnerContainer_hM1Vr"},Gt.createElement(uM,{size:50})),Gt.createElement("div",{className:"ForgotPasswordStart_information_OrhMz"},pX.information),Gt.createElement(Gz.J9,{initialValues:{email:""},validationSchema:mX,validateOnBlur:!1,onSubmit:n},(function(e){var t=e.isValid,n=e.errors,o=e.touched,a=e.handleSubmit;return Gt.createElement(Sx,{className:"ForgotPasswordStart_form_SHHeC",onSubmit:a},Gt.createElement(Ix,{className:"ForgotPasswordStart_formRow_V0miE"},Gt.createElement(Gz.gN,{name:iX.EMAIL},(function(e){var t=e.field,r=t.value,a=t.onChange,i=t.onBlur,l=t.name,s=!o.email||o.email&&!n.email,c=!s&&n.email;return Gt.createElement(Zx,{name:l,value:r,type:"text",placeholder:pX.email,onChange:a,onBlur:i,isValid:s,isErrorInFlow:!0,error:c})}))),Gt.createElement("div",{className:"ForgotPasswordStart_buttons_C4Xid"},Gt.createElement(FB,{className:cG()("ForgotPasswordStart_sendButton_ylTDg",!t&&"ForgotPasswordStart_submitDisabled_fjC7U"),type:"submit",isDisabled:!t},pX.send),Gt.createElement(HB,{className:"ForgotPasswordStart_cancelButton__W6TD",onClick:r},pX.cancel)))})))},vX=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.ForgotPasswordForm.components.ForgotPasswordSuccess"),gX=function(e){var t=e.onCancel;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"ForgotPasswordSuccess_information_eRHhJ"},vX.information),Gt.createElement(HB,{className:"ForgotPasswordSuccess_closeButton_Iv6__",onClick:t},vX.close))},yX=function(e){var t=e.currentStep,n=e.isLoading,r=e.onClose,o=e.onCancel,a=e.onSubmit;return Gt.createElement(Gt.Fragment,null,t===aX.START?Gt.createElement(hX,{isLoading:n,onCancel:o,onSubmit:a}):Gt.createElement(gX,{onCancel:r}))},_X=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},EX=(0,Qr.getTranslation)("@boosty/common/components.AccountAccess.ForgotPasswordForm.hooks.useForgotPasswordForm"),bX=function(){return bX=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bX.apply(this,arguments)},SX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.AuthSignInPopup.components.AuthSignInFounderX"),TX=function(e){var t=e.classNames,n=void 0===t?{}:t,r=function(e){var t=ED(),n=t.isRecaptchaEnabled,r=t.generateRecaptchaV3Token,o=t.renderRecaptchaV2,i=jG().showAlert,l=(0,dH.useOverlayPopups)().showPopup,s=uX((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=uX((0,Gt.useState)(!0),2),f=d[0],m=d[1],h=uX((0,Gt.useState)(!1),2),v=h[0],g=h[1],y=uX((0,Gt.useState)(!1),2),_=y[0],E=y[1],b=(0,Vt.I0)(),S=(0,Gt.useRef)(null),T=function(){m(!0)},I=function(){m(!1)},N=function(){m(!1)},C=function(e,t){return sX(void 0,void 0,void 0,(function(){var r,a;return cX(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,b((0,dm.Ax)(Gb.action)({email:e.email.trim(),password:e.password,recaptchaToken:t}))];case 1:return r=l.sent(),a={accessToken:null==r?void 0:r.access_token,refreshToken:null==r?void 0:r.refresh_token,expiresAt:Date.now()+1e3*(null==r?void 0:r.expires_in)},Ta.setItem("auth",a),sf(a),[4,b((0,dm.Ax)(Xv.action)())];case 2:return l.sent(),w(),g(!1),[3,4];case 3:return l.sent().serverError.error===nX.INVALID_CREDENTIALS?(E(!0),n&&(m(!1),o(S.current,T,I,N))):i({type:p.ERROR,text:dX.oops}),g(!1),[3,4];case 4:return[2]}}))}))},w=function(){e.onClose(!1),e.onSuccess&&e.onSuccess()};return{recaptchaRef:S,isInvalidCredentials:_,isLoading:v,isValidCaptcha:f,shouldValidateOnChange:c,setShouldValidateOnChange:u,onShowPopup:function(){e.onClose(!0),l({type:a.AUTH_SIGN_UP})},onForgotPassword:function(){e.onClose(!0),l({type:a.FORGOT_PASSWORD})},onSubmit:function(e){return sX(void 0,void 0,void 0,(function(){var t;return cX(this,(function(o){switch(o.label){case 0:return g(!0),E(!1),n?[4,r(rt.AUTH_BY_EMAIL)]:[3,2];case 1:return t=o.sent(),C(e,t),[3,3];case 2:C(e),o.label=3;case 3:return[2]}}))}))},onSuccess:w,onClose:function(){e.onClose(!0)}}}({onClose:e.onClose,onSuccess:e.onSuccess}),o=r.isLoading,i=r.isInvalidCredentials,l=r.isValidCaptcha,s=r.shouldValidateOnChange,c=r.setShouldValidateOnChange,u=r.recaptchaRef,d=r.onSubmit,f=r.onClose,m=r.onSuccess,h=r.onShowPopup,v=r.onForgotPassword;return Gt.createElement(PM,{title:SX.title,onClose:f,classNames:bX(bX({},n),{block:cG()("AuthSignInFounderX_popup_ffr_N",n.block),content:cG()("AuthSignInFounderX_content_qVIlZ",n.content)}),footer:(0,Qr.getReactText)(SX.question,{LinkButton:function(e){var t=e.text;return Gt.createElement(VB,{onClick:h},t)}})},Gt.createElement(oX,{isLoading:o,isInvalidCredentials:i,isValidCaptcha:l,shouldValidateOnChange:s,setShouldValidateOnChange:c,recaptchaRef:u,onSubmit:d,onSuccess:m,onForgotPassword:v}))},IX=function(){return IX=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},IX.apply(this,arguments)},NX=function(e){return Rr()?Gt.createElement(TX,IX({},e)):Gt.createElement(Zq,IX({},e))};const CX={wrapper:"AdultContentPopup_wrapper_b_9XN",block:"AdultContentPopup_block_OoHdh",close:"AdultContentPopup_close_S5xX7",title:"AdultContentPopup_title_N82JL",titleImage:"AdultContentPopup_titleImage_yFqyY",titleText:"AdultContentPopup_titleText_tT38p",description:"AdultContentPopup_description_RHbf6",blogOwnerName:"AdultContentPopup_blogOwnerName_FffO9",confirmButton:"AdultContentPopup_confirmButton_Kzi8S",fadeIn:"AdultContentPopup_fadeIn_nb4hA"};var wX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.AdultContentPopup"),OX=function(e){var t,n=e.classNames,r=void 0===n?{}:n,o=e.blog.owner.name,a=e.updateUserFlag,i=e.onClose,l=Mf(),s=(0,Vt.v9)(XO),c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!Yf.canBeViewed(s)),2),u=c[0],d=c[1],f=function(){l(ir.MAIN,{replace:!0}),i()};return(0,Gt.useEffect)((function(){d(!Yf.canBeViewed(s))}),[null===(t=null==s?void 0:s.flags)||void 0===t?void 0:t.canViewAdultContent]),u?Gt.createElement(PM,{title:Gt.createElement("div",{className:CX.title},Gt.createElement("div",{className:cG()(CX.titleImage,r.titleImage)}),Gt.createElement("div",{className:cG()(CX.titleText,r.titleText)},wX.title)),onClose:f,classNames:{wrapper:CX.wrapper,block:cG()(CX.block,r.block),title:cG()(CX.title,r.title),content:CX.content,footer:cG()(CX.footer,r.footer),close:CX.close},footer:Gt.createElement("div",{className:cG()(CX.buttons,r.buttons)},Gt.createElement(FB,{className:cG()(CX.confirmButton,r.confirmButton),onClick:function(){Yf.sync(s,a),i()}},wX.confirmButtonText),Gt.createElement(HB,{className:CX.cancelButton,onClick:f},wX.cancelButtonText))},Gt.createElement("div",{className:CX.description},(0,Qr.getReactText)(wX.description,{BlogOwnerName:function(){return Gt.createElement("span",{className:CX.blogOwnerName},o)}}))):null};const AX={picture:"AfterFollowPopup_picture_O66FK",pictureAfterFollow:"AfterFollowPopup_pictureAfterFollow_t2E9L",block:"AfterFollowPopup_block_BRG0i",content:"AfterFollowPopup_content_R5cFV",info:"AfterFollowPopup_info_vCQ5L",text:"AfterFollowPopup_text_xNq6s",title:"AfterFollowPopup_title_cT22S",description:"AfterFollowPopup_description_tX79x",buttons:"AfterFollowPopup_buttons_USAY8",confirmButton:"AfterFollowPopup_confirmButton_DArhg",fadeIn:"AfterFollowPopup_fadeIn_at3S5"};var PX,LX,RX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.AfterFollowPopup"),kX=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.blogUrl,o=e.levelId,a=e.onClose,i=Mf();return Gt.createElement(PM,{onClose:a,classNames:{wrapper:cG()(AX.wrapper,n.wrapper),block:cG()(AX.block,n.block),content:cG()(AX.content,n.content),close:cG()(AX.close,n.close),title:cG()(AX.title,n.title)}},Gt.createElement("div",{className:cG()(AX.picture,n.picture)},Gt.createElement("div",{className:cG()(AX.pictureAfterFollow,n.icon)})),Gt.createElement("div",{className:cG()(AX.info,n.info)},Gt.createElement("div",{className:AX.text},Gt.createElement("div",{className:AX.title},RX.title,Gt.createElement("br",null),"@",r),Gt.createElement("div",{className:cG()(AX.description,n.description)},RX.description1,Gt.createElement("br",null),Gt.createElement("br",null),RX.description2)),Gt.createElement("div",{className:cG()(AX.buttons,n.buttons)},Gt.createElement(FB,{className:cG()(AX.confirmButton,n.confirmButton),onClick:function(){var e;if(r&&o){var t=(0,Yt.getParametrizedUrl)(ir.BLOG_PURCHASE,{blogUrl:r,levelId:o},((e={}).ssource=Xu.AFTER_FOLLOW_POPUP,e));i(t)}a()}},RX.confirmButtonText),Gt.createElement(HB,{className:cG()(AX.cancelButton,n.cancelButton),onClick:a},RX.cancelButtonText))))},DX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.CancelAccountDeletionPopup.components.ConfirmCancel"),UX=function(e){var t=e.isLoading,n=e.onClose,r=e.onSubmit;return Gt.createElement(PM,{title:DX.title,onClose:n,classNames:{block:"ConfirmCancel_popup_dXPnR"},footer:Gt.createElement("div",{className:"ConfirmCancel_buttons_QiXNI"},Gt.createElement(FB,{onClick:r,isDisabled:t},DX.confirm),Gt.createElement(HB,{onClick:n,isDisabled:t},DX.cancel))},Gt.createElement("div",{className:"ConfirmCancel_text_P9_7o"},DX.confirmText))},BX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.CancelAccountDeletionPopup.components.SuccessfulCancel"),xX=function(e){var t=e.onClose;return Gt.createElement(PM,{onClose:t,title:BX.title,footer:Gt.createElement(FB,{onClick:t},BX.close),classNames:{block:"SuccessfulCancel_popup_dh7PS"}},Gt.createElement("div",{className:"SuccessfulCancel_text_r9NFB"},BX.successText))},MX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.CancelAccountDeletionPopup"),FX=function(e){var t=e.showAlert,n=e.onClose,r=aW({onError:function(){return t({type:p.ERROR,text:MX.error})}}),o=r.cancelAccountDeletion,a=r.isCancelling;return r.isCancelled?Gt.createElement(xX,{onClose:n}):Gt.createElement(UX,{onClose:n,isLoading:a,onSubmit:o})};!function(e){e.NAME="name",e.EMAIL="email",e.TEXT="text"}(PX||(PX={}));var GX=Sz.Ry().shape(((LX={})[PX.NAME]=Sz.Z_().required().min(3).max(50),LX[PX.EMAIL]=Sz.Z_().required().email("Invalid email"),LX[PX.TEXT]=Sz.Z_().required().min(3).max(4e3),LX)),HX=function(){return HX=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},HX.apply(this,arguments)},WX=(0,Qr.getTranslation)("@common/components.ContactSupportForm"),VX=function(e){var t=e.from,n=e.textAreaRows,r=e.onSuccess,o=_k().currentUser||{},a=o.name,i=o.email,l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=(0,Vt.I0)(),d=jG().showAlert;return Gt.createElement(Gz.J9,{initialValues:{name:a||"",email:i||"",text:""},validateOnMount:!0,validationSchema:GX,onSubmit:function(e){return void 0,void 0,o=function(){var n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:c(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),n=(0,Qr.getParametrizedText)(WX.fromMessage,{from:t}),[4,u((0,dm.Ax)(Nb.action)(HX(HX({},e),t?{text:"".concat(n," ").concat(e.text)}:{})))];case 2:return o.sent(),r(),[3,4];case 3:return o.sent(),d({type:p.ERROR,text:WX.error}),c(!1),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function r(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(e){e(o)}))).then(r,a)}i((o=o.apply(undefined,[])).next())}));var n,o}},(function(e){var t=e.handleSubmit,r=e.isValid;return Gt.createElement(Sx,{onSubmit:t},Gt.createElement(Ix,{isSmallIndent:!0},Gt.createElement(Gz.gN,{name:PX.NAME},(function(t){var n=t.field,r=n.value,o=n.onChange,a=n.onBlur,i=n.name,l=r.length>35,s=Ef(e,PX.NAME);return Gt.createElement(Zx,{limit:50,withCounter:l,label:WX.fields.name.label,placeholder:WX.fields.name.placeholder,name:i,onBlur:a,onChange:o,value:r,isValid:s})}))),Gt.createElement(Ix,{isSmallIndent:!0},Gt.createElement(Gz.gN,{name:PX.EMAIL},(function(t){var n=t.field,r=n.value,o=n.onChange,a=n.onBlur,i=n.name,l=Ef(e,PX.EMAIL);return Gt.createElement(Zx,{label:WX.fields.email.label,placeholder:WX.fields.email.placeholder,name:i,onBlur:a,onChange:o,value:r,isValid:l})}))),Gt.createElement(Ix,{isSmallIndent:!0},Gt.createElement(Gz.gN,{name:PX.TEXT},(function(t){var r=t.field,o=r.value,a=r.onChange,i=r.onBlur,l=r.name,s=o.length>2800,c=Ef(e,PX.TEXT);return Gt.createElement(Zx,{multiline:!0,limit:4e3,withCounter:s,label:WX.fields.text.label,placeholder:WX.fields.text.placeholder,name:l,onBlur:i,onChange:a,value:o,rows:n,isValid:c})}))),Gt.createElement(FB,{className:"ContactSupportForm_submitButton_o2ybB",isDisabled:!r||s,type:"submit"},WX.submit))}))},jX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.ContactSupportPopup"),zX=function(e){var t=e.from,n=e.onClose,r=jG().showAlert;return Gt.createElement(PM,{title:jX.title,classNames:{title:"ContactSupportPopup_title_FWmkr",content:"ContactSupportPopup_content_jKf_u"},onClose:n},Gt.createElement(VX,{textAreaRows:7,from:t,onSuccess:function(){r({type:p.SUCCESS,text:jX.success}),n()}}))},YX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.DeleteAccountPopup.components.CannotDeleteAccount"),KX=function(e){var t=e.onClose,n=function(e,t){var n=(0,Vt.v9)(nO);return e===wt.NOT_EMPTY_BALANCE?Gt.createElement(Gt.Fragment,null,YX.cantDeleteReason.haveMoneyInBalanceText," ",Gt.createElement(cM,{to:(0,Yt.getParametrizedUrl)(ir.BLOG_WITHDRAWAL_METHODS,{blogUrl:n}),onClick:t,className:"CannotDeleteAccount_link_GtKFS"},YX.cantDeleteReason.haveMoneyInBalanceLink)):e===wt.PAID_SUBSCRIBERS?Gt.createElement(Gt.Fragment,null,YX.cantDeleteReason.havePaidSubscribers):null}(e.reason,t);return Gt.createElement(PM,{title:YX.cantDeleteAccountTitle,classNames:{block:"CannotDeleteAccount_popup_nY0tp"},onClose:t,footer:Gt.createElement("div",{className:"CannotDeleteAccount_buttons_DeA8v"},Gt.createElement(FB,{onClick:t},YX.gotIt))},Gt.createElement("div",{className:"CannotDeleteAccount_reasonText_dClhV"},n))},qX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.DeleteAccountPopup.components.ConfirmDeleteAccount"),XX=function(e){var t,n=e.isLoading,r=e.currentUser,o=e.onClose,a=e.onSubmit,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),l=i[0],s=i[1];return Gt.createElement(PM,{title:qX.deleteAccountTitle,onClose:o,classNames:{block:cG()("ConfirmDeleteAccount_popup_WuoxF",(t={},t.ConfirmDeleteAccount_popupLinked_m00iI=null==r?void 0:r.isVKPlayLinked,t))},footer:Gt.createElement("div",{className:"ConfirmDeleteAccount_buttons_QbYYR"},Gt.createElement(FB,{onClick:a,isDisabled:!l||n},qX.submit),Gt.createElement(HB,{onClick:o,isDisabled:n},qX.cancel))},Gt.createElement("div",{className:"ConfirmDeleteAccount_text_oExm3"},qX.confirmText),Gt.createElement("div",{className:"ConfirmDeleteAccount_checkbox_C4JhD"},Gt.createElement(VM,{label:qX.confirmCheckboxLabel,checked:l,onToggle:s,isDisabled:n})))},QX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.DeleteAccountPopup.components.SuccessfulAccountDeletion"),JX=function(e){var t=e.currentUser,n=e.onClose;return Gt.createElement(PM,{onClose:n,footer:Gt.createElement("div",{className:"SuccessfulAccountDeletion_footer_s6Khz"},Gt.createElement(FB,{onClick:n},QX.ok)),classNames:{block:"SuccessfulAccountDeletion_popup_WWWAs"}},Gt.createElement("div",{className:"SuccessfulAccountDeletion_content_h4xmu"},Gt.createElement("div",{className:"SuccessfulAccountDeletion_image_udzqh"}),Gt.createElement("h2",{className:"SuccessfulAccountDeletion_title_qevVH"},QX.successfulDeletionTitle),Gt.createElement("div",{className:"SuccessfulAccountDeletion_text_iwDLZ"},(0,Qr.getReactText)((0,Qr.getParametrizedText)(QX.successfulDeletionText.yourAccountWillBeDeleted,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized}),{LinkedInfo:function(e){var n=e.text;return Gt.createElement(Gt.Fragment,null,(null==t?void 0:t.isVKPlayLinked)?n:"")}})," ",Gt.createElement("b",null,QX.successfulDeletionText.in24Hours),Gt.createElement("br",null),QX.successfulDeletionText.ifItIsNotYouCancelInSettings)))},ZX=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.DeleteAccountPopup"),$X=function(e){var t=e.showAlert,n=e.onClose,r=rW({onError:function(){return t({type:p.ERROR,text:ZX.error})}}),o=r.currentUser,a=r.deleteAccount,i=r.isDeleting,l=r.isSuccess,s=r.cannotDeleteReason;return l?Gt.createElement(JX,{currentUser:o,onClose:n}):s?Gt.createElement(KX,{onClose:n,reason:s}):Gt.createElement(XX,{currentUser:o,onClose:n,isLoading:i,onSubmit:a})};const eQ="DeleteMessageConfirmPopup_description_qszk1";var tQ,nQ=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.DeleteMessageConfirmPopup"),rQ=function(e){var t,n,r=e.isVisibleCheckboxForAll,o=e.hasDonations,a=e.onConfirm,i=e.onClose,l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=r?nQ.delete:nQ.deleteForMe;return Gt.createElement(TK,{title:nQ.title,onClose:i,description:Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:eQ},nQ.description),o&&Gt.createElement("div",{className:"DeleteMessageConfirmPopup_donationWarning_nKzax"},nQ.donationWarning)),footer:Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:cG()("DeleteMessageConfirmPopup_checkbox_qWys8",(t={},t.DeleteMessageConfirmPopup_visible_QmtgH=r,t))},Gt.createElement(VM,{onToggle:function(){return c(!s)},checked:s,label:nQ.labelCheckbox}))),confirmButtonText:u,onConfirm:function(){a(s)},classNames:{buttons:cG()((n={},n.DeleteMessageConfirmPopup_buttons_WrwjN=r,n)),confirmButton:"DeleteMessageConfirmPopup_confirmButton_zeXFo",description:eQ}})},oQ=function(e){var t=e.title,n=e.text,r=e.buttonText,o=e.link,a=e.onClose;return Gt.createElement(PM,{title:t,classNames:{wrapper:"InfoMessagePopup_popup_pHwl6"},onClose:a},Gt.createElement("div",null,Gt.createElement("div",{dangerouslySetInnerHTML:{__html:n},className:"InfoMessagePopup_text_rWSMJ"}),Gt.createElement("a",{href:o,rel:"noopener noreferrer",target:"_blank",className:"InfoMessagePopup_link_yWQae"},r)))};!function(e){e[e.CLOSED=0]="CLOSED",e[e.AUDIO=1]="AUDIO",e[e.AUDIO_URL=2]="AUDIO_URL",e[e.VIDEO=3]="VIDEO",e[e.VIDEO_URL=4]="VIDEO_URL"}(tQ||(tQ={}));var aQ=function(e){var t,n=e.className,r=e.icon,o=e.isActive,a=e.title,i=e.children,l=e.onClick;return Gt.createElement("div",{className:fB()(n,"ToolbarButton_wrapper_ZkAOt",(t={},t.ToolbarButton_isActive_eNbX0=o,t))},Gt.createElement("button",{className:"ToolbarButton_button_JT32e",type:"button",onClick:l},Gt.createElement(pB,{className:"ToolbarButton_icon_u4Wq1",classNameSvg:"ToolbarButton_iconSvg_S_nxH",glyph:r}),Gt.createElement("span",{className:"ToolbarButton_title_fVO8K"},a)),i)};const iQ="ToolbarTooltip_buttonIconSvg_wvVoG",lQ="ToolbarTooltip_button_WwXN4",sQ="ToolbarTooltip_buttonContent_JHI1c",cQ="ToolbarTooltip_buttonIcon_SGCwx";var uQ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dQ=(0,Qr.getTranslation)("@common/components.RichEditor.components.ToolbarTooltip"),fQ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uQ(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.fileSizeLimit,r=e.isUploadByFileEnabled,o=e.onClickOutside,a=e.onUrlClick,i=e.onFileClick;return Gt.createElement("div",{className:fB()("ToolbarTooltip_tooltip_fWbvx",t)},Gt.createElement(Dx,{onClickOutside:o},Gt.createElement("button",{className:lQ,type:"button",onClick:a},Gt.createElement("div",{className:sQ},Gt.createElement(pB,{className:cQ,classNameSvg:iQ,glyph:hB.JHz}),dQ.tools.common.uploadByUrl)),r&&Gt.createElement("button",{className:lQ,type:"button",onClick:i},Gt.createElement("div",{className:sQ},Gt.createElement(pB,{className:cQ,classNameSvg:iQ,glyph:hB.XhR}),dQ.tools.common.uploadByFile),n&&Gt.createElement("span",{className:"ToolbarTooltip_sizeLimit_euoNA"},(0,Qr.getParametrizedText)(dQ.tools.common.fileSizeLimit,{fileSizeLimit:n})))))},t}(Gt.PureComponent);const mQ={tooltip:"ToolbarTooltipURL_tooltip_JAjSF",row:"ToolbarTooltipURL_row_BhimZ",inputLabel:"ToolbarTooltipURL_inputLabel_DAVRl",hintList:"ToolbarTooltipURL_hintList_mc8DW",supported:"ToolbarTooltipURL_supported_zdwqQ",hintListContent:"ToolbarTooltipURL_hintListContent_Fl_Hc",hintListItem:"ToolbarTooltipURL_hintListItem_lPCLO",supportedLabel:"ToolbarTooltipURL_supportedLabel_d32cz",input:"ToolbarTooltipURL_input_bkAM8",button:"ToolbarTooltipURL_button_C9iOW",error:"ToolbarTooltipURL_error_RNTee"};var pQ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hQ=(0,Qr.getTranslation)("@common/components.RichEditor.components.ToolbarTooltipURL"),vQ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={inputValue:"",isError:!1},t.onChange=function(e){var n=t.state.isError,r=e.target.value;n&&t.setError(!1),t.setState({inputValue:r})},t.onKeyDown=function(e){e.key===ae.ENTER&&t.onUrlUpload()},t.onUrlUpload=function(){var e=t.props,n=e.onUrlUpload,r=e.onValidate,o=e.onClickOutside,a=t.state.inputValue;r(a)?(n(a),o()):t.setError(!0)},t}return pQ(t,e),t.prototype.getSupportedPlatformsText=function(){return nr().isMobile?hQ.tools.common.supportedPlatforms:hQ.tools.common.supportedPlatformsFull},t.prototype.setError=function(e){this.setState({isError:e})},t.prototype.render=function(){var e=this.state,t=e.inputValue,n=e.isError,r=this.props,o=r.className,a=r.inputLabel,i=r.inputPlaceholder,l=r.hintList,s=r.onClickOutside;return Gt.createElement("div",{className:fB()(mQ.tooltip,o)},Gt.createElement(Dx,{onClickOutside:s},Gt.createElement("div",{className:mQ.content},Gt.createElement("div",{className:mQ.row},Gt.createElement(zx,{className:mQ.inputLabel},a),Gt.createElement("div",{className:mQ.supported},Gt.createElement("span",{className:mQ.supportedLabel},this.getSupportedPlatformsText()),Gt.createElement("div",{className:mQ.hintList},Gt.createElement("ul",{className:mQ.hintListContent},l.map((function(e){return Gt.createElement("li",{key:e,className:mQ.hintListItem},hQ.sources[e]||e)})))))),Gt.createElement(Zx,{className:mQ.input,value:t,placeholder:i,onChange:this.onChange,onKeyDown:this.onKeyDown}),n&&Gt.createElement("span",{className:mQ.error},hQ.errors.invalidLinkUrl),Gt.createElement("div",{className:mQ.row},Gt.createElement(FB,{className:mQ.button,onClick:this.onUrlUpload},hQ.tools.common.add),Gt.createElement(HB,{className:mQ.button,onClick:s},hQ.tools.common.cancel)))))},t}(Gt.Component);const gQ="Toolbar_tooltip_g22Qk",yQ="Toolbar_tooltipWide_XvNFB";var _Q=function(){return _Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_Q.apply(this,arguments)},EQ=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},bQ=(0,Qr.getTranslation)("@common/components.RichEditor.components.Toolbar"),SQ=function(e){var t,n=nr().publisher,o=n.files.isEnable,a=n.audioFiles.isEnable,i=n.videoFiles.isEnable,l=e.innerRef,s=e.isShadowed,c=e.isStatic,u=e.isPollButtonHidden,d=e.onImageUpload,f=e.onFileUpload,m=e.onAudioUploadByFile,p=e.onAudioUploadByUrl,h=e.onVideoUploadByFile,v=e.onVideoUploadByUrl,g=e.onPollButtonClick,y=e.validateVideoUrl,_=e.validateAudioUrl,E=Ok(e),b=EQ((0,Gt.useState)(null),2),S=b[0],T=b[1],I=EQ((0,Gt.useState)(tQ.CLOSED),2),N=I[0],C=I[1],w=Qo(r.USER_GENERATED_POLLS)&&!u;(0,Gt.useEffect)((function(){c||E===e||T(A())}),[]);var O=function(e){var t=nr().publisher,n=t.audioFiles,r=t.videoFiles,o=null;switch(e){case pe.AUDIO_FILE:o=n.limits;break;case pe.VIDEO_FILE:o=r.limits;break;default:return null}return Lo(o.fileSize,o.unit)},A=function(){return zd()+16},P=function(){C(tQ.CLOSED)};return Gt.createElement("div",{ref:l,className:fB()("Toolbar_toolbar_w5Md7",(t={},t.Toolbar_toolbarShadowed_rCZsi=s,t.Toolbar_toolbarStatic_t75s4=c,t)),style:!c&&S?{top:"".concat(S,"px")}:null},Gt.createElement(aQ,{icon:hB.Zay,onClick:d,title:bQ.tools.image.title}),Gt.createElement(aQ,{isActive:N===tQ.VIDEO||N===tQ.VIDEO_URL,icon:hB.OiJ,onClick:function(){return C(tQ.VIDEO)},title:bQ.tools.video.title},N===tQ.VIDEO&&Gt.createElement(fQ,{className:fB()(gQ,"Toolbar_tooltipLeft_TIUY3"),fileSizeLimit:O(pe.VIDEO_FILE),isUploadByFileEnabled:i,onClickOutside:P,onFileClick:h,onUrlClick:function(){return C(tQ.VIDEO_URL)}})),o&&Gt.createElement(aQ,{icon:hB.XhR,onClick:f,title:bQ.tools.file.title}),Gt.createElement(aQ,{isActive:N===tQ.AUDIO||N===tQ.AUDIO_URL,icon:hB.PWQ,onClick:function(){return C(tQ.AUDIO)},title:bQ.tools.audio.title},N===tQ.AUDIO&&Gt.createElement(fQ,{className:fB()(gQ,"Toolbar_tooltipRight__aKWg"),fileSizeLimit:O(pe.AUDIO_FILE),isUploadByFileEnabled:a,onClickOutside:P,onFileClick:m,onUrlClick:function(){return C(tQ.AUDIO_URL)}})),N===tQ.VIDEO_URL&&Gt.createElement(vQ,{className:fB()(gQ,yQ),inputLabel:bQ.tools.video.insert,inputPlaceholder:bQ.tools.video.insertPlaceholder,hintList:aD,onClickOutside:P,onUrlUpload:v,onValidate:y}),N===tQ.AUDIO_URL&&Gt.createElement(vQ,{className:fB()(gQ,yQ),inputLabel:bQ.tools.audio.insert,inputPlaceholder:bQ.tools.audio.insertPlaceholder,hintList:iD,onClickOutside:P,onUrlUpload:p,onValidate:_}),w&&Gt.createElement(aQ,{icon:hB.KNn,onClick:g,title:bQ.tools.poll.title}))},TQ=Gt.forwardRef((function(e,t){return Gt.createElement(SQ,_Q({innerRef:t},e))})),IQ=function(e,t){var n=t.match(/<b>(.*?)<\/b>/g);if(!n)return e;var r=n.map((function(e){return e.replace(/<\/?b>/g,"")})).join("|"),o=new RegExp("".concat(r),"gi");return e.replace(o,"<mark>$&</mark>")},NQ=function(e){var t=e.className,n=e.text,r=e.highlight,o=IQ(Vo.encode(n),r);return Gt.createElement("span",{className:fB()("SearchHighlightText_text_xjM4f",t),dangerouslySetInnerHTML:{__html:o}})},CQ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wQ=function(){return wQ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wQ.apply(this,arguments)},OQ=function(e){var t;return t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.getFileSize=function(){var t=e.props,n=t.size,r=t.progress;return r&&100!==r.percent?"".concat(Lo(r.loaded)," / ").concat(Lo(r.total)):Lo(n)},e.onUnAuthorizedClick=function(){e.props.showAuth()},e}return CQ(n,t),n.prototype.render=function(){var t=this.props,n=t.src,r=t.size,o=t.progress,a=t.isFromEditor,i=t.signedQuery,l=t.isAuthorized,s=t.onRemoveClick,c=t.onVideoPreviewUpload,u=t.setVideoPreview,d=this.getFileSize(),f=n?"".concat(n).concat(i||""):null,m=!o||100===o.percent,p=0!==r,h=!a&&f&&m&&p;return Gt.createElement(e,wQ({},this.props,{url:f,size:d,isAuthorized:l,isDownloadAvailable:h,isFileReady:p,isFileComplete:m,onVideoPreviewUpload:c,setVideoPreview:u,onRemoveClick:s,onUnAuthorizedClick:this.onUnAuthorizedClick}))},n}(Gt.PureComponent),t.displayName="fileHoc(".concat(jd(e),")"),t};const AQ="FileBlock_fileName_lzIT9",PQ="FileBlock_link_NSv4s",LQ="FileBlock_progressBar_AvDex";var RQ,kQ,DQ,UQ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),BQ=(0,Qr.getTranslation)("@common/components.RichEditor.components.FileBlock"),xQ=((RQ={})[pe.AUDIO_FILE]=hB.PWQ,RQ[pe.VIDEO_FILE]=hB.OiJ,RQ[pe.FILE]=hB.XhR,RQ[pe.IMAGE]=hB.Zay,RQ),MQ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onDownloadClick=function(){bd.log.post.downloadFile()},t}return UQ(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.iconType,r=e.header,o=e.url,a=e.size,i=e.fileName,l=e.headline,s=e.error,c=e.progress,u=e.isFromEditor,d=e.isDownloadAvailable,f=e.isAuthorized,m=e.isFileReady,p=e.isLoading,h=e.onRemoveClick,v=e.onUnAuthorizedClick;return Gt.createElement("div",{className:fB()("FileBlock_container_EoPw5",t)},u&&(s?Gt.createElement("div",{className:"FileBlock_error_O42ok"},Gt.createElement(pB,{className:"FileBlock_errorIcon_tkIAF",classNameSvg:"FileBlock_errorIconSvg_HoChi",glyph:hB.aqW}),Gt.createElement("span",{className:"FileBlock_errorText_iqwLB"},s),Gt.createElement("button",{className:"FileBlock_removeBtn_KPNrX",type:"button",onMouseDown:h},Gt.createElement(pB,{className:"FileBlock_removeBtnIcon_LIh32",classNameSvg:"FileBlock_removeBtnIconSvg_fntCn",glyph:hB.bMz}))):Gt.createElement("div",{className:"FileBlock_header_Dnc3B"},Gt.createElement(pB,{className:"FileBlock_headerIcon_mkE3T",classNameSvg:"FileBlock_headerIconSvg_bbsRW",glyph:xQ[n]}),!!r&&Gt.createElement("span",{className:"FileBlock_headerText_vv7Pi"},r),c&&100!==c.percent&&Gt.createElement("span",{className:"FileBlock_headerPercentage_VA7rp"},"".concat(c.percent,"%")),c&&100===c.percent&&n===pe.VIDEO_FILE&&Gt.createElement(uM,{size:24,className:"FileBlock_spinner_PgipT"}))),Gt.createElement("div",{className:"FileBlock_content_MttBf"},!u&&Gt.createElement(pB,{className:"FileBlock_contentIcon_O3Ufa",classNameSvg:"FileBlock_contentIconSvg__lGLK",glyph:xQ[n]}),l?Gt.createElement(NQ,{className:AQ,highlight:l,text:i}):Gt.createElement("span",{className:AQ},i),m&&Gt.createElement("span",{className:"FileBlock_size_zf4RM"},a),d&&(f?Gt.createElement(cM,{className:PQ,to:o,onClick:this.onDownloadClick,download:!0},BQ.download):Gt.createElement("span",{className:PQ,onClick:v},BQ.download)),!m&&Gt.createElement("span",{className:"FileBlock_processing_HN0IK"},BQ.processing)),!p&&c&&100!==c.percent&&Gt.createElement("div",{className:LQ},Gt.createElement("div",{className:"FileBlock_progressBarFill_SdRDt",style:{width:"".concat(c.percent,"%")}})),p&&!c&&Gt.createElement("div",{className:LQ},Gt.createElement("div",{className:"FileBlock_progressBarFillEndless_iMIoY"})))},t}(Gt.PureComponent),FQ=OQ(MQ),GQ=function(e){var t=e.className,n=e.imageClassName,r=e.url;return Gt.createElement("figure",{className:fB()(t,"ImageBlock_imageBlock_HtK03")},Gt.createElement("img",{className:fB()(n,"ImageBlock_image_vplgr"),src:r}))},HQ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),WQ=function(){return WQ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},WQ.apply(this,arguments)},VQ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return HQ(t,e),t.prototype.render=function(){var e=this.props,t=e.classNames,n=e.src,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["classNames","src"]);return Gt.createElement("div",{className:fB()("Iframe_root_NExt8",t.root)},Gt.createElement("iframe",WQ({className:fB()("Iframe_video_I19JB",t.iframe),width:"100%",height:"56.25%",src:n,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},r)))},t}(Gt.Component),jQ=function(e){var t=e.src,n=e.className;return null!=t?Gt.createElement(VQ,{src:t,classNames:{root:n}}):Gt.createElement("div",null,Gt.createElement(pB,{glyph:hB.ASI}))},zQ=function(e){var t=e.src,n=e.className,r=lD(t);return null!=r?Gt.createElement(VQ,{src:r,classNames:{root:n}}):Gt.createElement("div",null,Gt.createElement(pB,{glyph:hB.ASI}))},YQ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),KQ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPlay=function(){bd.log.post.audioPlay()},t.onError=function(){bd.log.post.audioPlayError()},t}return YQ(t,e),t.prototype.render=function(){var e=this.props,t=e.iconType,n=e.className,r=e.url,o=e.size,a=e.fileName,i=e.isAuthorized,l=e.isDownloadAvailable,s=e.isFileReady,c=e.onUnAuthorizedClick;return i&&l?Gt.createElement("audio",{className:fB()("Audio_audio_lDm8A",n),controls:!0,controlsList:"nodownload",preload:"metadata",src:r,onError:this.onError,onPlay:this.onPlay}):Gt.createElement(MQ,{className:n,iconType:t,fileName:a,size:o,isAuthorized:i,isDownloadAvailable:l,isFileReady:s,onUnAuthorizedClick:c})},t}(Gt.PureComponent);OQ(KQ),function(e){e.TINY_MPEG="tiny",e.LOWEST_MPEG="lowest",e.LOW_MPEG="low",e.MEDIUM_MPEG="medium",e.HIGH_MPEG="high",e.FULL_HD_MPEG="full_hd",e.QUADHD_MPEG="quad_hd",e.ULTRAHD_MPEG="ultra_hd",e.DASH="dash",e.DASH_UNI="dash_uni",e.LIVE_DASH="live_dash",e.LIVE_PLAYBACK_DASH="live_playback_dash",e.HLS="hls",e.LIVE_HLS="live_hls",e.LIVE_PLAYBACK_HLS="live_playback_hls"}(kQ||(kQ={})),function(e){e.AVAILABLE_PLAYBACK_RATES="availablePlaybackRates$",e.AVAILABLE_QUALITIES="availableQualities$",e.BUFFERED_PROGRESS="bufferedProgress$",e.CHROMECAST_CONNECTED="chromecastConnected$",e.CHROMECAST_DEVICE_NAME="chromecastDeviceName$",e.CHROMECAST_STATE="chromecastState$",e.CRASHED="crashed$",e.CURRENT_FORMAT="currentFormat$",e.CURRENT_PLAYBACK_RATE="currentPlaybackRate$",e.CURRENT_QUALITY="currentQuality$",e.DURATION="duration$",e.ERROR_LOG="errorLog$",e.IS_ACTIVE_LIVE="isActiveLive$",e.IS_AUDIO_AVAILABLE="isAudioAvailable$",e.IS_AUDIO_DISABLED="isAudioDisabled",e.IS_AUTO_QUALITY_ENABLED="isAutoQualityEnabled$",e.IS_ENDED="isEnded$",e.IS_LIVE="isLive$",e.IS_LOADER_VISIBLE="isLoaderVisible",e.MUTED="muted$",e.PLAYBACK_STATE="playbackState$",e.POSITION_EXACT="positionExact$",e.POSITION_WITH_SCRUBBING="positionWithScrubbing$",e.THROUGHPUT_ESTIMATION="throughputEstimation$",e.VIDEO_BITRATE="videoBitrate$",e.VIDEO_SIZE="videoSize$",e.VOLUME="volume$"}(DQ||(DQ={}));const qQ="VideoPlayer_root_y_FGb",XQ="VideoPlayer_player_R3Y_R";var QQ=(0,Qr.getTranslation)("@common/components.VideoPlayer"),JQ=function(e){var t=nr(),o=t.isMobile,a=t.supportUrl,i=t.locale,l=t.playbackPosition.startThreshold,s=e.classNames,c=void 0===s?{}:s,u=e.autoplay,d=e.muted,f=void 0!==d&&d,m=e.logoClickable,p=void 0!==m&&m,h=e.isSavingTimeCodeEnabled,v=void 0===h||h,g=e.callbacks,y=void 0===g?{}:g,_=e.data,E=_.playerUrls,b=_.vid,S=_.id,T=_.title,I=_.duration,N=_.timeCode,C=_.preview,w=_.url,O=_.failoverHost,A=e.isVkPlayerDisabled,P=e.onVKPButtonClick,L=(0,Gt.useRef)(null),R=(0,Gt.useRef)(null),k=!A&&Qo(r.VK_PLAYER),D=null==E?void 0:E.some((function(e){return Boolean(e.url)})),U=(0,Gt.useRef)(!1),B=(0,Gt.useRef)(!1),x=(0,Gt.useCallback)((function(){return function(e){var t;try{L.current.store.state[e].subscribe((function(e){t=e}))()}catch(e){}return t}(DQ.POSITION_EXACT)}),[L.current]),M=uH({isSavingTimeCodeEnabled:v,videoId:S,getPosition:x,duration:I}),F=M.savePlaybackPosition,G=M.deferredSavePlaybackPosition,H=M.startAutoSavingPlaybackPosition,W=M.stopAutoSavingPlaybackPosition,V=M.localPlaybackPosition,j=y.onStarted,z=y.onEnded,Y=y.onPlay,K=y.onPause,q=y.onSeek,X=y.onTimeupdate;y.onStarted=function(){var e=N||V;U.current=!0,J(),F(),H(),null==j||j(),e&&bd.log.video.startWithTimecode(e)},y.onEnded=function(){W(),null==z||z(),F()},y.onPlay=function(){J(),H(),null==Y||Y()},y.onPause=function(){W(),G(),null==K||K()},y.onSeek=function(e,t){U.current&&G(),null==q||q(e,t)},y.onTimeupdate=function(e,t){if(U.current){var n=0===t;t>l&&!B.current?(B.current=!0,n=!0):t<l&&(B.current=!1),n&&setTimeout((function(){return F()}),100)}null==X||X(e,t)},(0,Gt.useEffect)((function(){u&&(null==L?void 0:L.current)&&L.current.play()}),[u]);var Q=function(e){var t,n,r,o,a,i,l,s;if("https://ok.ru"===e.origin){var c=e.data;switch(c.event){case ye.STARTED:null===(t=y.onStarted)||void 0===t||t.call(y);break;case ye.PAUSED:null===(n=y.onPause)||void 0===n||n.call(y);break;case ye.RESUMED:null===(r=y.onPlay)||void 0===r||r.call(y);break;case ye.ENDED:null===(o=y.onEnded)||void 0===o||o.call(y);break;case ye.REWOUND:null===(a=y.onSeek)||void 0===a||a.call(y,c.previousTime,c.time);break;case ye.TIME_UPDATE:null===(i=y.onTimeupdate)||void 0===i||i.call(y,c.duration,c.time)}}switch(e.data){case Et.PLAY:null===(l=y.onPlay)||void 0===l||l.call(y),L.current.play();break;case Et.PAUSE:null===(s=y.onPause)||void 0===s||s.call(y),L.current.pause()}},J=function(){var e=Vf();if(e&&e!==L.current)try{e.pause()}catch(e){Yt.Log.message("Failed to stop the current player. It's probably already destroyed.")}Wf(L.current)};return(0,Gt.useEffect)((function(){return window.addEventListener("message",Q,!1),function(){window.removeEventListener("message",Q,!1),U.current&&F(),W()}}),[]),(0,Gt.useEffect)((function(){var e,t;k&&(L.current&&(W(),L.current.stop(),L.current.remove()),void 0,void 0,t=function(){var e,t,r,l,s,c,d,m,h;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(v){switch(v.label){case 0:if(!D)return[3,5];bd.log.video.startLoadingPlayer(),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,n.e(330).then(n.bind(n,45330))];case 2:return e=v.sent().registerPlayerWebComponent,(null===(h=window.customElements)||void 0===h?void 0:h.get("vk-video-player"))||e(),[3,4];case 3:return v.sent(),bd.log.video.loadPlayerError(),[3,4];case 4:t=document.createElement("vk-video-player"),r={MPEG:{}},E.forEach((function(e){if(e.url)switch(e.type){case kQ.TINY_MPEG:r.MPEG["144p"]=e.url;break;case kQ.LOWEST_MPEG:r.MPEG["240p"]=e.url;break;case kQ.LOW_MPEG:r.MPEG["360p"]=e.url;break;case kQ.MEDIUM_MPEG:r.MPEG["480p"]=e.url;break;case kQ.HIGH_MPEG:r.MPEG["720p"]=e.url;break;case kQ.FULL_HD_MPEG:r.MPEG["1080p"]=e.url;break;case kQ.QUADHD_MPEG:r.MPEG["1440p"]=e.url;break;case kQ.ULTRAHD_MPEG:r.MPEG["2160p"]=e.url;break;case kQ.DASH:r.DASH_SEP={type:"url",url:e.url};break;case kQ.DASH_UNI:r.DASH={type:"url",url:e.url};break;case kQ.LIVE_PLAYBACK_DASH:r.DASH_LIVE={type:"url",url:e.url};break;case kQ.HLS:r.HLS={type:"url",url:e.url};break;case kQ.LIVE_PLAYBACK_HLS:r.HLS_LIVE={type:"url",url:e.url}}})),l=(0,Do.parseUrl)(window.location.search).query,s=l.autoplay,c=l.muted,R.current&&(m=I-(d=V||N)<=1?0:d,R.current.appendChild(t),t.initPlayer({videos:[{sources:r,title:T,thumbUrl:C,unitedVideoId:b,duration:I}],failoverHosts:[O],fromTime:m,logoClickable:p,autoplay:"true"===s||u,isMobile:o,isPictureInPictureEnabled:!0,muted:"true"===c||f,supportLink:a,interfaceLanguage:i===ce.RU?"ru":"en",callbacks:y}),L.current=t),v.label=5;case 5:return[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())})))}),[b,C]),Gt.createElement(Gt.Fragment,null,k?Gt.createElement("div",{className:fB()(qQ,c.container)},D?Gt.createElement("div",{className:XQ,ref:R,onClick:function(e){var t=e.currentTarget,n=t.offsetWidth,r=t.offsetHeight,a=e.clientX,i=e.clientY,l=n-a,s=r-i;(o?15<i&&i<40&&15<l&&l<40:10<s&&s<35&&15<l&&l<40)&&(null==P||P())}}):Gt.createElement("div",{className:fB()(XQ,"VideoPlayer_stub_AWFn7")},Gt.createElement(pB,{className:"VideoPlayer_videoIcon_eYPTr",glyph:hB.OiJ}),Gt.createElement("div",null,QQ.videoIsProcessing))):Gt.createElement(VQ,{classNames:{root:fB()(qQ,c.container)},src:w}))},ZQ=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},$Q=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},eJ=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},tJ=(0,Qr.getTranslation)("@common/components.RichEditor.components.Video.components.VideoPreviewEditor.hooks.useVideoPreviewEditor");const nJ="VideoPreviewEditor_icon_B2TGY",rJ="VideoPreviewEditor_button_jjxGg";var oJ=(0,Qr.getTranslation)("@common/components.RichEditor.components.Video.components.VideoPreviewEditor"),aJ=function(e){var t=e.classNames,n=void 0===t?{}:t,r=function(e){var t=e.defaultPreview,n=e.preview,r=e.vid,o=e.uploadVideoPreview,a=e.setVideoPreview,i=e.showAlert,l=eJ((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=eJ((0,Gt.useState)({url:n,file:null,complete:null}),2),d=u[0],f=u[1],m=eJ((0,Gt.useState)(!s&&Boolean(d.url)),2),h=m[0],v=m[1],g=(0,Gt.useRef)(null),y=d.url?{backgroundImage:"url(".concat(d.url,")"),backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"}:{},_=function(e){return ZQ(void 0,void 0,void 0,(function(){var t,l;return $Q(this,(function(s){switch(s.label){case 0:return[4,Qd(e)];case 1:return t=s.sent().file,l=Qa(),function(e,t){ZQ(void 0,void 0,void 0,(function(){var l;return $Q(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),c(!0),f({url:window.URL.createObjectURL(e),file:e,complete:!1}),[4,o({file:e,uploadId:t})];case 1:return(l=s.sent())&&(a(l.id,r,l.url),v(!0),c(!1),i({type:p.SUCCESS,text:tJ.success})),[3,3];case 2:return s.sent(),i({type:p.ERROR,text:tJ.error}),c(!1),f({url:n,file:null,complete:null}),[3,3];case 3:return[2]}}))}))}(t,l),[2]}}))}))};return{isLoading:s,hasPreviewImage:h,ref:g,style:y,handleClick:function(){return g.current.click()},handleChange:function(e){Array.from(e.target.files).forEach((function(e){return ZQ(void 0,void 0,void 0,(function(){return $Q(this,(function(t){return[2,_(e)]}))}))}))},handleReset:function(){v(!1),a(null,r,null),f({url:t,file:null,complete:null})}}}({defaultPreview:e.defaultPreview,preview:e.preview,vid:e.vid,uploadVideoPreview:e.uploadVideoPreview,setVideoPreview:e.setVideoPreview,showAlert:e.showAlert}),o=r.isLoading,a=r.hasPreviewImage,i=r.style,l=r.ref,s=r.handleClick,c=r.handleChange,u=r.handleReset;return Gt.createElement("div",{className:fB()("VideoPreviewEditor_root_yaBls",n.root)},o&&Gt.createElement("div",{className:"VideoPreviewEditor_spinnerContainer_Nodb5"},Gt.createElement(uM,{className:"VideoPreviewEditor_spinner_xf9Gy",size:50})),Gt.createElement("div",{className:"VideoPreviewEditor_preview_UkBUx",style:i}),Gt.createElement("div",{className:"VideoPreviewEditor_previewOverlay_wXtiX"}),Gt.createElement("div",{className:"VideoPreviewEditor_controls_hj0ug"},Gt.createElement("div",{className:"VideoPreviewEditor_buttons_y9IPI"},Gt.createElement(HB,{onClick:s,className:fB()(rJ,"VideoPreviewEditor_buttonAddPreview_LkLFR")},Gt.createElement(pB,{className:fB()(nJ,"VideoPreviewEditor_iconAdd_k4UD_"),glyph:hB.Zay}),Gt.createElement("span",null,a?oJ.changePreview:oJ.addPreview),Gt.createElement("input",{ref:l,type:"file",accept:"image/*",value:"",hidden:!0,onChange:c})),a&&Gt.createElement(HB,{className:fB()(rJ,"VideoPreviewEditor_buttonRemovePreview_HXkDj"),onClick:u},Gt.createElement(pB,{className:nJ,glyph:hB.Fzz}))),Gt.createElement("div",{className:"VideoPreviewEditor_info_b2CqM"},oJ.info)))};const iJ="Video_video_q4pDF",lJ="Video_previewWrapper_H4eCJ";var sJ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cJ=function(){return cJ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cJ.apply(this,arguments)},uJ=(0,Qr.getTranslation)("@common/components.RichEditor.components.Video"),dJ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={videoProgress:0,currentTime:0},t}return sJ(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.iconType,o=t.className,a=t.url,i=t.playerUrls,l=t.title,s=t.duration,c=t.defaultPreview,u=t.preview,d=t.previewId,f=t.vid,m=t.timeCode,p=t.viewsCounter,h=t.showViewsCounter,v=t.size,g=t.headline,y=t.fileName,_=t.isAuthorized,E=t.isDownloadAvailable,b=t.isFileComplete,S=t.isFileReady,T=t.onUnAuthorizedClick,I=t.setVideoPreview,N=t.onVideoPreviewUpload,C=t.isFromEditor,w=t.id,O=t.postId,A=t.showAlert,P=Qo(r.VIDEO_COVER),L={videoId:w,vid:f,postId:O},R={onStarted:function(){return bd.log.video.started(cJ({duration:s},L))},onEnded:function(){return bd.log.video.ended(cJ({time:e.state.currentTime},L))},onPlay:function(){return bd.log.video.resumed(cJ({time:e.state.currentTime},L))},onPause:function(){return bd.log.video.paused(cJ({time:e.state.currentTime},L))},onSeek:function(e,t){return bd.log.video.rewound(cJ({from:e,to:t},L))},onTimeupdate:function(t,n){var r=e.state.videoProgress,o=10*Math.round(n/t*10);e.setState({currentTime:n}),r<o&&e.setState({videoProgress:o},(function(){bd.log.video.progress(cJ({time:n,percent:o},L))}))}};return b?C?u?Gt.createElement("div",{className:iJ},Gt.createElement("img",{src:u}),Gt.createElement("div",{className:"Video_playContainer_FPAEf"},Gt.createElement("div",{className:"Video_playIcon_eHrrI"})),P&&Gt.createElement(aJ,{classNames:{root:lJ},defaultPreview:c,preview:Boolean(d)&&u,vid:f,setVideoPreview:I,uploadVideoPreview:N,showAlert:A})):Gt.createElement("div",{className:iJ},Gt.createElement("div",{className:"Video_proccessingText_oY247"},uJ.videoIsProcessing),P&&Gt.createElement(aJ,{classNames:{root:lJ},defaultPreview:c,preview:Boolean(d)&&u,vid:f,setVideoPreview:I,uploadVideoPreview:N,showAlert:A})):Gt.createElement(JQ,{classNames:{container:fB()(iJ,o)},data:{url:a,playerUrls:i,title:l,preview:u,duration:s,vid:f,id:w,timeCode:m,viewsCounter:p,showViewsCounter:h},callbacks:R}):Gt.createElement(MQ,{className:o,iconType:n,headline:g,fileName:y,size:v,isAuthorized:_,isDownloadAvailable:E,isFileReady:S,onUnAuthorizedClick:T})},t}(Gt.PureComponent),fJ=OQ(dJ),mJ=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},pJ=(0,Qr.getTranslation)("@common/components.AudioPlayer"),hJ=function(e){return e.map((function(e){return String(e).padStart(2,"0")})).join(":")},vJ=function(e){var t=Math.floor(e/3600),n=Math.floor(e%60);if(t>0){var r=Math.floor(e/60)-60*t;return hJ([t,r,n])}return r=Math.floor(e/60),hJ([r,n])};const gJ="AudioPlayer_icon_mZ4zm";var yJ=(0,Qr.getTranslation)("@common/components.AudioPlayer"),_J=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.size,o=e.fileName,a=e.signedQuery,i=e.url,l=e.id,s=e.predefinedDuration,c=e.showDownload,u=void 0===c||c,d=function(e){var t,n=e.mediaId,r=e.url,o=e.signedQuery,a=e.size,i=e.predefinedDuration,l=_k().isAuthorized,s=(0,Gt.useRef)(null),c=(0,Gt.useRef)(null),u=(0,Gt.useRef)(null),d=c.current,f=mJ((0,Gt.useState)(0),2),m=f[0],p=f[1],h=mJ((0,Gt.useState)(!1),2),v=h[0],g=h[1],y=mJ((0,Gt.useState)(!1),2),_=y[0],E=y[1],b=mJ((0,Gt.useState)(100),2),S=b[0],T=b[1],I=mJ((0,Gt.useState)(0),2),N=I[0],C=I[1],w=r?"".concat(r).concat(o||""):null,O=null,A=(0,Gt.useCallback)((function(e){p(e.target.duration)}),[]),P=function(e,t){var n=(0,Vt.v9)(VP),r=(0,Vt.I0)(),o=Ok(n),a=(0,Gt.useCallback)((function(){r(BE({mediaId:e}))}),[]),i=(0,Gt.useCallback)((function(){r(xE())}),[]);return(0,Gt.useEffect)((function(){var t;o===e&&Boolean(n)&&n!==e&&((t=s.current).paused||t.pause(),_&&E(!1),C(0),t.currentTime=0,M(d,0))}),[n,o]),{setCurrentMediaPlaying:a,resetCurrentMediaPlaying:i}}(n),L=P.setCurrentMediaPlaying,R=P.resetCurrentMediaPlaying,k=(0,Gt.useCallback)((function(){bd.log.message.audioPlayError(),R()}),[]),D=(0,Gt.useCallback)((function(){bd.log.message.audioPlay()}),[]),U=(0,Gt.useCallback)((function(e){e.stopPropagation(),bd.log.message.downloadFile()}),[]),B=(0,Gt.useCallback)((function(){E(!1)}),[]),x=(0,Gt.useCallback)((function(){R()}),[]),M=(0,Gt.useCallback)((function(e,t){e.style.setProperty("--seek-before-width","".concat(t,"%"))}),[]),F=function(){var e=s.current;if(e&&d){var t=Math.floor(e.currentTime),n=t/Number(d.max)*100;C(t),d.value=t.toString(),M(d,n)}O=requestAnimationFrame(F)},G=Lo(a),H=(0,Gt.useCallback)((function(){return g(!0)}),[]),W=(0,Gt.useCallback)((function(e){return e.stopPropagation()}),[]);((null===(t=s.current)||void 0===t?void 0:t.readyState)>0||m)&&(d.max=Math.floor(m).toString());var V=m?vJ(m):null,j=i?vJ(i):null,z=null;return l?z=V?"".concat(vJ(N)," / ").concat(V):!_&&j?"".concat(vJ(N)," / ").concat(j):pJ.loading:j&&(z="".concat(vJ(N)," / ").concat(j)),v&&M(u.current,S),(0,Gt.useEffect)((function(){M(u.current,S)}),[]),{audioRef:s,audioTrackRef:c,audioVolumeRef:u,isPlaying:_,volume:S,time:N,timeTrackFormatted:z,audioDurationFormatted:V,sizeFormatted:G,src:w,onLoad:H,onAudioPlayPauseClick:function(){_?(E(!1),R(),s.current.pause(),cancelAnimationFrame(O)):(E(!0),L(),s.current.play(),requestAnimationFrame(F))},onVolumeChange:function(e){var t=u.current,n=Number(e.target.value)/Number(t.max)*100;T(Number(e.target.value)),s.current.volume=Number(e.target.value)/100,M(t,n)},onTimeInput:function(e){var t=s.current,n=Number(e.target.value),r=n/Number(d.max)*100;C(n),t.currentTime=n,M(d,r)},onPlay:D,onPause:B,onError:k,onEnd:x,onDownloadClick:U,onBlockClick:W,onLoadedMetaData:A}}({mediaId:l,url:i,signedQuery:a,size:r,predefinedDuration:s}),f=d.audioRef,m=d.audioTrackRef,p=d.audioVolumeRef,h=d.isPlaying,v=d.volume,g=d.time,y=d.src,_=d.timeTrackFormatted,E=d.audioDurationFormatted,b=d.sizeFormatted,S=d.onAudioPlayPauseClick,T=d.onVolumeChange,I=d.onTimeInput,N=d.onPlay,C=d.onPause,w=d.onError,O=d.onDownloadClick,A=d.onLoad,P=d.onBlockClick,L=d.onEnd,R=d.onLoadedMetaData,k=(0,Gt.useCallback)((function(){e.onPlayClick&&e.onPlayClick().stopHandling||S()}),[e.onPlayClick,S]);return Gt.createElement("div",{className:n.root},Gt.createElement("div",{className:"AudioPlayer_header_JEUAU"},Gt.createElement(pB,{glyph:hB.PWQ,className:fB()(gJ,"AudioPlayer_iconAudio_lbxTO")}),Gt.createElement("div",{className:"AudioPlayer_title_caOU6"},o,u&&" (".concat(0===r?yJ.processing:b,")")),u&&Gt.createElement(cM,{className:fB()("AudioPlayer_link_juPqV","AudioPlayer_buttonDownload_pX2RN"),to:y,onClick:O,download:!0},Gt.createElement(pB,{glyph:hB.DjJ,className:fB()("AudioPlayer_iconDownload_wqoN1",n.iconDownload)}))),Gt.createElement("div",{className:"AudioPlayer_audioView_xiVUY",onClick:P},Gt.createElement("div",{className:"AudioPlayer_playButton_x1YFU",onClick:k},Gt.createElement(pB,{glyph:h?hB.b8x:hB.nOJ,className:fB()(gJ,!h&&"AudioPlayer_iconPlay_lLpZ4")})),_&&Gt.createElement("div",{className:fB()("AudioPlayer_time_inYpl",n.time),style:{width:E?"".concat(.45*E.length*2+2.7,"em"):void 0}},_),Gt.createElement("div",{className:fB()("AudioPlayer_progress_oOa4j",!_&&"AudioPlayer_withMargin_Y9Nbp",n.progressWrapper)},Gt.createElement("div",{className:fB()("AudioPlayer_track_Clxko",n.track)},Gt.createElement("input",{onInput:I,className:"AudioPlayer_inputTrack_R9AEa",defaultValue:g,max:100,type:"range",ref:m}))),Gt.createElement("div",{className:"AudioPlayer_volume_hZgq1"},Gt.createElement("div",{className:fB()("AudioPlayer_volumeRangeWrapper_TveWa",n.volumeRangeWrapper)},Gt.createElement("input",{onInput:T,className:"AudioPlayer_rangeVolume_cBMuw",type:"range",defaultValue:v,max:100,ref:p})),Gt.createElement(pB,{glyph:hB.d2K,className:fB()(gJ,"AudioPlayer_button_RtsFc","AudioPlayer_buttonVolume__ymfE")}))),Gt.createElement("audio",{ref:f,className:"AudioPlayer_audio_x_6eq",controls:!0,controlsList:"nodownload",preload:"metadata",src:y,onError:w,onPlay:N,onPause:C,onLoadedData:A,onEnded:L,onLoadedMetadata:R}))},EJ=function(){return EJ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},EJ.apply(this,arguments)},bJ=function(e){var t=e.classNames,n=e.src,r=e.size,o=e.fileName,a=e.duration,i=e.signedQuery,l=e.id,s=e.isAuthorized,c=e.showAuth,u=e.showDownload,d=void 0!==u&&u,f=(0,Gt.useCallback)((function(){return s?{stopHandling:!1}:(c(),{stopHandling:!0})}),[s]);return Gt.createElement(_J,{key:s?0:1,classNames:EJ(EJ({},t),{root:fB()(t.root,"AudioBlock_root_iueHF")}),url:n,size:r,fileName:o,signedQuery:i,showDownload:d,id:l,onPlayClick:f,predefinedDuration:a})},SJ=[b.ABOUT_AUTHOR,b.BLOG,b.POST,b.SEARCH_BY_POSTS];const TJ="BlockRenderer_noIndent_yWqyP",IJ="BlockRenderer_padded_iKVou";var NJ,CJ=function(){return CJ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},CJ.apply(this,arguments)},wJ=Gt.memo((function(e){var t=e.url,n=e.className,r=e.onLoad,o=void 0===r?Yt.noop:r,a=e.imageId,i=e.imageLinkRoute,l=Wd(),s=function(e){var t=e.imageId,n=e.from,r=e.imageLinkRoute,o=xf(),a=(0,Do.parseUrl)(o.search).query;return r?(0,Yt.getParametrizedUrl)(r,{imageId:t},CJ({from:n},a)):null}({from:l,imageId:a,imageLinkRoute:i}),c=xf().state,u=Bo({url:t,width:545,isCroped:!1}),d=Gt.createElement("img",{className:fB()("BlockRenderer_image_NEsbT",n),src:u,alt:"",role:"presentation",onLoad:o,width:l===b.EMAIL?"100%":""});return s?Gt.createElement(jt.rU,{to:s,state:c},d):d})),OJ=function(e){var t,n=e.className,r=e.headline,o=e.blockData,a=Wd(),i=a===b.BLOG_STREAM_CHAT_MESSAGE?"span":"div",l=r?IQ(o.text,r):o.text;return Gt.createElement(i,{dangerouslySetInnerHTML:{__html:l},className:fB()("BlockRenderer_markup_Wtipg",n,(t={},t[TJ]=!SJ.includes(a),t.BlockRenderer_realEmpty_D6oYh=a===b.SUBSCRIPTION_LEVEL_ITEM,t))})},AJ=(0,Qr.getTranslation)("@common/components.ContentRenderer.BlockRenderer.VideoBlock"),PJ=function(e){var t=e.hasCounter,n=e.viewsCounter,r=e.className,o=e.src,a=e.playerUrls,i=e.size,l=e.headline,s=e.title,c=e.isAuthorized,u=e.vid,d=e.id,f=e.preview,m=e.duration,p=e.fileName,h=e.postId,v=e.timeCode,g=n||0,y=(0,Qr.getParametrizedText)(qr([AJ.watchedVideo1,AJ.watchedVideo2,AJ.watchedVideo5],g),{amount:g});return Gt.createElement(Gt.Fragment,null,Gt.createElement(fJ,{iconType:pe.VIDEO_FILE,className:r,src:o,playerUrls:a,size:i,headline:l,fileName:p,isAuthorized:c,videoId:u,id:d,vid:u,preview:f,duration:m,title:s,postId:h,timeCode:v,viewsCounter:n}),t&&Gt.createElement("div",{className:"VideoBlock_views_v2SzE"},y))},LJ=function(){return LJ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},LJ.apply(this,arguments)},RJ=Gt.memo((function(e){var t=e.block,n=e.headline,r=e.isAuthorized,o=e.hasCounter,a=e.showAuth,i=e.onImageLoad,l=e.blockIndex,s=e.isLastBlock,c=e.signedQuery,u=e.renderFileBlock,d=e.renderImageBlock,f=e.renderVideoFileBlock,m=e.imageLinkRoute,p=e.classNames,h=void 0===p?{}:p,v=e.overridingProps,g=void 0===v?{}:v,y=JU(),_=(0,Vt.v9)(Hw),E=Wd(),S=c||(E===b.ABOUT_AUTHOR||E===b.SUBSCRIPTION_LEVEL_ITEM?null==_?void 0:_.signedQuery:null==y?void 0:y.signedQuery);try{if(function(e){return"markup"===e.type}(t))return Gt.createElement(OJ,{className:h.markup,blockData:t.data,headline:n});var T=0===l,I=!(null==y?void 0:y.title),N=function(e){return void 0===e&&(e=""),function(e,t){var n,r,o=t.isFirstBlock,a=t.isLastBlock,i=t.contentOrigin;return t.isBlogPostWithoutTitle?fB()(((n={}).BlockRenderer_first_hbJJc=o,n.BlockRenderer_last_xhyaY=a,n),e):fB()(e,((r={})[TJ]=!SJ.includes(i),r))}(e,{isBlogPostWithoutTitle:I,isFirstBlock:T,isLastBlock:s,contentOrigin:E})};if(function(e){return e.type===pe.VIDEO}(t))return Gt.createElement(zQ,{src:t.url,className:N(IJ)});if(function(e){return e.type===pe.AUDIO}(t))return Gt.createElement(jQ,{src:to(t.url),className:N(IJ)});if(function(e){return e.type===pe.IMAGE}(t))return d?d({isFirstBlock:T,isLastBlock:s,isAuthorized:r,imageLinkRoute:m,block:t}):Gt.createElement(wJ,{className:fB()(N(),null==h?void 0:h.image),imageId:t.id,url:t.url,onLoad:i,imageLinkRoute:m});if(function(e){return e.type===pe.FILE}(t)){var C=t.url,w=t.size,O=t.title,A=t.uploadProgress;return u?u({isFirstBlock:T,isLastBlock:s,isAuthorized:r,showAuth:a,signedQuery:S,block:t}):Gt.createElement(FQ,{className:fB()(N("BlockRenderer_file_beXwe")),iconType:pe.FILE,src:C,size:w,headline:n,fileName:O,progress:A,signedQuery:S,isAuthorized:r,showAuth:a})}if(function(e){return e.type===pe.AUDIO_FILE}(t)){w=t.size,C=t.url,O=t.title;var P=t.id,L=t.duration,R=(null==h?void 0:h.audioFile)||{},k=g.audioFile||{};return Gt.createElement(bJ,LJ({classNames:LJ({root:N("BlockRenderer_audio_uJ3mS")},R),src:C,size:w,headline:n,fileName:O,signedQuery:S,id:P,isAuthorized:r,showAuth:a,duration:L},k))}if(function(e){return e.type===pe.VIDEO_FILE}(t)){C=t.url,w=t.size,O=t.title,P=t.id;var D=t.playerUrls,U=t.vid,B=(L=t.duration,t.preview),x=t.timeCode,M=t.viewsCounter,F=t.showViewsCounter;return f?f({isFirstBlock:T,isLastBlock:s,isAuthorized:r,showAuth:a,signedQuery:S,block:t}):Gt.createElement(Gt.Fragment,null,Gt.createElement(PJ,{className:N(IJ),src:C,playerUrls:D,size:w,headline:n,fileName:O,isAuthorized:r,videoId:U,id:P,vid:U,preview:B,duration:L,title:O,postId:null==y?void 0:y.id,timeCode:x,viewsCounter:M,hasCounter:o&&F}))}return null}catch(e){return e instanceof Error&&ho.error("Failed parse content: ".concat(e&&e.toString()?e.toString():String(e))),null}})),kJ=function(){function e(e,t){void 0===e&&(e=""),void 0===t&&(t=0);var n=this;this.addHtmlText=function(e){n._text+=e},this.addOffset=function(e){n._offset+=e},this.reset=function(){n._text="",n._offset=0},this._text=e,this._offset=t}return Object.defineProperty(e.prototype,"currentOffset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentText",{get:function(){return this._text},enumerable:!1,configurable:!0}),e}(),DJ=function(e,t){if(!t)return"";if(t.type===pe.TEXT&&""!==t.content){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(JSON.parse(t.content),1)[0];return 32===(null==(r=n["prev"===e?n.length-1:0])?void 0:r.charCodeAt(0))||160===(null==r?void 0:r.charCodeAt(0))?"":" "}return t.type===pe.TEXT||ra(t)||t.type===pe.LINK||aa(t)?" ":"";var r},UJ=function(){return UJ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},UJ.apply(this,arguments)},BJ=Gt.memo((function(e){var t=e.data,n=e.headline,r=e.onImageLoad,o=e.signedQuery,i=e.classNames,l=e.renderImageBlock,s=e.renderFileBlock,c=e.renderVideoFileBlock,u=e.imageLinkRoute,d=e.overridingProps,f=e.hasCounter,m=e.hasMentionHighlight,p=void 0===m||m,h=_k(),v=h.isAuthorized,g=h.currentUser,y=BK().showPopup,_=function(e){void 0===e&&(e={}),y({type:a.AUTH_SIGN_IN,data:e})},E=t.map((function(e){var t,n=p&&"id"in e&&(null==g?void 0:g.id)===e.id;return UJ(UJ({},e),{className:fB()((t={},t.ContentRenderer_mention_eMmgA=aa(e),t.ContentRenderer_mentionHighlight_nGn23=n,t))})}));try{var b=function(e,t){void 0===t&&(t={});var n=[];if(e){var r=new kJ;return e.forEach((function(o,a){if(oa(o)||ra(o)||aa(o)){var i="";if(o.type!==pe.LINK||t.linksDisabled)if(ra(o))i=Hk(o,t.smileSize);else if(aa(o)){var l=DJ("prev",e[a-1]),s=DJ("next",e[a+1]);i=l+Wk(o)+s}else i=Fk(o.content,r.currentOffset);else i=Gk(o,r.currentOffset);if(r.addHtmlText(i),ra(o))r.addOffset(1);else{var c=aa(o)?o.name.length:Kk(o);r.addOffset(c)}(function(e){return!e||zk(e)||!oa(e)&&!ra(e)})(e[a+1])&&(n.push(function(e,t){if(e===pe.TEXT||e===pe.LINK||e===pe.SMILE||e===pe.MENTION)return{type:"markup",data:{text:t}};throw new Error("Invalid type ".concat(e))}(o.type,r.currentText)),r.reset())}else n.push(o)})),n}return n}(E),S=b.length-1;return Gt.createElement(Gt.Fragment,null,b.map((function(e,t){return Gt.createElement(RJ,{key:t,headline:n,block:e,isAuthorized:v,hasCounter:f,blockIndex:t,isLastBlock:S===t,showAuth:_,onImageLoad:r,signedQuery:o,classNames:i,renderFileBlock:s,renderImageBlock:l,renderVideoFileBlock:c,overridingProps:d,imageLinkRoute:u})})))}catch(e){return e instanceof Error&&ho.error("Failed parse content: ".concat(e&&e.toString()?e.toString():String(e))),null}})),xJ=function(){return Gt.createElement("div",{className:"SkeletonLoader_container_dDNgT"},Gt.createElement(pB,{glyph:hB.Zay,className:"SkeletonLoader_icon_KgqL2"}))},MJ=function(){return MJ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},MJ.apply(this,arguments)},FJ=(0,Qr.getTranslation)("@boosty/common/components.Messages.Image"),GJ=function(e){var t,n=e.messageId,r=e.imageId,o=e.src,a=e.className,i=e.isSmall,l=e.onLoad,s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=Gf(),f=d.blogUrl,m=d.userId,p=xf(),h=Wd(),v=(0,Do.parseUrl)(p.search).query,g=Gt.createElement("img",{className:cG()("Image_image_bX65k",(t={},t.Image_small_imfuX=i,t.Image_hidden_fp2TD=!c,t)),src:Bo({url:o,width:i?16:185,isCroped:!1}),alt:"",role:"presentation",key:r,onLoad:function(e){u(!0),l&&l()}});if(i)return Gt.createElement("div",{className:"Image_container_akgS5",key:r},g,FJ.image);var y=(0,Yt.getParametrizedUrl)(ir.BLOG_MESSAGE_PHOTO_LAYER,{blogUrl:f,userId:m,messageId:n,imageId:r},MJ({from:h},v));return y?Gt.createElement(jt.rU,{to:y,className:cG()(a,"Image_link_dCQCI"),onClick:function(e){return e.stopPropagation()}},!c&&Gt.createElement(xJ,null),g):g},HJ=((NJ={})[pe.AUDIO_FILE]=hB.PWQ,NJ[pe.VIDEO_FILE]=hB.OiJ,NJ[pe.FILE]=hB.XhR,NJ[pe.IMAGE]=hB.Zay,NJ),WJ=function(){return Gt.createElement("div",{className:"ResetButton_container_QBdcb"},Gt.createElement(pB,{className:cG()("ResetButton_resetButton_yDpXN"),glyph:hB.bMz}))},VJ=function(e){var t=e.src,n=e.size,r=e.progress,o=e.isFromEditor,a=e.signedQuery,i=e.from,l=e.onRemoveClick,s=r&&100!==r.percent?"".concat(Lo(r.loaded)," / ").concat(Lo(r.total)):Lo(n),c=t?"".concat(t).concat(a||""):null,u=!r||100===r.percent,d=0!==n;return{url:c,size:s,isDownloadAvailable:!o&&c&&u&&d&&i!==b.MESSAGE_PREVIEW,isFileReady:d,isFileComplete:u,onRemoveClick:l}};const jJ="FileBlock_size_PbfZJ",zJ="FileBlock_progressBar_PHhKR";var YJ=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageBasePublisher.components.Attachments.FileBlock"),KJ=function(e){var t,n=e.classNames,r=void 0===n?{}:n,o=e.iconType,a=e.fileName,i=e.error,l=e.progress,s=e.isFromEditor,c=e.isLoading,u=e.onRemoveClick,d=VJ({src:e.src,size:e.size,progress:e.progress,isFromEditor:e.isFromEditor,signedQuery:e.signedQuery,from:e.from,onRemoveClick:e.onRemoveClick}),f=d.url,m=d.size,p=d.isDownloadAvailable,h=d.isFileReady,v=!c&&l&&100===l.percent;return Gt.createElement("div",{className:cG()("FileBlock_container_nAIM1",r.root,(t={},t.FileBlock_fromEditor_nJWZv=s,t))},s&&Gt.createElement(WJ,null),s&&(i?Gt.createElement("div",{className:"FileBlock_error_HRm8U"},Gt.createElement(pB,{className:"FileBlock_errorIcon_qP223",classNameSvg:"FileBlock_errorIconSvg_SazpP",glyph:hB.aqW}),Gt.createElement("span",{className:"FileBlock_errorText_dlYxP"},i),Gt.createElement("button",{className:"FileBlock_removeBtn_oJsVg",type:"button",onMouseDown:u},Gt.createElement(pB,{className:"FileBlock_removeBtnIcon_79G4A",classNameSvg:"FileBlock_removeBtnIconSvg_GYh1d",glyph:hB.bMz}))):Gt.createElement("div",{className:"FileBlock_header_fDwZU"},Gt.createElement(pB,{className:"FileBlock_headerIcon_yfUjb",classNameSvg:"FileBlock_headerIconSvg_JP3U9",glyph:HJ[o]}),l&&100===l.percent&&o===pe.VIDEO_FILE&&Gt.createElement(uM,{size:24,className:"FileBlock_spinner_m_ziR"}))),Gt.createElement("div",{className:cG()("FileBlock_content_wizSC",r.block)},!s&&Gt.createElement(pB,{className:"FileBlock_contentIcon_Xo84S",classNameSvg:"FileBlock_contentIconSvg_oZj8R",glyph:HJ[o]}),Gt.createElement("div",{className:cG()("FileBlock_fileInfo_auxuA",r.info)},Gt.createElement("span",{className:"FileBlock_fileName_k6eXz",title:a},a),!s&&Gt.createElement("span",{className:jJ},"(",m,")"),v&&Gt.createElement("span",{className:jJ},m)),p&&Gt.createElement(cM,{className:cG()("FileBlock_link_V8XM6",r.link),to:f,onClick:function(e){e.stopPropagation(),bd.log.message.downloadFile()},download:!0},Gt.createElement(pB,{glyph:hB.DjJ,className:cG()("FileBlock_iconDownload_hsDpv",r.linkIcon)})),!h&&Gt.createElement("span",{className:"FileBlock_processing_rnQCu"},YJ.processing)),!c&&l&&100!==l.percent&&Gt.createElement("div",{className:zJ},Gt.createElement("div",{className:"FileBlock_progressBarFill_ZIk9w",style:{width:"".concat(l.percent,"%")}})),c&&!l&&Gt.createElement("div",{className:zJ},Gt.createElement("div",{className:"FileBlock_progressBarFillEndless_XE2n9"})))};const qJ="SimpleVideoPlayer_player_cmaIE";var XJ=(0,Qr.getTranslation)("@common/components.SimpleVideoPlayer"),QJ=function(e){var t=e.classNames,r=void 0===t?{}:t,o=e.data,a=o.playerUrls,i=o.vid,l=o.title,s=o.duration,c=o.preview,u=o.failoverHost,d=(0,Gt.useRef)(null),f=(0,Gt.useRef)(null),m=null==a?void 0:a.some((function(e){return Boolean(e.url)})),p=nr(),h=p.isMobile,v=p.supportUrl;return(0,Gt.useEffect)((function(){var e,t;d.current&&(d.current.stop(),d.current.remove()),t=function(){var e,t,r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(p){switch(p.label){case 0:if(!m)return[3,5];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,n.e(330).then(n.bind(n,45330))];case 2:return e=p.sent().registerPlayerWebComponent,(null===(o=window.customElements)||void 0===o?void 0:o.get("vk-video-player"))||e(),[3,4];case 3:return p.sent(),bd.log.video.loadPlayerError(),[3,4];case 4:t=document.createElement("vk-video-player"),r={MPEG:{}},a.forEach((function(e){if(e.url)switch(e.type){case kQ.TINY_MPEG:r.MPEG["144p"]=e.url;break;case kQ.LOWEST_MPEG:r.MPEG["240p"]=e.url;break;case kQ.LOW_MPEG:r.MPEG["360p"]=e.url;break;case kQ.MEDIUM_MPEG:r.MPEG["480p"]=e.url;break;case kQ.HIGH_MPEG:r.MPEG["720p"]=e.url;break;case kQ.FULL_HD_MPEG:r.MPEG["1080p"]=e.url;break;case kQ.QUADHD_MPEG:r.MPEG["1440p"]=e.url;break;case kQ.ULTRAHD_MPEG:r.MPEG["2160p"]=e.url;break;case kQ.DASH:r.DASH_SEP={type:"url",url:e.url};break;case kQ.DASH_UNI:r.DASH={type:"url",url:e.url};break;case kQ.LIVE_PLAYBACK_DASH:r.DASH_LIVE={type:"url",url:e.url};break;case kQ.HLS:r.HLS={type:"url",url:e.url};break;case kQ.LIVE_PLAYBACK_HLS:r.HLS_LIVE={type:"url",url:e.url}}})),f.current.appendChild(t),t.initPlayer({videos:[{sources:r,title:l,thumbUrl:c,unitedVideoId:i,duration:s}],failoverHosts:[u],logoClickable:!1,autoplay:!1,isMobile:h,supportLink:v,muted:!0}),d.current=t,p.label=5;case 5:return[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}))}),[i]),Gt.createElement("div",{className:fB()("SimpleVideoPlayer_root_toMur",r.container)},m?Gt.createElement("div",{className:qJ,ref:f}):Gt.createElement("div",{className:fB()(qJ,"SimpleVideoPlayer_stub_x5Aki")},Gt.createElement(pB,{className:"SimpleVideoPlayer_videoIcon_vKOHx",glyph:hB.OiJ}),Gt.createElement("div",null,XJ.videoIsProcessing)))};const JJ="Video_video_kNz98";var ZJ,$J,eZ,tZ,nZ,rZ,oZ,aZ,iZ=function(){return iZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},iZ.apply(this,arguments)},lZ=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},sZ=function(e){var t,n=e.iconType,r=e.classNames,o=void 0===r?{}:r,a=e.url,i=e.playerUrls,l=e.title,s=e.preview,c=e.duration,u=e.vid,d=e.size,f=e.fileName,m=e.isFromEditor,p=e.id,h=e.timeCode,v=e.viewsCounter,g=e.showViewsCounter,y=e.isSimple,_=VJ({size:e.size}).isFileComplete,E=lZ((0,Gt.useState)(0),2),b=E[0],S=E[1],T=lZ((0,Gt.useState)(0),2),I=T[0],N=T[1],C={videoId:p,vid:u},w={onStarted:function(){return bd.log.video.started(iZ({duration:c},C))},onEnded:function(){return bd.log.video.ended(iZ({time:I},C))},onPlay:function(){return bd.log.video.resumed(iZ({time:I},C))},onPause:function(){return bd.log.video.paused(iZ({time:I},C))},onSeek:function(e,t){return bd.log.video.rewound(iZ({from:e,to:t},C))},onTimeupdate:function(e,t){var n=10*Math.round(t/e*10);N(t),b<n&&(S(n),bd.log.video.progress(iZ({time:t,percent:n},C)))}};return _?Gt.createElement("div",{className:cG()("Video_container_bthw5",(t={},t.Video_fromEditor_ud5pJ=m,t))},m&&Gt.createElement(WJ,null),y?Gt.createElement(QJ,{classNames:{container:cG()(JJ,o.root)},data:{url:a,playerUrls:i,title:l,preview:s,duration:c,vid:u,id:p,timeCode:h,viewsCounter:v,showViewsCounter:g}}):Gt.createElement(JQ,{classNames:{container:cG()(JJ,o.root)},data:{url:a,playerUrls:i,title:l,preview:s,duration:c,vid:u,id:p,timeCode:h,viewsCounter:v,showViewsCounter:g},callbacks:w})):Gt.createElement(KJ,{classNames:o,iconType:n,fileName:f,size:d})},cZ=function(e){var t=e.className,n=e.imageClassName,r=e.url,o=e.isFromEditor,a=Bo({url:r,width:75,isCroped:!1}),i={backgroundSize:"cover",backgroundImage:"url(".concat(a,")"),backgroundPosition:"center"};return Gt.createElement("figure",{className:cG()(t,"ImageBlock_imageBlock_ZWPtZ")},o&&Gt.createElement(WJ,null),Gt.createElement("div",{style:i,className:cG()(n,"ImageBlock_image_R7ATC")}))};!function(e){e[e.unstyled=0]="unstyled",e[e.paragraph=1]="paragraph",e[e["header-one"]=2]="header-one",e[e["header-two"]=3]="header-two",e[e["header-three"]=4]="header-three",e[e["header-four"]=5]="header-four",e[e["header-five"]=6]="header-five",e[e["header-six"]=7]="header-six",e[e["unordered-list-item"]=8]="unordered-list-item",e[e["ordered-list-item"]=9]="ordered-list-item",e[e.blockquote=10]="blockquote",e[e["code-block"]=11]="code-block",e[e.atomic=12]="atomic"}(ZJ||(ZJ={})),function(e){e.UPLOAD_START="uploadstart",e.UPLOAD_END="uploadend"}($J||($J={})),function(e){e[e.STYLE=0]="STYLE",e[e.OFFSET=1]="OFFSET",e[e.LENGTH=2]="LENGTH"}(eZ||(eZ={})),function(e){e[e.STYLE=0]="STYLE",e[e.START=1]="START",e[e.END=2]="END"}(tZ||(tZ={})),function(e){e[e.TEXT=0]="TEXT",e[e.TYPE=1]="TYPE",e[e.STYLE_RANGES=2]="STYLE_RANGES"}(nZ||(nZ={})),function(e){e[e.BOLD=0]="BOLD",e[e.CODE=1]="CODE",e[e.ITALIC=2]="ITALIC",e[e.STRIKETHROUGH=3]="STRIKETHROUGH",e[e.UNDERLINE=4]="UNDERLINE"}(rZ||(rZ={})),function(e){e.B="BOLD",e.CODE="CODE",e.I="ITALIC",e.S="STRIKETHROUGH",e.U="UNDERLINE"}(oZ||(oZ={})),function(e){e.MESSAGE="message",e.DONATION="donation"}(aZ||(aZ={}));var uZ=n(37803),dZ=function(){function e(e){var t,n,r=e.api,o=e.config,a=e.data,i=this;this.onRemove=function(){for(var e=i.api.blocks.getBlocksCount(),t=[],n=function(e){var n=i.api.blocks.getBlockByIndex(e);n&&n.name===pe.IMAGE&&t.push(new Promise((function(t){var r=e;n.save().then((function(e){e.data.uploadId===i.data.uploadId&&i.api.blocks.delete(r),t()}))})))},r=0;r<e;r++)n(r);Promise.all(t)},this.api=r,this.config=o,this.data=a,this.isUploading=!1,this.root=document.createElement("div"),this.root.classList.add(this.CSS.baseClass),this.uploader={uploadByFile:null===(n=null===(t=this.config)||void 0===t?void 0:t.uploader)||void 0===n?void 0:n.uploadByFile}}return e.prototype.rendered=function(){this.isUploading||this.data.complete||this.uploadImage(this.data)},Object.defineProperty(e.prototype,"CSS",{get:function(){return{baseClass:this.api.styles.block}},enumerable:!1,configurable:!0}),e.prototype.onUploadStart=function(){this.isUploading=!0,this.api.events.emit($J.UPLOAD_START,null)},e.prototype.onUploadEnd=function(){this.isUploading=!1,this.api.events.emit($J.UPLOAD_END,this.api)},e.prototype.uploadImage=function(e){var t,n,r,o=e.file,a=e.url;return t=this,void 0,r=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:this.data.uploadId=Qa(),t.label=1;case 1:return t.trys.push([1,3,,4]),this.onUploadStart(),e=this,[4,this.uploader.uploadByFile({uploadId:this.data.uploadId,file:o,url:a})];case 2:return e.data=t.sent(),this.onUploadEnd(),this.render(),[3,4];case 3:return t.sent(),this.onUploadEnd(),this.onRemove(),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}))},e.prototype.render=function(){return this.root.innerHTML=this.data.complete?(0,uZ.renderToStaticMarkup)(Gt.createElement(cZ,{isFromEditor:!0,url:this.data.url})):(0,uZ.renderToStaticMarkup)(Gt.createElement(KJ,{iconType:pe.IMAGE,fileName:this.data.file.name,size:this.data.file.size,isLoading:!0,isFromEditor:!0,error:this.data.error,onRemoveClick:this.onRemove})),this.root},e.prototype.save=function(){return this.data},e}(),fZ=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},mZ=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},pZ=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageBasePublisher.tools.AttachmentTool"),hZ=function(){function e(e){var t=e.api,n=e.config,r=e.data,o=this;this.onRemove=function(){o.uploader.isUploadCancelled=!0;for(var e=o.api.blocks.getBlocksCount(),t=[],n=function(e){var n=o.api.blocks.getBlockByIndex(e);n&&n.name===o.type&&t.push(new Promise((function(t){var r=e;n.save().then((function(e){e.data.id===o.data.id&&o.api.blocks.delete(r),t()}))})))},r=0;r<e;r++)n(r);Promise.all(t)},this.api=t,this.config=n,this.data=r,this.isUploading=!1,this.root=document.createElement("div"),this.root.classList.add(this.CSS.baseClass),this.root.classList.add(this.CSS.customClass)}return e.prototype.rendered=function(){!this.isUploading&&!this.data.complete&&this.data.size>0&&this.upload()},e.prototype.removed=function(){this.isUploading&&this.onUploadEnd(),this.uploader&&(this.uploader.isUploadCancelled=!0)},Object.defineProperty(e.prototype,"CSS",{get:function(){return{baseClass:this.api.styles.block,customClass:this.config.className}},enumerable:!1,configurable:!0}),e.prototype.upload=function(){return fZ(this,void 0,void 0,(function(){var e,t=this;return mZ(this,(function(n){switch(n.label){case 0:e=this.type===pe.AUDIO_FILE?Dd:this.type===pe.VIDEO_FILE?Gd:xd,this.uploader=new e({url:this.data.src,file:this.data.file,sessionId:this.data.id,onProgress:function(e){return t.updateProgress(e)},onSuccess:function(){return fZ(t,void 0,void 0,(function(){return mZ(this,(function(e){return[2,this.onSuccess()]}))}))},onError:function(){return t.onError(t.uploader.lastError)}}),n.label=1;case 1:return n.trys.push([1,3,,4]),this.onUploadStart(),[4,this.uploader.upload()];case 2:return n.sent(),[3,4];case 3:return n.sent(),this.onError(this.uploader.lastError),[3,4];case 4:return[2]}}))}))},e.prototype.updateProgress=function(e){this.data.uploadProgress=e,this.render()},e.prototype.onUploadStart=function(){this.isUploading=!0,this.api.events.emit($J.UPLOAD_START,null)},e.prototype.onUploadEnd=function(){this.isUploading=!1,this.api.events.emit($J.UPLOAD_END,this.api)},e.prototype.onSuccess=function(){return fZ(this,void 0,void 0,(function(){return mZ(this,(function(e){return this.data.complete=!0,this.config.onSuccess(this.data.title),this.render(),[2,this.onUploadEnd()]}))}))},e.prototype.onError=function(e){this.onUploadEnd(),this.config.onError(this.data.title,e),this.onRemove()},e.prototype.getHeaderText=function(){var e=this.type===pe.AUDIO_FILE?"audio":this.type;return this.data.uploadProgress&&100!==this.data.uploadProgress.percent?pZ.tools[e].loadingTitle:pZ.tools[e].title},e.prototype.render=function(){return this.root.innerHTML=(0,uZ.renderToStaticMarkup)(Gt.createElement(KJ,{iconType:this.type,fileName:this.data.title,size:this.data.size,progress:this.data.uploadProgress,error:this.error,isFromEditor:!0,onRemoveClick:this.onRemove})),this.root},e.prototype.save=function(){return this.data},e}(),vZ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gZ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=pe.FILE,t}return vZ(t,e),t}(hZ),yZ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=pe.AUDIO_FILE,t}return yZ(t,e),t}(hZ),EZ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bZ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=pe.VIDEO_FILE,t}return EZ(t,e),t.prototype.removed=function(){this.isUploading&&(this.config.onCancel(),this.isUploading=!1),this.uploader&&(this.uploader.isUploadCancelled=!0)},t.prototype.onUploadStart=function(){this.uploader.setExtraOptions({vid:this.data.videoId,videoId:this.data.id}),e.prototype.onUploadStart.call(this)},Object.defineProperty(t.prototype,"CSS",{get:function(){return{baseClass:this.api.styles.block,customClass:this.config.className,block:"VideoFileTool_block_cINo8"}},enumerable:!1,configurable:!0}),t.prototype.onSuccess=function(){return t=this,void 0,r=function(){var t,n,r,o,a,i,l,s,c,u,d,f;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),[4,this.config.uploadVideoFinish({id:this.data.id})];case 1:return t=m.sent(),n=t.url,r=t.vid,o=t.playerUrls,a=t.duration,i=t.preview,l=t.defaultPreview,s=t.previewId,c=t.id,u=t.timeCode,d=t.viewsCounter,f=t.showViewsCounter,this.data.src=n,this.data.videoId=r,this.data.playerUrls=o,this.data.duration=a,this.data.defaultPreview=l,this.data.preview=i,this.data.previewId=s,this.data.vid=r,this.data.id=c,this.data.timeCode=u,this.data.viewsCounter=d,this.data.showViewsCounter=f,[2,e.prototype.onSuccess.call(this)];case 2:return m.sent(),this.isUploading=!1,this.config.onError(this.data.title,null),this.onRemove(),[2,null];case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}));var t,n,r},t.prototype.render=function(){return this.data.complete?(Ht.render(Gt.createElement(sZ,{classNames:{root:this.CSS.block},iconType:this.type,fileName:this.data.title,src:this.data.src,size:this.data.size,progress:this.data.uploadProgress,error:this.error,isFromEditor:!0,onRemoveClick:this.onRemove,id:this.data.id,playerUrls:this.data.playerUrls,duration:this.data.duration,title:this.data.title,preview:this.data.preview,vid:this.data.vid,videoId:this.data.videoId,timeCode:this.data.timeCode,viewsCounter:this.data.viewsCounter,showViewsCounter:this.data.showViewsCounter,isSimple:!0}),this.root),this.root):e.prototype.render.call(this)},t}(hZ);const SZ="Attachments_attachment_kgD_3";var TZ,IZ=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},NZ=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},CZ=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},wZ=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageBasePublisher.components.Attachments"),OZ=function(e){var t,r=(void 0===e?{}:e).initialValue,o=CZ((0,Gt.useState)(r||[]),2),a=o[0],i=o[1],l=(t=(0,Vt.I0)(),{uploadImage:function(e){return t((0,dm.Ax)(WE.action)({image:e}))},createUploadFileContainer:function(){return t((0,dm.Ax)(jE.action)())},createUploadAudioContainer:function(){return t((0,dm.Ax)(zE.action)())},createUploadVideoContainer:function(e){var n=e.fileName;return t((0,dm.Ax)(YE.action)({fileName:n}))},uploadVideoFinish:function(e){var n=e.id;return t((0,dm.Ax)(KE.action)({id:n}))}}),s=Ok(a),c=jG().showAlert,u=(0,Gt.useRef)(null),d=(0,Gt.useRef)(null),f=(0,Gt.useRef)(0),m=CZ((0,Gt.useState)(!1),2),h=m[0],v=m[1],g=CZ((0,Gt.useState)(!1),2),y=g[0],_=g[1],E=CZ((0,Gt.useState)(!0),2),b=E[0],S=E[1],T=function(e){var t,n;null===(n=null===(t=d.current)||void 0===t?void 0:t.isReady)||void 0===n||n.then((function(){d.current.clear(),d.current.render(Xk(e))}))};(0,Gt.useEffect)((function(){d.current&&(((null==s?void 0:s.length)&&!a.length||y&&s!==a)&&T(a),S(a.every((function(e){return!("id"in e)||Boolean(e.id)}))))}),[a,s,y,T]);var I=function(e,t){void 0===t&&(t=!0),c({type:p.ERROR,text:e,isPermanent:t})},N=function(){f.current=f.current+1;var e=f.current>0;v(e)},C=function(){f.current=f.current-1;var e=f.current>0;v(e)},w=function(e){e&&function(e){c({type:p.SUCCESS,text:(0,Qr.getParametrizedText)(wZ.tools.common.uploadSuccess,{fileName:e})})}(e)},O=function(e,t){var n=nr().publisher.images.limits,r=n.maxSize,o=n.maxWidth,a=n.unit,i=(0,Qr.getParametrizedText)(wZ.tools.common.uploadError,{fileName:e});switch(t){case oe.IMAGE_SIZE_LIMIT:i+=" — ".concat((0,Qr.getParametrizedText)(wZ.errors.limitImageSize,{limit:Lo(r,a,Z.MB)}));break;case oe.IMAGE_WIDTH_LIMIT:i+=" — ".concat((0,Qr.getParametrizedText)(wZ.errors.limitImageWidth,{limit:o}));break;case oe.INVALID_FORMAT:i+=" - ".concat(wZ.errors.invalidFormat);break;case oe.NETWORK_ERROR:i+=" — ".concat(wZ.errors.network)}return i},A=function(e,t,n){var r,o=((r={})[pe.FILE]="files",r[pe.AUDIO_FILE]="audioFiles",r[pe.VIDEO_FILE]="videoFiles",r),a=nr(),i=o[e],l=a.publisher[i].limits,s=l.fileSize,c=l.unit,u=(0,Qr.getParametrizedText)(wZ.tools.common.uploadError,{fileName:t});switch(n){case Nd.FILE_SIZE_LIMIT:u+=(0,Qr.getParametrizedText)(wZ.errors.limitFileSize,{limit:Lo(s,c,Z.MB)});break;case Nd.NETWORK_ERROR:u+=wZ.errors.network}return u},P=function(e){var t=e.uploadId,n=e.file;return IZ(void 0,void 0,Promise,(function(){var e,r,o,a,i,s;return NZ(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,l.uploadImage({type:pe.IMAGE,data:n,uploadId:t})];case 1:return e=c.sent().image,r=e.id,o=e.url,w(),[2,{id:r,uploadId:t,url:o,file:n,complete:!0}];case 2:if(!((a=c.sent())instanceof Ar))throw I(O(n.name,oe.NETWORK_ERROR)),new Error(oe.NETWORK_ERROR);if((null===(i=a.serverError)||void 0===i?void 0:i.error)===ne.IMAGE_TOO_BIG)throw I(O(n.name,oe.IMAGE_SIZE_LIMIT)),new Error(O(n.name,oe.IMAGE_SIZE_LIMIT));if((null===(s=a.serverError)||void 0===s?void 0:s.error)===ne.WRONG_IMAGE_FORMAT)throw I(O(n.name,oe.INVALID_FORMAT)),new Error(O(n.name,oe.INVALID_FORMAT));if(null===a.serverError)throw I(O(n.name,oe.NETWORK_ERROR)),new Error(oe.NETWORK_ERROR);return[2,null];case 3:return[2]}}))}))};(0,Gt.useEffect)((function(){return IZ(void 0,void 0,Promise,(function(){var e,t,r;return NZ(this,(function(o){switch(o.label){case 0:return[4,n.e(943).then(n.t.bind(n,13943,23))];case 1:return e=o.sent().default,t={holder:u.current,tools:(r={},r[pe.IMAGE]={class:dZ,config:{uploader:{uploadByFile:P}}},r[pe.AUDIO_FILE]={class:_Z,config:{className:SZ,onSuccess:w,onError:function(e,t){I(A(pe.AUDIO_FILE,e,t))}}},r[pe.FILE]={class:gZ,config:{className:SZ,onSuccess:w,onError:function(e,t){I(A(pe.FILE,e,t))}}},r[pe.VIDEO_FILE]={class:bZ,config:{uploadVideoFinish:l.uploadVideoFinish,onSuccess:w,onCancel:C,onError:function(e,t){C(),I(A(pe.VIDEO_FILE,e,t))}}},r),data:Xk(a),onChange:function(e){return IZ(void 0,void 0,void 0,(function(){var t,n;return NZ(this,(function(r){switch(r.label){case 0:return Object.keys(d.current).length?(y&&_(!1),[4,e.saver.save()]):[2];case 1:return t=r.sent(),n=nD(t),i(n),[2]}}))}))}},d.current=new e(t),[4,d.current.isReady];case 2:return o.sent(),d.current.on($J.UPLOAD_START,N),d.current.on($J.UPLOAD_END,C),[2]}}))})),function(){d.current&&d.current.isReady.then((function(){d.current.destroy()}))}}),[]);var L=function(e){return function(){return IZ(void 0,void 0,void 0,(function(){var t,n,r,o,i,s,c,u,f;return NZ(this,(function(m){switch(m.label){case 0:return t=function(e){return e===pe.IMAGE?"image/*":e===pe.AUDIO_FILE?".mp3,.wav,.flac":e===pe.VIDEO_FILE?Cd()?"video/mp4,video/x-m4v,video/*":"video/*":(pe.FILE,null)}(e),[4,cD({multiple:!0,accept:t})];case 1:return n=m.sent(),r=a.length,e===pe.IMAGE?(o=nr().publisher.images.limits,i=o.checkWidth,s=o.maxWidth,c=o.maxSize,u=o.unit,Promise.all(Array.from(n).map((function(e,t){return IZ(void 0,void 0,void 0,(function(){var n,o,a,l,f,m;return NZ(this,(function(p){switch(p.label){case 0:return n=r+t,[4,Yd(e)];case 1:return((o=p.sent()).height>=s||o.width>=s)&&i?(I(O(e.name,oe.IMAGE_WIDTH_LIMIT)),[3,5]):[3,2];case 2:return ro(e.size,Z.B,u)>c?(I(O(e.name,oe.IMAGE_SIZE_LIMIT)),[3,5]):[3,3];case 3:return[4,Qd(e)];case 4:a=p.sent(),l=a.file,f=a.url,null===(m=d.current)||void 0===m||m.blocks.insert(pe.IMAGE,{url:f,file:l,complete:!1},{},n),p.label=5;case 5:return[2]}}))}))})))):e===pe.AUDIO_FILE||e===pe.FILE?(f=e===pe.AUDIO_FILE?l.createUploadAudioContainer:l.createUploadFileContainer,Promise.all(Array.from(n).map((function(t,n){return IZ(void 0,void 0,void 0,(function(){var o,a,i,l,s,c,u;return NZ(this,(function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),o=r+n,c=t.name,a=t.size,[4,f()];case 1:return i=m.sent().container,l=i.id,s=i.url,null===(u=d.current)||void 0===u||u.blocks.insert(e,{id:l,src:s,title:c,size:a,file:t,complete:!1},{},o),[3,3];case 2:return m.sent(),c=t.name,I(A(e,c)),[3,3];case 3:return[2]}}))}))})))):e===pe.VIDEO_FILE&&Promise.all(Array.from(n).map((function(t,n){return IZ(void 0,void 0,void 0,(function(){var o,a,i,s,c,u,f,m;return NZ(this,(function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),f=t.name,o=t.size,a=r+n,[4,l.createUploadVideoContainer({fileName:t.name})];case 1:return i=p.sent().container,s=i.id,c=i.url,u=i.videoId,null===(m=d.current)||void 0===m||m.blocks.insert(e,{id:s,videoId:u,src:c,title:f,size:o,file:t,complete:!1},{},a),[3,3];case 2:return p.sent(),f=t.name,I(A(e,f)),[3,3];case 3:return[2]}}))}))}))),[2]}}))}))}},R=(0,Gt.useCallback)((function(){var e,t,n=null===(e=d.current)||void 0===e?void 0:e.blocks.getCurrentBlockIndex();null===(t=d.current)||void 0===t||t.blocks.delete(n)}),[]),k=(0,Gt.useCallback)((function(e){e.preventDefault()}),[]);return{attachments:a,areAttachmentsReady:!h&&b,attach:function(e){return IZ(void 0,void 0,void 0,(function(){return NZ(this,(function(t){return[2,L(e)()]}))}))},clearAttachments:function(){i([]),T([])},renderAttachments:function(e){void 0===e&&(e={classNames:{}});var t=(e||{}).classNames;return Gt.createElement("div",{className:cG()("Attachments_containerAttachments_PoXJx",t.root)},Gt.createElement("div",{onKeyDown:k,onClick:R,ref:u,className:cG()("Attachments_attachments_g7nno",t.inner)}))}}},AZ=function(e){var t=e.className,n=e.data,r=e.onVideoClick;return Gt.createElement("div",{className:cG()(t,"VideoFile_container_bw9tB"),style:{backgroundImage:"url(".concat(n.preview,")"),padding:0},onClick:function(e){e.stopPropagation(),r(n.id)}},Gt.createElement("div",{className:"VideoFile_previewInner_p_Odj"},Gt.createElement(pB,{glyph:hB.WF9,className:"VideoFile_icon_voUmL"})))},PZ=(0,Gt.createContext)(null),LZ=function(){return(0,Gt.useContext)(PZ)},RZ=function(e){var t,n=e.data,r=e.isPaidMessageContentFromCurrentUser,o=void 0!==r&&r,a=LZ()||{},i=a.signedQuery,l=a.onVideoClick,s=a.isCurrentUserMessage,c=a.message,u=Wd(),d=((t={}).Messages_isOurMessage_BLEAE=s,t.Messages_isPaidMessageContentFromCurrentUser_lwjCW=o,t);return Gt.createElement(BJ,{data:n,signedQuery:i,classNames:{audioFile:{root:cG()(d,"Messages_audioPlayer_enrWj",u===b.MESSAGE_PREVIEW&&"Messages_audioPlayerInPreview_VMfz5"),track:u===b.MESSAGE_PREVIEW&&"Messages_audioPlayerTrackInPreview_Q4kTN",time:u===b.MESSAGE_PREVIEW&&"Messages_audioPlayerTimeInPreview_w7TsP",iconDownload:!s&&"Messages_audioPlayerIconDownload_A3oqM"}},overridingProps:{audioFile:{showDownload:u!==b.MESSAGE_PREVIEW}},renderImageBlock:function(e){var t=e.block;return Gt.createElement(GJ,{className:cG()(d,"Messages_imageBlock_SAJN_"),messageId:null==c?void 0:c.id,imageId:t.id,src:t.url,isMobile:!1})},renderFileBlock:function(e){var t=e.block;return Gt.createElement(KJ,{classNames:{root:cG()(d),block:o&&"Messages_fileBlock_NfOC3",info:o&&"Messages_fileInfo_Ut37T",link:o&&"Messages_fileLink_wG_oY",linkIcon:s?"Messages_fileLinkIconLight_EUiNv":"Messages_fileLinkIconDark_pSzsd"},iconType:pe.FILE,signedQuery:i,fileName:t.title,progress:t.uploadProgress,size:t.size,src:t.url})},renderVideoFileBlock:function(e){var t=e.block;return Gt.createElement(AZ,{className:cG()(d,"Messages_videoFile_e5lF6",u===b.MESSAGE_PREVIEW&&"Messages_videoPlayerPreview_C78nB"),onVideoClick:function(){return l(t.id,n)},data:{url:t.url,playerUrls:t.playerUrls,title:t.title,vid:t.vid,id:t.id,preview:t.preview,duration:t.duration,timeCode:t.timeCode,viewsCounter:t.viewsCounter,showViewsCounter:t.showViewsCounter}})}})},kZ=(0,Qr.getTranslation)("@boosty/common/components.Messages.PriceMessage"),DZ=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.isPaid,o=void 0!==r&&r,a=e.isGlobal,i=void 0===a||a,l=e.price,s=e.currency,c=Vr({amount:l,currency:s,useGrouping:!0}),u=o?kZ.paidHint:"";return Gt.createElement(Dx,{isGlobal:i,classNames:{content:"PriceMessage_content_G3THu",root:n.tooltip,childrenWrapper:n.childrenWrapper},content:u},Gt.createElement("div",{className:cG()("PriceMessage_container_xtBwx",o?"PriceMessage_paid_Z6r3f":"PriceMessage_notPaid_InKoo",n.root)},Gt.createElement("div",{className:cG()("PriceMessage_price_HwhBq",n.price)},c),o&&Gt.createElement("div",{className:"PriceMessage_iconContainer_FUShF"},Gt.createElement(pB,{glyph:hB.zfo,className:"PriceMessage_icon_icMby"}))))};!function(e){e.SENDING="sent",e.READ="read",e.NOT_READ="notRead",e.DELETED="deleted",e.ERROR="error"}(TZ||(TZ={}));var UZ,BZ=((UZ={})[TZ.SENDING]=hB.qSk,UZ[TZ.NOT_READ]=hB.t7c,UZ[TZ.READ]=hB.rPi,UZ[TZ.DELETED]=hB.FJo,UZ[TZ.ERROR]=hB.FCX,UZ),xZ=function(e){var t,n=e.className,r=(t=e.message).isDeleted?TZ.DELETED:t.isSending?TZ.SENDING:t.isSendingError?TZ.ERROR:t.isRead?TZ.READ:TZ.NOT_READ,o=BZ[r],a=[TZ.SENDING,TZ.DELETED].includes(r)?"StatusMessage_disable_AfaQV":"StatusMessage_status_WdAJM";return Gt.createElement(pB,{className:cG()("StatusMessage_icon_Yaz6J",n,a),glyph:o})},MZ=function(){var e,t=LZ(),n=t.message,r=t.isCurrentUserMessage,o=nr().currencies.default,a=n.isPaid,i=n.price,l=n.createdAt,s=go(l,"HH/mm");return Gt.createElement("div",{className:cG()("DialogueMessageInfo_root_Z7UbH",(e={},e.DialogueMessageInfo_currentUserMessage_rbkTB=r,e))},Gt.createElement("div",{className:"DialogueMessageInfo_time_olZOa"},s),r&&Gt.createElement(Gt.Fragment,null,Gt.createElement(xZ,{className:"DialogueMessageInfo_statusMessage_qWOa5",message:n}),i>0&&Gt.createElement(DZ,{price:i,isPaid:a,currency:o})))},FZ=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMessages.components.DialogueMessageItem.components.DeletedMessage"),GZ=function(){var e=LZ(),t=e.message,n=e.isCurrentUserMessage;return Gt.createElement("div",{className:"DeletedMessage_root_lxIfW"},Gt.createElement(xZ,{className:"DeletedMessage_deleteIcon_tPRsd",message:t}),n?FZ.deletedMe:FZ.deleted)},HZ=function(e){var t,n,r=e.classNames,o=void 0===r?{}:r,a=e.isSelected,i=e.onMessageClick,l=e.children,s=e.isVisibleAvatar,c=e.isDonationAlertMessage,u=LZ(),d=u.message,f=d.id,m=d.isDeleted,p=d.isSending,h=d.isSendingError,v=u.chatMate,y=u.isCurrentUserMessage,_=s||y;return Gt.createElement("div",{onClick:function(e){var t="A"===e.target.nodeName;!(m||h||p||t)&&i(f)},className:cG()(o.root,y?"DialogueMessageWrapper_containerCurrentUser_fDiYM":"DialogueMessageWrapper_containerChatMate_G0eA5",_?"DialogueMessageWrapper_lastMessage_tgNcw":"","DialogueMessageWrapper_root_ZsQR0",(t={},t.DialogueMessageWrapper_selected_C_Mue=a,t.DialogueMessageWrapper_deleted_yP1oj=m,t.DialogueMessageWrapper_containerDonation_k2BRQ=c,t))},!y&&Gt.createElement(PB,{className:cG()("DialogueMessageWrapper_avatar_v2kN4",(n={},n.DialogueMessageWrapper_hiddenAvatar_iChFO=!s,n)),img:null==v?void 0:v.avatarUrl,size:g.S}),Gt.createElement("div",{className:cG()("DialogueMessageWrapper_message_TuB4S",o.content)},Gt.createElement("div",{className:"DialogueMessageWrapper_content_v5KC4"},l,_&&Gt.createElement(pB,{className:cG()("DialogueMessageWrapper_corner_CeM1b",y?"DialogueMessageWrapper_cornerRight_WIGYn":"DialogueMessageWrapper_cornerLeft_wDeoc"),glyph:hB.WON}))))};const WZ={root:"DonationMessageInfo_root_u6VSJ",iconDonation:"DonationMessageInfo_iconDonation_aOL5W",donationInfo:"DonationMessageInfo_donationInfo_igBxK",fadeIn:"DonationMessageInfo_fadeIn_gX7Ld"};var VZ=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMessages.components.DialogueMessageItem.components.DonationMessage.components.DonationMessageInfo"),jZ=function(e){var t=e.isCurrentUserMessage,n=e.chatMate,r=e.donation,o=e.blogUrl,a=nr().currencies.default,i=(0,Vt.v9)(EA),l=t?i:a,s=Boolean(r.post);return Gt.createElement("div",{className:WZ.root},Gt.createElement(pB,{glyph:hB.iMT,className:WZ.iconDonation}),Gt.createElement("div",{className:WZ.donationInfo},s?(0,Qr.getReactText)((0,Qr.getParametrizedText)(VZ.post[t?"sent":"received"],{amount:Vr({amount:r.amount,currency:l})}),{Link:function(e){var a=e.text;return Gt.createElement(cM,{className:WZ.linkPost,to:(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:t?n.url:o,postId:r.post.id})},a)}}):(0,Qr.getParametrizedText)(VZ.common[t?"sent":"received"],{amount:Vr({amount:r.amount,currency:l})})))},zZ=function(){var e=LZ(),t=e.message,n=t.donation,r=t.data,o=e.isCurrentUserMessage,a=e.chatMate,i=e.blogUrl;return Gt.createElement(Gt.Fragment,null,Gt.createElement(jZ,{donation:n,blogUrl:i,isCurrentUserMessage:o,chatMate:a}),Gt.createElement(RZ,{data:r}))},YZ=function(e){var t=e.icon,n=e.title,r=e.counter,o=e.preview,a=o?Bo({url:o,width:200,height:200,isCroped:!1}):null,i=a?{backgroundImage:"url(".concat(a,")")}:null;return Gt.createElement("div",{className:"PaidMessageAttachmentPreview_root_sdcjX",style:i},Gt.createElement("div",{className:"PaidMessageAttachmentPreview_content_bVavg"},Gt.createElement("div",{className:"PaidMessageAttachmentPreview_info_WvfCg"},Gt.createElement(pB,{glyph:t,className:"PaidMessageAttachmentPreview_icon_ioTAg"}),Gt.createElement("div",{className:"PaidMessageAttachmentPreview_counter_sZZca"},r)),Gt.createElement("div",{className:"PaidMessageAttachmentPreview_caption_p_W5J"},n)),Gt.createElement("div",{className:"PaidMessageAttachmentPreview_overlay_ha73l"}))},KZ=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMessages.components.DialogueMessageItem.components.PaidMessage.components.ContentToBePaidOverview.components.DialogueMessagePaidPreview"),qZ=function(e){var t=e.attachments,n=t.audios,r=t.files,o=t.images,a=t.videos,i=t.text,l=n.count>0,s=r.count>0,c=o.count>0,u=a.count>0,d=i.count>0,f=l||s||c||u;return Gt.createElement(Gt.Fragment,null,d&&Gt.createElement("div",{className:"DialogueMessagePaidPreview_text_e3pIi"},KZ.text),f&&Gt.createElement("div",{className:"DialogueMessagePaidPreview_attachmentsHidden_JF_j6"},l&&Gt.createElement(YZ,{icon:hB.PWQ,counter:n.count,title:KZ.audio}),s&&Gt.createElement(YZ,{icon:hB.XhR,counter:r.count,title:KZ.files}),c&&Gt.createElement(YZ,{icon:hB.Zay,counter:o.count,title:KZ.images,preview:o.previewUrl}),u&&Gt.createElement(YZ,{icon:hB.OiJ,counter:a.count,title:KZ.videos,preview:a.previewUrl})))},XZ=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMessages.components.DialogueMessageItem.components.PaidMessage.components.ContentToBePaidOverview"),QZ=function(){var e=LZ().message,t=e.price,n=e.attachments,r=(0,Vt.v9)(EA),o=Vr({amount:t,currency:r,useGrouping:!0}),a=function(){var e=LZ(),t=e.message,n=e.userId,r=t.dialogId,o=Mf();return function(){var e=r?{dialogId:r}:{userId:n},a=(0,Yt.getParametrizedUrl)(ir.BLOG_MESSAGE_SINGLE_PAYMENT,{paymentPurposeType:Ce.MESSAGE,paymentPurposeId:t.id},e);o(a,{state:{from:nn.MESSAGE}})}}();return Gt.createElement("div",{className:"ContentToBePaidOverview_root_kvL86"},Boolean(n)&&Gt.createElement(qZ,{attachments:n}),Gt.createElement(FB,{className:"ContentToBePaidOverview_button_xO_Wa",onClick:function(e){e.stopPropagation(),a()}},(0,Qr.getParametrizedText)(XZ.paidButton,{price:o})))},JZ=function(){var e=LZ().message.teaser;return Gt.createElement(RZ,{data:e})};const ZZ={paidAttachments:"PaidMessageFromCurrentUserContent_paidAttachments__UBcq",fadeIn:"PaidMessageFromCurrentUserContent_fadeIn_Cy44F"};var $Z=function(){var e=function(e){var t=[],n=[],r=[];return null==e||e.forEach((function(e){!function(e){return oa(e)||ra(e)}(e)?e.type===pe.AUDIO_FILE?n.push(e):r.push(e):t.push(e)})),{inlineData:t,audioAttachments:n,restAttachments:r}}(LZ().message.data),t=e.inlineData,n=e.audioAttachments,r=e.restAttachments;return Gt.createElement(Gt.Fragment,null,t.length>0&&Gt.createElement(RZ,{data:t,isPaidMessageContentFromCurrentUser:!0}),r.length>0&&Gt.createElement("div",{className:ZZ.paidAttachments},Gt.createElement(RZ,{data:r,isPaidMessageContentFromCurrentUser:!0})),n.length>0&&Gt.createElement("div",{className:ZZ.paidAttachmentsAudio},Gt.createElement(RZ,{data:n,isPaidMessageContentFromCurrentUser:!0})))},e$=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMessages.components.DialogueMessageItem.components.PaidMessage"),t$=function(){return Gt.createElement("div",{className:"PaidMessage_paidContentCaption_I8dOC"},Gt.createElement(pB,{glyph:hB.Wal,className:"PaidMessage_icon__zRh5"}),e$.paidContent)},n$=function(){var e=LZ(),t=e.message,n=e.isCurrentUserMessage,r=t.data,o=t.isPaid;return n?Gt.createElement(Gt.Fragment,null,Gt.createElement(JZ,null),Gt.createElement(t$,null),Gt.createElement($Z,null)):o?Gt.createElement(Gt.Fragment,null,Gt.createElement(JZ,null),Gt.createElement(RZ,{data:r})):Gt.createElement(Gt.Fragment,null,Gt.createElement(JZ,null),Gt.createElement(t$,null),Gt.createElement(QZ,null))},r$=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.isSelected,o=e.blogUrl,a=e.chatMate,i=e.userId,l=e.signedQuery,s=e.message,c=e.onMessageClick,u=e.onVideoClick,d=e.isVisibleAvatar,f=void 0===d||d,m=i===s.authorId,p=s.donation,h=s.data,v=s.isDeleted,g=s.price>0,y=Boolean(p),_=(0,Gt.useMemo)((function(){return{message:s,blogUrl:o,chatMate:a,isCurrentUserMessage:m,signedQuery:l,onVideoClick:u,userId:i}}),[JSON.stringify(s)]);return Gt.createElement(PZ.Provider,{value:_},Gt.createElement(HZ,{onMessageClick:c,isSelected:r,isVisibleAvatar:f,isDonationAlertMessage:!m&&y,classNames:n},v?Gt.createElement(GZ,null):Gt.createElement(Gt.Fragment,null,y?Gt.createElement(zZ,null):g?Gt.createElement(n$,null):Gt.createElement(RZ,{data:h}),Gt.createElement(MZ,null))))},o$=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.PreviewMessagePopup"),a$=function(e){var t=e.classNames,n=e.message,r=e.onClose,o=(0,Vt.v9)(XO),a={hasAvatar:Boolean(o.avatarUrl),name:o.name,id:o.id,avatarUrl:o.avatarUrl,url:o.blogUrl,isBlogger:!0};return Gt.createElement(Hd.Provider,{value:b.MESSAGE_PREVIEW},Gt.createElement(PM,{classNames:t,title:o$.title,onClose:r},Gt.createElement("div",{className:"PreviewMessagePopup_description_Bwxyy"},o$.description),Gt.createElement("div",{className:"PreviewMessagePopup_messageContainer_Po77K"},Gt.createElement(r$,{classNames:{root:"PreviewMessagePopup_messageItem_HEfOG",content:"PreviewMessagePopup_messageContent_FR6tG"},chatMate:a,message:n,isVisibleAvatar:!0,signedQuery:null,isSelected:!1,blogUrl:o.blogUrl,userId:o.id})),Gt.createElement("div",{className:"PreviewMessagePopup_footer_MRJrk"},Gt.createElement(HB,{onClick:r},o$.close))))};const i$={spinnerContainer:"PrivacyPolicyUpdatesPopup_spinnerContainer_ey1NF",link:"PrivacyPolicyUpdatesPopup_link_D0t1K",checkbox:"PrivacyPolicyUpdatesPopup_checkbox_fvUwz",content:"PrivacyPolicyUpdatesPopup_content_S5Zpz",fadeIn:"PrivacyPolicyUpdatesPopup_fadeIn_b2f43"};var l$=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.PrivacyPolicyUpdatesPopup"),s$=function(e){var t=e.classNames,n=void 0===t?{}:t,r=function(e){var t=e.onClose,n=nr(),r=n.offer,o=r.userAgreement.url,a=r.paymentTerms.url,i=n.privacyPolicy,l=i.changeList,s=l.en,c=l.ru,u=i.acceptVersion,d=n.locale,f=n.isLazyLoadingOffersEnable,m=Ka(d),p=(0,Vt.I0)(),h=(0,Vt.v9)(ZR)[m],v=h.data,g=h.networkStatus,y=d===ce.RU,_=f?v:y?c:s,E=(!_||!g.isFetched)&&f,b=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),S=b[0],T=b[1];return(0,Gt.useEffect)((function(){!_&&f&&p((0,dm.Ax)(hT.action)({offerType:at.PRIVACY_POLICY_CHANGE_LIST,lang:m}))}),[]),{isLoading:E,isAgree:S,text:_,userAgreementUrl:o,paymentTermsUrl:a,setIsAgree:T,onAcceptClick:function(){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,p((0,dm.Ax)(ig.action)({acceptVersion:u}))];case 1:return e.sent(),t(),bd.log.acceptPolicy.acceptClick(),[2]}}))},new((e=void 0)||(e=Promise))((function(t,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?t(n.value):(r=n.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var e,n},onLinkClick:function(e){return e.stopPropagation()}}}({onClose:e.onClose}),o=r.isLoading,a=r.isAgree,i=r.text,l=r.userAgreementUrl,s=r.paymentTermsUrl,c=r.setIsAgree,u=r.onAcceptClick,d=r.onLinkClick;return Gt.createElement(PM,{title:l$.title,classNames:{block:n.block,content:cG()(i$.content),footer:n.footer},isHiddenClose:!0,footer:Gt.createElement(FB,{className:cG()(i$.acceptButton),onClick:u,isDisabled:!a},l$.acceptButtonText)},o?Gt.createElement("div",{className:i$.spinnerContainer},Gt.createElement(uM,null)):Gt.createElement(Gt.Fragment,null,Gt.createElement(Cf,null,Vo.decode(i)),Gt.createElement(VM,{checkboxClassName:i$.checkbox,onToggle:c,label:Gt.createElement(Gt.Fragment,null,l$.agree," ",Gt.createElement("a",{className:i$.link,href:l,target:"_blank",rel:"noreferrer",onClick:d},l$.userAgreement)," ",Gt.createElement("a",{className:i$.link,href:s,target:"_blank",rel:"noreferrer",onClick:d},l$.paymentTerms)," ",Gt.createElement("a",{className:i$.link,href:ir.OFFERS_PRIVACY_POLICY,target:"_blank",rel:"noreferrer",onClick:d},l$.privacyPolicy)," ".concat(l$.and," "),Gt.createElement("a",{className:i$.link,href:ir.OFFERS_COOKIE_POLICY,target:"_blank",rel:"noreferrer",onClick:d},l$.cookiePolicy))})))},c$=n(72282);const u$={footer:"RssLinkPopup_footer_T7hRZ",content:"RssLinkPopup_content_z1tbv",title:"RssLinkPopup_title_fvZY3",linkTitle:"RssLinkPopup_linkTitle_TR6XO",descriptionBlock:"RssLinkPopup_descriptionBlock_T2YkL",descriptionIconWrapper:"RssLinkPopup_descriptionIconWrapper_Fc5qB",descriptionText:"RssLinkPopup_descriptionText_CxFgF",author:"RssLinkPopup_author_sx3bN",micIcon:"RssLinkPopup_micIcon_te5uM",rssIcon:"RssLinkPopup_rssIcon_wIprG",text:"RssLinkPopup_text_SwLoc",popup:"RssLinkPopup_popup_lcOoF",popupHeader:"RssLinkPopup_popupHeader_JOb1t",copyButton:"RssLinkPopup_copyButton_FvWj_",disabled:"RssLinkPopup_disabled_kQWWZ",iconCopy:"RssLinkPopup_iconCopy_cnlJc",inputWrapper:"RssLinkPopup_inputWrapper_DtKe3",input:"RssLinkPopup_input_QzLfH",note:"RssLinkPopup_note_G17os",warning:"RssLinkPopup_warning__DbLy",moreInformationLink:"RssLinkPopup_moreInformationLink_Lc8Fi",caution:"RssLinkPopup_caution_h2ipC",cautionIcon:"RssLinkPopup_cautionIcon_ivQjG",fadeIn:"RssLinkPopup_fadeIn_HhOIj"};var d$=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.RssLinkPopup"),f$=function(e){var t=e.blogUrl,n=e.authorName,r=nr().isMobile,o=function(e){var t=e.blogUrl,n=(0,Vt.I0)(),r=(0,Vt.v9)(uO),o=r.data,a=r.meta;return{fetchRssLink:function(){return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,n((0,dm.Ax)(_y)({blogUrl:t}))];case 1:return e.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function o(e){try{i(r.next(e))}catch(e){n(e)}}function a(e){try{i(r.throw(e))}catch(e){n(e)}}function i(n){var r;n.done?t(n.value):(r=n.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var e,r},rssLink:null==o?void 0:o.url,isRssLinkFetching:a.networkStatus.isFetching,isError:Boolean(a.networkStatus.error)}}({blogUrl:t}),a=o.fetchRssLink,i=o.isError,l=o.isRssLinkFetching,s=o.rssLink;(0,Gt.useEffect)((function(){a()}),[]);var c=function(){e.showAlert({type:p.SUCCESS,text:d$.copied,timeout:1500})},u=function(){var e;return Gt.createElement(c$,{text:s,onCopy:c},Gt.createElement(VB,{className:cG()(u$.copyButton,(e={},e[u$.disabled]=l,e))},Gt.createElement(pB,{glyph:hB.vUr,className:u$.iconCopy}),d$.copy))};return Gt.createElement(PM,{onClose:e.onClose,footer:Gt.createElement("div",{className:u$.footer},Gt.createElement(FB,{onClick:e.onClose},d$.close)),classNames:{block:u$.popup,title:u$.popupHeader},title:Gt.createElement("div",{className:u$.title},Gt.createElement(pB,{glyph:hB.o0A,className:u$.rssIcon}),Gt.createElement("span",null,d$.title))},Gt.createElement("div",{className:u$.content},Gt.createElement("div",{className:u$.descriptionBlock},Gt.createElement("div",{className:u$.descriptionIconWrapper},Gt.createElement(pB,{glyph:hB.lE5,className:u$.micIcon})),Gt.createElement("div",{className:u$.descriptionText},(0,Qr.getReactText)(d$.description,{AuthorName:function(){return Gt.createElement("span",{className:u$.author},n)}}))),Gt.createElement("div",{className:u$.linkBlock},Gt.createElement("div",{className:u$.linkTitle},d$.linkTitle),Gt.createElement(Zx,{error:i&&d$.linkError,disabled:!0,value:l?"":s,bottomElement:r&&u(),rightElement:!r&&u(),className:u$.inputWrapper,classNameInput:u$.input,isErrorInFlow:!0})),Gt.createElement("div",{className:u$.caution},Gt.createElement(pB,{glyph:pk.Ucq,className:u$.cautionIcon}),Gt.createElement("span",null,d$.dontShowLink)),Gt.createElement("div",{className:u$.note},d$.note),Gt.createElement("div",{className:cG()(u$.note,u$.warning)},d$.warning)))},m$=function(e){var t,n=e.hasError,r=e.warningText,o=e.className,a=e.children;return Gt.createElement("div",{className:cG()("MessagePublisherWarningWrapper_root_gythn",o,(t={},t.MessagePublisherWarningWrapper_error_K8zn4=n,t))},n&&Gt.createElement("div",{className:"MessagePublisherWarningWrapper_warning_sG1Y1"},Gt.createElement(pB,{glyph:pk.FCX,className:"MessagePublisherWarningWrapper_iconWarning_VjVok"}),r),a)},p$=function(e){return"BR"===(null==e?void 0:e.nodeName)},h$=function(e,t){void 0===t&&(t={});var n=t.fromParent;if(0!==window.getSelection().rangeCount){var r=window.getSelection().getRangeAt(0),o=r.cloneRange();o.selectNodeContents(e),o.setEnd(r.endContainer,r.endOffset);var a=0;if(n){for(var i=Array.from(e.parentNode.childNodes);i[a]!==e&&a<i.length;)a++;a++}else a=o.cloneContents().childNodes.length;var l=r.endOffset,s=e.parentNode.parentNode.parentNode,c=e.parentNode.parentNode,u=Array.prototype.indexOf.call(s.children,c);return{itemIndex:a,offset:l,breakItems:Array.prototype.slice.call(s.children,0,u).reduce((function(e,t){return e+Array.from(t.children[0].children[0].childNodes).filter((function(e,t,n){return!p$(e)||!p$(n[t-1])})).length}),0),blockIndex:u}}return{itemIndex:0,offset:0,breakItems:0,blockIndex:0}},v$=function(e){return"SPAN"===e.nodeName&&e.classList.contains("mention")},g$=function(){var e=0,t=window.getSelection();if(t.rangeCount){var n=t.getRangeAt(0),r=function(t){t.nodeType===Node.TEXT_NODE?e+=t.textContent.length:t.childNodes.forEach(r)};n.startContainer.parentElement.childNodes.forEach(r)}return e};function y$(e){var t=window.getSelection();if(t.rangeCount){var n=document.createElement("template");n.innerHTML=e,t.deleteFromDocument(),t.getRangeAt(0).insertNode(n.content),t.collapseToEnd()}}const _$="Publisher_inlineActions_XyozT";var E$=function(){return E$=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},E$.apply(this,arguments)},b$=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},S$=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},T$=null,I$=Gt.forwardRef((function(e,t){var o,a,i,l=e.inlineData,s=e.editorData,c=e.editorTools,u=e.placeholder,d=e.isDisabled,f=e.isWide,m=e.isSubmitButtonDisabled,p=e.isSubmitButtonActive,h=e.classNames,v=void 0===h?{}:h,g=e.submitIcon,y=void 0===g?hB.h9l:g,_=e.hasSubmitButton,E=void 0===_||_,b=e.hasAutoFocus,S=e.hasError,T=e.smilesSize,I=void 0===T?Ue.L:T,N=e.publishingShortcut,C=e.canPublish,w=void 0===C||C,O=e.renderActionsLeft,A=e.renderActionsRight,P=e.isInlineActions,L=void 0!==P&&P,R=e.onInlineDataChange,k=e.onKeyDown,D=e.onPublish,U=(0,Vt.I0)(),B=(0,Gt.useRef)(),x=(0,Gt.useRef)(null),M=(0,Gt.useRef)(d),F=(0,Gt.useRef)({itemIndex:0,offset:0,breakItems:0,blockIndex:0}),G=Ok(s),H=(0,Gt.useRef)(!1),W=Ok(u),V=function(){return b$(void 0,void 0,Promise,(function(){var e,t;return S$(this,(function(n){switch(n.label){case 0:return document.querySelectorAll("deepl-inline-translate").forEach((function(e){return e.remove()})),[4,x.current.save()];case 1:return e=n.sent(),(t=e.blocks[e.blocks.length-1])&&"paragraph"===t.type&&""===t.data.text&&(e.blocks=e.blocks.slice(0,-1)),[2,nD(e)]}}))}))},j=function(){null==D||D(l)};(0,Gt.useImperativeHandle)(t,(function(){return{focus:function(){return b$(void 0,void 0,void 0,(function(){var e,t,n;return S$(this,(function(r){switch(r.label){case 0:return x.current?(null===(e=x.current)||void 0===e?void 0:e.focus)?(null===(t=x.current)||void 0===t||t.focus(!0),[3,3]):[3,1]:[2];case 1:return[4,x.current.isReady];case 2:r.sent(),null===(n=x.current)||void 0===n||n.focus(!0),r.label=3;case 3:return[2]}}))}))},scrollIntoView:function(){var e;null===(e=B.current)||void 0===e||e.scrollIntoView(Zd("nearest"))},getEditorData:V,publish:j,reInitEditorJS:K,editorJs:x.current,editorWrapper:B.current,cursor:F.current}})),(0,Gt.useEffect)((function(){return Y(),function(){q(),clearTimeout(T$)}}),[]);var z=function(){var e,t,n,r,o,a,i,l,s,c,u,d=B.current.querySelectorAll(".ce-paragraph.cdx-block");if(d.length){var f=d[null!==(t=null===(e=F.current)||void 0===e?void 0:e.blockIndex)&&void 0!==t?t:d.length-1];n=f,o=(r=F.current).itemIndex,a=r.offset,i=r.blockIndex,l=document.createRange(),s=window.getSelection(),function(e){return"#text"===(null==e?void 0:e.nodeName)}(u=(c=n.parentNode.parentNode.parentNode.children[i].children[0].children[0]).childNodes.item(o))?(l.setStart(u,a),l.setEnd(u,a)):u?(l.setEndAfter(u),l.setStartAfter(u)):l.selectNodeContents(c),l.collapse(!1),s.removeAllRanges(),s.addRange(l),c.focus(),F.current=h$(f)}};(0,Gt.useEffect)((function(){s!==G&&x.current&&x.current.isReady.then((function(){var e;null===(e=x.current)||void 0===e||e.clear(),(null==s?void 0:s.length)&&(x.current.render(Xk(s,{smileSize:I})),setTimeout(z)),R(s)}))}),[s,G]),(0,Gt.useEffect)((function(){if(W&&u!==W){clearTimeout(T$);var e=function(){H.current?K():T$=window.setTimeout(e,50)};e()}}),[u]),(0,Gt.useEffect)((function(){var e;null===(e=x.current)||void 0===e||e.isReady.then((function(){var e,t;null===(t=null===(e=x.current)||void 0===e?void 0:e.readOnly)||void 0===t||t.toggle(d)})),M.current=d}),[d]);var Y=function(){return b$(void 0,void 0,Promise,(function(){var e,t;return S$(this,(function(r){switch(r.label){case 0:return[4,n.e(943).then(n.t.bind(n,13943,23))];case 1:return e=r.sent().default,t={holder:B.current,placeholder:u,data:Xk(s,{smileSize:I}),inlineToolbar:!1,readOnly:d,tools:c,onChange:function(){return b$(void 0,void 0,void 0,(function(){var e;return S$(this,(function(t){switch(t.label){case 0:return!Object.keys(x.current).length||M.current?[2]:[4,V()];case 1:return e=t.sent(),R(e),[2]}}))}))}},x.current=new e(t),[4,x.current.isReady];case 2:return r.sent(),H.current=!0,b&&x.current.focus(!0),[2]}}))}))},K=function(){return b$(void 0,void 0,void 0,(function(){return S$(this,(function(e){switch(e.label){case 0:return[4,q()];case 1:return e.sent(),[4,Y()];case 2:return e.sent(),[2]}}))}))},q=function(){return b$(void 0,void 0,void 0,(function(){var e;return S$(this,(function(t){switch(t.label){case 0:return x.current?[4,x.current.isReady]:[3,2];case 1:t.sent(),null===(e=x.current)||void 0===e||e.destroy(),t.label=2;case 2:return[2]}}))}))},X=(0,Vt.v9)(aR),Q=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),J=Q[0],Z=Q[1],$=(0,Vt.v9)(iR),ee=Gt.useRef([]),te=(0,LF.YF)({open:J,middleware:[(0,kF.cv)(5),(0,kF.dp)({apply:function(e){var t=e.rects,n=e.elements;Object.assign(n.floating.style,{width:"".concat(t.reference.width,"px")})}}),(0,kF.uY)()],whileElementsMounted:RF.Me,placement:"top"}),ne=te.x,re=te.y,oe=te.refs,ae=te.strategy,ie=te.context,le=(0,LF.eS)(ie,{keyboardHandlers:!1}),se=(0,LF.bQ)(ie),ce=(0,LF.qs)(ie,{role:"listbox"}),ue=(0,LF.c0)(ie,{listRef:ee,activeIndex:$,onNavigate:function(e){U(wp({activeIndexPopover:e}))},virtual:!0,loop:!0}),de=(0,LF.NI)([le,se,ce,ue]),fe=de.getReferenceProps,me=de.getFloatingProps,pe=de.getItemProps,he=(0,Gt.useCallback)((function(e){U(xm({user:e})),U(Km())}),[X]),ve=Qo(r.CHAT_USER_MENTION);(0,Gt.useEffect)((function(){Z(ve&&X&&X.length>0&&l.length>0)}),[X,l]);var ge=O||A||E;return Gt.createElement("div",E$({className:fB()("Publisher_root_OEAeu",v.root,(o={},o[fB()("Publisher_rootDisabled_sS2yb",v.rootDisabled)]=d,o.Publisher_error_WsXL7=S,o.Publisher_wide_LLwSq=f,o[_$]=L,o)),ref:oe.setReference},fe()),J&&Gt.createElement(lG,{items:X,x:ne,y:re,context:ie,floating:oe.setFloating,strategy:ae,getFloatingProps:me,onClick:he,listRef:ee,activeIndex:$,getItemProps:pe}),Gt.createElement("div",{className:fB()("Publisher_editor_lrEMS",v.editor,(a={},a[fB()("Publisher_editorDisabled_IfkTp",v.editorDisabled)]=d,a[_$]=L,a)),onKeyDown:function(e){N&&uD(e,N)&&(e.preventDefault(),w&&j()),null==k||k(e)},onKeyDownCapture:function(e){uD(e,N)&&!w&&(e.preventDefault(),e.stopPropagation())},onKeyUp:function(e){F.current=h$(e.target)},onMouseUp:function(e){F.current=h$(e.target)},ref:B}),ge&&Gt.createElement("div",{className:fB()("Publisher_actionsContainer_nXHDH",v.actionsContainer,(i={},i[v.actionsContainerDisabled]=d,i.Publisher_actionsContainerDisabled_L9rXX=d,i[_$]=L,i))},Gt.createElement("div",{className:fB()("Publisher_actionsLeft_alc_p")},!L&&O?O({isDisabled:d}):null),Gt.createElement("div",{className:fB()("Publisher_actionsRight_ZTaJy",!L&&"Publisher_withGap_YIyl9")},A?A({isDisabled:d}):null,E&&Gt.createElement("button",{className:fB()("Publisher_sendContainer_mXfrp",A&&!L&&"Publisher_withSeparator_Y2ofC",p&&"Publisher_sendContainerActive_VVuGf",v.sendContainer),disabled:d||m||!w,onClick:j},Gt.createElement(pB,{glyph:y,className:fB()("Publisher_iconSend_eJLU4",v.iconSend)})))))}));I$.displayName="Publisher";const N$="AttachmentButtonWithDropdown_iconDropdownItem_uUR4F",C$="AttachmentButtonWithDropdown_attachmentItem_RPueF";var w$,O$=(0,Qr.getTranslation)("@common/components.Publisher.components.AttachmentButtonWithDropdown"),A$=function(e){var t=e.onAttachmentClick,n=e.isDisabled,r=e.classNames,o=void 0===r?{}:r,a=e.allowedAttachmentTypes,i=void 0===a?{image:!0,video:!0,audio:!0,file:!0}:a,l=function(e){return function(){return t(e)}};return Gt.createElement(ZF,{className:fB()("AttachmentButtonWithDropdown_attachmentList_gsCfg",n&&"AttachmentButtonWithDropdown_disabled_nb3Q4"),classNameActive:"AttachmentButtonWithDropdown_attachmentListActive_B4Kp0",classNameButton:fB()("AttachmentButtonWithDropdown_iconAttachmentContainer_RXwhw",o.attachContainer),classNameContainer:"AttachmentButtonWithDropdown_attachmentDropdownContainer_UYGcb",button:Gt.createElement(pB,{glyph:hB.nwm,className:fB()("AttachmentButtonWithDropdown_iconAttachment_PHqEs",o.iconAttach)})},i.image&&Gt.createElement($F,{title:Gt.createElement("div",{className:C$,onClick:l(pe.IMAGE)},Gt.createElement(pB,{className:N$,glyph:hB.Zay}),O$.image)}),i.video&&Gt.createElement($F,{title:Gt.createElement("div",{className:C$,onClick:l(pe.VIDEO_FILE)},Gt.createElement(pB,{className:N$,glyph:hB.OiJ}),O$.video)}),i.file&&Gt.createElement($F,{title:Gt.createElement("div",{className:C$,onClick:l(pe.FILE)},Gt.createElement(pB,{className:N$,glyph:hB.XhR}),O$.file)}),i.audio&&Gt.createElement($F,{title:Gt.createElement("div",{className:C$,onClick:l(pe.AUDIO_FILE)},Gt.createElement(pB,{className:N$,glyph:hB.PWQ}),O$.audio)}))},P$=function(){function e(){}return Object.defineProperty(e,"isInline",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sanitize",{get:function(){var e;return{img:(e={src:!0,srcset:!0,alt:!0},e["data-id"]=!0,e)}},enumerable:!1,configurable:!0}),e.prototype.render=function(){return document.createElement("button")},e.prototype.surround=function(e){},e.prototype.checkState=function(e){return!1},e}(),L$=[ae.BACKSPACE,ae.DELETE],R$=function(){function e(t){var n=t.data,r=t.config,o=t.api,a=t.readOnly;this.mentionsArr=[],this.isTag=function(e){return"tag"===e.type},this.api=o,this.readOnly=a,this._placeholder=r.placeholder?r.placeholder:e.DEFAULT_PLACEHOLDER,this._data={},this._preserveBlank=r.preserveBlank||!1,this._parseLinks=r.parseLinks||!1,this.blogUrl=r.blogUrl,this.store=r.store,this.isSmileSuggestEnabled=r.isSmileSuggestEnabled,this.getSmilesSuggestAction=r.getSmilesSuggestAction,this.onAddMention=r.onAddMention,this._element=this.drawView(),this.publishingShortcut=r.publishingShortcut,this.data=n}return Object.defineProperty(e,"DEFAULT_PLACEHOLDER",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CSS",{get:function(){return{block:this.api.styles.block,wrapper:"ce-paragraph"}},enumerable:!1,configurable:!0}),e.prototype.drawView=function(){var e=document.createElement("DIV");return e.classList.add(this.CSS.wrapper,this.CSS.block),e.contentEditable="false",e.dataset.placeholder=this.api.i18n.t(this._placeholder),this.readOnly||(e.contentEditable="true",e.addEventListener("paste",this.handlePaste.bind(this)),e.addEventListener("keydown",this.handleKeyDown.bind(this)),e.addEventListener("input",this.handleInput.bind(this)),this.isSmileSuggestEnabled&&e.addEventListener("click",this.handleClick.bind(this))),e},e.prototype.handlePaste=function(t){var n=this.api.sanitizer.clean(t.clipboardData.getData("text/plain"),e.sanitize),r=this.api.sanitizer.clean(t.clipboardData.getData("text/html"),e.sanitize);r?(y$((r=r.replace(Uk,"<br>")).replace(Rk,"<br>")),t.preventDefault(),t.stopPropagation()):(y$(n.replace(Pk,"<br>")),t.preventDefault(),t.stopPropagation())},e.prototype.getTextBeforeSpace=function(e,t,n){return n===ae.SPACE?e.substring(0,t-1):null},e.prototype.getCurrentModifyingWord=function(e,t,n){var r=e,o=dD(r,t),a=o.start,i=o.end;return r.slice(a,i)},e.prototype.handleClick=function(){var e=window.getSelection(),t=h$(e.anchorNode.parentElement).offset;this.getSmilesSuggestAction&&this.getSmilesSuggestAction()(this.getCurrentModifyingWord(e.focusNode.textContent,t))},e.prototype.handleKeyDown=function(e){var t,n,r,o,a,i,l,s;if(e.shiftKey||e.ctrlKey||e.key!==ae.ENTER&&e.key!==ae.TAB||void 0===this.triggerIdx){if(e.key===ae.ENTER&&e.shiftKey){var c=window.getSelection().getRangeAt(0),u=document.createElement("BR");c.insertNode(u);var d=document.createElement("DIV"),f=Array.from(this._element.childNodes);if("BR"===(null==(p=this._element.lastChild)?void 0:p.tagName))for(var m=0;m<f.length-1;m++)d.append(f[m].cloneNode(!0));else d.innerHTML=this._element.innerHTML;d.innerHTML.match(/(?:<br>\s*){2,}/g)&&(this._element.removeChild(u),e.preventDefault(),e.stopPropagation())}var p}else{e.preventDefault(),e.stopPropagation();var h=null===(o=null===(r=null===(n=null===(t=this.store.getState())||void 0===t?void 0:t.blog)||void 0===n?void 0:n.streamChatUserSearchList)||void 0===r?void 0:r.data)||void 0===o?void 0:o.activeIndexPopover,v=null===(s=null===(l=null===(i=null===(a=this.store.getState())||void 0===a?void 0:a.blog)||void 0===i?void 0:i.streamChatUserSearchList)||void 0===l?void 0:l.data)||void 0===s?void 0:s.users;v[h]&&(this.store.dispatch(xm({user:v[h]})),this.store.dispatch(Km()))}},e.prototype.handleInput=function(e){var t,n,r=window.getSelection(),a=function(e){var t=e.data,n=e.inputType;return t?{key:t,keyCode:t.charCodeAt(0)}:"deleteContentBackward"===n?{key:ae.BACKSPACE,keyCode:8}:{key:ae.DELETE,keyCode:46}}(e),i=a.key,l=a.keyCode;if(!this.handleKeyDownMention(i)&&function(e){return e>47&&e<58||8===e||46===e||32===e||229===e||e>63&&e<91||e>96&&e<123||e>185&&e<193||e>218&&e<223}(l)){switch(i){case ae.BACKSPACE:case ae.DELETE:c=(t=g$())+1,n=(s=r.focusNode.textContent).slice(0,c)+s.slice(c+1);break;default:t=g$(),n=r.focusNode.textContent}var s,c,u=n.slice(0,t),d=u.split(/\s/),f=d[d.length-1],m=u.endsWith(f)?u.length-f.length:-1;if("@"===u[m])(0,Yt.setToLocalStorage)(o.PUBLISHER_TEXT_BEFORE_CARET,n),this.searchQuery=u.slice(m+1),this.fetchItems(this.searchQuery),this.triggerIdx=m,this.unsubscribe=this.store.subscribe(this.storeChanged.bind(this));else if(this.dispose(),this.isSmileSuggestEnabled){var p=h$(r.anchorNode.parentElement).offset,h=this.getCurrentModifyingWord(r.focusNode.textContent,p,i),v=this.getTextBeforeSpace(r.focusNode.textContent,p,i);this.getSmilesSuggestAction()(h,v)}}},e.prototype.storeChanged=function(){var e,t,n,r,o=null===(r=null===(n=null===(t=null===(e=this.store.getState())||void 0===e?void 0:e.blog)||void 0===t?void 0:t.streamChatUserSearchList)||void 0===n?void 0:n.data)||void 0===r?void 0:r.mentionedUser;o&&(this.currentMention=o,this.insertMention())},e.prototype.insertMention=function(){var e,t=(0,Yt.getFromLocalStorage)(o.PUBLISHER_TEXT_BEFORE_CARET).replace(Dk," "),n=Array.from(this._element.childNodes).find((function(e){return e.nodeType===Node.TEXT_NODE&&e.textContent.replace(Dk," ")===t}));if(n){var r=function(e,t,n,r){var o=e.parentNode,a=e.nodeValue,i=a.substring(0,t),l=r.name,s=a.substring(n),c=document.createTextNode(i);o.replaceChild(c,e);var u=document.createElement("span");return u.className="mention",u.setAttribute("data-mention-id",String(r.id)),u.setAttribute("data-display-name",String(r.name)),u.setAttribute("contenteditable","false"),o.insertBefore(u,c.nextSibling),c=document.createTextNode(l),u.appendChild(c),c=document.createTextNode(s),o.insertBefore(c,u.nextSibling),{spanNode:u,lastNode:c}}(n,this.triggerIdx,this.triggerIdx+(null===(e=this.searchQuery)||void 0===e?void 0:e.length)+1,this.currentMention),a=r.spanNode,i=r.lastNode;this.setFocusAfterElement(i),this.onAddMention(i),this.mentionsArr.push(a),this.dispose()}},e.prototype.setFocusAfterElement=function(e){this._element.focus();var t,n=window.getSelection(),r=[e," "],o=n.getRangeAt(0);o.collapse(!1);for(var a=0;a<r.length;a++)"string"==typeof(t=r[a])&&(t=document.createTextNode(t),o.insertNode(t)),o.setStartAfter(t),o.collapse(!0);(o=o.cloneRange()).selectNodeContents(t),o.collapse(!1),n.removeAllRanges(),n.addRange(o)},e.prototype.handleKeyDownMention=function(e){var t=!1;if(!L$.includes(e))return t;for(var n,r,o,a=window.getSelection().anchorNode.parentNode,i=0;i<this.mentionsArr.length;i++)if(this.mentionsArr[i]===a){a.remove(),this.mentionsArr=(r=a,(o=(n=this.mentionsArr).indexOf(r))>-1&&n.splice(o,1),n),t=!0;break}return t},e.prototype.dispose=function(){this.triggerIdx=void 0,this.searchQuery=void 0,(0,Yt.removeFromLocalStorage)(o.PUBLISHER_TEXT_BEFORE_CARET),this.store.dispatch(Ip()),this.store.dispatch(Km()),"function"==typeof this.unsubscribe&&this.unsubscribe()},e.prototype.fetchItems=function(e){Qo(r.CHAT_USER_MENTION)&&this.store.dispatch((0,dm.Ax)(up.action)({blogUrl:this.blogUrl,searchQuery:e}))},e.prototype.render=function(){return this._element},e.prototype.merge=function(e){this.data={text:this.data.text+e.text}},e.prototype.validate=function(e){return!(""===e.text.trim()&&!this._preserveBlank)},e.prototype.save=function(e){return{text:e.innerHTML}},e.prototype.onKeyUp=function(e){"Backspace"!==e.code&&"Delete"!==e.code||""===this._element.textContent&&(this._element.innerHTML="")},e.prototype.onPaste=function(e){this.isTag(e)&&(this.data={text:e.detail.data.innerHTML})},Object.defineProperty(e,"conversionConfig",{get:function(){return{export:"text",import:"text"}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sanitize",{get:function(){return{text:{br:!0},span:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isReadOnlySupported",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data.text=this._element.innerHTML,this._data},set:function(e){this._data=e||{},this._element.innerHTML=this._data.text||"",this.mentionsArr=Array.from(this._element.childNodes).filter(v$)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pasteConfig",{get:function(){return{tags:["P"]}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"toolbox",{get:function(){return{icon:hB.HOS.content,title:"Text"}},enumerable:!1,configurable:!0}),e}();!function(e){e.ROOT="ROOT",e.INPUT="INPUT"}(w$||(w$={}));var k$=function(){return k$=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},k$.apply(this,arguments)},D$=oo("Payment.PriceInput"),U$=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageBasePublisher.components.AmountSelector.components.PriceInput"),B$=function(e){var t=e.classNameInput,n=e.value,o=e.placeholder,a=e.isMultiCurrency,i=e.isEnabled,l=e.isVisibleSaveButton,s=e.inputMaskSuffix,c=e.onChange,u=e.onSaveClick,d=nr().currencies.list,f=[];Qo(r.MULTI_CURRENCY)&&(null==d?void 0:d.length)>1&&(f=d.map((function(e){return{id:e,title:"".concat(U$[e]," (").concat(jr(e),")")}})));var m=(0,Vt.I0)(),p=(0,Vt.v9)(bA),h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)({id:p,title:"".concat(U$[p]," (").concat(jr(p),")")}),2),v=h[0],g=h[1],y=function(){return Boolean(n)?u():Yt.noop};return(0,Gt.useEffect)((function(){g({id:p,title:"".concat(U$[p]," (").concat(jr(p),")")})}),[p]),Gt.createElement("div",k$({className:"PriceInput_container_a5HgI"},Na(D$(w$.ROOT))),Gt.createElement("div",{className:"PriceInput_inputWrapper_RYTlm"},Gt.createElement(Zx,{autoFocus:!0,onKeyDown:function(e){e.key===ae.ENTER&&y()},disabled:!i,placeholder:o,classNameInput:cG()("PriceInput_inputContainer_zWR01",t),value:null!==n?String(n):"",mask:Nf({suffix:" ".concat(s),currency:null}),showMask:Boolean(n),onChange:function(e){var t=e.target.value;c(t?$a(t):null)},testId:D$(w$.INPUT)}),l&&Gt.createElement("div",{className:"PriceInput_iconContainer_TNX4L",onClick:function(){return y()}},Gt.createElement(pB,{glyph:hB.NOm,className:"PriceInput_icon_JSiT_"}))),f.length>0&&a&&Gt.createElement(lF,{className:"PriceInput_currencySelector_LAdXY",isDisabled:!1,labelProp:"title",selected:v,onSelect:function(e){m(Ig({currency:e.id}))},options:f,selectionLabel:null,valueProp:"id"}))},x$=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},M$=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageBasePublisher.components.AmountSelector.hooks.useAmountSelector"),F$=function(e){var t,n,r,o=e.classNames,a=void 0===o?{}:o,i=e.isDisabled,l=e.isActive,s=e.isMultiCurrency,c=e.type,u=e.savedAmount,d=e.onAmountSave,f=e.showHint,m=void 0===f||f,p=function(e){var t=e.isDisabled,n=e.type,r=e.savedAmount,o=e.onAmountSave,a=nr(),i=a.donation.paymentLimits,l=a.dialogues.paidMessages.paymentLimits,s=a.currencies.default,c=n===aZ.DONATION?i:l,u=c.maxPaymentSum,d=c.minPaymentSum,f=c.defaultPaymentSum,m=PD({type:Ce.DONATION,typeDonation:V.DIALOG}).sendPaymentStat,p=(0,Vt.v9)(bA),h=n!==aZ.MESSAGE?p:s,v=Number(f[h]),g=(0,Gt.useRef)(null),y=x$((0,Gt.useState)(v),2),_=y[0],E=y[1],b=x$((0,Gt.useState)(!1),2),S=b[0],T=b[1],I=x$((0,Gt.useState)(!1),2),N=I[0],C=I[1],w=x$((0,Gt.useState)(!1),2),O=w[0],A=w[1],P=x$((0,Gt.useState)((0,Qr.getParametrizedText)(M$[n].min,{limit:Vr({amount:d[h],currency:h})})),2),L=P[0],R=P[1],k=x$((0,Gt.useState)(!1),2),D=k[0],U=k[1],B=Ok(_),x=n===aZ.DONATION?hB.iMT:hB.e55,M=t?M$.reasonDisabled:M$[n].title,F=n!==aZ.DONATION||t?M:M$[n].hint,G=M$[n].hint,H=(0,Qr.getParametrizedText)(M$[n].placeholder,{amount:Vr({amount:v,currency:h})}),W=function(e){return{isWrongAmount:e>u[h]||e<d[h],textWarning:e>u[h]?(0,Qr.getParametrizedText)(M$[n].max,{limit:Vr({amount:u[h],currency:h})}):(0,Qr.getParametrizedText)(M$[n].min,{limit:Vr({amount:d[h],currency:h})})}},j=function(e){m(e,{currency:h,amount:_,canWriteMessage:!0,hasMessage:!1})},z=(0,Gt.useCallback)((function(){var e;(null===(e=g.current)||void 0===e?void 0:e.contains(event.target))||(_||j(We.CLOSE),T(!1),window.removeEventListener("click",z))}),[]);return(0,Gt.useEffect)((function(){r||(U(!1),A(!1),C(!1),E(null)),!_&&r&&(E(r),C(!0))}),[r]),(0,Gt.useEffect)((function(){var e=W(_),t=e.isWrongAmount,n=e.textWarning;U(t),R(n)}),[h]),{title:M,titleTooltip:F,hint:G,placeholder:H,ref:g,warningText:L,currency:h,icon:x,isVisible:S,isVisibleSaveButton:O,isEnabled:N,isActiveWarning:D,amount:_,onVisibleToggle:function(){t||(T(!S),j(We.SHOW),window.addEventListener("click",z,!0))},onSwitchToggle:function(){N?(o(null),E(null),A(!1),U(!1),R((0,Qr.getParametrizedText)(M$[n].min,{limit:Vr({amount:d[h],currency:h})}))):E(v),C(!N),A(!N)},onAmountChange:function(e){var t=W(e),n=t.isWrongAmount,r=t.textWarning;E(e),C(!0),U(n),R(r),B!==e&&A(!0)},onSaveClick:function(){D||(o(_),U(!1),A(!1),T(!1),j(We.DONATE_DIALOG_ATTACH))}}}({isDisabled:i,type:c,savedAmount:u,onAmountSave:d}),h=p.title,v=p.titleTooltip,g=p.hint,y=p.placeholder,_=p.currency,E=p.ref,b=p.isVisible,S=p.isVisibleSaveButton,T=p.isEnabled,I=p.isActiveWarning,N=p.amount,C=p.icon,w=p.warningText,O=p.onSwitchToggle,A=p.onVisibleToggle,P=p.onAmountChange,L=p.onSaveClick;return Gt.createElement("div",{className:cG()("AmountSelector_root_fPtxe",a.root),ref:E},Gt.createElement("div",{onClick:A},Gt.createElement(Dx,{align:yx.CENTER_TOP,classNames:{content:cG()("AmountSelector_tooltipHintContent_wE1NO",a.hint)},content:!b&&m&&v},Gt.createElement(pB,{glyph:C,className:cG()((t={},t.AmountSelector_iconActive__50vE=b||l,t),"AmountSelector_icon_GMmk1",i&&"AmountSelector_disabled_v1Ij3")}))),b&&Gt.createElement("div",{className:cG()("AmountSelector_rootVisible_ebXWQ",a.tooltipRoot)},Gt.createElement("div",{className:"AmountSelector_header_jmiR6"},Gt.createElement("div",{className:"AmountSelector_title_X9OGI"},h),c===aZ.MESSAGE&&Gt.createElement("div",{className:"AmountSelector_hint_Wam67"},Gt.createElement(Bx,{tooltipTrigger:gx.HOVER,classNames:{tooltip:"AmountSelector_tooltipContainer_o0_CD",tooltipContent:"AmountSelector_tooltipContent_KB21_"}},g)),Gt.createElement("div",{className:"AmountSelector_toggleSwitchContainer_KVUh3"},Gt.createElement(SF,{onToggle:O,size:dF.SMALL,checked:T}))),Gt.createElement(B$,{classNameInput:cG()((n={},n.AmountSelector_activeWarningInput_IexiX=I,n)),isEnabled:T,isMultiCurrency:s,isVisibleSaveButton:S,inputMaskSuffix:jr(_),value:N,placeholder:y,onChange:P,onSaveClick:L}),Gt.createElement("div",{className:cG()("AmountSelector_warning_b_SoN",(r={},r.AmountSelector_activeWarningText_yp4cG=I,r))},w)))},G$=(0,Gt.forwardRef)((function(e,t){var n=e.classNames,r=void 0===n?{}:n,o=e.onClick,a=e.isDisabled,i=e.isActive;return Gt.createElement("button",{type:"button",className:fB()(r.root,"SmileButton_root_bPbsM",i&&"SmileButton_rootActive_oo9xX"),disabled:a,ref:t},Gt.createElement(pB,{glyph:hB.lID,className:fB()("SmileButton_iconSmile_hvRec",r.icon),onClick:o}))}));G$.displayName="SmileButton";var H$,W$=function(e){var t=e.publisherRef,n=e.hasSmilesSelector,r=e.inlineData,o=e.preventScrollOnMobileFocus,a=e.setEditorData,i=e.isDisabled,l=(0,Gt.useRef)(),s=(0,Gt.useRef)(),c=(0,Gt.useRef)(null),u=nr().isMobile,d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=(0,Gt.useCallback)((function(){m(!1)}),[]),h=function(e){var t=[l,s].some((function(t){var n;return null===(n=t.current)||void 0===n?void 0:n.contains(e.target)}));t||p()},v=function(){window.innerHeight<c.current&&(setTimeout((function(){return window.scrollTo(0,document.body.scrollHeight)})),window.removeEventListener("resize",v))},g=(0,Gt.useCallback)((function(){var e;m(!f),o&&u&&(Cd()?null===(e=t.current)||void 0===e||e.editorJs.focus(!0):window.innerHeight>window.innerWidth&&(c.current=window.innerHeight,window.addEventListener("resize",v)))}),[f,o]),y=(0,Gt.useCallback)((function(e){var n,o=e.smile,i=e.isReplaceWordOnCursor,l=void 0!==i&&i,s=function(e){var t=e.id,n=e.name,r=e.smallUrl,o=e.mediumUrl,a=e.largeUrl;return{type:pe.SMILE,id:t,name:n,smallUrl:r,mediumUrl:o,largeUrl:a}}(o),c=function(e,t){var n=e.itemIndex,r=e.offset,o=e.breakItems,a=e.blockIndex,i=o+a;if(t.slice(i,i+n).reduce((function(e,t){return e||jk(t)&&t.content&&Yk(t).indexOf(pD)>=0}),!1)){var l={itemIndex:i+n,offset:r,breakItems:o,blockIndex:a},s=0;return t.some((function(e,t){var c=s;if(jk(e)){var u=(e.content&&Yk(e)||"").split(pD).reduce((function(e,t){return mD(mD([],fD(e),!1),[t,pD],!1)}),[]).filter(Boolean).slice(0,-1);if((s+=u.length)>=i+n){var d=o+n-c-1;return u[d]===pD?(l={itemIndex:t+1,offset:u.slice(0,d+1).join("").length,breakItems:o,blockIndex:a},!0):(l={itemIndex:t+1,offset:u.slice(0,d).join("").length+r,breakItems:o,blockIndex:a},!0)}}else if(++s>=i+n)return l={itemIndex:t+1,offset:0,breakItems:o,blockIndex:a},!0;return!1})),l}return{itemIndex:i+n,offset:r,breakItems:o,blockIndex:a}}(null===(n=t.current)||void 0===n?void 0:n.cursor,r),u=c.itemIndex,d=c.offset,f=r[u-1];if(f&&jk(f)&&!ia(f)){var m=l?function(e,t,n){var r=fD(JSON.parse(e.content)),o=r[0],a=r.slice(1),i=dD(o,n),l=i.start,s=i.end,c=o.slice(0,l),u=o.slice(s);return[c.length>0&&Object.assign({},e,{content:JSON.stringify([c].concat(a))}),t,u.length>0&&Object.assign({},e,{content:JSON.stringify([u].concat(a))})].filter(Boolean)}(f,s,d):function(e,t,n){var r=fD(JSON.parse(e.content)),o=r[0],a=r.slice(1),i=o.slice(0,n),l=o.slice(n);return[i.length>0&&Object.assign({},e,{content:JSON.stringify([i].concat(a))}),t,l.length>0&&Object.assign({},e,{content:JSON.stringify([l].concat(a))})].filter(Boolean)}(f,s,d);a(r.slice(0,u-1).concat(m).concat(r.slice(u)))}else f&&ia(f)?a(r.slice(0,-1).concat(s,r.slice(-1))):a(r.slice(0,u).concat(s).concat(r.slice(u)))}),[r,a]);return(0,Gt.useEffect)((function(){i&&p()}),[i]),(0,Gt.useEffect)((function(){return window.addEventListener("click",h,!0),function(){window.removeEventListener("click",h,!0),window.removeEventListener("resize",v)}}),[h]),(0,Gt.useEffect)((function(){n||m(!1)}),[n]),{isSmileSelectorOpened:f,smileSelectorWrapperRef:l,smileButtonRef:s,addSmileToInlineData:y,onSmilesButtonClick:g,closeSmilesSelector:p}};!function(e){e[e.LIST=0]="LIST",e[e.SEARCH=1]="SEARCH",e[e.FOLLOW=2]="FOLLOW",e[e.SUBSCRIBE=3]="SUBSCRIBE",e[e.LOADING=4]="LOADING"}(H$||(H$={}));var V$=function(e){var t,n=e.smile,r=e.classNames,o=void 0===r?{}:r,a=e.hasLockOverlay,i=e.hasHeartOverlay,l=e.activeSmileRef,s=e.selected,c=e.onClick,u=n.smallUrl,d=n.mediumUrl,f=(0,Gt.useRef)(null);(0,Gt.useEffect)((function(){s&&l&&(l.current=f.current)}),[s]);var m=vD({element:f,lock:!0}),p=a||i;return Gt.createElement("div",{className:fB()("SmileItem_smileContainer_XWQ2f",o.smileContainer,(t={},t.SmileItem_smileContainerLoading_eWtad=!m,t)),ref:f,onClick:function(e){c(n,e)}},p&&Gt.createElement("div",{className:"SmileItem_iconContainer_QAz_M"},Gt.createElement(pB,{glyph:i?hB.MlY:hB._V1,className:"SmileItem_icon_joYva"})),m&&Gt.createElement("img",{src:u,srcSet:"".concat(d," 2x"),alt:"",className:"SmileItem_smileImage_iNFts"}))},j$={smileContainer:"SmilesList_selected_pMRnF"},z$=function(e){var t=e.smiles,n=e.selectedSmileIndex,r=e.activeSmileRef,o=e.titleAvatarUrl,a=e.title,i=e.onSmileClick,l=void 0===i?Yt.noop:i,s=nr().isMobile,c=a||o;return Gt.createElement(Gt.Fragment,null,c&&Gt.createElement("div",{className:"SmilesList_titleContainer_JKLIi"},o&&Gt.createElement(PB,{img:o,size:g.XXS,className:"SmilesList_avatar_I6INz"}),a&&Gt.createElement("div",{className:"SmilesList_title_ppYp0"},a)),Gt.createElement("div",{className:"SmilesList_smilesList_w1ufF"},t.map((function(e,t){var o,a,i=e.access&&!e.access.allowed,c=0===(null===(a=null===(o=e.access)||void 0===o?void 0:o.subscriptionLevel)||void 0===a?void 0:a.price),u=i&&!c,d=i&&c,f=t===n,m=f&&j$;return s?Gt.createElement(V$,{key:e.id,smile:e,hasLockOverlay:u,hasHeartOverlay:d,onClick:l}):Gt.createElement(HF,{key:e.id,content:e.name,position:NF.TOP,isGlobal:!0,offset:2,classNames:{root:"SmilesList_tooltip_o18lu",content:"SmilesList_tooltipContent_MQxeE"}},Gt.createElement(V$,{smile:e,classNames:m,hasLockOverlay:u,hasHeartOverlay:d,activeSmileRef:r,selected:f,onClick:l}))}))))};const Y$={root:"List_root_BupLC",fadeIn:"List_fadeIn_f0Za7"};var K$=function(e){var t=e.smiles,n=e.activeSetIndex,r=e.onSmileClick,o=(0,Gt.useRef)(),a=(0,Gt.useRef)({}),i=(0,Gt.useRef)(0);return(0,Gt.useEffect)((function(){Date.now()-i.current>300&&function(e){var t=a.current[e];if(t){var n=o.current.offsetTop,r=t.offsetTop-n-15;o.current.scrollTop=r}}(n)}),[n]),Gt.createElement("div",{className:Y$.root,ref:o},Gt.createElement("div",{className:Y$.set,ref:function(e){return a.current[0]=e}},Gt.createElement(z$,{smiles:t.smiles,onSmileClick:r})))},q$=function(){return Gt.createElement("div",{className:"Loading_root_fZ_O7"},Gt.createElement(uM,{size:50}))},X$=function(e){var t=e.activeSetIndex,n=e.onChangeActiveIndexByScroll,r=e.onSmileClick,o=e.smiles;return{currentUser:_k().currentUser,smiles:o,activeSetIndex:t,onChangeActiveIndexByScroll:n,onSmileClick:r}},Q$=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},J$=function(){return J$=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},J$.apply(this,arguments)},Z$=(0,Qr.getTranslation)("@common/components.SmilesSelector"),$$=function(e){var t,n=e.blogUrl,r=e.isHorizontalNavigation,o=e.onSelect,a=e.onSuccessFollow,i=void 0===a?Yt.noop:a,l=e.smiles,s=e.smilesNetworkStatus,c=e.classNames,u=void 0===c?{}:c,d=function(e){var t=e.blogUrl,n=e.onSelect,r=e.smiles,o=e.smilesNetworkStatus,a=Q$((0,Gt.useState)(H$.LOADING),2),i=a[0],l=a[1],s=Q$((0,Gt.useState)(null),2),c=s[0],u=s[1],d=(0,Vt.I0)(),f=_k().currentUser;return(0,Gt.useEffect)((function(){var e,t,n=o.isFetching,r=o.isFetched;n||r||(t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,d((0,dm.Ax)(Lv.action)())];case 1:return e.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(void 0,[])).next())}))),l(r?H$.LIST:H$.LOADING)}),[o]),(0,Gt.useEffect)((function(){r&&u(r?0:null)}),[r]),{currentUser:f,smiles:r,mode:i,activeSetIndex:c,list:X$({smiles:r,isActive:i===H$.LIST,blogUrl:t,activeSetIndex:c,onChangeActiveIndexByScroll:function(e){return u(e)},onSmileClick:function(e){n({smile:e})}})}}({smiles:l,smilesNetworkStatus:s,blogUrl:n,onSelect:o,onSuccessFollow:i}),f=d.mode,m=d.list;return Gt.createElement("div",{className:fB()("SmilesSelector_root_UDrAQ",(t={},t.SmilesSelector_horizontal_QWq6O=fB()(r,u.horizontalNavigationRoot),t),u.root)},Gt.createElement("div",{className:"SmilesSelector_content_zSoF1"},Gt.createElement("div",{className:"SmilesSelector_header_IoeCx"},Z$.emoji),Gt.createElement("div",{className:"SmilesSelector_mode_ts0lf"},f===H$.LIST&&Gt.createElement(K$,J$({},m,{hideTitle:!0})),f===H$.LOADING&&Gt.createElement(q$,null))))},e0=function(){return e0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e0.apply(this,arguments)};const t0={root:"MessageBasePublisher_root_pY_xh",hidden:"MessageBasePublisher_hidden_GeQh3",main:"MessageBasePublisher_main_qGu7M",avatar:"MessageBasePublisher_avatar_wTQ6I",publisherWrapper:"MessageBasePublisher_publisherWrapper_T9SEI",publisher:"MessageBasePublisher_publisher_LgE62",editor:"MessageBasePublisher_editor_pOm0R",amountButton:"MessageBasePublisher_amountButton_ApKPf",smileSelectorContainer:"MessageBasePublisher_smileSelectorContainer_lebnb",smileSelector:"MessageBasePublisher_smileSelector_jG9PF",attachIconContainer:"MessageBasePublisher_attachIconContainer_NvZDT",paidMessageSelectorHintDisabled:"MessageBasePublisher_paidMessageSelectorHintDisabled_Z7KvM",amountSelectorHintDisabled:"MessageBasePublisher_amountSelectorHintDisabled_RwE9I",priceLabel:"MessageBasePublisher_priceLabel_ocfc1",priceContainer:"MessageBasePublisher_priceContainer_nARAu",priceContent:"MessageBasePublisher_priceContent_oAXdF",actionsContainer:"MessageBasePublisher_actionsContainer_SCu53",actionsContainerDisabled:"MessageBasePublisher_actionsContainerDisabled_duvoK",smileButton:"MessageBasePublisher_smileButton_LAdLk",sendButton:"MessageBasePublisher_sendButton_i6vbM",sendIcon:"MessageBasePublisher_sendIcon_aYW7i",donationTooltipRoot:"MessageBasePublisher_donationTooltipRoot_zbYsL",paidMessageTooltipRoot:"MessageBasePublisher_paidMessageTooltipRoot_uCuqK",fadeIn:"MessageBasePublisher_fadeIn_OA9kg"};var n0=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageBasePublisher"),r0=function(e){var t,n=e.classNames,r=void 0===n?{}:n,o=e.isHidden,a=e.publisherRef,i=e.inlineDataLength,l=e.inlineData,s=e.editorData,c=e.setEditorData,u=e.onInlineDataChange,d=e.onPublish,f=e.onAttachClick,m=e.onKeyDown,p=e.hasSubmitButton,h=void 0===p||p,v=e.hasDonationButton,g=void 0!==v&&v,y=e.donationAmount,_=e.hasPaidMessageButton,E=void 0!==_&&_,b=e.isPaidMessageButtonDisabled,S=void 0!==b&&b,T=e.paidMessagePrice,I=e.isSubmitButtonActive,N=e.isSubmitButtonDisabled,C=e.onPaidMessagePriceSave,w=e.onDonationAmountSave,O=e.renderAttachments,A=e.hasSmilesButton,P=void 0===A||A,L=e.placeholder,R=e.canPublish,k=void 0===R||R,D=e.isDisabled,U=e.shouldAutoFocusOnPublish,B=void 0===U||U,x=e.onIsEmptyInlineContentChange,M=nr(),F=M.isMobile,G=M.dialogues.textMaxLength,H=M.currencies.default,W=(0,Vt.v9)(bA),V=(0,Vt.oR)(),j=function(e){var t,n=e.publisherRef,r=e.inlineData,o=e.setEditorData,a=e.onIsEmptyInlineContentChange,i=nr().isMobile,l=Gf(),s=(0,Vt.v9)(XO),c=l.blogUrl||(null===(t=s.blog)||void 0===t?void 0:t.url),u=(0,Vt.v9)(ZL),d=(0,Vt.v9)($L),f=W$({hasSmilesSelector:!0,inlineData:r,setEditorData:o,publisherRef:n,isDisabled:e.isDisabled}),m=f.isSmileSelectorOpened,p=f.smileSelectorWrapperRef,h=f.smileButtonRef,v=f.addSmileToInlineData,g=f.onSmilesButtonClick,y=f.closeSmilesSelector,_=function(e){null==a||a(!1),v(e)};return{renderSmilesActionButton:function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.renderProps,o=e.isDisabled;return Gt.createElement(G$,e0({},r,{ref:h,isActive:m,classNames:n,onClick:g,isDisabled:r.isDisabled||o}))},renderSmilesSelector:function(e){var t=e.classNames,n=void 0===t?{}:t;return m&&Gt.createElement("div",{className:n.root,ref:p},Gt.createElement($$,{classNames:{root:n.selector,horizontalNavigationRoot:n.horizontalNavigationSelector},smiles:u,smilesNetworkStatus:d,blogUrl:c,isHorizontalNavigation:i,onSelect:_}))},closeSmilesSelector:y}}({publisherRef:a,inlineData:l,setEditorData:c,onIsEmptyInlineContentChange:x,isDisabled:D}),z=j.renderSmilesActionButton,Y=j.renderSmilesSelector,K=j.closeSmilesSelector,q=i>=G,X=N||q,Q=function(e){C(e),setTimeout((function(){var e;return null===(e=a.current)||void 0===e?void 0:e.focus()}),0)},J=function(e){w(e),setTimeout((function(){var e;return null===(e=a.current)||void 0===e?void 0:e.focus()}),0)};return Gt.createElement("div",{className:cG()(t0.root,o&&t0.hidden,r.root)},Gt.createElement("div",{className:t0.main},Gt.createElement(m$,{warningText:"".concat(n0.warning," ").concat(G),hasError:q,className:t0.publisherWrapper},Gt.createElement(I$,{smilesSize:Ue.M,ref:a,classNames:{root:t0.publisher,editor:t0.editor,actionsContainer:cG()(t0.actionsContainer,r.actionsContainer,D&&t0.actionsContainerDisabled),sendContainer:t0.sendButton,iconSend:t0.sendIcon},hasError:q,isDisabled:D,setEditorData:c,onPublish:function(){return void 0,void 0,t=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return K(),!d||q?[3,2]:[4,d()];case 1:t.sent(),t.label=2;case 2:return!F&&B&&(null===(e=a.current)||void 0===e||e.focus()),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t},hasSubmitButton:h,editorData:s,inlineData:l,onInlineDataChange:u,onKeyDown:function(e){uD(e,sD.ENTER)||D||(setTimeout((function(){var t,n=null===(t=e.target)||void 0===t?void 0:t.innerHTML;null==x||x(!n||"<br>"===n)}),40),null==m||m(e))},publishingShortcut:F?void 0:sD.ENTER,hasAutoFocus:!0,isSubmitButtonActive:I,isSubmitButtonDisabled:X,placeholder:L,canPublish:k,renderActionsLeft:function(e){return Gt.createElement(Gt.Fragment,null,Gt.createElement(A$,{classNames:{attachContainer:t0.attachIconContainer},onAttachmentClick:f,isDisabled:D}),T>0&&Gt.createElement(DZ,{isGlobal:!1,classNames:{root:t0.priceLabel,tooltip:t0.priceContainer,childrenWrapper:t0.priceContent},price:T,currency:H}),E&&Gt.createElement(F$,{isMultiCurrency:!1,isDisabled:y>0||D||S,showHint:y>0,type:aZ.MESSAGE,savedAmount:T,onAmountSave:Q,classNames:{tooltipRoot:t0.paidMessageTooltipRoot,root:t0.amountButton,hint:y>0&&t0.amountSelectorHintDisabled}}),y>0&&Gt.createElement(DZ,{isGlobal:!1,classNames:{root:t0.priceLabel,tooltip:t0.priceContainer,childrenWrapper:t0.priceContent},price:y,currency:W}),g&&Gt.createElement(F$,{isMultiCurrency:!0,isDisabled:T>0||D,type:aZ.DONATION,showHint:T>0,savedAmount:y,onAmountSave:J,classNames:{tooltipRoot:t0.donationTooltipRoot,root:t0.amountButton,hint:T>0&&t0.amountSelectorHintDisabled}}))},renderActionsRight:function(e){return P&&z({renderProps:e,isDisabled:D,classNames:{root:t0.smileButton}})},editorTools:(t={paragraph:{class:R$,config:{preserveBlank:!0,parseLinks:!1,store:V,isSmileSuggestEnabled:!1,publishingShortcut:F?void 0:sD.ENTER}}},t[pe.SMILE]=P$,t)})),Y({classNames:{root:t0.smileSelectorContainer,selector:t0.smileSelector,horizontalNavigationSelector:t0.smileSelectorHorizontal}})),null==O?void 0:O())};const o0="MessagePublisherTabs_tab_wcHTi",a0="MessagePublisherTabs_active_fFNWp";var i0=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessagePublisherTabs"),l0=function(e){var t=e.activeTab,n=void 0===t?EH.MESSAGE:t,r=e.isHiddenTeaserTab,o=e.onSelect,a=e.messageButton,i=void 0===a?null:a,l=e.classNames,s=void 0===l?{}:l;return Gt.createElement("div",{className:cG()("MessagePublisherTabs_root_nhxOs",r&&"MessagePublisherTabs_hiddenBorderBottom_pNVUl",s.root)},!r&&Gt.createElement("div",{className:cG()(o0,n===EH.TEASER&&cG()(a0,s.activeTab),s.tab),onClick:function(){return o(EH.TEASER)}},i0.freeTeaser),Gt.createElement("div",{className:cG()(o0,n===EH.MESSAGE&&!r&&cG()(a0,s.activeTab),s.tab),onClick:function(){return o(EH.MESSAGE)}},i0.paidContent),i)},s0=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageSendButton"),c0=function(e){var t=e.className,n=e.isDisabled,r=e.onClick;return Gt.createElement("div",{className:cG()(t,"MessageSendButton_container_Nvjah",n&&"MessageSendButton_disabled_ZWFec"),onClick:r},Gt.createElement(pB,{glyph:hB.h9l,className:"MessageSendButton_icon_AfUod"}),Gt.createElement("span",{className:"MessageSendButton_caption_L5AXG"},s0.send))},u0=function(){return u0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u0.apply(this,arguments)},d0=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},f0=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},m0=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},p0=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},h0=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageSinglePublisher.useMessageSinglePublisher"),v0=function(e){var t=e.wsChannel,n=e.chatMateId,r=e.dialogId,o=e.messageAttachments,i=void 0===o?ea:o,l=e.teaserMessageAttachments,s=void 0===l?ea:l,c=e.goToDialogue,u=e.getMessageData,d=e.getTeaserMessageData,f=e.resetAllData,m=e.onSuccessPaidMessageSend,h=e.onSuccessSimpleMessageSend,v=Mf(),g=jG().showAlert,y=(0,Vt.v9)(XO),_=(0,Vt.I0)(),E=m0((0,Gt.useState)(null),2),b=E[0],S=E[1],T=m0((0,Gt.useState)(null),2),I=T[0],N=T[1],C=m0((0,Gt.useState)(!1),2),w=C[0],O=C[1],A=(0,Vt.v9)(pP),P=(0,Vt.v9)(hP),L=(0,Vt.v9)(_P),R=function(){var e=(0,dH.useOverlayPopups)(),t=e.showPopup,n=e.closePopup;return function(e){var r=e.params,o=e.onConfirm,i=e.onClose,l=t({type:a.SEND_MESSAGE_CONFIRM,data:u0(u0({},r),{onConfirm:function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,o()];case 1:return e.sent(),n(l),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t}}),onClose:i}).id}}(),k=Boolean(P)&&!(null==P?void 0:P.canWrite)&&Boolean(P.needDonation),D=Boolean(P)&&!(null==P?void 0:P.canWrite)&&Boolean(P.needSub),U=Boolean(P)&&!(null==P?void 0:P.canWrite)&&Boolean(P.needLevel),B=k||D||U,x=function(e){var t=e.data,n=e.teaserData,r=e.price;return d0(void 0,void 0,void 0,(function(){return f0(this,(function(e){switch(e.label){case 0:return[4,_((0,dm.Ax)(Mh.action)({userId:y.id,dialogId:A,data:t,teaserData:n,price:r}))];case 1:return e.sent(),[2]}}))}))},M=function(e){var t=e.data,r=e.teaserData,o=e.price;return d0(void 0,void 0,void 0,(function(){var e;return f0(this,(function(a){switch(a.label){case 0:return[4,_((0,dm.Ax)(xh.action)({userId:n}))];case 1:return e=a.sent(),[4,_((0,dm.Ax)(Mh.action)({userId:y.id,dialogId:e.id,data:t,teaserData:r,price:o}))];case 2:return a.sent(),[4,_((0,dm.Ax)(jh.action)({dialogId:e.id}))];case 3:return a.sent(),[4,_((0,dm.Ax)(Dh.action)({dialogId:e.id}))];case 4:return a.sent(),c((0,Yt.getParametrizedUrl)(ir.MESSAGES,{blogUrl:y.blogUrl},{dialogId:e.id})),[2]}}))}))},F=function(e){var t=e.wsChannel;return(0,Gt.useEffect)((function(){return t&&sk.updateOptions({}).subscribe([{type:Xe.CUSTOM,channel:t}]),function(){sk.unsubscribe(Xe.CUSTOM)}}),[]),{publishDialogEvent:function(e){var n,r,o=e.userId,a=e.isTyping;return r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,sk.publishEvent(t,$e.DIALOG_CHATMATE_ACTION,{userId:o,isTyping:a})];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(void 0,[])).next())}))},disconnectSelectedDialogue:function(){return sk.unsubscribe(Xe.CUSTOM)}}}({wsChannel:t}),G=F.publishDialogEvent,H=F.disconnectSelectedDialogue,W=function(e){var n=e.isTyping;return d0(void 0,void 0,void 0,(function(){return f0(this,(function(e){switch(e.label){case 0:return t?[4,G({userId:y.id,isTyping:n})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},j=function(e){var t=e.data,n=e.teaserData,r=e.price;return d0(void 0,void 0,void 0,(function(){return f0(this,(function(e){switch(e.label){case 0:return L?[4,x({data:t,teaserData:n,price:r})]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,M({data:t,teaserData:n,price:r})];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))};return(0,Gt.useEffect)((function(){return f(),function(){t&&H()}}),[A]),{paidMessagePrice:b,donationAmount:I,canWriteWithDonation:k,isConfirmPending:w,isPaidMessageEnabled:y.isBlogger&&!B,setPaidMessagePrice:S,setDonationAmount:N,publishMessage:function(){return d0(void 0,void 0,void 0,(function(){var e,t,o,a,l,c,E,T,N;return f0(this,(function(C){switch(C.label){case 0:return[4,u()];case 1:return e=C.sent(),d?[4,d()]:[3,3];case 2:return o=C.sent(),[3,4];case 3:o=[],C.label=4;case 4:return t=o,ta(e)&&ta(i)?[2]:(I||b||f(),[4,W({isTyping:!1})]);case 5:return C.sent(),I?(function(e){var t=(0,Yt.getParametrizedUrl)(ir.BLOG_MESSAGE_SINGLE_PAYMENT_DONATION,{blogUrl:y.blogUrl,paymentPurposeType:Ce.DONATION,paymentPurposeDonationType:V.DIALOG},{dialogId:r,userId:n,donationAmount:I});_(uv({message:e})),v(t,{state:{from:nn.MESSAGE}})}(p0(p0([],m0(iH(e)),!1),m0(i),!1)),[3,11]):[3,6];case 6:return C.trys.push([6,10,,11]),a=p0(p0([],m0(iH(e)),!1),m0(i),!1),l=p0(p0([],m0(iH(t)),!1),m0(s),!1),b>0?(c={data:a,teaserData:l,price:b},O(!0),R({params:c,onConfirm:function(){return d0(void 0,void 0,void 0,(function(){return f0(this,(function(e){switch(e.label){case 0:return[4,j(c)];case 1:return e.sent(),f(),S(null),null==m||m(),[2]}}))}))},onClose:function(){O(!1)}}),[3,9]):[3,7];case 7:return[4,j({data:a,teaserData:l,price:b})];case 8:C.sent(),null==h||h(),C.label=9;case 9:return[3,11];case 10:return E=C.sent(),T=E.statusText,(N=(null==T?void 0:T.toLowerCase())===K.FORBIDDEN)&&_(Bh.action({userId:n})),g({type:p.ERROR,text:N?h0.forbidden:h0.unknownError}),[3,11];case 11:return[2]}}))}))},publishEvent:W}};const g0={sendButton:"MessageSinglePublisher_sendButton_i79l2",warningDonation:"MessageSinglePublisher_warningDonation_D_vFh",warningDonationIcon:"MessageSinglePublisher_warningDonationIcon_vqXcP",warningDonationText:"MessageSinglePublisher_warningDonationText_SrwG7",userName:"MessageSinglePublisher_userName__x5Vx",fadeIn:"MessageSinglePublisher_fadeIn_cXH6b"};var y0=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},_0=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageSinglePublisher"),E0=function(e){var t,n,o=e.wsChannel,a=e.currentUser,i=e.isDisabled,l=e.showAlert,s=e.goToDialogue,c=e.hasDonationButton,u=e.dialogActive,d=y0((0,Gt.useState)(EH.MESSAGE),2),f=d[0],m=d[1],p=y0((0,Gt.useState)(!0),2),h=p[0],v=p[1],g=nr().isMobile,y=(0,Gt.useRef)(null),_=(0,Gt.useRef)(null),E=Qo(r.DIALOGUE_MESSAGE_TEASER),b=cH({clearOnSubmit:!0,showAlert:l}),S=OZ(),T=OZ(),I=cH({clearOnSubmit:!0,showAlert:l}),N=function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,U()];case 1:return e.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t},C=v0({onSuccessPaidMessageSend:function(){m(EH.MESSAGE)},dialogId:u.id,wsChannel:o,chatMateId:u.chatmate.id,goToDialogue:s,getMessageData:null===(t=y.current)||void 0===t?void 0:t.getEditorData,getTeaserMessageData:null===(n=_.current)||void 0===n?void 0:n.getEditorData,messageAttachments:S.attachments,teaserMessageAttachments:T.attachments,resetAllData:function(){b.clearData(),S.clearAttachments(),I.clearData(),T.clearAttachments()}}),w=C.paidMessagePrice,O=C.donationAmount,A=C.canWriteWithDonation,P=C.isConfirmPending,L=C.isPaidMessageEnabled,R=C.setPaidMessagePrice,k=C.setDonationAmount,D=C.publishEvent,U=C.publishMessage,B=T.areAttachmentsReady&&S.areAttachmentsReady&&(!h||S.attachments.length>0),x=w>0,M=i?_0.blockPublisher:_0.placeholder,F=function(e){var t=e.publishEvent,n=(0,Gt.useMemo)((function(){return(0,ii.debounce)((function(){t({isTyping:!1})}),1500,{leading:!1,trailing:!0})}),[]),r=(0,Gt.useMemo)((function(){return(0,ii.debounce)((function(){t({isTyping:!0})}),1500,{leading:!0,trailing:!1})}),[]);return{triggerStartTypingEvent:(0,Gt.useCallback)((function(){r(),n()}),[])}}({publishEvent:D}).triggerStartTypingEvent,G=function(){F()},H=!(x||A&&!O);return Gt.createElement(Gt.Fragment,null,A&&Gt.createElement("div",{className:g0.warningDonation},Gt.createElement(pB,{glyph:hB.Gc9,className:g0.warningDonationIcon}),Gt.createElement("div",{className:g0.warningDonationText},(0,Qr.getReactText)(_0.warningText,{UserName:function(){return Gt.createElement("span",{className:g0.userName},u.chatmate.name)}}))),w>0&&E&&Gt.createElement(l0,{activeTab:f,onSelect:m,messageButton:!g&&Gt.createElement(c0,{isDisabled:i||P||!B,onClick:N})}),Gt.createElement(r0,{classNames:{actionsContainer:!H&&g0.actionsWithoutSubmitButton},isHidden:f!==EH.MESSAGE,isDisabled:P||i,isSubmitButtonActive:B,isSubmitButtonDisabled:i,isPaidMessageButtonDisabled:!L,shouldAutoFocusOnPublish:!w,publisherRef:y,inlineDataLength:b.inlineDataLength,inlineData:b.inlineData,editorData:b.editorData,setEditorData:b.setEditorData,avatar:a.avatarUrl,dialogId:u.id,renderAttachments:function(){return S.renderAttachments({classNames:{}})},placeholder:M,donationAmount:O,paidMessagePrice:w,canPublish:B,hasSubmitButton:H,hasPaidMessageButton:a.isBlogger,hasDonationButton:c,onPaidMessagePriceSave:R,onDonationAmountSave:k,onKeyDown:G,onIsEmptyInlineContentChange:v,onInlineDataChange:b.onInlineDataChange,onPublish:N,onAttachClick:S.attach}),Gt.createElement(r0,{isHidden:f!==EH.TEASER,isDisabled:P,publisherRef:_,inlineDataLength:I.inlineDataLength,inlineData:I.inlineData,editorData:I.editorData,setEditorData:I.setEditorData,onInlineDataChange:I.onInlineDataChange,hasSubmitButton:!1,onPublish:N,canPublish:B,avatar:a.avatarUrl,dialogId:u.id,renderAttachments:function(){return T.renderAttachments({classNames:{}})},onAttachClick:T.attach,onKeyDown:G,placeholder:_0.teaserPlaceholder,shouldAutoFocusOnPublish:!w}),g&&w>0&&Gt.createElement(c0,{className:g0.sendButton,isDisabled:i||!B,onClick:U}))},b0=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},S0=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const T0={checkbox:"MessageBroadcastPublisher_checkbox_HB6Hf",sendButton:"MessageBroadcastPublisher_sendButton_OeHgZ",hidden:"MessageBroadcastPublisher_hidden_aRyS9"};var I0,N0=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},C0=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageBroadcastPublisher"),w0=function(e){var t,n,o=e.currentUser,a=e.isDisabled,i=e.onMessageSend,l=e.showAlert,s=nr().isMobile,c=(0,Gt.useRef)(null),u=(0,Gt.useRef)(null),d=N0((0,Gt.useState)(!0),2),f=d[0],m=d[1],p=N0((0,Gt.useState)(EH.MESSAGE),2),h=p[0],v=p[1],g=cH({clearOnSubmit:!1,showAlert:l}),y=OZ(),_=OZ(),E=cH({clearOnSubmit:!1,showAlert:l}),b=function(){g.clearData(),y.clearAttachments(),E.clearData(),_.clearAttachments()};(0,Gt.useEffect)((function(){a&&(b(),v(EH.MESSAGE))}),[a]);var S=function(e){var t=e.getMessageData,n=e.getTeaserMessageData,r=e.messageAttachments,o=void 0===r?ea:r,a=e.teaserMessageAttachments,i=void 0===a?ea:a,l=e.onMessageSend,s=(0,Vt.v9)(XO),c=b0((0,Gt.useState)(!1),2),u=c[0],d=c[1],f=nr().dialogues.showCheckboxNotifyUsersEmail.includes(s.id),m=b0((0,Gt.useState)(null),2),p=m[0],h=m[1],v=b0((0,Gt.useState)(null),2),g=v[0],y=v[1];return{paidMessagePrice:p,donationAmount:g,isShowCheckboxNotifyUsersEmail:f,isNotifyUsersByEmail:u,toggleNotifyUsersByEmail:function(){return d(!u)},setPaidMessagePrice:h,setDonationAmount:y,publishMessage:function(){return void 0,void 0,r=function(){var e,r,a,s,c;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(d){switch(d.label){case 0:return[4,t()];case 1:return e=d.sent(),n?[4,n()]:[3,3];case 2:return a=d.sent(),[3,4];case 3:a=[],d.label=4;case 4:return r=a,s=S0(S0([],b0(iH(e)),!1),b0(o),!1),c=S0(S0([],b0(iH(r)),!1),b0(i),!1),l(s,c,p,u),[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function o(e){try{i(r.next(e))}catch(e){n(e)}}function a(e){try{i(r.throw(e))}catch(e){n(e)}}function i(n){var r;n.done?t(n.value):(r=n.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var e,r}}}({getMessageData:null===(t=c.current)||void 0===t?void 0:t.getEditorData,getTeaserMessageData:null===(n=u.current)||void 0===n?void 0:n.getEditorData,messageAttachments:y.attachments,teaserMessageAttachments:_.attachments,resetAllData:b,onMessageSend:i}),T=S.paidMessagePrice,I=S.donationAmount,N=S.setPaidMessagePrice,C=S.setDonationAmount,w=S.publishMessage,O=S.toggleNotifyUsersByEmail,A=S.isShowCheckboxNotifyUsersEmail,P=S.isNotifyUsersByEmail,L=a?"":C0.placeholder,R=Qo(r.DIALOGUE_MESSAGE_TEASER),k=_.areAttachmentsReady&&y.areAttachmentsReady&&(!f||y.attachments.length>0),D=T>0,U=!D;return Gt.createElement(Gt.Fragment,null,T>0&&R&&Gt.createElement(l0,{activeTab:h,onSelect:v,messageButton:!s&&Gt.createElement(c0,{isDisabled:!k,onClick:w})}),Gt.createElement(r0,{classNames:{actionsContainer:!U&&T0.actionsWithoutSubmitButton},isHidden:h!==EH.MESSAGE,publisherRef:c,inlineDataLength:g.inlineDataLength,inlineData:g.inlineData,editorData:g.editorData,setEditorData:g.setEditorData,onInlineDataChange:g.onInlineDataChange,placeholder:L,onPublish:w,avatar:o.avatarUrl,renderAttachments:function(){return y.renderAttachments({classNames:{}})},onAttachClick:y.attach,hasSubmitButton:U,isSubmitButtonActive:k||!a,isSubmitButtonDisabled:a,canPublish:k,hasSmilesButton:!0,hasPaidMessageButton:!a,onPaidMessagePriceSave:N,paidMessagePrice:T,onDonationAmountSave:C,donationAmount:I,onIsEmptyInlineContentChange:m,isDisabled:a}),Gt.createElement(r0,{isHidden:h!==EH.TEASER,publisherRef:u,inlineDataLength:E.inlineDataLength,inlineData:E.inlineData,editorData:E.editorData,setEditorData:E.setEditorData,onInlineDataChange:E.onInlineDataChange,hasSubmitButton:U,hasSmilesButton:!0,onPublish:w,canPublish:k,avatar:o.avatarUrl,renderAttachments:function(){return _.renderAttachments({classNames:{}})},onAttachClick:_.attach,placeholder:C0.teaserPlaceholder}),A&&!a&&Gt.createElement(VM,{containerClassName:T0.checkbox,label:C0.notifyUsersByEmail,checked:P,onToggle:O}),s&&D&&Gt.createElement(c0,{className:T0.sendButton,isDisabled:!k||a,onClick:w}))},O0=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},A0=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},P0=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessagePublisher.components.MessageThankPublisher"),L0=function(e){var t,n=e.initialValue,o=e.onChange,a=e.onUploadingStatusChange,i=(t=n,(0,Gt.useMemo)((function(){return{initialInlineMessage:lH(t.data).initialInlineData,initialMessageAttachments:t.data.filter((function(e){return!oa(e)&&!ra(e)})),initialInlineTeaser:lH(t.teaser).initialInlineData,initialTeaserAttachments:t.teaser.filter((function(e){return!oa(e)&&!ra(e)}))}}),[])),l=(0,Vt.v9)(XO),s=O0((0,Gt.useState)(n.price),2),c=s[0],u=s[1],d=jG().showAlert,f=O0((0,Gt.useState)(EH.MESSAGE),2),m=f[0],p=f[1],h=O0((0,Gt.useState)(!0),2),v=h[0],g=h[1],y=(0,Gt.useRef)(null),_=(0,Gt.useRef)(null),E=Qo(r.DIALOGUE_MESSAGE_TEASER),b=cH({initialValue:i.initialInlineMessage,clearOnSubmit:!0,showAlert:d}),S=OZ({initialValue:i.initialMessageAttachments}),T=OZ({initialValue:i.initialTeaserAttachments}),I=cH({initialValue:i.initialInlineTeaser,clearOnSubmit:!0,showAlert:d});(0,Gt.useEffect)((function(){o({data:A0(A0([],O0(iH(b.inlineData)),!1),O0(S.attachments||[]),!1),teaser:A0(A0([],O0(iH(I.inlineData)),!1),O0(T.attachments||[]),!1),messageTextLength:b.inlineDataLength,teaserTextLength:I.inlineDataLength,price:c})}),[b.inlineData,I.inlineData,S.attachments,T.attachments,c]);var N=T.areAttachmentsReady&&S.areAttachmentsReady;(0,Gt.useEffect)((function(){a(!N)}),[N]);var C=N&&(!v||S.attachments.length>0);return Gt.createElement(Gt.Fragment,null,c>0&&E&&Gt.createElement(l0,{activeTab:m,onSelect:p}),Gt.createElement(r0,{isHidden:m!==EH.MESSAGE,publisherRef:y,inlineDataLength:b.inlineDataLength,inlineData:b.inlineData,editorData:b.editorData,setEditorData:b.setEditorData,onInlineDataChange:b.onInlineDataChange,placeholder:P0.placeholder,avatar:l.avatarUrl,renderAttachments:function(){return S.renderAttachments()},onAttachClick:S.attach,hasSmilesButton:!0,hasSubmitButton:!1,canPublish:C,hasPaidMessageButton:!0,onPaidMessagePriceSave:u,paidMessagePrice:c,onIsEmptyInlineContentChange:g}),Gt.createElement(r0,{isHidden:m!==EH.TEASER,publisherRef:_,inlineDataLength:I.inlineDataLength,inlineData:I.inlineData,editorData:I.editorData,setEditorData:I.setEditorData,onInlineDataChange:I.onInlineDataChange,hasSubmitButton:!1,hasSmilesButton:!0,canPublish:C,avatar:l.avatarUrl,renderAttachments:function(){return T.renderAttachments()},onAttachClick:T.attach,placeholder:P0.teaserPlaceholder}))};!function(e){e.ROOT="root"}(I0||(I0={}));var R0=function(){return R0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R0.apply(this,arguments)},k0=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessageButton"),D0=oo("MessageButton"),U0=function(e){var t=e.className,n=e.userId,r=e.isAuthorized,o=e.showAuth;return Gt.createElement(cM,{onContextMenu:function(e){r||e.preventDefault()},onClick:function(e){r||(e.preventDefault(),o())},to:(0,Yt.getParametrizedUrl)(ir.MESSAGES,{},{userId:n})},Gt.createElement(HB,R0({},Na(D0(I0.ROOT)),{className:cG()(t,"MessageButton_button_rWc7V")}),Gt.createElement(pB,{glyph:hB.f7e,className:"MessageButton_icon_Jfzo6"}),k0.title))};const B0="MessageTyping_animateRound_KDk6j";var x0=(0,Qr.getTranslation)("@boosty/common/components.Messages.MessageTyping"),M0=function(e){var t=e.userName;return Gt.createElement("div",{className:"MessageTyping_container_tfZmn"},Gt.createElement("div",{className:"MessageTyping_animateContainer_DJIVO"},Gt.createElement("div",{className:B0}),Gt.createElement("div",{className:B0}),Gt.createElement("div",{className:B0}),Gt.createElement("div",{className:B0})),Gt.createElement("div",{className:"MessageTyping_chatmate_m3iEP"},(0,Qr.getParametrizedText)(x0.typingMessage,{userName:t})))},F0=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueChat.components.DialogueBroadcast"),G0=function(e){var t=e.currentUser,n=e.selectedTotal,r=e.recipients,o=e.onBackButtonClick,a=e.onMessageBroadcastSend,i=e.showAlert,l=nr().isMobile,s=0===n,c=n>0?qr([(0,Qr.getParametrizedText)(F0.massMailing.title1,{count:n}),(0,Qr.getParametrizedText)(F0.massMailing.title2,{count:n}),(0,Qr.getParametrizedText)(F0.massMailing.title5,{count:n})],n):F0.massMailing.title;return Gt.createElement(Gt.Fragment,null,l&&Gt.createElement("div",{className:"DialogueBroadcast_chatMates_uWQYf"},Gt.createElement(pB,{glyph:hB.WTy,className:"DialogueBroadcast_iconArrow_DYRD3",onClick:o}),r.slice(0,3).map((function(e){return Gt.createElement(PB,{key:e.id,className:"DialogueBroadcast_recipientAvatar_DWGZw",size:g.S,img:e.avatarUrl})})),Gt.createElement("div",{className:"DialogueBroadcast_recipientsInfo_biGJn"},n)),Gt.createElement(cF,{classNames:{root:"DialogueBroadcast_broadcast_i5J1A",picture:cG()("DialogueBroadcast_picture_zUo3m",n>0?"DialogueBroadcast_messagesEmpty_eeAce":"DialogueBroadcast_subscribersEmpty_l6Ryc")},title:c}),Gt.createElement(w0,{className:"DialogueBroadcast_publisher_n0HDf",currentUser:t,isDisabled:s,onMessageSend:a,showAlert:i}))},H0=function(e){var t=e.children,n=e.classNames,r=void 0===n?{}:n,o=e.iconGlyph;return Gt.createElement(ZF,{className:r.root,classNameButton:fB()("ExtraActionsMenu_iconContainer_7g7ne",r.button),classNameContainer:fB()("ExtraActionsMenu_dropdownContainer__iAbn",r.dropdown),button:Gt.createElement(pB,{glyph:o||hB.jgU,className:fB()("ExtraActionsMenu_icon_MuAII",r.icon)})},t)},W0=function(e){var t=e.text,n=e.className,r=e.onClick,o=e.isClickableOnce,a=e.children,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),l=i[0],s=i[1];return Gt.createElement("button",{className:fB()("ExtraActionsMenuItem_root_Bfneb",n),type:"button",onClick:function(e){r(e),s(!0)},disabled:o&&l},a||t)};const V0={root:"DialogueChatMate_root_Nd8vP",iconArrow:"DialogueChatMate_iconArrow_fzV0r",user:"DialogueChatMate_user_dYBst",avatar:"DialogueChatMate_avatar_u9ZBV",info:"DialogueChatMate_info_Y_nxK",username:"DialogueChatMate_username_RVy0V",description:"DialogueChatMate_description_a9b2f",iconDotsContainer:"DialogueChatMate_iconDotsContainer_v4IgP",iconDots:"DialogueChatMate_iconDots__XTbD",fadeIn:"DialogueChatMate_fadeIn_Thxwc"};var j0=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},z0=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Y0=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueChatMate"),K0=function(e){var t=e.currentUser,n=e.chatmate,r=e.relation,o=e.isVisibleBackButton,a=Mf(),i=(0,Vt.I0)(),l=(0,Vt.v9)(mR),s=n.id,c=n.avatarUrl,u=n.name,d=n.isBlogger,f=n.url,m=t.blogUrl,p=l.map((function(e){return e.id})).includes(s),h=r.type===st.SUBSCRIBER?(0,Qr.getParametrizedText)(Y0.subscribedAt,{startAt:go(r.startAt,"dd/MM/yyyy")}):"";return Gt.createElement("div",{className:V0.root},Gt.createElement("div",{className:V0.user},o&&Gt.createElement(pB,{glyph:hB.WTy,className:V0.iconArrow,onClick:function(){a((0,Yt.getParametrizedUrl)(ir.MESSAGES))}}),d?Gt.createElement(cM,{className:V0.avatar,to:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:f})},Gt.createElement(PB,{size:g.S,img:c})):Gt.createElement("div",{className:V0.avatar},Gt.createElement(PB,{size:g.S,img:c})),Gt.createElement("div",{className:V0.info},Gt.createElement("div",{className:V0.username},u),h&&Gt.createElement("div",{className:V0.description},h))),Gt.createElement(H0,{classNames:{root:V0.iconsDotsContainer,icon:V0.iconDots},iconGlyph:hB.NKR},[p?Gt.createElement(W0,{text:Y0.removeFromBlackList,key:"removeFromBlackList",onClick:function(){return j0(void 0,void 0,void 0,(function(){return z0(this,(function(e){switch(e.label){case 0:return[4,i((0,dm.Ax)(_m.action)({blogUrl:m,userId:s}))];case 1:return e.sent(),[4,i((0,dm.Ax)(Bh.action)({userId:s}))];case 2:return e.sent(),[2]}}))}))}}):Gt.createElement(W0,{text:Y0.addToBlackList,key:"blackList",onClick:function(){return j0(void 0,void 0,void 0,(function(){return z0(this,(function(e){switch(e.label){case 0:return[4,i((0,dm.Ax)(bm.action)({blogUrl:m,userId:s}))];case 1:return e.sent(),[4,i((0,dm.Ax)(Bh.action)({userId:s}))];case 2:return e.sent(),[2]}}))}))}})]))},q0=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMessages.components.DialogueMessageEmpty.utils.getDialogueMessageEmptyInfo"),X0=function(e){var t,n=e.relation,r=e.subscriptionLevelsBlog,o=e.isOnOurBlackListed,a=e.isOneWayCommunication,i=e.isEmpty,l=e.onButtonClick,s=function(e){var t=e.relation,n=t.isBlackListed,r=t.canWrite,o=t.needSub,a=t.needDonation,i=t.needLevel,l=e.subscriptionLevelsBlog,s=e.isOnOurBlackListed,c=e.isOneWayCommunication,u=e.isEmpty,d=s?"outlined":"link",f=!r||n||s||o,m=(o===ct.PAID||o===ct.LEVEL)&&!l.length,p=!r&&a&&!o&&!i||r&&!s||u&&c?{title:q0.noMessages.title,description:q0.noMessages.description,button:""}:n&&!s||m?{title:q0.blackListed.title,description:q0.blackListed.description,button:""}:s?{title:q0.onOurBlackListed.title,button:q0.onOurBlackListed.button}:o?{title:q0.needSub.title,description:o===ct.LEVEL?(0,Qr.getParametrizedText)(q0.needSub.description[o],{subscriptionLevelName:i.name}):q0.needSub.description[o],button:q0.needSub.button}:{title:q0.blackListed.title,description:q0.blackListed.description,button:""};return{title:p.title,description:p.description,button:p.button,buttonView:d,isWarning:f}}({isOnOurBlackListed:o,isOneWayCommunication:a,isEmpty:i,relation:n,subscriptionLevelsBlog:r}),c=s.isWarning,u=s.button,d=s.buttonView,f=s.title,m=s.description;return void 0!==n.canWrite?Gt.createElement(cF,{classNames:{root:cG()((t={},t.DialogueMessageEmpty_empty_nyujA=i,t)),picture:cG()("DialogueMessageEmpty_picture_Lyr3J",c?"DialogueMessageEmpty_warningPicture_g7s2I":"DialogueMessageEmpty_emptyPicture_XMgBo")},title:f,description:m,button:u,buttonView:d,onClick:l}):null};const Q0="DialogMessageSeparator_line_JL8uL";var J0=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMessages.components.DialogueMessageList.components.DialogMessageSeparator"),Z0=Gt.forwardRef((function(e,t){return Gt.createElement("div",{className:"DialogMessageSeparator_separatorMessages_x9VuL",ref:t},Gt.createElement("div",{className:Q0}),Gt.createElement("div",{className:"DialogMessageSeparator_newMessages_mgxyB"},J0.newMessages),Gt.createElement("div",{className:Q0}))}));Z0.displayName="DialogMessageSeparator";var $0=function(e){var t=e.userId,n=e.containerRef,r=e.message,o=e.onShowMessage,a=e.children,i=(0,Gt.useRef)(null),l=vD({element:i,container:n,rootMargin:"0px 0px 50px 0px"}),s=r.id,c=r.isRead,u=t===r.authorId;return(0,Gt.useEffect)((function(){u||!l||c||o(s)}),[l]),Gt.createElement("div",{ref:i},a)};const e1="DialogueMessageList_spinner_SvbLZ";var t1=function(e){var t=e.className,n=e.userId,r=e.blogUrl,o=e.dialogue,a=e.selectedIdsMessage,i=e.isOneWayCommunication,l=e.isBlackListedChatMate,s=e.renderEmpty,c=e.offsetStart,u=e.offsetEnd,d=e.messageGroups,f=e.onMessageRead,m=e.onMessageClick,p=e.onVideoClick,h=o.id,v=o.relation,g=v.canWrite,y=v.needSub,_=v.needDonation,E=v.needLevel,S=v.isBlackListed,T=o.messages.extra,I=T.isFirst,N=T.isLast,C=o.signedQuery,w=o.chatmate,O=!i&&!(_&&!y&&!E&&!g)&&(S||l||!g),A=Object.keys(d),P=function(e){var t=e.dialogId,n=e.offsetStart,r=e.offsetEnd,o=e.isFirst,a=e.isLast,i=(0,Vt.I0)(),l=UW((0,Gt.useState)(fW.TOP),2),s=l[0],c=l[1],u=UW((0,Gt.useState)(0),2),d=u[0],f=u[1],m=UW((0,Gt.useState)(o),2),p=m[0],h=m[1],v=UW((0,Gt.useState)(a),2),g=v[0],y=v[1],_=UW((0,Gt.useState)(!o),2),E=_[0],b=_[1],S=UW((0,Gt.useState)(!a),2),T=S[0],I=S[1],N=UW((0,Gt.useState)(!1),2),C=N[0],w=N[1],O=(0,Gt.useRef)(null),A=(0,Gt.useRef)(null),P=(0,Gt.useRef)(null),L=(0,Gt.useRef)(null),R=vD({element:L,container:O,rootMargin:"10px 0px 0px 0px"}),k=vD({element:P,container:O,rootMargin:"0px 0px 40px 0px"}),D=O.current,U=(0,Gt.useCallback)((function(){D&&(D.scrollTop=D.scrollHeight-D.getBoundingClientRect().height)}),[D]),B=(0,Vt.v9)(UP);return(0,Gt.useLayoutEffect)((function(){var e;(null===(e=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],UW(B),!1).reverse()[0])||void 0===e?void 0:e.isSending)&&(w(!0),U())}),[B.length]),(0,Gt.useLayoutEffect)((function(){if(D){var e=new ResizeObserver((function(){s===fW.TOP&&E?D.scrollTop+=D.scrollHeight-d:s===fW.BOTTOM&&T&&(D.scrollTop-=D.scrollHeight-d),C||(A.current&&A.current.scrollIntoView(Zd("center","auto")),E&&T||w(!0)),k&&U(),f(D.scrollHeight)}));return e.observe(D.children.item(0)),e.observe(D.children.item(2)),function(){e.disconnect()}}return Yt.noop}),[D,null==B?void 0:B.length]),(0,Gt.useEffect)((function(){R&&(kW(void 0,void 0,void 0,(function(){var e;return DW(this,(function(r){switch(r.label){case 0:return p?[3,3]:(b(!0),[4,i((0,dm.Ax)(zh.action)({dialogId:t,limit:20,offset:n.toString(),reverse:!0}))]);case 1:return e=r.sent().extra,[4,(0,Yt.delay)(150)];case 2:r.sent(),b(!1),h(e.isLast),r.label=3;case 3:return[2]}}))})),c(fW.TOP))}),[R]),(0,Gt.useEffect)((function(){k&&(kW(void 0,void 0,void 0,(function(){var e;return DW(this,(function(n){switch(n.label){case 0:return g?[3,3]:(I(!0),[4,i((0,dm.Ax)(zh.action)({dialogId:t,limit:20,offset:r.toString(),reverse:!1}))]);case 1:return e=n.sent().extra,[4,(0,Yt.delay)(150)];case 2:n.sent(),I(!1),y(e.isLast),n.label=3;case 3:return[2]}}))})),c(fW.BOTTOM))}),[k]),{containerRef:O,newMessageSeparatorRef:A,startRef:L,endRef:P,isLoadingBottom:T,isLoadingTop:E}}({dialogId:h,offsetStart:c,offsetEnd:u,isFirst:I,isLast:N}),L=P.containerRef,R=P.newMessageSeparatorRef,k=P.startRef,D=P.endRef,U=P.isLoadingTop,B=P.isLoadingBottom;return Gt.createElement("div",{className:cG()(t,"DialogueMessageList_list_mPuCc"),ref:L},Gt.createElement("div",{ref:D}),Gt.createElement("div",{className:"DialogueMessageList_scrollContainer_Nh9ik"},U&&Gt.createElement(uM,{className:e1,size:50}),A.map((function(e,t){return Gt.createElement("div",{className:"DialogueMessageList_messageGroup_R08Pt",key:t},Gt.createElement("div",{className:"DialogueMessageList_dateContainer_kxmvQ"},Gt.createElement("div",{className:"DialogueMessageList_date_g53_o"},e)),d[e].map((function(e,t,o){return Gt.createElement($0,{key:e.id,userId:n,message:e,containerRef:L,onShowMessage:f},function(e,t,o){var i=t>0?o[t-1]:e,l=n===e.authorId,s=i.isRead,c=e.isRead,u=e.isDeleted,d=!l&&!c&&!u&&(i&&s||i.id===e.id),f=a.includes(e.id);return Gt.createElement(Gt.Fragment,null,d&&Gt.createElement(Z0,{ref:R}),Gt.createElement(Hd.Provider,{value:b.MESSAGE},Gt.createElement(r$,{key:e.id,isSelected:f,onMessageClick:m,onVideoClick:p,userId:n,blogUrl:r,chatMate:w,message:e,signedQuery:C})))}(e,t,o))})))})),O&&s(),B&&Gt.createElement(uM,{className:e1,size:50})),Gt.createElement("div",{ref:k}))},n1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMessages.components.DialogueMessageSelector"),r1=function(e){var t,n=e.selectedIds,r=e.onDeleteClick,o=e.onResetClick;return Gt.createElement("div",{className:cG()("DialogueMessageSelector_container_tG8C3",(t={},t.DialogueMessageSelector_visible_nSlCX=n.length>0,t))},Gt.createElement("div",{className:"DialogueMessageSelector_text_Vn9Bj"},n.length," ",qr([n1.messages1,n1.messages2,n1.messages5],n.length),Gt.createElement(pB,{glyph:hB.bMz,onClick:o,className:"DialogueMessageSelector_reset_sVoKR"})),Gt.createElement(HB,{className:"DialogueMessageSelector_button_nupS6",onClick:r},Gt.createElement(pB,{glyph:hB.Fzz,className:"DialogueMessageSelector_icon_eYAys"}),Gt.createElement("span",{className:"DialogueMessageSelector_buttonText_y3w8s"},n1.delete)))},o1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMessages.components.DialogueMessageWarning"),a1=function(){return Gt.createElement("div",{className:"DialogueMessageWarning_root_r47b7"},Gt.createElement("div",{className:"DialogueMessageWarning_icon_E96iT"}),Gt.createElement("div",{className:"DialogueMessageWarning_text_eoB4l"},o1.text," ",Gt.createElement(cM,{className:"DialogueMessageWarning_link_z73p9",to:(0,Yt.getParametrizedUrl)(ir.SETTINGS_PRIVACY)},o1.link)))},i1=function(e){var t=e.dialogue,n=e.currentUser,r=n.blogUrl,o=n.id,a=e.subscriptionLevels,i=e.onMessagesDelete,l=e.onVideoClick,s=e.showAlert,c=e.isOneWayCommunication,u=function(e){var t=e.blogUrl,n=e.dialogue,r=e.onMessagesDelete,o=e.showAlert,a=(0,Vt.I0)(),i=(0,Vt.v9)(gP),l=(0,Vt.v9)(UP),s=n.id,c=n.chatmate,u=n.relation,d=u.needSub,f=u.needLevel,m=u.canWriteMe,h=u.isBlackListed,v=VW((0,Gt.useState)([]),2),g=v[0],y=v[1],_=VW((0,Gt.useState)(null),2),E=_[0],b=_[1],S=Df.isVisibleState,T=l.filter((function(e){return g.includes(e.id)})).filter((function(e){return e.authorId!==c.id})).length>0,I=l.filter((function(e){return g.includes(e.id)})).filter((function(e){return e.donation})).length>0,N=l.length?l[0].id:0,C=l.length?l[l.length-1].id:0,w=(0,Vt.v9)(mR).map((function(e){return e.id})).includes(c.id),O=function(){return jW([],VW(l),!1).reverse().reduce((function(e,t){var n=e[e.length-1],r=(null==n?void 0:n.authorId)===t.authorId;return e.push(GW(GW({},t),{isVisibleAvatar:r})),e}),[]).reverse()},A=O(),P=No(Date.now()),L=(0,FW.Z)(A,(function(e){var t=go(P,"dd/MMMM/yyyy"),n=go(e.createdAt,"dd/MMMM/yyyy");return t===n?zW.today:n})),R=(0,Gt.useMemo)((function(){return(0,uU.Z)((function(e){S&&a(Wh.action({dialogId:s,messageId:e}))}),500)}),[S]);(0,Gt.useEffect)((function(){var e=null==n?void 0:n.relation.needSub,t=e===ct.FOLLOW,r=e===ct.PAID,o=e===ct.LEVEL;(t||r||o)&&a((0,dm.Ax)(Zh.action)({blogUrl:i,showFree:!1}))}),[n]),(0,Gt.useEffect)((function(){l.filter((function(e){return g.includes(e.id)})).length&&y([])}),[l]);var k=function(){E&&a(Wh.action({dialogId:s,messageId:E}))};return(0,Gt.useEffect)((function(){return window.addEventListener("focus",k),function(){window.removeEventListener("focus",k)}}),[S,E]),{isBlackListed:h,isBlackListedChatMate:w,hasDonations:I,canWriteMe:m,chatmate:c,needSub:d,needLevel:f,selectedIdsMessage:g,dialogueMessageGroups:L,offsetStart:N,offsetEnd:C,onReadMessage:function(e){S?R(e):b(e)},dialogueMessagesData:O,onDeleteClick:function(){return r(g,T,I)},onResetClick:function(){return y([])},onRemoveFromBlackList:function(){return HW(void 0,void 0,void 0,(function(){return WW(this,(function(e){switch(e.label){case 0:return a(tv()),[4,a((0,dm.Ax)(_m.action)({blogUrl:t,userId:c.id}))];case 1:return e.sent(),[4,a((0,dm.Ax)(Bh.action)({userId:c.id}))];case 2:return e.sent(),[2]}}))}))},onFollowBlog:function(){return HW(void 0,void 0,void 0,(function(){var e;return WW(this,(function(t){switch(t.label){case 0:return[4,a((0,dm.Ax)(ly.action)({blogUrl:c.url}))];case 1:return t.sent(),[4,a((0,dm.Ax)(Uh.action)({userId:c.id}))];case 2:return t.sent(),e=(0,Qr.getParametrizedText)(zW.infoSubscribe,{blogUrl:c.url}),o({type:p.SUCCESS,text:e}),[2]}}))}))},onMessageSelect:function(e){var t=g.includes(e)?g.filter((function(t){return t!==e})):jW(jW([],VW(g),!1),[e],!1);y(t)},getFormattedCreatedAt:function(e){return go(e,"dd/MM/yyyy")}}}({blogUrl:r,dialogue:t,onMessagesDelete:i,showAlert:s}),d=u.isBlackListed,f=u.isBlackListedChatMate,m=u.canWriteMe,h=u.needSub,v=u.chatmate,g=u.needLevel,y=u.selectedIdsMessage,_=u.offsetStart,E=u.offsetEnd,b=u.dialogueMessageGroups,S=u.dialogueMessagesData,T=u.onReadMessage,I=u.onDeleteClick,N=u.onResetClick,C=u.onRemoveFromBlackList,w=u.onMessageSelect,O=u.onFollowBlog,A=Mf(),P=S(),L=!P.length,R=!1===m&&!f&&!d,k=function(){var e=f?C:h===ct.FOLLOW?O:D,n=0===P.length;return Gt.createElement(X0,{isEmpty:n,isOneWayCommunication:c,relation:t.relation,subscriptionLevelsBlog:a.levels,isOnOurBlackListed:f,onButtonClick:e})},D=function(){var e=t.id?{dialogId:t.id}:{userId:v.id},n=a.levels.find((function(e){return e.price>0})),o=(0,Yt.getParametrizedUrl)(ir.BLOG_MESSAGE_PURCHASE,{blogUrl:r,levelId:(null==g?void 0:g.id)||n.id},e);A(o,{state:{from:nn.MESSAGE}})};return Gt.createElement("div",{className:"DialogueMessages_root_nmxZo"},R&&Gt.createElement(a1,null),Gt.createElement(r1,{onResetClick:N,onDeleteClick:I,selectedIds:y}),Gt.createElement("div",{className:"DialogueMessages_messages_OVh9e"},L&&k(),P.length>0&&Gt.createElement(t1,{offsetStart:_,offsetEnd:E,isOneWayCommunication:c,isBlackListedChatMate:f,blogUrl:r,userId:o,onMessageRead:T,onMessageClick:w,onVideoClick:l,selectedIdsMessage:y,dialogue:t,messageGroups:b,renderEmpty:k})))};const l1="DialogueSingle_messagesEmpty_hgH1w",s1="DialogueSingle_picture_yqOgk",c1="DialogueSingle_empty_C0eDV";var u1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueChat.components.DialogueSingle"),d1=function(e){var t,n,o,a=e.dialogueActive,i=e.dialogList,l=e.currentUser,s=e.subscriptionLevels,c=e.isFetched,u=e.isDialogueOpened,d=e.isDisabled,f=e.isAppliedFilter,m=e.onMessagesDelete,p=e.onVideoClick,h=e.goToDialogue,v=e.showAlert,g=nr(),y=g.isMobile,_=g.dialogues.canNotReceiveMessagesUsers,E=null===(t=null==a?void 0:a.chatmate)||void 0===t?void 0:t.id,b=_.includes(E),S=Qo(r.DIALOGUE_DONATION),T=(null===(n=null==a?void 0:a.chatmate)||void 0===n?void 0:n.isBlogger)&&S;return u?Gt.createElement(Gt.Fragment,null,!c&&Gt.createElement("div",{className:"DialogueSingle_spinnerContainer_WCDdT"},Gt.createElement(uM,null)),c&&a&&Gt.createElement(Gt.Fragment,null,Gt.createElement(K0,{isVisibleBackButton:y,currentUser:l,chatmate:a.chatmate,relation:a.relation}),Gt.createElement(i1,{isOneWayCommunication:b,subscriptionLevels:s,onMessagesDelete:m,onVideoClick:p,currentUser:l,dialogue:a,showAlert:v}),(null===(o=a.chatmate)||void 0===o?void 0:o.isTyping)&&Gt.createElement(M0,{userName:a.chatmate.name}),!b&&Gt.createElement(E0,{className:"DialogueSingle_publisher_SbKBP",wsChannel:a.wsChannel,dialogActive:a,currentUser:l,isDisabled:d,goToDialogue:h,hasDonationButton:T,showAlert:v}))):Gt.createElement(Gt.Fragment,null,i.length||f?Gt.createElement(cF,{classNames:{root:c1,picture:cG()(s1,l1)},title:u1.emptyDialogueChatWhenNeedSelect.title,description:u1.emptyDialogueChatWhenNeedSelect.description}):Gt.createElement(cF,{classNames:{root:c1,picture:cG()(s1,l1)},title:u1.emptyDialogueChatWhenHasNotContacts.title,description:u1.emptyDialogueChatWhenHasNotContacts.description}))},f1=function(e){var t=e.isAppliedFilter,n=void 0!==t&&t,r=e.dialogId,o=e.dialogueMode,a=e.selectedTotal,i=e.recipients,l=e.userId,s=e.showAlert,c=e.onVideoClick,u=e.onMessagesDelete,d=e.onMessageBroadcastSend,f=e.onBackButtonClick,m=Mf(),p=function(e){return m(e)},h=LW({dialogId:r,userId:l,dialogueMode:o,onGoToMessages:p}),v=h.currentUser,g=h.dialogueActive,y=h.isFetched,_=h.isDialogueOpened,E=h.isDisabledPublisher,b=h.dialogList,S=h.subscriptionLevels,T=h.clearStorage;return(0,Gt.useEffect)((function(){return function(){var e=window.location.pathname;Boolean(yf("".concat(ir.MESSAGES,"/*"),e))||T()}}),[]),Gt.createElement("div",{className:"DialogueChat_dialog_gnN1g"},Gt.createElement("div",{className:"DialogueChat_dialogWrapper_XGJ8w"},o===ft.BROADCAST?Gt.createElement(G0,{selectedTotal:a,recipients:i,currentUser:v,goToDialogue:p,onMessageBroadcastSend:d,onBackButtonClick:f,showAlert:s}):Gt.createElement(d1,{dialogueActive:g,dialogList:b,currentUser:v,isAppliedFilter:n,isDialogueOpened:_,isFetched:y,isDisabled:E,subscriptionLevels:S,onVideoClick:c,onMessagesDelete:u,goToDialogue:p,showAlert:s})))},m1=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},p1=function(e){var t=e.selectedItem,n=e.items;return Gt.createElement(Dx,{trigger:gx.CLICK,align:yx.RIGHT,classNames:{root:"DialogueSortSelector_tooltipContainer_tQoqv"},content:n.map((function(n,r){var o=m1(n.value,2),a=o[0],i=o[1],l=m1(t.value,2),s=l[0],c=l[1],u=a===s&&i===c;return Gt.createElement(YF,{key:r,onRadioButtonClick:function(){return e.onSelect(n)},label:n.getLabel(),isChecked:u,classNames:{root:"DialogueSortSelector_radioButton_W7BDJ",label:"DialogueSortSelector_radioButtonLabel_fWNZt"}})}))},Gt.createElement("div",{className:"DialogueSortSelector_sort_oRwpm"},Gt.createElement(pB,{className:cG()("DialogueSortSelector_icon_iMOX6","DialogueSortSelector_marginIcon_wSA56"),glyph:hB.Mro}),t.getLabel()))},h1=function(e){var t=e.chatmate,n=e.onContactClick,r=t.id,o=t.avatarUrl,a=t.name;return Gt.createElement("div",{className:"DialogueContactItem_root_O4V7d",onClick:function(){return n(r)}},Gt.createElement(PB,{className:"DialogueContactItem_avatar_Zrr7d",size:g.S,img:o}),Gt.createElement("div",{className:"DialogueContactItem_name_vwZVa"},a))};const v1={iconEmpty:"DialogueContactList_iconEmpty_ejh8n",root:"DialogueContactList_root_hMygX",header:"DialogueContactList_header_Pqg66",list:"DialogueContactList_list_cYSzN",innerListContainer:"DialogueContactList_innerListContainer_CjwU7",emptyContainer:"DialogueContactList_emptyContainer_VOQSO",fadeIn:"DialogueContactList_fadeIn_MS2wY"};var g1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueContactList"),y1=function(e){var t=e.dialogueContactList,n=e.isVisibleLoader,r=e.isAppliedFilter,o=e.selectedSortItem,a=e.sortTypesList,i=e.fetchMore,l=e.onContactSelect,s=e.onSortChange,c=Mf(),u=(0,Vt.v9)(LP),d=(0,Gt.useRef)(null),f=(0,Gt.useRef)(null),m=vD({element:f,container:d,rootMargin:"0px 0px 0px 0px"}),p=u.isFetching,h=!n&&p&&t.length>0&&m,v=function(e){var t=(0,Yt.getParametrizedUrl)(ir.MESSAGES,{},{userId:e});c(t),l()};return(0,Gt.useEffect)((function(){m&&!p&&t.length&&i()}),[m]),Gt.createElement("div",{className:v1.root},t.length>0&&Gt.createElement("div",{className:v1.header},Gt.createElement(p1,{items:a,selectedItem:o,onSelect:function(e){return s(e)}})),n&&Gt.createElement(uM,null),Gt.createElement("div",{ref:d,className:v1.list},Gt.createElement("div",{className:v1.innerListContainer},!n&&(null==t?void 0:t.length)>0&&t.map((function(e){return Gt.createElement(h1,{onContactClick:v,key:e.id,chatmate:e})}))),Gt.createElement("div",{ref:f}),h&&Gt.createElement(uM,{size:50,className:v1.spinnerMoreLoader}),!n&&!t.length&&(r?Gt.createElement(cF,{classNames:{root:v1.emptyContainer,icon:v1.iconEmpty},icon:hB.B0F,title:g1.hasNotContactsTitleWhenAppliedFilter,description:g1.hasNotContactsDescriptionWhenAppliedFilter}):Gt.createElement(cF,{classNames:{root:v1.emptyContainer},title:g1.hasNotContactsTitle,description:g1.hasNotContactsDescription}))))},_1=(0,Qr.getTranslation)("@boosty/common/components.SearchInput"),E1=function(e){var t=e.className,n=e.classNameInput,r=e.placeholder,o=void 0===r?_1.placeholder:r,a=e.searchValue,i=e.onChange,l=e.hasAutoFocus,s=void 0===l||l;return Gt.createElement("div",{className:cG()(t,"SearchInput_container_QkRii")},Gt.createElement(pB,{glyph:hB.jVj,className:"SearchInput_iconSearch_L_Z5x"}),Gt.createElement(Zx,{autoFocus:s,classNameInput:cG()(n,"SearchInput_input_XtETj"),placeholder:o,value:a,onChange:i}))},b1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueContactsFilter.components.DialogueBroadcastFilterButton"),S1=function(e){return Gt.createElement(HB,{className:"DialogueBroadcastFilterButton_button_V74lQ",onClick:e.onClick},Gt.createElement(pB,{className:"DialogueBroadcastFilterButton_icon_ej4iS",glyph:hB.azK}),b1.button,!e.isDefaultFilter&&Gt.createElement("div",{className:"DialogueBroadcastFilterButton_statusFilter_QWXEu"}))},T1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueSubscriptionLevelsSelect"),I1=function(e){var t=e.className,n=e.subscriptionLevels,r=e.subscriptionLevelsSelected,o=e.isDisabled,a=n.filter((function(e){return null==r?void 0:r.includes(null==e?void 0:e.id)})),i=1===a.length?a[0].title:null;return Gt.createElement(lF,{className:t,classNames:{option:"DialogueSubscriptionLevelsSelect_optionItem_ux8_1",optionCheckBoxLabel:"DialogueSubscriptionLevelsSelect_optionCheckBoxLabel_MgRYz",options:"DialogueSubscriptionLevelsSelect_optionsContainer_hYyca"},isDisabled:o,labelProp:"title",isMulti:!0,onSelect:function(t){return e.onSelect(t.map((function(e){return e.id})))},options:n,placeholder:T1.placeholder,selected:a,selectionLabel:i,valueProp:"id"})},N1=function(){return N1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},N1.apply(this,arguments)},C1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueContactsFilter.components.DialogueContactSelector"),w1=function(e){var t,n=e.subscriptionLevels,r=e.selectedTypesChatMate,o=e.onTypesChatMateSelect,a=e.selectedSubscriptionLevels,i=e.onSubscriptionLevelsSelect,l=e.isDefaultFilter,s=[{id:yH.WITH_SUBSCRIPTIONS,value:yH.WITH_SUBSCRIPTIONS,valueObject:{id:yH.WITH_SUBSCRIPTIONS},label:C1.subscriptions},{id:yH.WITH_SUBSCRIBERS,value:yH.WITH_SUBSCRIBERS,valueObject:{id:yH.WITH_SUBSCRIBERS},label:C1.subscribers}],c=function(e){var t=e.selectedTypesChatMate,n=e.onTypesChatMateSelect,r=function(e){return e.deleted?"".concat(e.name," (").concat(uW.deleted,")"):e.name};return{subscriptionLevelsOptions:cW([],sW(e.subscriptionLevels.map((function(e){return{id:e.id,title:r(e)}}))),!1),isDisabledSubscriptionLevelsSelect:!t.includes(yH.WITH_SUBSCRIBERS),isSelectedChatMateTypes:function(e){return t.includes(e.id)},onChatMateTypesSelect:function(e){var r=t.includes(e.id)?t.filter((function(t){return e.id!==t})):cW(cW([],sW(t),!1),[e.id],!1);n(r)}}}({subscriptionLevels:n,selectedTypesChatMate:r,onTypesChatMateSelect:o}),u=c.subscriptionLevelsOptions,d=c.isDisabledSubscriptionLevelsSelect,f=c.isSelectedChatMateTypes,m=c.onChatMateTypesSelect,p=(0,Gt.useRef)(null),h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),v=h[0],g=h[1];return Gt.createElement("div",{className:"DialogueContactSelector_root_yWThI",ref:p},Gt.createElement("button",{className:cG()("DialogueContactSelector_button_pw6lL",(t={},t.DialogueContactSelector_buttonActive_inkz2=v,t)),onClick:function(){return g(!v)}},Gt.createElement(pB,{className:"DialogueContactSelector_icon_ojS5j",glyph:hB.azK}),!l&&Gt.createElement("div",{className:"DialogueContactSelector_statusFilter_PY_1o"})),v&&Gt.createElement(Dx,{classNames:{root:"DialogueContactSelector_tooltip_uTiD1"},onClickOutside:function(e){p.current.contains(e.target)||g(!1)},trigger:gx.CLICK},s.map((function(e){return Gt.createElement($M,N1({},e,{classNameOption:"DialogueContactSelector_selectOptionItem_x7uuA",withCheckBox:!0,key:e.id,selected:f(e.valueObject),onSelect:m}))})),u.length>0&&Gt.createElement(I1,{isDisabled:d,className:"DialogueContactSelector_subscriptionLevelsSelect_bu1_w",subscriptionLevels:u,subscriptionLevelsSelected:a,onSelect:i})))};const O1="DialogueCreateButton_iconDropdownItem_w0bCl",A1="DialogueCreateButton_dropdownItem_KxmoQ",P1="DialogueCreateButton_root_fkmig",L1="DialogueCreateButton_icon_n6dyg";var R1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueContactsFilter.components.DialogueCreateButton"),k1=function(e){var t=e.isBlogger,n=e.onClick,o=Qo(r.DIALOGUE_BROADCAST),a=function(e){return function(){return n(e)}};return t&&o?Gt.createElement(ZF,{className:P1,classNameButton:"DialogueCreateButton_iconContainer_rjVMy",classNameContainer:"DialogueCreateButton_dropdownContainer_Tv9fr",button:Gt.createElement(pB,{glyph:hB.FCB,className:L1})},Gt.createElement($F,{title:Gt.createElement("div",{className:A1,onClick:a(_H.DIALOGUE_CONTACT_LIST)},Gt.createElement(pB,{className:O1,glyph:hB.h75}),R1.newDialog)}),Gt.createElement($F,{title:Gt.createElement("div",{className:A1,onClick:a(_H.DIALOGUE_BROADCAST)},Gt.createElement(pB,{className:O1,glyph:hB.JBA}),R1.newMailing)})):Gt.createElement("div",{className:P1,onClick:a(_H.DIALOGUE_CONTACT_LIST)},Gt.createElement(pB,{className:L1,glyph:hB.FCB}))},D1=function(e){var t=e.className,n=e.dialogueMode,r=e.isVisibleCreateDialogueButton,o=e.isBlogger,a=e.isDefaultFilter,i=e.isDefaultFilterMailingList,l=e.searchValue,s=e.onSearchInputChange,c=e.onSectionChange,u=e.selectedSubscriptionLevels,d=e.selectedTypesChatMate,f=e.onTypesChatMateSelect,m=e.subscriptionLevels,p=e.onSubscriptionLevelsSelect,h=e.onMailingFilterButtonClick,v=e.userFlags,g=void 0===v?{}:v;return Gt.createElement("div",{className:cG()(t,"DialogueContactsFilter_root_FaVyq")},Gt.createElement(E1,{hasAutoFocus:g[M.HAS_DIALOG_SETTINGS_PROMO],className:"DialogueContactsFilter_search_m2F9t",classNameInput:"DialogueContactsFilter_searchInput_n624O",searchValue:l,onChange:s}),o&&(n===ft.DEFAULT?Gt.createElement(w1,{isDefaultFilter:a,subscriptionLevels:m,selectedTypesChatMate:d,selectedSubscriptionLevels:u,onSubscriptionLevelsSelect:p,onTypesChatMateSelect:f}):Gt.createElement(S1,{isDefaultFilter:i,onClick:h})),r&&Gt.createElement(k1,{onClick:c,isBlogger:o}))},U1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueList.components.DialogueBroadcastMessagesInfo"),B1=function(e){var t=e.totalRecipients,n=e.isMailingCompleted,r=(0,Vt.I0)(),o=n?U1.completed:U1.process,a=o.title,i=o.description;return Gt.createElement("div",{className:"DialogueBroadcastMessagesInfo_root_E1K8T"},Gt.createElement("div",{className:"DialogueBroadcastMessagesInfo_top_k1VEF"},Gt.createElement("div",{className:"DialogueBroadcastMessagesInfo_iconWrapper_YbQju"},Gt.createElement(pB,{glyph:hB.JBA,className:"DialogueBroadcastMessagesInfo_iconMailing_UmN4Q"})),Gt.createElement(pB,{className:"DialogueBroadcastMessagesInfo_iconClose_YkSDZ",glyph:hB.bMz,onClick:function(){r(mv({recipientsCount:0,isSending:!1}))}})),Gt.createElement("div",{className:"DialogueBroadcastMessagesInfo_title_U9zvr"},(0,Qr.getParametrizedText)(a,{count:t})),Gt.createElement("div",{className:"DialogueBroadcastMessagesInfo_description_cItND"},i))},x1=function(e){var t=e.className,n=e.value,r=n.toLocaleString("ru");return Gt.createElement("div",{className:fB()(t,"UnreadItemsCount_container_u0zde")},n>99?"99+":r)};const M1="DialoguePreviewAttachment_icon_AyNyl";var F1,G1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueList.components.DialoguePreviewAttachment"),H1=((F1={})[pe.AUDIO_FILE]=hB.PWQ,F1[pe.VIDEO_FILE]=hB.OiJ,F1[pe.FILE]=hB.XhR,F1[pe.IMAGE]=hB.Zay,F1),W1=function(e){var t=e.type,n=e.url,r=t===pe.IMAGE?Gt.createElement("div",{className:M1,style:{backgroundPosition:"center",backgroundSize:"cover",backgroundImage:"url(".concat(Bo({url:n,width:16,isCroped:!1}),")")}}):Gt.createElement(pB,{glyph:H1[t],className:M1});return Gt.createElement("div",{className:"DialoguePreviewAttachment_root_ftwy7"},r,G1[t])},V1=function(e){var t=e.message,n=Xk(t,{isDisableLinks:!0,smileSize:Ue.XS}).blocks,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(n,1)[0];if((0,Gt.useEffect)((function(){r||(ho.error("Invalid message data provided. Message could not be rendered.",{message:t,convertedBlocks:n,previewBlock:r}),bd.log.message.incorrectPayload(t))}),[]),!r)return null;var o,a,i=null==r?void 0:r.data,l="paragraph"===(null==r?void 0:r.type),s=null==r?void 0:r.type;return l?(o=r,a=Qa(),Gt.createElement("div",{dangerouslySetInnerHTML:{__html:o.data.text},className:"Messages_paragraph__YRBl",key:a})):Gt.createElement(W1,{type:s,url:i.url})},j1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueList.components.DialogueItem"),z1=function(e){var t,n=e.currentUser,r=e.isActive,o=e.dialogItem,a=nr().currencies,i=Mf(),l=o.id,s=o.chatmate,c=s.avatarUrl,u=s.name,d=o.unreadMsgCount,f=null==o?void 0:o.lastMessage,m=d>0,p=f?f.price:0,h=function(e){if(e){var t=Date.now(),n=Io(vo(e),t);return go(e,n<1?"HH/mm":n<7?"EEEEEE":"dd/MM/yy")}return""}(null==f?void 0:f.createdAt),v=f&&f.data.length>0,y=f&&f.authorId===n.id,_=(0,Vt.v9)(EA),E=f&&f.authorId!==n.id?a.default:_,b=y?a.default:_;return Gt.createElement("div",{className:cG()("DialogueItem_root_H1zWg",(t={},t.DialogueItem_rootActive_zCr19=r,t)),onClick:function(){var e=(0,Yt.getParametrizedUrl)(ir.MESSAGES,{},{dialogId:l});i(e)}},Gt.createElement(PB,{className:"DialogueItem_avatar_gnCpL",size:g.S_OVERSIZE,img:c}),Gt.createElement("div",{className:"DialogueItem_info_l7Xyb"},Gt.createElement("div",{className:"DialogueItem_head_A1Lku"},Gt.createElement("div",{className:"DialogueItem_username_VODL2"},u),f&&!(null==f?void 0:f.isDeleted)&&Gt.createElement("div",{className:"DialogueItem_infoMessage__tGCJ"},y&&Gt.createElement(xZ,{className:"DialogueItem_status_y_8Cm",message:f}),Gt.createElement("div",{className:"DialogueItem_datetime_QS2Oj"},h))),Gt.createElement("div",{className:"DialogueItem_content_TAexB"},f&&(null==f?void 0:f.isDeleted)&&Gt.createElement(Gt.Fragment,null,Gt.createElement(xZ,{className:"DialogueItem_statusDeletedIcon_HJQHN",message:f}),Gt.createElement("div",{className:"DialogueItem_statusDeleted_pW9wW"},j1.deleted)),f&&!(null==f?void 0:f.isDeleted)&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"DialogueItem_message_mJ5CM"},!v&&p>0&&j1.paidMessage,Boolean(f.donation)&&Gt.createElement("div",{className:"DialogueItem_donation_Mu8Iu"},j1.donation),(null==f?void 0:f.data.length)>0&&Gt.createElement(V1,{message:f.data})),Boolean(null==f?void 0:f.donation)&&Gt.createElement(DZ,{classNames:{root:"DialogueItem_donationAmount_VhdP3"},price:f.donation.amount,currency:E}),p>0&&Gt.createElement(DZ,{price:p,isPaid:f.isPaid,currency:b}),m&&Gt.createElement(x1,{value:d})))))},Y1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueList.components.DialogueListHeader"),K1=function(e){var t=e.hasUnreadMessages,n=e.selectedSortItem,r=e.sortTypesList,o=e.onSortChange,a=e.onReadAllClick;return Gt.createElement("div",{className:"DialogueListHeader_root_W7Eyh"},Gt.createElement(p1,{items:r,selectedItem:n,onSelect:function(e){return o(e)}}),t&&Gt.createElement("div",{className:"DialogueListHeader_btnReadAll_Sb6pp",onClick:a},Gt.createElement(pB,{className:cG()("DialogueListHeader_icon_TPa6m","DialogueListHeader_marginIcon_aN7aG"),glyph:hB.rPi}),Y1.btnReadAll))};const q1="DialogueList_emptyContainer_SQ7xK";var X1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueList"),Q1=function(e){var t,n=e.dialogId,r=e.currentUser,o=e.isVisibleLoader,a=e.isAppliedFilter,i=e.selectedSortItem,l=e.sortTypesList,s=e.fetchMore,c=e.onSectionChange,u=e.onSortChange,d=e.onReadAllClick,f=(0,Gt.useRef)(null),m=(0,Gt.useRef)(null),p=vD({element:m,container:f,rootMargin:"0px 0px 0px 0px"}),h=(0,Vt.v9)(CP),v=(0,Vt.v9)(OP),g=(0,Vt.v9)(fP),y=g.recipientsCount,_=g.isSending,E=r.unreadMsgCount>0,b=v.isFetching,S=!o&&b&&h.length>0&&p;return(0,Gt.useEffect)((function(){p&&!b&&h.length&&s()}),[p]),Gt.createElement("div",{className:"DialogueList_root_bYrnI"},y>0&&Gt.createElement(B1,{isMailingCompleted:!_,totalRecipients:y}),h.length>0&&Gt.createElement(K1,{onReadAllClick:d,onSortChange:u,selectedSortItem:i,sortTypesList:l,hasUnreadMessages:E}),o&&Gt.createElement(uM,null),Gt.createElement("div",{ref:f,className:cG()("DialogueList_list_UffZ4",(t={},t.DialogueList_listWithRecipients_t69Q1=y>0,t))},Gt.createElement("div",null,!o&&h.length>0&&h.map((function(e){var t=e.id===n;return Gt.createElement(z1,{key:e.id,isActive:t,currentUser:r,dialogItem:e})}))),Gt.createElement("div",{ref:m}),S&&Gt.createElement(uM,{size:50,className:"DialogueList_spinnerMoreLoader_PSBkp"}),!o&&!h.length&&(a?Gt.createElement(cF,{classNames:{root:q1,icon:"DialogueList_iconEmpty_TgL38"},icon:hB.B0F,title:X1.hasNotDialoguesTitleWhenAppliedFilter,description:X1.hasNotDialoguesDescriptionAppliedFilter}):Gt.createElement(Gt.Fragment,null,Gt.createElement(cF,{classNames:{root:cG()(q1,"DialogueList_emptyWithoutFilter_XLp4H")},title:X1.emptyHasNotDialog.title,description:Gt.createElement(Gt.Fragment,null,Gt.createElement("div",null,X1.emptyHasNotDialog.description),Gt.createElement(FB,{className:"DialogueList_button_q35u_",onClick:function(){return c(_H.DIALOGUE_CONTACT_LIST)}},X1.emptyHasNotDialog.button))})))))},J1=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Z1=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},$1=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMailingList.components.DialogueMailingContacts"),e2=function(e){var t=e.contactList,n=e.selectedContactsIds,r=e.excludedContactIds;return Gt.createElement(Gt.Fragment,null,t.map((function(t){var o,a=t.chatmate,i=t.relation.canWrite,l=n.some((function(e){return e.id===a.id}));return Gt.createElement("div",{className:cG()("DialogueMailingContacts_item_d2IT4",(o={},o.DialogueMailingContacts_disabled_nbV0J=!i,o)),key:a.id,onClick:function(){var t,o;t=a,o=n.map((function(e){return e.id})).includes(t.id)?n.filter((function(e){return e.id!==t.id})):Z1(Z1([],J1(n),!1),[t],!1),e.onContactSelect(o),function(t){var n=r.map((function(e){return e.id})).includes(t.id)?r.filter((function(e){return e.id!==t.id})):Z1(Z1([],J1(r),!1),[t],!1);e.onContactExclude(n)}(a)}},Gt.createElement(PB,{className:"DialogueMailingContacts_avatar_WKsad",size:g.S,img:a.avatarUrl}),Gt.createElement("div",{className:"DialogueMailingContacts_info_BzoN8"},Gt.createElement("div",{className:"DialogueMailingContacts_name_Y8dRW"},a.name),!i&&Gt.createElement("div",{className:"DialogueMailingContacts_description_seUvP"},$1.hasNotPermission)),i&&Gt.createElement(VM,{containerClassName:"DialogueMailingContacts_checkboxContainer_wl3fU",checked:l}))})))},t2=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMailingList.components.DialogueMailingListHeader"),n2=function(e){var t,n=e.isSelectedContactsAll,r=e.selectedTotal,o=e.selectedSortItem,a=e.sortTypesList,i=e.onSelectedReset,l=e.onSelectAll,s=e.onSortChange;return Gt.createElement("div",{className:"DialogueMailingListHeader_header_YndSM"},Gt.createElement(p1,{items:a,selectedItem:o,onSelect:function(e){return s(e)}}),Gt.createElement("div",{className:"DialogueMailingListHeader_selectedUsersInfo_icR_G"},r>0&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"DialogueMailingListHeader_selectedUsersAmount_Vq5n6"},r," ",r>1?t2.selectedMultiple:t2.selectedSingle),Gt.createElement("div",{className:cG()("DialogueMailingListHeader_resetSelectedUsers_vt2Tx",(t={},t.DialogueMailingListHeader_borderNone_uuaCA=n,t)),onClick:i},t2.reset)),!n&&Gt.createElement("div",{className:"DialogueMailingListHeader_selectUsersAll_ableW",onClick:l},t2.selectAll)))};const r2={emptyIcon:"DialogueMailingList_emptyIcon_hFChy",root:"DialogueMailingList_root_eH1fk",list:"DialogueMailingList_list_PjkY8",listWithSelections:"DialogueMailingList_listWithSelections_rcG5Z",innerListContainer:"DialogueMailingList_innerListContainer_jVSxN",button:"DialogueMailingList_button_StDdd",emptyContainer:"DialogueMailingList_emptyContainer_A5_rV",iconEmpty:"DialogueMailingList_iconEmpty_tXlk0",emptyDescription:"DialogueMailingList_emptyDescription_vE3ek",linkButton:"DialogueMailingList_linkButton_lHl7t",fadeIn:"DialogueMailingList_fadeIn_lwag7"};var o2=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMailingList"),a2=function(e){var t,n=e.selectedTotal,r=e.selectedContactIds,o=e.excludedContactIds,a=e.selectedSortItem,i=e.sortTypesList,l=e.hasSearchQuery,s=e.isVisibleLoader,c=e.isSelectedContactsAll,u=e.isDefaultFilter,d=e.footer,f=(0,Vt.v9)(RP),m=(0,Vt.v9)(DP),p=(0,Gt.useRef)(null),h=(0,Gt.useRef)(null),v=vD({element:h,container:p,rootMargin:"0px 0px 0px 0px"}),g=m.isFetching,y=!s&&g&&f.length>0&&v,_=c&&!o.length||f.length===n;return(0,Gt.useEffect)((function(){v&&!g&&f.length&&e.fetchMore()}),[v]),Gt.createElement("div",{className:r2.root},f.length>0&&Gt.createElement(n2,{isSelectedContactsAll:_,sortTypesList:i,selectedSortItem:a,selectedTotal:n,onSelectedReset:e.onContactIdsReset,onSelectAll:e.onContactsSelectAll,onSortChange:e.onSortChange}),s&&Gt.createElement(uM,null),Gt.createElement("div",{ref:p,className:cG()(r2.list,(t={},t[r2.listWithSelections]=n>0,t))},Gt.createElement("div",{className:r2.innerListContainer},!s&&f.length>0&&Gt.createElement(e2,{selectedContactsIds:r,excludedContactIds:o,contactList:f,onContactSelect:e.onContactIdsSelect,onContactExclude:e.onContactIdsExclude})),Gt.createElement("div",{ref:h}),y&&Gt.createElement(uM,{size:50,className:r2.spinnerMoreLoader}),!s&&!f.length&&l&&u&&Gt.createElement(cF,{classNames:{root:r2.emptyContainer,icon:r2.iconEmpty},icon:hB.B0F,title:o2.hasNotContactsTitleWhenAppliedSearchQuery,description:o2.hasNotContactsDescriptionWhenAppliedSearchQuery}),!s&&!f.length&&!l&&u&&Gt.createElement(cF,{classNames:{root:r2.emptyContainer},title:o2.hasNotContactsTitle,description:o2.hasNotContactsDescription}),!s&&!f.length&&!u&&Gt.createElement(cF,{classNames:{root:r2.emptyContainer,icon:r2.emptyIcon},icon:hB.K0,title:o2.hasNotContactsTitleWhenAppliedFilter,description:Gt.createElement("div",{className:r2.emptyDescription},Gt.createElement(VB,{className:r2.linkButton,onClick:e.onFilterReset},o2.resetFilter)," ".concat(o2.or," "),Gt.createElement(VB,{className:r2.linkButton,onClick:e.onFilterOpen},o2.changeFilter)," ".concat(o2.and," "),o2.tryAgain)})),r.length>0&&d)};const i2="DialogueChatList_mobile_avfA_";var l2=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueChatList"),s2=function(e){var t,n,r=e.className,o=e.dialogId,a=e.dialogueMode,i=e.footer,l=e.mailingListFilter,s=e.selectedTotal,c=e.selectedContactIds,u=e.excludedContactIds,d=e.isSelectedContactsAll,f=e.isDefaultFilterMailingList,m=e.onAppliedFilter,p=void 0===m?Yt.noop:m,h=e.onDialogueChangeMode,v=e.onContactIdsSelect,g=e.onContactIdsExclude,y=e.onContactsSelectAll,_=e.onContactIdsReset,E=e.onMailingFilterButtonClick,b=e.onMailingFilterReset,S=AW({dialogueMode:a,onDialogueChangeMode:h,onContactIdsReset:_,mailingListFilter:l}),T=S.title,I=S.currentUser,N=S.subscriptionLevels,C=S.dialogueList,w=S.contactList,O=S.filter,A=S.activeSection,P=S.isDefaultFilter,L=S.isSearchValueChanged,R=S.isVisibleLoader,k=S.searchValue,D=S.sortTypesContactList,U=S.sortTypesDialogueList,B=S.sortTypesMailingList,x=S.selectedContactListSort,M=S.selectedDialogueListSort,F=S.selectedMailingListSort,G=S.fetchDialogueListMore,H=S.fetchContactListMore,W=S.fetchMailingContactListMore,V=S.getSelectedTypesChatMate,j=S.onContactSelect,z=S.onTypesChatMateSelect,Y=S.onSearchInputChange,K=S.onSubscriptionsLevelSelect,q=S.onBackClick,X=S.onReadAllMessages,Q=S.onSectionChange,J=S.onSortDialogueListChange,Z=S.onSortContactListChange,$=S.onSortMailingListChange,ee=L||!P,te=!(R||ee||w.length||C.length),ne=A===_H.DIALOGUE_LIST,re=nr().isMobile;return(0,Gt.useEffect)((function(){p(ee,!R)}),[ee,R]),Gt.createElement("div",{className:r},Gt.createElement("div",{className:cG()("DialogueChatList_header_w6BUv",(t={},t[i2]=re,t))},!ne&&Gt.createElement(pB,{className:"DialogueChatList_icon_IdKuB",glyph:hB.WTy,onClick:q}),Gt.createElement("div",{className:"DialogueChatList_title_YjgSn"},T)),Gt.createElement(D1,{className:cG()((n={},n[i2]=re,n)),dialogueMode:a,searchValue:k,subscriptionLevels:N,selectedSubscriptionLevels:O.levelIds,selectedTypesChatMate:V(),isDefaultFilterMailingList:f,isDefaultFilter:P,isVisibleCreateDialogueButton:ne,isBlogger:I.isBlogger,userFlags:I.flags,onSearchInputChange:Y,onSectionChange:Q,onSubscriptionLevelsSelect:K,onTypesChatMateSelect:z,onMailingFilterButtonClick:E}),te?Gt.createElement("div",{className:"DialogueChatList_emptyContainer_t7vnx"},Gt.createElement(cF,{title:l2.emptyDialogsAndContacts.title,description:l2.emptyDialogsAndContacts.description})):Gt.createElement(Gt.Fragment,null,A===_H.DIALOGUE_BROADCAST&&Gt.createElement(a2,{hasSearchQuery:Boolean(k),isDefaultFilter:f,isSelectedContactsAll:d,isVisibleLoader:R,selectedSortItem:F,selectedTotal:s,selectedContactIds:c,excludedContactIds:u,sortTypesList:B,onContactIdsSelect:v,onContactIdsExclude:g,onContactIdsReset:_,fetchMore:W,onSortChange:$,onContactsSelectAll:y,onFilterOpen:E,onFilterReset:b,footer:i}),A===_H.DIALOGUE_LIST&&Gt.createElement(Q1,{dialogId:o,isVisibleLoader:R,isAppliedFilter:ee,currentUser:I,sortTypesList:U,selectedSortItem:M,fetchMore:G,onSectionChange:Q,onSortChange:J,onReadAllClick:X}),A===_H.DIALOGUE_CONTACT_LIST&&Gt.createElement(y1,{isVisibleLoader:R,isAppliedFilter:ee,dialogueContactList:w,sortTypesList:D,selectedSortItem:x,fetchMore:H,onContactSelect:j,onSortChange:Z})))},c2=function(e){var t,n=e.className,r=e.value,o=e.isDisabled,a=e.isValid,i=e.placeholder,l=e.currency,s=e.onChange,c=e.onBlur,u=e.onKeyDown,d=e.onFocus,f=e.onKeyUp,m=l?Nf({currency:l}):null;return Gt.createElement(Zx,{isValid:a,className:n,classNameInput:cG()((t={},t.NumberInput_disabled_wQGek=o,t)),disabled:o,mask:m,placeholder:i,value:null!==r?String(r):"",onChange:function(e){var t=e.target.value;s(t?$a(t):null)},onBlur:c,onKeyDown:u,onKeyUp:f,onFocus:d})},u2=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMailingListFilter.hooks.useDialogueMailingListFilter");const d2="DialogueMailingListFilter_block_KuUn6",f2="DialogueMailingListFilter_checkboxContainer_jkD_Y",m2="DialogueMailingListFilter_label_c5XMJ",p2="DialogueMailingListFilter_inputs__mqE1",h2="DialogueMailingListFilter_inputContainer_vt8pO",v2="DialogueMailingListFilter_input_FAyn2",g2="DialogueMailingListFilter_from_k5g_v",y2="DialogueMailingListFilter_to_sJknb";var _2=function(){return _2=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_2.apply(this,arguments)},E2=(0,Qr.getTranslation)("@boosty/common/components.Messages.DialogueMailingListFilter"),b2=function(e){var t=e.classNameContainer,n=e.isActiveMoneySpent,r=e.isActiveSubscriptionTime,o=e.isActiveSubscriptionLevels,a=e.isMoneySpentError,i=e.isSubscriptionTimeError,l=e.filter,s=e.onFilterChange,c=e.onToggleActiveMoneySpent,u=e.onToggleActiveSubscriptionTime,d=e.onToggleActiveSubscriptionLevels,f=l.moneySpentTo,m=l.moneySpentFrom,p=l.subscriptionMonthsDurationFrom,h=l.subscriptionMonthsDurationTo,v=l.subscriptionLevelIds,g=l.paidSubscriptionCanceled,y=function(){var e=(0,Vt.I0)(),t=(0,Vt.v9)(EL),n=(0,Vt.v9)(EA),r=(0,Vt.v9)(JO),o=function(e){return e.deleted?"".concat(e.name," (").concat(u2.deleted,")"):e.name},a=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(t.map((function(e){return{id:e.id,title:o(e)}}))),!1);return(0,Gt.useEffect)((function(){Boolean(t.length)||e(qp({blogUrl:r,showFree:!0}))}),[]),{currency:n,subscriptionLevelsOptions:a}}(),_=y.currency,E=y.subscriptionLevelsOptions;return Gt.createElement("div",{className:cG()(t,"DialogueMailingListFilter_root_W2AVw")},Gt.createElement("div",{className:d2},Gt.createElement(VM,{checked:n,onToggle:function(){n&&s(_2(_2({},l),{moneySpentFrom:null,moneySpentTo:null})),c(!n)},containerClassName:f2,label:E2.incomeSubscriber,labelClassName:m2}),Gt.createElement("div",{className:p2},Gt.createElement("div",{className:h2},Gt.createElement("div",{className:g2},E2.from),Gt.createElement(c2,{isValid:!a,className:v2,placeholder:"0",value:m,isDisabled:!n,currency:_,onChange:function(e){return s(_2(_2({},l),{moneySpentFrom:e}))}})),Gt.createElement("div",{className:h2},Gt.createElement("div",{className:y2},E2.to),Gt.createElement(c2,{isValid:!a,className:v2,placeholder:"10000000",value:f,isDisabled:!n,currency:_,onChange:function(e){return s(_2(_2({},l),{moneySpentTo:e}))}})))),Gt.createElement("div",{className:cG()(d2,"DialogueMailingListFilter_subscriptionTimeBlock_eJREu")},Gt.createElement(VM,{checked:r,onToggle:function(){r&&s(_2(_2({},l),{subscriptionMonthsDurationFrom:null,subscriptionMonthsDurationTo:null})),u(!r)},containerClassName:f2,label:E2.subscriptionTime,labelClassName:m2}),Gt.createElement("div",{className:p2},Gt.createElement("div",{className:h2},Gt.createElement("div",{className:g2},E2.from),Gt.createElement(c2,{isValid:!i,className:v2,placeholder:"1",value:p,isDisabled:!r,onChange:function(e){return s(_2(_2({},l),{subscriptionMonthsDurationFrom:e}))}})),Gt.createElement("div",{className:h2},Gt.createElement("div",{className:y2},E2.to),Gt.createElement(c2,{isValid:!i,className:v2,placeholder:"36",value:h,isDisabled:!r,onChange:function(e){return s(_2(_2({},l),{subscriptionMonthsDurationTo:e}))}})))),Gt.createElement("div",{className:d2},Gt.createElement(VM,{checked:o,onToggle:function(){o&&s(_2(_2({},l),{subscriptionLevelIds:[]})),d(!o)},containerClassName:f2,label:E2.subscriptionLevel,labelClassName:m2}),Gt.createElement("div",{className:p2},Gt.createElement(I1,{isDisabled:!o,subscriptionLevels:E,subscriptionLevelsSelected:v,onSelect:function(e){s(_2(_2({},l),{subscriptionLevelIds:e}))}}))),Gt.createElement("div",{className:d2},Gt.createElement(VM,{containerClassName:f2,label:E2.renewalCanceled,labelClassName:m2,checked:g,onToggle:function(){s(_2(_2({},l),{paidSubscriptionCanceled:!g}))}})))};const S2={content:"SendMessageConfirmPopup_content_ugG6V",contentHavePaid:"SendMessageConfirmPopup_contentHavePaid_xY4Ek",contentLoading:"SendMessageConfirmPopup_contentLoading_D15Z1",paidContentTitle:"SendMessageConfirmPopup_paidContentTitle_LpVMg",recipients:"SendMessageConfirmPopup_recipients_gUmb2",footer:"SendMessageConfirmPopup_footer_opXwU",spinnerContainer:"SendMessageConfirmPopup_spinnerContainer_XCW63",confirmButton:"SendMessageConfirmPopup_confirmButton_Ph6x9",priceInfo:"SendMessageConfirmPopup_priceInfo_GZ4Xv",priceInfoHasTeaser:"SendMessageConfirmPopup_priceInfoHasTeaser_ZZQFU",priceCaption:"SendMessageConfirmPopup_priceCaption_ae7SX",price:"SendMessageConfirmPopup_price_bvaHK",tab:"SendMessageConfirmPopup_tab_wNuTY",fadeIn:"SendMessageConfirmPopup_fadeIn_PECXE"};var T2=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},I2=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.SendMessageConfirmPopup"),N2=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.totalRecipients,o=e.data,a=e.teaserData,i=e.price,l=e.onConfirm,s=e.onClose,c=(0,Gt.useRef)(),u=T2((0,Gt.useState)(EH.MESSAGE),2),d=u[0],f=u[1],m=T2((0,Gt.useState)(!1),2),p=m[0],h=m[1],v=(0,Vt.v9)(EA),g=i>0&&!ta(o)&&!ta(a),y=i>0&&!ta(o)&&ta(a);return Gt.createElement(PM,{onClose:s,classNames:n,title:I2.title,footer:Gt.createElement(Gt.Fragment,null,Gt.createElement(FB,{ref:c,className:S2.confirmButton,autoFocus:!0,isDisabled:p,onClick:function(){h(!0),l()}},I2.confirm),Gt.createElement(HB,{isDisabled:p,className:S2.cancelButton,onClick:s},I2.cancel))},r>0&&Gt.createElement("div",{className:S2.recipients},(0,Qr.getParametrizedText)(I2.recipients,{count:r})),g?Gt.createElement(l0,{isHiddenTeaserTab:!a.length,activeTab:d,onSelect:f,classNames:{root:cG()(S2.tabs,n.tabs),tab:S2.tab}}):y?Gt.createElement("p",{className:cG()(S2.paidContentTitle,n.paidContentTitle)},I2.paidTitle):null,Gt.createElement(Hd.Provider,{value:b.MESSAGE_PREVIEW},Gt.createElement("div",{className:cG()(S2.content,i>0&&d!==EH.TEASER&&S2.contentHavePaid,p&&S2.contentLoading,n.confirmContent)},d===EH.TEASER&&Gt.createElement(RZ,{data:a}),d===EH.MESSAGE&&Gt.createElement(Gt.Fragment,null,i>0&&Gt.createElement("div",{className:cG()(S2.priceInfo,a.length>0&&S2.priceInfoHasTeaser)},Gt.createElement("div",{className:S2.priceCaption},I2.price,":"),Gt.createElement(DZ,{classNames:{root:S2.price},price:i,currency:v})),Gt.createElement(RZ,{data:o})))))},C2=n(88612),w2=n(97446),O2="noSwipe",A2="modal-root";const P2={root:"MediaSwiper_root_Ahv1I",controlIcon:"MediaSwiper_controlIcon_zUwhP",controlButton:"MediaSwiper_controlButton_MsPvo",hidden:"MediaSwiper_hidden_G9V1f",closeButton:"MediaSwiper_closeButton_iofnS",prevButton:"MediaSwiper_prevButton_v8N8W",arrowIcon:"MediaSwiper_arrowIcon_iYcgL",nextButton:"MediaSwiper_nextButton_lZANY",fadeIn:"MediaSwiper_fadeIn_TTyf_"};var L2,R2=[w2.W_,w2.eZ,w2.N1],k2=function(e){var t=e.initialSlideIndex,n=e.currentActiveSlideIndex,r=e.totalSlides,o=e.children,a=e.setSwiperRef,i=e.onTransitionEnd,l=e.onClose,s=e.onKeyPress,c=e.onNavigationPrev,u=e.onNavigationNext,d=e.onTouchEnd;return Gt.createElement("div",{className:P2.root},Gt.createElement(C2.tq,{modules:R2,slidesPerView:1,onSwiper:a,initialSlide:t,onTouchEnd:d,onNavigationPrev:c,onNavigationNext:u,onKeyPress:s,grabCursor:!0,touchMoveStopPropagation:!0,noSwiping:!0,noSwipingClass:O2,longSwipesRatio:.4,keyboard:!0,spaceBetween:20,threshold:2,speed:250,onTransitionEnd:i,observeSlideChildren:!0,preventInteractionOnTransition:!0,navigation:{enabled:!0,nextEl:".".concat(P2.nextButton),prevEl:".".concat(P2.prevButton)},virtual:{enabled:!0,addSlidesAfter:0,addSlidesBefore:0,cache:!1}},o),Gt.createElement("button",{className:cG()(P2.controlButton,P2.closeButton),type:"button",onClick:l},Gt.createElement(pB,{glyph:hB.bMz,className:cG()(P2.controlIcon,P2.closeIcon)})),Gt.createElement("button",{className:cG()(P2.controlButton,P2.prevButton,0===n&&P2.hidden),type:"button"},Gt.createElement(pB,{glyph:hB.y9O,className:cG()(P2.controlIcon,P2.arrowIcon)})),Gt.createElement("button",{className:cG()(P2.controlButton,P2.nextButton,n===r-1&&P2.hidden),type:"button"},Gt.createElement(pB,{glyph:hB.y9O,className:cG()(P2.controlIcon,P2.arrowIcon)})))},D2=function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(0),2),n=t[0],r=t[1];return $G((function(){e&&r((function(e){return e+1}))}),[e]),n},U2=function(){return U2=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},U2.apply(this,arguments)},B2=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.isPreviousViewed,o=e.data,a={videoId:o.vid.toString(),vid:o.vid},i=D2(r),l=(0,Gt.useRef)(0),s=(0,Gt.useRef)(0),c={onStarted:function(){return rd.log.video.started(U2({duration:o.duration},a))},onEnded:function(){return rd.log.video.ended(U2({time:s.current},a))},onPlay:function(){return rd.log.video.resumed(U2({time:s.current},a))},onPause:function(){return rd.log.video.paused(U2({time:s.current},a))},onSeek:function(e,t){return rd.log.video.rewound(U2({from:e,to:t},a))},onTimeupdate:function(e,t){return function(e,t){var n=10*Math.round(t/e*10);s.current=t,l.current<n&&(l.current=n,rd.log.video.progress(U2({time:t,percent:n},a)))}(e,t)}};return Gt.createElement("div",{className:"VideoItem_root_IAO1i"},Gt.createElement(JQ,{classNames:n,key:i,data:o,callbacks:c}))},x2=function(e){(0,Gt.useEffect)((function(){var t=function(t){"Escape"===t.key&&e()};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[])},M2=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},F2=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.id,o=e.data,a=e.onClose,i=function(e){var t=e.id,n=e.data,r=e.onClose,o=(0,Gt.useRef)(null),a=n.filter((function(e){return e.type===pe.VIDEO_FILE})),i=M2((0,Gt.useState)(a.findIndex((function(e){return e.id===t}))),1)[0],l=M2((0,Gt.useState)(i),2),s=l[0],c=l[1],u=M2((0,Gt.useState)(null),2),d=u[0],f=u[1],m=M2((0,Gt.useState)(a.length?a[0]:null),2),p=m[0],h=m[1];return x2(r),{initialSlideIndex:i,currentActiveSlideIndex:s,previousActiveSlideIndex:d,videoFiles:a,setSwiperRef:function(e){return o.current=e},onTransitionEnd:function(e){var t=e.previousIndex;f(t);var n=e.activeIndex;c(n);var r=a[n];p&&r&&(null==p?void 0:p.id)!==(null==r?void 0:r.id)&&h(r)}}}({id:r,data:o,onClose:a}),l=i.initialSlideIndex,s=i.currentActiveSlideIndex,c=i.previousActiveSlideIndex,u=i.videoFiles,d=i.setSwiperRef,f=i.onTransitionEnd;return Gt.createElement(k2,{initialSlideIndex:l,currentActiveSlideIndex:s,totalSlides:u.length,setSwiperRef:d,onTransitionEnd:f,onClose:a},u.map((function(e,t){return Gt.createElement(C2.o5,{key:e.id,virtualIndex:t},Gt.createElement(B2,{classNames:{container:n.video},isPreviousViewed:c===t,data:e}))})))},G2=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.DialogsSettingsPromoPopup"),H2=function(e){var t=Mf();return Gt.createElement(PM,{classNames:{block:"DialogsSettingsPromoPopup_popup_sgP3s"},footer:Gt.createElement("div",{className:"DialogsSettingsPromoPopup_footer_rOVLD"},Gt.createElement(FB,{onClick:function(){e.onClose(),t(ir.SETTINGS_PRIVACY)}},G2.configure),Gt.createElement(HB,{onClick:e.onClose},G2.close)),onClose:e.onClose},Gt.createElement("div",{className:"DialogsSettingsPromoPopup_content_tMsft"},Gt.createElement("div",{className:"DialogsSettingsPromoPopup_image_jqbU_"},Gt.createElement("div",{className:"DialogsSettingsPromoPopup_imageTextWarning_tV2h5"},G2.allow),Gt.createElement("div",{className:"DialogsSettingsPromoPopup_imageTextPlaceholder_UliUy"},G2.placeholder)),Gt.createElement("div",{className:"DialogsSettingsPromoPopup_title_sX5s5"},G2.title),Gt.createElement("div",{className:"DialogsSettingsPromoPopup_description_y7k1o"},(0,Qr.getReactText)(G2.description,{Br:function(){return nr().isMobile?Gt.createElement(Gt.Fragment,null):Gt.createElement("br",null)}}))))},W2=function(e){var t=e.description,n=(0,Vt.v9)(Hw).signedQuery;return Gt.createElement(BJ,{data:t,signedQuery:n})};!function(e){e.ROOT="ROOT",e.CONTENT="CONTENT",e.TITLE="TITLE",e.EXTERNAL_APPS="EXTERNAL_APPS",e.DESCRIPTION="DESCRIPTION",e.OFF_TIME="OFF_TIME",e.ON_TIME="ON_TIME"}(L2||(L2={}));const V2="PaymentLevelCard_externalAppsIcon_zakgA",j2="PaymentLevelCard_linkIcon_VOWk9",z2="PaymentLevelCard_paymentData_Tc7L5";var Y2=function(){return Y2=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Y2.apply(this,arguments)},K2=oo("Payment.LevelCard"),q2=(0,Qr.getTranslation)("@common/components.PaymentLevelCard"),X2=function(e){var t,n,o,a=e.classNames,i=void 0===a?{}:a,l=e.level,s=e.isCurrent,c=e.isStandalone,u=void 0!==c&&c,d=e.offTime,f=void 0===d?null:d,m=e.onTime,p=void 0===m?null:m,h=e.isStandaloneExtended,v=void 0!==h&&h,g=e.isFirstMonthFree,y=void 0!==g&&g,_=e.hideFooter,E=void 0!==_&&_,b=e.titleComponent,S=e.onDescriptionOpen,T=(0,Vt.v9)(Hw),I=u&&v,N=Qo(r.DISCORD),C=Qo(r.TELEGRAM),w=l.externalApps.discord.isConfigured,O=l.externalApps.telegram.isConfigured,A=w||O,P=(0,Vt.v9)(bA),L=l.currencyPrices[P]||l.price,R=Ra(l).description,k=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),D=k[0],U=k[1],B=Gt.createElement("div",{className:fB()("PaymentLevelCard_price_ZHVIw",(t={},t.PaymentLevelCard_priceGrayText_evNys=I,t))},y&&"".concat(q2.price.freePrefix," "),"".concat(Vr({amount:L,currency:P})," ").concat(q2.price.maskSuffix));(0,Gt.useEffect)((function(){return U(R.some((function(e){return e&&$o(e)})))}),[l]);var x=b||Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"PaymentLevelCard_levelTitle_M3hpv"},l.name),I&&B),M=A||u?Gt.createElement("div",Y2({className:"PaymentLevelCard_content_OlR2T"},Na(K2(L2.CONTENT))),Gt.createElement("div",{className:"PaymentLevelCard_bottomPanel_GzcbF"},A&&Gt.createElement("div",Y2({className:"PaymentLevelCard_externalApps_bRjlN"},Na(K2(L2.EXTERNAL_APPS))),Gt.createElement("span",{className:"PaymentLevelCard_externalAppsLabel_INstv"},q2.label),N&&w&&(s?Gt.createElement(cM,{className:j2,target:"_blank",to:ir.SETTINGS_EXTERNAL_APP},Gt.createElement(pB,{glyph:hB.tj4,className:V2})):Gt.createElement(pB,{glyph:hB.tj4,className:V2})),C&&O&&(s?Gt.createElement(cM,{className:j2,target:"_blank",to:ir.SETTINGS_EXTERNAL_APP},Gt.createElement(pB,{glyph:hB.PVw,className:V2})):Gt.createElement(pB,{glyph:hB.PVw,className:V2})))),u&&D&&Boolean(T)&&Gt.createElement(Dx,{trigger:gx.CLICK,align:yx.RIGHT,onTooltipOpen:function(){null==S||S()},content:Gt.createElement("span",{className:"PaymentLevelCard_popup_KqPlS"},Gt.createElement(W2,{description:R})),isGlobal:!0},Gt.createElement("span",Y2({className:fB()("PaymentLevelCard_showDescription_LheYU",(n={},n.PaymentLevelCard_showDescriptionWithExternalApps_p7xpz=A,n))},Na(K2(L2.DESCRIPTION))),q2.showDescription))):null,F=(!u||I)&&!E&&Gt.createElement(Gt.Fragment,null,!u&&B,Boolean(f)&&Gt.createElement(Gt.Fragment,null,!v&&Gt.createElement("br",null),Gt.createElement("span",Y2({className:fB()(z2,(o={},o.PaymentLevelCard_paymentDataBlackText__ckGH=v,o))},Na(K2(L2.OFF_TIME))),(0,Qr.getParametrizedText)(q2.activeUntil,{date:yo(f)}))),Boolean(p)&&Gt.createElement(Gt.Fragment,null,Gt.createElement("br",null),Gt.createElement("span",Y2({className:z2},Na(K2(L2.ON_TIME))),(0,Qr.getParametrizedText)(q2.startsSince,{date:yo(p)}))));return Gt.createElement("div",{className:fB()("PaymentLevelCard_container_areWM",i.root),key:l.id},!u&&Gt.createElement("h4",{className:"PaymentLevelCard_title_eZ4Df"},s?q2.currentLevel:q2.newLevel),Gt.createElement(KB,{classNames:{root:i.board,title:i.title},title:x,content:M,footer:F,isBordered:I&&!E,testIds:{root:K2(L2.ROOT),title:K2(L2.TITLE)}}))},Q2=function(e){var t=e.avatarUrl,n=e.title,r=e.description,o=e.avatarSize,a=e.className,i=nr().isMobile,l=o||(i?g.S_OVERSIZE:g.SM_OVERSIZE);return Gt.createElement("div",{className:cG()("PromoPopupHeader_root_wi3aH",a)},Gt.createElement("div",{className:"PromoPopupHeader_avatarContainer_C8XET"},Gt.createElement(PB,{img:t,size:l})),Gt.createElement("div",{className:"PromoPopupHeader_title_bJR5s"},n),Gt.createElement("div",{className:"PromoPopupHeader_description_uDRcO"},r))};const J2={root:"RenewSubscriptionPopup_root_WLCSb",content:"RenewSubscriptionPopup_content_rjzvi",wrapper:"RenewSubscriptionPopup_wrapper_XPAtm",block:"RenewSubscriptionPopup_block_tTc4T",contentRoot:"RenewSubscriptionPopup_contentRoot_nnKKj",card:"RenewSubscriptionPopup_card_DNzPl",cardTitle:"RenewSubscriptionPopup_cardTitle_yyDCK",subscriptionName:"RenewSubscriptionPopup_subscriptionName_aZcM3",button:"RenewSubscriptionPopup_button_kSNHH",subText:"RenewSubscriptionPopup_subText_EJywL",subscriptionDescription:"RenewSubscriptionPopup_subscriptionDescription_R6ZVi",promoAvatar:"RenewSubscriptionPopup_promoAvatar_RVHJ0",warning:"RenewSubscriptionPopup_warning_p_6ID",warningIcon:"RenewSubscriptionPopup_warningIcon_XWgec",header:"RenewSubscriptionPopup_header_qxNBH",fadeIn:"RenewSubscriptionPopup_fadeIn_r4j1L"};var Z2=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.components.RenewSubscriptionPopup"),$2=function(e){var t=e.onConfirm,n=e.onClose,r=e.owner,o=e.level,a=(0,Vt.v9)(EA);return Gt.createElement(PM,{classNames:{title:J2.title,root:J2.root,block:J2.block,content:J2.content,wrapper:J2.wrapper},onClose:n},Gt.createElement("div",{className:J2.contentRoot},Gt.createElement(Q2,{avatarUrl:r.avatarUrl,title:Z2.title,description:r.name,avatarSize:g.SM_OVERSIZE,className:J2.header}),Gt.createElement(X2,{level:o,isStandalone:!0,classNames:{root:J2.card,title:J2.cardTitle},titleComponent:Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:J2.subscriptionName},Z2.levelName),Gt.createElement("div",{className:J2.subscriptionDescription},Gt.createElement(PB,{img:r.avatarUrl,size:g.XS_PLUS,className:J2.promoAvatar}),o.name))}),Gt.createElement(FB,{className:J2.button,onClick:function(){n(),t()}},Z2.renew),Gt.createElement("div",{className:J2.warning},Gt.createElement(pB,{glyph:hB.Gc9,className:J2.warningIcon}),(0,Qr.getParametrizedText)(Z2.warning,{price:Vr({amount:o.currencyPrices[a],currency:a,useGrouping:!0}),date:yo(o.offTime)})),Gt.createElement("div",{className:J2.subText},(0,Qr.getReactText)(Z2.subText,{Br:function(){return Gt.createElement("br",null)}}))))},e3=function(){return e3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e3.apply(this,arguments)},t3=function(e){return Gt.createElement(OX,e3({},e,{classNames:{block:"AdultContentPopup_block_v1h05",title:"AdultContentPopup_title_SPJtG",titleImage:"AdultContentPopup_titleImage_hNDp_",titleText:"AdultContentPopup_titleText_RAmtM",footer:"AdultContentPopup_footer_RDkz3",buttons:"AdultContentPopup_buttons__etEV",confirmButton:"AdultContentPopup_confirmButton_kUp1s"}}))},n3=function(){return n3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n3.apply(this,arguments)},r3=function(e){return Gt.createElement(kX,n3({},e,{classNames:{wrapper:"AfterFollowPopup_wrapper_K9Pdt",block:"AfterFollowPopup_block_s_zro",content:"AfterFollowPopup_content_Gwq7h",title:"AfterFollowPopup_title_LCwXV",icon:"AfterFollowPopup_icon_WZXFJ"}}))},o3=function(){return o3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o3.apply(this,arguments)},a3=function(e){return Gt.createElement(NX,o3({},e,{classNames:{block:"AuthSignInPopup_popup_PICOH",title:"AuthSignInPopup_popupTitle_Si3qY",content:"AuthSignInPopup_popupContent_CoVO3",footer:"AuthSignInPopup_popupFooter_Kwkf5"}}))},i3=function(){return i3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i3.apply(this,arguments)},l3=function(e){return Gt.createElement(qq,i3({},e,{classNames:{block:"AuthSignUpPopup_popup_uVrtQ",title:"AuthSignUpPopup_popupTitle_NTon6",content:"AuthSignUpPopup_popupContent_UsZ02",footer:"AuthSignUpPopup_popupFooter_vSIEq"}}))},s3=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.onClose,o=function(e){var t=_X((0,Gt.useState)(!1),2),n=t[0],r=t[1],o=_X((0,Gt.useState)(aX.START),2),i=o[0],l=o[1],s=(0,Vt.I0)(),c=jG().showAlert,u=(0,dH.useOverlayPopups)().showPopup;return{title:EX.title,isLoading:n,currentStep:i,onSubmit:function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:r(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,s((0,dm.Ax)(jb.action)({email:e.email.trim()}))];case 2:return t.sent(),l(aX.SUCCESS),[3,5];case 3:return t.sent(),c({type:p.ERROR,text:EX.oops}),[3,5];case 4:return r(!1),[7];case 5:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n},onLoginShow:function(){e.onClose(),u({type:a.AUTH_SIGN_IN})}}}({onClose:r}),i=o.title,l=o.isLoading,s=o.currentStep,c=o.onSubmit,u=o.onLoginShow;return Gt.createElement(PM,{classNames:{wrapper:n.wrapper,block:n.block,content:n.content,title:n.title},title:i,onClose:u},Gt.createElement(yX,{currentStep:s,isLoading:l,onCancel:u,onSubmit:c,onClose:r}))};const c3={block:"ForgotPasswordPopup_block_eguO6",content:"ForgotPasswordPopup_content_S9V3g",title:"ForgotPasswordPopup_title_M4W_K"};var u3,d3,f3=function(){return f3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f3.apply(this,arguments)},m3=function(e){return Gt.createElement(s3,f3({},e,{classNames:{wrapper:c3.wrapper,block:c3.block,content:c3.content,title:c3.title}}))};!function(e){e.EMAIL="email",e.BLOG_URL="blogUrl",e.HAS_ADULT_CONTENT="hasAdultContent",e.OFFER_ACCEPTED="isOfferAccepted"}(u3||(u3={}));var p3=Sz.Ry().shape(((d3={})[u3.EMAIL]=Sz.Z_().email("Invalid email").required(),d3[u3.BLOG_URL]=Sz.Z_().required().min(3).max(50).test("blogUrl format","incorrect blogUrl format",(function(e){return/^[0-9a-zA-Z_.-]+$/.test(e)&&!/^[0-9]+$/.test(e)})),d3[u3.OFFER_ACCEPTED]=Sz.O7().required().oneOf([!0],"required to accept offer"),d3));const h3={checkboxLabel:"CreateBlogForm_checkboxLabel__3RSF",adultContentLabel:"CreateBlogForm_adultContentLabel_xdwMg",adultContentHintTooltipContent:"CreateBlogForm_adultContentHintTooltipContent_R9Ibt",form:"CreateBlogForm_form_H02qn",emailHidden:"CreateBlogForm_emailHidden_EdWD7",footer:"CreateBlogForm_footer_KFlGX",footerText:"CreateBlogForm_footerText_yNkqs",checkboxLabelContainer:"CreateBlogForm_checkboxLabelContainer_yGIf0",adultContent:"CreateBlogForm_adultContent_NkM8t",adultContentText:"CreateBlogForm_adultContentText_NCfDC",adultContentHint:"CreateBlogForm_adultContentHint_baXJS",adultContentHintTooltip:"CreateBlogForm_adultContentHintTooltip_Qhc37",submit:"CreateBlogForm_submit_MT1Bn",hintContainer:"CreateBlogForm_hintContainer_qoaoe",fadeIn:"CreateBlogForm_fadeIn_Bqu7F"};var v3=(0,Qr.getTranslation)("@common/components.CreateBlogForm"),g3=function(e){var t=e.blogUrlDescription,n=e.blogUrlLabel,o=e.buttonTitle,a=e.classNames,i=void 0===a?{}:a,l=e.tooltipAlign,s=e.privacyPolicyUrl,c=e.userAgreementUrl,u=e.customLocales,d=e.blogUrl,f=void 0===d?"":d,m=e.hasBlogUrlField,p=void 0===m||m,h=e.blogPlatformName,v=e.onSuccess,g=void 0===v?Yt.noop:v,y=e.onSubmit,_=Qo(r.ADULT_CONTENT),E=(0,Gt.useMemo)((function(){return(0,ii.merge)(v3,u)}),[u]),b=nr().hosts.main,S=_k().currentUser.email,T=(0,Vt.v9)(zw),I=T.error,N=T.isFetched,C=T.isFetching,w=(0,Gt.useRef)(null);(0,Gt.useEffect)((function(){I&&w.current.setFieldError(p?u3.BLOG_URL:u3.EMAIL,String(I.serverError.error).toUpperCase())}),[I]),(0,Gt.useEffect)((function(){N&&!I&&g()}),[N,I]);var O=function(e){e.stopPropagation()};return Gt.createElement(Gz.J9,{initialValues:{email:S,blogUrl:f,hasAdultContent:!1,isOfferAccepted:!1},innerRef:w,validateOnMount:!0,validationSchema:p3,onSubmit:y},(function(e){var r,a=e.isValid,u=e.values,d=e.errors,f=e.setFieldValue,m=e.handleSubmit,v=!a||C;return Gt.createElement(Sx,{className:fB()(h3.form,i.form),onSubmit:m},Gt.createElement(Ix,{className:fB()(i.formInner,(r={},r[h3.emailHidden]=Rr(),r)),isSmallIndent:!0},Gt.createElement(Gz.gN,{name:u3.EMAIL},(function(t){var n=t.field,r=n.value,o=n.onChange,a=n.onBlur,i=n.name,l=Ef(e,u3.EMAIL);return Gt.createElement(Zx,{label:E.fields.email.label,placeholder:E.fields.email.placeholder,name:i,onBlur:a,onChange:o,value:r,isValid:l})}))),p&&Gt.createElement(Gt.Fragment,null,Gt.createElement(Ix,{className:i.formInner,isSmallIndent:!0},Gt.createElement(Gz.gN,{name:u3.BLOG_URL},(function(t){var r,o,i=t.field,l=i.value,s=i.onChange,c=i.onBlur,u=i.name,f=Ef(e,u3.BLOG_URL),m=a?null:function(e){return E.errors[e]}(d.blogUrl);return Gt.createElement(Zx,{label:n||E.fields.blogUrl.label,id:"blogUrlInput",name:u,onBlur:c,onChange:s,value:l,staticValue:"".concat(b,"/"),isValid:f,error:m,description:(null===(o=null===(r=E.fields)||void 0===r?void 0:r.blogUrl)||void 0===o?void 0:o.description)||""})}))),t),_&&Gt.createElement("div",{className:h3.adultContent},Gt.createElement(Gz.gN,{name:u3.HAS_ADULT_CONTENT},(function(e){var t,n=e.field,r=n.value,o=n.name;return Gt.createElement(VM,{isDefaultChecked:r,labelClassName:h3.checkboxLabelContainer,label:Gt.createElement("div",{className:h3.adultContentText},Gt.createElement("span",{className:fB()(h3.adultContentLabel,h3.checkboxLabel)},E.fields.adultContent.label)," ",(null===(t=E.fields.adultContent)||void 0===t?void 0:t.tooltip)&&Gt.createElement("div",{className:h3.hintContainer},Gt.createElement(Bx,{classNames:{block:h3.adultContentWithIcon,tooltip:h3.adultContentHintTooltip,tooltipContent:h3.adultContentHintTooltipContent},onClick:O,tooltipAlign:l},(null==h?void 0:h.length)?(0,Qr.getParametrizedText)(E.fields.adultContent.tooltip[1.1],{projectNameCapitalized:h}):E.fields.adultContent.tooltip[1],E.fields.adultContent.tooltip[2]&&Gt.createElement(Gt.Fragment,null," ",Gt.createElement(cM,{to:c,target:"_blank"},E.fields.adultContent.tooltip[2])),E.fields.adultContent.tooltip[3]))),onToggle:function(e){return f(o,e)}})}))),Gt.createElement("div",{className:fB()(h3.offer,i.offer)},Gt.createElement(Gz.gN,{name:u3.OFFER_ACCEPTED},(function(e){var t=e.field.name;return Gt.createElement(VM,{isDefaultChecked:u.isOfferAccepted,labelClassName:h3.checkboxLabelContainer,label:Gt.createElement("div",{className:h3.offerText},Gt.createElement("span",{className:h3.checkboxLabel},E.fields.offer.label)," ",Gt.createElement(cM,{onClick:O,to:c,target:"_blank"},E.fields.offer.linkUserAgreement)," ",Gt.createElement("span",{className:h3.checkboxLabel},E.fields.offer.and)," ",Gt.createElement(cM,{onClick:O,to:s,target:"_blank"},E.fields.offer.linkPrivacyPolicy)),onToggle:function(e){return f(t,e)}})}))),Gt.createElement(FB,{className:fB()(i.button,h3.submit),isDisabled:v,type:"submit"},o))}))},y3=function(){return y3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},y3.apply(this,arguments)},_3=function(e){return Gt.createElement(g3,y3({},e,{blogPlatformName:nr().projectName.capitalized}))};const E3="BecomeAuthorForm_title_VFFsr",b3="BecomeAuthorForm_text_PzZRP";var S3=function(){return S3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S3.apply(this,arguments)},T3=(0,Qr.getTranslation)("@boosty/common/containers.BecomeAuthor.components.BecomeAuthorForm"),I3=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.titleObj,o=nr(),a=o.offer.userAgreement,i=o.projectName.actionInfinitive,l=(0,Vt.I0)();return Gt.createElement("div",{className:cG()("BecomeAuthorForm_block_EbMsJ",n.container)},r?Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:cG()(E3,n.title)},r.title),r.text1&&Gt.createElement("div",{className:cG()(b3,n.text)},r.text1),r.text2&&Gt.createElement("div",{className:cG()(b3,n.text)},r.text2)):Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:cG()(E3,n.title)},T3.becomeAuthor),Gt.createElement("div",{className:cG()(b3,n.text)},T3.text1),!Rr()&&Gt.createElement("div",{className:cG()(b3,n.text)},(0,Qr.getParametrizedText)(T3.text2,{actionInfinitive:i}))),Gt.createElement(_3,S3({},e,{blogUrlLabel:T3.blogUrlLabel,buttonTitle:T3.becomeAuthor,privacyPolicyUrl:ir.OFFERS_PRIVACY_POLICY,userAgreementUrl:a.url,onSuccess:function(){bd.log.gtm.createBlogSuccess(),bd.log.gtm.finishBecomingAuthor(),rm.setBloggerRegistrationCookie()},onSubmit:function(e){l((0,dm.Ax)(ny.action)(S3(S3({},e),{isStreamer:!1})))}})))},N3=function(e){var t=e.classNames,n=e.tooltipAlign,r=e.titleObj,o=e.onSuccess,a=void 0===o?Yt.noop:o,i=Mf(),l=(0,Vt.v9)(XO),s=(0,Vt.v9)(zw),c=Boolean(l);return(0,Gt.useEffect)((function(){s.isFetched&&(i((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:l.blogUrl})),a())}),[s.isFetched]),c?Gt.createElement(I3,{classNames:t,email:l.email,titleObj:r,createNetworkStatus:s,tooltipAlign:n}):null};const C3={cover:"BecomeAuthorPopup_cover_mfjmy",popup:"BecomeAuthorPopup_popup_O2EIu",block:"BecomeAuthorPopup_block_T6rwQ",content:"BecomeAuthorPopup_content_hnaqt",form:"BecomeAuthorPopup_form_YeHDO",title:"BecomeAuthorPopup_title_OXfx2",fadeIn:"BecomeAuthorPopup_fadeIn_Pwo5u"};var w3,O3,A3=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.desktop.components.BecomeAuthorPopup"),P3=function(e){var t=e.onClose,n=void 0===t?Yt.noop:t;return Gt.createElement(PM,{classNames:{block:C3.popup,content:C3.content,close:C3.close},onClose:n},Gt.createElement("div",{className:C3.block},Gt.createElement("div",{className:C3.cover},Gt.createElement("div",{className:C3.title},A3.coverTitle)),Gt.createElement(N3,{classNames:{container:C3.form},onSuccess:function(){n()}})))},L3=function(){return(0,dH.useOverlayPopups)()},R3=function(e){var t=e.currentUser,n=e.currentUserNetworkStatus,r=e.onCloseLogin,o=e.onShowAuth,i=void 0===o?Yt.noop:o,l=e.children,s=L3(),c=s.showPopup,u=s.closePopup,d=Ok(t),f=Ok(n),m=xf(),p=Mf(),h=(0,Gt.useRef)(null),v=function(){h.current=c({type:a.AUTH_SIGN_IN,onClose:r,data:{disableCloseOnSuccess:!0}}),i()};return(0,Gt.useEffect)((function(){var e=cf();null!=t||!(null==n?void 0:n.isFetched)&&null!=e||v()}),[]),(0,Gt.useEffect)((function(){var e=cf();if(!d&&t&&h.current)return u(h.current.id),void p(m);t||!d?Boolean(e)&&Boolean(null==n?void 0:n.error)&&!(null==f?void 0:f.error)&&v():v()}),[t,n]),null==t?null:Gt.createElement(Gt.Fragment,null,l)};!function(e){e.ROOT="ROOT"}(w3||(w3={})),function(e){e.ROOT="ROOT"}(O3||(O3={}));var k3,D3=function(){return D3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},D3.apply(this,arguments)},U3=(0,Qr.getTranslation)("@common/components.Payment.components.StepAlreadySubscribed"),B3=oo("Payment.StepAlreadySubscribed"),x3=function(e){var t=e.selectedLevel,n=e.selectedLevelOffTime,r=e.onClose;return Gt.createElement("div",D3({},Na(B3(O3.ROOT))),Gt.createElement("div",{className:fB()("StepAlreadySubscribed_dialogContent_KTFlk","StepAlreadySubscribed_small_nJqZZ")},Gt.createElement(X2,{level:t,offTime:n,isCurrent:!0,isStandalone:!0,isStandaloneExtended:!0})),Gt.createElement("div",{className:"StepAlreadySubscribed_dialogFooter_deP19"},Gt.createElement(HB,{onClick:r},U3.close)))};!function(e){e.ROOT="ROOT"}(k3||(k3={}));var M3,F3=function(){return F3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},F3.apply(this,arguments)},G3=oo("Payment.StepLoading"),H3=function(){return Gt.createElement("div",F3({},Na(G3(k3.ROOT))),Gt.createElement(ZY,null))};!function(e){e.BUTTON="button"}(M3||(M3={}));var W3,V3=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j3=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},z3=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Y3=(0,Qr.getTranslation)("@common/components.ApplePayButton"),K3=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isApplePayAvailable:!1,canMakePayments:!1},t.onVisibilityChange=function(){t.initApplePay()},t.onClick=function(){t.state.canMakePayments?t.createApplePaySession():t.openApplePaySetup()},t}return V3(t,e),t.prototype.componentDidMount=function(){Boolean(window.ApplePaySession)&&(Df.onChange(this.onVisibilityChange),this.initApplePay())},t.prototype.componentWillUnmount=function(){Df.removeHandler(this.onVisibilityChange)},t.prototype.getApplePayConfig=function(){return nr().applePay},t.prototype.initApplePay=function(){return j3(this,void 0,void 0,(function(){var e;return z3(this,(function(t){switch(t.label){case 0:return[4,ApplePaySession.canMakePaymentsWithActiveCard(this.getApplePayConfig().merchantId)];case 1:return e=t.sent(),this.setState({isApplePayAvailable:ApplePaySession.canMakePayments(),canMakePayments:e}),[2]}}))}))},t.prototype.createApplePaySession=function(){var e=this,t=this.props,n=t.price,r=t.onAbort,o=t.onPayment,a=t.onSuccess,i=t.actions,l={countryCode:"RU",currencyCode:"RUB",supportedNetworks:["visa","masterCard"],merchantCapabilities:["supports3DS"],total:{label:this.getApplePayConfig().label,amount:String(n)}},s=new ApplePaySession(this.getApplePayConfig().version,l);s.onpaymentauthorized=function(t){return j3(e,void 0,void 0,(function(){var e;return z3(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,o(t.payment.token)];case 1:return n.sent(),s.completePayment(ApplePaySession.STATUS_SUCCESS),a(),[3,3];case 2:return e=n.sent(),s.completePayment(ApplePaySession.STATUS_FAILURE),r(e),[3,3];case 3:return[2]}}))}))},s.onvalidatemerchant=function(t){return j3(e,void 0,void 0,(function(){var e,n,o;return z3(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,i.validateApplePaySession({validationUrl:t.validationURL})];case 1:return"ok"===(e=a.sent()).data.status&&(n=JSON.parse(e.data.data),s.completeMerchantValidation(n)),"fail"===e.data.status&&(s.abort(),r()),[3,3];case 2:return o=a.sent(),r(o),[3,3];case 3:return[2]}}))}))},s.begin()},t.prototype.openApplePaySetup=function(){ApplePaySession.openPaymentSetup(this.getApplePayConfig().merchantId)},t.prototype.render=function(){var e=this.props,t=e.className,n=e.type,r=e.isTestUser||this.getApplePayConfig().enable;return this.state.isApplePayAvailable&&r?Gt.createElement("div",{"data-test-id":this.getTestId(M3.BUTTON),className:fB()(t,"ApplePayButton_button_AfTPw"),onClick:this.onClick},Gt.createElement("div",{className:"ApplePayButton_text_BH7ra"},Y3[n]),Gt.createElement("div",{className:"ApplePayButton_logo_ZmyH6"})):null},t.defaultProps={type:Ce.POST},function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}([Cx("ApplePayButton")],t)}(Gt.Component),q3=(0,Vt.$j)((function(e){return{isTestUser:lA(e)}}),(function(e){return{actions:(0,ET.DE)({validateApplePaySession:(0,dm.Ax)(rb.action)},e)}}))(K3);!function(e){e.ROOT="ROOT"}(W3||(W3={}));var X3,Q3=function(e){var t=e.description,n=e.asteriskClassName,r=t.match(/(\d+)([\.|*]+)(\d+)/);if(null==r)return Gt.createElement("span",null,t);for(var o=r[1],a=r[3],i=(o+"*".repeat(16-o.length-a.length)+a).split(""),l=12;l>0;l-=4)i.splice(l,0," ");return Gt.createElement("span",null,i.map((function(e,t){return"*"===e?Gt.createElement(pB,{glyph:hB.EeL,className:fB()("CardNumber_asterisk_UxUZq",n),key:t}):e})))};!function(e){e.ITEM="ITEM",e.NEW_BIND="NEW_BIND"}(X3||(X3={}));var J3,Z3=function(){return Z3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Z3.apply(this,arguments)},$3=oo("Payment.Binds"),e4=function(e){var t=e.binds,n=e.selected,r=e.newBindTitle,o=e.onChange,a=void 0===o?Yt.noop:o;return Gt.createElement(lF,{className:"Binds_block_Y8F_p",isMulti:!1,onSelect:a,options:t,selected:n,Component:function(e){return Gt.createElement("div",null,null===e.valueObject.id?Gt.createElement("span",Z3({className:"Binds_newBind_b4KdB"},Na($3(X3.NEW_BIND))),r):Gt.createElement("span",Z3({},Na($3(X3.ITEM))),Gt.createElement("span",null,e.valueObject.payType)," ",Gt.createElement(Q3,{description:e.valueObject.description})))},valueProp:"id"})};!function(e){e.ROOT="ROOT"}(J3||(J3={}));const t4="Methods_radioButtonCards_wCVoK",n4="Methods_item_lpEXM",r4="Methods_icons_B7nrh";var o4,a4=function(){return a4=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a4.apply(this,arguments)},i4=(0,Qr.getTranslation)("@common/components.Payment.components.Methods"),l4=oo("Payment.Methods"),s4=function(e){var t=e.selected,n=e.isYandexMoneyEnabled,r=e.isQiwiEnabled,o=e.isPayPalEnabled,a=e.isCardGlobalEnabled,i=e.isCardEnabled,l=e.onChange,s=function(e){var t=e.target.value;l(t)};return Gt.createElement("div",a4({},Na(l4(J3.ROOT),t)),Gt.createElement(PF,{className:"Methods_block_b6y22",testId:l4(J3.ROOT)},Gt.createElement(zF,null,i&&Gt.createElement(OF,{className:t4,name:"paymentMethod",isChecked:t===Ee.CARD,value:Ee.CARD,onChange:s},Gt.createElement("div",{className:n4},Gt.createElement("div",{className:r4},Gt.createElement("div",{className:"Methods_cards_zyxBY"})),i4.card)),a&&Gt.createElement(OF,{className:t4,name:"paymentMethod",isChecked:t===Ee.CARD_GLOBAL,value:Ee.CARD_GLOBAL,onChange:s},Gt.createElement("div",{className:n4},Gt.createElement("div",{className:r4},Gt.createElement("div",{className:"Methods_cardsGlobal_oilYV"})),i4.cardGlobal)),n&&Gt.createElement(OF,{className:"Methods_radioButtonYandexMoney_ePlnX",name:"paymentMethod",isChecked:t===Ee.YANDEX,value:Ee.YANDEX,onChange:s},Gt.createElement("div",{className:n4},Gt.createElement("div",{className:r4},Gt.createElement("div",{className:"Methods_yandexMoney_xj1oS"})),i4.yandexMoney)),r&&Gt.createElement(OF,{className:"Methods_radioButtonQiwi_SppIr",name:"paymentMethod",isChecked:t===Ee.QIWI,value:Ee.QIWI,onChange:s},Gt.createElement("div",{className:n4},Gt.createElement("div",{className:r4},Gt.createElement("div",{className:"Methods_qiwi_IIRbZ"})),i4.qiwi)),o&&Gt.createElement(OF,{className:"Methods_radioButtonPayPal_OoC8l",name:"paymentMethod",isChecked:t===Ee.PAYPAL,value:Ee.PAYPAL,onChange:s},Gt.createElement("div",{className:n4},Gt.createElement("div",{className:r4},Gt.createElement("div",{className:"Methods_payPal_J_XRw"})),i4.paypal)))))};!function(e){e.ROOT="ROOT",e.FRAME="FRAME",e.BUTTON_PAY="BUTTON_PAY",e.BUTTON_CANCEL="BUTTON_CANCEL"}(o4||(o4={}));var c4,u4=function(){return u4=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u4.apply(this,arguments)},d4=(0,Qr.getTranslation)("@common/components.Payment.components.PaymentByDmrUrl"),f4=oo("Payment.PaymentByDmrUrl"),m4=function(e){var t=e.dmrUrl,n=e.isNewBind,r=e.isNeed3ds,o=e.isLoadingBinds,a=e.onDmrSuccess,i=e.onDmrError,l=e.onDmr3dsDisplayed,s=e.onDmrCPGDisplayed,c=e.onPayWithExistingBind,u=e.onCancel;return Gt.createElement("div",u4({},Na(f4(o4.ROOT))),o?Gt.createElement(ZY,null):n||r?Gt.createElement("div",u4({},Na(f4(o4.FRAME))),Gt.createElement(JY,{className:"PaymentByDmrUrl_iframe_au0Iq",src:t,LoadingComponent:ZY,onSuccess:a,onError:i,onOpenCPGWindow:s,onDmr3dsPage:l})):Gt.createElement("div",{className:"PaymentByDmrUrl_buttons_iWCFS"},Gt.createElement(FB,u4({className:"PaymentByDmrUrl_buttonPay_z9qix"},Na(f4(o4.BUTTON_PAY)),{onClick:c}),d4.pay),Gt.createElement(HB,u4({},Na(f4(o4.BUTTON_CANCEL)),{onClick:u}),d4.cancel)))};!function(e){e.ROOT="ROOT"}(c4||(c4={}));var p4,h4=function(){return h4=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h4.apply(this,arguments)},v4=(0,Qr.getTranslation)("@common/components.Payment.components.PaymentByQiwi"),g4=oo("Payment.PaymentByQiwi"),y4=function(e){var t=e.isNewBind,n=e.phone,r=e.dmrUrl,o=e.isSmsCodeDisplayed,a=e.isLoading,i=e.accountInfoUrl,l=e.errorSmsCode,s=e.onPhoneChange,c=e.onSmsCodeFill,u=e.onSmsCodeChange,d=e.onResendSmsCode,f=e.onSubmit,m=e.onOpenExternalWindow,p=e.onCancel;return Gt.createElement("div",h4({},Na(g4(c4.ROOT))),Gt.createElement(Sx,{onSubmit:function(e){e.preventDefault(),t&&r?(m(),window.open(r)):f()}},a?Gt.createElement(ZY,null):Gt.createElement(Gt.Fragment,null,t&&!r&&Gt.createElement(Ix,null,Gt.createElement(nM,{label:v4.phone,value:n,placeholder:"+7",isDisabled:o,onChange:s}),Gt.createElement("span",{className:"PaymentByQiwi_phoneDescription_reVcg"},v4.phoneDescription," ",Gt.createElement(cM,{to:i,target:"_blank",className:"PaymentByQiwi_phoneDescriptionLink_Ff0sN"},v4.approvedWallet))),o?Gt.createElement(Ix,null,Gt.createElement(WK,{classNames:{info:"PaymentByQiwi_smsCodeInfo_PqThH",error:"PaymentByQiwi_smsCodeError_fN3Fw",footer:"PaymentByQiwi_smsCodeFooter_M54E1"},title:v4.code,error:l,resend:d,onFill:c,onChange:u})):Gt.createElement("div",{className:"PaymentByQiwi_buttons_Q65ub"},Gt.createElement(FB,{className:"PaymentByQiwi_buttonPay_AO5Q0",type:"submit"},v4[t?r?"goToPay":"submit":"pay"]),Gt.createElement(HB,{onClick:p},v4.cancel)))))};!function(e){e.ROOT="ROOT"}(p4||(p4={}));var _4=function(){return _4=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_4.apply(this,arguments)},E4=(0,Qr.getTranslation)("@common/components.Payment.components.PaymentByYandex"),b4=oo("Payment.PaymentByYandex"),S4=function(e){var t=e.isNewBind,n=e.isLoading,r=e.dmrUrl,o=e.onSubmit,a=e.onOpenExternalWindow,i=e.onCancel;return Gt.createElement("div",_4({},Na(b4(p4.ROOT))),Gt.createElement(Sx,{onSubmit:function(e){e.preventDefault(),t?r&&(a(),window.open(r)):o()}},n?Gt.createElement(ZY,null):Gt.createElement("div",{className:"PaymentByYandex_buttons_ztN2D"},Gt.createElement(FB,{className:"PaymentByYandex_buttonPay_HHDAZ",type:"submit"},E4[t?"goToPay":"pay"]),Gt.createElement(HB,{onClick:i},E4.cancel))))};const T4="StepPayment_attention_oiYln",I4="StepPayment_link_vsw_R";var N4,C4=function(){return C4=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C4.apply(this,arguments)},w4=(0,Qr.getTranslation)("@common/components.Payment.components.StepPayment"),O4=oo("Payment.StepPayment"),A4=function(e){var t=e.selectedMethod,n=e.isYandexMoneyEnabled,r=e.isQiwiEnabled,o=e.isPayPalEnabled,a=e.isCardGlobalEnabled,i=e.isCardEnabled,l=e.isApplePayEnabled,s=e.binds,c=e.hasBinds,u=e.selectedBind,d=e.newBindTitle,f=e.payments,m=f.card,p=f.cardGlobal,h=f.yandex,v=f.qiwi,g=f.paypal,y=f.applePay,_=e.isOnlyPaymentDisplayed,E=e.onMethodChange,b=e.onBindChange,S=[n,r,o,a,i].filter((function(e){return e}));return Gt.createElement("div",C4({},Na(O4(W3.ROOT))),!_&&Gt.createElement(Gt.Fragment,null,S.length>=2&&Gt.createElement("div",{className:"StepPayment_title_ezkHX"},w4.title),l&&Gt.createElement(q3,C4({className:"StepPayment_applePay_t0pSp"},y)),S.length>=2&&Gt.createElement(s4,{selected:t,isYandexMoneyEnabled:n,isQiwiEnabled:r,isPayPalEnabled:o,isCardGlobalEnabled:a,isCardEnabled:i,onChange:E}),m.isActive&&a&&Gt.createElement("div",{className:T4},w4.attention.card.text,Gt.createElement("br",null),w4.attention.card.otherCurrency," ",Gt.createElement("span",{className:I4,onClick:function(){return E(Ee.CARD_GLOBAL)}},w4.changePayMethod)),p.isActive&&i&&Gt.createElement("div",{className:T4},w4.attention.cardGlobal.text," ",Gt.createElement("span",{className:I4,onClick:function(){return E(Ee.CARD)}},w4.changePayMethod)),c&&Gt.createElement(e4,{binds:s,selected:u,newBindTitle:d,onChange:b})),m.isActive&&Gt.createElement(m4,C4({},m)),p.isActive&&Gt.createElement(m4,C4({},p)),h.isActive&&Gt.createElement(S4,C4({},h)),v.isActive&&Gt.createElement(y4,C4({},v)),g.isActive&&Gt.createElement(m4,C4({},g)))},P4=n(74061),L4=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R4=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canvasRef=Gt.createRef(),t}return L4(t,e),t.prototype.componentDidMount=function(){this.updateQR()},t.prototype.componentDidUpdate=function(e){var t=this.props.text;t&&t!==e.text&&this.updateQR()},t.prototype.updateQR=function(){return e=this,void 0,n=function(){var e,t,n,r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return e=this.props,t=e.text,n=e.size,r=e.margin,o=void 0===r?0:r,[4,P4.rT(this.canvasRef.current,t,{width:n,margin:o})];case 1:return a.sent(),[2]}}))},new((t=void 0)||(t=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,i)}l((n=n.apply(e,[])).next())}));var e,t,n},t.prototype.render=function(){return Gt.createElement("canvas",{ref:this.canvasRef,id:this.props.id})},t}(Gt.PureComponent);!function(e){e.ROOT="ROOT"}(N4||(N4={}));var k4,D4=function(){return D4=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},D4.apply(this,arguments)},U4=(0,Qr.getTranslation)("@common/components.Payment.components.StepShare"),B4=oo("Payment.StepShare"),x4=(0,Gt.memo)((function(e){var t=e.donationShareLink,n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(Math.random().toString()),1)[0],r=Gf().blogUrl,o=(0,Gt.useMemo)((function(){var e=new URL(t?window.origin+t:"".concat(window.location.href));return e.searchParams.set("qr","true"),e.href}),[]);return Gt.createElement("div",D4({},Na(B4(N4.ROOT)),{className:"StepShare_root_lPKFT"}),t&&Gt.createElement("div",{className:"StepShare_text_kQB7Z"},U4.text),Gt.createElement("div",{className:"StepShare_qrWrapper_vK9Af"},Gt.createElement("div",{className:"StepShare_qrInner_wwXQp"},Gt.createElement(R4,{text:o,size:150,id:n,margin:3}))),Gt.createElement(HB,{className:"StepShare_button_O9Rrp",onClick:function(){var e=document.createElement("a");e.download="".concat(r,"-donate.png");var t=document.getElementById(n);t&&(e.href=t.toDataURL(),e.click())}},Gt.createElement(pB,{glyph:hB.DjJ,className:"StepShare_icon_CZV2r"}),U4.downloadImage))}));x4.displayName="StepShare",function(e){e.ROOT="ROOT",e.INPUT="INPUT"}(k4||(k4={}));const M4="PriceForm_separated_q945a";var F4,G4=function(){return G4=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},G4.apply(this,arguments)},H4=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},W4=oo("Payment.PriceForm"),V4=(0,Qr.getTranslation)("@common/components.PriceForm"),j4=function(e){var t,n=e.value,o=e.onChange,a=e.onBlur,i=e.name,l=e.testId,s=e.isFixedPrice,c=e.separateFields,u=e.isValidPrice,d=e.isDisabled,f=e.classNames,m=void 0===f?{}:f,p=e.discountValue,h=e.error,v=nr().currencies.list,g=[];Qo(r.MULTI_CURRENCY)&&(null==v?void 0:v.length)>1&&(g=v.map((function(e){return{id:e,title:"".concat(V4[e]," (").concat(jr(e),")")}})));var y=(0,Vt.v9)(bA),_=H4((0,Gt.useState)(n||0),2),E=_[0],b=_[1],S=H4((0,Gt.useState)({id:y,title:"".concat(V4[y]," (").concat(jr(y),")")}),2),T=S[0],I=S[1],N=(0,Vt.I0)(),C="number"==typeof p,w=function(e){var t=e.target.value;o&&o(t),b(t?$a(t):null)},O=function(e){a&&a(e.target.value)};(0,Gt.useEffect)((function(){b(n)}),[n]),(0,Gt.useEffect)((function(){I({id:y,title:"".concat(V4[y]," (").concat(jr(y),")")})}),[y]),(0,Gt.useEffect)((function(){N(Ig({currency:null}))}),[]);var A=function(e,t){return s?Gt.createElement("div",{className:"PriceForm_fixedPrice_PgpqU"},C&&Gt.createElement("span",{className:"PriceForm_priceWithoutDiscount_L2Ohg"},Vr({amount:E,currency:y})),Vr({amount:C?p:E,currency:y})):Gt.createElement(Zx,{className:fB()("PriceForm_price_V7HGl",c&&M4,m.priceInput),classNameInput:fB()(e&&"PriceForm_priceInput_ZnH67",c&&M4),name:i,value:null!==E?String(E):"",mask:Nf({currency:y}),onChange:w,onBlur:O,testId:l,isValid:u,disabled:d,error:t})};return Gt.createElement("div",G4({className:fB()("PriceForm_root_yIEce",m.root)},Na(W4(k4.ROOT))),g.length>0&&Gt.createElement("div",{className:fB()("PriceForm_priceContainer_IlcnE",m.priceContainer)},A(!0,h),Gt.createElement(lF,{classNames:{mainBox:fB()("PriceForm_currencySelectorBox_k8Je3",(t={},t.PriceForm_partial__fS5r=!s,t[M4]=c,t))},className:fB()("PriceForm_currencySelector_tEl5t",m.currencySelector),isDisabled:d,labelProp:"title",selected:T,onSelect:function(e){N(Ig({currency:e.id}))},options:g,selectionLabel:null,valueProp:"id"})),0===g.length&&A(!1,h))};!function(e){e.ROOT="ROOT",e.LOADING="LOADING",e.BUTTON_PURCHASE="BUTTON_PURCHASE",e.BUTTON_CANCEL="BUTTON_CANCEL"}(F4||(F4={}));const z4="AuthorActions_icon_DxXOe";var Y4,K4=(0,Qr.getTranslation)("@common/components.Payment.components.AuthorActions"),q4=function(e){var t=e.onShowQrClick,n=e.donationShareLink,r=jG().showAlert,o=nr().isMobile;return Gt.createElement("div",null,Gt.createElement("div",{className:"AuthorActions_text_nc6E7"},K4.text),Gt.createElement("div",{className:"AuthorActions_buttons_oDqxt"},Gt.createElement(FB,{className:"AuthorActions_copyButton_NjBuc",onClick:function(){Fr(n?window.origin+n:window.location.href,(function(){return r({type:p.SUCCESS,text:K4.copySuccess})}))}},Gt.createElement(pB,{glyph:pk.vUr,className:z4})," ",K4.copyLink),!o&&Gt.createElement(HB,{className:"AuthorActions_qrButton_LoE0P",onClick:t},Gt.createElement(pB,{glyph:pk.n1O,className:z4})," ",K4.qr)))},X4=function(e){var t=e.children;return Gt.createElement("div",{className:"ErrorNote_root_dzxUo"},t)};!function(e){e.ROOT="ROOT"}(Y4||(Y4={}));var Q4,J4=function(){return J4=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},J4.apply(this,arguments)},Z4=oo("Payment.Levels"),$4=function(e){var t=e.selectedLevel,n=e.currentLevel,r=e.isStandaloneLevel,o=e.selectedLevelOnTime,a=e.currentLevelOffTime,i=e.onDescriptionOpen,l=function(){null==i||i()};return Gt.createElement("div",J4({className:"Levels_block_u4N7w"},Na(Z4(Y4.ROOT))),n&&Gt.createElement(X2,{level:n,isCurrent:!0,offTime:a,onDescriptionOpen:l}),Gt.createElement(X2,{level:t,isStandalone:r,onTime:o,onDescriptionOpen:l}))};!function(e){e.ROOT="ROOT"}(Q4||(Q4={}));var e6,t6=[1,3,6,12],n6=function(){return n6=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n6.apply(this,arguments)},r6=(0,Qr.getTranslation)("@common/components.Payment.components.Periods"),o6=oo("Payment.Periods"),a6=function(e){var t=e.period,n=e.onChange,r=void 0===n?Yt.noop:n,o=e.isDowngrade,a=e.isDisabled,i=e.subscriptionExpire?yo(e.subscriptionExpire):"",l=function(e){return qr([r6.periods.oneMonth,r6.periods.threeMonths,r6.periods.months],e)},s=function(e){r($a(e.target.value))},c=l(t);return Gt.createElement("div",n6({className:"Periods_block_TBUc7"},Na(o6(Q4.ROOT))),Gt.createElement(PF,{label:r6.periodLabel,labelClassName:"Periods_label_flG2u"},Gt.createElement(zF,null,t6.map((function(e){return Gt.createElement(OF,{key:e,name:"period",isDefaultChecked:e===t,value:e,onChange:s,isDisabled:a},"".concat(e," ").concat(l(e)))})))),Gt.createElement("div",{className:"Periods_description_I0fUK"},(0,Qr.getParametrizedText)(r6.chargeOff,{period:t,month:c})," ",i,".",Gt.createElement("br",null),o?r6.paymentNoticeNoNeedToPay:r6.paymentNotice))};!function(e){e.AMOUNT_TO_PAY="AMOUNT_TO_PAY"}(e6||(e6={}));var i6,l6=function(){return l6=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l6.apply(this,arguments)},s6=(0,Qr.getTranslation)("@common/components.Payment.components.Summary"),c6=oo("Payment.Summary"),u6=function(e){var t=e.paymentInfoNetworkStatus,n=e.summary,r=e.isDiscountByCurrentLevel,o=e.originPrice,a=e.discount,i=nr().currencies.default;return Gt.createElement("div",{className:"Summary_block_eiLls"},Gt.createElement("div",l6({className:"Summary_price_q1RkT"},Na(c6(e6.AMOUNT_TO_PAY))),(null==t?void 0:t.isFetching)&&Gt.createElement("div",{className:"Summary_spinnerWrapper_tes__"},Gt.createElement(uM,{size:40,className:"Summary_spinner_iMAOW"})),!(null==t?void 0:t.isFetching)&&n&&Gt.createElement("div",{className:"Summary_summary_bmATy"},n)),Gt.createElement("div",{className:"Summary_description_wQ1eO"},a&&Gt.createElement(Gt.Fragment,null,(0,Qr.getParametrizedText)(s6.discount,{discount:a})," ",Gt.createElement("br",null)),o>0&&Gt.createElement(Gt.Fragment,null,(0,Qr.getParametrizedText)(s6.originPrice,{price:Vr({amount:o,currency:i})}),Gt.createElement("br",null),s6.otherCurrencyPayment,Gt.createElement("br",null)),r&&Gt.createElement(Gt.Fragment,null,s6.discountByCurrentLevel," ",Gt.createElement("br",null))))},d6=function(){return d6=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d6.apply(this,arguments)},f6=(0,Qr.getTranslation)("@common/components.Payment.components.StepStart"),m6=oo("Payment.StepStart"),p6=function(e){var t=e.currentLevel,n=e.selectedLevel,r=e.isStandaloneLevel,o=e.isDowngrade,a=e.isChangeLevel,i=e.currentLevelOffTime,l=e.selectedLevelOnTime,s=e.price,c=e.originPrice,u=e.discountPrice,d=e.discount,f=e.period,m=e.paymentInfo,p=e.paymentInfoNetworkStatus,h=e.summary,v=e.isDiscountByCurrentLevel,g=e.buttonPurchaseTitle,y=e.buttonCancelTitle,_=e.shareLink,E=e.onCustomPriceChange,b=e.onCustomPriceBlur,S=e.onPeriodChange,T=e.onPurchaseClick,I=e.onCancelClick,N=e.onDescriptionOpen,C=e.onGoToStepShare,w=(0,Vt.v9)(XO),O=(null==n?void 0:n.ownerId)===w.id,A=(0,Vt.v9)(aO),P=O||A;return n?Gt.createElement("div",d6({},Na(m6(F4.ROOT))),P&&Gt.createElement(Gt.Fragment,null,Gt.createElement(X4,null,O?f6.authorNote:f6.authorIsBanned),Gt.createElement("br",null)),Gt.createElement($4,{currentLevel:t,selectedLevel:n,isStandaloneLevel:r,currentLevelOffTime:i,selectedLevelOnTime:l,onDescriptionOpen:N}),Gt.createElement(a6,{period:f,isDowngrade:o,subscriptionExpire:m.nextPayTime,onChange:S,isDisabled:P}),Gt.createElement("div",{className:"StepStart_header_On51U"},f6.subscriptionPrice),Gt.createElement(j4,{isFixedPrice:!0,value:s,discountValue:u,onChange:E,onBlur:b,testId:m6(k4.INPUT),isDisabled:P}),Gt.createElement(u6,{paymentInfoNetworkStatus:p,summary:h,isDiscountByCurrentLevel:v,discount:d,originPrice:c}),O?Gt.createElement(q4,{onShowQrClick:C,donationShareLink:_}):Gt.createElement("div",{className:"StepStart_buttons_EwJvz"},Gt.createElement(FB,d6({className:"StepStart_purchaseButton_YcprQ",disabled:P},Na(m6(F4.BUTTON_PURCHASE)),{onClick:T}),g),a&&Gt.createElement(HB,d6({},Na(m6(F4.BUTTON_CANCEL)),{onClick:I}),y))):Gt.createElement("div",{className:"StepStart_error_K3iuc"},f6.errorLevel)};!function(e){e.ROOT="ROOT"}(i6||(i6={}));const h6="StepStartDonationPayment_label_H5pMM",v6="StepStartDonationPayment_note_cRf1m",g6="StepStartDonationPayment_disabled_z1WG_";var y6,_6=function(){return _6=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_6.apply(this,arguments)},E6=(0,Qr.getTranslation)("@common/components.Payment.components.StepStartDonationPayment"),b6=oo("Payment.StepStartDonationPayment"),S6=function(e){var t,n,r=e.sum,o=e.message,a=void 0===o?"":o,i=e.sumError,l=e.maxMessageLength,s=e.minSumAmount,c=e.maxSumAmount,u=e.onCustomPriceChange,d=e.canWriteDonationMessage,f=e.onPurchaseClick,m=e.onMessageChange,p=e.onCancel,h=e.onGoToStepShare,v=e.currency,g=e.donationShareLink,y=e.blogUrl;t=xf(),n=t.state,(0,Gt.useEffect)((function(){(0,Do.parse)(t.search).qr?bd.log.donation.openForm({openedFrom:"qr"}):(null==n?void 0:n.byClick)?bd.log.donation.openForm({openedFrom:"ui"}):bd.log.donation.openForm({openedFrom:"direct-link"})}),[]);var _=bk(y).canCreate,E=_k().isAuthorized,b=(0,Vt.v9)(aO),S=_||b,T=BK().showPopup,I=AD().setData,N=function(e){T({type:we.AUTH_SIGN_IN}),I({sum:r,message:a,currency:v,goToPayment:e})};return Gt.createElement("div",_6({},Na(b6(i6.ROOT))),Gt.createElement("div",{className:"StepStartDonationPayment_targetContent_mjbrM"},S&&Gt.createElement(Gt.Fragment,null,Gt.createElement(X4,null,_?E6.authorNote:E6.authorIsBanned),Gt.createElement("br",null)),!E&&Gt.createElement(X4,null,E6.authNote.text," ",Gt.createElement(VB,{onClick:function(){return N()}},E6.authNote.signInOrSignUp)),Gt.createElement("div",{className:fB()(h6,"StepStartDonationPayment_priceFormLabel_KwGOu",S&&g6)},E6.sum),Gt.createElement(j4,{isFixedPrice:!1,isValidPrice:!i,value:r,onChange:u,testId:b6(k4.INPUT),classNames:{root:"StepStartDonationPayment_priceRoot_mG6ZT",priceInput:"StepStartDonationPayment_priceInput_xWsvG",currencySelector:"StepStartDonationPayment_currencySelector_GBLTz"},separateFields:!0,isDisabled:S}),Gt.createElement("div",{className:fB()(v6,"StepStartDonationPayment_minSumNote_xCHB1",i&&"StepStartDonationPayment_error_YNpfK")},i===OD.TOO_HIGH?(0,Qr.getParametrizedText)(E6.maximumSum,{maximumSum:"string"==typeof c?c:Vr({amount:Number(c),currency:v})}):(0,Qr.getParametrizedText)(E6.minimalSum,{minimalSum:"string"==typeof s?s:Vr({amount:Number(s),currency:v})})),Gt.createElement("div",{className:fB()("StepStartDonationPayment_messageHeader_VKd8o",S&&g6)},Gt.createElement("div",{className:h6},E6.message),Gt.createElement("div",{className:v6},d?E6.optional:"")),Gt.createElement("div",{className:"StepStartDonationPayment_messageContainer_kNC9S"},Gt.createElement("textarea",{placeholder:d||S?E6.yourMessage:E6.notAllowed,onChange:function(e){m(e.target.value)},className:"StepStartDonationPayment_textarea_NWCEw",maxLength:200,rows:4,value:a,disabled:S||!d})),Gt.createElement("div",{className:fB()("StepStartDonationPayment_lengthCounter_CdepV",S&&g6)},a.length,"/",l),_?Gt.createElement(q4,{onShowQrClick:h,donationShareLink:g}):Gt.createElement("div",{className:"StepStartDonationPayment_buttons_LD4aB"},Gt.createElement(FB,{className:"StepStartDonationPayment_payButton_sc5mF",disabled:Boolean(i||S),onClick:function(){E?f():N(!0)}},Gt.createElement(pB,{glyph:hB.iMT,className:"StepStartDonationPayment_tipIcon_FcdPA"})," ",E6.send),Gt.createElement(HB,{className:"StepStartDonationPayment_cancelButton_RDcpR",onClick:p},E6.cancel))))},T6=n(9069),I6=(0,Qr.getTranslation)("@common/components.Payment.components.StepStartGiftSubscription"),N6={duration:"0.5s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},C6=function(e){var t=e.currentSubscriptionLevelIndex,n=e.subscriptionLevels,r=e.subscriptionLevelsLength,o=e.currentSubscriptionLevel,a=e.onCurrentSubscriptionLevelIndexChange,i=e.onDescriptionOpen,l=e.onGoToPayment,s=(0,Gt.useRef)(null),c=(0,Vt.v9)(bA),u=o.currencyPrices[c],d=(0,Vt.v9)(aO);return(0,Gt.useEffect)((function(){s.current&&s.current.updateHeight()}),[s.current]),Gt.createElement(Gt.Fragment,null,d&&Gt.createElement(Gt.Fragment,null,Gt.createElement(X4,null,I6.authorIsBanned),Gt.createElement("br",null)),Gt.createElement("div",{className:"StepStartGiftSubscription_chooseSubscriptionLevelHeader_Z18rl"},Gt.createElement("span",{className:"StepStartGiftSubscription_chooseSubscriptionLevelText_zT8MC"},I6.chooseLevel),Gt.createElement(XF,{className:"StepStartGiftSubscription_turnBlock__9Rxc",currentItemIndex:t,itemsLength:r,onItemIndexChange:a})),Gt.createElement("div",{className:"StepStartGiftSubscription_levelCardContainer_ov1Ws"},Gt.createElement(T6.ZP,{ref:s,className:"StepStartGiftSubscription_slider_M88_0",slideClassName:"StepStartGiftSubscription_slideContainer_F9hoZ",axis:"x",index:t,onChangeIndex:a,enableMouseEvents:!0,springConfig:N6,resistance:!1,animateHeight:!0},n.map((function(e){return Gt.createElement("div",{key:e.id},Gt.createElement(X2,{classNames:{board:"StepStartGiftSubscription_levelCard_wgxKY"},level:e,isStandalone:!0,isStandaloneExtended:!0,hideFooter:!0,onDescriptionOpen:i}))})))),Gt.createElement("div",{className:"StepStartGiftSubscription_priceBlock_Kmt2p"},Gt.createElement("div",{className:"StepStartGiftSubscription_priceBlockTotal_Cnsbi"},I6.total),Gt.createElement(j4,{isFixedPrice:!0,isDisabled:d,value:u}),Gt.createElement("div",{className:"StepStartGiftSubscription_priceBlockHint_IYLqL"},I6.hint)),Gt.createElement("div",{className:"StepStartGiftSubscription_footer__1DF4"},Gt.createElement(FB,{onClick:l,className:"StepStartGiftSubscription_buyButton_X6nOo",disabled:d},I6.buy)))},w6=(0,Qr.getTranslation)("@common/components.TargetProgress"),O6=Gt.memo((function(e){var t=e.showDescription,n=void 0===t||t,r=e.target,o=r.currentSum,a=r.targetSum,i=r.selectedCurrencyCurrentSum,l=r.selectedCurrencyTargetSum,s=r.description,c=i>=0?i:o,u=l>=0?l:a,d=r.type===Ye.MONEY,f=Math.round(100*c/u),m=(0,Yt.getFormattedNumber)(c),p=(0,Yt.getFormattedNumber)(u),h=c>=u,v=(0,Vt.v9)(bA);return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"TargetProgress_collected_N6OG0"},h&&Gt.createElement(pB,{glyph:hB.R$2,className:"TargetProgress_iconFinished_f_IP3"}),m," ",w6.from," ",d?Vr({amount:u,currency:v,useGrouping:!0}):p," ",Gt.createElement("span",{className:"TargetProgress_collectedUnit_ysATE"},d?w6.collectedUnit.money:w6.collectedUnit.subscribers)),!h&&Gt.createElement(LM,{percent:f,classNames:{root:"TargetProgress_progressBarWrapper_rIrLd"}}),n&&Gt.createElement("div",{className:"TargetProgress_description_p0ioE"},s))}));!function(e){e.ROOT="ROOT"}(y6||(y6={}));var A6=function(){return A6=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A6.apply(this,arguments)},P6=(0,Qr.getTranslation)("@common/components.Payment.components.StepStartSinglePayment"),L6=oo("Payment.StepStartSinglePayment"),R6=function(e){var t=e.type,n=e.price,r=e.target,o=e.blogPost,a=e.message,i=e.bloggerName,l=e.teaserText,s=e.teaserMediaDataText,c=e.shareLink,u=e.onCustomPriceChange,d=e.onCustomPriceBlur,f=e.onPurchaseClick,m=e.onHasAccess,p=e.onGoToStepShare,h=e.error,v=(0,Vt.v9)(XO).id,g=(0,Vt.v9)(aO),y=-1!==[null==a?void 0:a.authorId,null==r?void 0:r.bloggerId,null==o?void 0:o.user.id].indexOf(v),_=g||y;return(0,Gt.useEffect)((function(){(null==o?void 0:o.hasAccess)&&m(),(null==a?void 0:a.isPaid)&&m()}),[o,a]),Gt.createElement("div",A6({},Na(L6(y6.ROOT))),_&&Gt.createElement(Gt.Fragment,null,Gt.createElement(X4,null,g?P6.authorIsBanned:P6.authorNote),Gt.createElement("br",null)),Gt.createElement("div",{className:"StepStartSinglePayment_targetContent_oJ5DN"},t===Ce.DONATION?Gt.createElement(KB,{title:null==r?void 0:r.description,content:r?Gt.createElement(O6,{target:r,showDescription:!1}):Gt.createElement(ZY,null)}):o?Gt.createElement(KB,{title:o.title||(0,Qr.getParametrizedText)(P6.noTitle,{bloggerName:i,createdAt:bo(o.createdAt)}),content:Gt.createElement(Gt.Fragment,null,s.length>0?Gt.createElement(BJ,{data:s}):l),isBreakWords:!0}):a?Gt.createElement(KB,{title:(0,Qr.getParametrizedText)(P6.messageTitle,{bloggerName:i,createdAt:bo(a.createdAt)}),isBreakWords:!0}):Gt.createElement(ZY,null)),Gt.createElement("div",{className:"StepStartSinglePayment_header_CW0iz"},function(){var e=P6.choosePayment;switch(t){case Ce.MESSAGE:e=P6.messagePrice;break;case Ce.POST:e=P6.postPrice}return e}()),Gt.createElement(j4,{isFixedPrice:t!==Ce.DONATION,value:n,onChange:u,onBlur:d,testId:L6(k4.INPUT),isDisabled:_,error:h}),y?Gt.createElement(q4,{onShowQrClick:p,donationShareLink:c}):Gt.createElement(FB,{disabled:_||Boolean(null==h?void 0:h.length)||!n,className:"StepStartSinglePayment_payButton_e4swS",onClick:f},t===Ce.DONATION?P6.support:P6.pay))},k6=function(){return k6=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},k6.apply(this,arguments)},D6=oo("Payment"),U6=function(e){var t=e.className,n=e.isSinglePayment,r=e.isGift,o=e.isDonation,a=e.step,i=e.isNeedScrollTopByChangeStep,l=e.onSendGiftClick,s=e.renderStepSuccess,c=e.renderStepFailure,u=e.steps,d=u.start,f=u.startGiftSubscription,m=u.startSinglePayment,p=u.startDonationPayment,h=u.payment,v=u.success,g=u.failure,y=u.alreadySubscribed,_=e.getDonationShareLink;(0,Gt.useEffect)((function(){i&&Of()}),[a]);var E=xf().search,b=(0,Do.parse)(E),S=Gf(),T=S.blogUrl,I=S.paymentPurposeId,N=_&&_(T,I||b.forPost);return Gt.createElement("div",k6({className:t},Na(D6(w3.ROOT))),a===yw.START&&Gt.createElement(Gt.Fragment,null,o?Gt.createElement(S6,k6({},p,{donationShareLink:N})):r?Gt.createElement(C6,k6({},f)):n?Gt.createElement(R6,k6({},m)):Gt.createElement(p6,k6({},d))),a===yw.SHARE_PAYMENT&&Gt.createElement(x4,{donationShareLink:o?N:""}),a===yw.PAYMENT&&Gt.createElement(A4,k6({},h)),a===yw.SUCCESS&&s(k6(k6({},v),{onSendGiftClick:l})),a===yw.FAILURE&&c(g),a===yw.LOADING&&Gt.createElement(H3,null),a===yw.ALREADY_SUBSCRIBED&&Gt.createElement(x3,k6({},y)))};const B6={pictureBindCardError:"GiftInfo_pictureBindCardError_IpgHi",pictureBindCardSuccess:"GiftInfo_pictureBindCardSuccess_cLhzG",link:"GiftInfo_link_BlxqL",fadeIn:"GiftInfo_fadeIn_NOoDg"};var x6,M6,F6=(0,Qr.getTranslation)("@boosty/common/components.Payment.components.GiftInfo"),G6=function(e){var t=e.isError,n=void 0!==t&&t,r=e.onButtonClick,o=e.onLinkClick,a=n?"error":"success";return Gt.createElement(cK,{title:F6[a].title,classNamePicture:cG()(B6.pictureBindCard,n?B6.pictureBindCardError:B6.pictureBindCardSuccess),onButtonClick:r,buttonText:F6[a].close},n?F6.error.description:Gt.createElement(Gt.Fragment,null,F6.success.description.start,Gt.createElement(cM,{className:B6.link,to:ir.SETTINGS_SUBSCRIPTIONS,onClick:o},F6.success.description.link),F6.success.description.end))};!function(e){e.EMAIL="purchaseSuccessEmail"}(x6||(x6={})),function(e){e[e.NO_EMAIL=0]="NO_EMAIL",e[e.EMAIL_NOT_CONFIRMED=1]="EMAIL_NOT_CONFIRMED",e[e.SEND_EMAIL_LETTER=2]="SEND_EMAIL_LETTER",e[e.RESENT_EMAIL_LETTER=3]="RESENT_EMAIL_LETTER",e[e.EMAIL_CONFIRMED=4]="EMAIL_CONFIRMED"}(M6||(M6={}));const H6={emailNotification:"UpdateEmailField_emailNotification_vj2OZ",dialogFooter:"UpdateEmailField_dialogFooter_Dxly5",button:"UpdateEmailField_button_WGeL6",emailDialog:"UpdateEmailField_emailDialog_n8Z7R",emailInput:"UpdateEmailField_emailInput_vRjn5",emailSendedMessage:"UpdateEmailField_emailSendedMessage_IoqXY",link:"UpdateEmailField_link_CYDqG",emailCheck:"UpdateEmailField_emailCheck_BLLFr",changeInputButton:"UpdateEmailField_changeInputButton_PtPHm",inputField:"UpdateEmailField_inputField_k4cEM",iconPen:"UpdateEmailField_iconPen_R_YmG",fadeIn:"UpdateEmailField_fadeIn_UonS9"};var W6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),V6=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},j6=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},z6=(0,Qr.getTranslation)("@common/components.UpdateEmailField"),Y6=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentStep:M6.NO_EMAIL,email:t.props.email||null,isEmailValid:!0,isSaveButtonDisabled:!0,isInputDisable:(0,Yt.isValidEmail)(t.props.email)},t.onEmailChange=function(e){var n=e.currentTarget.value;t.setState({email:n,isEmailValid:(0,Yt.isValidEmail)(n)})},t.onSaveClick=function(){return V6(t,void 0,void 0,(function(){var e,t;return j6(this,(function(n){switch(n.label){case 0:e=this.props.updateUserData,t=this.state.email,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e({email:t})];case 2:return n.sent(),this.setState({isSaveButtonDisabled:!0,isInputDisable:!0,currentStep:M6.SEND_EMAIL_LETTER}),[3,4];case 3:return n.sent(),this.setInitialStep(),[3,4];case 4:return[2]}}))}))},t.onResendMailClick=function(e){var n=t.props.sendEmailConfirmationLetter;e.preventDefault();try{n(),t.setState({currentStep:M6.RESENT_EMAIL_LETTER})}catch(e){t.setInitialStep()}},t.onChangeInputButtonClick=function(){t.setState({isInputDisable:!t.state.isInputDisable},t.focusEmailField)},t.renderEmailMessage=function(){var e=t.props.email;switch(t.state.currentStep){case M6.EMAIL_NOT_CONFIRMED:return Gt.createElement(Gt.Fragment,null,z6.emailNotConfirmed," ",Gt.createElement("span",{onClick:t.onResendMailClick,className:H6.link},z6.emailSendedLink));case M6.SEND_EMAIL_LETTER:return Gt.createElement(Gt.Fragment,null,z6.emailSendedMessage,"  ",Gt.createElement("span",{onClick:t.onResendMailClick,className:H6.link},z6.emailSendedLink));case M6.RESENT_EMAIL_LETTER:return Gt.createElement(Gt.Fragment,null,z6.emailResent," ",Gt.createElement("span",{className:H6.emailCheck},e));default:return null}},t}return W6(t,e),t.prototype.componentDidMount=function(){this.setInitialStep()},t.prototype.componentDidUpdate=function(e,t){t.email!==this.state.email&&this.setState({isSaveButtonDisabled:!(0,Yt.isValidEmail)(this.state.email)})},t.prototype.setInitialStep=function(){var e=this.props,t=e.email,n=e.emailConfirmed.noSocial;t?t&&!n?this.setState({currentStep:M6.EMAIL_NOT_CONFIRMED}):t&&n&&this.setState({currentStep:M6.EMAIL_CONFIRMED}):this.setState({currentStep:M6.NO_EMAIL})},t.prototype.focusEmailField=function(){document.querySelector("[name=".concat(x6.EMAIL,"]")).focus()},t.prototype.render=function(){var e,t=this.props,n=t.classNameButtonsWrapper,r=t.classNameButton,o=t.onClose,a=t.closeButtonText,i=t.paymentType,l=t.className,s=t.customText,c=this.state,u=c.isSaveButtonDisabled,d=c.isEmailValid,f=c.email,m=c.isInputDisable,p=f||z6.enterEmail;return Gt.createElement("div",{className:fB()(H6.editableEmail,l)},Gt.createElement("div",{className:H6.emailDialog},Gt.createElement("div",{className:H6.emailNotification},(null==s?void 0:s.emailNotification)||z6.emailNotification),Gt.createElement("div",{className:H6.emailInput},Gt.createElement(Zx,{isValid:d,value:f||"",name:x6.EMAIL,placeholder:p,onChange:this.onEmailChange,classNameInput:H6.inputField,disabled:m}),m&&Gt.createElement("div",{className:H6.changeInputButton,onClick:this.onChangeInputButtonClick},Gt.createElement(pB,{glyph:hB.U3W,className:fB()(H6.iconPen)}))),Gt.createElement("div",{className:H6.emailSendedMessage},this.renderEmailMessage())),Gt.createElement("div",{className:fB()(H6.dialogFooter,n)},Gt.createElement(FB,{className:fB()(H6.button,r),onClick:this.onSaveClick,isDisabled:u},z6.button.save),Gt.createElement(HB,{className:r,onClick:o},a||(null===(e=z6.closeButton)||void 0===e?void 0:e[i])||z6.closeButton.default)))},t.defaultProps={paymentType:Ce.SUBSCRIPTION},t}(Gt.Component),K6=function(e){var t=e.title,n=e.url;return Gt.createElement("div",{className:"NativeAppQr_root_iKmdR"},Gt.createElement("div",{className:"NativeAppQr_qr_j2rgh"},Gt.createElement(R4,{size:70,text:n})),Gt.createElement("p",{className:"NativeAppQr_title_UCC1N"},t))};const q6="DownloadAppBlock_badge_i6ngJ";var X6,Q6=(0,Qr.getTranslation)("@boosty/common/components.DownloadAppBlock"),J6=function(e){var t=e.classNames,n=void 0===t?{}:t,o=nr(),a=o.isMobile,i=o.isWebView,l=o.locale,s=o.downloadApp,c=s.androidLink,u=s.iosLink,d=function(){var e=nr(),t=e.isAndroid,n=e.isIOs,r=e.isMobile;return t?"android":n?"ios":r?"unknown":"desktop"}(),f=Qo(r.SHOW_NATIVE_APP_ADS_IN_SUCCESS_PAYMENT_ANDROID)&&c&&("android"===d||"desktop"===d),m=Qo(r.SHOW_NATIVE_APP_ADS_IN_SUCCESS_PAYMENT_IOS)&&u&&("ios"===d||"desktop"===d);return i||!f&&!m?null:Gt.createElement("div",{className:cG()("DownloadAppBlock_root_A9gIj",n.root)},Gt.createElement("div",{className:"DownloadAppBlock_main_iuiuG"},Gt.createElement("p",{className:"DownloadAppBlock_text_bQqdV"},Q6.description),Gt.createElement("div",{className:"DownloadAppBlock_badges_SeOk3"},f&&Gt.createElement(cM,{to:c,className:cG()(q6,"DownloadAppBlock_android_TomJR",l)}),m&&Gt.createElement(cM,{to:u,className:cG()(q6,"DownloadAppBlock_ios_OZRyu",l)}))),!a&&Gt.createElement("div",{className:"DownloadAppBlock_qr_zCBXR"},f&&Gt.createElement(K6,{url:c,title:"Android"}),m&&Gt.createElement(K6,{url:u,title:"iOS"})))};!function(e){e.ROOT="ROOT"}(X6||(X6={}));const Z6={motivationalText:"SuccessDonationDescription_motivationalText_JrFvy",fadeIn:"SuccessDonationDescription_fadeIn_eblt5"};var $6=(0,Qr.getTranslation)("@boosty/common/components.Payment.components.StepSuccess.components.SuccessDonationDescription"),e5=function(e){var t=e.ownerName;return Gt.createElement(Gt.Fragment,null,Gt.createElement("b",{className:Z6.ownerName},t)," ",$6.description,Gt.createElement("div",{className:Z6.motivationalText},(0,Qr.getParametrizedText)($6.supportHelps,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})))},t5=(0,Qr.getTranslation)("@boosty/common/components.Payment.components.StepSuccess.components.SuccessMessageDescription"),n5=function(e){var t=e.ownerName,n=e.message;return Gt.createElement(Gt.Fragment,null,(0,Qr.getReactText)(t5.description,{AuthorName:function(){return Gt.createElement("b",{className:"SuccessMessageDescription_ownerName_mfxe6"},t)},CreatedAt:function(){return Gt.createElement(Gt.Fragment,null,bo(n.createdAt))}}),Gt.createElement("div",{className:"SuccessMessageDescription_motivationalText_lqo1U"},(0,Qr.getParametrizedText)(t5.supportHelps,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})))},r5=(0,Qr.getTranslation)("@boosty/common/components.Payment.components.StepSuccess.components.SuccessPostDescription"),o5=function(e){var t=e.ownerName,n=e.post;return Gt.createElement(Gt.Fragment,null,r5.description,(null==n?void 0:n.title)?Gt.createElement(Gt.Fragment,null,":",Gt.createElement("br",null),Gt.createElement("b",{className:"SuccessPostDescription_title_Mh90o"},n.title)):Gt.createElement(Gt.Fragment,null," ",(0,Qr.getReactText)(r5.authoredBy,{AuthorName:function(){return Gt.createElement("b",{className:"SuccessPostDescription_ownerName_y78Zx"},t)},CreatedAt:function(){return Gt.createElement(Gt.Fragment,null,bo(n.createdAt))}})),Gt.createElement("div",{className:"SuccessPostDescription_motivationalText_QWbWb"},(0,Qr.getParametrizedText)(r5.supportHelps,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})))},a5=(0,Qr.getTranslation)("@boosty/common/components.Payment.components.StepSuccess.components.SuccessSubscriptionDescription"),i5=function(e){var t=e.ownerName;return Gt.createElement(Gt.Fragment,null,Gt.createElement("span",{className:"SuccessSubscriptionDescription_ownerName_pfo5w"},(0,Qr.getParametrizedText)(a5.description,{name:t})),Gt.createElement("div",{className:"SuccessSubscriptionDescription_motivationalText_OA04Z"},(0,Qr.getParametrizedText)(a5.supportHelps,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})))};const l5={description:"StepSuccess_description_onh7j",post:"StepSuccess_post_drJeC",message:"StepSuccess_message_Ue2oL",donation:"StepSuccess_donation_M7_Lt",subscription:"StepSuccess_subscription_GOnlV",imageSide:"StepSuccess_imageSide_DHyuj",block:"StepSuccess_block_OwaSz",dialogContent:"StepSuccess_dialogContent_T_AZV",dialogSide:"StepSuccess_dialogSide_DL8vY",dialogTitle:"StepSuccess_dialogTitle_DSaT_",dialogFooter:"StepSuccess_dialogFooter_Jlayo",button:"StepSuccess_button_VAMmz",motivationalText:"StepSuccess_motivationalText_CnOqm",fadeIn:"StepSuccess_fadeIn_xJqAa"};var s5,c5=function(){return c5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c5.apply(this,arguments)},u5=(0,Qr.getTranslation)("@boosty/common/components.Payment.components.StepSuccess"),d5=oo("Payment.StepSuccess"),f5=function(e){var t,n,r=e.blogPost,o=e.message,a=e.gift,i=e.type,l=e.currentUser,s=e.blogOwnerName,c=e.chatMateName,u=e.blogThanksMsg,d=e.isEmailConfirmed,f=e.onClose,m=e.onUpdateUserData,p=e.onSendEmailConfirmationLetter,h=e.onSendGiftClick,v=i===Ce.POST?u5.title.post:u5.title.default,g=PD({userId:null===(n=null===(t=null==a?void 0:a.blog)||void 0===t?void 0:t.owner)||void 0===n?void 0:n.id,type:i}).sendPaymentStat;if(i===Ce.GIFT){var y=null==a?void 0:a.key;return Gt.createElement(G6,{onButtonClick:function(){h(y),g(We.GIFT_PURCHASE_RESULT_GIFT_CLICK)},onLinkClick:function(){f(),g(We.GIFT_PURCHASE_RESULT_MY_SUBSCRIPTIONS_CLICK)}})}return Gt.createElement("div",c5({className:l5.block},Na(d5(X6.ROOT))),Gt.createElement("div",{className:cG()(l5.imageSide,l5[i])}),Gt.createElement("div",{className:l5.dialogSide},Gt.createElement("div",{className:l5.dialogTitle},v),Gt.createElement("div",{className:l5.dialogContent},u||Gt.createElement("div",{className:l5.description},i===Ce.POST&&Gt.createElement(o5,{ownerName:s,post:r}),i===Ce.MESSAGE&&Gt.createElement(n5,{ownerName:c,message:o}),i===Ce.DONATION&&Gt.createElement(e5,{ownerName:s}),i===Ce.SUBSCRIPTION&&Gt.createElement(i5,{ownerName:s})),Gt.createElement(J6,null)),d?Gt.createElement("div",{className:l5.dialogFooter},Gt.createElement(FB,{className:l5.button,onClick:f},u5.button.close)):Gt.createElement(Y6,{paymentType:i,email:l.email,emailConfirmed:l.emailConfirmed,onClose:f,classNameButton:l5.button,classNameButtonsWrapper:l5.dialogFooter,updateUserData:m,sendEmailConfirmationLetter:p})))};!function(e){e.ROOT="ROOT",e.BUTTON_SUPPORT="BUTTON_SUPPORT",e.BUTTON_CLOSE="BUTTON_CLOSE",e.BUTTON_RETRY="BUTTON_RETRY"}(s5||(s5={}));var m5,p5=function(){return p5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p5.apply(this,arguments)},h5=(0,Qr.getTranslation)("@boosty/common/components.Payment.components.StepFailure"),v5=oo("Payment.StepFailure"),g5=function(e){var t,n,o,i,l=e.type,s=e.headerText,c=e.text,u=e.onRetry,d=e.onContactSupport,f=(t=nr().isMobile,n=Mf(),o=(0,dH.useOverlayPopups)().showPopup,i=Qo(r.MY_GAMES_SUPPORT),{goToSupport:function(){i?window.open(ir.SUPPORT_HELP,"_blank"):t?n(ir.SUPPORT_CONTACT):o({type:a.CONTACT_SUPPORT})}}).goToSupport,m=function(e){e.preventDefault(),d?d():f()};return l===Ce.GIFT?Gt.createElement(G6,{onButtonClick:u,isError:!0}):Gt.createElement("div",p5({className:cG()("StepFailure_dialogWrap_EoprC","StepFailure_failWrap_t_0pS")},Na(v5(s5.ROOT))),Gt.createElement("div",{className:"StepFailure_dialogContent_RIWcl"},Gt.createElement("div",{className:"StepFailure_failImage_oZKfh"}),Gt.createElement("h4",{className:"StepFailure_header_Pw7HW"},s),Gt.createElement("p",{className:"StepFailure_dim_tVYiE"},(0,Qr.getReactText)(c,{Support:function(){return Gt.createElement("span",{className:"StepFailure_link_gvEi_",onClick:m},h5.support)}}))),Gt.createElement("div",{className:"StepFailure_dialogFooter_SmrGU"},Gt.createElement(FB,p5({className:"StepFailure_retryButton_gNPka"},Na(v5(s5.BUTTON_RETRY)),{onClick:u}),h5.retry)))};!function(e){e.ROOT="ROOT"}(m5||(m5={}));const y5={root:"StepDonationSuccess_root_Skeek",content:"StepDonationSuccess_content_iTIdv",iconWrapper:"StepDonationSuccess_iconWrapper_LfiBy",icon:"StepDonationSuccess_icon_dqGFD",text:"StepDonationSuccess_text_TCpkn",buttons:"StepDonationSuccess_buttons_wKaAN",sendMore:"StepDonationSuccess_sendMore_Xh6CG",fadeIn:"StepDonationSuccess_fadeIn_U2Omg"};var _5,E5,b5,S5,T5=function(){return T5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},T5.apply(this,arguments)},I5=(0,Qr.getTranslation)("@boosty/common/components.Payment.components.StepDonationSuccess"),N5=oo("Payment.StepSuccess"),C5=function(e){var t=e.sum,n=e.onClose,r=e.onSendMoreClick;return Gt.createElement("div",T5({className:y5.root},Na(N5(m5.ROOT))),Gt.createElement("div",{className:y5.content},Gt.createElement("div",{className:y5.iconWrapper},Gt.createElement(pB,{glyph:hB.kPM,className:y5.icon})),Gt.createElement("div",{className:y5.text},(0,Qr.getReactText)((0,Qr.getParametrizedText)(I5.title,{sum:t}),{Space:function(){return Gt.createElement(Gt.Fragment,null," ")}}))),Gt.createElement("div",{className:y5.buttons},Gt.createElement(HB,{className:y5.sendMore,onClick:r},I5.button.sendMore),Gt.createElement(FB,{className:y5.cancelButton,onClick:n},I5.button.close)))},w5=function(){return w5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w5.apply(this,arguments)},O5=function(e){return Gt.createElement(U6,w5({renderStepSuccess:function(e){return function(e){var t=e.typeDonation;return t===V.AUTHOR||t===V.POST}(e)?Gt.createElement(C5,w5({},e)):Gt.createElement(f5,w5({},e))},renderStepFailure:function(e){return Gt.createElement(g5,w5({},e))},getDonationShareLink:HV},e))},A5=function(e){var t=e.onClose,n=Gf().blogUrl,r=L3().showPopup,o=TU({type:Ce.GIFT,blogUrl:n,onClose:t}),i=o.currentUser,l=o.currentUserNetworkStatus,s=o.title,c=o.isSinglePayment,u=o.isGift,d=o.step,f=o.steps,m=o.onGoToStep;return Gt.createElement(R3,{currentUser:i,currentUserNetworkStatus:l,onCloseLogin:t},Gt.createElement(PM,{title:s.isBackEnable?Gt.createElement("div",{className:"BuyGiftSubscriptionPopup_title_Po7lK"},Gt.createElement(pB,{glyph:hB.WTy,className:"BuyGiftSubscriptionPopup_icon_oJtZf",onClick:function(){return m(yw.START)}}),s.text):s.text,classNames:{block:"BuyGiftSubscriptionPopup_popup_NQn4u"},onClose:t},Gt.createElement(O5,{onSendGiftClick:function(e){r({type:a.SEND_GIFT_SUBSCRIPTION,data:{giftKey:e,from:dn.PURCHASE}})},isSinglePayment:c,isGift:u,step:d,steps:f,type:Ce.GIFT})))};!function(e){e[e.INACTIVE=0]="INACTIVE",e[e.ACTIVE=1]="ACTIVE",e[e.RETRY=2]="RETRY",e[e.LOCKED=3]="LOCKED"}(_5||(_5={})),function(e){e[e.OLD_PHONE_NO_VERIFY=0]="OLD_PHONE_NO_VERIFY",e[e.OLD_PHONE_VERIFY=1]="OLD_PHONE_VERIFY",e[e.OLD_PHONE_LOCKED=2]="OLD_PHONE_LOCKED",e[e.NEW_PHONE=3]="NEW_PHONE",e[e.NEW_PHONE_WAITING=4]="NEW_PHONE_WAITING",e[e.NEW_PHONE_LOCKED=5]="NEW_PHONE_LOCKED",e[e.COMPLETE=6]="COMPLETE",e[e.CANCEL=7]="CANCEL",e[e.RECAPTCHA=8]="RECAPTCHA"}(E5||(E5={})),function(e){e.OLD_PHONE="oldPhone",e.PHONE="phone",e.SMS_CODE="smsCode"}(b5||(b5={})),function(e){e.FORBIDDEN="forbidden",e.ENTER_VALID_PHONE="enter_valid_phone",e.ALREADY_EXISTED_PHONE="already_existed_phone",e.INVALID_PARAM="invalid_param",e.INVALID_OLD_PHONE="invalid_old_phone",e.INVALID_PHONE="invalid_phone",e.VERIFY_GATE_ERROR="verify_gate_error",e.INVALID_CODE="invalid_code",e.INVALID_SMS_CODE="invalid_sms_code",e.TRY_CODE_REACHED="try_code_reached",e.TRY_CODE_LIMIT="try_code_limit",e.SMS_GATE_RATELIMIT="sms_gate_ratelimit",e.RECAPTCHA_INVALID="recaptcha_invalid"}(S5||(S5={}));var P5,L5=function(e){var t=e.className,n=e.isPrimaryHidden,r=e.isPrimaryDisabled,o=e.primaryTitle,a=e.secondaryTitle,i=e.onPrimaryClick,l=e.onSecondaryClick;return Gt.createElement("div",{className:cG()(t,"Buttons_root_X0BDd")},!n&&Gt.createElement(FB,{type:"button",onClick:function(){i()},isDisabled:r},o),Gt.createElement(HB,{type:"button",onClick:function(){l()}},a))},R5=(0,Qr.getTranslation)("@boosty/common/containers.ChangePhone.components.Cancel"),k5=function(e){var t=e.onCancel,n=e.onConfirm;return Gt.createElement("div",{className:"Cancel_container_sAasC"},Gt.createElement("span",{className:"Cancel_text_wcMuP"},R5.cancelText),Gt.createElement(L5,{className:"Cancel_buttons_hL41V",primaryTitle:R5.confirm,secondaryTitle:R5.cancel,onSecondaryClick:t,onPrimaryClick:n}))},D5=function(e){var t=e.refValue,n=e.value,r=e.description,o=e.placeholder,a=e.isDisabled,i=e.label,l=e.isLoading,s=e.smsCodeFieldState,c=e.smsCodeFieldProps,u=e.cancelBtnProps,d=e.errors,f=d.phone,m=d.smsCode,p=e.primaryBtnProps,h=e.inlineBtnProps,v=e.onChange,g=l?Gt.createElement(uM,{className:"ChangePhone_fieldLoader_XZDrs",size:24,solid:!0}):h?Gt.createElement(zB,{onClick:h.onClick},h.title):null,y=!l&&!f&&s!==_5.ACTIVE&&s!==_5.LOCKED;return Gt.createElement("div",{className:"ChangePhone_content_Bc0yC"},Gt.createElement(Zx,{value:n,description:!f&&r,label:t?Gt.createElement(Gt.Fragment,null,i," - ",Gt.createElement("b",null,t)):i,placeholder:o,error:f,rightElement:g,disabled:a,isValid:!f,onChange:function(e){v(e.currentTarget.value)},onKeyDown:function(e){e.key===ae.ENTER&&y&&(null==p||p.onClick())},autoFocus:!0}),s!==_5.INACTIVE&&Gt.createElement(WK,{key:c.code,classNames:{main:"ChangePhone_secretCodeInput_ZFj_5"},title:c.title,error:m,expiresIn:c.expiresIn,resend:c.onClick,onFill:c.onFill,isRetry:s===_5.RETRY,isLocked:s===_5.LOCKED,isLoading:l}),Gt.createElement(L5,{className:"ChangePhone_buttons_vP_uE",isPrimaryHidden:s!==_5.INACTIVE,isPrimaryDisabled:!y,secondaryTitle:u.title,primaryTitle:p.title,onPrimaryClick:p.onClick,onSecondaryClick:u.onClick}))};!function(e){e[e.CHANGE=0]="CHANGE",e[e.GET_CODE=1]="GET_CODE",e[e.DISABLED=2]="DISABLED"}(P5||(P5={}));const U5={container:"Recaptcha_container_DkSaU",buttons:"Recaptcha_buttons_QribV"};var B5=function(){return B5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},B5.apply(this,arguments)},x5=(0,Qr.getTranslation)("@boosty/common/containers.ChangePhone.components.Recaptcha"),M5=function(e){var t=e.innerRef,n=e.onCancel;return Gt.createElement("div",{className:U5.container},Gt.createElement("div",{ref:t,className:U5.recaptchaContainer}),Gt.createElement(L5,{className:U5.buttons,secondaryTitle:x5.cancel,onSecondaryClick:n,isPrimaryHidden:!0}))},F5=Gt.forwardRef((function(e,t){return Gt.createElement(M5,B5({innerRef:t},e))})),G5=(0,Qr.getTranslation)("@boosty/common/containers.ChangePhone.components.Success"),H5=function(){return Gt.createElement("div",{className:"Success_root_snRjP"},Gt.createElement(pB,{glyph:hB.R$2,className:"Success_icon_sEfh1"}),Gt.createElement("span",{className:"Success_text_TuXdr"},G5.successText))},W5=function(){return W5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},W5.apply(this,arguments)},V5=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},j5=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},z5=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Y5=(0,Qr.getTranslation)("@boosty/common/containers.ChangePhone"),K5=function(e){var t=e.onClose,n=(0,Gt.useRef)(null),r=z5((0,Gt.useState)(null),2),o=r[0],a=r[1],i=z5((0,Gt.useState)(null),2),l=i[0],s=i[1],c=z5((0,Gt.useState)(null),2),u=c[0],d=c[1],f=z5((0,Gt.useState)(null),2),m=f[0],p=f[1],h=z5((0,Gt.useState)({oldPhone:null,phone:null,smsCode:null}),2),v=h[0],g=h[1],y=z5((0,Gt.useState)(_5.INACTIVE),2),_=y[0],E=y[1],b=z5((0,Gt.useState)(null),2),S=b[0],T=b[1],I=ED(),N=I.isRecaptchaEnabled,C=I.generateRecaptchaV3Token,w=I.renderRecaptchaV2,O=(0,Vt.I0)(),A=(0,Vt.v9)(pA),P=(0,Vt.v9)(hA);(0,Gt.useEffect)((function(){V5(void 0,void 0,void 0,(function(){var e;return j5(this,(function(t){switch(t.label){case 0:return[4,L()];case 1:return e=t.sent().canAdd,A.refPhone&&e?(p(""),s(E5.OLD_PHONE_NO_VERIFY)):A.refPhone&&!e?(p(A.refPhone),s(E5.OLD_PHONE_VERIFY)):s(E5.NEW_PHONE),[2]}}))}))}),[]),(0,Gt.useEffect)((function(){l===E5.RECAPTCHA&&w(n.current,M)}),[l]);var L=function(){return O((0,dm.Ax)(vg.action)())},R=function(e){return Y5.errors[e]},k=function(){return V5(void 0,void 0,void 0,(function(){var e,t,n,r,o,i,c;return j5(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),N?(c={},(t=S)?[3,2]:[4,C(rt.CHANGE_PHONE_VERIFY_OLD)]):[3,3];case 1:t=u.sent(),u.label=2;case 2:return c.token=t,c.captchaVersion=S?ee.V2:ee.V3,e=c,[3,4];case 3:e=null,u.label=4;case 4:return[4,(d=e,O((0,dm.Ax)(ag.action)(d)))];case 5:return n=u.sent().phone,p(n),E(_5.ACTIVE),T(null),[3,7];case 6:return r=u.sent(),o=r.serverError.error,i=R(o),o===S5.RECAPTCHA_INVALID&&(a(l),s(E5.RECAPTCHA)),o===S5.SMS_GATE_RATELIMIT&&(s(E5.OLD_PHONE_LOCKED),E(_5.INACTIVE)),U(b5.OLD_PHONE,i),[3,7];case 7:return[2]}var d}))}))},D=function(){return V5(void 0,void 0,void 0,(function(){var e,t,n,r,o,i,c,d;return j5(this,(function(f){switch(f.label){case 0:return t=[{phone:eo(u),oldPhone:m?eo(m):null}],(n=N)?(d={},(r=S)?[3,2]:[4,C(rt.CHANGE_PHONE_UPDATE_PHONE)]):[3,3];case 1:r=f.sent(),f.label=2;case 2:d.token=r,d.captchaVersion=S?ee.V2:ee.V3,n=d,f.label=3;case 3:e=W5.apply(void 0,t.concat([n])),f.label=4;case 4:return f.trys.push([4,6,,7]),[4,(p=e,O((0,dm.Ax)(rg.action)(p)))];case 5:return f.sent(),U(b5.SMS_CODE,null),s(E5.NEW_PHONE_WAITING),E(_5.ACTIVE),[3,7];case 6:return o=f.sent(),i=o.serverError.error,c="",i===S5.RECAPTCHA_INVALID&&(a(l),s(E5.RECAPTCHA)),i===S5.FORBIDDEN?(c=R(S5.FORBIDDEN),s(E5.NEW_PHONE_LOCKED),E(_5.INACTIVE),U(b5.PHONE,c)):(c=i===S5.INVALID_PARAM?R(S5.INVALID_PHONE):R(i),i===S5.SMS_GATE_RATELIMIT&&(s(E5.NEW_PHONE_LOCKED),E(_5.INACTIVE)),U(b5.PHONE,c)),[3,7];case 7:return[2]}var p}))}))},U=function(e,t){var n;g(W5(W5({},v),((n={})[e]=t,n)))},B=function(e){var t;g(W5(W5({},v),((t={})[e]=null,t)))},x=function(){s(o),a(null)},M=function(e){T(e),x()},F=function(e){return function(t){return V5(void 0,void 0,void 0,(function(){var n,r,o,a,i,l;return j5(this,(function(c){switch(c.label){case 0:n=e===b5.OLD_PHONE,r=n?m:u,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,(d={isOld:n,smsCode:t,phone:n?r:eo(r),code:A.code},O((0,dm.Ax)(og.action)(d)))];case 2:return o=c.sent(),n?(s(E5.NEW_PHONE),E(_5.INACTIVE),p(o.phoneOpen)):(s(E5.COMPLETE),O((0,dm.Ax)(Jv.action)())),[3,4];case 3:return a=c.sent(),i=a.serverError.error,l=R(i),U(b5.SMS_CODE,l),i===S5.TRY_CODE_LIMIT||i===S5.INVALID_CODE?E(_5.RETRY):i!==S5.TRY_CODE_REACHED&&i!==S5.SMS_GATE_RATELIMIT&&i!==S5.VERIFY_GATE_ERROR||E(_5.LOCKED),[3,4];case 4:return[2]}var d}))}))}},G=function(e,t){_!==_5.INACTIVE&&E(_5.INACTIVE),La(e)?B(t):U(t,R(S5.ENTER_VALID_PHONE))},H={smsCodeFieldState:_,isLoading:P.isFetching,value:null,label:null,placeholder:null,description:null,errors:{phone:null,smsCode:null},primaryBtnProps:{title:"",onClick:Yt.noop},cancelBtnProps:{title:Y5.btnTitles.cancel,onClick:function(){l!==E5.NEW_PHONE_LOCKED&&l!==E5.OLD_PHONE_LOCKED?(a(l),s(E5.CANCEL)):t()}},onChange:Yt.noop},W={title:Y5.smsCodeTitle,expiresIn:A.expiresIn,code:A.code,onChange:function(e){v.smsCode&&B(b5.SMS_CODE)},onFill:Yt.noop,onClick:Yt.noop};return H=l===E5.NEW_PHONE_LOCKED||l===E5.NEW_PHONE_WAITING||l===E5.NEW_PHONE?W5(W5({},H),{value:u,label:Y5.new.label,placeholder:Y5.new.placeholder,errors:{phone:v.phone,smsCode:v.smsCode},primaryBtnProps:{title:Y5.btnTitles.getCode,onClick:D},smsCodeFieldProps:W5(W5({},W),{onFill:F(b5.PHONE),onClick:D}),onChange:function(e){G(e,b5.PHONE),d(e)}}):W5(W5({},H),{value:m,label:Y5.old.label,placeholder:Y5.old.placeholder,errors:{phone:v.oldPhone,smsCode:v.smsCode},primaryBtnProps:{title:Y5.btnTitles.getCode,onClick:k},smsCodeFieldProps:W5(W5({},W),{onFill:F(b5.OLD_PHONE),onClick:k}),onChange:function(e){G(e,b5.OLD_PHONE),p(e)}}),Gt.createElement(Gt.Fragment,null,l===E5.NEW_PHONE&&Gt.createElement(D5,W5({},H)),l===E5.NEW_PHONE_WAITING&&Gt.createElement(D5,W5({},H,{inlineBtnProps:{title:Y5.btnTitles.change,onClick:function(){s(E5.NEW_PHONE),E(_5.INACTIVE)}},isDisabled:!0})),(l===E5.NEW_PHONE_LOCKED||l===E5.OLD_PHONE_VERIFY||l===E5.OLD_PHONE_LOCKED)&&Gt.createElement(D5,W5({},H,{isDisabled:!0})),l===E5.OLD_PHONE_NO_VERIFY&&Gt.createElement(D5,W5({},H,{refValue:A.refPhone,primaryBtnProps:{title:Y5.btnTitles.next,onClick:function(){return V5(void 0,void 0,void 0,(function(){var e,t,n,r;return j5(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a={phone:eo(m)},O((0,dm.Ax)(gg.action)(a)))];case 1:if(!o.sent().ok)throw new Error(R(S5.INVALID_OLD_PHONE));return O(Kv(m)),s(E5.NEW_PHONE),[3,3];case 2:return e=o.sent(),n=(t=e).serverError,r=t.message,n||U(b5.OLD_PHONE,r),U(b5.OLD_PHONE,R(n.error)),[3,3];case 3:return[2]}var a}))}))}}})),l===E5.COMPLETE&&Gt.createElement(H5,null),l===E5.CANCEL&&Gt.createElement(k5,{onCancel:x,onConfirm:t}),l===E5.RECAPTCHA&&Gt.createElement(F5,{innerRef:n,onCancel:x}))};K5.getFetchActions=function(){return[function(){return vg.action()}]};var q5=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.desktop.components.ChangePhonePopup"),X5=function(e){var t=e.onClose,n=void 0===t?Yt.noop:t,r=(0,Vt.v9)(pA).refPhone?q5.popupTitle.changePhone:q5.popupTitle.addNewPhone;return Gt.createElement(PM,{classNames:{block:"ChangePhonePopup_popup_lue_7",close:"ChangePhonePopup_close_Kkrzs"},title:r,onClose:n},Gt.createElement("div",{className:"ChangePhonePopup_block_xMDPR"},Gt.createElement(K5,{onClose:n})))};X5.getFetchActions=K5.getFetchActions;const Q5={buttons:"ConfirmPopup_buttons_GTAQw",confirmButton:"ConfirmPopup_confirmButton_WRahR"};var J5=function(){return J5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},J5.apply(this,arguments)},Z5=function(e){var t=e.classNames,n=void 0===t?{}:t;return Gt.createElement(TK,J5({},e,{classNames:{buttons:cG()(Q5.buttons,null==n?void 0:n.buttons),confirmButton:cG()(Q5.confirmButton,null==n?void 0:n.confirmButton),cancelButton:cG()(Q5.cancelButton,null==n?void 0:n.cancelButton),root:null==n?void 0:n.root,block:null==n?void 0:n.block,close:null==n?void 0:n.close,title:null==n?void 0:n.title,content:null==n?void 0:n.content,footer:null==n?void 0:n.footer,description:null==n?void 0:n.description}}))},$5=function(){return $5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$5.apply(this,arguments)},e9=function(e){return Gt.createElement(rQ,$5({},e))};const t9={title:"SendMessageConfirmPopup_title_xmR5w",confirmContent:"SendMessageConfirmPopup_confirmContent_ERtzC",tabs:"SendMessageConfirmPopup_tabs_NfRtj",paidContentTitle:"SendMessageConfirmPopup_paidContentTitle_RjNOM"};var n9=function(){return n9=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n9.apply(this,arguments)},r9=function(e){return Gt.createElement(N2,n9({},e,{classNames:{title:t9.title,content:t9.popupContent,confirmContent:t9.confirmContent,tabs:t9.tabs,paidContentTitle:t9.paidContentTitle}}))};const o9="MailingListFilterPopup_icon_zYF6b";var a9=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.desktop.components.MailingListFilterPopup"),i9=function(e){var t=e.filter,n=e.onApply,r=e.onClose,o=jG().showAlert,a=function(e){var t=e.filter,n=xW((0,Gt.useState)(qa(t)),2),r=n[0],o=n[1],a=xW((0,Gt.useState)(!1),2),i=a[0],l=a[1],s=xW((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=r.moneySpentFrom,f=r.moneySpentTo,m=r.subscriptionMonthsDurationFrom,p=r.subscriptionMonthsDurationTo,h=r.subscriptionLevelIds,v=Boolean(null!==d||null!==f),g=Boolean(null!==m||null!==p),y=Boolean(h.length),_=v&&d>f&&null!==f,E=g&&m>p&&null!==p,b=xW((0,Gt.useState)(v),2),S=b[0],T=b[1],I=xW((0,Gt.useState)(g),2),N=I[0],C=I[1],w=xW((0,Gt.useState)(y),2),O=w[0],A=w[1];return{filterPopup:r,isErrorMoneySpent:_,isErrorSubscriptionTime:E,isMoneySpentErrorState:i,isSubscriptionTimeErrorState:c,isActiveMoneySpent:S,isActiveSubscriptionTime:N,isActiveSubscriptionLevels:O,onMoneySpentErrorStateChange:function(e){return l(e)},onSubscriptionTimeErrorStateChange:function(e){return u(e)},onToggleActiveMoneySpent:function(){return T(!S)},onToggleActiveSubscriptionTime:function(){return C(!N)},onToggleActiveSubscriptionLevels:function(){return A(!O)},onFilterReset:function(){o(BW),l(!1),u(!1),T(!1),C(!1),A(!1)},onFilterChange:function(e){return o(e)}}}({filter:t}),i=a.filterPopup,l=a.isErrorMoneySpent,s=a.isErrorSubscriptionTime,c=a.isMoneySpentErrorState,u=a.isSubscriptionTimeErrorState,d=a.isActiveMoneySpent,f=a.isActiveSubscriptionTime,m=a.isActiveSubscriptionLevels,h=a.onMoneySpentErrorStateChange,v=a.onSubscriptionTimeErrorStateChange,g=a.onToggleActiveMoneySpent,y=a.onToggleActiveSubscriptionTime,_=a.onToggleActiveSubscriptionLevels,E=a.onFilterReset,b=a.onFilterChange;return Gt.createElement(PM,{title:Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{glyph:hB.azK,className:o9}),Gt.createElement("span",null,a9.title)),classNames:{block:"MailingListFilterPopup_popup_MGgwM",close:"MailingListFilterPopup_close_qwVZt",title:"MailingListFilterPopup_popupTitle_FYtau"},onClose:r,footer:Gt.createElement("div",{className:"MailingListFilterPopup_footer_V66pv"},Gt.createElement(FB,{className:"MailingListFilterPopup_applyButton_rJPng",onClick:function(){l&&o({type:p.ERROR,text:a9.moneySpentError}),s&&o({type:p.ERROR,text:a9.subscriptionTimeError}),h(l),v(s),l||s||(n(i),r())}},a9.apply),Gt.createElement(HB,{className:"MailingListFilterPopup_cancelButton_LroCA",onClick:r},a9.cancel),Gt.createElement(HB,{className:"MailingListFilterPopup_resetButton_Z4Knj",onClick:E},Gt.createElement(pB,{className:o9,glyph:hB.uNf}),a9.reset))},Gt.createElement(b2,{isActiveMoneySpent:d,isActiveSubscriptionTime:f,isActiveSubscriptionLevels:m,isMoneySpentError:c,isSubscriptionTimeError:u,onToggleActiveMoneySpent:g,onToggleActiveSubscriptionTime:y,onToggleActiveSubscriptionLevels:_,onFilterChange:b,filter:i,showAlert:o}))};const l9={qrCodeContainer:"TelegramConnectionContent_qrCodeContainer_m8yI0",desktopIcon:"TelegramConnectionContent_desktopIcon_X_lQZ",mobileIcon:"TelegramConnectionContent_mobileIcon_pWbT_",copyIcon:"TelegramConnectionContent_copyIcon_wGBIJ",sectionTitle:"TelegramConnectionContent_sectionTitle_Vnvtr",sectionTitleText:"TelegramConnectionContent_sectionTitleText_bvw0B",button:"TelegramConnectionContent_button_NFWpj",sectionCopyLink:"TelegramConnectionContent_sectionCopyLink_bNQ_U",copyLinkText:"TelegramConnectionContent_copyLinkText_iCrvc",copyLinkDescription:"TelegramConnectionContent_copyLinkDescription_nqVZn",qrCodeDescription:"TelegramConnectionContent_qrCodeDescription_NofSU",openInMobile:"TelegramConnectionContent_openInMobile_rW_lT",fadeIn:"TelegramConnectionContent_fadeIn_oijUu"};var s9=(0,Qr.getTranslation)("@common/components.TelegramConnectionContent"),c9=function(e){var t=e.onClose,n=function(){var e=WU(tA),t=WU(mA).isFetching;return{telegramUrl:e,isFetching:t,isUnavailable:!t&&!e}}(),r=n.telegramUrl,o=n.isFetching,a=n.isUnavailable,i=jG().showAlert;return o?Gt.createElement(ZY,null):a?Gt.createElement("span",null,s9.linkUnavailable):Gt.createElement("div",{className:l9.telegramPopupContainer},Gt.createElement("div",{className:l9.sectionTitle},Gt.createElement(pB,{glyph:hB.$AC,className:l9.desktopIcon}),Gt.createElement("div",{className:l9.sectionTitleText},s9.telegramDesktopTitle)),Gt.createElement(FB,{onClick:function(e){e.preventDefault(),r&&r.length>0&&(window.location.href=r,t())},className:l9.button},s9.button),Gt.createElement("div",{className:l9.sectionTitle},Gt.createElement(pB,{glyph:hB.yCG,className:l9.mobileIcon}),Gt.createElement("div",{className:l9.sectionTitleText},s9.telegramMobileTitle)),Gt.createElement("div",{className:l9.copyLinkDescription},s9.copyLinkDescription),Gt.createElement(c$,{text:r,onCopy:function(){i({type:p.SUCCESS,text:s9.linkCopied})}},Gt.createElement("div",{className:l9.sectionCopyLink},Gt.createElement(pB,{glyph:hB.vUr,className:l9.copyIcon}),Gt.createElement("div",{className:l9.copyLinkText},s9.copyLink))),Gt.createElement("div",{className:l9.qrCodeDescription},s9.qrCode),Gt.createElement("div",{className:l9.qrCodeContainer},Gt.createElement(R4,{text:r,size:100})),Gt.createElement("div",{className:l9.openInMobile},s9.redirectionToMobile))},u9=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.desktop.components.TelegramConnectionPopup"),d9=function(e){var t=e.onClose;return Gt.createElement(PM,{title:u9.title,classNames:{title:"TelegramConnectionPopup_title_wGBEo",content:"TelegramConnectionPopup_content_Kau3n"},onClose:t},Gt.createElement(c9,{onClose:t}))},f9=function(e){var t=e.text,n=e.classNames,r=e.isBackEnable,o=e.isResultPage,a=e.onGoToStep;return o?null:r?Gt.createElement("div",{className:n.root},Gt.createElement(pB,{glyph:hB.WTy,className:n.icon,onClick:function(){return a(yw.START)}}),t):Gt.createElement(Gt.Fragment,null,t)};const m9={root:"PaymentViewWrapper_root_zYbWv",backButton:"PaymentViewWrapper_backButton_WxFLM",icon:"PaymentViewWrapper_icon_MN6mN",header:"PaymentViewWrapper_header_EjlX7",avatar:"PaymentViewWrapper_avatar_qNqow",description:"PaymentViewWrapper_description_ZgOSd",username:"PaymentViewWrapper_username_BC9iP",fadeIn:"PaymentViewWrapper_fadeIn_Hir_9"};var p9=(0,Qr.getTranslation)("@boosty/common/components.PaymentView.desktop.components.PaymentViewWrapper"),h9=function(e){var t,n=e.typeDonation,r=e.step,o=e.userName,a=e.avatarUrl,i=e.amount,l=e.children,s=e.showWrapper,c=e.showBackButton,u=e.onBackClick,d=e.currency,f=void 0===d?null===(t=nr().currencies)||void 0===t?void 0:t.default:d;return s?Gt.createElement("div",{className:m9.root},c&&Gt.createElement("div",{className:m9.backButton},Gt.createElement(pB,{glyph:hB.WTy,className:m9.icon,onClick:u})),Gt.createElement("div",{className:m9.header},Gt.createElement(PB,{className:m9.avatar,img:a,size:g.SM_OVERSIZE}),Gt.createElement("div",{className:m9.description},i&&n===V.DIALOG?(0,Qr.getParametrizedText)(p9.descriptionWithAmount,{amount:Vr({amount:i,currency:f})}):r===yw.SHARE_PAYMENT?p9.donationShare:p9.description),r!==yw.SHARE_PAYMENT&&o&&Gt.createElement("div",{className:m9.username},o)),Gt.createElement("div",{className:m9.content},l)):Gt.createElement(Gt.Fragment,null,l)},v9=function(){return v9=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v9.apply(this,arguments)},g9=function(e){var t=e.levelId,n=e.dialogId,o=e.userId,a=e.donationAmount,i=e.type,l=e.typeDonation,s=e.onClose,c=e.source,u=void 0===c?Xu.DIRECT:c,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["levelId","dialogId","userId","donationAmount","type","typeDonation","onClose","source"]),f=Mf(),m=xf(),p=cm(m.pathname).isFeedPage,h=TU(v9(v9({},d),{levelId:Number(t),dialogId:Number(n),userId:Number(o),type:i,typeDonation:l,donationAmount:Number(a),source:u||Xu.DIRECT,onGoToPost:function(e,t){var n=(void 0===t?{}:t).state;f(e,{state:n}),Of()},onClose:s,isFromFeed:p})),v=h.isResultPage,g=h.isHiddenTitle,y=h.isDonationPayment,_=h.chatMate,E=h.targetAuthor,b=h.currentUser,S=h.currentUserNetworkStatus,T=h.title,I=h.isSinglePayment,N=h.isGift,C=h.step,w=h.steps,O=h.currency,A=h.onGoToStep,P=h.onPopupClose,L=function(){A(yw.START)},R=function(){var e;return Gt.createElement(PM,{title:!v&&!g&&Gt.createElement(f9,{text:T.text,classNames:{root:"PaymentView_title_oKU1j",icon:"PaymentView_icon_HEv9D"},isResultPage:v,isBackEnable:T.isBackEnable,onGoToStep:A}),classNames:{block:cG()("PaymentView_popup_pD5n6",(e={},e.PaymentView_successPopup_Ey1iy=C===yw.SUCCESS,e))},onClose:P},Gt.createElement(h9,{currency:O,type:i,step:C,typeDonation:l,userName:(null==_?void 0:_.name)||(null==E?void 0:E.name),avatarUrl:(null==_?void 0:_.avatarUrl)||(null==E?void 0:E.avatarUrl),amount:a,showWrapper:i===Ce.DONATION&&l!==V.TARGET&&!v,showBackButton:C===yw.SHARE_PAYMENT||C===yw.PAYMENT&&l!==V.DIALOG,onBackClick:L},Gt.createElement(O5,{isSinglePayment:I,isDonation:y,isGift:N,step:C,steps:w})))};return Qo(r.SHARE_DONATION_LINK)&&y&&(C===yw.START||C===yw.LOADING||yw.PAYMENT)?R():Gt.createElement(R3,{currentUser:b,currentUserNetworkStatus:S,onCloseLogin:s},R())},y9=function(e){var t=e.blogUrl,n=e.levelId,r=e.paymentPurposeType,o=void 0===r?Ce.SUBSCRIPTION:r,a=e.paymentPurposeId,i=void 0===a?Ce.SUBSCRIPTION:a,l=e.paymentDonationType,s=e.source,c=e.onClose,u=e.onSuccess,d=l===V.AUTHOR?void 0:i;return Gt.createElement(g9,{type:o,typeDonation:l,blogUrl:t,levelId:Number(n),id:d,source:s||Xu.DIRECT,onClose:c,onSuccess:u})},_9=function(){return _9=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_9.apply(this,arguments)},E9=function(e){return Gt.createElement(s$,_9({},e,{classNames:{block:"PrivacyPolicyUpdatesPopup_block_W5iM7"}}))},b9=(0,Qr.getTranslation)("@boosty/common/containers.SendGift.components.StepStart.components.AnonymitySwitch"),S9=function(e){var t=e.isChecked,n=e.isDisabled,r=e.onToggle;return Gt.createElement(SF,{classNames:{labelText:"AnonymitySwitch_label_OvdmS"},isDisabled:n,checked:t,size:dF.MIDDLE,label:b9.label,onToggle:r})},T9=(0,Qr.getTranslation)("@boosty/common/containers.SendGift.components.StepStart.components.InputCopy"),I9=function(e){var t=e.blogUrl,n=e.giftKey,r=e.onCopy,o=ei(ir.BLOG_ACCEPT_GIFT,{blogUrl:t,giftKey:n});return Gt.createElement(Zx,{classNameInput:"InputCopy_input_Oi58q",label:T9.label,value:o,rightElement:Gt.createElement(c$,{text:o,onCopy:r},Gt.createElement("button",{className:"InputCopy_rightElement_DWoXX"},Gt.createElement(pB,{className:"InputCopy_rightElementIcon_o8afD",glyph:hB.vUr}),T9.rightElementLabel)),isRightElementShifted:nr().isMobile})};const N9="InputEmail_rightElement_j5mhp";var C9=(0,Qr.getTranslation)("@boosty/common/containers.SendGift.components.StepStart.components.InputEmail"),w9=function(e){var t=e.value,n=e.error,r=e.isSending,o=e.isSent,a=e.onSubmit,i=e.onChange;return Gt.createElement(Zx,{type:"email",value:t,error:n,label:C9.label,placeholder:C9.placeholder,limit:50,rightElement:o?Gt.createElement("div",{className:cG()(N9,"InputEmail_rightElementSuccess_AkeC8")},Gt.createElement(pB,{className:"InputEmail_rightElementIcon_aIHzU",glyph:hB.NOm}),C9.rightElementLabelSuccess):Gt.createElement("button",{className:N9,disabled:r,onClick:a},C9.rightElementLabel),isRightElementShifted:nr().isMobile,onChange:i})};const O9="StepStart_row_zVSaP";var A9=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},P9=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},L9=(0,Qr.getTranslation)("@boosty/common/containers.SendGift.components.StepStart"),R9=function(e){var t=e.giftKey,n=e.showAlert,r=e.onSubscriptionsLinkClick,o=e.onCloseClick,a=function(e,t,n){return e.find((function(e){return e.key===n}))||((null==t?void 0:t.key)===n?t:null)}((0,Vt.v9)(YL),(0,Vt.v9)(qL),t),i=function(e){var t=e.giftKey,n=(0,Vt.I0)(),r=eV((0,Gt.useState)(""),2),o=r[0],a=r[1],i=eV((0,Gt.useState)(""),2),l=i[0],s=i[1],c=eV((0,Gt.useState)(!1),2),u=c[0],d=c[1],f=eV((0,Gt.useState)(!1),2),m=f[0],p=f[1],h=function(e){switch(e){case YW.INVALID_EMAIL:return a(tV.errors.INVALID_EMAIL);case YW.TOO_MANY_SENDS:return a(tV.errors.TOO_MANY_SENDS);case YW.GIFT_ALREADY_TAKEN:return a(tV.errors.GIFT_ALREADY_TAKEN);case YW.GIFT_NOT_FOUND:return a(tV.errors.GIFT_NOT_FOUND);default:return a(tV.errors.COMMON)}};return{email:l,error:o,isGiftSent:u,isGiftSending:m,onEmailChange:function(e){o&&a(""),u&&d(!1),s(e)},onSendButtonClick:function(){return ZW(void 0,void 0,void 0,(function(){var e,r;return $W(this,(function(o){switch(o.label){case 0:if(!(0,Yt.isValidEmail)(l))throw h(YW.INVALID_EMAIL),new Error;p(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,ZW(void 0,void 0,void 0,(function(){return $W(this,(function(e){return[2,n((0,dm.Ax)(LE.action)({giftKey:t,email:l}))]}))}))];case 2:return o.sent(),d(!0),[3,4];case 3:throw e=o.sent(),h(null===(r=null==e?void 0:e.serverError)||void 0===r?void 0:r.error),ho.error("Failed to send gift: ",e),p(!1),e;case 4:return p(!1),[2]}}))}))}}}({giftKey:a.key}),l=i.email,s=i.error,c=i.isGiftSending,u=i.isGiftSent,d=i.onEmailChange,f=i.onSendButtonClick,m=function(e){var t=e.giftKey,n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),r=n[0],o=n[1],a=(0,Vt.I0)();return{isChangeAnonymityGiftSending:r,onAnonymityGiftChange:function(e){return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return o(!0),[4,a((0,dm.Ax)(RE.action)({giftKey:t,isAnonymous:e}))];case 1:return n.sent(),o(!1),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r}}}({giftKey:a.key}),h=m.isChangeAnonymityGiftSending,v=m.onAnonymityGiftChange,g=PD({id:t,type:Ce.GIFT}).sendPaymentStat;return Gt.createElement("div",null,Gt.createElement(X2,{classNames:{board:"StepStart_subscriptionLevelCard_y7EFg"},isStandalone:!0,isStandaloneExtended:!0,hideFooter:!0,level:a.level,onDescriptionOpen:function(){g(We.SEND_GIFT_SHOW_DESCRIPTION)}}),Gt.createElement("div",{className:cG()(O9,"StepStart_rowCrop_BMomZ")},Gt.createElement(S9,{isDisabled:h,isChecked:a.isAnonymous,onToggle:function(e){return A9(void 0,void 0,void 0,(function(){return P9(this,(function(t){switch(t.label){case 0:return g(We.SEND_GIFT_PRIVACY_CHANGE,{param1:e?"1":"0"}),[4,v(e)];case 1:return t.sent(),[2]}}))}))}})),Gt.createElement("div",{className:O9},Gt.createElement(w9,{value:l,error:s,isSending:c,isSent:u,onSubmit:function(){return A9(void 0,void 0,void 0,(function(){return P9(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,f()];case 1:return e.sent(),n({type:p.SUCCESS,text:L9.onGiftSend}),g(We.SEND_GIFT_SEND_EMAIL,{param1:"1"}),[3,3];case 2:return e.sent(),g(We.SEND_GIFT_SEND_EMAIL,{param1:"0"}),[3,3];case 3:return[2]}}))}))},onChange:function(e){var t=e.target.value;d(t)}})),Gt.createElement("div",{className:O9},Gt.createElement(I9,{blogUrl:a.blog.blogUrl,giftKey:a.key,onCopy:function(){n({type:p.SUCCESS,text:L9.onGiftLinkCopy}),g(We.SEND_GIFT_COPY_LINK)}})),Gt.createElement("p",{className:"StepStart_infoText_Mlu85"},L9.infoStart,Gt.createElement(cM,{to:ir.SETTINGS_SUBSCRIPTIONS,onClick:r},L9.infoLink),L9.infoEnd),Gt.createElement(FB,{className:"StepStart_buttonClose_L65at",onClick:o},L9.close))},k9=function(e){var t=e.giftKey,n=e.showAlert,r=e.onClose;return Gt.createElement(Gt.Fragment,null,Gt.createElement(R9,{giftKey:t,showAlert:n,onSubscriptionsLinkClick:r,onCloseClick:r}))},D9=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.desktop.components.SendGiftSubscriptionPopup"),U9=function(e){var t=e.giftKey,n=e.onClose,r=e.from,o=(0,Vt.v9)(XO),i=(0,Vt.v9)(sA),l=L3().showPopup,s=jG().showAlert,c=PD({id:t,type:Ce.GIFT,from:r.toString()}).sendPaymentStat,u=function(e){var t=e?We.SEND_GIFT_CLOSE_BY_CROSS:We.SEND_GIFT_CLOSE;n(),c(t)};return(0,Gt.useEffect)((function(){c(We.SEND_GIFT_SHOW)}),[]),Gt.createElement(R3,{currentUser:o,currentUserNetworkStatus:i,onCloseLogin:function(){l({type:a.SEND_GIFT_SUBSCRIPTION,data:{giftKey:t}})}},Gt.createElement(PM,{classNames:{block:"SendGiftSubscriptionPopup_block_oIT7t",title:"SendGiftSubscriptionPopup_blockTitle_qoxMm"},title:Gt.createElement("div",{className:"SendGiftSubscriptionPopup_title_PuxwE"},Gt.createElement(pB,{glyph:hB.Lmt,className:"SendGiftSubscriptionPopup_icon_XYmHq"}),D9.title),onClose:function(){return u(!0)}},Gt.createElement(k9,{giftKey:t,showAlert:s,onClose:function(){return u(!1)}})))},B9=function(){return B9=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},B9.apply(this,arguments)},x9=function(e){return Gt.createElement(UK,B9({},e))},M9=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},F9=(0,Qr.getTranslation)("@boosty/common/components.UnsubscriptionPoll"),G9=function(e){var t=e.onSelect,n=e.onInputChanged,r=e.onAnonymousChanged,o=e.onHasDataChanged,a=e.classNames,i=e.data.data.poll,l=i.title,s=i.options,c=i.hasOther,u=M9((0,Gt.useState)(!1),2),d=u[0],f=u[1],m=M9((0,Gt.useState)(new Array),2),p=m[0],h=m[1],v=M9((0,Gt.useState)(""),2),g=v[0],y=v[1],_=-1===p.indexOf(-1),E=s.slice();return c&&E.push({id:-1,text:F9.otherReason}),(0,Gt.useEffect)((function(){g.length&&p.length>0||p.length>1||1===p.length&&-1!==p[0]?o(!0):o(!1)}),[g,p]),Gt.createElement("div",{className:"UnsubscriptionPoll_block_QBbe9"},Gt.createElement("div",{className:"UnsubscriptionPoll_icon_yKzKe"}),Gt.createElement("div",{className:cG()("UnsubscriptionPoll_header1_XTUir",null==a?void 0:a.headers)},l[0]),Gt.createElement("div",{className:cG()("UnsubscriptionPoll_header2_CKgBQ",null==a?void 0:a.headers)},l[1]),Gt.createElement("div",{className:cG()("UnsubscriptionPoll_checkboxes_kmM83",null==a?void 0:a.checkboxes)},E.map((function(e){return Gt.createElement(VM,{key:e.id,label:e.text,onToggle:function(n){return function(e,n){var r=p.slice();n&&-1===r.indexOf(e)?r.push(e):n||-1===r.indexOf(e)||r.splice(r.indexOf(e),1),h(r),t(r)}(e.id,n)},checkboxClassName:"UnsubscriptionPoll_checkbox_wRWTq"})}))),c&&Gt.createElement(Zx,{value:g,className:"UnsubscriptionPoll_input_WQBZ6",placeholder:F9.inputOtherReason,disabled:_,onChange:function(e){return t=e.target.value,n(t),void y(t);var t},limit:500}),Gt.createElement(SF,{label:F9.anonymous,size:dF.MIDDLE,onToggle:function(e){f(e),r(e)},checked:d,classNames:{label:"UnsubscriptionPoll_switchLabel_WZAcT",labelText:"UnsubscriptionPoll_switchText_KlDgi"}}))},H9=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},W9=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.desktop.components.UnsubscribePollPopup"),V9=function(e){var t=e.onClose,n=e.bloggerId,r=(0,Vt.I0)(),o=(0,Vt.v9)(BL),a=o.data,i=!o.meta.networkStatus.isFetched,l=H9((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=H9((0,Gt.useState)([]),2),d=u[0],f=u[1],m=H9((0,Gt.useState)(""),2),p=m[0],h=m[1],v=H9((0,Gt.useState)(!1),2),g=v[0],y=v[1];return(0,Gt.useEffect)((function(){r(Zb),r(Xb.action())}),[]),Gt.createElement(PM,{title:"",onClose:t,classNames:{block:"UnsubscribePollPopup_block_NgLLu"},footer:Gt.createElement(Gt.Fragment,null,!i&&Gt.createElement("div",{className:"UnsubscribePollPopup_footer_dFQwq"},Gt.createElement(FB,{isDisabled:!g,onClick:function(){return void 0,void 0,o=function(){var e,o,a;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(i){switch(i.label){case 0:return e=d.slice(),o=e.indexOf(-1),(a=-1!==o)&&e.splice(o,1),r(Jb.action({bloggerId:n,answer:e,isAnonymous:s,other:a?p:""})),[4,t(!0)];case 1:return i.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function r(e){try{i(o.next(e))}catch(e){n(e)}}function a(e){try{i(o.throw(e))}catch(e){n(e)}}function i(n){var o;n.done?t(n.value):(o=n.value,o instanceof e?o:new e((function(e){e(o)}))).then(r,a)}i((o=o.apply(undefined,[])).next())}));var e,o}},W9.continue),Gt.createElement(HB,{onClick:function(){t(!0)}},W9.skipPoll)))},i?Gt.createElement("div",null,Gt.createElement(ZY,null)):Gt.createElement("div",null,Gt.createElement(G9,{data:a,onSelect:function(e){f(e)},onAnonymousChanged:function(e){c(e)},onInputChanged:function(e){h(e)},onHasDataChanged:function(e){y(e)}})))};const j9="UnsubscribeResultPopup_description_YqYtE";var z9=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.desktop.components.UnsubscribeResultPopup"),Y9=function(e){var t=e.onClose,n=e.blogUrl,r=e.name;return Gt.createElement(PM,{classNames:{block:"UnsubscribeResultPopup_popupBlock_gVgCS"},title:"",onClose:t,footer:Gt.createElement("div",{className:"UnsubscribeResultPopup_footer_lE8bA"},Gt.createElement(FB,{onClick:t},z9.button))},Gt.createElement("div",{className:"UnsubscribeResultPopup_content__r38U"},Gt.createElement(pB,{glyph:hB.H8V,className:"UnsubscribeResultPopup_icon_BKj9j"}),Gt.createElement("div",{className:j9},(0,Qr.getReactText)(z9.cancelSubscription,{UserName:function(){return Gt.createElement(cM,{className:j9,to:n},r)}}))))},K9=function(){return K9=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},K9.apply(this,arguments)},q9=function(e){return Gt.createElement(PM,{isModal:!1,isHiddenClose:!0,classNames:{wrapper:"VideoContentPopup_popupWrapper_lwNBh",block:"VideoContentPopup_popupBlock_Sv0v3"}},Gt.createElement(F2,K9({},e)))},X9=function(){return X9=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},X9.apply(this,arguments)},Q9=function(e){return Object.values(e.locales).map((function(e){return X9(X9({},e),{subscriptionLevels:Object.values(e.subscriptionLevels).map((function(e){return X9(X9({},e),{description:(0,Qr.getParametrizedText)(e.description,{projectNameCapitalized:nr().projectName.capitalized})})}))})}))},J9=function(e){var t=e.title,n=e.value,r=e.description,o=e.period,a=(0,Vt.v9)(bA);return Gt.createElement("div",{className:"SubscriptionLevelSample_root_SLkg0"},Gt.createElement("h3",{className:"SubscriptionLevelSample_title_IGg_C"},t),Gt.createElement("div",{className:"SubscriptionLevelSample_value_HcBZF"},Vr({amount:n,currency:a,useGrouping:!0})," ",o),Gt.createElement("div",{className:"SubscriptionLevelSample_description_InV0p"},r))},Z9=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.BlogSubscriptionLevelsAdd.components.TutorialSubscriptionLevels"),$9=function(e){var t=e.tutorialData,n=e.blogCategory,r=e.classNames,o=void 0===r?{}:r,a=e.onClose,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(function(e,t){var n=Q9(e);return function(e,t){return e.find((function(e){return e.category===t}))}(n,t)||n[0]||null}(t,n)),2),l=i[0],s=i[1];return Gt.createElement("div",{className:cG()("TutorialSubscriptionLevels_root_GDtNP",o.root)},Gt.createElement("div",{className:cG()("TutorialSubscriptionLevels_headerContainer_H9rnq",o.headerContainer)},Gt.createElement("div",{className:cG()("TutorialSubscriptionLevels_examplesTitle_ZILRi",o.title)},Gt.createElement("span",null,Z9.examplesTitle),Gt.createElement(pB,{className:"TutorialSubscriptionLevels_icon_RJPPa",glyph:hB.bMz,onClick:a})),Gt.createElement(lF,{className:cG()("TutorialSubscriptionLevels_selectWrapper_W6CyD",o.select),options:Q9(t),selected:l,placeholder:"",onSelect:function(e){s(e)},valueProp:"id"})),Gt.createElement(UM,{className:cG()("TutorialSubscriptionLevels_subscriptionLevelsSamples_nxMAY",o.list)},!!(l&&l.subscriptionLevels&&l.subscriptionLevels.length)&&l.subscriptionLevels.map((function(e,t){return Gt.createElement(J9,{title:e.title,value:e.value,description:e.description,key:t,period:e.period})}))))};const e7={root:"SubscriptionLevelsExample_root_PBwpg",tutorial:"SubscriptionLevelsExample_tutorial_VOTgC",header:"SubscriptionLevelsExample_header_g6XNm",list:"SubscriptionLevelsExample_list_d8Nph",fadeIn:"SubscriptionLevelsExample_fadeIn_Bn28V"};var t7=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.onClose,o=function(){var e=(0,Vt.I0)(),t=(0,Vt.v9)(KR),n=(0,Vt.v9)(qR),r=(0,Vt.v9)(Qw);return(0,Gt.useEffect)((function(){t&&n.isFetched||e(sT())}),[]),{tutorialNetworkStatus:n,tutorialData:t,mnemonic:r}}(),a=o.tutorialData,i=o.tutorialNetworkStatus,l=o.mnemonic,s=!i.isFetched&&!a;return Gt.createElement("div",{className:e7.root},s?Gt.createElement(uM,null):Gt.createElement($9,{classNames:{root:cG()(e7.tutorial,n.root),headerContainer:cG()(e7.header,n.header),title:cG()(e7.title,n.title),list:cG()(e7.list,n.list)},tutorialData:a,blogCategory:l,onClose:r}))},n7=function(e){var t=e.onClose;return Gt.createElement(PM,{classNames:{wrapper:"SubscriptionLevelsExamplePopup_wrapper_PRl5J",block:"SubscriptionLevelsExamplePopup_block_F2cIK",content:"SubscriptionLevelsExamplePopup_content_g48GO",close:"SubscriptionLevelsExamplePopup_close_fD1lO"},onClose:t},Gt.createElement(t7,{onClose:t}))};const r7={row:"BlogSubscriptionLevelsRemove_row_Ulrmg",rowSelect:"BlogSubscriptionLevelsRemove_rowSelect_TWXov",label:"BlogSubscriptionLevelsRemove_label__fPRe",value:"BlogSubscriptionLevelsRemove_value_T8uJl",type:"BlogSubscriptionLevelsRemove_type_MyK0D",warning:"BlogSubscriptionLevelsRemove_warning_jzJ_x",subscribersCount:"BlogSubscriptionLevelsRemove_subscribersCount_KrbNH",toLevel:"BlogSubscriptionLevelsRemove_toLevel_W85ax",remove:"BlogSubscriptionLevelsRemove_remove_qLQiX",fadeIn:"BlogSubscriptionLevelsRemove_fadeIn_kSGzR"};var o7=function(){return o7=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o7.apply(this,arguments)},a7=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i7=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},l7=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.BlogSubscriptionLevelsRemove"),s7=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.blogUrl,o=e.levelId,a=e.onRemove,i=void 0===a?Yt.noop:a,l=e.onClose,s=void 0===l?Yt.noop:l,c=nr().currencies.default,u=a7((0,Gt.useState)(null),2),d=u[0],f=u[1],m=(0,Vt.I0)(),p=(0,Vt.v9)(bL),h=(0,Vt.v9)(cL),v=(0,Vt.v9)(TL),g=(0,Vt.v9)(uL),y=(0,Vt.v9)(NL),_=h.currencyPrices[c];(0,Gt.useEffect)((function(){h&&g.isFetched&&h.id===Number(o)||m((0,dm.Ax)(Fp.action)({blogUrl:r,levelId:Number(o)})),v&&v.length>0?f(v[0]):y.isFetched?f(E()):m((0,dm.Ax)(qp.action)({blogUrl:r}))}),[]),(0,Gt.useEffect)((function(){!d&&y.isFetched&&(v&&v.length>0?f(v[0]):f(E()))}),[d,y]);var E=function(){return o7(o7({},Cr),{name:l7.allUsers,description:l7.allUsers})};return h?Gt.createElement("div",{className:r7.block},Gt.createElement(Ix,{className:r7.row},Gt.createElement("div",{className:r7.label},l7.labels.type),Gt.createElement("div",{className:cG()(r7.value,r7.type)},h.name)),Gt.createElement(Ix,{className:r7.row},Gt.createElement("div",{className:r7.label},l7.labels.price),Gt.createElement("div",{className:r7.value},Vr({amount:_,currency:c})," ",l7.inMonth)),Gt.createElement(Ix,{className:cG()(r7.row,r7.rowSelect)},Gt.createElement(lF,{label:l7.labels.toLevel,options:i7([E()],a7(v),!1),selected:d,labelProp:"name",valueProp:"id",placeholder:l7.labels.toLevel,onSelect:function(e){f(e)},Component:function(e){var t=e.valueObject,n=t.currencyPrices,r=t.name,o=n?n[c]:0;return Gt.createElement(Gt.Fragment,null,r," ",o>0&&"".concat(l7.fromPrice," ").concat(Vr({amount:o,currency:c})))}})),function(){if(!(h&&p&&Array.isArray(p)&&p.length))return null;var e=qr([l7.followers1,l7.followers2,l7.followers5],h.count.subscribers),t=h.count.subscribers||l7.noFollowers,n=p.findIndex((function(e){return e.id===h.id})),r=n>0?p[n-1].name:l7.freeLevel;return Gt.createElement("div",{className:r7.warning},l7.warning.youHave," ",Gt.createElement("span",{className:r7.subscribersCount},t)," ",e,"."," ",l7.warning.willChange,Gt.createElement("span",{className:r7.toLevel},r,"."))}(),Gt.createElement("div",{className:cG()(r7.buttons,n.buttons)},Gt.createElement(FB,{className:cG()(r7.remove,n.removeButton),onClick:function(){var e,t,n;e=d.id,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,m((0,dm.Ax)(Zp.action)({blogUrl:r,levelId:Number(o),postsMigrationLevelId:e}))];case 1:return t.sent(),i(),[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}))}},l7.remove),Gt.createElement(HB,{onClick:function(){s()}},l7.cancel))):Gt.createElement(ZY,null)},c7=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.desktop.components.SubscriptionLevelRemovePopup"),u7=function(e){var t=e.blogUrl,n=e.levelId,r=e.onClose,o=e.onRemove;return Gt.createElement(PM,{title:c7.title,onClose:r},Gt.createElement(s7,{blogUrl:t,levelId:n,onClose:r,onRemove:function(){o(),r()}}))},d7=function(){return d7=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d7.apply(this,arguments)},f7=function(e){return Gt.createElement(a$,d7({classNames:{wrapper:"PreviewMessagePopup_wrapper_tfu2P",block:"PreviewMessagePopup_block_RgL8p",content:"PreviewMessagePopup_content_aMVb4",title:"PreviewMessagePopup_title_sP5w5"}},e))};const m7={root:"PollVotersPreview_root_Mx4pv",voters:"PollVotersPreview_voters_ayVpO",fadeIn:"PollVotersPreview_fadeIn_JzR6c"};var p7=(0,Qr.getTranslation)("@boosty/common/components.PollVotersPreview"),h7=function(e){var t=e.className,n=e.voters,r=e.count,o=(0,Gt.useMemo)((function(){return(0,Qr.getParametrizedText)(qr(p7.voters,r),{count:r})}),[r]);return Gt.createElement("div",{className:cG()(m7.root,t)},Gt.createElement("span",{className:m7.count},o),Gt.createElement("div",{className:m7.voters},n.map((function(e){return Gt.createElement(PB,{key:e.id,className:m7.avatar,size:g.S,img:e.avatarUrl})}))))};const v7={root:"PollOption_root_EVqvt",voters:"PollOption_voters_yUkJB",withVoters:"PollOption_withVoters_Yab4V",option:"PollOption_option_kTyLz",disabled:"PollOption_disabled_efogK",content:"PollOption_content_jLJEw",fraction:"PollOption_fraction_V5AbQ",fakeCheckbox:"PollOption_fakeCheckbox__PdJk",optionText:"PollOption_optionText_R5swP",rightSection:"PollOption_rightSection_dHX_I",checkmark:"PollOption_checkmark_Llp5_",fadeIn:"PollOption_fadeIn_Ho5Oi"};var g7=function(e){var t,n,r=e.className,o=e.data,a=e.showResult,i=void 0!==a&&a,l=e.showPollDetails,s=void 0!==l&&l,c=e.isPending,u=e.isVoted,d=e.isDisabled,f=e.isCheckboxVisible,m=e.onClick;return Gt.createElement("div",{className:cG()(v7.root,(t={},t[v7.withVoters]=s,t))},Gt.createElement("div",{className:cG()(v7.option,r,(n={},n[v7.disabled]=d,n)),onClick:function(){return m(o.id)}},Gt.createElement("div",{className:v7.content},f&&Gt.createElement(VM,{containerClassName:v7.fakeCheckbox,checked:c}),Gt.createElement("span",{className:v7.optionText},o.text),i&&Gt.createElement("div",{className:v7.rightSection},u&&Gt.createElement(pB,{className:v7.checkmark,glyph:hB.NOm}),Boolean(o.fraction)&&Gt.createElement("span",{className:v7.percent},"".concat(Math.round(o.fraction),"%")))),i&&Boolean(o.fraction)&&Gt.createElement("div",{style:{width:"".concat(o.fraction,"%")},className:v7.fraction})),o.counter>0&&Gt.createElement(h7,{className:v7.voters,voters:o.voters.data.voters,count:o.counter}))},y7=(0,Qr.getTranslation)("@boosty/common/components.PollDetails.components.PollDetailsShowMoreButton"),_7=function(e){var t=e.className,n=e.count,r=e.onClick;return Gt.createElement("button",{className:cG()("PollDetailsShowMoreButton_root_f23qt",t),type:"button",onClick:r},(0,Qr.getParametrizedText)(y7.showMore,{count:n}))},E7=function(e){var t=e.className,n=e.voter;return Gt.createElement("div",{className:cG()("PollDetailsVoter_root_BQ_xv",t)},Gt.createElement(PB,{className:"PollDetailsVoter_avatar_v5at9",img:n.avatarUrl,size:g.S}),Gt.createElement("span",{className:"PollDetailsVoter_username_axT4x"},n.name))},b7=(0,Qr.getTranslation)("@boosty/common/components.PollDetails.components.PollDetailsOption"),S7=function(e){var t=e.className,n=e.data,r=e.currentUserId,o=e.onShowMoreClick,a=n.voters,i=a.data.voters,l=a.extra.isLast,s=n.counter,c=(0,Gt.useMemo)((function(){return Boolean(i.find((function(e){return e.id===r})))}),[r,i]),u=(0,Gt.useMemo)((function(){return s>0?(0,Qr.getParametrizedText)(qr(b7.voters,s),{count:s}):null}),[s]),d=s-i.length;return Gt.createElement("div",{className:cG()("PollDetailsOption_root_j_Pvm",t)},Gt.createElement(g7,{className:"PollDetailsOption_option_RG4K1",data:n,showResult:!0,isVoted:c,isDisabled:!0,isPending:!1,onClick:Yt.noop}),Gt.createElement("span",{className:"PollDetailsOption_votersLabel_Sth9p"},u),0!==i.length&&Gt.createElement("div",{className:"PollDetailsOption_voters_eq7x3"},i.map((function(e){return Gt.createElement(E7,{key:e.id,voter:e})})),!l&&Gt.createElement(_7,{count:d,onClick:function(){o(n.id)}})))};const T7={root:"PollDetails_root__N7X8",pollTitle:"PollDetails_pollTitle_zRPbe",content:"PollDetails_content_PYdIL",fadeIn:"PollDetails_fadeIn_rRsUs"};var I7=function(e){var t=e.classNames,n=void 0===t?{}:t,r=function(e){var t=nr().polls.votersDetails.limit,n=e.blogUrl,r=e.postId,o=(0,Vt.I0)(),a=(0,Vt.v9)(XO),i=(0,Vt.v9)(Tw),l=(0,Vt.v9)((function(e){return Iw(e.posts.postsList.data.posts,i,r)})),s=(0,Gt.useCallback)((function(e){o((0,dm.Ax)(pS.action)({blogUrl:n,pollId:l.poll.id,limit:t,option:e}))}),[n,l]);return{poll:null==l?void 0:l.poll,currentUserId:null==a?void 0:a.id,isLoading:!l,handleFetchPollVoters:s}}({blogUrl:e.blogUrl,postId:e.postId}),o=r.poll,a=r.currentUserId,i=r.isLoading,l=r.handleFetchPollVoters;return Gt.createElement(UM,{className:cG()(T7.root,null==n?void 0:n.root)},i&&Gt.createElement(ZY,null),!i&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:cG()(T7.pollTitle,null==n?void 0:n.title)},o.title),Gt.createElement("div",{className:cG()(T7.content,null==n?void 0:n.content)},o.options.map((function(e){return Gt.createElement(S7,{className:T7.pollDetailsOption,key:e.id,data:e,currentUserId:a,onShowMoreClick:l})})))))},N7=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.desktop.components.PollDetailsPopup"),C7=function(e){var t=e.blogUrl,n=e.postId,r=e.onClose;return Gt.createElement(PM,{classNames:{block:"PollDetailsPopup_popup_Kc8Y5",title:"PollDetailsPopup_title_gdyTC"},title:N7.title,onClose:r},Gt.createElement(I7,{classNames:{title:"PollDetailsPopup_pollTitle_xGrtB",content:"PollDetailsPopup_content_Pcdwf"},blogUrl:t,postId:n}))};const w7="PostAccessSelector_card_vwuoH",O7="PostAccessSelector_topContainer_ugbEY",A7="PostAccessSelector_cardTitle_BQaxO",P7="PostAccessSelector_price_Wt6bN",L7="PostAccessSelector_iconContainer_T4OUx",R7="PostAccessSelector_icon_g5GNh",k7="PostAccessSelector_chipItem_LPp4C",D7="PostAccessSelector_chipIcon_N6VVe";var U7=(0,Qr.getTranslation)("@boosty/common/components.PostAccessSelector"),B7=function(e){var t,n,r,o,a=e.levelId,i=e.blogUrl,l=e.postPrice,s=e.subscriptionLevelPrice,c=e.currency,u=e.subscriptionLevelName,d=e.promo,f=e.onPayClick,m=e.onSubscribeClick,p=e.postId,h=e.trialUrl,v=e.onTrialClick,g=Mf(),y=xf().state,_=(0,Vt.I0)(),E=(0,Vt.v9)(cL),b=null===(n=null==E?void 0:E.count)||void 0===n?void 0:n.content.post,S=null===(r=null==E?void 0:E.count)||void 0===r?void 0:r.content.image,T=null===(o=null==E?void 0:E.count)||void 0===o?void 0:o.content.okVideo,I=E&&[E.allowOwnerSendMessage,b,S,T].some(Boolean),N=d&&ka(d),C=d&&Ua(d);(0,Gt.useEffect)((function(){return w(),function(){O()}}),[]);var w=function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,_((0,dm.Ax)(Fp.action)({blogUrl:i,levelId:a,withContentCounters:!0}))];case 1:return e.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t},O=function(){return _(Kp())},A=Vr({amount:s,currency:c}),P=C&&Vr({amount:d.discount.currencyPrices[c],currency:c}),L=Vr({amount:l,currency:c});return Gt.createElement("div",{className:"PostAccessSelector_root_vGP3r"},Gt.createElement("div",{className:w7},Gt.createElement("div",null,Gt.createElement("div",{className:O7},Gt.createElement("div",{className:cG()(L7,"PostAccessSelector_subscriptionIconContainer_M36hM")},Gt.createElement(pB,{glyph:hB.rrY,className:cG()(R7,"PostAccessSelector_iconCrown_mxBpU")})),Gt.createElement("div",null,Gt.createElement("div",{className:A7},U7.subscriptionTitle,Gt.createElement("br",null),"«",u,"»"),Gt.createElement("div",{className:"PostAccessSelector_priceContainer_TGeJd"},C&&Gt.createElement("div",{className:"PostAccessSelector_priceWithoutDiscount_BfTPC"},A),Gt.createElement("div",{className:P7},(0,Qr.getParametrizedText)(U7.subscriptionPrice,{price:C?P:A})),C&&Gt.createElement("div",{className:"PostAccessSelector_discount_LjZTu"},d.discount.percent,"%")))),I&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"PostAccessSelector_chipsTitle__RjIY"},Gt.createElement(pB,{glyph:hB.ajb,className:cG()(R7,"PostAccessSelector_iconUnlock_N5eQ3")}),U7.countersTitle),Gt.createElement("div",{className:cG()("PostAccessSelector_chips_l8iDW",(t={},t.PostAccessSelector_chipsBeforePromo_P2BKD=Boolean(d),t))},Boolean(b)&&Gt.createElement("div",{className:k7},b," ",qr([U7.posts1,U7.posts2,U7.posts5],b)),Boolean(T)&&Gt.createElement("div",{className:k7},Gt.createElement(pB,{glyph:hB.zM1,className:cG()(R7,D7)}),T),Boolean(S)&&Gt.createElement("div",{className:k7},Gt.createElement(pB,{glyph:hB.NV3,className:cG()(R7,D7)}),S),E.allowOwnerSendMessage&&Gt.createElement("div",{className:k7},Gt.createElement(pB,{glyph:hB.fGo,className:cG()(R7,D7)}),U7.chat))),Boolean(d)&&Gt.createElement("div",{className:"PostAccessSelector_promoText_LyOQM"},N&&Gt.createElement("div",null,qr(U7.trialText1,d.trial.days)," ",Gt.createElement("span",{className:"PostAccessSelector_trialHighlightedText_eHqSi"},d.trial.days>1&&"".concat(d.trial.days," "),qr(U7.trialText2,d.trial.days))),Boolean(d.count.maxActivation)&&(0,Qr.getParametrizedText)(qr(U7.promoText1,d.count.maxActivation-d.count.activation),{count:d.count.maxActivation-d.count.activation}),Boolean(d.endTime)&&Gt.createElement(Gt.Fragment,null,Gt.createElement("br",null),(0,Qr.getParametrizedText)(U7.promoText2,{date:go(d.endTime,"dd/MMMM")})))),N?Gt.createElement(FB,{className:"PostAccessSelector_trialButton_wythC",onClick:function(){v(),g((0,Yt.getParametrizedUrl)(h,{blogUrl:i,postId:p,levelId:a,promoId:null==d?void 0:d.id}),{state:y})}},U7.tryFree):Gt.createElement(FB,{onClick:function(){m()}},(0,Qr.getParametrizedText)(U7.subscribe,{price:C?P:A}))),Gt.createElement("div",{className:w7},Gt.createElement("div",{className:O7},Gt.createElement("div",{className:cG()(L7,"PostAccessSelector_postIconContainer_N6P9Y")},Gt.createElement(pB,{glyph:hB.tCy,className:R7})),Gt.createElement("div",null,Gt.createElement("div",{className:A7},U7.openOnlyPost),Gt.createElement("div",{className:P7},(0,Qr.getParametrizedText)(U7.postPrice,{price:L})))),Gt.createElement(HB,{onClick:function(){f()}},(0,Qr.getParametrizedText)(U7.open,{price:L}))))},x7=function(){return x7=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},x7.apply(this,arguments)},M7=(0,Qr.getTranslation)("@boosty/common/components.OverlayPopups.desktop.components.PostAccessSelectorPopup"),F7=function(e){var t=e.postTitle,n=e.avatarUrl,r=e.onPayClick,o=e.onSubscribeClick,a=e.onClose,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["postTitle","avatarUrl","onPayClick","onSubscribeClick","onClose"]);return Gt.createElement(PM,{title:Gt.createElement(Q2,{avatarUrl:n,title:M7.postAccess,description:t}),classNames:{title:"PostAccessSelectorPopup_title_jazkh"},onClose:a},Gt.createElement(B7,x7({},i,{onSubscribeClick:function(){a(),o()},onPayClick:function(){a(),r()},onTrialClick:function(){a()}})))},G7=function(){var e;return(e={})[a.ADULT_CONTENT]={component:t3},e[a.AFTER_FOLLOW]={component:r3},e[a.AUTH_SIGN_IN]={component:a3},e[a.AUTH_SIGN_UP]={component:l3},e[a.FORGOT_PASSWORD]={component:m3},e[a.BECOME_AUTHOR]={component:P3},e[a.BIND_NEW_CARD]={component:mK},e[a.BUY_GIFT_SUBSCRIPTION]={component:A5},e[a.CHANGE_PHONE]={component:X5},e[a.CONFIRM]={component:Z5},e[a.CONTACT_SUPPORT]={component:zX},e[a.TELEGRAM_CONNECTION]={component:d9},e[a.PRIVACY_POLICY_UPDATES]={component:E9},e[a.SEND_GIFT_SUBSCRIPTION]={component:U9},e[a.UNBIND_CARD_ERROR]={component:RK},e[a.DELETE_ACCOUNT]={component:$X},e[a.CANCEL_ACCOUNT_DELETION]={component:FX},e[a.RSS_LINK_POPUP]={component:f$,animation:{timeout:300}},e[a.DELETE_MESSAGE_CONFIRM]={component:e9},e[a.SEND_MESSAGE_CONFIRM]={component:r9},e[a.MAILING_LIST_FILTER]={component:i9},e[a.UNSUBSCRIBE_POLL_POPUP]={component:V9},e[a.UNSUBSCRIBE_RESULT_POPUP]={component:Y9},e[a.VIDEO_CONTENT]={component:q9},e[a.SMILES_CREATE]={component:CK},e[a.SMILES_EDIT]={component:AK},e[a.BADGES_CREATE]={component:VY},e[a.BADGES_EDIT]={component:YY},e[a.PAYMENT]={component:y9},e[a.UNSUBSCRIBE]={component:x9},e[a.SUBSCRIPTION_LEVELS_EXAMPLE]={component:n7},e[a.SUBSCRIPTION_LEVEL_REMOVE]={component:u7},e[a.PREVIEW_MESSAGE]={component:f7},e[a.DIALOGS_SETTINGS_PROMO]={component:H2},e[a.POLL_DETAILS]={component:C7},e[a.POST_ACCESS_SELECTOR]={component:F7},e[a.INFO_MESSAGE_POPUP]={component:oQ},e[a.RENEW_SUBSCRIPTION]={component:$2},e},H7=function(){var e=xf().pathname,t=(0,Vt.v9)(XO),n=_k().isAuthorized,r=Ok(n),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),i=o[0],l=o[1],s=(0,dH.useOverlayPopups)(),c=s.showPopup,u=s.closePopup,d=function(){return Boolean(yf(ir.OFFERS_PRIVACY_POLICY,e))||Boolean(yf(ir.OFFERS_PAYMENT_TERMS,e))||Boolean(yf(ir.OFFERS_USER,e))||Boolean(yf(ir.OFFERS_COOKIE_POLICY,e))};return(0,Gt.useEffect)((function(){var e,o=r&&!n,s=n&&d();n&&!d()?(e=nr().privacyPolicy.acceptVersion,n&&!d()&&e>t.privacyVersion&&function(){if(!i){var e=c({type:a.PRIVACY_POLICY_UPDATES}).id;l(e),bd.log.acceptPolicy.openPopup()}}()):(s||o)&&u(i)}),[n]),null};const W7="SubscriptionLevelsPromoExample_cardTitle_lYWDt";var V7=(0,Qr.getTranslation)("@boosty/common/components.SubscriptionLevelsPromoExample"),j7=function(e){var t,n=e.title,r=e.price,o=r.default,a=r.usd,i=e.description,l=e.discount,s=e.trialPeriod,c=e.trialDescription,u=e.classNames,d=void 0===u?{}:u,f=nr().locale,m=f===ce.EN,p=zr(f),h=m?a:o,v=l?h/100*(100-l):h,g=(0,Qr.getParametrizedText)(V7.price,{price:Vr({amount:v,currency:p})});return Gt.createElement("div",{className:cG()("SubscriptionLevelsPromoExample_root_KoLNu",d.root)},Gt.createElement("div",{className:cG()("SubscriptionLevelsPromoExample_title_Y5tlB",d.title)},n),Gt.createElement("div",{className:cG()("SubscriptionLevelsPromoExample_priceBlock_ugep_",d.price)},l&&Gt.createElement("div",{className:"SubscriptionLevelsPromoExample_priceWithoutDiscount_mHrPH"},Vr({amount:h,currency:p})),Gt.createElement("div",{className:"SubscriptionLevelsPromoExample_priceText_N0gHp"},g),l&&Gt.createElement("div",{className:cG()("SubscriptionLevelsPromoExample_discount_vq1Jt",d.discount)},"-",l,"%")),Gt.createElement("div",{className:cG()("SubscriptionLevelsPromoExample_description_jwj1F",d.description)},i),Gt.createElement("div",{className:cG()("SubscriptionLevelsPromoExample_card__DrC4",d.card,(t={},t.SubscriptionLevelsPromoExample_trialCard_Vzehp=s,t))},l&&Gt.createElement("div",{className:cG()(W7,"SubscriptionLevelsPromoExample_discountTitle_W7VOl",d.cardTitle)},(0,Qr.getParametrizedText)(V7.discountText,{discount:l}),Gt.createElement(pB,{glyph:hB.y9O,className:"SubscriptionLevelsPromoExample_iconArrow_rVP6_"})),c&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"SubscriptionLevelsPromoExample_avatar_gRW9S"}),c),!l&&!c&&Gt.createElement("div",{className:cG()(W7,d.cardTitle)},(0,Qr.getReactText)(V7.trialTitle,{Br:function(){return Gt.createElement("br",null)}})),!s&&Gt.createElement("div",{className:"SubscriptionLevelsPromoExample_daysLeft_YKaOv"},V7.daysLeft)),s&&Gt.createElement(Gt.Fragment,null,Gt.createElement(FB,{className:cG()("SubscriptionLevelsPromoExample_trialButton_D179P",d.trialButton)},V7.tryFree),Gt.createElement("div",{className:"SubscriptionLevelsPromoExample_trialPeriod_hRnXT"},(0,Qr.getReactText)((0,Qr.getParametrizedText)(qr(V7.trialPeriod,s),{days:s}),{Bold:function(e){var t=e.text;return Gt.createElement("span",{className:"SubscriptionLevelsPromoExample_bold_PJ4uD"},t)}}))))};const z7="ExampleMenu_promoItem_hh2Nx";var Y7=(0,Qr.getTranslation)("@boosty/common/components.PromoAlert.compoents.ExampleMenu"),K7=function(e){var t=e.className;return Gt.createElement("div",{className:cG()("ExampleMenu_root_TAvXA",t)},Gt.createElement("ul",{className:"ExampleMenu_list_zPdjO"},[{title:Y7.myPage,icon:hB.bjC},{title:Y7.promo,icon:hB.ekN,className:z7},{title:Y7.income,icon:hB.qSP},{title:Y7.subscriptions,icon:hB.NVv},{title:Y7.settings,icon:hB.GI0}].map((function(e){var t=e.title,n=e.icon,r=e.className;return Gt.createElement("li",{key:t,className:cG()("ExampleMenu_item_LFOap",r)},Gt.createElement(pB,{glyph:n,className:"ExampleMenu_icon_X_i_t"}),t)}))))};const q7="PromoAlert_example_iS1sl",X7="PromoAlert_exampleDescription_oqMKY",Q7="PromoAlert_examplePrice_AR2NI";var J7=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Z7=(0,Qr.getTranslation)("@boosty/common/components.PromoAlert"),$7=function(){var e=J7((0,Gt.useState)(null),2),t=e[0],n=e[1],r=J7((0,Gt.useState)(!1),2),o=r[0],a=r[1],i=(0,Vt.I0)(),l=(0,Vt.v9)(XO);(0,Gt.useEffect)((function(){n(zd())}),[]),(0,Gt.useEffect)((function(){if(l){var e=l.flags.isPromoAlertSeen;a(!e)}}),[l]);var s=(0,Yt.getParametrizedUrl)(ir.BLOG_PROMO,{blogUrl:null==l?void 0:l.blogUrl}),c=function(){i(tg.action({flag:M.IS_PROMO_ALERT_SEEN})),a(!1)};return o?Gt.createElement("div",{style:{top:"".concat(t,"px")},className:"PromoAlert_root_xkqQ8"},Gt.createElement("div",{className:"PromoAlert_closeContainer_rTpQ3",onClick:function(){c()}},Gt.createElement(pB,{glyph:hB.Bt0,className:"PromoAlert_closeIcon_hPy9c"})),Gt.createElement("div",{className:"PromoAlert_preview_KXgsL"},Gt.createElement(j7,{title:Z7.exampleA.title,price:{default:150,usd:15},description:Z7.exampleA.description,classNames:{root:cG()(q7,"PromoAlert_exampleA_SAj7A"),description:X7,price:Q7}}),Gt.createElement(j7,{title:Z7.exampleB.title,price:{default:100,usd:125},discount:25,description:Z7.exampleB.description,classNames:{root:cG()(q7,"PromoAlert_exampleB_TI8iL"),description:cG()(X7,"PromoAlert_exampleDescriptionB_GyMoB"),price:Q7}}),Gt.createElement(K7,{className:"PromoAlert_exampleMenu_fTT2S"}),Gt.createElement(pB,{glyph:hB.xb7,className:"PromoAlert_newIcon_LVEyX"}),Gt.createElement(pB,{glyph:hB.SzT,className:"PromoAlert_arrowIcon_XTH41"})),Gt.createElement("div",{className:"PromoAlert_title_y5Ik0"},Z7.title),Gt.createElement("div",{className:"PromoAlert_description_YJa9X"},Z7.description),Gt.createElement(cM,{to:s,className:"PromoAlert_link_nEmka"},Gt.createElement(FB,{className:"PromoAlert_button_rM8ch",onClick:function(){c()}},Z7.try))):null},e8=(0,Qr.getTranslation)("@boosty/common/components.SubscriptionsMenu"),t8=function(e){var t=e.className,n=e.title,r=e.avatarSize,o=void 0===r?g.S:r,a=e.subscriptions,i=e.closePopups,l=void 0===i?Yt.noop:i,s=e.isFetching,c=e.isLast,u=e.hasSubscriptionsPageLink,d=e.onSubscriptionItemClick,f=e.fetchSubscriptions,m=!a||!a.length;return Gt.createElement(UM,{className:t},Boolean(n)&&Gt.createElement("div",{className:"SubscriptionsMenu_title_EriD5"},n),m?!s&&Gt.createElement("div",{className:"SubscriptionsMenu_empty_w4jXf"},Gt.createElement("div",{className:"SubscriptionsMenu_picturePeople_rPz07"}),Gt.createElement("span",null,e8.emptyText)):a.map((function(e,t){var n=e.blog,r=n.blogUrl,a=n.owner,i=e.levelId;return Gt.createElement(jt.rU,{key:"".concat(t,":").concat(i),to:r,onClick:function(){return null==d?void 0:d(r)},className:"SubscriptionsMenu_subscription_DI2_i"},Gt.createElement(PB,{img:a.avatarUrl,size:o,className:"SubscriptionsMenu_avatar_bOOUn"}),Gt.createElement("span",{className:"SubscriptionsMenu_name_jHAYZ"},a.name))})),!c&&!s&&Gt.createElement("div",{className:"SubscriptionsMenu_loadMore_Ywox7",onClick:f},e8.loadMore),!m&&u&&Gt.createElement("div",{className:"SubscriptionsMenu_linkToSubscriptions_Nsl3k"},Gt.createElement(jt.rU,{to:ir.SETTINGS_SUBSCRIPTIONS,className:"SubscriptionsMenu_link_bAMqX",onClick:l},e8.subscriptions)),s&&Gt.createElement("div",{className:"SubscriptionsMenu_spinner_sp7Zi"},Gt.createElement(uM,{size:40})))},n8=function(e){var t,n=e.hasSubscriptionsMenu,r=e.hideSubscriptionsMenu,o=(0,Vt.I0)(),a=(0,Vt.v9)(sL),i=(0,Vt.v9)(iL),l=(0,Vt.v9)(lL);return n?Gt.createElement("div",{className:cG()("Subscriptions_root_Sefuj",(t={},t.Subscriptions_rootActive_TpVXz=n,t))},Gt.createElement(Dx,{onClickOutside:r,trigger:gx.CLICK},Gt.createElement(t8,{className:"Subscriptions_list_Ji_Hs",subscriptions:a,isFetching:i.isFetching,isLast:l,fetchSubscriptions:function(){o((0,dm.Ax)(Mp.action)({withFollow:!0}))},onSubscriptionItemClick:Yt.noop}))):null},r8=function(e){var t,n,r=e.className,o=e.classNames,a=void 0===o?{}:o,i=e.isInline,l=e.Component,s=e.isBlogPage,c=e.onSelect,u=void 0===c?Yt.noop:c,d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(e.language||(t=nr().locale,Rr()?ce.EN:s&&t||ce.RU)),2),f=d[0],m=d[1],p=(n=s?ce:le,Object.entries(n).map((function(e,t){return{id:t,label:e[0],value:e[1]}}))),h=p.find((function(e){return e.value===f}));return Gt.createElement(lF,{className:cG()("LanguageSelector_root_Y0AUn",r),options:p,selected:h,isInline:i,classNames:{options:a.options,mainLabel:a.mainLabel,arrow:a.arrow},onSelect:function(e){var t=e.value;m(t),u(t)},Component:l})},o8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.desktop.components.NotificationsButton"),a8=function(e){var t=e.onClick,n=e.onMouseEnter,r=e.count,o=Ok(r),a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),i=a[0],l=a[1];return(0,Gt.useEffect)((function(){r>o&&(l(!0),setTimeout((function(){l(!1)}),500))}),[o,r]),Gt.createElement(VB,{className:"NotificationsButton_button_tQ6Ho",onClick:t,onMouseEnter:n},Gt.createElement(pB,{glyph:hB.YK1,className:"NotificationsButton_icon_R5ZsL"}),Gt.createElement("span",{className:"NotificationsButton_caption_rhfgJ"},o8.notifications),r>0&&Gt.createElement(x1,{className:cG()("NotificationsButton_counter_DuEgy",i&&"NotificationsButton_hasNewNotification_P384l"),value:r}))},i8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsEmpty"),l8=function(){return Gt.createElement("div",{className:"NotificationsEmpty_wrapper_dNAcG"},Gt.createElement("div",{className:"NotificationsEmpty_image_KCrK6"}),Gt.createElement("div",{className:"NotificationsEmpty_title_cBYup"},i8.noNotificationsYet),Gt.createElement("div",{className:"NotificationsEmpty_description_uoTRl"},(0,Qr.getParametrizedText)(i8.description,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})))};const s8="ImagePreview_wrapper_aK5tq";var c8=function(){return c8=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c8.apply(this,arguments)},u8=function(e){var t=e.src,n=e.id,r=e.commentId,o=e.className,a=Boolean(r),i=xf().state,l=function(e,t){var n,r=xf(),o=JU(),a=OH();if(!(null==o?void 0:o.user)||!(null==o?void 0:o.id))return null;var i=a.photoViewer,l=(0,Do.parseUrl)(r.search).query;return(0,Yt.getParametrizedUrl)(i,{blogUrl:null===(n=null==o?void 0:o.user)||void 0===n?void 0:n.blogUrl,postId:null==o?void 0:o.id,imageId:e},c8({from:b.POST,fromComment:t},l))}(n,r),s=nr().comments.maxAttachedImages,c=Bo({url:t,height:100,isCroped:!1}),u=Gt.createElement("img",{src:c,alt:"",role:"presentation"});return a&&l?Gt.createElement(jt.rU,{className:cG()(s8,o),style:{maxWidth:"".concat(Math.floor(100/s),"%")},to:l,state:i},u):Gt.createElement("div",{className:cG()(s8,o)},u)},d8=(0,Gt.memo)((function(e){var t=e.images,n=e.commentId,r=e.classNames,o=void 0===r?{}:r;return t.length?Gt.createElement("div",{className:cG()("AttachedImagesRenderer_wrapper_W1AGN",o.wrapper)},t.map((function(e){return Gt.createElement(u8,{key:e.id,src:e.url,id:e.id,commentId:n,className:cG()("AttachedImagesRenderer_preview_UFr2F",o.image)})}))):null})),f8=function(e){var t=e.src,n=e.iconWrapperClassName,r=e.renderIcon;return Gt.createElement("div",{className:"Avatar_wrapper_dJZUb"},Gt.createElement(PB,{img:t,size:g.S}),Gt.createElement("div",{className:cG()("Avatar_iconWrapper_qRb9Q",n)},r))},m8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.NotificationView.NotificationMenu"),p8=function(e){var t=e.onRemoveClick,n=e.classNames,r=e.position,o=sB(),a=o.isOpened,i=o.toggleOpen,l=o.close,s=[{content:m8.remove,onClick:t,className:"ContextMenu_removeItem_LrY3E"}];return Gt.createElement("div",{className:cG()("ContextMenu_container_rV30L",n.container),onClick:function(e){e.stopPropagation(),e.preventDefault()}},Gt.createElement("div",{className:cG()("ContextMenu_button_SxnW7",n.button),onClick:i},Gt.createElement(pB,{glyph:hB.y9O,className:"ContextMenu_menuIcon_Y0cwQ"})),a&&Gt.createElement("div",{className:cG()("ContextMenu_dropdownWrapper_sp0WD",n.dropdownWrapper,r===yx.RIGHT_TOP&&"ContextMenu_top_UXkQE")},Gt.createElement(Dx,{align:r,trigger:gx.CLICK,onClickOutside:l},Gt.createElement("div",{className:"ContextMenu_dropdown_UQHMb"},s.map((function(e,t){var n=e.content,r=e.onClick,o=e.className;return Gt.createElement("div",{key:t,className:cG()("ContextMenu_dropdownItem_JyrrJ",o),onClick:r},n)}))))))},h8=function(e){var t=e.renderContent,n=e.eventTime,r=e.onRemoveClick,o=e.isMenuVisible,a=e.isLastItem,i=e.hasPreview;return Gt.createElement("div",{className:cG()("Main_wrapper_Wa_rp",i&&"Main_short_RqSgp")},Gt.createElement("div",{className:"Main_contentWrapper_jTcJe"},t),Gt.createElement("div",{className:"Main_bottom_Mm2i7"},Gt.createElement("div",{className:"Main_eventTime_jcLE2"},_o(n)),o&&Gt.createElement(p8,{onRemoveClick:r,classNames:{container:"Main_menu_Ksg3L",dropdownWrapper:a&&"Main_rightDropdown_cbYeb"}})))},v8=function(e){var t=e.renderPreview,n=e.previewSrc;return Gt.createElement("div",{className:cG()("Preview_wrapper_nrQ2Y",t&&"Preview_colorBackground_nzwXz",n&&"Preview_photoBackground_VEOEy"),style:{backgroundImage:!t&&"url(".concat(n,")")}},t)};const g8="NotificationView_wrapper_CdkiL",y8="NotificationView_read_SbXfB",_8="NotificationView_removing__Lrq0";var E8=(0,Gt.memo)((function(e){var t=e.eventTime,n=e.renderContent,r=e.avatarUrl,o=e.renderAvatar,a=e.renderIcon,i=e.previewImageSrc,l=e.renderPreview,s=e.onRemoveClick,c=e.urlTo,u=e.target,d=void 0===u?"_self":u,f=e.classNames,m=void 0===f?{}:f,p=e.isRead,h=e.isRemoving,v=e.isLastItem,g=e.onItemClick,y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),_=y[0],E=y[1],b=(nr().isMobile||_)&&!h,S=Boolean(i||l),T=Gt.createElement(Gt.Fragment,null,o?Gt.createElement("div",{className:"NotificationView_renderedAvatar_MQQnM"},o):Gt.createElement(f8,{src:r,renderIcon:a,iconWrapperClassName:m.iconWrapper}),Gt.createElement(h8,{eventTime:t,renderContent:n,onRemoveClick:s,isMenuVisible:b,isLastItem:v,hasPreview:S}),S&&Gt.createElement(v8,{renderPreview:l,previewSrc:i,className:m.previewImage}));return c?Gt.createElement("a",{className:cG()(g8,p&&y8,m.wrapper,h&&_8,"NotificationView_link_WYo_I"),href:c,target:d,rel:"noreferrer",onMouseLeave:function(){return E(!1)},onMouseOver:function(){return E(!0)},onClick:g},T):Gt.createElement("div",{className:cG()(g8,p&&y8,h&&_8,m.wrapper),onMouseLeave:function(){return E(!1)},onMouseOver:function(){return E(!0)}},T)}));E8.displayName="NotificationView";var b8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.CommentNotification");const S8={wrapper:"CommentNotification_wrapper_lS3C8",commentIconWrapper:"CommentNotification_commentIconWrapper_iReyH",replyIconWrapper:"CommentNotification_replyIconWrapper_nOfXL",icon:"CommentNotification_icon_vNOIt",previewIcon:"CommentNotification_previewIcon_HSVDv",content:"CommentNotification_content_u6XqV",attachedImage:"CommentNotification_attachedImage_myrS9",imagesWrapper:"CommentNotification_imagesWrapper_fHQMK",fadeIn:"CommentNotification_fadeIn_XUrNE"};var T8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.CommentNotification"),I8=function(e){var t,n=e.notification,r=n.eventTime,o=n.author,a=n.comment,i=n.isRead,l=e.onRemoveClick,s=e.isRemoving,c=e.isLastItem,u=e.onItemClick,d=a.post,f=function(e){var t,n,r,o,a,i,l,s,c,u=[],d=Va(e),f=null===(t=e.comment.post.data.find((function(e){return e.type===pe.IMAGE})))||void 0===t?void 0:t.url,m=e.aggregationCount;if(e.commentatorsCount>2?(null===(n=e.lastCommentators)||void 0===n?void 0:n[0])?(u.push(e.lastCommentators[0].name),s=d?(0,Qr.getParametrizedText)(b8.repliedForYourCommentMultiple,{commentatorsCount:e.commentatorsCount-1}):(0,Qr.getParametrizedText)(qr(b8.publishedCommentsForYourPostMultiple,m),{commentatorsCount:e.commentatorsCount-1,commentsCount:m})):s=d?b8.usersRepliedForYourComment:(0,Qr.getParametrizedText)(qr(b8.usersPublishedCommentsForPost,m),{commentsCount:m}):2===e.commentatorsCount?(null===(r=e.lastCommentators)||void 0===r?void 0:r[0])&&(null===(o=e.lastCommentators)||void 0===o?void 0:o[1])?(u.push(e.lastCommentators[0].name,e.lastCommentators[1].name),s=d?b8.repliedForYourCommentDouble:(0,Qr.getParametrizedText)(qr(b8.publishedCommentsForYourPostDouble,m),{commentsCount:m})):s=d?"2 ".concat(b8.users2," ").concat(b8.repliedForYourCommentDouble):"2 ".concat(b8.users2," ").concat((0,Qr.getParametrizedText)(qr(b8.publishedCommentsForYourPostDouble,m),{commentsCount:m})):(null===(a=e.lastCommentators)||void 0===a?void 0:a[0])?(u.push(e.lastCommentators[0].name),s=d?b8.repliedForYourCommentSingle:1===m?b8.publishedOneCommentForYourPost:(0,Qr.getParametrizedText)(qr(b8.publishedCommentsForYourPostSingle,m),{commentsCount:m})):s=d?b8.userRepliedForYourComment:1===m?b8.publishedOneCommentForYourPost:(0,Qr.getParametrizedText)(qr(b8.userPublishedCommentsForPost,m),{commentsCount:m}),!f){var p=e.comment.post.title;if(!p){var h=e.comment.post.data.find((function(e){return oa(e)}));h&&(p=$o(h).slice(0,60))}p&&(s+="".concat(d?" ".concat(b8.forPost):""," «").concat(p.trim(),"»"))}if(1===e.aggregationCount){l=e.comment.data.filter((function(e){return e.type===pe.IMAGE}));for(var v=[],g=[],y=0;y<e.comment.data.length;y++){var _=e.comment.data[y];if(ia(_))break;(oa(_)||ra(_))&&(v.push(_),ra(_)&&g.push(_))}if(v.length){var E=(c=[],{text:v.reduce((function(e,t){if(ra(t))return c.push(e.length),e+" ";try{return e+Yk(t)}catch(t){return e}}),""),smilesIndexes:c}),b=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(E.text.slice(0,100)),!1);E.smilesIndexes.forEach((function(e,t){b[e]=Hk(g[t])})),i=b.join(""),s+=":"}}return{shownCommentAuthorsName:u,commentHtmlToShow:i,title:s,previewImageSrc:f,attachedImages:l}}(e.notification),m=nr().isMobile,p=f.shownCommentAuthorsName,h=p.length?1===p.length?Gt.createElement(Gt.Fragment,null,Gt.createElement("b",null,p[0])," "):Gt.createElement(Gt.Fragment,null,Gt.createElement("b",null,p[0])," ",T8.and," ",Gt.createElement("b",null,p[1])," "):null;return Gt.createElement(E8,{avatarUrl:o.avatarUrl,classNames:{wrapper:S8.wrapper,iconWrapper:Va(e.notification)?S8.replyIconWrapper:S8.commentIconWrapper},renderIcon:Gt.createElement(pB,{glyph:Va(e.notification)?hB._zb:hB.YJo,className:S8.icon}),eventTime:r,renderContent:Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:S8.content},h,f.title,f.commentHtmlToShow?Gt.createElement(Gt.Fragment,null,m?" ":Gt.createElement(Gt.Fragment,null,Gt.createElement("br",null)," "),Gt.createElement("span",{className:S8.text,dangerouslySetInnerHTML:{__html:f.commentHtmlToShow}})):null),(null===(t=f.attachedImages)||void 0===t?void 0:t.length)>0&&Gt.createElement(d8,{images:f.attachedImages,classNames:{wrapper:S8.imagesWrapper,image:S8.attachedImage}})),previewImageSrc:f.previewImageSrc,onRemoveClick:l,isRemoving:s,urlTo:(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:d.blog.blogUrl,postId:d.id},{comment:a.id}),isRead:i,isLastItem:c,onItemClick:function(t){u&&u(t,e.notification)}})};const N8={icon:"DiscountSubscriptionNotification_icon_Y3xZJ",iconWrapper:"DiscountSubscriptionNotification_iconWrapper__Kwo_",content:"DiscountSubscriptionNotification_content_q7uef",fadeIn:"DiscountSubscriptionNotification_fadeIn_B2Lzp"};var C8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.DiscountSubscriptionNotification"),w8=function(e){var t=e.notification,n=t.eventTime,r=t.author,o=t.isRead,a=t.promo,i=a.discount.percent,l=a.level.name,s=t.blog.blogUrl,c=e.onRemoveClick,u=e.isRemoving,d=e.isLastItem,f=e.onItemClick,m=(0,Qr.getParametrizedText)(C8.text,{userName:r.name,discount:i,subscriptionName:l}),p=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:s});return Gt.createElement(E8,{avatarUrl:r.avatarUrl,classNames:{wrapper:N8.wrapper,iconWrapper:N8.iconWrapper},renderIcon:Gt.createElement(pB,{glyph:hB.rqj,className:N8.icon}),eventTime:n,renderContent:Gt.createElement("div",{className:N8.content},m),urlTo:p,onRemoveClick:c,isRemoving:u,isRead:o,isLastItem:d,onItemClick:function(t){f&&f(t,e.notification)}})};const O8={wrapper:"DonationNotification_wrapper_Rskfj",iconWrapper:"DonationNotification_iconWrapper_UVT_l",icon:"DonationNotification_icon_iJUya",content:"DonationNotification_content_rYmqM",fadeIn:"DonationNotification_fadeIn_HrlJ7"};var A8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.DonationNotification"),P8=function(e){var t=e.notification,n=e.blogUrl,r=e.isRemoving,o=e.isLastItem,a=e.onRemoveClick,i=e.onItemClick,l=nr().currencies.default,s=t.author,c=t.donation.amount,u=t.eventTime,d=t.isRead,f=(0,Qr.getParametrizedText)(A8.donated,{amount:Vr({amount:c,currency:l,useGrouping:!0})});return Gt.createElement(E8,{avatarUrl:s.avatarUrl,classNames:{wrapper:O8.wrapper,iconWrapper:O8.iconWrapper},renderIcon:Gt.createElement(pB,{glyph:hB.qSP,className:O8.icon}),eventTime:u,renderContent:Gt.createElement("div",{className:O8.content},Gt.createElement("b",null,s.name)," ",Gt.createElement("span",{className:O8.text},f)),urlTo:(0,Yt.getParametrizedUrl)(ir.BLOG_DONATIONS,{blogUrl:n}),onRemoveClick:a,isRemoving:r,isRead:d,isLastItem:o,onItemClick:function(e){i&&i(e,t)}})};const L8={icon:"FreeTrialNotification_icon_UJue4",iconWrapper:"FreeTrialNotification_iconWrapper_E4BGB",content:"FreeTrialNotification_content_cTEEH",fadeIn:"FreeTrialNotification_fadeIn_zuYUj"};var R8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.FreeTrialNotification"),k8=function(e){var t=e.notification,n=t.eventTime,r=t.author,o=t.isRead,a=t.promo.level.name,i=t.blog.blogUrl,l=e.onRemoveClick,s=e.isRemoving,c=e.isLastItem,u=e.onItemClick,d=(0,Qr.getParametrizedText)(R8.text,{userName:r.name,subscriptionName:a}),f=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:i});return Gt.createElement(E8,{avatarUrl:r.avatarUrl,classNames:{wrapper:L8.wrapper,iconWrapper:L8.iconWrapper},renderIcon:Gt.createElement(pB,{glyph:hB.Lmt,className:L8.icon}),eventTime:n,renderContent:Gt.createElement("div",{className:L8.content},d),urlTo:f,onRemoveClick:l,isRemoving:s,isRead:o,isLastItem:c,onItemClick:function(t){u&&u(t,e.notification)}})};const D8={wrapper:"MessageBuyNotification_wrapper_JOGrU",iconWrapper:"MessageBuyNotification_iconWrapper_zoqtB",icon:"MessageBuyNotification_icon_uWZ8l",content:"MessageBuyNotification_content_WqC7i",fadeIn:"MessageBuyNotification_fadeIn_GO1mZ"};var U8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.MessageBuyNotification"),B8=function(e){var t=e.notification,n=e.isRemoving,r=e.isLastItem,o=e.onRemoveClick,a=e.onItemClick,i=t.author,l=t.message.dialogId,s=t.eventTime,c=t.isRead;return Gt.createElement(E8,{avatarUrl:i.avatarUrl,classNames:{wrapper:D8.wrapper,iconWrapper:D8.iconWrapper},renderIcon:Gt.createElement(pB,{glyph:hB.LdR,className:D8.icon}),eventTime:s,renderContent:Gt.createElement("div",{className:D8.content},Gt.createElement("b",null,i.name)," ",Gt.createElement("span",{className:D8.text},U8.paidForMessage)),urlTo:(0,Yt.getParametrizedUrl)(ir.MESSAGES,{},{dialogId:l}),onRemoveClick:o,onItemClick:function(e){a&&a(e,t)},isRemoving:n,isRead:c,isLastItem:r})};const x8={wrapper:"NewsNotification_wrapper_GXfc7",content:"NewsNotification_content_a5w9q",fadeIn:"NewsNotification_fadeIn_wl37D"};var M8=function(e){var t,n=e.notification,r=n.eventTime,o=n.author,a=n.isRead,i=e.onRemoveClick,l=e.isRemoving,s=e.isLastItem,c=e.onItemClick,u={textToShow:(t=e.notification.data.find((function(e){return oa(e)})))?$o(t).slice(0,100):""};return Gt.createElement(E8,{avatarUrl:o.avatarUrl,classNames:{wrapper:x8.wrapper,iconWrapper:x8.iconWrapper},eventTime:r,renderContent:Gt.createElement("div",{className:x8.content},u.textToShow),onRemoveClick:i,isRead:a,isRemoving:l,isLastItem:s,onItemClick:function(t){c&&c(t,e.notification)}})};const F8={wrapper:"NewSubscriberNotification_wrapper_cndam",iconWrapper:"NewSubscriberNotification_iconWrapper_AB8jA",icon:"NewSubscriberNotification_icon_Q7KG_",content:"NewSubscriberNotification_content_eYPqO",fadeIn:"NewSubscriberNotification_fadeIn_aayZN"};var G8,H8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.NewSubscriberNotification"),W8=function(e){var t=e.notification,n=t.eventTime,r=t.author,o=t.isRead,a=t.subscriptionLevel.name,i=e.blogUrl,l=e.isRemoving,s=e.isLastItem,c=e.onRemoveClick,u=e.onItemClick;return Gt.createElement(E8,{avatarUrl:r.avatarUrl,classNames:{wrapper:F8.wrapper,iconWrapper:F8.iconWrapper},renderIcon:Gt.createElement(pB,{glyph:hB.a_W,className:F8.icon}),eventTime:n,renderContent:Gt.createElement("div",{className:F8.content},Gt.createElement("b",null,r.name)," ",Gt.createElement("span",{className:F8.text},H8.subscribed),Gt.createElement("br",null),Gt.createElement("span",{className:F8.text},(0,Qr.getParametrizedText)(H8.level,{level:a}))),urlTo:(0,Yt.getParametrizedUrl)(ir.BLOG_SUBSCRIBERS,{blogUrl:i}),onRemoveClick:c,isRemoving:l,isRead:o,isLastItem:s,onItemClick:function(t){u&&u(t,e.notification)}})};!function(e){e.COMMON_POST="COMMON_POST",e.VIDEO="VIDEO",e.FILE="FILE",e.AUDIO="AUDIO",e.PHOTO="PHOTO",e.TEXT="TEXT"}(G8||(G8={}));var V8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.PostNotification");const j8={wrapper:"PostNotification_wrapper_Q_d83",iconWrapper:"PostNotification_iconWrapper_dqKHA",newPost:"PostNotification_newPost_cq8p0",boughtPost:"PostNotification_boughtPost_q0hZy",icon:"PostNotification_icon_RcmhC",previewIcon:"PostNotification_previewIcon_Am4Ft",locked:"PostNotification_locked_VDtzD",content:"PostNotification_content_EVYBm",fadeIn:"PostNotification_fadeIn_jkKrF"};var z8=function(e){var t,n,r,o,a=e.notification,i=e.onRemoveClick,l=e.isRemoving,s=e.isLastItem,c=e.onItemClick,u=a.type,d=a.eventTime,f=a.author,m=a.post,p=a.isRead,h=function(e){var t,n=e.post.hasAccess;if(!n)return{contentType:G8.COMMON_POST,textToShow:e.post.title,previewImageSrc:null===(t=e.post.teaser.find((function(e){return e.type===pe.IMAGE})))||void 0===t?void 0:t.url,hasAccess:n};var r,o=e.post.data.find((function(e){return e.type===pe.AUDIO||e.type===pe.AUDIO_FILE})),a=e.post.data.find((function(e){return e.type===pe.FILE})),i=e.post.data.find((function(e){return e.type===pe.VIDEO})),l=e.post.data.find((function(e){return e.type===pe.VIDEO_FILE})),s=(r=e.post.data.find((function(e){return oa(e)})))?$o(r).slice(0,110):"",c=e.post.data.find((function(e){return e.type===pe.IMAGE}));return!o||a||i||l?o||!a||i||l?o||a||!i?o||a||!l?!c||s||o||a||i||l?!s||c||o||a||i||l?{contentType:G8.COMMON_POST,textToShow:e.post.title||s,previewImageSrc:null==c?void 0:c.url,hasAccess:!0}:{contentType:G8.TEXT,textToShow:e.post.title||s,hasAccess:!0}:{contentType:G8.PHOTO,textToShow:e.post.title||s,previewImageSrc:c.url,hasAccess:!0}:{contentType:G8.VIDEO,textToShow:e.post.title||l.title||s,previewImageSrc:null==c?void 0:c.url,hasAccess:!0}:{contentType:G8.VIDEO,textToShow:e.post.title||s,previewImageSrc:null==c?void 0:c.url,hasAccess:!0}:{contentType:G8.FILE,textToShow:e.post.title||a.title||s,previewImageSrc:null==c?void 0:c.url,hasAccess:!0}:{contentType:G8.AUDIO,textToShow:e.post.title||o.title||s,previewImageSrc:null==c?void 0:c.url,hasAccess:!0}}(a),v=(n=u,r=h.contentType,n===ut.POST_BUY?V8.bought:r===G8.AUDIO?V8.published.audio:r===G8.FILE?V8.published.file:r===G8.VIDEO?V8.published.video:r===G8.PHOTO?V8.published.image:V8.published.post),g=nr().isMobile,y=u===ut.POST_NEW?hB.wf2:hB.ajb,_=u===ut.POST_NEW?(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:m.blog.blogUrl,postId:m.id}):(0,Yt.getParametrizedUrl)(ir.BLOG_POST_SALES,{blogUrl:m.blog.blogUrl});return Gt.createElement(E8,{avatarUrl:f.avatarUrl,classNames:{wrapper:j8.wrapper,iconWrapper:cG()(j8.iconWrapper,(t={},t[j8.newPost]=u===ut.POST_NEW,t[j8.boughtPost]=u===ut.POST_BUY,t))},renderIcon:Gt.createElement(pB,{glyph:y,className:j8.icon}),eventTime:d,renderContent:Gt.createElement("div",{className:j8.content},Gt.createElement("b",null,f.name)," ",v,h.textToShow?Gt.createElement(Gt.Fragment,null,":",g?" ":Gt.createElement(Gt.Fragment,null,Gt.createElement("br",null)," "),Gt.createElement("span",{className:j8.text},h.textToShow)):null),previewImageSrc:h.previewImageSrc,renderPreview:(o=h,o.hasAccess||o.previewImageSrc?o.contentType===G8.AUDIO?Gt.createElement(pB,{glyph:hB.ZNC,className:j8.previewIcon}):o.contentType===G8.VIDEO?Gt.createElement(pB,{glyph:hB.Gd3,className:j8.previewIcon}):o.contentType===G8.FILE?Gt.createElement(pB,{glyph:hB.yzh,className:j8.previewIcon}):null:Gt.createElement(pB,{glyph:hB.Wal,className:cG()(j8.previewIcon,j8.locked)})),urlTo:_,onRemoveClick:i,isRemoving:l,isRead:p,isLastItem:s,onItemClick:function(t){c&&c(t,e.notification)}})};const Y8={wrapper:"ReferralBloggerNotification_wrapper_t7ENe",iconWrapper:"ReferralBloggerNotification_iconWrapper_d6gig",icon:"ReferralBloggerNotification_icon_K_Z0i",content:"ReferralBloggerNotification_content_o3kQq",fadeIn:"ReferralBloggerNotification_fadeIn_zp0PG"};var K8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.ReferralBloggerNotification"),q8=function(e){var t=e.notification,n=e.isRemoving,r=e.isLastItem,o=e.onRemoveClick,a=e.onItemClick,i=t.author,l=t.blog.blogUrl,s=t.eventTime,c=t.isRead,u=(0,Qr.getReactText)(K8.referralBloggerRegistered,{Strong:function(e){var t=e.text;return Gt.createElement("b",null,t)}});return Gt.createElement(E8,{avatarUrl:i.avatarUrl,classNames:{wrapper:Y8.wrapper,iconWrapper:Y8.iconWrapper},renderIcon:Gt.createElement(pB,{glyph:hB.Z4V,className:Y8.icon}),eventTime:s,renderContent:Gt.createElement("div",{className:Y8.content},Gt.createElement("b",null,i.name,",")," ",Gt.createElement("span",{className:Y8.text},u)),urlTo:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:l}),onRemoveClick:o,onItemClick:function(e){a&&a(e,t)},isRemoving:n,isRead:c,isLastItem:r})};const X8={wrapper:"ReferralUserNotification_wrapper_eu02Q",iconWrapper:"ReferralUserNotification_iconWrapper_UtdEu",icon:"ReferralUserNotification_icon_SN0fC",content:"ReferralUserNotification_content_DK3_9",fadeIn:"ReferralUserNotification_fadeIn__PaiQ"};var Q8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.ReferralUserNotification"),J8=function(e){var t=e.notification,n=e.blogUrl,r=e.isRemoving,o=e.isLastItem,a=e.onRemoveClick,i=e.onItemClick,l=t.author,s=t.eventTime,c=t.isRead;return Gt.createElement(E8,{avatarUrl:l.avatarUrl,classNames:{wrapper:X8.wrapper,iconWrapper:X8.iconWrapper},renderIcon:Gt.createElement(pB,{glyph:hB.CE3,className:X8.icon}),eventTime:s,renderContent:Gt.createElement("div",{className:X8.content},Gt.createElement("b",null,l.name)," ",Gt.createElement("span",{className:X8.text},Q8.referralUserRegistered)),urlTo:(0,Yt.getParametrizedUrl)(ir.BLOG_REFS,{blogUrl:n}),onRemoveClick:a,onItemClick:function(e){i&&i(e,t)},isRemoving:r,isRead:c,isLastItem:o})};const Z8={wrapper:"StatReportFailedNotification_wrapper_Wwiq9",content:"StatReportFailedNotification_content_ULdCk",link:"StatReportFailedNotification_link_GzYq_",icon:"StatReportFailedNotification_icon_I2rZf",fadeIn:"StatReportFailedNotification_fadeIn_L3Jgy"};var $8=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.StatReportFailedNotification"),eee=function(e){var t,n=e.notification,r=n.eventTime,o=n.isRead,a=n.endDate,i=n.startDate,l=e.onRemoveClick,s=e.isRemoving,c=e.isLastItem,u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),d=u[0],f=u[1],m=wo(i,a);return Gt.createElement(E8,{renderAvatar:Gt.createElement(pB,{glyph:hB.QhK,className:Z8.icon}),classNames:{wrapper:Z8.wrapper,iconWrapper:Z8.iconWrapper},eventTime:r,renderContent:(t=d?m?(0,Qr.getParametrizedText)($8.reportIsFailedExtended,{range:m,retry:$8.retry}):(0,Qr.getParametrizedText)($8.reportAllTimeIsFailedExtended,{retry:$8.retry}):m?(0,Qr.getParametrizedText)($8.reportIsFailed,{range:m,retry:$8.retry}):(0,Qr.getParametrizedText)($8.reportAllTimeIsFailed,{retry:$8.retry}),Gt.createElement("div",null,Gt.createElement("div",null,t),!d&&Gt.createElement("div",{className:Z8.link,onClick:function(){f(!0)}},$8.details))),onRemoveClick:l,isRead:o,isRemoving:s,isLastItem:c})};const tee={wrapper:"StatReportSuccessNotification_wrapper_JWbpO",content:"StatReportSuccessNotification_content_vOmUJ",link:"StatReportSuccessNotification_link_SdZg5",icon:"StatReportSuccessNotification_icon_JNARB",fadeIn:"StatReportSuccessNotification_fadeIn_ZsVaj"};var nee=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.StatReportSuccessNotification"),ree=function(e){var t,n=e.notification,r=n.eventTime,o=n.isRead,a=n.endDate,i=n.startDate,l=n.downloadUrl,s=n.statType,c=e.onRemoveClick,u=e.isRemoving,d=e.isLastItem,f=wo(i,a),m=(0,Vt.I0)();return Gt.createElement(E8,{renderAvatar:Gt.createElement(pB,{glyph:hB.QhK,className:tee.icon}),classNames:{wrapper:tee.wrapper,iconWrapper:tee.iconWrapper},eventTime:r,renderContent:(t=f?(0,Qr.getParametrizedText)(nee.reportIsReady,{range:f}):nee.reportAllTimeIsReady,Gt.createElement("div",null,Gt.createElement("div",null,t),Gt.createElement("div",{className:tee.link,onClick:function(){return void 0,void 0,t=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,m((0,dm.Ax)(Ky.action)(l))];case 1:return e=t.sent().data,$f({data:e,filename:"stat-".concat(s.toString(),".csv")}),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t}},nee.download))),onRemoveClick:c,isRead:o,isRemoving:u,isLastItem:d})},oee=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.StreamNotification");const aee={wrapper:"StreamNotification_wrapper_TGqye",iconWrapper:"StreamNotification_iconWrapper_fl7wa",icon:"StreamNotification_icon_iduFX",fadeIn:"StreamNotification_fadeIn_ndsrG"};var iee=function(e){var t=e.notification,n=t.eventTime,r=t.author,o=t.blog,a=t.isRead,i=e.onRemoveClick,l=e.isRemoving,s=e.isLastItem,c=e.onItemClick,u={textToShow:oee.startedNewStream};return Gt.createElement(E8,{avatarUrl:r.avatarUrl,classNames:{wrapper:aee.wrapper,iconWrapper:aee.iconWrapper},renderIcon:Gt.createElement(pB,{glyph:hB.VVE,className:aee.icon}),eventTime:n,renderContent:Gt.createElement("div",{className:aee.content},Gt.createElement("b",null,r.name)," ",u.textToShow),urlTo:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:o.blogUrl}),onRemoveClick:i,isRemoving:l,isRead:a,isLastItem:s,onItemClick:function(t){c&&c(t,e.notification)}})};const lee={wrapper:"SupportMessageNotification_wrapper_EwtlO",content:"SupportMessageNotification_content_aE9D_",icon:"SupportMessageNotification_icon_LyQUa",fadeIn:"SupportMessageNotification_fadeIn_rjvmz"};var see=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.SupportMessageNotification"),cee=function(e){var t,n=e.notification,r=n.eventTime,o=n.isRead,a=e.onRemoveClick,i=e.isRemoving,l=e.isLastItem,s=e.onItemClick,c=(t=e.notification,{ticketLink:"".concat(ir.SUPPORT_HELP,"?to=").concat(t.path)});return Gt.createElement(E8,{urlTo:c.ticketLink,target:"_blank",renderAvatar:Gt.createElement(pB,{glyph:hB.M1S,className:lee.icon}),classNames:{wrapper:lee.wrapper,iconWrapper:lee.iconWrapper},eventTime:r,renderContent:Gt.createElement("div",{className:lee.content},see.newMessage),onRemoveClick:a,isRead:o,isRemoving:i,isLastItem:l,onItemClick:function(t){s&&s(t,e.notification)}})};const uee={wrapper:"TargetNotification_wrapper_S899I",iconWrapper:"TargetNotification_iconWrapper_aBsfb",icon:"TargetNotification_icon_hLHef",content:"TargetNotification_content_Nbrz8",fadeIn:"TargetNotification_fadeIn_nmd8O"};var dee=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem.components.TargetNotification"),fee=function(e){var t=e.notification,n=e.isRemoving,r=e.isLastItem,o=e.onRemoveClick,a=e.onItemClick,i=t.author,l=t.target,s=l.bloggerUrl,c=l.id,u=l.type,d=l.description,f=t.eventTime,m=t.isRead,p=u===Ye.MONEY?(0,Yt.getParametrizedUrl)(ir.BLOG_SINGLE_PAYMENT_DONATION,{blogUrl:s,paymentPurposeType:Ce.DONATION,paymentPurposeId:c,paymentPurposeDonationType:V.TARGET}):(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:s});return Gt.createElement(E8,{avatarUrl:i.avatarUrl,classNames:{wrapper:uee.wrapper,iconWrapper:uee.iconWrapper},renderIcon:Gt.createElement(pB,{glyph:hB.lc4,className:uee.icon}),eventTime:f,renderContent:Gt.createElement("div",{className:uee.content},Gt.createElement("b",null,i.name)," ",Gt.createElement("span",{className:uee.text},dee.addedNewTarget),Gt.createElement("br",null),Gt.createElement("span",{className:uee.text},d)),urlTo:p,onRemoveClick:o,onItemClick:function(e){a&&a(e,t)},isRemoving:n,isRead:m,isLastItem:r})},mee=function(){return mee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mee.apply(this,arguments)},pee=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},hee=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NotificationsList.components.NotificationItem"),vee=(0,Gt.memo)((function(e){var t=e.notification,n=e.onRemoveClick,r=e.isLastItem,o=e.onItemClick,a=pee((0,Gt.useState)(t.isRead),2),i=a[0],l=a[1],s=pee((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=jG().showAlert,f=(0,Vt.v9)(JO),m=function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),u(!0),[4,n(h.id)];case 1:return e.sent(),[3,3];case 2:return e.sent(),d({type:p.ERROR,text:hee.removingError}),[3,3];case 3:return[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t},h=mee(mee({},t),{isRead:i}),v=function(e,t){l(!0),o&&o(e,t),bd.log.navigation.notificationLinkClick()};return function(e){return e.type===ut.POST_NEW}(h)||function(e){return e.type===ut.POST_BUY}(h)?Gt.createElement(z8,{notification:h,isRemoving:c,isLastItem:r,onRemoveClick:m,onItemClick:v}):function(e){return e.type===ut.COMMENT}(h)||Va(h)?Gt.createElement(I8,{notification:h,isRemoving:c,isLastItem:r,onRemoveClick:m,onItemClick:v}):function(e){return e.type===ut.STREAM}(h)?Gt.createElement(iee,{notification:h,isRemoving:c,isLastItem:r,onRemoveClick:m,onItemClick:v}):function(e){return e.type===ut.NEWS}(h)?Gt.createElement(M8,{notification:h,isRemoving:c,isLastItem:r,onRemoveClick:m,onItemClick:v}):function(e){return e.type===ut.SUBSCRIBER_NEW}(h)?Gt.createElement(W8,{notification:h,blogUrl:f,isRemoving:c,isLastItem:r,onRemoveClick:m,onItemClick:v}):function(e){return e.type===ut.DONATION}(h)?Gt.createElement(P8,{notification:h,blogUrl:f,isRemoving:c,isLastItem:r,onRemoveClick:m,onItemClick:v}):function(e){return e.type===ut.TARGET_NEW}(h)?Gt.createElement(fee,{notification:h,isRemoving:c,isLastItem:r,onRemoveClick:m,onItemClick:v}):function(e){return e.type===ut.MESSAGE_BUY}(h)?Gt.createElement(B8,{notification:h,isRemoving:c,isLastItem:r,onRemoveClick:m,onItemClick:v}):function(e){return e.type===ut.REFERRAL_NEW_USER}(h)?Gt.createElement(J8,{notification:h,blogUrl:f,isRemoving:c,isLastItem:r,onRemoveClick:m,onItemClick:v}):function(e){return e.type===ut.REFERRAL_NEW_BLOGGER}(h)?Gt.createElement(q8,{notification:h,isRemoving:c,isLastItem:r,onRemoveClick:m,onItemClick:v}):function(e){return e.type===ut.PROMO&&e.promo.type===bt.TRIAL}(h)?Gt.createElement(k8,{notification:h,isRemoving:c,onRemoveClick:m,isLastItem:r,onItemClick:v}):function(e){return e.type===ut.PROMO&&e.promo.type===bt.DISCOUNT}(h)?Gt.createElement(w8,{notification:h,isRemoving:c,onRemoveClick:m,isLastItem:r,onItemClick:v}):function(e){return e.type===ut.SUPPORT_MESSAGE}(h)?Gt.createElement(cee,{notification:h,isRemoving:c,onRemoveClick:m,isLastItem:r,onItemClick:v}):function(e){return e.type===ut.BLOG_STAT_REPORT_OK}(h)?Gt.createElement(ree,{notification:h,isRemoving:c,onRemoveClick:m,isLastItem:r}):function(e){return e.type===ut.BLOG_STAT_REPORT_FAILED}(h)?Gt.createElement(eee,{notification:h,isRemoving:c,onRemoveClick:m,isLastItem:r}):null}));vee.displayName="NotificationItem";var gee=function(e){var t=e.onRemoveNotificationClick,n=e.onItemClick,r=e.notifications,o=e.className;return Gt.createElement("div",{className:cG()("NotificationsList_wrapper_v5lE6",o)},r.map((function(e,o){return Gt.createElement(vee,{notification:e,onRemoveClick:t,onItemClick:n,key:e.id,isLastItem:o===r.length-1})})))},yee=(0,Qr.getTranslation)("@boosty/common/components.Notifications.NewNotification"),_ee=function(e){var t=e.onRefetchClick,n=e.count,r=e.isLoading,o=e.className,a=[yee.notifications1,yee.notifications2,yee.notifications3];if(!n)return null;var i=r?yee.loading:"+".concat(n," ").concat(qr(a,n));return Gt.createElement("div",{className:cG()("NewNotification_wrapper_Rcg6k",o)},Gt.createElement("div",{className:"NewNotification_left_HKsVg"},Gt.createElement("div",{className:"NewNotification_title_mQCvj"},i)),Gt.createElement("div",{className:"NewNotification_right_IzsxY"},Gt.createElement("button",{onClick:t,className:"NewNotification_button_p4QyI",disabled:r},r?Gt.createElement(uM,{size:18,solid:!0}):Gt.createElement(pB,{glyph:hB.uNf,className:"NewNotification_icon_H66LX"}))))};const Eee="Header_extraMenuItem_IOnnY",bee="Header_icon_NJFL3";var See,Tee=(0,Qr.getTranslation)("@boosty/common/components.Notifications.desktop.components.NotificationsTab.components.Header"),Iee=function(e){var t=e.onRemoveAllClick,n=e.onSetupClick,r=e.canRemoveAll;return Gt.createElement("div",{className:"Header_wrapper_bS6y6"},Gt.createElement("div",{className:"Header_left_pxTpW"},Gt.createElement("div",{className:"Header_title_FTSh8"},Tee.notifications)),Gt.createElement("div",{className:"Header_right_nQTGQ"},Gt.createElement(H0,{classNames:{root:"Header_iconDotsContainer_g4pwq",icon:"Header_iconDots_wKnmo"},iconGlyph:hB.NKR},Gt.createElement(W0,{onClick:n,className:Eee},Gt.createElement("div",{className:Eee},Gt.createElement(pB,{glyph:hB.z4b,className:bee}),Gt.createElement("span",null,Tee.setupNotifications))),r&&Gt.createElement(W0,{onClick:t,className:Eee},Gt.createElement("div",{className:cG()(Eee,"Header_extraMenuItemRed_UuoyC")},Gt.createElement(pB,{glyph:hB.GmE,className:bee}),Gt.createElement("span",null,Tee.removeAll))))))},Nee=function(e){var t,n,r=e.notifications,o=e.isLoading,a=e.fetchNotifications,i=e.newUnreadNotificationsCount,l=e.removeNotification,s=e.removeAllNotifications,c=e.close,u=e.markAsRead,d=(n=(0,Gt.useRef)(!1),(0,Gt.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[]),function(){return n.current}),f=Mf(),m=(null==r?void 0:r.length)>0;return(0,Gt.useEffect)((function(){(null==r?void 0:r.length)>0&&setTimeout((function(){d()&&u()}),1500)}),[null==r?void 0:r.length]),Gt.createElement("div",{className:cG()("NotificationsTab_wrapper_iZlGz",(t={},t.NotificationsTab_empty_bzg6r=!m,t.NotificationsTab_loading_DEJ7X=!m&&o,t))},Gt.createElement(SM,{onOutsideClick:function(){return c()}},Gt.createElement(Iee,{canRemoveAll:(null==r?void 0:r.length)>0,onRemoveAllClick:function(){s(),c()},onSetupClick:function(){f(Xn.SETTINGS_NOTIFICATIONS),c()}}),Gt.createElement(UM,{className:"NotificationsTab_scrollableContainer_DBLlE"},m?Gt.createElement(gee,{notifications:r,isLoading:o,onRemoveNotificationClick:l}):o?Gt.createElement(uM,{size:50,solid:!0}):Gt.createElement(l8,null)),i>0&&Gt.createElement(_ee,{onRefetchClick:a,className:"NotificationsTab_newNotifications_yD49L",isLoading:o,count:i})))},Cee=(0,Qr.getTranslation)("@boosty/common/components.Notifications.desktop"),wee=function(){var e=sB({throttleMs:200}),t=e.isOpened,n=e.close,r=e.toggleOpen,o=jG().showAlert,a=function(){var e,t,n,r,o=(0,Vt.I0)(),a=(0,Vt.v9)(yA),i=(0,Vt.v9)(_A),l=null!==(t=null===(e=null==a?void 0:a.count)||void 0===e?void 0:e.unread)&&void 0!==t?t:0,s=(0,Gt.useCallback)((function(){return cB(void 0,void 0,void 0,(function(){return uB(this,(function(e){switch(e.label){case 0:return[4,o((0,dm.Ax)(Fg.action)())];case 1:return[2,e.sent()]}}))}))}),[]),c=(0,Gt.useCallback)((function(e){return cB(void 0,void 0,void 0,(function(){return uB(this,(function(t){switch(t.label){case 0:return[4,o((0,dm.Ax)(Hg.action)({id:e}))];case 1:return t.sent(),[2]}}))}))}),[]),u=(0,Gt.useCallback)((function(){return cB(void 0,void 0,void 0,(function(){var e;return uB(this,(function(t){switch(t.label){case 0:return(null===(e=null==a?void 0:a.list)||void 0===e?void 0:e.length)?[4,o((0,dm.Ax)(Wg.action)())]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}),[a]),d=(0,Gt.useCallback)((function(){return cB(void 0,void 0,void 0,(function(){return uB(this,(function(e){switch(e.label){case 0:return(null==a?void 0:a.list)?[4,o((0,dm.Ax)(Gg.action)())]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}),[a]),f=null!==(r=null===(n=null==a?void 0:a.list)||void 0===n?void 0:n.filter((function(e){return!e.isRead})).length)&&void 0!==r?r:0,m=i.isFetched?Math.max(l-f,0):0;return{unreadNotificationsCount:l,lastUpdateTime:null==a?void 0:a.updateTime,notifications:null==a?void 0:a.list,isFetching:i.isFetching,isFetched:i.isFetched,isError:Boolean(i.error),fetchNotifications:s,markAsRead:d,removeNotification:c,removeAllNotifications:u,newUnreadNotificationsCount:m}}(),i=a.unreadNotificationsCount,l=a.newUnreadNotificationsCount,s=a.isFetching,c=a.isError,u=a.notifications,d=a.fetchNotifications,f=a.removeNotification,m=a.removeAllNotifications,h=a.markAsRead;return(0,Gt.useEffect)((function(){t&&c&&o({type:p.ERROR,text:Cee.error})}),[t,c]),Gt.createElement("div",{className:"Notifications_wrapper_Rgq9Y"},Gt.createElement(a8,{onClick:r,count:i,onMouseEnter:function(){s||t||d()}}),t&&Gt.createElement(Nee,{notifications:u,isLoading:s,removeNotification:f,removeAllNotifications:m,fetchNotifications:function(){d()},close:n,markAsRead:h,newUnreadNotificationsCount:l}))};!function(e){e.LEFT="left",e.RIGHT="right"}(See||(See={}));const Oee="SearchInputView_iconRight_d6PsP";var Aee=(0,Qr.getTranslation)("@common/components.SearchInputView"),Pee=function(e){return e.preventDefault()},Lee=function(e){var t,n,r,o,a=e.classNames,i=void 0===a?{}:a,l=e.iconPosition,s=void 0===l?See.LEFT:l,c=e.placeholder,u=void 0===c?Aee.defaultPlaceholder:c,d=e.inputRef,f=e.limit,m=e.value,p=e.onChange,h=void 0===p?Yt.noop:p,v=e.onFocus,g=void 0===v?Yt.noop:v,y=e.onBlur,_=void 0===y?Yt.noop:y,E=e.onKeyDown,b=void 0===E?Yt.noop:E,S=e.onReset,T=void 0===S?Yt.noop:S,I=e.onSearchButtonClick,N=void 0===I?Yt.noop:I,C=e.onArrowClick,w=void 0===C?Yt.noop:C,O=e.isDisabled,A=e.isAutoFocus,P=e.isFocused,L=e.isIconSearchHidden,R=e.isResetButtonHidden,k=e.isSearchButtonHidden,D=e.isSearchButtonDisabled,U=void 0!==D&&D,B=e.isVisibleArrowIcon,x=void 0!==B&&B,M=e.hideButtonsOnBlur,F=void 0!==M&&M,G=R&&k,H=(0,Gt.useRef)(),W=gD({inputRef:d||H,timeout:500}).wasFocused;return Gt.createElement("form",{className:fB()("SearchInputView_inputWrapper_wm6Hi",i.inputContainer,(t={},t.SearchInputView_hideButtonsOnBlur_JYH_h=F&&!W(),t)),action:".",onSubmit:Pee},Gt.createElement(Zx,{classNameInput:fB()(i.input,(n={},n.SearchInputView_inputWithButton_kxqAq=!k,n.SearchInputView_inputWithLeftIcon_AJ2zj=!L&&s===See.LEFT,n.SearchInputView_inputWithRightIcon_A4jTx=x||!L&&s===See.RIGHT,n)),innerRef:d||H,limit:f,value:m,placeholder:u,onChange:h,onFocus:g,onBlur:_,onKeyDown:b,disabled:O,autoFocus:A,type:"search"}),!L&&Gt.createElement(pB,{glyph:hB.jVj,className:fB()("SearchInputView_iconSearch_RkeAy",(r={},r.SearchInputView_iconSearchFocused_hTjuF=P,r.SearchInputView_iconLeft_nz5CE=s===See.LEFT,r[Oee]=s===See.RIGHT,r))}),x&&Gt.createElement(pB,{glyph:hB.y9O,className:fB()("SearchInputView_iconArrow_JK7Sq",Oee,(o={},o.SearchInputView_iconArrowRotated_u1ZXF=x,o.SearchInputView_iconArrowDisabled_Zf7Sy=O,o),i.arrowIcon),onClick:w}),!G&&Gt.createElement("div",{className:"SearchInputView_buttons_hl0Ii"},!R&&Gt.createElement("button",{className:fB()("SearchInputView_resetButton_M03Uy",Oee,i.resetButton),type:"button",onClick:T},Gt.createElement(pB,{glyph:hB.WcQ,className:fB()("SearchInputView_iconReset_kON2y",i.resetIcon)})),!k&&Gt.createElement("button",{className:fB()("SearchInputView_searchButton_UPLyJ",U&&"SearchInputView_disabled_B6p7C"),type:"button",onClick:N},Aee.searchButton)))},Ree=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},kee=(0,Qr.getTranslation)("@common/components.SearchInput"),Dee=function(e){var t=e.classNames,n=e.iconPosition,r=void 0===n?See.LEFT:n,o=e.items,a=e.value,i=void 0===a?"":a,l=e.saveValue,s=e.isDisabled,c=e.isIconSearchHidden,u=e.isSuggestHidden,d=e.isAutoFocus,f=e.hasArrowIcon,m=e.hasResetButton,p=e.hasSearchButton,h=e.networkStatus,v=e.placeholder,g=void 0===v?kee.search:v,y=e.minSearchLength,_=void 0===y?3:y,E=e.maxSearchLength,b=e.search,S=e.stringifyItem,T=e.renderItem,I=e.renderEmpty,N=e.renderShowAll,C=e.onSelect,w=e.onSuggestEnd,O=e.onChange,A=void 0===O?Yt.noop:O,P=e.onBlur,L=e.onReset,R=e.onEnterKeyDown,k=(0,Gt.useRef)(null),D=(0,Gt.useRef)(null),U=Ree((0,Gt.useState)(i),2),B=U[0],x=U[1],M=Ree((0,Gt.useState)(!1),2),F=M[0],G=M[1],H=Ree((0,Gt.useState)(!1),2),W=H[0],V=H[1],j=gD({inputRef:D,timeout:300}).wasFocused,z=Ree((0,Gt.useState)(!1),2),Y=z[0],K=z[1],q=Ok(W),X=f&&F,Q=m&&B.length>0,J=p&&B.length>0;(0,Gt.useEffect)((function(){P&&q&&!W&&P(B)}),[W,B]),(0,Gt.useEffect)((function(){h.isFetching||K(!1)}),[h]),(0,Gt.useEffect)((function(){W&&0===_&&h.isFetching&&K(!0)}),[W]),(0,Gt.useEffect)((function(){0===_&&h.isFetched&&K(!1)}),[o]);var Z=(0,Gt.useMemo)((function(){return(0,uU.Z)((function(e){return b(e)}),500)}),[B]);(0,Gt.useEffect)((function(){x(i)}),[i]),(0,Gt.useEffect)((function(){return W&&B.length>=_?(Z(B),G(!0),K(!0)):G(!1),function(){return Z.cancel()}}),[B]);var $=Gt.useCallback((function(e){var t=e.currentTarget;t.offsetHeight+t.scrollTop>=t.scrollHeight-50&&w(B)}),[w]),ee=!Y&&!o.length,te=N&&Boolean(o.length)&&!Y;return Gt.createElement("div",{className:fB()("SearchInput_container_x1IGq",t.container),ref:k},Gt.createElement(Lee,{classNames:{inputContainer:t.inputContainer,input:t.input},inputRef:D,value:B,iconPosition:r,placeholder:g,limit:E,onChange:function(e){var t=e.currentTarget.value;x(t),A&&A(t)},onFocus:function(){0===_&&(K(!0),A(B),b(B)),V(!0),B.length>=_&&G(!0)},onBlur:function(){(B.length<_||0===B.length)&&V(!1)},onKeyDown:function(e){R&&e.key===ae.ENTER&&(R(e.currentTarget.value),e.currentTarget.blur(),V(!1),G(!1))},onReset:function(){var e;x(""),L(),null===(e=D.current)||void 0===e||e.focus()},onSearchButtonClick:function(){R(B)},onArrowClick:function(e){var t,n;e.stopPropagation(),j()?(null===(t=D.current)||void 0===t||t.blur(),G(!1)):null===(n=D.current)||void 0===n||n.focus()},isDisabled:s,isAutoFocus:d,isFocused:W,isIconSearchHidden:c,isResetButtonHidden:!Q,isSearchButtonHidden:!J,isVisibleArrowIcon:X}),F&&!u&&Gt.createElement(Dx,{classNames:{root:fB()("SearchInput_suggestContainer_RPXEp",t.suggestContainer)},trigger:gx.CLICK,onClickOutside:function(e){k.current.contains(e.target)||G(!1)}},Gt.createElement(UM,{onScroll:w&&$,className:fB()("SearchInput_suggest_ooXai",t.suggestContent)},Y&&Gt.createElement("div",{className:"SearchInput_spinnerContainer_r05LR"},Gt.createElement(uM,{size:50})),ee&&(I?I():Uee(B)),!Y&&o.map((function(e){return Gt.createElement("div",{key:e.id,className:fB()("SearchInput_suggestItem_nZh2l",t.suggestItem),onClick:function(){return function(e){C(e),x(l?S(e):""),G(!1),V(!1)}(e)}},T?T(e):S(e))}))),te&&N()))},Uee=function(e){return Gt.createElement("div",{className:"SearchInput_notFound_EXRtO"},Gt.createElement("div",null,(0,Qr.getParametrizedText)(kee.notFound,{searchValue:e})),Gt.createElement("div",null,kee.retry))};const Bee={container:"SearchResult_container_E0v1Z",leftSection:"SearchResult_leftSection_k2WRs",centerSection:"SearchResult_centerSection_S2NTl",rightSection:"SearchResult_rightSection_Ob_TZ",fadeIn:"SearchResult_fadeIn_XhHNg"};var xee=function(e){var t=e.classNames,n=e.avatarUrl,r=e.avatarSize,o=e.renderCenterSection,a=e.renderRightSection,i=e.onClick,l=void 0===i?Yt.noop:i;return Gt.createElement("div",{className:fB()(Bee.container,null==t?void 0:t.container,null==t?void 0:t.containerHover),onClick:l},Gt.createElement("div",{className:Bee.leftSection},Gt.createElement(PB,{className:fB()(Bee.avatar,null==t?void 0:t.avatar),size:r||g.S,img:n})),Boolean(o)&&Gt.createElement("div",{className:fB()(Bee.centerSection,null==t?void 0:t.centerSection)},o()),Boolean(a)&&Gt.createElement("div",{className:fB()(Bee.rightSection,null==t?void 0:t.rightSection)},a()))},Mee=function(e){var t=e.title,n=e.subtitle;return Gt.createElement(Gt.Fragment,null,Gt.createElement("span",{className:"SuggestItemTextSection_title_wOn9h"},t),Boolean(n)&&Gt.createElement("span",{className:"SuggestItemTextSection_subtitle_NbEz8"},n))},Fee=function(e){var t=e.avatarUrl,n=e.title,r=e.subtitle;return Gt.createElement(xee,{avatarUrl:t,renderCenterSection:function(){return Gt.createElement(Mee,{title:n,subtitle:r})}})};const Gee={input:"SearchByBlogsInline_input_kbBJF",searchIcon:"SearchByBlogsInline_searchIcon_uxVYy",showAllLink:"SearchByBlogsInline_showAllLink_IvUeI",suggestContainer:"SearchByBlogsInline_suggestContainer_oAN_r",suggestContent:"SearchByBlogsInline_suggestContent_KSZVs",suggestItem:"SearchByBlogsInline_suggestItem_HFhTn",fadeIn:"SearchByBlogsInline_fadeIn_KNERV"};var Hee=(0,Qr.getTranslation)("@boosty/common/containers.SearchByBlogs.components.SearchByBlogsInline"),Wee=function(e){var t=e.className,n=e.classNameInput,r=e.query,o=e.items,a=e.networkStatus,i=e.limits,l=i.min,s=i.max,c=e.renderEmpty,u=e.isSuggestHidden,d=void 0!==u&&u,f=e.hasSearchButton,m=void 0!==f&&f,p=e.onSearch,h=void 0===p?Yt.noop:p,v=e.onChange,g=void 0===v?Yt.noop:v,y=e.onSelect,_=void 0===y?Yt.noop:y,E=e.onReset,b=void 0===E?Yt.noop:E,S=e.onLoadMore,T=void 0===S?Yt.noop:S,I=e.onEnterKeyDown,N=void 0===I?Yt.noop:I,C=function(){b()};return Gt.createElement(Dee,{classNames:{container:t,input:cG()(Gee.input,n),suggestContainer:Gee.suggestContainer,suggestContent:Gee.suggestContent,suggestItem:Gee.suggestItem,iconSearch:Gee.searchIcon,iconReset:Gee.resetIcon},value:r,iconPosition:See.LEFT,items:o,networkStatus:a,placeholder:Hee.placeholder,search:h,minSearchLength:l,maxSearchLength:s,stringifyItem:function(e){return e.blog.title},renderItem:function(e){var t=e.blog,n=t.blogUrl,r=t.owner,o=r.avatarUrl,a=r.name;return Gt.createElement(Fee,{avatarUrl:o,title:a,subtitle:n})},renderShowAll:function(){return Gt.createElement(cM,{className:Gee.showAllLink,to:(0,Yt.getParametrizedUrl)(ir.SEARCH_BY_BLOGS,{},{searchQuery:r}),onClick:C},Hee.showAll)},renderEmpty:c,onSuggestEnd:T,onChange:g,onSelect:_,onReset:b,onEnterKeyDown:N,hasResetButton:!0,hasSearchButton:m,isSuggestHidden:d})},Vee=function(e){var t=nr().search.blogs.limits.limitInline,n=e.className,r=e.classNameInput,o=Mf(),a=xf(),i=function(e){var t=nr().search.blogs.limits,n=t.minLength,r=t.maxLength,o=t.limitInline,a=e.initialQuery,i=e.customLimit,l=e.onQueryChange,s=void 0===l?Yt.noop:l,c=e.onResultChange,u=void 0===c?Yt.noop:c,d=e.onNetworkStatusChange,f=void 0===d?Yt.noop:d,m=(0,Vt.I0)(),p=Mf(),h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(a||""),2),v=h[0],g=h[1],y=oB({initialQuery:a,search:function(e){return void 0,void 0,n=function(){var t,n,r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return g(e.query),t=e.query,n=e.offset,r=e.limit,[4,m((0,dm.Ax)(ub.action)({query:t,offset:n,limit:r}))];case 1:return[2,{items:(o=a.sent()).data.map((function(e){return PV(PV({},e),{id:e.blog.owner.id})})),offset:o.offset,isLast:o.isLast}]}}))},new((t=Promise)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n},limit:i||o,onResultChange:u,onNetworkStatusChange:f}),_=y.items,E=y.isLast,b=y.networkStatus,S=y.onSearch,T=y.onClearResult;return(0,Gt.useEffect)((function(){s(v)}),[v]),{networkStatus:b,query:v,limits:{min:n,max:r},items:_,isLast:E,onChange:function(e){g(e)},onSelect:function(e){p((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:e}))},onResetQuery:function(){g("")},onResetData:T,onSearch:S}}({initialQuery:"",customLimit:t}),l=i.query,s=i.limits,c=i.networkStatus,u=i.items,d=i.onChange,f=i.onSelect,m=i.onResetQuery,p=i.onSearch,h=0===u.length;return(0,Gt.useEffect)((function(){l&&m()}),[a]),Gt.createElement(Wee,{className:n,classNameInput:r,isSuggestHidden:h,query:l,items:u,networkStatus:c,limits:s,onSearch:p,onSelect:function(e){var t=e.blog.blogUrl;f(t)},onChange:d,onReset:m,onEnterKeyDown:function(e){o((0,Yt.getParametrizedUrl)(ir.SEARCH_BY_BLOGS,{},{searchQuery:e}))}})},jee=function(e){var t,n=e.icon,r=e.title,o=e.onClick,a=void 0===o?Yt.noop:o,i=e.isLastItem,l=e.classNames,s=void 0===l?{}:l;return Gt.createElement($F,{title:Gt.createElement("div",{className:cG()("ProfileDropdownItem_item_oHFvi",(t={},t.ProfileDropdownItem_logoutItem_nuBfX=i,t))},Gt.createElement(pB,{className:cG()("ProfileDropdownItem_icon_iNRrH",s.icon),glyph:n}),r),onClick:a})};const zee="MiniProfile_link_rQTY2";var Yee=(0,Qr.getTranslation)("@boosty/common/components.MiniProfile"),Kee=pj((function(e){var t,n=function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),n=t[0],r=t[1],o=(0,Vt.I0)(),a=(0,Vt.v9)(XO),i=_k().isBlogger,l=a.name,s=a.avatarUrl,c=a.blogUrl,u=nr().blogStatistics.isEnable,d=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:c}),f=(0,Yt.getParametrizedUrl)(ir.BLOG_PROMO,{blogUrl:c}),m=yi(a),p=function(){return r(!1)},h=function(e){e.stopPropagation(),p()};return{currentUser:a,avatarUrl:s,blogUrl:c,name:l,menuBlogUrl:d,promoUrl:f,isBlogger:i,isBlogStatisticsEnable:u,isMenuOpened:n,isPromoEnabled:m,onAvatarClick:function(){return r(!n)},onLinkClick:h,onFeedLinkClick:function(e){h(e),o(x_())},onLogoutClick:function(){e.removeActiveStep(),p(),e.onLogoutClick()},onMenuHide:function(){return p()}}}({onLogoutClick:e.onLogoutClick,removeActiveStep:e.removeActiveStep}),r=n.currentUser,o=n.avatarUrl,a=n.blogUrl,i=n.name,l=n.menuBlogUrl,s=n.promoUrl,c=n.isBlogger,u=n.isBlogStatisticsEnable,d=n.isMenuOpened,f=n.isPromoEnabled,m=n.onAvatarClick,p=n.onLinkClick,h=n.onFeedLinkClick,v=n.onLogoutClick,g=n.onMenuHide;return Gt.createElement("div",{className:"MiniProfile_root_kdy1E",onClick:m},Gt.createElement(PB,{img:o,providerType:r.authSource.type}),Gt.createElement("div",{className:"MiniProfile_name__2xYu"},i),Gt.createElement(pB,{glyph:hB.y9O,className:cG()("MiniProfile_arrow_dEEwT",(t={},t.MiniProfile_arrowUp_c81pN=d,t))}),d&&Gt.createElement("div",{className:"MiniProfile_dropdownContainer_fRVi6"},Gt.createElement(Dx,{onClickOutside:g,trigger:gx.CLICK},Gt.createElement("div",{className:"MiniProfile_dropdown_Y7YOk"},Gt.createElement("div",{className:"MiniProfile_dropdownTopBlock_bezjx"},jo(r)&&Gt.createElement(cM,{to:ir.MAIN,onClick:h,className:zee},Gt.createElement(jee,{icon:hB.kBP,title:Yee.feed,classNames:{icon:"MiniProfile_feedIcon_bOnwN"}})),c&&Gt.createElement(Gt.Fragment,null,Gt.createElement(cM,{to:l,onClick:p,className:zee},Gt.createElement(jee,{icon:hB.f1c,title:Yee.myPage})),f&&Gt.createElement(cM,{to:s,onClick:p,className:zee},Gt.createElement(jee,{icon:hB.ekN,title:Yee.promo})),Gt.createElement(cM,{to:(0,Yt.getParametrizedUrl)(u?ir.BLOG_STATISTICS:ir.BLOG_SUBSCRIBERS,{blogUrl:a}),onClick:p,className:zee},Gt.createElement(jee,{icon:hB.qSP,title:Yee.income}))),Gt.createElement(cM,{to:ir.SETTINGS_SUBSCRIPTIONS,onClick:p,className:zee},Gt.createElement(jee,{icon:hB.NVv,title:Yee.subscriptions})),Gt.createElement(cM,{to:ir.SETTINGS_EDIT,onClick:p,className:zee},Gt.createElement(jee,{icon:hB.GI0,title:Yee.settings}))),Gt.createElement(jee,{icon:hB.iSn,title:Yee.logout,onClick:v,isLastItem:!0})))))})),qee=(0,Qr.getTranslation)("@boosty/common/components.TopMenu.desktop.components.TopMenuRightAuthorized"),Xee=function(e){var t=e.onLogoutClick,n=nr().blog.hasVerifiedEmailsRestriction,r=(0,dH.useOverlayPopups)().showPopup,o=jG().showAlert,i=(0,Vt.v9)(XO),l=i.email,s=i.emailConfirmed,c=s.social,u=s.noSocial,d=Ck(),f=d.isBlogger,m=d.isBanned,h=!f&&!m;return Gt.createElement("div",{className:"TopMenuRightAuthorized_root_TBrsa"},h&&Gt.createElement(HB,{className:"TopMenuRightAuthorized_becomeAuthor_WUusK",onClick:function(){Boolean(l)&&c&&u||!n?(r({type:a.BECOME_AUTHOR}),bd.log.becomeAuthor.openPopup(),bd.log.gtm.startBecomingAuthor()):o({type:p.ERROR,text:qee.confirmEmail})}},qee.becomeAuthor),Gt.createElement(Kee,{onLogoutClick:t}))};const Qee={signUp:"TopMenuRightUnAuthorized_signUp_P691y"};var Jee=(0,Qr.getTranslation)("@boosty/common/components.TopMenu.desktop.components.TopMenuRightUnAuthorized"),Zee=function(){var e=(0,dH.useOverlayPopups)().showPopup;return Gt.createElement("div",{className:Qee.root},Gt.createElement(HB,{className:Qee.signUp,onClick:function(){e({type:a.AUTH_SIGN_UP}),bd.log.auth.openPopup({source:od.HEADER_REGISTER})}},Jee.signUp),Gt.createElement(FB,{onClick:function(){e({type:a.AUTH_SIGN_IN}),bd.log.auth.openPopup({source:od.HEADER_LOGIN})}},Jee.signIn))};const $ee={block:"TopMenu_block_X9bqx",logo:"TopMenu_logo_UXt7J",logoTemp:"TopMenu_logoTemp_fYn3L",iconBurger:"TopMenu_iconBurger_DxPT3",iconMessages:"TopMenu_iconMessages_zy_w6",subscriptionsContainer:"TopMenu_subscriptionsContainer_STZpH",messagesContainer:"TopMenu_messagesContainer_hzgjz",localeComponent:"TopMenu_localeComponent_kYURs",selected:"TopMenu_selected_eiX0a",smallSelectArrow:"TopMenu_smallSelectArrow_FFduW",blockTransparent:"TopMenu_blockTransparent_UVHjE",logoTemp2:"TopMenu_logoTemp2_PG0w1",searchInput:"TopMenu_searchInput_Ub7Cw",responsive:"TopMenu_responsive_ZfN1o",logoDisabled:"TopMenu_logoDisabled_cJiYR",left:"TopMenu_left_xpNO0",right:"TopMenu_right_yjO9f",messageCaption:"TopMenu_messageCaption_s_h7T",subscriptionsCaption:"TopMenu_subscriptionsCaption_eJy8A",messagesCounter:"TopMenu_messagesCounter_J8X9U",messageContainer:"TopMenu_messageContainer_bwglz",languageSelectorBlock:"TopMenu_languageSelectorBlock_sLh39",localeIcon:"TopMenu_localeIcon_BuuyK",localeFlag:"TopMenu_localeFlag_a2T5X",localeLabel:"TopMenu_localeLabel_XrsN5",search:"TopMenu_search_EFlD1",notifications:"TopMenu_notifications_v9YfU",fadeIn:"TopMenu_fadeIn_wDAsK"};var ete=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},tte=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},nte=(0,Qr.getTranslation)("@boosty/common/components.TopMenu.desktop"),rte=function(e){var t,n=e.isPlain,o=void 0!==n&&n,a=e.isResponsive,i=void 0!==a&&a,l=e.isTransparent,s=e.toggleSubscriptionsMenu,c=e.onLogoutClick,u=nr(),d=u.isError502,f=u.isLocaleEnabled,m=u.isMarketingLogo,p=u.isMarketingLogo2,h=(0,Vt.I0)(),v=_k(),g=v.isAuthorized,y=v.isBlogger,_=v.currentUser,E=Qo(r.DIALOGUES),b=Qo(r.SEARCH_BY_BLOGS),S=y&&!jo(_)?(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:_.blogUrl}):ir.MAIN,T=(0,Yt.getParametrizedUrl)(ir.MESSAGES),I=Gt.createElement("div",{className:cG()($ee.block,$ee.responsive)},Gt.createElement("div",{className:$ee.left},Gt.createElement("a",{href:"#",className:$ee.logo,role:"button"})),Gt.createElement("div",{className:$ee.right}));if(o)return I;if(d)return I;var N=cG()($ee.block,((t={})[$ee.responsive]=i,t[$ee.blockTransparent]=l,t));return Gt.createElement("div",{id:te.TOP_MENU,className:N},Gt.createElement("div",{className:$ee.left},Gt.createElement(jt.rU,{to:S,className:p?$ee.logoTemp2:m?$ee.logoTemp:$ee.logo,onClick:function(){h(x_())},role:"button","data-test-id":rz.Logo}),g&&Gt.createElement(Gt.Fragment,null,!jo(_)&&Gt.createElement("div",{className:$ee.subscriptionsContainer,onClick:function(){return s()}},Gt.createElement(pB,{glyph:hB.fgr,className:$ee.iconBurger}),Gt.createElement("span",{className:$ee.subscriptionsCaption},nte.mySubscriptions)),E&&Gt.createElement("div",{className:$ee.messageContainer},Gt.createElement(jt.rU,{className:$ee.messagesContainer,to:T},Gt.createElement(pB,{glyph:hB.f7e,className:$ee.iconMessages}),Gt.createElement("span",{className:$ee.messageCaption},nte.myMessages),_.unreadMsgCount>0&&Gt.createElement(x1,{className:$ee.messagesCounter,value:_.unreadMsgCount}))))),b&&Gt.createElement(Vee,{className:$ee.search,classNameInput:$ee.searchInput}),f&&Gt.createElement("div",{className:$ee.languageSelector},Gt.createElement(r8,{onSelect:function(e){return ete(void 0,void 0,void 0,(function(){var t;return tte(this,(function(n){switch(n.label){case 0:t=[bd.log.blog.selectLocale(e)],_&&t.push((r=e,ete(void 0,void 0,void 0,(function(){return tte(this,(function(e){switch(e.label){case 0:return[4,h((0,dm.Ax)(Ag.action)({locale:r}))];case 1:return e.sent(),[2]}}))})))),function(e){Su(U.LOCALE,e,{expires:3650})}(e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Promise.allSettled(t)];case 2:return n.sent(),[3,4];case 3:return n.sent(),ho.error("FAILED TO SEND LOCATION SWITCH STATISTICS"),[3,4];case 4:return window.location.reload(),[2]}var r}))}))},isInline:!0,className:$ee.languageSelectorBlock,Component:function(e){var t,n,r,o=((t={})[ce.EN]=hB.Meh,t[ce.RU]=hB.$tF,t),a=null==(null==e?void 0:e.selected);return Gt.createElement("div",{className:cG()($ee.localeComponent,(n={},n[$ee.selected]=a,n))},Gt.createElement(pB,{className:cG()($ee.localeIcon,(r={},r[$ee.localeFlag]=!a,r)),glyph:a?hB.OBP:o[e.value]}),Gt.createElement("span",{className:$ee.localeLabel},e.label))},isBlogPage:!0,classNames:{options:$ee.languageOptions,arrow:$ee.smallSelectArrow}})),Gt.createElement("div",{className:$ee.right},g&&Gt.createElement("div",{className:$ee.notifications},Gt.createElement(wee,null)),g?Gt.createElement(Xee,{onLogoutClick:c}):Gt.createElement(Zee,null)))},ote=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ate=function(){return ate=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ate.apply(this,arguments)},ite=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:null},t}return ote(t,e),t.getDerivedStateFromError=function(){return{error:K.APP_ERROR}},t.getDerivedStateFromProps=function(e,t){var n,r,o=nr(),a=o.isError400,i=o.isError403,l=o.isError404,s=o.isError500,c=o.isError502,u=o.isBlogNotFound,d=e.isBlogReadOnly,f=e.isDisabledPage,m=e.blogNetworkStatus.error,p=e.postsNetworkStatus.error,h=e.stream,v=e.streamNetworkStatus,g=e.payoutHistoryNetworkStatus.error,y=e.location.pathname,_=t.error,E=_f(y,"".concat(ir.BLOG_POST,"/*"),!1),b=_f(y,"".concat(ir.BLOG_STREAM,"/*"),!1),S=null;if(_===K.APP_ERROR)return null;if(m&&(S=K.BLOG_FETCH_ERROR),f&&(S=K.PAGE_NOT_FOUND),i)S=(null===(n=null==m?void 0:m.serverError)||void 0===n?void 0:n.error)===K.USER_BANNED?K.USER_BANNED:K.FORBIDDEN;else if(a)S=K.BAD_REQUEST;else if(l)S=K.PAGE_NOT_FOUND;else if(c)S=K.BAD_GATEWAY;else if(u||404===(null==m?void 0:m.status)||400===(null==m?void 0:m.status))S=K.BLOG_NOT_FOUND;else if(b&&(null==v?void 0:v.isFetched)&&!h)S=K.STREAM_NOT_FOUND;else if(!E||404!==(null==p?void 0:p.status)&&400!==(null==p?void 0:p.status)||d)(s||500===(null==g?void 0:g.status)||500===(null==m?void 0:m.status)||500===(null==p?void 0:p.status))&&(S=K.INTERNAL_SERVER_ERROR);else{var T=e.location.pathname,I=p.request.url,N=T.split("/"),C=N.findIndex((function(e){return"posts"===e})),w=I.split("/"),O=w.findIndex((function(e){return"post"===e}));N[C+1]===w[O+1].split("?")[0]&&(S=K.POST_NOT_FOUND)}return 403===(null==m?void 0:m.status)&&(null===(r=null==m?void 0:m.serverError)||void 0===r?void 0:r.error)===K.USER_BANNED&&(S=K.USER_BANNED),S&&ho.error("App error: ".concat(S)),{error:S}},t.prototype.componentDidMount=function(){var e=this.props.location.pathname;try{var t=decodeURIComponent(e);t!==e&&window.location.replace(t)}catch(t){ho.error('Failed decode uri "'.concat(e,'"'))}},t.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.resetBlogStore,o=n.location,a=o.pathname,i=o.search,l=n.blogNetworkStatus.error,s=e.location.pathname,c=e.blogNetworkStatus.error,u=this.state.error,d=t.error;if(a!==s){var f=(this.getPageRouteMatch(this.props)||{params:{}}).params.blogUrl,m=(this.getPageRouteMatch(e)||{params:{}}).params.blogUrl;[K.APP_ERROR,K.USER_BANNED].includes(u)&&u===d&&this.clearError(),([K.BLOG_NOT_FOUND,K.USER_BANNED].includes(u)&&l===c||f!==m&&u===K.STREAM_NOT_FOUND)&&r(),[K.FORBIDDEN,K.PAGE_NOT_FOUND,K.BLOG_NOT_FOUND,K.USER_BANNED,K.INTERNAL_SERVER_ERROR,K.BAD_GATEWAY].includes(u)&&u===d&&this.clearServerError(),ho.message("Navigate to ".concat(a,"?").concat(i))}},t.prototype.componentDidCatch=function(e,t){},t.prototype.getPageRouteMatch=function(e){void 0===e&&(e=this.props);var t=e.routes.find((function(t){return!!yf(t,e.location.pathname)}));return t?yf(t,e.location.pathname):null},t.prototype.clearError=function(){this.setState({error:null})},t.prototype.clearServerError=function(){tr(ate(ate({},nr()),{isError:!1,isError400:!1,isError403:!1,isError404:!1,isError500:!1,isError502:!1,isBlogNotFound:!1})),this.clearError()},t.prototype.render=function(){var e=this.state.error;return this.props.render({error:e})},t}(Gt.Component);const lte="App_app_Hc7fD";var ste,cte=function(e){var t=e.children,n=e.currentUser,r=e.isAuthorized,o=e.isBanned,a=e.isDisabledPage,i=e.isFullPageWidth,l=e.isResponsivePageWidth,s=e.isMonochromeBackground,c=e.isFooterVisible,u=e.isMarketingAlertVisible,d=e.isNoticeListVisible,f=e.isTopMenuVisible,m=e.isGDPRVisible,p=e.isTopMenuTransparent,h=e.isFooterTransparent,v=e.isPlainPage,g=e.hasSubscriptionsMenu,y=e.theme,_=e.blogNetworkStatus,E=e.stream,b=e.streamNetworkStatus,S=e.postsNetworkStatus,T=e.payoutHistoryNetworkStatus,I=e.isBlogReadOnly,N=e.routes,C=e.className,w=e.onSendEmailConfirmationLetter,O=e.onDismissEmail,A=e.onConfirmEmail,P=e.onHideSubscriptionsMenu,L=e.onToggleSubscriptionsMenu,R=e.onLogout,k=e.resetBlogStore,D=e.isPromoAlertVisible,U=e.isMainFeedAlertVisible,B=e.infoMessages,x=xf();return v?Gt.createElement("div",{className:cG()(lte,y)},f&&Gt.createElement(rte,{isPlain:!0}),t):Gt.createElement(ite,{stream:E,streamNetworkStatus:b,postsNetworkStatus:S,payoutHistoryNetworkStatus:T,blogNetworkStatus:_,isBlogReadOnly:I,isDisabledPage:a,resetBlogStore:k,routes:N,location:x,render:function(e){var a=e.error;return Gt.createElement("div",{className:cG()(lte,y,C)},Gt.createElement(gj,{popups:G7()},f&&Gt.createElement(rte,{isTransparent:p,onLogoutClick:R,toggleSubscriptionsMenu:L,isResponsive:l}),Gt.createElement(cj,null),Gt.createElement(n8,{hasSubscriptionsMenu:g,hideSubscriptionsMenu:P}),a?Gt.createElement(Cj,{error:a}):Gt.createElement(Gt.Fragment,null,d&&Gt.createElement(Fz,{isAuthorized:r,isBanned:o,currentUser:n,infoMessages:B,confirmEmail:A,dismissEmail:O,sendEmailConfirmationLetter:w,bannedNotice:Gt.createElement(Ej,null),accountScheduledForDeletionNotice:Gt.createElement(oj,{currentUser:n})}),Gt.createElement(H7,null),Gt.createElement(Xj,{isFullPageWidth:i,isResponsivePageWidth:l,isMonochromeBackground:s},t)),c&&Gt.createElement(Dj,{isTransparent:h}),m&&Gt.createElement(Mj,null)),u&&Gt.createElement(lz,null),D&&Gt.createElement($7,null),U&&Gt.createElement(az,null),Gt.createElement(Yj,null),Gt.createElement(tz,null))}})},ute=function(){return ute=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ute.apply(this,arguments)},dte=function(e,t){var n=e.component,r=e.props,o=e.routes,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["component","props","routes"]),i=Array.isArray(o)&&o.length>0?o.map((function(e){var n=/\*$/,r=n.test(a.path);return dte(ute(ute({},e),{path:r?e.path.replace(a.path.replace(n,""),""):e.path}),t)})):null;return Gt.createElement(Bf.AW,ute({key:a.path},a,{element:Gt.createElement(n,ute({key:a.path},r))}),i)},fte=function(e){return function(){return Gt.createElement(Bf.Z5,null,e.map((function(t){return dte(t,e)})))}};!function(e){e.ROOT="root"}(ste||(ste={}));const mte={icon:"FollowButton_icon_Eop6s",button:"FollowButton_button_uWC9o",iconActive:"FollowButton_iconActive_F5f4q",iconDisabled:"FollowButton_iconDisabled_IlCiM",fadeIn:"FollowButton_fadeIn_zB9mU"};var pte,hte=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vte=function(){return vte=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vte.apply(this,arguments)},gte=(0,Qr.getTranslation)("@common/components.FollowButton"),yte=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isButtonHovered:!1},t.onClick=function(){var e=t.props,n=e.isSubscribed,r=e.onClick;n||r()},t.onMouseEnter=function(){return t.setState({isButtonHovered:!0})},t.onMouseLeave=function(){return t.setState({isButtonHovered:!1})},t}return hte(t,e),t.prototype.render=function(){var e,t,n=this.props,r=n.isFollowing,o=n.isSubscribed,a=n.isDisabled,i=n.isFollowCategory,l=n.className,s=this.state.isButtonHovered,c=r||o,u=!r||!s,d=o||a;return Gt.createElement(HB,vte({},Na(this.getTestId(ste.ROOT)),{className:fB()(mte.button,l,(e={},e[mte.buttonFollowing]=r,e)),onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,isDisabled:d}),u&&Gt.createElement(pB,{glyph:i?c?hB.kAY:hB.mQ4:c?hB.t5g:hB.VzA,className:fB()(mte.icon,(t={},t[mte.iconActive]=c,t[mte.iconDisabled]=o,t))}),gte[r?s&&!o?"unfollow":"following":"follow"])},function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}([Cx("FollowButton")],t)}(Gt.PureComponent),_te=(0,Qr.getTranslation)("@common/components.BlogRssLinkButton"),Ete=function(e){var t=e.showRssLinkPopup,n=e.classNames,r=void 0===n?{}:n;return Gt.createElement("button",{className:fB()("BlogRssLinkButton_button_z8BMI",r.button),onClick:t},Gt.createElement(pB,{glyph:hB.o0A,className:fB()("BlogRssLinkButton_icon_tuFYB",r.icon)}),Gt.createElement("span",{className:fB()("BlogRssLinkButton_text_ImzpQ",r.text)},_te.rssChannel))};!function(e){e.ROOT="ROOT"}(pte||(pte={}));var bte=function(){return bte=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bte.apply(this,arguments)},Ste=(0,Qr.getTranslation)("@boosty/common/components.BlogDonationButton"),Tte=oo("BlogDonationButton"),Ite=function(e){var t=e.classNames,n=void 0===t?{}:t,r=WV().openDonationPayment;return Gt.createElement("div",bte({className:"BlogDonationButton_root_Qhzfa"},Na(Tte(pte.ROOT))),Gt.createElement("button",{className:cG()("BlogDonationButton_button_w1gQB",n.button),onClick:function(){r()}},Gt.createElement(pB,{glyph:hB.iMT,className:cG()("BlogDonationButton_icon_KEbDN",n.icon)}),Gt.createElement("span",{className:cG()("BlogDonationButton_text_AhCaw",n.text)},Ste.donate)))};const Nte="BlogFollowers_label_vQRQu";var Cte,wte,Ote=(0,Qr.getTranslation)("@boosty/common/components.BlogFollowers"),Ate=function(e){var t=function(t){var n=qU();return Gt.createElement(e,XU({},n,t))};return t.displayName="withBlogBanStatus".concat(jd(e)),t.fetchActions=e.fetchActions,Vd(t,e)}(((wte=function(e){var t=qU().banStatus,n=YU({banStatus:t}).shouldShowBanDisclaimer;return Gt.createElement(Cte,ZU({shouldShowBanDisclaimer:n},e))}).displayName="withBlogBanDisclaimer".concat(jd(Cte=function(e){var t=e.followers,n=e.actionButton,r=e.messageButton,o=e.isRssFeedEnabled,a=e.isDonationButtonEnabled,i=e.showRssLinkPopup,l=e.wrapCounter,s=e.shouldShowBanDisclaimer,c=t>0,u=!s&&Boolean(n),d=!s&&o,f=!s&&a;return c||u||o||r||a?Gt.createElement("div",{className:"BlogFollowers_block_x2EJU"},c&&(l?Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlogFollowers_count_TWVv2"},(0,Yt.getFormattedNumber)(t)),Gt.createElement("div",{className:Nte},qr([Ote.followers1,Ote.followers2,Ote.followers5],t))):Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:Nte},(0,Yt.getFormattedNumber)(t)," ",qr([Ote.followers1,Ote.followers2,Ote.followers5],t)))),u&&n,!s&&r,d&&Gt.createElement("div",{className:"BlogFollowers_rssButtonWrapper_L9n7N"},Gt.createElement(Ete,{showRssLinkPopup:i})),f&&Gt.createElement("div",{className:"BlogFollowers_donationButtonWrapper_n6imF"},Gt.createElement(Ite,null))):null})),wte.fetchActions=Cte.fetchActions,Vd(wte,Cte))),Pte=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Lte=(0,Qr.getTranslation)("@boosty/common/components.ScrollUpButton"),Rte=function(e){var t,n=e.showAtPositionPercent,r=void 0===n?.7:n,o=e.showUnderRef,a=void 0===o?null:o,i=e.footerHeight,l=void 0===i?0:i,s=Pte((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=Pte((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=function(){var e,t=(null===(e=null==a?void 0:a.current)||void 0===e?void 0:e.clientHeight)||0;m(document.body.scrollHeight-l<window.innerHeight+window.scrollY),u(window.scrollY>=window.innerHeight*r&&window.scrollY>=t)};return(0,Gt.useEffect)((function(){return window.addEventListener("resize",p),window.addEventListener("scroll",p),function(){window.removeEventListener("resize",p),window.removeEventListener("scroll",p)}}),[]),Gt.createElement("div",{className:cG()("ScrollUpButton_button_h3ioK",(t={},t.ScrollUpButton_hide_w8Oo7=!c,t.ScrollUpButton_bottom_TiAvS=f,t)),onClick:function(){window.scrollTo({top:0,behavior:"smooth"})}},Gt.createElement(pB,{glyph:hB.y9O,className:"ScrollUpButton_icon_kUsXH"}),Gt.createElement("span",null,Lte.up))},kte=(0,Qr.getTranslation)("@boosty/common/components.TutorialProgress.components.TutorialCompleted"),Dte=function(e){var t=e.blogUrl,n=e.finishTutorial,r=nr().hosts,o=jG().showAlert,a="".concat(r.main,"/").concat(t);return Gt.createElement("div",{className:"TutorialCompleted_root_ZaQOy"},Gt.createElement("div",{className:"TutorialCompleted_cupContainer_iSmDq"},Gt.createElement("svg",{viewBox:"0 0 120 120",className:"TutorialCompleted_circle_mhxA6"},Gt.createElement("circle",{cx:"50%",cy:"50%",r:"58",fill:"none"})),Gt.createElement("div",{className:"TutorialCompleted_cupIcon_bi6mU"})),Gt.createElement("div",{className:"TutorialCompleted_text_eL8TY"},(0,Qr.getParametrizedText)(kte.text,{projectNameCapitalized:nr().projectName.capitalized})),Gt.createElement("input",{type:"text",className:"TutorialCompleted_input_ZiK1J",value:a,readOnly:!0}),Gt.createElement(c$,{text:a,onCopy:function(){o({type:p.SUCCESS,text:kte.linkCopied})}},Gt.createElement("div",{className:"TutorialCompleted_copyContainer_N3Jed"},Gt.createElement(pB,{glyph:hB.vUr,className:"TutorialCompleted_copyIcon_g0HC5"}),Gt.createElement("span",{className:"TutorialCompleted_copy_fibwX"},kte.copyLink))),Gt.createElement("div",{className:"TutorialCompleted_finishContainer__njRQ",onClick:function(){n()}},Gt.createElement(pB,{glyph:hB.BKp,className:"TutorialCompleted_closeIcon_PoRp7"}),Gt.createElement("span",null,kte.finishTutorial)))};const Ute="TutorialItem_block_PYngh";var Bte=function(e){var t,n=e.children,r=e.containerClassName,o=e.rightText,a=e.leftIcon,i=e.onClick,l=e.isDisabled,s=e.hideRightBlock,c=l?Yt.noop:i;return Gt.createElement("div",{className:cG()("TutorialItem_root_adMk4",r,(t={},t.TutorialItem_rootDisabled_yXlLu=l,t)),onClick:c},Gt.createElement("div",{className:Ute},Gt.createElement("div",{className:"TutorialItem_leftIconContainer_wCF6L"},a),Gt.createElement("span",{className:"TutorialItem_text_feqQa"},n)),!s&&Gt.createElement("div",{className:cG()(Ute,"TutorialItem_rightBlock_hGgwz")},o&&Gt.createElement("span",null,o),Gt.createElement(pB,{glyph:hB.y9O,className:"TutorialItem_arrow_OhuVJ"})))};const xte="TutorialGroupItem_circle_NB3f0";var Mte=function(e){var t=e.children;return Gt.createElement("div",{className:cG()(xte,"TutorialGroupItem_numberCircle_nmEQ5")},t)},Fte=function(){return Gt.createElement("div",{className:cG()(xte,"TutorialGroupItem_successCircle_kW2z7")},Gt.createElement(pB,{glyph:hB.NOm,className:"TutorialGroupItem_checkIcon_EQGS2"}))},Gte=function(e){var t,n=e.children,r=e.stepNumber,o=e.rightText,a=e.className,i=e.isDisabled,l=i?Yt.noop:e.onClick,s=i?Gt.createElement(Fte,null):Gt.createElement(Mte,null,r);return Gt.createElement(Bte,{onClick:l,rightText:o,leftIcon:s,containerClassName:cG()("TutorialGroupItem_root_oxka6",a,(t={},t.TutorialGroupItem_disabledItem_t6zKt=i,t)),isDisabled:i},n)},Hte=(0,Qr.getTranslation)("@boosty/common/components.TutorialProgress.components.TutorialGroupList"),Wte=function(e){var t=e.groups,n=e.stepsCompleteStatus,r=e.onGroupClick;return Gt.createElement("div",null,Gt.createElement("div",null,t.map((function(e,t){var o=e.items,a=e.isOnlyOneItemRequired,i=e.title,l=o.length,s=o.filter((function(e){return n[e.type]})).length,c=a?s>0:l===s,u="".concat(a&&s?1:s,"/").concat(a?1:l);return Gt.createElement(Gte,{key:t,stepNumber:t+1,onClick:function(){return r(t)},className:"TutorialGroupList_group_z6ww5",isDisabled:c,rightText:u},(0,ii.get)(Hte.tutorial,i))}))),Gt.createElement("div",{className:"TutorialGroupList_descriptionContainer_xWBIC"},Gt.createElement("div",{className:"TutorialGroupList_cupIcon_a2sdw"}),Gt.createElement("span",{className:"TutorialGroupList_descriptionText_fiLsh"},Hte.description)))},Vte=(0,Qr.getTranslation)("@boosty/common/components.TutorialProgress.components.TutorialHeader"),jte=function(e){var t=e.percent;return Gt.createElement("div",{className:"TutorialHeader_root_YF2CQ"},Gt.createElement("div",{className:"TutorialHeader_title_OotIW"},Gt.createElement("span",null,Vte.progress),Gt.createElement("span",null,t,"%")),Gt.createElement(LM,{percent:t}))},zte=function(e){var t,n,r=e.children,o=e.isCompleted,a=e.className,i=e.onClick;return Gt.createElement(Bte,{onClick:i,containerClassName:cG()(a,(t={},t.TutorialStepItem_itemDisabled_QuyIN=o,t)),hideRightBlock:o,leftIcon:Gt.createElement(pB,{glyph:hB.lc4,className:cG()("TutorialStepItem_star_Kdt68",(n={},n.TutorialStepItem_starCompleted_KDzZb=o,n))}),isDisabled:o},r)};const Yte={arrow:"TutorialStepsList_arrow_KgslV",title:"TutorialStepsList_title_Jyu3R",titleLeft:"TutorialStepsList_titleLeft_Zm65T",step:"TutorialStepsList_step_WMIWl",bestPractices:"TutorialStepsList_bestPractices_R94qc",videoContainer:"TutorialStepsList_videoContainer_bHm9y",video:"TutorialStepsList_video__jgfa",videoCreation:"TutorialStepsList_videoCreation_eV2t3",videoSubscriptions:"TutorialStepsList_videoSubscriptions_Jw4ZT",videoMonetization:"TutorialStepsList_videoMonetization_gRjTj",videoPosts:"TutorialStepsList_videoPosts_PAX2b",videoPayout:"TutorialStepsList_videoPayout_kMuts",videoDuration:"TutorialStepsList_videoDuration_og6xr",playIcon:"TutorialStepsList_playIcon_j0Izf",fadeIn:"TutorialStepsList_fadeIn_DFndE"};var Kte,qte,Xte=(0,Qr.getTranslation)("@boosty/common/components.TutorialProgress.components.TutorialStepsList"),Qte=pj((function(e){var t=e.setActiveStep,n=e.stepsCompleteStatus,r=e.group,o=r.title,a=r.items,i=r.videos,l=r.isOnlyOneItemRequired,s=e.onTitleClick,c=Gf().blogUrl,u=Mf(),d=a.filter((function(e){return n[e.type]})).length,f="".concat(d,"/").concat(l?1:a.length),m=nr().locale===ce.RU;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:Yte.title,onClick:s},Gt.createElement("div",{className:Yte.titleLeft},Gt.createElement(pB,{glyph:hB.y9O,className:Yte.arrow}),(0,ii.get)(Xte.tutorial,o)),Gt.createElement("div",null,f)),Gt.createElement("div",null,a.map((function(e,r){var o=(0,Yt.getParametrizedUrl)(ir.BLOG_TUTORIAL_OFFERS,{blogUrl:c});return Gt.createElement("div",{key:r,className:Yte.step},Gt.createElement(zte,{key:r,isCompleted:n[e.type],onClick:function(){return function(e){var n=e.url,r=e.type;if(t(r),n){var o=(0,Yt.getParametrizedUrl)(n,{blogUrl:c});u(o)}}(e)}},(0,ii.get)(Xte.tutorial,e.title)),e.type===ln.ADD_LEVEL&&Gt.createElement(cM,{to:o,className:Yte.bestPractices},Xte.bestPractices))}))),m&&Gt.createElement("div",null,i.map((function(e,t){var n=e.url,r=e.duration,o=e.background;return Gt.createElement("div",{key:t,className:Yte.videoContainer},Gt.createElement(cM,{to:n,target:"_blank",rel:"noopener noreferrer"},Gt.createElement("div",{className:cG()(Yte.video,Yte["video".concat((0,Yt.strCapitalize)(o))])},Gt.createElement(pB,{glyph:hB.BHy,className:Yte.playIcon}),Gt.createElement("div",{className:Yte.videoDuration},r))))}))))})),Jte=(0,Vt.$j)((function(e,t){var n={};return t.scenario.forEach((function(t){return t.items.forEach((function(t){var r=YR[t.type];r&&(n[t.type]=r(e))}))})),{stepsCompleteStatus:n}}),(function(e){return{actions:(0,ET.DE)({finishTutorial:fg.action},e)}}))(pj((function(e){var t=e.activeStep,n=e.scenario,r=e.stepsCompleteStatus,o=e.removeActiveStep,a=e.actions.finishTutorial,i=(0,Vt.v9)(XO).blogUrl,l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),s=l[0],c=l[1],u=function(){var e=n.reduce((function(e,t){var n=t.isOnlyOneItemRequired,o=t.items;return n?{total:e.total+1,completed:e.completed+Number(o.some((function(e){return r[e.type]})))}:{total:e.total+o.length,completed:e.completed+o.filter((function(e){return r[e.type]})).length}}),{total:0,completed:0}),t=e.total,o=e.completed;return Math.round(o/t*100)},d=100===u();return(0,Gt.useEffect)((function(){t&&o()}),[r[t]]),Gt.createElement(qB,{className:"TutorialProgress_card_uZkaE"},Gt.createElement(jte,{percent:u()}),null==s&&!d&&Gt.createElement(Wte,{groups:n,stepsCompleteStatus:r,onGroupClick:c}),null!=s&&!d&&Gt.createElement(Qte,{stepsCompleteStatus:r,group:n[s],onTitleClick:function(){return c(null)}}),d&&Gt.createElement(Dte,{finishTutorial:a,blogUrl:i}))}))),Zte=pj((function(e){var t=e.className,n=e.activeStep,r=e.step,o=(0,Gt.useRef)(null),a=n===r;return(0,Gt.useEffect)((function(){n===r&&o.current.scrollIntoView(Zd())}),[n]),Gt.createElement("div",{className:t,ref:o},Gt.createElement($B,{isAnimated:a},e.children))})),$te=((Kte={})[Me.BEHANCE]={className:"SocialLinkIcon_iconBehance_JPB76",glyph:hB.hyV},Kte[Me.DRIBBBLE]={className:"SocialLinkIcon_iconDribbble_g6Ezl",glyph:hB.boB},Kte[Me.FB]={className:"SocialLinkIcon_iconFb_z7CFy",glyph:hB.a0s},Kte[Me.INSTAGRAM]={className:"SocialLinkIcon_iconInstagram_fG2cr",glyph:hB.xAz},Kte[Me.OK]={className:"SocialLinkIcon_iconOk_FzShJ",glyph:hB.Fvb},Kte[Me.SOUNDCLOUD]={className:"SocialLinkIcon_iconSoundCloud_roQJm",glyph:hB.l2j},Kte[Me.TELEGRAM]={className:"SocialLinkIcon_iconTelegram_UCsL7",glyph:hB.S$n},Kte[Me.TIKTOK]={className:"SocialLinkIcon_iconTikTok_blymW",glyph:hB.c2c},Kte[Me.TWITCH]={className:"SocialLinkIcon_iconTwitch_YYbhK",glyph:hB.z$6},Kte[Me.TWITTER]={className:"SocialLinkIcon_iconTwitter_Cf3ot",glyph:hB.svP},Kte[Me.VK]={className:"SocialLinkIcon_iconVk_pGyPz",glyph:hB.LuJ},Kte[Me.YOUTUBE]={className:"SocialLinkIcon_iconYoutube_PtO9j",glyph:hB.iQP},Kte[Me.WEBSITE]={className:"SocialLinkIcon_iconWebSite_vBiKr",glyph:hB.OBP},Kte),ene=function(e){var t=e.className,n=e.type,r=$te[n];return r?Gt.createElement(pB,{glyph:r.glyph,className:fB()("SocialLinkIcon_icon_O95r6",r.className,t)}):null},tne=function(e){var t=e.className,n=e.socialLinks;return Gt.createElement("div",{className:fB()("SocialLinks_block_MtS_K",t)},(Mr()?n.filter((function(e){return!xr.includes(e.type)})):n).map((function(e,t){return Gt.createElement(cM,{key:t,className:"SocialLinks_link_rmYkN",target:"_blank",rel:"noopener noreferrer",to:e.url,onClick:function(){return t=e,void bd.log.blog.socialLinkClick(t);var t}},Gt.createElement(ene,{type:e.type,className:"SocialLinks_icon_FKwaA"}))})))},nne=(0,Qr.getTranslation)("@boosty/common/components.UserCard"),rne=function(e){var t,n,r,o=e.className,a=e.hasAvatar,i=e.avatar,l=e.onEditAvatar,s=e.name,c=e.linkToBlog,u=e.blogFollowers,d=e.socialLinks,f=e.isEditable,m=e.isMinified,p=e.isFromFeed,h=f&&Boolean(l),v=Bo({url:i,width:225,height:280}),g=Array.isArray(d)&&d.length>0;return Gt.createElement(qB,{className:cG()("UserCard_root_Hyf67",o)},Gt.createElement("div",{className:cG()("UserCard_avatarContainer_NniTA",(t={},t.UserCard_avatarContainerEditable_X_FSi=h,t),(n={},n.UserCard_minified_GPpAn=m,n),(r={},r.UserCard_empty_pHBPN=!a,r)),onClick:l},Gt.createElement(cM,{to:c},a?Gt.createElement("div",{itemScope:!0,itemType:"https://schema.org/ImageObject",className:"UserCard_avatarWrapper_gnPyp"},Gt.createElement("meta",{itemProp:"description",content:s}),Gt.createElement("img",{className:"UserCard_avatar_wLeK2",src:v,alt:s,itemProp:"contentUrl"})):Gt.createElement("div",{className:"UserCard_emptyAvatar_PBeQw"})),h&&Gt.createElement("div",{className:"UserCard_editAvatar_ZdB8d"},Gt.createElement(pB,{glyph:hB.LjT,className:"UserCard_camera_QdvUN"}),Gt.createElement("span",{className:"UserCard_editText_xRDJ4"},nne.refreshPhoto))),m&&Gt.createElement("div",{className:"UserCard_authorName_a8qEj"},s),u,g&&Gt.createElement(tne,{socialLinks:d,className:"UserCard_socialLinks_cPM1p"}),m&&Gt.createElement("div",{className:"UserCard_returnButtonContainer_PhP3n"},Gt.createElement(cM,{to:c},Gt.createElement(FB,{className:cG()("UserCard_returnButton_HzOhr",p&&"UserCard_notColoured_Elcse")},!p&&Gt.createElement(pB,{className:"UserCard_arrowIcon_aMDqI",glyph:hB.D6v}),Gt.createElement("span",null,nne.linkToBlog)))))};!function(e){e.ROOT="ROOT",e.NEW_POST_BUTTON="NEW_POST_BUTTON",e.NEW_STREAM_BUTTON="NEW_STREAM_BUTTON",e.SHARE_DONATION_LINK="SHARE_DONATION_LINK"}(qte||(qte={}));const one="ShareDonationLink_icon_oc6sH";var ane=(0,Qr.getTranslation)("@boosty/common/containers.BlogWrapper.components.ShareDonationLink"),ine=function(){var e=jG().showAlert,t=WV(),n=t.openDonationPayment,r=t.getDonationLink;return Gt.createElement("div",{className:"ShareDonationLink_root_Fn50L"},Gt.createElement("p",{className:"ShareDonationLink_title_vsFuN"},ane.title),Gt.createElement("p",{className:"ShareDonationLink_text_kc5Yo"},ane.text),Gt.createElement("div",{className:"ShareDonationLink_actions_gE7_S"},Gt.createElement(VB,{onClick:function(){Fr("".concat(window.location.origin).concat(r()),(function(){return e({type:p.SUCCESS,text:ane.copySuccess})}))},className:"ShareDonationLink_copyButton_cYoGU"},Gt.createElement(pB,{glyph:pk.vUr,className:cG()(one,"ShareDonationLink_iconCopy_oAAxb")}),Gt.createElement("span",{className:"ShareDonationLink_copyText_ZtYap"},ane.copyLink)),Gt.createElement(VB,{onClick:function(){n({isShare:!0})}},Gt.createElement(pB,{glyph:pk.n1O,className:one}))))};const lne={dots:"ExtraActionsMenu_dots_kiw3U",dotsIcon:"ExtraActionsMenu_dotsIcon_N_K_T",dotsIconContainer:"ExtraActionsMenu_dotsIconContainer_u1LDq",fadeIn:"ExtraActionsMenu_fadeIn_aHf_w"};var sne=(0,Qr.getTranslation)("@boosty/common/containers.BlogWrapper.components.ExtraActionsMenu"),cne=function(e){var t=e.className,n=e.children,r=e.onReportBlog,o=void 0===r?Yt.noop:r,a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),i=a[0],l=a[1],s=Gf().blogUrl,c=bk(s).canReportBlog;return Gt.createElement(H0,{iconGlyph:hB.GyD,classNames:{root:cG()(lne.container,t),icon:lne.dotsIcon,button:lne.dotsIconContainer}},c&&Gt.createElement(W0,{text:i?sne.reportSent:sne.report,onClick:function(e){e.preventDefault(),i||(o(),l(!0))}}),n)},une=function(){return une=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},une.apply(this,arguments)},dne=(0,Qr.getTranslation)("@boosty/common/containers.BlogWrapper.desktop.components.ExtraActionsMenu"),fne=function(e){var t=e.ownerId,n=jG().showAlert,r=Ck().isModerator;return Gt.createElement(cne,une({},e),r&&Gt.createElement(c$.CopyToClipboard,{text:t.toString(),onCopy:function(e,t){n(t?{type:p.SUCCESS,text:"".concat(dne.copyUserIdSuccess," (").concat(e,")")}:{type:p.ERROR,text:"".concat(dne.copyUserIdError," (").concat(e,")")})}},Gt.createElement(W0,{text:dne.copyUserId})))},mne=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},pne=(0,Qr.getTranslation)("@boosty/common/containers.BlogWrapper.desktop.components.Title"),hne=function(e){var t,n=mne((0,Gt.useState)(e.title),2),r=n[0],o=n[1],a=mne((0,Gt.useState)(!1),2),i=a[0],l=a[1],s=(0,Vt.I0)(),c=(0,Vt.v9)(Hw),u=(0,Vt.v9)(jw),d=e.title||pne.defaultTitle;(0,Gt.useEffect)((function(){u.isFetched&&m()}),[u]);var f=function(){var e=c.blogUrl,t=c.description;s((0,dm.Ax)(ty.action)({blogUrl:e,blog:{title:r.trim(),description:t}}))},m=function(){l(!1)};return Gt.createElement("div",{className:"Title_root_VarBj"},i?Gt.createElement(Sx,{className:"Title_form_RJBJj"},Gt.createElement(Zx,{value:r,className:"Title_inputBlock_w2NrI",classNameInput:"Title_input_Sahdc",autoFocus:!0,limit:50,onChange:function(e){o(e.target.value)},onKeyDown:function(e){e.key===ae.ENTER?f():e.key===ae.ESCAPE&&m()},onBlur:function(){f()}}),Gt.createElement(FB,{className:"Title_button_OlsSu"},pne.save)):Gt.createElement("div",{className:cG()("Title_textContainer_r_oMW",(t={},t.Title_textContainerEditable_aZ3SF=e.isEditEnabled,t)),onClick:function(){e.isEditEnabled&&(o(e.title),l(!0))}},Gt.createElement("span",{className:"Title_text_VJqcZ"},d),e.isEditEnabled&&Gt.createElement(Zte,{step:ln.ADD_TITLE},Gt.createElement(pB,{className:"Title_icon_lyAI3",glyph:hB.U3W}))))};const vne="Cover_name_h70ZC";var gne=(0,Qr.getTranslation)("@boosty/common/containers.BlogWrapper.desktop.components.Cover"),yne=function(e){var t=e.id,n=e.name,r=e.coverUrl,o=e.title,a=e.linkToBlog,i=e.isEditEnabled,l=e.onReportBlog,s=jG().showAlert,c=Gf(),u=c.blogUrl,d=c.postId,f=(0,Vt.I0)(),m=(0,Vt.v9)(Yw),h=(0,Vt.v9)(Uw),v=bk(u).canReportBlog,g=Bo({url:r,height:240}),y=o||i,_=d&&h.find((function(e){return e.id===d})),E=Boolean(null==_?void 0:_.title);return(0,Gt.useEffect)((function(){m.isFetched&&s({type:p.SUCCESS,text:gne.success}),m.error&&s({type:p.ERROR,text:gne.error})}),[m]),Gt.createElement("div",{className:"Cover_root_G8_rZ"},Gt.createElement("div",{className:"Cover_coverContainer_NCrwc"},r?Gt.createElement("img",{src:g,className:"Cover_cover_7DygB",alt:(0,Qr.getParametrizedText)(gne.coverAlt,{name:n})}):Gt.createElement("div",{className:"Cover_emptyCover_pyZqt"})),Gt.createElement("div",{className:"Cover_content_COn6b"},Gt.createElement("div",{className:"Cover_info_jTwUQ"},Gt.createElement(cM,{to:a},d&&E?Gt.createElement("div",{className:vne},n):Gt.createElement("h1",{className:vne},n)),y&&Gt.createElement(hne,{title:o,isEditEnabled:i}),v&&Gt.createElement(fne,{ownerId:t,onReportBlog:l,className:"Cover_dots_pLQxn"})),i&&Gt.createElement("div",{className:"Cover_changeContainer_pgWxS"},Gt.createElement(HB,{className:"Cover_changeButton_gt343"},Gt.createElement("label",{className:"Cover_changeLabel_Sx3Gt"},Gt.createElement("input",{id:"CoverChangeFile",className:"Cover_changeFile_iUAHY",type:"file",accept:"image/*",onChange:function(e){return void 0,void 0,n=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return(t=e.target.files[0])?[4,Qd(t)]:[3,2];case 1:(function(e){f((0,dm.Ax)(ey.action)({blogUrl:u,file:e}))})(n.sent().file),n.label=2;case 2:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n}}),gne.change),Gt.createElement(Zte,{step:ln.ADD_COVER,className:"Cover_tutorialCircles_wo6cL"})))))},_ne=(0,Qr.getTranslation)("@boosty/common/components.ExternalAppsNotification"),Ene=Gt.memo((function(e){var t,n,r,o,a=e.user,i=e.levelHasDiscord,l=e.levelHasTelegram,s=[{name:"discord",icon:hB.tj4,needToConfigure:i&&!(null===(n=null===(t=null==a?void 0:a.externalApps)||void 0===t?void 0:t.discord)||void 0===n?void 0:n.hasAccount)},{name:"telegram",icon:hB.PVw,needToConfigure:l&&!(null===(o=null===(r=null==a?void 0:a.externalApps)||void 0===r?void 0:r.telegram)||void 0===o?void 0:o.hasAccount)}].filter((function(e){return e.needToConfigure})),c=s.map((function(e){return _ne[e.name]})).join(" ".concat(_ne.and," "));if(!s.length)return null;var u=s.length>1?_ne.them:_ne.it;return Gt.createElement(qB,{className:"ExternalAppsNotification_root_sYmRG"},Gt.createElement("span",null,(0,Qr.getReactText)((0,Qr.getParametrizedText)(_ne.notification,{apps:c,pronoun:u}),{Link:function(e){var t=e.text;return Gt.createElement(cM,{to:ir.SETTINGS_EXTERNAL_APP,className:"ExternalAppsNotification_connect_oOo20"},t)}})),Gt.createElement("div",{className:"ExternalAppsNotification_iconsContainer_WJeJl"},s.map((function(e){return e.needToConfigure&&Gt.createElement(pB,{key:e.name,glyph:e.icon,className:"ExternalAppsNotification_icon_HWBsj"})}))))}));Ene.displayName="ExternalAppsNotificationComponent";var bne=(0,bw.zB)({user:XO,levelHasTelegram:PL,levelHasDiscord:LL}),Sne=(0,Vt.$j)(bne)(Ene),Tne=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ine=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tne(t,e),t.prototype.render=function(){var e=this.props,t=e.classNames,n=e.text,r=e.onCopy;return Gt.createElement("div",{className:fB()("CopyInput_container_v8u5I",t.container)},Gt.createElement("input",{type:"text",value:n,className:"CopyInput_input_ZWPVn",readOnly:!0}),Gt.createElement(c$,{text:n,onCopy:r},Gt.createElement("div",{className:"CopyInput_copy_hUTSG"},Gt.createElement(pB,{glyph:hB.vUr,className:fB()("CopyInput_copyIcon_J5BzH",t.copyIcon)}))))},t.defaultProps={onCopy:Yt.noop,classNames:{}},t}(Gt.PureComponent);const Nne="ShareButton_active_awBXx";var Cne=function(){return Cne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cne.apply(this,arguments)},wne=function(e){var t,n=e.className,r=e.isBig,o=e.children,a=e.onClick;return Gt.createElement("div",{className:fB()("ShareButton_root_C7wax",n,(t={},t.ShareButton_big_dLmG5=r,t)),onClick:a},o)},One=function(e){switch(e.type){case De.VK:return Gt.createElement(Ane,Cne({},e));case De.FB:return Gt.createElement(Pne,Cne({},e));case De.OK:return Gt.createElement(Lne,Cne({},e));case De.TWITTER:return Gt.createElement(Rne,Cne({},e));default:return null}},Ane=function(e){var t;return Gt.createElement(wne,Cne({},e,{className:fB()(e.className,"ShareButton_vk_Qhnvk")}),Gt.createElement(pB,{glyph:hB.wvr,className:fB()("ShareButton_vkIcon_APgf7",(t={},t.ShareButton_vkIconBig_JF_SF=e.isBig,t))}))},Pne=function(e){var t;return Gt.createElement(wne,Cne({},e,{className:fB()(e.className,"ShareButton_fb_v95WJ")}),Gt.createElement(pB,{glyph:hB.JUU,className:fB()("ShareButton_fbIcon_y1Qkb",(t={},t.ShareButton_fbIconBig_mZyDu=e.isBig,t))}))},Lne=function(e){var t;return Gt.createElement(wne,Cne({},e,{className:fB()(e.className,"ShareButton_ok_EpeLq")}),Gt.createElement(pB,{glyph:hB.I84,className:fB()("ShareButton_okIcon_LLvhx",(t={},t.ShareButton_okIconBig__LDZI=e.isBig,t))}))},Rne=function(e){var t;return Gt.createElement(wne,Cne({},e,{className:fB()(e.className,"ShareButton_twitter_T4Wz2")}),Gt.createElement(pB,{glyph:hB.JDv,className:fB()("ShareButton_twitterIcon_EmLAZ",(t={},t.ShareButton_twitterIconBig_Mxwl0=e.isBig,t))}))},kne=function(e){var t,n,r=e.className,o=e.isBig,a=e.isActive,i=e.onClick;return Gt.createElement(wne,{isBig:o,onClick:i,className:fB()(r,"ShareButton_qr_lFJJM",(t={},t[Nne]=a,t))},Gt.createElement(pB,{glyph:hB.LcT,className:fB()("ShareButton_qrIcon_p4dVT",(n={},n.ShareButton_qrIconBig_uFSg2=o,n))}))},Dne=function(e){var t,n=e.className,r=e.isBig,o=e.isActive,a=e.onClick;return Gt.createElement(wne,{isBig:r,onClick:a,className:fB()(n,"ShareButton_link_ZtaCE",(t={},t[Nne]=o,t))},Gt.createElement(pB,{glyph:hB.JHz,className:"ShareButton_linkIcon_x0_Kr"}))};const Une={dropdownButtonIcon:"ShareDropdown_dropdownButtonIcon_djS3m",container:"ShareDropdown_container_GZHim",dropdownButton:"ShareDropdown_dropdownButton_e4aiH",dropdownButtonActive:"ShareDropdown_dropdownButtonActive_HmGIm",dropdownContainer:"ShareDropdown_dropdownContainer_DpktR",fadeIn:"ShareDropdown_fadeIn_EpPYF",dropdownContainerShiftedUp:"ShareDropdown_dropdownContainerShiftedUp_nff4G",dropdownContainerLeft:"ShareDropdown_dropdownContainerLeft_Nx8bm",dropdownContainerRight:"ShareDropdown_dropdownContainerRight_s5CIC",dropdownContent:"ShareDropdown_dropdownContent_MdMOg",copyInput:"ShareDropdown_copyInput_UCDvi",shareButtons:"ShareDropdown_shareButtons_K3UTJ",qrBlock:"ShareDropdown_qrBlock_lxhw6",qrBlockBack:"ShareDropdown_qrBlockBack_rVxhu",qrBlockBackIcon:"ShareDropdown_qrBlockBackIcon_XQnDe",qrButton:"ShareDropdown_qrButton_dDJtL"};var Bne=function(){return Bne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bne.apply(this,arguments)},xne=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Mne=function(e){var t,n,r,o,a,i=e.classNames,l=void 0===i?{}:i,s=e.referrers,c=e.dropdownAlign,u=void 0===c?yx.RIGHT:c,d=e.ButtonComponent,f=e.topElement,m=e.onShareClick,p=void 0===m?Yt.noop:m,h=e.onSharesDrop,v=void 0===h?Yt.noop:h,g=e.onSharesCollapse,y=void 0===g?Yt.noop:g,_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["classNames","referrers","dropdownAlign","ButtonComponent","topElement","onShareClick","onSharesDrop","onSharesCollapse"]),E=xne((0,Gt.useState)(!1),2),b=E[0],S=E[1],T=xne((0,Gt.useState)(!1),2),I=T[0],N=T[1],C=xne((0,Gt.useState)(!1),2),w=C[0],O=C[1],A=(0,Gt.useRef)(null),P=(0,Gt.useRef)(null),L=nr().allowedSocialMediaShares;a=void 0===L?function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([De.VK,De.OK,De.TWITTER],xne(Mr()?[]:[De.FB]),!1):Object.keys(L).filter((function(e){var t=Boolean(L[e]);return e===De.FB?!Mr()&&t:t}));var R=function(){return O(!1)},k=function(e){var t=_.url,n=_.params,r=void 0===n?{}:n,o=_.query;return ei(t,r,Bne(Bne({},void 0===o?{}:o),{share:e}))},D=function(e){switch(e){case De.QR:O(!0);break;case De.LINK:break;default:Ea(Sa(e,k(s[e])))}p(e)},U=function(){I||B()},B=function(){N(!0),v()},x=function(){N(!1),R(),y()};return(0,Gt.useEffect)((function(){if(I){var e=P.current,t=e.getBoundingClientRect().height,n=e.parentElement.getBoundingClientRect().bottom;S(window.innerHeight<=n+t)}}),[I]),Gt.createElement("div",{ref:A,className:fB()(Une.container,l.container)},d?Gt.createElement(d,{onClick:U}):Gt.createElement("button",{className:fB()(Une.dropdownButton,(t={},t[Une.dropdownButtonActive]=I,t)),onClick:U},Gt.createElement(pB,{className:Une.dropdownButtonIcon,glyph:hB.FOM})),I&&Gt.createElement("div",{ref:P,className:fB()(Une.dropdownContainer,(n={},n[Une.dropdownContainerShiftedUp]=b,n),(r={},r[Une.dropdownContainerLeft]=u===yx.LEFT,r),(o={},o[Une.dropdownContainerRight]=u===yx.RIGHT,o),l.containerDropdown)},Gt.createElement(Dx,{trigger:gx.CLICK,align:u,onClickOutside:function(){setTimeout((function(){x()}))}},Gt.createElement("div",{className:Une.dropdownContent},Boolean(f)&&Gt.createElement("div",{onClick:function(){x()}},f),!w&&Gt.createElement(Gt.Fragment,null,s[De.LINK]&&Gt.createElement(Ine,{classNames:{container:fB()(Une.copyInput,l.containerCopyInput),copyIcon:Une.copyIcon},text:k(s[De.LINK]),onCopy:function(){return D(De.LINK)}}),Gt.createElement("div",{className:Une.shareButtons},a.map((function(e){return Gt.createElement(One,{key:e,type:e,onClick:function(){return D(e)}})})),s[De.QR]&&Gt.createElement(kne,{isActive:!1,onClick:function(){return D(De.QR)}}))),w&&Gt.createElement("div",{className:Une.qrBlock,onClick:R},Gt.createElement("div",{className:Une.qrBlockBack},Gt.createElement(pB,{glyph:hB.y9O,className:Une.qrBlockBackIcon})),Gt.createElement(R4,{text:k(s[De.QR]),size:100}))))))},Fne=function(){return Fne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fne.apply(this,arguments)},Gne=function(e){var t=Ra(e),n=t.cover,r=t.description;return{cover:n?Fne(Fne({},n),{url:Bo({url:n.url,width:ze.WIDTH,height:ze.HEIGHT})}):null,description:r}},Hne=function(e){return e.isNext||e.isCurrent&&null===e.offTime},Wne=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Vne=(0,Qr.getTranslation)("@boosty/common/components.SubscriptionLevelsItem.components.Description"),jne={width:"auto",height:"auto"},zne=function(e){var t,n=e.hasTooltip,r=e.description,o=e.className,a=Wne((0,Gt.useState)(!1),2),i=a[0],l=a[1],s=Wne((0,Gt.useState)(!0),2),c=s[0],u=s[1],d=(0,Gt.useRef)(null),f=(0,Gt.useRef)(null),m=Wne((0,Gt.useState)(jne),2),p=m[0],h=m[1],v=(0,Gt.useRef)(null),g=cG()("Description_tooltip_nz097",p.width!==jne.width&&"Description_tooltipAutoWidth_bwv4A"),y=function(e){return Gt.createElement(UM,{innerRef:v},Gt.createElement("div",{style:e?{height:p.height,width:p.width}:null},Gt.createElement(W2,{description:r})))};return(0,Gt.useEffect)((function(){var e=(null==d?void 0:d.current).clientHeight,t=null==f?void 0:f.current,r=t.clientHeight;t.clientWidth||u(!1),c&&n&&r>e&&l(!0)}),[]),c?Gt.createElement("div",{className:cG()(o,"Description_block_Et9rM",(t={},t.Description_withTooltip_oiywe=i,t)),ref:d},Gt.createElement("div",{ref:f,className:"Description_text_hVXQB"},y()),i&&Gt.createElement(Dx,{onTooltipOpen:function(){setTimeout((function(){var e,t=window.innerHeight,n=window.innerWidth,r=v.current,o=null!==(e=null==r?void 0:r.getBoundingClientRect())&&void 0!==e?e:{},a=o.height,i=o.width,l=o.bottom,s=o.right;h({width:s>n?"".concat(i-(s-n)-30,"px"):"auto",height:l>t?"".concat(a-(l-t)-30,"px"):"auto"})}))},onTooltipClose:function(){h(jne)},classNames:{content:g,root:"Description_tooltipContainer_z1s1g"},align:yx.RIGHT,isGlobal:!0,trigger:gx.CLICK,content:y(!0)},Gt.createElement("div",{className:"Description_showMore_PC6So"},Vne.showMore))):null};const Yne="ExternalApps_appIcon_Rmi4_";var Kne=(0,Qr.getTranslation)("@boosty/common/components.SubscriptionLevelsItem.components.ExternalApps"),qne={telegram:hB.PVw,discord:hB.tj4},Xne={discord:r.DISCORD,telegram:r.TELEGRAM},Qne=function(e){return Qo(Xne[e])},Jne=function(e){var t=e.providers,n=e.isSubscribed,r=e.className;return Object.keys(Xne).some(Qne)?Gt.createElement("div",{className:cG()("ExternalApps_root_VhLYt",r)},Gt.createElement("span",{className:"ExternalApps_label_JNHz9"},Kne.label),Object.keys(t).map((function(e){return t[e].isConfigured&&Qne(e)&&Gt.createElement(Dx,{key:e,align:yx.RIGHT,isGlobal:!0,content:Gt.createElement("span",{className:"ExternalApps_appNotice_IvT4k"},"".concat(Kne.notice," ").concat(Kne.externalApps[e]))},n?Gt.createElement(jt.rU,{target:"_blank",to:(0,Yt.getParametrizedUrl)(ir.SETTINGS_EXTERNAL_APP)},Gt.createElement(pB,{glyph:qne[e],className:Yne})):Gt.createElement(pB,{glyph:qne[e],className:Yne}))}))):null},Zne=(0,Qr.getTranslation)("@boosty/common/components.SubscriptionLevelsItem.components.PromoCountersInfo"),$ne=function(e){var t,n=e.promo,r=e.className,o=n.count,a=o.maxActivation,i=o.activation,l=n.endTime,s=Ua(n),c=ka(n),u=null!==a,d=u&&a-i,f=u&&d<i;return Gt.createElement("div",{className:cG()("PromoCountersInfo_root_KuMIo",r)},c&&Gt.createElement(Gt.Fragment,null,(t=n.trial.days,(0,Qr.getReactText)((0,Qr.getParametrizedText)(qr(Zne.trial.duration,t),{count:t}),{Bold:function(e){var t=e.text;return Gt.createElement("span",{className:"PromoCountersInfo_boldText_wQ7Lu"},t)}})),Gt.createElement("br",null)),u&&s&&Gt.createElement(Gt.Fragment,null,(0,Qr.getParametrizedText)(qr(f?Zne.activationsLeft:Zne.discount.subscriptionsLeft,d),{count:d}),Gt.createElement("br",null)),u&&c&&Gt.createElement(Gt.Fragment,null,(0,Qr.getParametrizedText)(qr(f?Zne.activationsLeft:Zne.trial.subscriptionsLeft,d),{count:d}),Gt.createElement("br",null)),l&&(0,Qr.getParametrizedText)(Zne.promoEndDate,{date:go(l,"dd/MMMM")}))};const ere="OwnerPromoInfo_title_siUpJ";var tre=(0,Qr.getTranslation)("@boosty/common/components.SubscriptionLevelsItem.components.OwnerPromoInfo"),nre=function(e){var t,n,r=e.promo,o=r.count.activation,a=r.description,i=r.id,l=r.endTime,s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=Ua(r),f=ka(r),m=l&&(n=vo(l),Math.ceil((n-Number(new Date))/Fn)),p=(0,Vt.I0)(),h=Gf().blogUrl;return Gt.createElement("div",{className:"OwnerPromoInfo_root_PH6BY"},Gt.createElement("div",{className:"OwnerPromoInfo_header_t1y4Y",onClick:function(){u(!c)}},d&&Gt.createElement("div",{className:ere},(0,Qr.getParametrizedText)(tre.discountTitle,{discount:r.discount.percent})),f&&Gt.createElement("div",{className:ere},(0,Qr.getReactText)((0,Qr.getParametrizedText)(qr(tre.trialTitle,r.trial.days),{days:r.trial.days}),{Br:function(){return Gt.createElement("br",null)}})),Gt.createElement(pB,{glyph:hB.y9O,className:cG()("OwnerPromoInfo_arrow_b0Lec",(t={},t.OwnerPromoInfo_arrowRotated_ln9HA=c,t))})),Gt.createElement("div",{className:"OwnerPromoInfo_counts_K5uAD"},m&&(0,Qr.getParametrizedText)(qr(tre.counts.days,m),{count:m}),(0,Qr.getParametrizedText)(qr(tre.counts.activations,o),{count:o})),c&&Gt.createElement("div",{className:"OwnerPromoInfo_content_Wa7bo"},a&&Gt.createElement("div",{className:"OwnerPromoInfo_description_CKqei"},a),Gt.createElement("div",{className:"OwnerPromoInfo_buttonsBlock__YAJf"},Gt.createElement(HB,{className:"OwnerPromoInfo_finishPromoButton_MIV1H",onClick:function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,p((0,dm.Ax)(aS.action)({blogUrl:h,promoId:i}))];case 1:return e.sent(),[4,p((0,dm.Ax)(qp.action)({blogUrl:h,showFree:!0}))];case 2:return e.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t}},tre.finish),Gt.createElement(cM,{to:(0,Yt.getParametrizedUrl)(ir.BLOG_STATISTICS,{blogUrl:h}),target:"_blank",className:"OwnerPromoInfo_statsButton_kcH1p"},Gt.createElement(pB,{glyph:hB.BWt,className:"OwnerPromoInfo_statsIcon_tKOEs"}))),Gt.createElement($ne,{promo:r})))},rre=(0,Qr.getTranslation)("@boosty/common/components.SubscriptionLevelsItem.components.Price"),ore=function(e){var t=e.price,n=e.shouldShowInDefaultCurrency,r=e.discount,o=e.className,a=(0,Vt.v9)(EA),i=nr().currencies.default,l=n?i:a;return Gt.createElement("div",{className:cG()("Price_root_YCs0i",o)},r&&Gt.createElement("span",{className:"Price_priceWithoutDiscount_MTCgG"},Vr({amount:t,currency:l,useGrouping:!0})),(0,Qr.getParametrizedText)(rre.price,{price:Vr({amount:r?r.price:t,currency:l,useGrouping:!0})}),r&&Gt.createElement("div",{className:"Price_discount_EoMyz"},r.percent,"%"))};const are="SubscriptionLevelsItem_subscribeButton_bybIb";var ire,lre=(0,Qr.getTranslation)("@boosty/common/components.SubscriptionLevelsItem.components.SubscribeButton"),sre=function(e){var t,n=e.level,r=e.hasHover,o=e.isTrialPromo,a=e.subscribe,i=e.renderActiveTo,l=function(){a(n.id)};return n.isCurrent&&null!=n.offTime?Gt.createElement(FB,{isActivated:!0,className:cG()(are,"SubscriptionLevelsItem_subscribeButtonDisabled_BFbAu"),onClick:l},r&&i(),Gt.createElement("span",{className:"SubscriptionLevelsItem_subscribeButton_hoverText_c3CEJ"},lre.resubscribe)):n.isNext||n.isCurrent&&null===n.offTime?Gt.createElement(FB,{isDisabled:!0,isActivated:!0,className:are},lre.alreadySubscribed):Gt.createElement(FB,{className:cG()(are,(t={},t.SubscriptionLevelsItem_trialButton_wJM7A=o,t)),onClick:l},o?lre.tryFree:lre.subscribe)},cre=(0,Qr.getTranslation)("@boosty/common/components.SubscriptionLevelsItem"),ure=((ire={})[De.LINK]=ke.SUBSCRIPTION_LEVEL_LINK,ire[De.QR]=ke.SUBSCRIPTION_LEVEL_QR,ire),dre=function(e){var t,n,r,o=e.level,a=e.classNames,i=e.isShareEnabled,l=void 0===i||i,s=e.isEditEnabled,c=e.subscribe,u=e.onSubscriptionLevelLinkCopied,d=e.onTrialButtonClick,f=e.hasHover,m=e.haveDescriptionTooltip,p=e.avatarUrl,h=nr().currencies.default,v=Gf(),y=v.blogUrl,_=v.postId,E=bk(y).canEdit,S=qU().banStatus,T=YU({banStatus:S}).shouldShowBanDisclaimer,I=(0,Vt.v9)(Hw),N=(0,Vt.v9)(EA),C=E?h:N,w=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(Gne(o)),2),O=w[0],A=w[1],P=gi(I),L=(0,Gt.useMemo)((function(){return P?o.promos.find((function(e){return!e.isFinished})):null}),[o.promos]),R=!E&&L&&ka(L);(0,Gt.useEffect)((function(){A(Gne(o))}),[o]);var k=function(){var e=f?"SubscriptionLevelsItem_subscribeButton_defaultText_SS16A":"SubscriptionLevelsItem_activeTo_XiCr5";return Gt.createElement("span",{className:e},cre.activeTo[f?"onButton":"inBlock"]," ",yo(o.offTime))},D=(0,Yt.getParametrizedUrl)(ir.BLOG_SUBSCRIPTION_LEVELS_EDIT,{blogUrl:y,levelId:o.id}),U=Boolean(c),B=Boolean(D)&&s,x=E&&l&&!T,M=B||x,F=!E&&!s&&U&&!T,G=o.isCurrent&&null!=o.offTime&&!f,H=Object.values(o.externalApps).some((function(e){return e.isConfigured}));return Gt.createElement(Hd.Provider,{value:b.SUBSCRIPTION_LEVEL_ITEM},Gt.createElement("div",{className:cG()("SubscriptionLevelsItem_root_PZSzU",null==a?void 0:a.root,(t={},t.SubscriptionLevelsItem_noControls_aG_YZ=E&&!M,t))},Gt.createElement("div",{className:"SubscriptionLevelsItem_content_FHccb"},O.cover&&Gt.createElement("div",{className:"SubscriptionLevelsItem_cover_pGl8p"},Gt.createElement("img",{className:"SubscriptionLevelsItem_coverImg_tlIP3",src:O.cover.url})),Gt.createElement("h3",{className:"SubscriptionLevelsItem_name_wOi_w"},o.name),Gt.createElement(ore,{price:o.currencyPrices[C],shouldShowInDefaultCurrency:E,discount:L&&Ua(L)&&L.discount,className:"SubscriptionLevelsItem_price_dw4UQ"}),Boolean(null===(r=O.description)||void 0===r?void 0:r.length)&&Gt.createElement(zne,{className:"SubscriptionLevelsItem_description_s3fr4",description:O.description,hasTooltip:m}),H&&Gt.createElement("div",{className:"SubscriptionLevelsItem_bottomPanel_siBQp"},Gt.createElement(Jne,{isSubscribed:Hne(o),providers:o.externalApps,className:"SubscriptionLevelsItem_externalApps_Vd4Ft"}))),(G||M||F)&&Gt.createElement("div",{className:"SubscriptionLevelsItem_footer_BRx1G"},G&&k(),M&&Gt.createElement("div",{className:"SubscriptionLevelsItem_control_Gb2Nw"},!B&&!F&&Gt.createElement("div",{className:"SubscriptionLevelsItem_editLinkPlaceholder_qiVAe"}),B&&Gt.createElement(cM,{to:D,className:"SubscriptionLevelsItem_editLink_B5Veo"},cre.edit),x&&Gt.createElement(Mne,{url:ir.BLOG_PURCHASE,params:{blogUrl:y,postId:_,levelId:o.id},query:(n={},n.ssource=Xu.DIRECT,n),dropdownAlign:yx.LEFT,referrers:ure,onShareClick:function(e){e===De.LINK&&u()}})),!E&&(null==L?void 0:L.description)&&Gt.createElement("div",{className:"SubscriptionLevelsItem_promoDescription_EaVhl"},Gt.createElement(PB,{img:p,size:g.XS_PLUS,className:"SubscriptionLevelsItem_promoAvatar_sZcFz"}),L.description),F&&Gt.createElement(sre,{level:o,hasHover:f,isTrialPromo:R,subscribe:function(e){R?d(e,L.id):c(e)},renderActiveTo:k}),!E&&L&&Gt.createElement($ne,{promo:L,className:"SubscriptionLevelsItem_promoCounters_LhRd2"}),E&&L&&Gt.createElement(nre,{promo:L}))))},fre=(0,Qr.getTranslation)("@boosty/common/containers.BlogWrapper.desktop.components.SubscriptionLevelsEmpty"),mre=function(e){var t=nr().locale===ce.RU,n=e.className,r=e.canCreate;return Gt.createElement("div",{className:cG()("SubscriptionLevelsEmpty_root_IscNn",n)},Gt.createElement("div",{className:cG()("SubscriptionLevelsEmpty_picture_rVfXx",t?"SubscriptionLevelsEmpty_pictureRUB_yhxcs":"SubscriptionLevelsEmpty_pictureUSD_vVslb")}),Gt.createElement("div",{className:"SubscriptionLevelsEmpty_text__0Qp6"},r?fre.text.forOwner:fre.text.forOthers))},pre=(0,Qr.getTranslation)("@boosty/common/containers.BlogWrapper.desktop.components.SubscriptionLevels.components.AddSubscriptionLevelButton"),hre=function(e){var t=e.onClick;return Gt.createElement(FB,{className:"AddSubscriptionLevelButton_button_syeQb",onClick:t},pre.add)};const vre={root:"SubscriptionLevels_root_TMl1q",card:"SubscriptionLevels_card_R3MHq",title:"SubscriptionLevels_title_JMzCV",giftIcon:"SubscriptionLevels_giftIcon_RDD2G",giftIconSvg:"SubscriptionLevels_giftIconSvg_k2fc_",empty:"SubscriptionLevels_empty_t3Uht",emptyButtonContainer:"SubscriptionLevels_emptyButtonContainer_Zpyoa",fadeIn:"SubscriptionLevels_fadeIn_JH2Ql"};var gre=(0,Qr.getTranslation)("@boosty/common/containers.BlogWrapper.desktop.components.SubscriptionLevels"),yre=function(e){var t=e.urls,n=t.PURCHASE_GIFT,r=t.TRIAL_ACTIVATION,o=e.items,a=e.contentRef,i=e.canCreate,l=e.isEditEnabled,s=e.avatarUrl,c=e.subscribe,u=e.onAdd,d=void 0===u?Yt.noop:u,f=o.length>0,m=jG().showAlert,h=Mf(),v=xf().state,g=Gf(),y=g.blogUrl,_=g.postId,E=g.mediaType,b=qU().banStatus,S=YU({banStatus:b}).shouldShowBanDisclaimer,T=function(){d()},I=function(){m({type:p.SUCCESS,text:gre.linkCopied})},N=function(e,t){h((0,Yt.getParametrizedUrl)(r,{blogUrl:y,postId:_,mediaType:E,levelId:e,promoId:t}),{state:{isFromFeed:null==v?void 0:v.isFromFeed}})};return Gt.createElement("section",{className:vre.root,ref:a},Gt.createElement(Sne,null),Gt.createElement(qB,{className:vre.card,titleClassName:vre.title,title:Gt.createElement(Gt.Fragment,null,Gt.createElement("h2",null,gre.title),f&&!S&&Gt.createElement(pB,{className:vre.giftIcon,classNameSvg:vre.giftIconSvg,glyph:hB.Lmt,onClick:function(){h((0,Yt.getParametrizedUrl)(n,{blogUrl:y,postId:_,mediaType:E}),{state:{isFromFeed:null==v?void 0:v.isFromFeed}})}}))},f?o.map((function(e){return Gt.createElement(dre,{key:"SubscriptionLevel".concat(e.id),level:e,isEditEnabled:l,classNames:{root:vre.item},hasHover:!0,avatarUrl:s,subscribe:c,onSubscriptionLevelLinkCopied:I,onTrialButtonClick:N})})):Gt.createElement(mre,{canCreate:i,className:vre.empty}),l&&!f&&Gt.createElement("div",{className:vre.emptyButtonContainer},Gt.createElement(Zte,{step:ln.ADD_LEVEL},Gt.createElement(hre,{onClick:T})))),l&&f&&Gt.createElement(hre,{onClick:T}))},_re=function(e,t){return Math.round(100*e/t)},Ere=function(e){var t=e.className,n=e.activeStep,r=e.step,o=(0,Gt.useRef)(null),a=n===r;return(0,Gt.useEffect)((function(){n===r&&o.current.scrollIntoView(Zd())}),[n]),Gt.createElement("div",{ref:o,className:t},Gt.createElement($B,{isAnimated:a},e.children))},bre=(0,Qr.getTranslation)("@boosty/common/containers.Blog.components.Targets.components.TargetItemEmpty"),Sre=function(e){var t=e.activeStep,n=e.onAddTargetClick;return Gt.createElement("div",{className:"TargetItemEmpty_root_n5wD1"},Gt.createElement("div",{className:"TargetItemEmpty_image_QymcC"}),Gt.createElement("div",{className:"TargetItemEmpty_text_Jc45j"},bre.textForOwner),Gt.createElement(Ere,{step:ln.ADD_TARGET,activeStep:t,className:"TargetItemEmpty_targetButton_eq4J5"},Gt.createElement(FB,{className:"TargetItemEmpty_button_z4yVO",onClick:function(){n()}},bre.addTarget)))};const Tre="TargetItemCommon_collectedTextTarget_McKGZ";var Ire,Nre,Cre=(0,Qr.getTranslation)("@boosty/common/containers.Blog.components.Targets.components.TargetItemCommon"),wre=function(e){var t=e.target,n=t.currentSum,r=t.targetSum,o=t.description,a=t.type,i=e.showDefaultCurrency,l=nr().currencies.default,s=a===Ye.MONEY,c=Math.round(100*n/r),u=(0,Yt.getFormattedNumber)(n),d=(0,Yt.getFormattedNumber)(r),f=n>=r,m=(0,Vt.v9)(EA);return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"TargetItemCommon_collected_Ax7e0"},f&&Gt.createElement(pB,{glyph:hB.R$2,className:"TargetItemCommon_iconFinished_wrh_H"}),Gt.createElement("div",{className:"TargetItemCommon_collectedText_boxC2"},Gt.createElement("span",{className:Tre},u," ",Cre.from," "),Gt.createElement("span",{className:Tre},s?Vr({amount:r,currency:i?l:m,useGrouping:!0}):d," "),s?Cre.collectedUnit.money:Cre.collectedUnit.subscribers)),!f&&Gt.createElement(LM,{percent:c,classNames:{root:"TargetItemCommon_progressBarWrapper_vwVhg"}}),Gt.createElement("div",{className:"TargetItemCommon_description_j7lxX"},o))},Ore=(0,Qr.getTranslation)("@boosty/common/containers.Blog.components.Targets.components.TargetItemMoney"),Are=((Ire={})[De.LINK]=ke.TARGET_LINK,Ire),Pre=function(e){var t=e.target.id,n=e.isEditEnabled,r=e.isCreateEnabled,o=e.className,a=e.target,i=e.shareUrl,l=e.shareUrlParams,s=e.onPayToTarget,c=e.onTargetLinkCopied,u=void 0===c?Yt.noop:c,d=e.onEditTarget,f=qU().banStatus,m=YU({banStatus:f}).shouldShowBanDisclaimer,p=a.type===Ye.MONEY,h=!m&&!n&&!a.finishTime&&p,v=!m&&n;return Gt.createElement("div",{className:cG()("TargetItemMoney_root_Rlgve",o)},Gt.createElement(wre,{target:a,showDefaultCurrency:r}),v&&Gt.createElement("div",{className:"TargetItemMoney_control_ztXNZ"},n&&Gt.createElement("span",{className:"TargetItemMoney_link_E5NMC",onClick:function(){d(t)}},Ore.edit),Gt.createElement(Mne,{classNames:{container:"TargetItemMoney_shareDropdown_exYfv"},dropdownAlign:yx.LEFT,url:i,params:l,referrers:Are,onShareClick:function(e){e===De.LINK&&u()}})),h&&Gt.createElement(FB,{onClick:function(){s(t)},className:"TargetItemMoney_subscribeButton_Ixx82"},Ore.pay))};!function(e){e.SUBSCRIBERS_TARGET="subscribersTarget",e.SUBSCRIBERS_TARGET_NEXT_TARGET="subscribersTargetNextTarget",e.SUBSCRIBERS_TARGET_PREVIOUS_TARGET="subscribersTargetPreviousTarget",e.SUBSCRIBERS_TARGET_PAGINATION="subscribersTargetPagination"}(Nre||(Nre={}));var Lre=(0,Qr.getTranslation)("@boosty/common/containers.Blog.components.Targets.components.TargetItemSubscribers"),Rre=oo("TargetItemSubscribers"),kre=function(e){var t,n=e.blogUrl,r=e.targets,o=e.blockClassName,a=e.isEditEnabled,i=e.isCreateEnabled,l=e.onEditTarget,s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(0),2),c=s[0],u=s[1],d=r[c],f=r.length>1,m=function(){var e=r.findIndex((function(e){return 0===e.finishTime||null===e.finishTime}));-1!==e&&u(e)};return(0,Gt.useEffect)((function(){m()}),[]),(0,Gt.useEffect)((function(){m()}),[n,r.length]),Gt.createElement("div",{className:cG()("TargetItemSubscribers_block_Yke46",o),"data-test-id":Rre(Nre.SUBSCRIBERS_TARGET)},d&&Gt.createElement(Gt.Fragment,null,Gt.createElement(wre,{target:d,showDefaultCurrency:i}),f&&Gt.createElement("div",{className:"TargetItemSubscribers_turnBlockContainer_cHD0a"},Gt.createElement(XF,{className:cG()((t={},t.TargetItemSubscribers_turnBlockForAuthor_cP766=i,t)),currentItemIndex:c,itemsLength:r.length,onItemIndexChange:function(e){u(e)},isLooped:!0,testAttrId:{prevButton:Rre(Nre.SUBSCRIBERS_TARGET_PREVIOUS_TARGET),nextButton:Rre(Nre.SUBSCRIBERS_TARGET_NEXT_TARGET)}}),Gt.createElement("div",{className:"TargetItemSubscribers_pagination_hTC2b","data-test-id":Rre(Nre.SUBSCRIBERS_TARGET_PAGINATION)},c+1," ",Lre.from," ",r.length)),a&&Gt.createElement("span",{className:"TargetItemSubscribers_link_fkkse",onClick:function(){var e=r[c].id;l(e)}},Lre.edit)))},Dre=(0,Qr.getTranslation)("@boosty/common/containers.Blog.components.Targets"),Ure=function(e){var t=e.urls,n=e.targets,r=e.isEditEnabled,o=e.isCreateEnabled,a=e.activeStep,i=e.onTargetLinkCopied,l=e.onAddTargetClick,s=Gf(),c=s.blogUrl,u=s.postId,d=s.streamId,f=s.mediaType,m=Mf(),p=xf().state,h=Array.isArray(n)&&n.length>0?function(e){var t;return(t={})[Ye.MONEY]=e.filter((function(e){return e.type===Ye.MONEY})).sort((function(e,t){return _re(t.currentSum,t.targetSum)-_re(e.currentSum,e.targetSum)})).sort((function(e,t){return e.finishTime-t.finishTime})),t[Ye.SUBSCRIBERS]=e.filter((function(e){return e.type===Ye.SUBSCRIBERS})).sort((function(e,t){return e.targetSum-t.targetSum})),t}(n):null,v=Boolean(u),g=Boolean(d),y=Boolean(f),_=h&&h.money.length>0?h.money:null,E=h&&h.subscribers.length>0?h.subscribers:null,b=!_&&!E,S=function(e){m((0,Yt.getParametrizedUrl)(t.EDIT,{blogUrl:c,postId:u,streamId:d,targetId:e,mediaType:f}))},T=function(e){var n=nn.BLOG_FEED;v?n=nn.POST:g?n=nn.STREAM:y&&(n=nn.MEDIA),m((0,Yt.getParametrizedUrl)(t.SINGLE_PAYMENT,{blogUrl:c,postId:v?u:null,streamId:g?d:null,mediaType:y?f:null,paymentPurposeType:Ce.DONATION,paymentPurposeDonationType:V.TARGET,paymentPurposeId:e},{from:n}),{state:p})};return Gt.createElement(qB,{className:"Targets_card_n74s6",titleClassName:"Targets_title_TCCBE",title:Dre.title},_||E?Gt.createElement(Gt.Fragment,null,E&&Gt.createElement(kre,{isEditEnabled:r,isCreateEnabled:o,targets:E,blogUrl:c,onEditTarget:S}),_&&_.map((function(e,n){return Gt.createElement(Pre,{isCreateEnabled:o,isEditEnabled:r,key:n,target:e,shareUrl:null==t?void 0:t.SINGLE_PAYMENT,shareUrlParams:{blogUrl:c,postId:v?u:null,paymentPurposeType:Ce.DONATION,paymentPurposeDonationType:V.TARGET,paymentPurposeId:e.id},shareQuery:{from:v?nn.POST:nn.BLOG_FEED},onPayToTarget:T,onEditTarget:S,onTargetLinkCopied:i})}))):Gt.createElement(Gt.Fragment,null,b&&Gt.createElement(Sre,{onAddTargetClick:l,activeStep:a})))},Bre=(0,Qr.getTranslation)("@boosty/common/containers.BlogWrapper.desktop.components.Targets"),xre=function(e){var t=e.targets,n=e.isEditEnabled,r=e.isCreateEnabled,o=e.urls,a=e.onTargetLinkCopied,i=qU().banStatus,l=YU({banStatus:i}).shouldShowBanDisclaimer,s=vj().activeStep,c=Mf(),u=Gf(),d=u.blogUrl,f=u.postId,m=u.mediaType,p=Array.isArray(t)&&t.length>0,h=function(){c((0,Yt.getParametrizedUrl)(o.ADD,{blogUrl:d,postId:f,mediaType:m}))};return Gt.createElement(Gt.Fragment,null,Gt.createElement(Ure,{activeStep:s,isEditEnabled:n,isCreateEnabled:r,targets:t,urls:o,onAddTargetClick:h,onTargetLinkCopied:a}),n&&!l&&p&&Gt.createElement(FB,{className:"Targets_createTargetButton_z3WNT",onClick:h},Bre.createTargetButton))};const Mre="BlogWrapper_coverless_HqVAn";var Fre,Gre=function(){return Gre=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gre.apply(this,arguments)},Hre=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Wre=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Vre=(0,Qr.getTranslation)("@boosty/common/containers.BlogWrapper.desktop"),jre=oo("BlogWrapper"),zre=function(e){var t,n,o,i,l,s=e.urls,c=e.view,u=e.pagesToKeepPositionBetween,d=e.children,f=nr(),m=f.dialogues.canNotReceiveMessagesUsers,h=f.tips.authorsWhiteList,v=(0,Gt.useRef)(null),g=(0,Gt.useRef)(null),y=(0,Vt.I0)(),_=xf(),E=Gf(),b=E.blogUrl,S=E.postId,T=E.mediaType,I=E.streamId,N=cm(_.pathname).isFeedPage,C=(0,dH.useOverlayPopups)(),w=C.showPopup,O=C.closePopup,A=jG().showAlert,P=Mf(),L=((null==_?void 0:_.state)||{}).isFromFeed,R=Ck(),k=R.isAuthorized,D=R.isTotalBanned,U=R.isModerator,B=bk(b).canCreate,x=(0,Vt.v9)(RL),M=(0,Vt.v9)(Hw),F=(0,Vt.v9)(XO),G=(0,Vt.v9)(zP),H=(0,Vt.v9)(bL),W=(0,Vt.v9)(IL),V=(0,Vt.v9)(cR),j=(0,Vt.v9)(Vw),z=(0,Vt.v9)(pR),Y=qU().banStatus,K=YU({banStatus:Y}).shouldShowBanDisclaimer,q=function(e){y((0,dm.Ax)(tg.action)(e))},X=function(e){y((0,dm.Ax)(ng.action)())},Q=function(){y(hh())};(0,Gt.useEffect)((function(){return _.pathname===ir.BLOG_PURCHASE_GIFT&&le(),re(),function(){_.pathname.includes(b)||Q()}}),[]),(0,Gt.useEffect)((function(){(null==M?void 0:M.blogUrl)&&M.blogUrl!==b&&(y(z_({blogUrl:b})),y(by()),y($p()),Q(),y((0,dm.Ax)(Nm.action)({blogUrl:b})),y((0,dm.Ax)(qp.action)({blogUrl:b})),y((0,dm.Ax)(oh.action)({blogUrl:b})))}),[b]),(0,Gt.useEffect)((function(){(null==M?void 0:M.isOwner)&&!z.isFetched&&y((0,dm.Ax)(Em.action)({blogUrl:b})),M&&(oe(),re())}),[M]),(0,Gt.useEffect)((function(){oe(),re()}),[k]);var J,Z,$,ee,te,ne,re=function(){if(null!=M&&!g.current){var e=M.blogUrl!==b;if(M.hasAdultContent&&!Yf.canBeViewed(F)&&!M.accessRights.canCreate&&!e){var t=w({type:a.ADULT_CONTENT,data:{blog:M,updateUserFlag:q,updateUserData:X}}).id;g.current=t}}},oe=function(){g.current&&(O(g.current),g.current=null)},ae=function(){return Hre(void 0,void 0,void 0,(function(){return Wre(this,(function(e){switch(e.label){case 0:return[4,y((0,dm.Ax)(ly.action)({blogUrl:b}))];case 1:return e.sent(),W&&w({type:a.AFTER_FOLLOW,data:{blogUrl:b,levelId:"".concat(W.levelId)}}),[2]}}))}))},ie=function(){w({type:a.RSS_LINK_POPUP,data:{blogUrl:b,authorName:M.owner.name,showAlert:A}})},le=function(){w({type:a.BUY_GIFT_SUBSCRIPTION})},se=function(){if(null==G?void 0:G.isOnline)A({type:p.ERROR,text:Vre.errorRemoveStream,isPermanent:!1});else var e=w({type:a.CONFIRM,data:{onConfirm:function(){return Hre(void 0,void 0,void 0,(function(){return Wre(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,y((0,dm.Ax)(_p.action)({blogUrl:b}))];case 1:return t.sent(),A({type:p.SUCCESS,text:Vre.successRemoveStream}),[3,3];case 2:return t.sent().serverError.error===Ve.VIDEO_STREAM_IS_ONLINE&&A({type:p.ERROR,text:Vre.errorRemoveStream,isPermanent:!1}),[3,3];case 3:return O(e),[2]}}))}))},description:Vre.confirmRemoveStream,confirmButtonText:Vre.btnTextRemove}}).id},ce=function(){k?x?y((0,dm.Ax)(sy.action)({blogUrl:b})):ae():(w({type:a.AUTH_SIGN_IN,data:{onSuccess:ae}}),bd.log.auth.openPopup({source:od.BLOG_FOLLOW}))};if(null!=M){var ue=M.coverUrl,de=M.owner,fe=de.id,me=de.name,pe=de.hasAvatar,he=de.avatarUrl,ve=M.title,ge=M.socialLinks,ye=M.isTotalBaned,_e=M.isReadOnly,Ee=M.isOwner,be=M.accessRights,Se=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:b}),Te=Ee&&F&&!F.isTutorialFinished,Ie=D?null:function(e){!function(e,t){var n,r=H.find((function(t){return t.id===e})),o=Boolean(S),i=Boolean(I),l=Boolean(T);if(null!=r.offTime)w({type:a.RENEW_SUBSCRIPTION,data:{onConfirm:function(){return y((0,dm.Ax)(eb.action)({blogUrl:b}))},owner:M.owner,level:r}});else{var c=nn.BLOG_FEED;o?c=nn.POST:i?c=nn.STREAM:l&&(c=nn.MEDIA),P((0,Yt.getParametrizedUrl)(s.PURCHASE,{blogUrl:b,streamId:I,postId:S,levelId:e,mediaType:T},((n={}).ssource=t,n)),{state:Gre(Gre({},_.state||{}),{from:c})})}}(e,Xu.SUBSCRIBE_LEVEL)},Ne=be.canEdit||Array.isArray(V)&&V.length>0,Ce=Qo(r.STREAMS),we=be.canCreate&&!K,Oe=Ce&&be.canCreate&&!K,Ae=be.canEdit&&Qo(r.SHARE_DONATION_LINK)&&!K,Pe=!1===(null==c?void 0:c.hasCover);if(Y.total&&!be.canView)return Gt.createElement(Nj,null);var Le=!0===(null===(l=null==c?void 0:c.userCard)||void 0===l?void 0:l.isMinified);return Gt.createElement("div",Gre({},Na(jre(qte.ROOT)),{className:cG()((t={},t[Mre]=Pe,t))}),Gt.createElement(wH.Provider,{value:{singlePayment:s.SINGLE_PAYMENT,donationPayment:s.SINGLE_PAYMENT_DONATION,target:{add:s.TARGET_ADD,edit:s.TARGET_EDIT},purchase:s.PURCHASE,purchaseGift:s.PURCHASE_GIFT,trialActivation:s.TRIAL_ACTIVATION,photoViewer:s.PHOTO_LAYER}},!Pe&&Gt.createElement(yne,{id:fe,name:me,title:ve,coverUrl:ue,isEditEnabled:be.canEdit,linkToBlog:Se,onReportBlog:function(){y((0,dm.Ax)(cy.action)({blogUrl:b}))}}),Gt.createElement(Zj,{left:Gt.createElement("div",{className:cG()("BlogWrapper_left_hraQx",(n={},n[Mre]=Pe,n))},L&&!N&&Gt.createElement(VB,{className:"BlogWrapper_backToFeed_HC9ES",onClick:function(){return P(ir.MAIN,{state:S?{returnToPost:S}:{}})}},Gt.createElement(pB,{className:"BlogWrapper_arrowIcon_UjpoH",glyph:hB.WTy})," ",Vre.backToFeed),Gt.createElement(rne,{className:cG()("BlogWrapper_userCard_I2nP9",(o={},o.BlogWrapper_userCardReadOnly_KXazH=_e&&U,o.BlogWrapper_userCardBanned_ou9RQ=ye&&U,o)),hasAvatar:pe,avatar:he,name:me,isEditable:be.canEdit,isMinified:Le,linkToBlog:Se,blogFollowers:(Z=M.count.subscribers,$=M.flags,ee=M.owner.id,te=0==!(null==c?void 0:c.wrapFollowersCounter),ne=(h.includes(ee)||Qo(r.TIP_DONATIONS))&&!B,Gt.createElement(Ate,{wrapCounter:te,followers:Z,actionButton:function(){var e,t=M.isSubscribed&&!x;return(null===(e=null==M?void 0:M.accessRights)||void 0===e?void 0:e.canCreate)?null:Gt.createElement(yte,{isFollowing:x,isSubscribed:t,onClick:ce,isDisabled:j.isFetching})}(),messageButton:function(){var e=M.owner.id,t=m.includes(e),n=Qo(r.DIALOGUES);return M.accessRights.canCreate||!n||t?null:Gt.createElement("div",{className:"BlogWrapper_messageContainer_lG2fp"},Gt.createElement(U0,{showAuth:function(){w({type:a.AUTH_SIGN_IN}),bd.log.auth.openPopup({source:od.MESSAGE})},isAuthorized:k,userId:e}))}(),isRssFeedEnabled:null==$?void 0:$.isRssFeedEnabled,isDonationButtonEnabled:ne,showRssLinkPopup:function(){k?ie():w({type:a.AUTH_SIGN_IN,data:{onSuccess:ie}})}})),socialLinks:ge,isFromFeed:L}),we&&Gt.createElement(Zte,{className:"BlogWrapper_newPostButtonWrapper_JL1PP",step:ln.WRITE_POST},Gt.createElement(FB,Gre({},Na(jre(qte.NEW_POST_BUTTON)),{className:"BlogWrapper_newPostButton_Qs5eg",onClick:function(){P((0,Yt.getParametrizedUrl)(ir.BLOG_NEW_POST,{blogUrl:b,postId:S}))},withIcon:!0}),Gt.createElement(pB,{glyph:hB.wf2,className:"BlogWrapper_iconPen_zZ0lu"}),Vre.newPost)),Oe&&Gt.createElement("div",{className:"BlogWrapper_streamButton_lokZ_"},Gt.createElement(HB,Gre({},Na(jre(qte.NEW_STREAM_BUTTON)),{className:cG()("BlogWrapper_newStreamButton_L7eKH",(i={},i.BlogWrapper_newStreamButtonOnline__d0bv=!!G,i)),onClick:function(){P((0,Yt.getParametrizedUrl)(ir.BLOG_STREAM_EDIT,{blogUrl:b,mediaType:T}))},withIcon:!0}),Gt.createElement(pB,{glyph:(null==G?void 0:G.isOnline)?hB.Jz3:hB.zM1,className:"BlogWrapper_iconVideo_hrDOl"}),G?(null==G?void 0:G.isOnline)?Vre.liveStream:Vre.editStream:Vre.newStream)),Ae&&Gt.createElement("section",Gre({},Na(jre(qte.SHARE_DONATION_LINK)),{className:"BlogWrapper_shareDonationLinkBlock_IuZbw"}),Gt.createElement(ine,null)),Te&&Gt.createElement("section",{className:"BlogWrapper_tutorialContainer_zUdmv"},Gt.createElement(Jte,{scenario:(J=nr().tutorialVideos,[{title:"firstSteps.title",type:an.FIRST_STEPS,items:[{title:"firstSteps.steps.addPhoto",type:ln.ADD_PHOTO,url:ir.SETTINGS_EDIT},{title:"firstSteps.steps.addCover",type:ln.ADD_COVER},{title:"firstSteps.steps.addTitle",type:ln.ADD_TITLE},{title:"firstSteps.steps.editAbout",type:ln.EDIT_ABOUT},{title:"firstSteps.steps.addSocial",type:ln.ADD_SOCIAL,url:ir.SETTINGS_SOCIAL}],videos:J[an.FIRST_STEPS]},{title:"subscriptionLevels.title",type:an.SUBSCRIPTION_LEVELS,isOnlyOneItemRequired:!0,items:[{title:"subscriptionLevels.steps.addLevel",type:ln.ADD_LEVEL},{title:"subscriptionLevels.steps.addTarget",type:ln.ADD_TARGET}],videos:J[an.SUBSCRIPTION_LEVELS]},{title:"firstPost.title",type:an.FIRST_POST,items:[{title:"firstPost.steps.writePost",type:ln.WRITE_POST}],videos:J[an.FIRST_POST]},{title:"payout.title",type:an.PAYOUT,items:[{title:"payout.steps.addPayout",type:ln.ADD_PAYOUT,url:ir.BLOG_WITHDRAWAL_METHODS}],videos:J[an.PAYOUT]}])})),Ne&&Gt.createElement("section",{className:"BlogWrapper_targetContainer_j8wAy"},Gt.createElement(xre,{targets:V,isCreateEnabled:be.canCreate,isEditEnabled:be.canEdit,urls:{EDIT:s.TARGET_EDIT,ADD:s.TARGET_ADD,SINGLE_PAYMENT:s.SINGLE_PAYMENT_DONATION},onTargetLinkCopied:function(){A({type:p.SUCCESS,text:Vre.linkCopied})}}))),center:Gt.Children.map(d,(function(e){return e?Gt.createElement(Gt.Fragment,null,Gt.cloneElement(e,{context:{pagesToKeepPositionBetween:u,onStreamDelete:se}})):e})),right:Gt.createElement("div",{className:"BlogWrapper_right_r0Fby"},Gt.createElement(yre,{urls:{PURCHASE_GIFT:s.PURCHASE_GIFT,TRIAL_ACTIVATION:s.TRIAL_ACTIVATION},items:H,isEditEnabled:be.canEdit,avatarUrl:he,canCreate:be.canCreate,onAdd:function(){P((0,Yt.getParametrizedUrl)(ir.BLOG_SUBSCRIPTION_LEVELS_ADD,{blogUrl:b}))},subscribe:Ie,contentRef:v}))}),Gt.createElement(Rte,{showUnderRef:v,showAtPositionPercent:.7,footerHeight:30})))}return Gt.createElement(ZY,{isGlobal:!0})};!function(e){e.ROOT="root"}(Fre||(Fre={}));const Yre={root:"ModerationPopupControls_root_aUqme",container:"ModerationPopupControls_container_J2qZH",button:"ModerationPopupControls_button_oDViU",disabled:"ModerationPopupControls_disabled_SUqI4",icon:"ModerationPopupControls_icon_UiWEj",timeoutSelect:"ModerationPopupControls_timeoutSelect_Q0jjs",timeoutOption:"ModerationPopupControls_timeoutOption_phgZ1",fadeIn:"ModerationPopupControls_fadeIn_tJZd6"};var Kre,qre=function(){return qre=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qre.apply(this,arguments)},Xre=(0,Qr.getTranslation)("@common/components.ModerationPopup.components.ModerationPopupControls"),Qre=oo("ModerationPopupControlsTestId"),Jre=function(e){var t=e.isTemporarilyBanned,n=e.isPermanentlyBanned,r=e.onTimeoutOptionSelect,o=e.onTimeoutCancel,a=e.onBan,i=e.onBanCancel,l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=function(){return c(!1)},d=function(e){return function(){u(),r(e)}};return Gt.createElement("div",qre({className:Yre.root},Na(Qre(Fre.ROOT))),Gt.createElement(HB,{className:fB()(Yre.button,Yre.buttonTimeout),onClick:t?o:function(){return s?u():void c(!0)}},Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{glyph:hB.joI,className:Yre.icon}),Gt.createElement("span",null,t?Xre.cancelTimeout:Xre.timeout))),Gt.createElement(HB,{className:fB()(Yre.button,Yre.buttonBan),onClick:n?i:a},Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{glyph:hB.FJo,className:Yre.icon}),Gt.createElement("span",null,n?Xre.cancelBan:Xre.ban))),s&&Gt.createElement(Dx,{trigger:gx.CLICK,onClickOutside:u,classNames:{root:Yre.timeoutSelect}},(n?[it.UNTIL_STREAM_END]:[it["10_MINUTES"],it["1_HOUR"],it.UNTIL_STREAM_END]).map((function(e){return Gt.createElement("div",{key:e,className:Yre.timeoutOption,onClick:d(e)},Xre[e])}))))};!function(e){e.ROOT="root"}(Kre||(Kre={}));const Zre={footer:"ModerationPopupInfo_footer_epmz1",status:"ModerationPopupInfo_status__6LYx",counter:"ModerationPopupInfo_counter_F53US",count:"ModerationPopupInfo_count_OwLBu",label:"ModerationPopupInfo_label_fBlEw",delimiter:"ModerationPopupInfo_delimiter_lEul0",statuses:"ModerationPopupInfo_statuses_UWkB2",banStatus:"ModerationPopupInfo_banStatus_IoVjC",banStatusName:"ModerationPopupInfo_banStatusName_yKfMm",banStatusModerator:"ModerationPopupInfo_banStatusModerator_hFTwP",fadeIn:"ModerationPopupInfo_fadeIn_yROgL"};var $re,eoe=function(){return eoe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},eoe.apply(this,arguments)},toe=(0,Qr.getTranslation)("@common/components.ModerationPopup.components.ModerationPopupInfo"),noe=oo("ModerationPopupInfo"),roe=function(e){var t=e.messageCount,n=e.timeoutCount,r=e.banCount,o=e.timeoutByTimeStatus,a=e.timeoutByStreamStatus,i=e.banStatus,l=e.onTimeoutEnd;return Gt.createElement("div",eoe({className:Zre.container},Na(noe(Kre.ROOT))),Gt.createElement("div",{className:Zre.statuses},o&&Gt.createElement("div",{className:Zre.banStatus},Gt.createElement("span",{className:Zre.banStatusName},toe.timeoutByTime," ",Gt.createElement(FK,{timeout:o.period,onTimeout:l})," ",qr([toe.minute1,toe.minute2,toe.minute5],Math.floor(o.period/60)))," ",Gt.createElement("span",null,toe.by)," ",Gt.createElement("span",{className:Zre.banStatusModerator},o.moderator)),a&&Gt.createElement("div",{className:Zre.banStatus},Gt.createElement("span",{className:Zre.banStatusName},toe.timeoutByStream)," ",Gt.createElement("span",null,toe.by)," ",Gt.createElement("span",{className:Zre.banStatusModerator},a.moderator)),i&&Gt.createElement("div",{className:Zre.banStatus},Gt.createElement("span",{className:Zre.banStatusName},toe.banned)," ",Gt.createElement("span",null,toe.by)," ",Gt.createElement("span",{className:Zre.banStatusModerator},i.moderator))),Gt.createElement("div",{className:Zre.footer},Gt.createElement("div",{className:Zre.counter},Gt.createElement("span",{className:Zre.count},t),Gt.createElement("span",{className:Zre.label},qr([toe.messages1,toe.messages2,toe.messages5],t))),Gt.createElement("div",{className:Zre.delimiter}),Gt.createElement("div",{className:Zre.counter},Gt.createElement("span",{className:Zre.count},n),Gt.createElement("span",{className:Zre.label},qr([toe.timeout1,toe.timeout2,toe.timeout5],n))),Gt.createElement("div",{className:Zre.delimiter}),Gt.createElement("div",{className:Zre.counter},Gt.createElement("span",{className:Zre.count},r),Gt.createElement("span",{className:Zre.label},qr([toe.ban1,toe.ban2,toe.ban5],r)))))};!function(e){e.ROOT="root"}($re||($re={}));var ooe,aoe=function(){return aoe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},aoe.apply(this,arguments)},ioe=oo("ModerationPopupSubscriptionLevel"),loe=function(e){var t=e.level,n=e.subscribedAt;return Gt.createElement("div",aoe({className:"ModerationPopupSubscriptionLevel_root_uqGvi"},Na(ioe($re.ROOT))),Gt.createElement(pB,{glyph:hB.t5g,className:"ModerationPopupSubscriptionLevel_icon_iMc87"}),Gt.createElement("div",{className:"ModerationPopupSubscriptionLevel_info_GGdLC"},Gt.createElement("span",{className:"ModerationPopupSubscriptionLevel_level_eIP2u"},t),Gt.createElement("span",{className:"ModerationPopupSubscriptionLevel_subscribedAt_PtM44"},n)))};!function(e){e.ROOT="root"}(ooe||(ooe={}));var soe=function(){return soe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},soe.apply(this,arguments)},coe=(0,Qr.getTranslation)("@common/components.ModerationPopup.components.ModerationPopupUser"),uoe=oo("ModerationPopupUser"),doe=function(e){var t=e.avatarUrl,n=e.name,r=e.createdAt;return Gt.createElement("div",soe({className:"ModerationPopupUser_root_GBpNT"},Na(uoe(ooe.ROOT))),Gt.createElement(PB,{className:"ModerationPopupUser_avatar_UgDNY",size:g.S_OVERSIZE,img:t}),Gt.createElement("div",{className:"ModerationPopupUser_info_GcZSy"},Gt.createElement("span",{className:"ModerationPopupUser_username_qIuys"},n),Gt.createElement("span",{className:"ModerationPopupUser_registrationDate_ApzAu"},(0,Qr.getParametrizedText)(coe.registeredAt,{createdAt:go(r,"dd/MM/yyyy")}))))},foe=function(){return foe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},foe.apply(this,arguments)},moe=(0,Qr.getTranslation)("@common/components.ModerationPopup"),poe=function(e){var t,n,r,o,a,i,l=e.innerRef,s=e.className,c=e.blogUrl,u=e.offset,d=e.author,f=e.subscriptionLevels,m=e.onClose,p=e.onBan,h=e.onBanCancel,v=e.onTimeout,g=(0,Vt.I0)(),y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),_=y[0],E=y[1],b=(0,Vt.v9)(QP),S=null==b?void 0:b[d.id],T=(0,Vt.v9)(ZP),I=d.subscription?f.find((function(e){return e.id===d.subscription.levelId})):null,N=Boolean(I),C=null===(t=null==S?void 0:S.bans)||void 0===t?void 0:t.find((function(e){return e.isTemporary})),w=null===(n=null==S?void 0:S.bans)||void 0===n?void 0:n.find((function(e){return e.isByStream})),O=null===(r=null==S?void 0:S.bans)||void 0===r?void 0:r.find((function(e){return e.isPermanent}));return(0,Gt.useEffect)((function(){g(Mm.action({blogUrl:c,userId:d.id}))}),[]),(0,Gt.useEffect)((function(){C&&E(No(1e3*C.expireTime-Date.now()))}),[C]),Gt.createElement("div",{ref:l,className:"ModerationPopup_root_a_h_b",style:{top:u.top,left:u.left,bottom:u.bottom}},Gt.createElement(Dx,{classNames:{root:fB()("ModerationPopup_tooltip_JB0P3",s)},onClickOutside:m},Gt.createElement("button",{className:"ModerationPopup_close_arNvT",type:"button",onClick:m},Gt.createElement(pB,{className:"ModerationPopup_closeIcon_o8zo9",glyph:hB.bMz})),Gt.createElement(doe,{avatarUrl:d.avatarUrl,name:d.name,createdAt:d.createdAt}),N&&Gt.createElement(loe,{level:I?0===I.price?moe.follows:(0,Qr.getParametrizedText)(moe.subscriptionLevel,{level:I.name}):moe.notSubscriber,subscribedAt:I?0===I.price?(0,Qr.getParametrizedText)(moe.followedAt,{subscribedAt:go(d.subscription.onTime,"dd/MM/yy")}):(0,Qr.getParametrizedText)(moe.subscribedAt,{subscribedAt:go(d.subscription.onTime,"dd/MM/yy")}):moe.notSubscriber}),T&&Gt.createElement(uM,{size:80,className:"ModerationPopup_spinner_EZga3"}),!T&&Gt.createElement(Gt.Fragment,null,Gt.createElement(Jre,{onBan:function(){p(d.id)},onTimeoutOptionSelect:function(e){v(d.id,e)},onBanCancel:function(){h(d.id,!1)},onTimeoutCancel:function(){h(d.id,!!w)},isTemporarilyBanned:!!C||!!w,isPermanentlyBanned:!!O}),Gt.createElement(roe,{messageCount:null===(o=null==S?void 0:S.stat)||void 0===o?void 0:o.messagesCount,timeoutCount:null===(a=null==S?void 0:S.stat)||void 0===a?void 0:a.temporaryBansCount,banCount:null===(i=null==S?void 0:S.stat)||void 0===i?void 0:i.permanentBansCount,timeoutByTimeStatus:!!C&&{moderator:C.moderator.name,period:_},timeoutByStreamStatus:!!w&&{moderator:w.moderator.name},banStatus:!!O&&{moderator:O.moderator.name},onTimeoutEnd:function(){g(Mm.action({blogUrl:c,userId:d.id}))}}))))},hoe=Gt.forwardRef((function(e,t){return Gt.createElement(poe,foe({innerRef:t},e))})),voe=(0,Qr.getTranslation)("@boosty/common/components.ChatUsers.components.UserStat.components.BanInfo"),goe=function(e){var t=e.ban,n=e.onTimeoutEnd,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(Date.now()),2),o=r[0],a=r[1];return(0,Gt.useEffect)((function(){var e=0;return t.isTemporary&&(e=window.setInterval((function(){a(Date.now()),Date.now()>=vo(t.expireTime)&&(window.clearInterval(e),n())}),1e3)),function(){window.clearInterval(e)}}),[t]),Gt.createElement("div",{className:"BanInfo_root_dkbKT"},Gt.createElement("div",{className:"BanInfo_prefix_T1b0C"},Boolean(t.isPermanent)&&voe.banned,Boolean(t.isTemporary)&&Gt.createElement(Gt.Fragment,null,voe.timeout," ",function(){var e=ko(o,vo(t.expireTime)),n=e.minutes,r=e.seconds,a=qr([voe.minute1,voe.minute2,voe.minute5],n);return"".concat(n,":").concat(Or(r%60)," ").concat(a)}()),Boolean(t.isByStream)&&Gt.createElement(Gt.Fragment,null,voe.timeout," ",voe.untilStreamEnd))," ",voe.by," ",t.moderator.name)};const yoe="Controls_item_PLi8B",_oe="Controls_icon_Ack63";var Eoe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},boe=(0,Qr.getTranslation)("@boosty/common/components.ChatUsers.components.UserStat.components.Controls"),Soe=function(e){var t,n=e.blogUrl,r=e.userStat,o=e.className,a=e.isCurrentUserModerator,i=e.isCurrentUserOwner,l=e.isOwner,s=e.isModerator,c=e.isCurrentUser,u=e.onBan,d=e.onTimeout,f=e.onBanCancel,m=e.onMention,p=e.onToggleModerator,h=null==r?void 0:r.user.id,v=null===(t=null==r?void 0:r.blog)||void 0===t?void 0:t.blogUrl,g=(null==r?void 0:r.bans)||[],y=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:v}),_=Eoe((0,Gt.useState)(!1),2),E=_[0],b=_[1],S=(0,Vt.I0)(),T=Eoe(g,1)[0];if(E)return Gt.createElement("div",{className:o},Gt.createElement("div",{className:"Controls_backLink_mKpsc",onClick:function(){return b(!1)}},Gt.createElement(pB,{className:"Controls_backIcon_h2IHC",glyph:hB.WTy}),boe.back),Gt.createElement("div",{className:"Controls_timeoutHelp_g1yTM"},boe.selectTimeout),Gt.createElement("div",null,Object.values(it).map((function(e){return Gt.createElement("div",{key:e,className:"Controls_option_b8nBp",onClick:function(){return d(h,e),void b(!1)}},boe.timeoutOptions[e])}))));var I=!c,N=Boolean(v)&&!l,C=(i||a&&!s)&&!l&&!c,w=(i||a)&&!l&&!c,O=i&&!c&&p&&!T,A=O&&!s,P=O&&s;return I||N||C||O?Gt.createElement("div",{className:o},Boolean(T)&&Gt.createElement(goe,{ban:T,onTimeoutEnd:function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,S((0,dm.Ax)(sp.action)({blogUrl:n,userId:h}))];case 1:return e.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t}}),I&&Gt.createElement("div",{className:yoe,onClick:function(){return m(r.user)}},Gt.createElement(pB,{className:_oe,glyph:hB.fan}),boe.mention),N&&Gt.createElement(cM,{className:yoe,to:y,target:"_blank"},Gt.createElement(pB,{className:_oe,glyph:hB.FwF}),boe.channel),w&&Gt.createElement("div",{className:yoe,onClick:function(){return S(zm.action({blogUrl:n,userId:h}))}},Gt.createElement(pB,{className:_oe,glyph:hB.wKm}),boe.deleteMessages),A&&Gt.createElement("div",{className:yoe,onClick:function(){return p(h,!0)}},Gt.createElement(pB,{className:_oe,glyph:hB.Ubq}),boe.promote),P&&Gt.createElement("div",{className:yoe,onClick:function(){return p(h,!1)}},Gt.createElement(pB,{className:_oe,glyph:hB.A_q}),boe.revoke),C&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:yoe,onClick:function(){(null==T?void 0:T.isTemporary)||(null==T?void 0:T.isByStream)?f(h,Boolean(null==T?void 0:T.isByStream)):b(!0)}},Gt.createElement(pB,{className:_oe,glyph:hB.joI}),(null==T?void 0:T.isTemporary)||(null==T?void 0:T.isByStream)?boe.cancelTimeout:boe.timeout),Gt.createElement("div",{className:yoe,onClick:function(){(null==T?void 0:T.isPermanent)?f(h,!1):u(h)}},Gt.createElement(pB,{className:_oe,glyph:hB.FJo}),(null==T?void 0:T.isPermanent)?boe.cancelBan:boe.ban))):null};const Toe="ChatBadge_root_AnQPg";var Ioe,Noe=(0,Qr.getTranslation)("@boosty/common/components.ChatBadge"),Coe=function(e){var t=e.achievement,n=t.name,r=t.type,o=e.name,a=Noe[n];return o&&r===y.SUBSCRIPTION&&"subscription_00"!==n?Gt.createElement(Gt.Fragment,null,o," ",Gt.createElement("span",{className:"ChatBadge_achievementDuration_a7_X3"},a)):o||a},woe=function(e){var t=e.badge,n=e.classNames,r=void 0===n?{}:n,o=e.pixelSize,a=e.size,i=void 0===a?Y.SMALL:a,l=t.id,s=nr().isMobile,c=Gt.createElement(RB,{badge:t,classNames:{root:r.badgeRoot,image:cG()("ChatBadge_image_No5RT",r.badgeImage)},pixelSize:o,size:i});return s?Gt.createElement("div",{key:l,className:cG()(Toe,r.root)},c):Gt.createElement(HF,{key:l,classNames:{root:cG()(Toe,r.root),content:"ChatBadge_content_x5re5"},isGlobal:!0,content:Coe(t),position:NF.TOP_START},c)},Ooe=(0,Qr.getTranslation)("@boosty/common/components.ChatUsers.components.UserStat.components.Insignia"),Aoe=function(e){var t=e.badges,n=e.className;return Gt.createElement("div",{className:n},Gt.createElement("div",{className:"Insignia_title_LbV8C"},Ooe.title),Gt.createElement("div",{className:"Insignia_container_ZnkbU"},t.map((function(e){return Gt.createElement(woe,{key:e.id,badge:e,classNames:{badgeRoot:"Insignia_item_VsRcv",badgeImage:"Insignia_itemImage_y84pG"},pixelSize:28,size:Y.LARGE})}))))};!function(e){e.FOLLOWER="Follower"}(Ioe||(Ioe={}));const Poe="Subscription_label_hzxAz";var Loe,Roe=(0,Qr.getTranslation)("@boosty/common/components.ChatUsers.components.UserStat.components.Subscription"),koe=function(e){if(e<=0)return Roe.lessThanAMonth;var t=e%12,n=Math.floor(e/12);return n>0?t>0?"".concat(n," ").concat(qr([Roe.year1,Roe.year2,Roe.year5],n)," ").concat(Roe.and," ").concat(t," ").concat(qr([Roe.month1,Roe.month2,Roe.month5],t)):"".concat(n," ").concat(qr([Roe.year1,Roe.year2,Roe.year5],n)):"".concat(t," ").concat(qr([Roe.month1,Roe.month2,Roe.month5],t))},Doe=function(e){var t,n,r=e.subscriberInfo,o=ko(Date.now(),Date.now()-r.subscriptionDaysDuration*Ro).months,a=ko(Date.now(),Date.now()-r.paidSubscriptionDaysDuration*Ro).months;if(!(null==r?void 0:r.subscriptionLevel))return null;var i=(null===(t=null==r?void 0:r.subscriptionLevel)||void 0===t?void 0:t.name)===Ioe.FOLLOWER,l=null===(n=null==r?void 0:r.subscriptionLevel)||void 0===n?void 0:n.name,s=l&&!i,c=s?"".concat(Roe.level,": ").concat(l):Roe.follows,u=koe(o),d=koe(a);return Gt.createElement("div",{className:"Subscription_root_yXzrK"},Gt.createElement(pB,{className:"Subscription_icon_dm2mg",glyph:hB.lJJ}),Gt.createElement("div",null,Gt.createElement("div",{className:"Subscription_level_OYdm4"},c),Gt.createElement("div",{className:Poe},s&&Roe.follows," ",u),!i&&Gt.createElement("div",{className:Poe},Roe.subscribed," ",d)))};!function(e){e.ROOT="root"}(Loe||(Loe={}));const Uoe={footer:"PopupInfo_footer_obbjx",status:"PopupInfo_status_Ztbu5",counter:"PopupInfo_counter_ILBuK",count:"PopupInfo_count_N8Tpw",label:"PopupInfo_label_F9PKt",delimiter:"PopupInfo_delimiter_K5hM4",statuses:"PopupInfo_statuses_eDQ9d",banStatus:"PopupInfo_banStatus_oRWtK",banStatusName:"PopupInfo_banStatusName_oE7EO",banStatusModerator:"PopupInfo_banStatusModerator_sCu_E",fadeIn:"PopupInfo_fadeIn_bAzuM"};var Boe,xoe=function(){return xoe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xoe.apply(this,arguments)},Moe=(0,Qr.getTranslation)("@boosty/common/components.ChatUsers.components.UserStat.components.PopupInfo"),Foe=oo("UserStatPopupInfo"),Goe=function(e){var t=e.messageCount,n=e.timeoutCount,r=e.banCount,o=e.timeoutByTimeStatus,a=e.timeoutByStreamStatus,i=e.banStatus,l=e.onTimeoutEnd;return Gt.createElement("div",xoe({className:Uoe.container},Na(Foe(Loe.ROOT))),Gt.createElement("div",{className:Uoe.statuses},o&&Gt.createElement("div",{className:Uoe.banStatus},Gt.createElement("span",{className:Uoe.banStatusName},Moe.timeoutByTime," ",Gt.createElement(FK,{timeout:o.period,onTimeout:l})," ",qr([Moe.minute1,Moe.minute2,Moe.minute5],Math.floor(o.period/60)))," ",Gt.createElement("span",null,Moe.by)," ",Gt.createElement("span",{className:Uoe.banStatusModerator},o.moderator)),a&&Gt.createElement("div",{className:Uoe.banStatus},Gt.createElement("span",{className:Uoe.banStatusName},Moe.timeoutByStream)," ",Gt.createElement("span",null,Moe.by)," ",Gt.createElement("span",{className:Uoe.banStatusModerator},a.moderator)),i&&Gt.createElement("div",{className:Uoe.banStatus},Gt.createElement("span",{className:Uoe.banStatusName},Moe.banned)," ",Gt.createElement("span",null,Moe.by)," ",Gt.createElement("span",{className:Uoe.banStatusModerator},i.moderator))),Gt.createElement("div",{className:Uoe.footer},Gt.createElement("div",{className:Uoe.counter},Gt.createElement("span",{className:Uoe.count},t),Gt.createElement("span",{className:Uoe.label},qr([Moe.messages1,Moe.messages2,Moe.messages5],t))),Gt.createElement("div",{className:Uoe.delimiter}),Gt.createElement("div",{className:Uoe.counter},Gt.createElement("span",{className:Uoe.count},n),Gt.createElement("span",{className:Uoe.label},qr([Moe.timeout1,Moe.timeout2,Moe.timeout5],n))),Gt.createElement("div",{className:Uoe.delimiter}),Gt.createElement("div",{className:Uoe.counter},Gt.createElement("span",{className:Uoe.count},r),Gt.createElement("span",{className:Uoe.label},qr([Moe.ban1,Moe.ban2,Moe.ban5],r)))))};!function(e){e.ROOT="root"}(Boe||(Boe={}));var Hoe=function(){return Hoe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hoe.apply(this,arguments)},Woe=(0,Qr.getTranslation)("@boosty/common/components.ChatUsers.components.UserStat.components.PopupUser"),Voe=oo("UserStatModerationPopupUser"),joe=function(e){var t=e.avatarUrl,n=e.name,r=e.createdAt;return Gt.createElement("div",Hoe({className:"PopupUser_container_P2ees"},Na(Voe(Boe.ROOT))),Gt.createElement(PB,{className:"PopupUser_avatar_xNfiF",size:g.S_OVERSIZE,img:t}),Gt.createElement("div",{className:"PopupUser_info_pa7Om"},Gt.createElement("span",{className:"PopupUser_username_cBLV2"},n),Boolean(r)&&Gt.createElement("span",{className:"PopupUser_registrationDate_Rt7js"},(0,Qr.getParametrizedText)(Woe.registeredAt,{createdAt:go(r,"dd/MM/yyyy")}))))};const zoe="UserStat_block_w7Cpo";var Yoe,Koe,qoe=function(e){var t,n=e.blogUrl,r=e.offset,o=e.userId,a=e.ownerId,i=e.isCurrentUserModerator,l=e.isCurrentUserOwner,s=e.onClose,c=e.onBan,u=e.onTimeout,d=e.onBanCancel,f=e.onMention,m=e.onToggleModerator,p=function(e){var t=(0,Vt.I0)(),n=_k().currentUser,r=(0,Vt.v9)($P),o=(0,Vt.v9)(tL),a=(0,Vt.v9)(nL),i=(0,Vt.v9)(rL),l=(0,Vt.v9)(eL),s=Boolean(null==r?void 0:r.moderators.some((function(e){return e.id===(null==n?void 0:n.id)}))),c=Boolean((null==r?void 0:r.owner.id)&&(null==n?void 0:n.id)&&(null==r?void 0:r.owner.id)===(null==n?void 0:n.id)),u=null==n?void 0:n.id,d=null==n?void 0:n.blogUrl,f=function(n){return JG(void 0,void 0,void 0,(function(){return ZG(this,(function(r){switch(r.label){case 0:return[4,t((0,dm.Ax)(ip.action)({blogUrl:e,searchQuery:n}))];case 1:return r.sent(),[2]}}))}))},m=function(n){return JG(void 0,void 0,void 0,(function(){return ZG(this,(function(r){switch(r.label){case 0:return[4,t((0,dm.Ax)(sp.action)({blogUrl:e,userId:n}))];case 1:return r.sent(),[2]}}))}))};return{streamChatUsers:r,streamChatUsersNetworkStatus:o,streamChatUserStat:a,streamChatUserStatNetworkStatus:i,isCurrentUserModerator:s,isCurrentUserOwner:c,currentUserId:u,searchQuery:l,ownBlogUrl:d,searchChatUsers:(0,ii.debounce)(f,300),fetchStreamChatUsers:f,fetchStreamChatUserStat:m,resetChatUserStat:function(){t(cp())},onBan:function(n){return JG(void 0,void 0,void 0,(function(){return ZG(this,(function(r){switch(r.label){case 0:return[4,t((0,dm.Ax)(Fm.action)({blogUrl:e,userId:n}))];case 1:return r.sent(),[4,m(n)];case 2:return r.sent(),[2]}}))}))},onTimeout:function(n,r){return JG(void 0,void 0,void 0,(function(){return ZG(this,(function(o){switch(o.label){case 0:return[4,t((0,dm.Ax)(Hm.action)({blogUrl:e,userId:n,period:r}))];case 1:return o.sent(),[4,m(n)];case 2:return o.sent(),[2]}}))}))},onBanCancel:function(n,r){return JG(void 0,void 0,void 0,(function(){return ZG(this,(function(o){switch(o.label){case 0:return[4,t((0,dm.Ax)(Lp.action)({blogUrl:e,userId:n,byStream:r}))];case 1:return o.sent(),[4,m(n)];case 2:return o.sent(),[2]}}))}))}}}(n),h=p.ownBlogUrl,v=p.streamChatUserStat,g=p.currentUserId,y=a===o,_=null==v?void 0:v.user.isChatModerator,E=g===o;return(null==v?void 0:v.user.id)!==o?null:Gt.createElement("div",{className:cG()("UserStat_root_XU0nq",(t={},t.UserStat_offset_kkKtG=r,t)),style:r?{top:r.top,left:r.left,bottom:r.bottom}:{}},Gt.createElement("button",{className:"UserStat_close_NX1PN",type:"button",onClick:s},Gt.createElement(pB,{className:"UserStat_closeIcon_ylbeY",glyph:hB.bMz})),Gt.createElement("div",{className:"UserStat_header_yUhg_"},Gt.createElement(joe,{avatarUrl:v.user.avatarUrl,name:v.user.name,createdAt:v.user.createdAt})),Gt.createElement(Doe,{subscriberInfo:v.subscriberInfo}),Gt.createElement("div",null,v.user.badges.length>0&&Gt.createElement(Aoe,{className:zoe,badges:v.user.badges}),Boolean(null==v?void 0:v.stat)&&Gt.createElement("div",{className:cG()(zoe,"UserStat_blockInfo_QhWHf")},Gt.createElement(Goe,{messageCount:v.stat.messagesCount,timeoutCount:v.stat.temporaryBansCount,banCount:v.stat.permanentBansCount})),Gt.createElement(Soe,{className:zoe,blogUrl:n,ownBlogUrl:h,onBan:c,onTimeout:u,onMention:f,onBanCancel:d,onToggleModerator:m,userStat:v,isOwner:y,isModerator:_,isCurrentUser:E,isCurrentUserModerator:i,isCurrentUserOwner:l})))};!function(e){e.ROOT="root",e.TOGGLE="toggle"}(Yoe||(Yoe={})),function(e){e.TOP="top",e.BOTTOM="bottom"}(Koe||(Koe={}));var Xoe,Qoe=n(58325);!function(e){e.ROOT="root",e.AUTHOR="author",e.MESSAGE="message"}(Xoe||(Xoe={}));const Joe={tooltip:"ChatMessage_tooltip_Rf2Bi",root:"ChatMessage_root_QMWUx",msgBanned:"ChatMessage_msgBanned_hIDeQ",userBanned:"ChatMessage_userBanned_W6DfA",hasRootMention:"ChatMessage_hasRootMention_Xmr24",active:"ChatMessage_active_s4zKz",private:"ChatMessage_private_sXLBE",rootWithTooltip:"ChatMessage_rootWithTooltip_ID9hq",publishTime:"ChatMessage_publishTime_bGHWy",buttons:"ChatMessage_buttons_TJK1Y",manualControl:"ChatMessage_manualControl_DL4i7",message:"ChatMessage_message_B6HBw",hint:"ChatMessage_hint_bF6fv",buttonWrapper:"ChatMessage_buttonWrapper_yFG3N",button:"ChatMessage_button_b4MaF",firstMessage:"ChatMessage_firstMessage_qpzyx",buttonIcon:"ChatMessage_buttonIcon_xLspu",author:"ChatMessage_author_NJIsw",clickable:"ChatMessage_clickable_IUSUy",avatar:"ChatMessage_avatar_lNI3_",name:"ChatMessage_name_qsMmS",bannedName:"ChatMessage_bannedName_pFntz",bannedNameIcon:"ChatMessage_bannedNameIcon_FRkZ8",text:"ChatMessage_text_sXPvk",banActions:"ChatMessage_banActions_T3mCn",banActionsButton:"ChatMessage_banActionsButton_VtGTL",cancelBan:"ChatMessage_cancelBan_zg7hB",tooltipHidden:"ChatMessage_tooltipHidden_Y3huP",verifiedIcon:"ChatMessage_verifiedIcon_qRvlL",disabled:"ChatMessage_disabled_uGERm",fadeIn:"ChatMessage_fadeIn_F9Evc"};var Zoe=function(){return Zoe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zoe.apply(this,arguments)},$oe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},eae=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},tae=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},nae=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatMessage"),rae=oo("ChatMessage"),oae=function(e){var t,n,o,a=e.stream,i=e.className,l=e.isFirstMessage,s=e.blogUrl,c=e.message,u=e.isCurrentUserBanned,d=e.isBanned,f=e.nicknameColor,m=e.hasMentionHighlight,p=e.rowIndex,h=e.onBanCancel,v=e.onMessageDelete,y=e.onMessagesDelete,_=e.onAuthorClick,E=e.onModerationClick,S=e.onReplyClick,T=e.onChangeBanned,I=void 0===T?Yt.noop:T,N=e.onResize,C=nr().isMobile,w=(0,Gt.useRef)(null),O=(0,Gt.useRef)(null),A=fk().theme,P=(0,Vt.I0)(),L=tae((0,Gt.useState)(!1),2),R=L[0],k=L[1],D=tae((0,Gt.useState)(!1),2),U=D[0],B=D[1],x=Ok(d),M=_k().currentUser,F=bk(s).canCreate,G=c.author,H=c.user,W=c.data,V=c.isPrivate,j=G||H,z=(null==G?void 0:G.badges)||[],Y=Qo(r.HIDE_CHAT_USER_AVATAR),K=d,q=Qo(r.CHAT_CONTROLS_ON_CLICK),X=(null==M?void 0:M.id)===a.user.id,Q=a.isChatModerator,J=(null==M?void 0:M.id)===j.id,Z=a.user.id===j.id,$="ChatBot"===G.name,ee=X||F||Q,te=Qo(r.CHAT_MODERATION_PANEL)&&ee&&!J&&!Z;(0,Gt.useEffect)((function(){return window.addEventListener("wheel",ne),function(){window.removeEventListener("wheel",ne)}}),[]),(0,Gt.useEffect)((function(){void 0!==x&&x!==d&&I()}),[d]);var ne=(0,ii.throttle)((function(){O.current&&re()}),200),re=function(){B(!1)},oe=function(){S(j)},ae=function(e){w.current&&!w.current.contains(e.target)&&(k(!1),window.removeEventListener("click",ae))},ie=(0,Gt.useCallback)((function(){N(p)}),[p,N]);return function(e){var t=e.element,n=e.onResize;(0,Gt.useEffect)((function(){var e=t.current;if(null!==e&&window.ResizeObserver){var r=new ResizeObserver((function(){n()}));return r.observe(e),function(){r.unobserve(e)}}return Yt.noop}),[t,n])}({element:w,onResize:ie}),Gt.createElement(Hd.Provider,{value:b.BLOG_STREAM_CHAT_MESSAGE},Gt.createElement("div",Zoe({ref:w,className:cG()(Joe.root,i,(t={},t[Joe.msgBanned]=d,t[Joe.userBanned]=u,t[Joe.active]=R,t[Joe.private]=V,t[Joe.rootWithTooltip]=U,t[Joe.manualControl]=q,t))},Na(rae(Xoe.ROOT))),Gt.createElement("div",{className:Joe.publishTime},go(c.createdAt,"HH/mm")),Gt.createElement("div",{className:Joe.message,onMouseUp:function(e){if(!u&&!$){var t="A"===e.target.nodeName,n=window.getSelection().toString(),r=!J&&!t&&!n;C||q&&r?(k(!0),window.addEventListener("click",ae,!0)):r&&oe()}},onMouseDown:function(){window.getSelection().removeAllRanges()},onMouseOver:function(e){var t;"smile"===(null===(t=e.target)||void 0===t?void 0:t.dataset.type)?function(e){$oe(void 0,void 0,void 0,(function(){var t,n,r,o;return eae(this,(function(a){switch(a.label){case 0:return(t=e.getAttribute("alt"))?[4,(0,RF.oo)(e,O.current,{placement:"top",middleware:[(0,kF.RR)({padding:5}),(0,kF.cv)(5),(0,kF.uY)({padding:15})]})]:[3,2];case 1:n=a.sent(),r=n.x,o=n.y,e.onmouseleave=function(e){var t;"smile"===(null===(t=e.relatedTarget)||void 0===t?void 0:t.dataset.type)||re()},O.current.style.left="".concat(r,"px"),O.current.style.top="".concat(o,"px"),O.current.innerText=t,B(!0),a.label=2;case 2:return[2]}}))}))}(e.target):re()},onMouseLeave:function(){re()}},Gt.createElement("div",{className:Joe.author,onClick:function(e){if(e.stopPropagation(),!$){var t=w.current.getBoundingClientRect(),n=t.height,r=t.y,o=r>window.innerHeight-r-n?Koe.TOP:Koe.BOTTOM;_({author:j,messageId:c.id,direction:o})}},onMouseUp:function(e){e.stopPropagation()}},!Y&&Gt.createElement(PB,{size:g.XXXS,img:j.avatarUrl,className:Joe.avatar}),d?Gt.createElement("span",{className:Joe.bannedName},Gt.createElement(pB,{className:Joe.bannedNameIcon,glyph:hB.FJo}),nae.ban.title):Gt.createElement(Gt.Fragment,null,z.map((function(e){return Gt.createElement(woe,{key:e.id,badge:e})})),Gt.createElement("span",Zoe({style:{color:f},className:Joe.name},Na(rae(Xoe.AUTHOR))),j.name,":"))),K&&Gt.createElement("div",{className:Joe.banActions},Gt.createElement(HB,{className:cG()(Joe.banActionsButton,Joe.cancelBan),onClick:function(){return $oe(void 0,void 0,void 0,(function(){var e,t;return eae(this,(function(n){switch(n.label){case 0:return[4,$oe(void 0,void 0,void 0,(function(){return eae(this,(function(e){return[2,P((0,dm.Ax)(Mm.action)({blogUrl:s,userId:j.id}))]}))}))];case 1:return e=n.sent().bans,t=e.some((function(e){return e.isByStream})),h(j.id,t),[2]}}))}))}},nae.ban.unban),Gt.createElement(HB,{className:Joe.banActionsButton,onClick:function(){y(j.id)}},nae.ban.deleteMessages)),!d&&Gt.createElement("span",Zoe({className:Joe.text},Na(rae(Xoe.MESSAGE))),Gt.createElement(BJ,{key:"ContentRenderer-".concat(String(U)),data:W,hasMentionHighlight:m}),Gt.createElement("div",{ref:O,className:cG()(Joe.tooltip,(n={},n[Joe.tooltipHidden]=!U,n))}))),!$&&Gt.createElement("div",{className:cG()(Joe.buttons,(o={},o[Joe.firstMessage]=l,o))},ee&&Gt.createElement("div",{className:Joe.buttonWrapper},Gt.createElement(HF,{classNames:{root:A},isGlobal:!0,content:nae.delete,position:NF.LEFT},Gt.createElement("button",{className:cG()(Joe.button,Joe.reply),type:"button",onClick:function(){v(c.id)}},Gt.createElement(pB,{className:Joe.buttonIcon,glyph:hB.Fzz})))),!J&&Gt.createElement("div",{className:Joe.buttonWrapper},Gt.createElement(HF,{classNames:{root:A},isGlobal:!0,content:nae.reply,position:NF.LEFT},Gt.createElement("button",{className:cG()(Joe.button,Joe.reply),type:"button",onClick:oe},Gt.createElement(pB,{className:Joe.buttonIcon,glyph:hB.hX})))),te&&Gt.createElement("div",{className:Joe.buttonWrapper},Gt.createElement(HF,{classNames:{root:A},isGlobal:!0,content:nae.moderation,position:NF.LEFT},Gt.createElement("button",{className:cG()(Joe.button,Joe.moderation),type:"button",onClick:function(){var e=w.current.getBoundingClientRect(),t=e.height,n=e.y,r=n>window.innerHeight-n-t?Koe.TOP:Koe.BOTTOM;E({author:j,messageId:c.id,direction:r})}},Gt.createElement(pB,{className:Joe.buttonIcon,glyph:hB.Ypn})))))))},aae=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatSystemMessage"),iae=function(e){var t=e.className,n=e.type;return Gt.createElement("div",{className:cG()("ChatSystemMessage_root_bpj6q",t)},aae[n])};const lae="ChatBoxBase_firstMessage_PVn_U";var sae,cae=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},uae=new Qoe.t1({fixedWidth:!0,defaultHeight:36}),dae=function(e){uae.clear(e,0)},fae=function(e){var t=e.messages,n=e.messagesFromWebSocket,o=e.mostRecentMessage,a=e.isAuthorized,i=e.currentUser,l=e.stream,s=e.isAuthorizationRequired,c=e.blogUrl,u=e.lastBannedMessageId,d=e.isCurrentUserBanned,f=e.className,m=e.hasMentionHighlight,p=e.onBanCancel,h=e.onMessageDelete,v=e.onMessagesDelete,g=e.onReplyClick,y=e.onAuthorClick,_=e.onModerationClick,E=cae((0,Gt.useState)(!1),2),b=E[0],S=E[1],T=(0,Gt.useRef)(!1),I=function(e){T.current=e},N=(0,Gt.useRef)(null),C=(0,Gt.useRef)(!0),w=fk().theme,O=nr().chat.overscanRowCount,A=t.length+n.length,P=cae((0,Gt.useState)(A),2),L=P[0],R=P[1],k=Ok(A);(0,Gt.useEffect)((function(){uae.clearAll()}),[t.length]),(0,Gt.useEffect)((function(){k&&k>A&&uae.clearAll()}),[A]),(0,Gt.useEffect)((function(){if(C.current&&A)return C.current=!1,void G();b?G():R(void 0)}),[t.length,n.length]),(0,Gt.useEffect)((function(){b||!a&&s||!Ko(o)||(null==i?void 0:i.id)!==(null==o?void 0:o.user.id)||G()}),[o]);var D=(0,Gt.useCallback)((function(e){dae(e)}),[dae]),U=function(e){var r=e.index,o=e.style,a=e.parent,i=0===r,s=r>t.length-1,f=r-t.length,E=s?n[f]:t[r],b=Yo(E)?"".concat(r,"-").concat(E.type):"".concat(r,"-").concat(E.id);return Gt.createElement(Qoe.Z8,{key:b,cache:uae,parent:a,columnIndex:0,rowIndex:r},Gt.createElement("div",{style:o},Yo(E)&&function(e,t){var n;return Gt.createElement(iae,{className:cG()("ChatBoxBase_infoMessage_gFyxw",(n={},n[lae]=t,n)),type:e.type})}(E,i),Ko(E)&&function(e,t,n,r){var o,a,i=function(e,t){var n=Zr[t===Ke.LIGHT?"LIGHT":"DARK"],r=Object.keys(n).length;return n["number"==typeof e&&e in n?e:Math.floor(Math.abs(String(e).split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0)/(2147483647/r)))]}(null===(a=null==e?void 0:e.author)||void 0===a?void 0:a.name,w);return Gt.createElement(oae,{stream:l,className:cG()("ChatBoxBase_message_SHOEu",(o={},o[lae]=t,o)),isFirstMessage:t,blogUrl:c,message:e,isBanned:e.id===u,isCurrentUserBanned:d,hasMentionHighlight:m,nicknameColor:i,onBanCancel:p,onMessageDelete:h,onMessagesDelete:v,onAuthorClick:function(e){var t=e.author,n=e.messageId,o=e.direction;y(t,n,{msgHeight:40,msgOffsetTop:Number(r.top),containerScrollTop:N.current.Grid.state.scrollTop,containerOffsetHeight:N.current.props.height,direction:o})},onModerationClick:function(e){var t=e.author,n=e.messageId,o=e.direction;_(t,n,{msgHeight:Number(r.height),msgOffsetTop:Number(r.top),containerScrollTop:N.current.Grid.state.scrollTop,containerOffsetHeight:N.current.props.height,direction:o})},onReplyClick:g,onChangeBanned:function(){return D(n)},rowIndex:n,onResize:D})}(E,i,r,o)))},B=cae((0,Gt.useState)(0),2),x=B[0],M=B[1],F=function(e){var t=e.clientHeight,n=e.scrollTop,r=e.scrollHeight;!t||Math.ceil(r-n)<=Math.ceil(t)+2?S(!0):(S(!1),R(void 0))},G=(0,Gt.useCallback)((function(){T.current||(M((function(e){return e+1})),R(A))}),[A]),H=Qo(r.CHAT_ALT_KEY_PAUSE);return(0,Gt.useEffect)((function(){if(!H)return Yt.noop;var e=function(e){e.key===ae.ALT&&(e.preventDefault(),I(!0),S(!1))},t=function(e){e.key===ae.ALT&&(e.preventDefault(),I(!1),G())};return document.body.addEventListener("keydown",e),document.body.addEventListener("keyup",t),function(){document.body.removeEventListener("keydown",e),document.body.removeEventListener("keyup",t)}}),[H,A]),Gt.createElement("div",{className:"ChatBoxBase_wrapper_Nj0Uw"},Gt.createElement("div",{className:cG()("ChatBoxBase_root_OayIa",f)},Gt.createElement(Qoe.qj,null,(function(e){var t=e.width,n=e.height;return Gt.createElement(Qoe.aV,{ref:N,width:t,height:n,rowHeight:uae.rowHeight,rowRenderer:U,rowCount:A,overscanRowCount:O,className:"ChatBoxBase_list_Kg9et",onScroll:F,scrollToIndex:L,scrollToAlignment:"start",key:x})})),!b&&Gt.createElement("button",{className:"ChatBoxBase_scrollButton_zlsO4",type:"button",onClick:function(){G()}},Gt.createElement(pB,{className:"ChatBoxBase_scrollButtonIcon_IjZKm",glyph:hB.WTy}))))},mae=function(){return mae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mae.apply(this,arguments)},pae=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatMentionsBox"),hae=function(e){e.blogUrl;var t=function(e){var t=(0,Vt.v9)(XO),n=(0,Vt.v9)(fR);return{currentUser:t,messages:[],messagesFromWebSocket:n,mostRecentMessage:n[n.length-1]}}(),n=t.currentUser,r=t.messages,o=t.messagesFromWebSocket,a=t.mostRecentMessage;return Boolean(r.length||o.length)?Gt.createElement(fae,mae({},e,{messages:r,messagesFromWebSocket:o,mostRecentMessage:a,currentUser:n,hasMentionHighlight:!1})):Gt.createElement("div",{className:"ChatMentionsBox_welcome_kaKpz"},pae.welcome)},vae=function(){return vae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vae.apply(this,arguments)},gae=function(e){var t=e.stream,n=e.isAuthorizationRequired,r=function(e,t,n){var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),o=r[0],a=r[1],i=(0,Vt.I0)(),l=Ok(t),s=(0,Vt.v9)(rR),c=(0,Vt.v9)(nR),u=_k(),d=u.currentUser,f=u.isAuthorized,m=(0,Vt.v9)((function(e){return e.stream.streamChatFromWebSocket})),p=m[m.length-1],h=nr().chat.messagesLimit;(0,Gt.useEffect)((function(){!f&&n||c.isFetched&&(!(null==l?void 0:l.id)||(null==t?void 0:t.id)===l.id)||v()}),[null==t?void 0:t.id,f]);var v=function(){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return a(!0),[4,i((0,dm.Ax)(ap.action)({blogUrl:e,limit:h}))];case 1:return t.sent(),[4,(0,Yt.delay)(150)];case 2:return t.sent(),a(!1),[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n};return{isLoading:o,currentUser:d,messages:s,messagesFromWebSocket:m,mostRecentMessage:p,fetchStreamChat:v}}(e.blogUrl,t,n),o=r.messages,a=r.messagesFromWebSocket,i=r.mostRecentMessage,l=r.currentUser;return Gt.createElement(fae,vae({},e,{messages:o,messagesFromWebSocket:a,mostRecentMessage:i,currentUser:l}))},yae=function(){return yae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yae.apply(this,arguments)},_ae=function(e){var t=e.isOnlyMentionsMode,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["isOnlyMentionsMode"]);return t?Gt.createElement(hae,yae({},n)):Gt.createElement(gae,yae({},n))},Eae=function(){function e(){}return Object.defineProperty(e,"isInline",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sanitize",{get:function(){var e;return{span:(e={class:!0},e["data-mention-id"]=!0,e["data-display-name"]=!0,e)}},enumerable:!1,configurable:!0}),e.prototype.render=function(){return document.createElement("span")},e.prototype.surround=function(e){},e.prototype.checkState=function(e){return!1},e}();!function(e){e.BANNED_PERMANENTLY="bannedPermanently",e.BANNED_TEMPORARILY="bannedTemporarily",e.CHAR_LIMIT="charLimit",e.FREQUENT_SENDING="frequentSending",e.IDENTICAL_MESSAGE="identicalMessage",e.INVALID_PARAM="invalidParam",e.PAID_SUBSCRIBERS_ONLY="paidSubscribersOnly",e.SUBSCRIBERS_ONLY="subscribersOnly"}(sae||(sae={}));const bae="BannedPermanentlyWarning_icon_wECff";var Sae=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatPublisherWrapper.components.ChatWarning.components.BannedPermanentlyWarning"),Tae=function(){var e,t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),n=t[0],r=t[1];return Gt.createElement("div",{className:"BannedPermanentlyWarning_root_wIqhv",onClick:function(){n||r(!0)}},n&&Gt.createElement(pB,{className:"BannedPermanentlyWarning_close_bcVql",glyph:hB.bMz,onClick:function(){r(!1)}}),Gt.createElement("div",{className:"BannedPermanentlyWarning_title_Eko1J"},n?Gt.createElement(pB,{glyph:hB.FCX,className:cG()(bae,"BannedPermanentlyWarning_iconTriangle_i2mH2")}):Gt.createElement(pB,{glyph:hB.Gc9,className:cG()(bae,"BannedPermanentlyWarning_iconCircle_KfB3u")}),Gt.createElement("div",{className:"BannedPermanentlyWarning_titleText_PYQAt"},Sae.youAreBanned)),Gt.createElement("div",{className:cG()("BannedPermanentlyWarning_description_EHl2d",(e={},e.BannedPermanentlyWarning_descriptionVisible_e4TvE=n,e))},Sae.youHaveBeenBannedPermanently))},Iae=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Nae=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Cae=(0,Qr.getTranslation)("@common/components.Countdown"),wae=function(e){var t=e.className,n=function(e){var t=e.timeLeft,n=e.delay,r=void 0===n?eB:n,o=e.onEnd,a=void 0===o?Yt.noop:o,i=(0,Gt.useRef)(Date.now()+t+eB),l=(0,Gt.useRef)(),s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),c=s[0],u=s[1];(0,Gt.useEffect)((function(){return l.current=setInterval(d,r),d(),function(){return clearInterval(l.current)}}),[]);var d=function(){var e=Date.now();e+eB>=i.current?(clearInterval(l.current),u($U({start:i.current,end:i.current})),a()):u($U({start:e,end:i.current}))};return c}({timeLeft:e.timeLeft,onEnd:e.onEnd}),r=(0,Gt.useMemo)((function(){var e=n||{},t=e.days,r=e.hours,o=e.minutes,a=e.seconds,i=Boolean(t),l=r&&t<7,s=o&&!t,c=a&&!r&&!t;return Nae(Nae(Nae(Nae([],Iae(i?["".concat(t," ").concat(qr([Cae.days1,Cae.days2,Cae.days5],t))]:[]),!1),Iae(l?["".concat(r," ").concat(qr([Cae.hours1,Cae.hours2,Cae.hours5],r))]:[]),!1),Iae(s?["".concat(o," ").concat(qr([Cae.minutes1,Cae.minutes2,Cae.minutes5],o))]:[]),!1),Iae(c?["".concat(a," ").concat(qr([Cae.seconds1,Cae.seconds2,Cae.seconds5],a))]:[]),!1).join(" ")}),[n]);return n?Gt.createElement("span",{className:t},r):null};const Oae="BannedTemporarilyWarning_icon_K0LtK";var Aae=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatPublisherWrapper.components.ChatWarning.components.BannedTemporarilyWarning"),Pae=function(e){var t,n=e.timeout,r=e.onClose,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),a=o[0],i=o[1],l=Boolean(n),s=!l;return Gt.createElement("div",{className:"BannedTemporarilyWarning_root_NnvID",onClick:function(){a||i(!0)}},a&&Gt.createElement(pB,{className:"BannedTemporarilyWarning_close_XyOTZ",glyph:hB.bMz,onClick:function(){i(!1)}}),Gt.createElement("div",{className:"BannedTemporarilyWarning_title_rTY4G"},a?Gt.createElement(pB,{glyph:hB.FCX,className:cG()(Oae,"BannedTemporarilyWarning_iconTriangle_sAmm_")}):Gt.createElement(pB,{glyph:hB.Gc9,className:cG()(Oae,"BannedTemporarilyWarning_iconCircle_MSJr0")}),Gt.createElement("div",{className:"BannedTemporarilyWarning_titleText_NPpMW"},Aae.chatTimeout)),Gt.createElement("div",{className:cG()("BannedTemporarilyWarning_description_i6hqx",(t={},t.BannedTemporarilyWarning_descriptionVisible_mMKPw=a,t))},l&&Gt.createElement(Gt.Fragment,null,Aae.youHaveBeenBannedTemporarily," ",Aae.banWillExpireBy," ",Gt.createElement(wae,{timeLeft:n,onEnd:r})),s&&Gt.createElement(Gt.Fragment,null,Aae.youHaveBeenBannedTemporarily," ",Aae.banWillBeValidUntilStreamEnd)))};const Lae={description:"CharLimitWarning_description_doC9w",root:"CharLimitWarning_root_I4yz3",close:"CharLimitWarning_close_ltkuH",title:"CharLimitWarning_title_qV4Z8",icon:"CharLimitWarning_icon_jXzBi",fadeIn:"CharLimitWarning_fadeIn_xaJF1"};var Rae=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatPublisherWrapper.components.ChatWarning.components.CharLimitWarning"),kae=function(e){var t=e.count,n=e.onClose;return Gt.createElement("div",{className:Lae.root},Gt.createElement(pB,{className:Lae.close,glyph:hB.bMz,onClick:n}),Gt.createElement("div",{className:Lae.title},Gt.createElement(pB,{glyph:hB.FCX,className:Lae.icon}),Gt.createElement("div",{className:Lae.titleText},Rae.charLimitExceeded)),Gt.createElement("div",{className:Lae.description},(0,Qr.getParametrizedText)(Rae.maxCharCount,{count:t})))};const Dae={description:"FrequentSendingWarning_description_JAYfB",root:"FrequentSendingWarning_root_Nknio",close:"FrequentSendingWarning_close_zMfdc",title:"FrequentSendingWarning_title_EvgiT",icon:"FrequentSendingWarning_icon_Oy6nN",fadeIn:"FrequentSendingWarning_fadeIn_UwAjU"};var Uae=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatPublisherWrapper.components.ChatWarning.components.FrequentSendingWarning"),Bae=function(e){var t=e.count,n=e.timeout,r=e.onClose;return Gt.createElement("div",{className:Dae.root},Gt.createElement(pB,{className:Dae.close,glyph:hB.bMz,onClick:r}),Gt.createElement("div",{className:Dae.title},Gt.createElement(pB,{glyph:hB.FCX,className:Dae.icon}),Gt.createElement("div",{className:Dae.titleText},Uae.messageIsNotSent)),Gt.createElement("div",{className:Dae.description},(0,Qr.getParametrizedText)(Uae.sendingTooFrequently,{count:t})),Gt.createElement("div",{className:Dae.description},Uae.resendAfter," ",Gt.createElement(wae,{timeLeft:n,onEnd:r})))};const xae={description:"IdenticalMessageWarning_description_mEYrY",root:"IdenticalMessageWarning_root_xaq3w",close:"IdenticalMessageWarning_close_Do83s",title:"IdenticalMessageWarning_title_JaFaw",icon:"IdenticalMessageWarning_icon_fmQT2",fadeIn:"IdenticalMessageWarning_fadeIn_GyLK3"};var Mae=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatPublisherWrapper.components.ChatWarning.components.IdenticalMessageWarning"),Fae=function(e){var t=e.count,n=e.timeout,r=e.onClose;return Gt.createElement("div",{className:xae.root},Gt.createElement(pB,{className:xae.close,glyph:hB.bMz,onClick:r}),Gt.createElement("div",{className:xae.title},Gt.createElement(pB,{glyph:hB.FCX,className:xae.icon}),Gt.createElement("div",{className:xae.titleText},Mae.messageIsNotSent)),Gt.createElement("div",{className:xae.description},(0,Qr.getParametrizedText)(Mae.identicalMessage,{count:t})),Gt.createElement("div",{className:xae.description},Mae.resendAfter," ",Gt.createElement(wae,{timeLeft:n,onEnd:r})))};const Gae={description:"InvalidParamWarning_description_AgfnY",root:"InvalidParamWarning_root_IYFIt",close:"InvalidParamWarning_close_aWbg_",title:"InvalidParamWarning_title_eWEtp",icon:"InvalidParamWarning_icon_Egl5J",fadeIn:"InvalidParamWarning_fadeIn_x3ZxT"};var Hae,Wae=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatPublisherWrapper.components.ChatWarning.components.InvalidParamWarning"),Vae=function(e){var t=e.onClose;return Gt.createElement("div",{className:Gae.root},Gt.createElement(pB,{className:Gae.close,glyph:hB.bMz,onClick:t}),Gt.createElement("div",{className:Gae.title},Gt.createElement(pB,{glyph:hB.FCX,className:Gae.icon}),Gt.createElement("div",{className:Gae.titleText},Wae.messageNotSent)),Gt.createElement("div",{className:Gae.description},Wae.errorOccurredWhileSending))},jae=(0,Qr.getTranslation)("@common/components.AccessLabel"),zae=function(e){var t=e.className,n=e.price,r=e.subscriptionLevel,o=nr().isMobile,a=function(e){var t=void 0===e?{}:e,n=t.price,r=t.subscriptionLevel,o=hk((0,Gt.useState)(!1),2),a=o[0],i=o[1],l=hk((0,Gt.useState)(""),2),s=l[0],c=l[1],u=hk((0,Gt.useState)([]),2),d=u[0],f=u[1],m=!r&&!n,p=m?pk.ajb:pk.Wal,h=(0,Vt.v9)(SL),v=d.length>0;return(0,Gt.useEffect)((function(){c(m?vk.levels.open:r&&n?vk.levels.subscribersAndPrice:r&&!n?vk.levels.onlySubscribers:vk.levels.onlyPrice)}),[r,n]),(0,Gt.useEffect)((function(){null==r&&n||f(Za(r.id,h))}),[r,n]),{accessIcon:p,neededLevels:d,accessLabelText:s,hasLevels:v,isPublic:m,isDropdownActive:a,onDropdownShow:function(){i(!0)},onDropdownHide:function(){i(!1)}}}({price:n,subscriptionLevel:r}),i=a.accessIcon,l=a.neededLevels,s=a.accessLabelText,c=a.hasLevels,u=a.isPublic,d=a.isDropdownActive,f=a.onDropdownShow,m=a.onDropdownHide;return Gt.createElement("div",{className:fB()("AccessLabel_container_O9CwZ",t),onMouseOver:f,onMouseLeave:m},Gt.createElement(pB,{glyph:i,className:"AccessLabel_icon_BZ0dJ"}),!o&&Gt.createElement("div",{className:"AccessLabel_labelText_dWxgP"},s),c&&d&&!u&&Gt.createElement("div",{className:"AccessLabel_dropdownContainer_f_tNL"},Gt.createElement("div",{className:"AccessLabel_dropdown_YfOY7"},l.map((function(e){return Gt.createElement("div",{key:e.id,className:"AccessLabel_dropdownItem_KUkjA"},"follower"===e.name.toLowerCase()?jae.follower:e.name)})))))};!function(e){e.ROOT="root"}(Hae||(Hae={}));const Yae="SettingsDropdown_dropdownItem_b3Mr0";var Kae,qae=function(){return qae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qae.apply(this,arguments)},Xae=(0,Qr.getTranslation)("@common/components.SettingsDropdown"),Qae=oo("SettingsDropdown"),Jae=function(e){var t,n=e.className,r=e.type,o=e.onEdit,a=e.onDelete,i=e.onPublish,l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),s=l[0],c=l[1];return Gt.createElement("div",qae({className:fB()("SettingsDropdown_container_I4iQi",n)},Na(Qae(Hae.ROOT))),Gt.createElement(pB,{glyph:hB.iCC,className:fB()("SettingsDropdown_icon_gTQRb",(t={},t.SettingsDropdown_iconActive_kdOVa=s,t)),onClick:function(){return c(!0)}}),s&&Gt.createElement("div",{className:"SettingsDropdown_dropdownContainer_faXWx"},Gt.createElement(Dx,{onClickOutside:function(){return c(!1)},trigger:gx.CLICK},Gt.createElement("div",{className:"SettingsDropdown_dropdown_CLfmA"},i&&Gt.createElement("div",{className:Yae,onClick:function(){i(),c(!1)}},Xae[r].publish),o&&Gt.createElement("div",{className:Yae,onClick:function(){o(),c(!1)}},Xae[r].edit),a&&Gt.createElement("div",{className:Yae,onClick:function(){a(),c(!1)}},Xae[r].delete)))))};!function(e){e.ROOT="root"}(Kae||(Kae={}));var Zae=function(){return Zae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zae.apply(this,arguments)},$ae=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.StreamStatus"),eie=oo("StreamStatus"),tie=function(e){var t,n=e.className,r=e.isOnline;return Gt.createElement("div",Zae({className:cG()("StreamStatus_container_jhfTC",n,(t={},t.StreamStatus_isOnline_yyse2=r,t.StreamStatus_isOffline_ekRsL=!r,t))},Na(eie(Kae.ROOT))),Gt.createElement("span",{className:"StreamStatus_text_eCEIl"},r?$ae.online:$ae.offline))},nie=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.StreamViewers"),rie=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.viewers,o=e.onlyNumber,a=e.hasIcon,i=void 0===a||a;return Gt.createElement("div",{className:cG()(n.container,"StreamViewers_container_f8uw0")},i&&Gt.createElement(pB,{glyph:hB.tCy,className:cG()(n.icon,"StreamViewers_icon_uA0D6")}),Gt.createElement("div",{className:cG()(n.text,"StreamViewers_text_muAls")},Gt.createElement("span",null,r.toLocaleString("ru")),!o&&Gt.createElement("span",null," ",qr([nie.viewers1,nie.viewers2,nie.viewers5],r))))},oie=function(e){var t=e.viewers,n=e.title,r=e.price,o=e.subscriptionLevel,a=e.linkToStream,i=e.isOnline,l=e.isEditEnabled,s=e.areViewersVisible,c=e.onEdit,u=e.onDelete;return Gt.createElement("div",{className:"StreamHeader_container_vz_Bu"},Gt.createElement("div",{className:"StreamHeader_header_NIEdp"},Gt.createElement(zae,{className:"StreamHeader_accessLabel_zV4SM",price:r,subscriptionLevel:o}),s&&Gt.createElement(rie,{classNames:{container:"StreamHeader_viewers_Y5y9Z"},viewers:t,onlyNumber:!0}),Gt.createElement(cM,{to:a,className:"StreamHeader_link_IoTsd"},Gt.createElement(tie,{isOnline:i})),l&&Gt.createElement(Jae,{className:"StreamHeader_settings_nJSRE",type:S.STREAM_POST,onEdit:c,onDelete:u})),Boolean(n)&&Gt.createElement("div",{className:"StreamHeader_title_BNKZE",title:n},n))},aie=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iie=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},lie=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},sie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isWaiting:!1,isLiked:t.props.isLiked,count:t.props.currentCount},t.like=function(){return iie(t,void 0,void 0,(function(){return lie(this,(function(e){switch(e.label){case 0:return this.setState((function(e){return{isLiked:!0,count:e.count+1}})),[4,this.props.onLike()];case 1:return e.sent(),[2]}}))}))},t.removeLike=function(){return iie(t,void 0,void 0,(function(){return lie(this,(function(e){switch(e.label){case 0:return this.setState((function(e){var t=e.count;return{isLiked:!1,count:t>1?t-1:0}})),[4,this.props.onRemoveLike()];case 1:return e.sent(),[2]}}))}))},t.onClick=function(){return iie(t,void 0,void 0,(function(){var e;return lie(this,(function(t){switch(t.label){case 0:return e=Jd(),this.props.isDisabled||this.state.isWaiting?(this.props.onDisabledClick(),(0,Yt.setToLocalStorage)(o.LIKE_TOP_COORDS,"".concat(e.top)),[2]):(this.setState({isWaiting:!0}),this.state.isLiked?[4,this.removeLike()]:[3,2]);case 1:return t.sent(),[3,4];case 2:return[4,this.like()];case 3:t.sent(),t.label=4;case 4:return this.setState({isWaiting:!1}),[2]}}))}))},t}return aie(t,e),t.prototype.componentDidMount=function(){var e=(0,Yt.getFromLocalStorage)(o.LIKE_TOP_COORDS);e&&(setTimeout((function(){window.scrollTo({top:Number(e),behavior:"smooth"})})),(0,Yt.removeFromLocalStorage)(o.LIKE_TOP_COORDS))},t.prototype.componentDidUpdate=function(e,t){this.props.isLiked&&!t.isLiked?this.setState({isLiked:!0}):this.props.isLiked===t.isLiked||this.state.isWaiting||this.setState({isLiked:this.props.isLiked}),this.props.currentCount!==t.count&&this.setState({count:this.props.currentCount})},t.prototype.render=function(){var e,t,n,r,o=this.state,a=o.isLiked,i=o.count,l=this.props,s=l.isDisabled,c=l.isCountVisible,u=void 0===c||c,d=l.isWhiteStyle,f=l.iconStyle,m=l.classNames;return Gt.createElement("div",{className:fB()("LikeButton_container_bZaLj",(e={},e.LikeButton_containerDisabled_rmlwk=s,e.LikeButton_whiteStyle_D1N9z=d,e)),onClick:this.onClick},Gt.createElement(pB,{glyph:hB.MlY,className:fB()("LikeButton_icon_tlePq",null==m?void 0:m.icon,(t={},t.LikeButton_iconLiked_ETS_f=a,t)),style:f,classNameSvg:fB()((n={},n.LikeButton_svgColorWhite_KTW0Q=d,n))}),u&&Boolean(i)&&Gt.createElement("span",{className:fB()("LikeButton_label_berTq",(r={},r.LikeButton_labelLiked_xeH_c=a,r))},i))},t.defaultProps={currentCount:0,onDisabledClick:Yt.noop},t}(Gt.PureComponent),cie=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.StreamShare"),uie=function(e){var t,n=e.className,r=e.url,o=e.params,a=e.dropdownAlign,i=e.topElement,l=jG().showAlert,s=((t={})[De.LINK]=ke.POST_LINK,t[De.QR]=ke.POST_QR,t[De.VK]=ke.POST_VK,t[De.FB]=ke.POST_FB,t[De.OK]=ke.POST_OK,t[De.TWITTER]=ke.POST_TWITTER,t);return Gt.createElement(Mne,{classNames:{container:n,containerDropdown:"StreamShare_shareDropdown_SxxPR",containerCopyInput:"StreamShare_copyInput_gTUEg"},url:r,params:o,referrers:s,dropdownAlign:a||yx.LEFT,onShareClick:function(e){e===De.LINK&&l({type:p.SUCCESS,text:cie.linkCopied}),bd.log.share.shareDropdownItemClick(e)},onSharesDrop:function(){bd.log.share.openShareDropdown()},topElement:i})};const die="StreamFooter_shareDropdown_frm53";var fie,mie=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.StreamFooter"),pie=function(e){var t=e.classNames,n=e.blogUrl,r=e.streamId,o=e.recordId,a=e.likes,i=e.linkToStream,l=e.dropdownAlign,s=e.isLiked,c=e.isAuthorized,u=e.isOnline,d=e.isCurrentUserStream,f=e.streamShareElement,m=e.hasAccess,p=e.hasTheatreModeButton,h=e.onLike,v=e.onRemoveLike,g=e.onReport,y=e.onTheatreIconClick,_=void 0===y?Yt.noop:y,E=e.showAuth,b=function(e){var t=void 0===e?{}:e,n=t.isAuthorized,r=t.hasAccess,o=t.isCurrentUserItem,a=t.onReport,i=gk((0,Gt.useState)(!1),2),l=i[0],s=i[1],c=gk((0,Gt.useState)(""),2),u=c[0],d=c[1],f=gk((0,Gt.useState)(!1),2),m=f[0],p=f[1];return(0,Gt.useEffect)((function(){d(l?yk.reportSent:yk.report)}),[l]),(0,Gt.useEffect)((function(){p(n&&r&&!o),n||s(!1)}),[n,r,o]),{complaintText:u,isComplaintAvailable:m,onReportClick:function(e){e.preventDefault(),a(),s(!0)}}}({isAuthorized:c,hasAccess:m,isCurrentUserItem:d,onReport:g}),S=b.isComplaintAvailable,T=b.complaintText,I=b.onReportClick,N=!m||!c;return Gt.createElement("div",{className:cG()(null==t?void 0:t.container,"StreamFooter_container_McooB")},Gt.createElement(sie,{currentCount:a,isDisabled:N,isLiked:s&&c,onLike:h,onRemoveLike:v,onDisabledClick:function(){return c?(0,Yt.noop)():E()}}),p&&u&&Gt.createElement(Dx,{content:mie.theatreMode,align:yx.CENTER_TOP,classNames:{root:"StreamFooter_theatreButton_fwh7M",content:"StreamFooter_tooltipContent_f_e30"}},Gt.createElement(pB,{glyph:hB.IeT,className:"StreamFooter_theatreIcon_HTAW4",onClick:function(){_()}})),Gt.createElement(uie,{className:cG()(null==t?void 0:t.share,die),url:o?ir.STREAM_RECORD:ir.BLOG_STREAM,params:{blogUrl:n,streamId:r,recordId:o},dropdownAlign:l,topElement:f}),i&&Gt.createElement(cM,{to:i,className:"StreamFooter_link_sVYWu"},Gt.createElement(pB,{className:"StreamFooter_linkIcon_VGGcf",glyph:hB.ClC}),Gt.createElement("span",{className:"StreamFooter_linkText_n09lW"},mie.link)),S&&Gt.createElement(H0,{classNames:{root:cG()("StreamFooter_dots_H3uvJ",die),icon:"StreamFooter_dotsIcon_Hkzkq"},iconGlyph:hB.NKR},[Gt.createElement(W0,{text:T,key:"report",onClick:I})]))},hie=function(){return hie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hie.apply(this,arguments)},vie=function(e){var t,n,o,a,i,l=Qo(r.VK_PLAYER),s=e.classNames,c=void 0===s?{}:s,u=e.blogUrl,d=e.innerRef,f=e.stream,m=f.isOnline,p=f.hasAccess,h=f.data,v=f.previewUrl,g=e.hasAutoplay,y=e.heartbeatsAutoplay,_=e.shouldSubscribeToStreamChannelOnMount,E=void 0!==_&&_,b=e.onSubscribeToStreamChannel,S=void 0===b?Yt.noop:b,T=e.onUnsubscribeFromStreamChannel,I=void 0===T?Yt.noop:T,N=e.onMute,C=void 0===N?Yt.noop:N,w=e.onUnmute,O=void 0===w?Yt.noop:w,A=e.isVkPlayerDisabled,P=void 0!==A&&A,L=e.isMuted,R=e.children,k=(0,Gt.useRef)(!1),D=m&&p,U=null===(t=null==h?void 0:h[0])||void 0===t?void 0:t.playerUrls,B=null===(n=null==h?void 0:h[0])||void 0===n?void 0:n.id,x=null===(o=null==h?void 0:h[0])||void 0===o?void 0:o.vid,M=null===(a=null==h?void 0:h[0])||void 0===a?void 0:a.title,F=null===(i=null==h?void 0:h[0])||void 0===i?void 0:i.failoverHost,G=Gt.useMemo((function(){var e;return(null===(e=null==h?void 0:h[0])||void 0===e?void 0:e.url)?(0,Do.stringifyUrl)({url:h[0].url,query:{autoplay:g?1:0}}):null}),[g,x]),H=function(e){var t=nr().heartbeats.defaultInterval,n=e.blogUrl,r=e.immortal,o=e.autoplay,a=(0,Vt.I0)(),i=(0,Gt.useRef)(),l=(0,Gt.useRef)(0),s=(0,Gt.useRef)(t),c=(0,Gt.useRef)(!1),u=function(e){return FU(void 0,void 0,void 0,(function(){var r;return GU(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,a((0,dm.Ax)(Np.action)(MU({blogUrl:n},e)))];case 1:return r=o.sent(),s.current=vo(r.nextRequestInterval),[3,3];case 2:return o.sent(),s.current=vo(t),[3,3];case 3:return[2]}}))}))},d=function(e){return FU(void 0,void 0,void 0,(function(){var t;return GU(this,(function(n){switch(n.label){case 0:return l.current+=1,t=l.current,[4,u(e)];case 1:return n.sent(),!r&&c.current&&l.current===t&&(i.current=setTimeout(d,s.current,e)),[2]}}))}))},f=(0,Gt.useCallback)((function(){c.current||(c.current=!0,d({immortal:r,autoplay:o}))}),[]),m=(0,Gt.useCallback)((function(){c.current&&(c.current=!1,i.current&&clearTimeout(i.current),d({stop:!0}))}),[]),p=(0,Gt.useCallback)((function(e){var t=e.data.event;t===ye.STARTED||t===ye.RESUMED?f():t===ye.PAUSED&&m()}),[]);return(0,Gt.useEffect)((function(){return function(){m()}}),[]),{startSendingHeartbeats:f,stopSendingHeartbeats:m,onMessage:p}}({blogUrl:u,autoplay:y}),W=H.startSendingHeartbeats,V=H.stopSendingHeartbeats,j=H.onMessage,z=function(){k.current&&(k.current=!1),l&&!E&&S(),W()},Y=function(){k.current||(k.current=!0),l&&!E&&I(),V()};return(0,Gt.useEffect)((function(){if(!l)return window.addEventListener("message",j),function(){window.removeEventListener("message",j)}}),[]),(0,Gt.useEffect)((function(){m||V()}),[m]),Gt.createElement("div",{ref:d,className:null==c?void 0:c.root},D&&Gt.createElement(JQ,{classNames:{container:cG()("StreamContent_embed_Pq5tV",null==c?void 0:c.player)},autoplay:g,muted:L,isVkPlayerDisabled:P,isSavingTimeCodeEnabled:!1,data:{vid:x,id:B,playerUrls:U,title:M,preview:v,url:G,failoverHost:F},callbacks:{onStarted:z,onPlay:z,onSeek:z,onTimeupdate:l&&function(){k.current&&z()},onPause:Y,onEnded:Y,onUnmute:O,onMute:C}}),R)},gie=Gt.forwardRef((function(e,t){return Gt.createElement(vie,hie({innerRef:t},e))}));!function(e){e.ROOT="root"}(fie||(fie={}));const yie="SubscriptionOverlay_subscriptionLevelLabel_qpO4C",_ie="SubscriptionOverlay_button_NdG1K";var Eie=(0,Qr.getTranslation)("@common/components.SubscriptionOverlay.components.SubscriptionOverlayButtons"),bie=function(e){var t=e.className,n=e.type,r=e.price,o=e.subscriptionLevel,a=e.onSubscribeClick,i=e.onPayClick,l=(null==o?void 0:o.price)>0,s=r>0,c=s&&!l,u=(0,Vt.v9)(EA);return Gt.createElement("div",{className:fB()("SubscriptionOverlay_buttons_BMvEn",t)},c?Gt.createElement(FB,{onClick:i,className:_ie},(0,Qr.getParametrizedText)(Eie.common.pay,{price:Vr({amount:r,currency:u})})):Gt.createElement(Gt.Fragment,null,Gt.createElement(FB,{onClick:a,className:_ie},Eie.common.subscribe),s&&Gt.createElement("span",{className:"SubscriptionOverlay_payLink_RkUhI",onClick:i},(0,Qr.getParametrizedText)(Eie.overlays[n].open,{price:Vr({amount:r,currency:u})}))))},Sie=(0,Qr.getTranslation)("@common/components.SubscriptionOverlay.components.SubscriptionOverlayText"),Tie=function(e){var t=e.classNamesText,n=e.className,r=e.type,o=e.price,a=e.subscriptionLevel,i=e.currency,l=0===(null==a?void 0:a.price)&&0===o,s=(null==a?void 0:a.price)>0,c=o>0&&!s;return Gt.createElement("div",{className:fB()("SubscriptionOverlay_text_vIe32",n)},l&&Gt.createElement("span",{className:fB()(null==t?void 0:t.subscriptionTitle,yie)},Sie.common.subscribersOnly),c&&Gt.createElement(Gt.Fragment,null,Gt.createElement("span",{className:fB()(null==t?void 0:t.subscriptionTitle,"SubscriptionOverlay_subscriptionTitle_Xalek")},Sie.overlays[r].paidOnly),Gt.createElement("span",{className:fB()(null==t?void 0:t.subscriptionName,"SubscriptionOverlay_price_msklB")},Vr({amount:o,currency:i,useGrouping:!0}))),s&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:fB()(null==t?void 0:t.subscriptionTitle,yie)},Sie.overlays[r].subscriptionLevelNeeded),Gt.createElement("div",{className:fB()(null==t?void 0:t.subscriptionName,"SubscriptionOverlay_subscriptionName_lJb5v")},null==a?void 0:a.name)))},Iie=function(){return Iie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Iie.apply(this,arguments)},Nie=oo("SubscriptionOverlay"),Cie=function(e){var t,n,r,o=e.classNamesText,a=e.className,i=e.type,l=e.price,s=e.currency,c=e.subscriptionLevel,u=e.contentId,d=e.onSubscribeClick,f=e.onPayClick,m=e.isBlock,p=e.blogUrl;return Gt.createElement("div",Iie({className:fB()("SubscriptionOverlay_container_bMi6D",a,(t={},t.SubscriptionOverlay_containerBlock_Kmi17=m,t))},Na(Nie(fie.ROOT))),Gt.createElement(Tie,{classNamesText:o,className:fB()((n={},n.SubscriptionOverlay_textInBlock_DH0X_=m,n)),type:i,price:l,currency:s,subscriptionLevel:c}),Gt.createElement(bie,{className:fB()((r={},r.SubscriptionOverlay_buttonsInBlock_FMMD_=m,r)),type:i,price:l,subscriptionLevel:c,onPayClick:function(){f({paymentPurposeType:Ce.POST,paymentPurposeId:u,blogUrl:p})},onSubscribeClick:d}))};const wie="TeaserOverlay_title_wIYby";var Oie,Aie,Pie=function(){return Pie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pie.apply(this,arguments)},Lie=((Oie={})[S.POST]={width:575,height:625},Oie[S.STREAM_POST]={width:575,height:323},Oie[S.STREAM_LAYER]={width:1920,height:1080},Oie),Rie=function(e){var t,n,r,o=e.className,a=e.type,i=e.teaser,l=e.title,s=e.isDirectPage,c=e.children,u=(null===(r=null==i?void 0:i.find((function(e){return"text"===e.type})))||void 0===r?void 0:r.content)||"",d=null==i?void 0:i.find((function(e){return"image"===e.type})),f=null==d?void 0:d.url,m=d&&d.rendition!==re.TEASER_AUTO_BACKGROUND;return Gt.createElement("div",{className:fB()("TeaserOverlay_container_EEZGP",o,(t={},t.TeaserOverlay_post_gj05b=a===S.POST,t.TeaserOverlay_stream_Qv9zx=a===S.STREAM_POST,t.TeaserOverlay_streamLayer__2wng=a===S.STREAM_LAYER,t))},f?Gt.createElement(Gt.Fragment,null,Gt.createElement("img",{className:"TeaserOverlay_image_ZgELs",src:Bo(Pie({url:f,isCroped:!0},Lie[a]))})):Gt.createElement("div",{className:"TeaserOverlay_defaultImage_uiSMR"}),Gt.createElement("div",{className:fB()("TeaserOverlay_content_y5rrh",(n={},n.TeaserOverlay_contentBlurred_jxwHq=m,n.TeaserOverlay_contentBlurredAuto_ljaRD=!!d&&!m,n))},a===S.POST&&Gt.createElement("div",{className:"TeaserOverlay_heading_NWmol"},l&&(s?Gt.createElement("h1",{className:wie},l):Gt.createElement("div",{className:wie},l)),Gt.createElement("span",{className:"TeaserOverlay_teaser_QOsQb"},u)),Gt.createElement("div",{className:"TeaserOverlay_footer_xdkHA"},c)))};!function(e){e.ROOT="root"}(Aie||(Aie={}));const kie={container:"StreamReminder_container_O8RRt",circle:"StreamReminder_circle_F3WV3",icon:"StreamReminder_icon_Z5Tz4",iconPlay:"StreamReminder_iconPlay_Ik64q",publishDate:"StreamReminder_publishDate_YgHq6",countdown:"StreamReminder_countdown_FvJ4b",time:"StreamReminder_time_NGITr",fadeIn:"StreamReminder_fadeIn_UzFif"};var Die=function(){return Die=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Die.apply(this,arguments)},Uie=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Bie=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.StreamReminder"),xie=oo("StreamReminder"),Mie=function(e){var t,n,r,o,a,i,l=e.className,s=e.hasAccess,c=e.publishTime,u=e.isOnline,d=e.isDeferred,f=e.isTemplate,m=e.isEnded,p=(0,Gt.useRef)(),h=(0,Gt.useRef)(),v=go(c,"dd/MMM/&/HH/mm"),g=Uie((0,Gt.useState)(d),2),y=g[0],_=g[1],E=Uie((0,Gt.useState)(!1),2),b=E[0],S=E[1],T=Uie((0,Gt.useState)(null),2),I=T[0],N=T[1],C=function(){c-No(Date.now())<86400&&(S(!0),clearInterval(p.current))},w=function(){var e=c-No(Date.now());e<0?(clearInterval(h.current),_(!1)):N(e)};return(0,Gt.useEffect)((function(){if(y)return C(),p.current=setInterval(C,6e4),function(){return clearInterval(p.current)}}),[]),(0,Gt.useEffect)((function(){if(y)return b&&(w(),h.current=setInterval(w,1e3)),function(){return clearInterval(h.current)}}),[b]),Gt.createElement("div",Die({className:cG()(kie.container,l)},Na(xie(Aie.ROOT))),Gt.createElement(pB,{className:kie.circle,classNameSvg:cG()(kie.icon,(t={},t[kie.iconPlay]=s,t)),glyph:s?hB.WF9:hB.Wal}),Gt.createElement("div",{className:cG()(kie.publishDate,(n={},n[kie.countdown]=b,n))},y?Gt.createElement(Gt.Fragment,null,Gt.createElement("span",{className:kie.text},b?Bie.streamStartsIn:Bie.streamStarts),Gt.createElement("span",{className:kie.time},b?(r=I,o=Math.floor(r/3600),a=Math.floor((r-60*o*60)/60),i=Math.floor(r-60*o*60-60*a),"".concat(String(o).padStart(2,"0"),":").concat(String(a).padStart(2,"0"),":").concat(String(i).padStart(2,"0"))):v)):Gt.createElement("span",{className:kie.text},m?Bie.streamEnded:u?Bie.streamOnline:f?Bie.streamStartsSoon:Bie.streamOffline)))},Fie=function(){return Fie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fie.apply(this,arguments)},Gie=function(e){var t=e.stream,n=t.publishTime,r=t.createdAt,o=t.isOnline,a=t.hasAccess,i=t.teaser,l=t.isTemplate,s=t.isEnded,c=t.id,u=t.price,d=t.subscriptionLevel,f=e.blogUrl,m=e.onPayClick,p=e.onSubscribeClick,h=e.shouldSubscribeToStreamChannelOnMount,v=n!==r,g=!o||!a,y=(0,Vt.v9)(EA);return Gt.createElement(gie,Fie({},e),g&&Gt.createElement(Rie,{type:h?S.STREAM_LAYER:S.STREAM_POST,teaser:i,isDirectPage:h},Gt.createElement(Mie,{className:"StreamContentWithTeaser_reminder_Z1YM8",hasAccess:a,isOnline:o,publishTime:n,isDeferred:v,isTemplate:l,isEnded:s}),!a&&Gt.createElement(Cie,{type:S.STREAM_POST,subscriptionLevel:d,price:u,onSubscribeClick:p,onPayClick:m,contentId:c,isBlock:v,currency:y,blogUrl:f})))},Hie=Gt.forwardRef((function(e,t){return Gt.createElement(Gie,Fie({innerRef:t},e))}));const Wie="AboutAuthor_contentRow_NeTFw",Vie="AboutAuthor_icon_Be9R6";var jie=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.AboutAuthor"),zie=function(e){var t=e.className,n=e.linkToBlogComponent,r=(0,Vt.v9)(Hw),o=r.socialLinks,a=r.count.subscribers,i=r.title,l=r.owner.name,s=Array.isArray(o)&&o.length>0;return Gt.createElement("div",{className:cG()(t,"AboutAuthor_aboutAuthor_O4DqL")},Gt.createElement("div",{className:"AboutAuthor_title_Zud8r"},jie.aboutAuthor),Gt.createElement("div",{className:"AboutAuthor_content_S0aKC"},Gt.createElement("div",{className:Wie},Gt.createElement(pB,{glyph:hB.a_W,className:cG()(Vie)}),Gt.createElement("div",null,l)),i&&Gt.createElement("div",{className:Wie},Gt.createElement(pB,{glyph:hB.ZHO,className:Vie}),Gt.createElement("div",null,i))),Gt.createElement("div",{className:Wie},Gt.createElement(pB,{glyph:hB.NVv,className:Vie}),Gt.createElement("div",null,a.toLocaleString("en")," ",qr([jie.followers1,jie.followers2,jie.followers5],a))),n&&Gt.createElement("div",{className:"AboutAuthor_linkToBlog_YhH8J"},n),s&&Gt.createElement(tne,{socialLinks:o,className:"AboutAuthor_socialLinks_zGQMt"}))},Yie=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.AboutStream"),Kie=function(e){var t=e.className,n=e.description;return Gt.createElement("div",{className:cG()(t,"AboutStream_aboutStream_R9big")},Gt.createElement("div",{className:"AboutStream_title_nHuQU"},Yie.title),Gt.createElement("div",{className:"AboutStream_description_Xftm4"},Gt.createElement(BJ,{data:n})))};(0,Qr.getTranslation)("@boosty/common/components.Stream.components.FollowButton");var qie,Xie=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.LinkToBlog"),Qie=function(e){var t=e.to;return Gt.createElement(jt.rU,{className:"LinkToBlog_link_hXNyk",to:t},Gt.createElement("div",{className:"LinkToBlog_text_APnuL"},Xie.goToBlog),Gt.createElement(pB,{glyph:hB.Ec8,className:"LinkToBlog_icon_zRt85"}))},Jie=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.avatarUrl,o=e.isOnline,a=e.size,i=e.blogUrl,l=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:i});return Gt.createElement(cM,{className:cG()("StreamAuthorAvatar_avatar_O596d",n.container),to:l},Gt.createElement("div",{className:cG()("StreamAuthorAvatar_avatarBorder_Cxsyt",n.border)},Gt.createElement(PB,{img:r,size:a,className:cG()("StreamAuthorAvatar_photo_BpsUs",n.avatar)})),o&&Gt.createElement(tie,{isOnline:o,className:"StreamAuthorAvatar_streamStatus_cdZV_"}))};!function(e){e.ROOT="root"}(qie||(qie={}));var Zie,$ie=function(){return $ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$ie.apply(this,arguments)},ele=oo("StreamPageSubscriptionOverlay"),tle=function(e){var t=e.stream,n=e.className,r=e.blogUrl,o=e.onSubscribe,a=e.onPay,i=t.subscriptionLevel,l=t.price,s=t.id,c=(0,Vt.v9)(EA);return Gt.createElement("div",$ie({className:"StreamSubscriptionOverlay_overlayContainer_Ryynz"},Na(ele(qie.ROOT))),Gt.createElement("div",{className:cG()("StreamSubscriptionOverlay_container_mic23",n)},Gt.createElement("div",{className:"StreamSubscriptionOverlay_pictureLocked_RRX43"}),Gt.createElement(Cie,{classNamesText:{subscriptionTitle:"StreamSubscriptionOverlay_subscriptionLevel_wS4IZ",subscriptionName:"StreamSubscriptionOverlay_subscriptionName_qyLvf"},className:"StreamSubscriptionOverlay_overlay_H8Gqj",type:S.STREAM_POST,subscriptionLevel:i,price:l,onSubscribeClick:o,onPayClick:a,contentId:s,isBlock:!1,currency:c,blogUrl:r})))},nle=function(e){var t=e.classNames,n=e.startedAt,r=e.isEnded,o=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=1e3);var r=(0,Gt.useRef)(),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),a=o[0],i=o[1];(0,Gt.useEffect)((function(){return r.current=setInterval(l,n),l(),function(){return clearInterval(r.current)}}),[]),(0,Gt.useEffect)((function(){t&&clearInterval(r.current)}),[t]);var l=function(){e&&i((0,HU.Z)({start:vo(e),end:Date.now()}))};return{duration:a}}(n,void 0!==r&&r).duration,a=Boolean(o)&&"".concat(Or(o.hours),":").concat(Or(o.minutes),":").concat(Or(o.seconds));return Gt.createElement("div",{className:cG()(t.container,"StreamTimeCounter_container_Jxxp9")},Gt.createElement(pB,{glyph:hB.joI,className:cG()(t.icon,"StreamTimeCounter_icon_oDhRg")}),Gt.createElement("span",{className:cG()(t.text,"StreamTimeCounter_text_fR0U0")},a))};!function(e){e.ROOT="root"}(Zie||(Zie={}));const rle={icon:"DonateButton_icon_aEdKH",fadeIn:"DonateButton_fadeIn_eTM7l"};var ole,ale=function(){return ale=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ale.apply(this,arguments)},ile=oo("DonateButton"),lle=function(e){var t=e.className,n=e.daNick,r=e.title;return Gt.createElement(HB,ale({},Na(ile(Zie.ROOT)),{onClick:function(){return Ea("".concat("https://donationalerts.com/r/").concat(n))},className:cG()(t,rle.buttonPanel,rle.donateButton)}),Gt.createElement(pB,{className:rle.icon,glyph:hB.Q32}),Gt.createElement("span",null,r))};!function(e){e.ROOT="root"}(ole||(ole={}));var sle=function(){return sle=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sle.apply(this,arguments)},cle=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.StreamChatToggler"),ule=oo("StreamChatToggler"),dle=function(e){var t,n,r,o,a=e.classNames,i=void 0===a?{}:a,l=e.isDisabled,s=e.isOpen,c=e.onShow,u=e.onHide,d=e.children;return Gt.createElement("div",sle({className:cG()("StreamChatToggler_container_JfTyZ",i.root,(t={},t.StreamChatToggler_containerOpen_XqAhL=s,t))},Na(ule(ole.ROOT))),Gt.createElement("div",{className:cG()("StreamChatToggler_header_mmyAT",(n={},n.StreamChatToggler_headerActive_Jk2AD=s,n))},Gt.createElement("div",{className:cG()("StreamChatToggler_label_cCMIK",(r={},r.StreamChatToggler_labelDisabled_W2PMv=l,r))},Gt.createElement(pB,{className:"StreamChatToggler_labelIcon_o0BKd",glyph:hB.f7e}),Gt.createElement("span",{className:"StreamChatToggler_labelTitle_BBEiB"},l?cle.chatDisabled:cle.chatEnabled)),!l&&Gt.createElement("button",{className:cG()("StreamChatToggler_toggle_goqCX",(o={},o.StreamChatToggler_toggleActive_imDbl=s,o)),type:"button",onClick:s?u:c},s?cle.hide:cle.show,Gt.createElement(pB,{className:"StreamChatToggler_toggleIcon_GANNd",glyph:hB.y9O}))),s&&d)};const fle={subscribeButtonActive:"SubscribeButtonBase_subscribeButtonActive_oRUDk",subscribeButton:"SubscribeButtonBase_subscribeButton_YMaNd",iconArrow:"SubscribeButtonBase_iconArrow_NmQf2",fadeIn:"SubscribeButtonBase_fadeIn_KaFM1"};var mle=function(){return mle=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mle.apply(this,arguments)},ple=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.SubscribeButton.components.SubscribeButtonBase"),hle=function(e){var t,n=e.className,r=e.testAttr,o=e.isPaidSubscribed,a=e.isShowIcon,i=e.onSubscribe;return Gt.createElement(FB,mle({},r,{onClick:i,className:cG()(n,fle.subscribeButton,(t={},t[fle.subscribeButtonActive]=o,t[fle.isShowIcon]=a,t))}),o?Gt.createElement(Gt.Fragment,null,ple.alreadySubscribed,a&&Gt.createElement(pB,{glyph:pk.VJL,className:fle.iconArrow})):ple.subscribe)},vle=function(){return vle=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vle.apply(this,arguments)},gle=function(e){var t=function(){var e=(0,Vt.I0)(),t=(0,Vt.oR)();return{subscriptionLevels:(0,Vt.v9)(bL),isLoading:NL(t.getState()).isFetching,revertUnsubscribe:function(t){return e(eb.action({blogUrl:t}))}}}().subscriptionLevels;return t.length?Gt.createElement(hle,vle({},e)):null};const yle="PaidSubscribersOnlyWarning_icon_wN4sP";var _le,Ele=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatPublisherWrapper.components.ChatWarning.components.PaidSubscribersOnlyWarning"),ble=function(e){var t,n,r=e.onSubscribe,o=(0,Vt.v9)(Hw),a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),i=a[0],l=a[1];return Gt.createElement("div",{className:"PaidSubscribersOnlyWarning_root_QXP6Q",onClick:function(){i||l(!0)}},i&&Gt.createElement(pB,{className:"PaidSubscribersOnlyWarning_close_XKLNx",glyph:hB.bMz,onClick:function(){l(!1)}}),Gt.createElement("div",{className:"PaidSubscribersOnlyWarning_title_f7U3R"},i?Gt.createElement(pB,{glyph:hB.FCX,className:cG()(yle,"PaidSubscribersOnlyWarning_iconTriangle_TI3SQ")}):Gt.createElement(pB,{glyph:hB.Gc9,className:cG()(yle,"PaidSubscribersOnlyWarning_iconCircle_gzSfk")}),Gt.createElement("div",{className:"PaidSubscribersOnlyWarning_titleText_qj1nB"},Ele.chatOnlyForPaidSubscribers)),Gt.createElement("div",{className:cG()("PaidSubscribersOnlyWarning_description_D4Nhc",(t={},t.PaidSubscribersOnlyWarning_descriptionVisible_sS33S=i,t))},Gt.createElement("span",{className:"PaidSubscribersOnlyWarning_nick_msaqj"},(0,Qr.getParametrizedText)(Ele.youShouldBePaidSubscriberOf,{name:null===(n=null==o?void 0:o.owner)||void 0===n?void 0:n.name})),Gt.createElement(gle,{className:"PaidSubscribersOnlyWarning_button_OxJA7",onSubscribe:r})))},Sle=function(e){var t=e.warning,n=t.type,r=t.count,o=t.timeout,a=e.onClose,i=e.onSubscribe;switch(n){case sae.BANNED_PERMANENTLY:return Gt.createElement(Tae,null);case sae.BANNED_TEMPORARILY:return Gt.createElement(Pae,{timeout:o,onClose:a});case sae.CHAR_LIMIT:return Gt.createElement(kae,{count:r,onClose:a});case sae.IDENTICAL_MESSAGE:return Gt.createElement(Fae,{count:r,timeout:o,onClose:a});case sae.FREQUENT_SENDING:return Gt.createElement(Bae,{count:r,timeout:o,onClose:a});case sae.PAID_SUBSCRIBERS_ONLY:return Gt.createElement(ble,{onSubscribe:i});case sae.INVALID_PARAM:return Gt.createElement(Vae,{onClose:a});default:return null}},Tle=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatPublisherWrapper"),Ile=function(e){var t,n=e.children,r=e.warning,o=e.replyTarget,a=e.onReplyCancel,i=e.onSubscribe,l=e.onWarningClose;return Gt.createElement("div",{className:cG()("ChatPublisherWrapper_root_oUAwu",(t={},t.ChatPublisherWrapper_active_uMJ9c=r||o,t))},Boolean(r)&&Gt.createElement("div",{className:"ChatPublisherWrapper_warning_CIZ9z"},Gt.createElement(Sle,{warning:r,onSubscribe:i,onClose:l})),Boolean(o)&&Gt.createElement("div",{className:"ChatPublisherWrapper_reply_oZeRS"},Gt.createElement("div",{className:"ChatPublisherWrapper_replyTitle_qFBHQ"},Gt.createElement(pB,{glyph:hB.hX,className:"ChatPublisherWrapper_replyIcon_U2qIJ"}),Gt.createElement("div",{className:"ChatPublisherWrapper_replyTitleText_FQUhM"},(0,Qr.getParametrizedText)(Tle.replyFor,{username:o}))),Gt.createElement("button",{className:"ChatPublisherWrapper_replyCancelBtn_VT62W",type:"button",onClick:a},Gt.createElement(pB,{className:"ChatPublisherWrapper_replyCancelIcon_Hqu3C",glyph:hB.bMz}))),Gt.createElement("div",{className:"ChatPublisherWrapper_children_HUIix"},n))},Nle=function(){return Nle=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Nle.apply(this,arguments)},Cle=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},wle=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ole=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ale=(0,Qr.getTranslation)("@boosty/common/components.Chat.components.ChatPublisher"),Ple=function(e){var t,n,r=e.innerRef,o=e.isBanned,a=e.replyTarget,i=e.isDisabled,s=e.isWide,c=e.classNames,u=void 0===c?{}:c,d=e.isAuthorized,f=e.blogUrl,m=e.preventScrollOnMobileFocus,p=void 0===m||m,h=e.onReplyCancel,v=e.onPublish,g=e.onSubscribe,y=e.showAuth,_=(0,Vt.oR)(),E=(0,Gt.useRef)(),b=Ole((0,Gt.useState)(null),2),S=b[0],T=b[1],I=bk(f).canEdit,N=nr(),C=N.chat,w=N.isMobile,O=function(e){var t;switch(e){case null:case void 0:case dt.ALL:t=!0;break;case dt.NOBODY:t=!1;break;default:t=I}return t}(null==C?void 0:C.linkUsageType),A=cH({canPostLinks:O,restoreDataOnError:!0,showAlert:Yt.noop,publish:function(e){return Cle(void 0,void 0,void 0,(function(){var t;return wle(this,(function(n){switch(n.label){case 0:return t=e.inlineData,a&&(t=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([{type:pe.MENTION,id:a.id},{type:pe.TEXT,content:JSON.stringify([", ",l[0],[]]),modificator:""}],Ole(t),!1)),[4,v(t)];case 1:return n.sent(),E.current.focus(),[2]}}))}))},onPublishError:function(e){e instanceof Ar&&T(e.serverError)}}),P=A.editorData,L=A.inlineData,R=A.canPublish,k=A.onInlineDataChange,D=A.onPublish,U=A.setEditorData,B=function(e){var t=e.blogUrl,n=e.publishServerError,r=(0,Vt.I0)(),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),a=o[0],i=o[1],l=(0,Vt.v9)(RL),s=Ok(l),c=(0,Vt.v9)(kL),u=Ok(c),d=(0,Vt.v9)(oR),f=(0,Vt.v9)(zP).chatSettings,m=function(){var e=d.isBanned&&d.isBannedByStreamEnd,t=d.isBanned&&d.banRemainingTime&&!e,r=e||t;return d.isBanned&&!r?{type:sae.BANNED_PERMANENTLY}:r?{type:sae.BANNED_TEMPORARILY,timeout:t?1e3*d.banRemainingTime:null}:(null==n?void 0:n.error)===Re.SEND_TOO_FAST?{type:sae.FREQUENT_SENDING,count:f.anyMessageTimeout,timeout:1e3*f.anyMessageTimeout}:(null==n?void 0:n.error)===Re.SAME_MESSAGE?{type:sae.IDENTICAL_MESSAGE,count:f.sameMessageTimeout,timeout:1e3*f.sameMessageTimeout}:(null==n?void 0:n.error)===Re.MESSAGE_TOO_LONG?{type:sae.CHAR_LIMIT,count:1e3}:(null==n?void 0:n.error)===Re.INVALID_PARAM?{type:sae.INVALID_PARAM}:null};return(0,Gt.useEffect)((function(){i(m())}),[f,d,n,l,c]),(0,Gt.useEffect)((function(){(s&&!l||u&&!c)&&r(np.action({blogUrl:t}))}),[l,c]),{chatWarning:a,hasWarning:Boolean(a),isPublishingBlockedByWarning:function(){var e,t=m();return i(t),e=null==t?void 0:t.type,[sae.BANNED_PERMANENTLY,sae.BANNED_TEMPORARILY,sae.FREQUENT_SENDING,sae.IDENTICAL_MESSAGE,sae.PAID_SUBSCRIBERS_ONLY,sae.SUBSCRIBERS_ONLY].includes(e)},onWarningClose:function(){i(null)}}}({blogUrl:f,publishServerError:S}),x=B.chatWarning,M=B.hasWarning,F=B.isPublishingBlockedByWarning,G=B.onWarningClose,H=!o,W=W$({hasSmilesSelector:H,inlineData:L,preventScrollOnMobileFocus:p,setEditorData:U,publisherRef:E}),V=W.isSmileSelectorOpened,j=W.smileSelectorWrapperRef,z=W.smileButtonRef,Y=W.addSmileToInlineData,K=W.onSmilesButtonClick;(0,Gt.useEffect)((function(){var e;a&&(null===(e=null==E?void 0:E.current)||void 0===e||e.focus())}),[a]);var q=(0,Vt.v9)(ZL),X=(0,Vt.v9)($L);return Gt.createElement("div",{ref:r,className:"ChatPublisher_root_fJ6LO",id:"chat-pub-root"},!d&&Gt.createElement("div",{className:"ChatPublisher_authText_xYYfl"},Gt.createElement("span",{className:"ChatPublisher_link_rfn2B",onClick:y},Ale.auth1)," ",Ale.auth2),d&&Gt.createElement("div",null,Gt.createElement(Ile,{warning:x,replyTarget:null==a?void 0:a.name,onSubscribe:g,onReplyCancel:h,onWarningClose:function(){G(),T(null)}},Gt.createElement(I$,{ref:E,classNames:{root:cG()(u.root,"ChatPublisher_publisherRoot_zFPcK",(t={},t.ChatPublisher_publisherRootWarning_LHAXa=M,t)),rootDisabled:u.rootDisabled,editor:cG()(u.editor,"ChatPublisher_editor_Wj_fs"),editorDisabled:u.editorDisabled,sendContainer:cG()(u.sendContainer,"ChatPublisher_sendContainer_LqLVm"),iconSend:cG()(u.iconSend,"ChatPublisher_iconSend_gd4jo"),actionsContainer:cG()(u.actionsContainer,"ChatPublisher_actionsContainer_Jba0Y"),actionsContainerDisabled:u.actionsContainerDisabled},editorTools:(n={paragraph:{class:R$,config:{preserveBlank:!0,parseLinks:!1,blogUrl:f,store:_,onAddMention:function(e){var t;(null===(t=E.current)||void 0===t?void 0:t.cursor)&&(E.current.cursor=h$(e,{fromParent:!0}))}}}},n[pe.SMILE]=P$,n[pe.MENTION]=Eae,n),isSmileSelectorOpened:V,isDisabled:i,isWide:s,isSubmitButtonActive:R,placeholder:Ale.placeholder,editorData:P,inlineData:L,onInlineDataChange:function(e){k(e)},onPublish:function(){return Cle(void 0,void 0,void 0,(function(){var e,t;return wle(this,(function(n){switch(n.label){case 0:return F()?[3,2]:[4,null===(t=E.current)||void 0===t?void 0:t.getEditorData()];case 1:e=n.sent(),D(e),n.label=2;case 2:return[2]}}))}))},publishingShortcut:sD.ENTER,setEditorData:U,hasSubmitButton:!o,onKeyDown:function(e){T(null)},isInlineActions:!0,renderActionsRight:function(e){return Gt.createElement(Gt.Fragment,null,Gt.createElement(G$,Nle({},e,{ref:z,isActive:V,classNames:{root:cG()(u.smileContainer)},onClick:K})))}}))),H&&V&&Gt.createElement("div",{className:cG()("ChatPublisher_smileSelectorWrapper_sF_xD",u.smileSelectorWrapper),ref:j},Gt.createElement($$,{blogUrl:f,smiles:q,smilesNetworkStatus:X,isHorizontalNavigation:w,onSelect:Y})))},Lle=Gt.forwardRef((function(e,t){return Gt.createElement(Ple,Nle({innerRef:t},e))})),Rle=function(){return Rle=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Rle.apply(this,arguments)},kle=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Dle=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ule=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ble=oo("Chat"),xle=function(e){var t=e.classNames,n=void 0===t?{}:t,o=e.stream,a=e.height,i=e.blogUrl,l=e.streamUserId,s=e.isModerator,c=e.isAuthorizationRequired,u=e.isAuthorized,d=e.isPublisherHidden,f=e.preventScrollOnMobileFocus,m=e.externalReplyTarget,p=e.isWide,h=e.isOnlyMentionsMode,v=e.onSubscribe,g=e.onToggleModerator,y=e.showAuth,_=(0,Gt.useRef)(null),E=(0,Gt.useRef)(null),b=(0,Gt.useRef)(null),S=(0,Gt.useRef)(null),T=(0,Vt.I0)(),I=(0,Vt.v9)(rR),N=(0,Vt.v9)(SL),C=(0,Vt.v9)(NL),w=(0,Vt.v9)(Hw),A=(0,Vt.v9)(oR),P=_k().currentUser,L=Ck(),R=(0,Vt.v9)(oO),k=Ule((0,Gt.useState)(!1),2),D=k[0],U=k[1],B=Ule((0,Gt.useState)(null),2),x=B[0],M=B[1],F=Ule((0,Gt.useState)(null),2),G=F[0],H=F[1],W=Ule((0,Gt.useState)(null),2),V=W[0],j=W[1],z=Ule((0,Gt.useState)(null),2),Y=z[0],K=z[1],q=Ule((0,Gt.useState)(null),2),X=q[0],Q=q[1],J=Ule((0,Gt.useState)(null),2),Z=J[0],$=J[1],ee=Ule((0,Gt.useState)(null),2),te=ee[0],ne=ee[1],re=A.isBanned||L.isBanned||R,oe=function(e){return kle(void 0,void 0,void 0,(function(){return Dle(this,(function(t){switch(t.label){case 0:return[4,T((0,dm.Ax)(sp.action)({blogUrl:i,userId:e}))];case 1:return t.sent(),[2]}}))}))},ae=function(){T(cp())};(0,Gt.useEffect)((function(){T(Um({messages:[{isSystemMessage:!0,type:O.WELCOME}]}))}),[I]),(0,Gt.useEffect)((function(){C.isFetched||T(qp.action({blogUrl:i}))}),[]),(0,Gt.useEffect)((function(){return window.clearTimeout(S.current),A.isBanned&&A.banRemainingTime&&(S.current=window.setTimeout((function(){var e,t;T(kp({isBanned:!1,blogId:null===(e=null==w?void 0:w.owner)||void 0===e?void 0:e.id,ownerId:null===(t=null==w?void 0:w.owner)||void 0===t?void 0:t.id}))}),1e3*A.banRemainingTime)),function(){window.clearTimeout(S.current)}}),[A.isBanned]);var ie=function(e){var t=e.msgHeight,n=e.msgOffsetTop,r=e.containerScrollTop,o=e.containerOffsetHeight,a=e.direction,i=E.current.offsetHeight,l=n-r,s=o-l-t+i;return o<800?a===Koe.TOP?{left:15,bottom:i+15}:{left:15,top:15}:a===Koe.TOP?{left:15,bottom:Math.floor(s+t+-3)}:{left:15,top:Math.floor(l+t+-3)}};(0,Gt.useEffect)((function(){X&&oe(X)}),[X]);var le=function(e){j(e),K(null),Q(null),M(null),ae()},se=function(e){return kle(void 0,void 0,void 0,(function(){return Dle(this,(function(t){switch(t.label){case 0:return[4,T((0,dm.Ax)(Fm.action)({blogUrl:i,userId:e}))];case 1:return t.sent(),X===e&&oe(e),H(x),[2]}}))}))},ce=function(e,t){return kle(void 0,void 0,void 0,(function(){return Dle(this,(function(n){switch(n.label){case 0:return[4,T((0,dm.Ax)(Hm.action)({blogUrl:i,userId:e,period:t}))];case 1:return n.sent(),X===e&&oe(e),H(x),[2]}}))}))},ue=function(e,t){return kle(void 0,void 0,void 0,(function(){return Dle(this,(function(n){switch(n.label){case 0:return[4,T((0,dm.Ax)(Lp.action)({blogUrl:i,userId:e,byStream:t}))];case 1:return n.sent(),X===e&&oe(e),H(null),[2]}}))}))};(0,Gt.useEffect)((function(){m&&j(m)}),[m]);var de=Qo(r.CHAT_USER_STAT);return Gt.createElement("div",Rle({ref:_,className:cG()(n.root,"Chat_root_PXmj9"),style:a?{height:"".concat(a,"px")}:null},Na(Ble(Yoe.ROOT))),Gt.createElement("div",{className:"Chat_chat_NNQHP"},Gt.createElement(_ae,{className:n.chatBox,isAuthorized:u,stream:o,blogUrl:i,lastBannedMessageId:G,isAuthorizationRequired:c,isCurrentUserBanned:re,isOnlyMentionsMode:h,onBanCancel:ue,onMessageDelete:function(e){T(Ep.action({blogUrl:i,messageId:e}))},onMessagesDelete:function(e){T(zm.action({blogUrl:i,userId:e})),H(null)},onReplyClick:le,onAuthorClick:function(e,t,n){K(ie(n)),Q(e.id),M(t)},onModerationClick:function(e,t,n){ne(ie(n)),$(e),U(!0),M(t)}}),!d&&Gt.createElement(Lle,{ref:E,blogUrl:i,classNames:n.publisher,isAuthorized:u,isBanned:re,isDisabled:re,isModerator:s,isWide:p,replyTarget:V,preventScrollOnMobileFocus:f,onUnavailableSmileSuggestClick:Yt.noop,onPublish:function(e){return kle(void 0,void 0,void 0,(function(){return Dle(this,(function(t){switch(t.label){case 0:return[4,T((0,dm.Ax)(Cp.action)({blogUrl:i,data:e}))];case 1:return t.sent(),j(null),[2]}}))}))},onReplyCancel:function(){j(null)},onSubscribe:v,showAuth:y})),D&&Gt.createElement(hoe,{ref:b,blogUrl:i,offset:te,subscriptionLevels:N,author:Z,onClose:function(){U(!1),ne(null),$(null),M(null)},onBan:se,onTimeout:ce,onBanCancel:ue}),Boolean(X)&&de&&Gt.createElement(qoe,{blogUrl:i,userId:X,ownerId:l,offset:Y,isCurrentUserModerator:s,isCurrentUserOwner:l===(null==P?void 0:P.id),onClose:function(){K(null),Q(null),M(null),ae()},onBan:se,onTimeout:ce,onMention:le,onBanCancel:ue,onToggleModerator:g}))};!function(e){e.ROOT="root"}(_le||(_le={}));const Mle="Stream_player_Zjn0X";var Fle=function(){return Fle=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fle.apply(this,arguments)},Gle=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Hle=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Wle=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Vle=oo("Stream"),jle=function(e){var t,n=e.className,r=e.isAuthorizationRequired,o=e.isSmileInfoAbsolute,a=e.stream,i=e.onStreamDelete,l=e.onFollow,s=e.onSubscribe,c=e.onPay,u=e.showAuth,d=(0,Vt.I0)(),f=Mf(),m=a.user.blogUrl,p=zU({isAuthorizationRequired:!0,shouldSubscribeToStreamChannelOnMount:!1}),h=p.subscribeOnStreamChannel,v=p.unsubscribeFromStreamChannel,g=Wle((0,Gt.useState)(!1),2),y=g[0],_=g[1],E=Wle((0,Gt.useState)(!1),2),b=E[0],S=E[1],T=(0,Vt.v9)(XO),I=bk(m).canEdit,N=null!==T,C=(null==T?void 0:T.id)===(null===(t=null==a?void 0:a.user)||void 0===t?void 0:t.id),w=(0,Yt.getParametrizedUrl)(ir.BLOG_STREAM,{blogUrl:m,streamId:a.id});return a?Gt.createElement(QU.Provider,{value:a},Gt.createElement("div",Fle({className:n},Na(Vle(_le.ROOT))),Gt.createElement(oie,{viewers:a.count.viewers,price:a.price,title:a.title,subscriptionLevel:a.subscriptionLevel,linkToStream:w,isOnline:a.isOnline,isEditEnabled:I,areViewersVisible:y,onEdit:function(){f((0,Yt.getParametrizedUrl)(ir.BLOG_STREAM_EDIT,{blogUrl:m}))},onDelete:i}),Gt.createElement(Hie,{classNames:{player:Mle},blogUrl:m,stream:a,onSubscribeClick:function(){0===a.subscriptionLevel.price?l():s(a.subscriptionLevel.id,Xu.BLOG_STREAM_SUBSCRIBE)},onPayClick:c,onSubscribeToStreamChannel:function(){h(),_(!0)},onUnsubscribeFromStreamChannel:function(){v(),_(!1)}}),Gt.createElement(pie,{blogUrl:m,streamId:a.id,likes:a.count.likes,linkToStream:w,isLiked:a.isLiked,isAuthorized:N,isCurrentUserStream:C,isOnline:a.isOnline,hasAccess:a.hasAccess,onLike:function(){return Gle(void 0,void 0,void 0,(function(){return Hle(this,(function(e){switch(e.label){case 0:return[4,d((0,dm.Ax)(dp.action)({blogUrl:m}))];case 1:return e.sent(),[2]}}))}))},onRemoveLike:function(){return Gle(void 0,void 0,void 0,(function(){return Hle(this,(function(e){switch(e.label){case 0:return[4,d((0,dm.Ax)(Rp.action)({blogUrl:m}))];case 1:return e.sent(),[2]}}))}))},onReport:function(){d(Qm.action({blogUrl:m}))},showAuth:u}),a.hasAccess&&Gt.createElement(dle,{isOpen:b,isDisabled:!a.hasChat,onHide:function(){return S(!1)},onShow:function(){return S(!0)}},Gt.createElement(xle,{classNames:{root:"Stream_chat_XyP5e"},blogUrl:m,stream:a,isModerator:a.isChatModerator,isAuthorizationRequired:r,isAuthorized:N,streamUserId:a.user.id,preventScrollOnMobileFocus:!1,isSmileInfoAbsolute:o,showAuth:u})))):null};const zle={container:"FeedStreamFooter_container_vNfny",dotsIcon:"FeedStreamFooter_dotsIcon_xYGwz",theatreButton:"FeedStreamFooter_theatreButton_e0zCQ",link:"FeedStreamFooter_link_rN8tj",linkIcon:"FeedStreamFooter_linkIcon_yLgRJ",linkText:"FeedStreamFooter_linkText_CGaEd",viewers:"FeedStreamFooter_viewers_uqtoR",count:"FeedStreamFooter_count_lUQUL",iconViewers:"FeedStreamFooter_iconViewers_rAZbT",left:"FeedStreamFooter_left_vW1B0",right:"FeedStreamFooter_right_UCqgc",fadeIn:"FeedStreamFooter_fadeIn_ZOthv"};var Yle=(0,Qr.getTranslation)("@boosty/common/components.Stream.components.FeedStreamFooter"),Kle=function(e){var t=e.classNames,n=e.blogUrl,r=e.stream,o=e.recordId,a=e.linkToStream,i=e.dropdownAlign,l=e.streamShareElement;return Gt.createElement("div",{className:cG()(null==t?void 0:t.container,zle.container)},Gt.createElement("div",{className:zle.left},Gt.createElement("div",{className:zle.viewers},Gt.createElement(pB,{glyph:hB.NVv,className:zle.iconViewers}),Gt.createElement("span",{className:zle.count},r.count.viewers))),Gt.createElement("div",{className:zle.right},a&&Gt.createElement(cM,{to:a,className:zle.link},Gt.createElement(pB,{className:zle.linkIcon,glyph:hB.ClC}),Gt.createElement("span",{className:zle.linkText},Yle.link)),Gt.createElement(uie,{className:cG()(null==t?void 0:t.share,zle.shareDropdown),url:o?ir.STREAM_RECORD:ir.BLOG_STREAM,params:{blogUrl:n,streamId:r.id,recordId:o},dropdownAlign:i,topElement:l})))},qle=(0,Qr.getTranslation)("@boosty/common/components.Post.components.PostAccessInfo"),Xle=function(e){var t=e.price,n=e.currency,r=e.subscriptionLevelId,o=e.isFreePost,a=e.hasAccess,i=e.networkStatus,l=void 0===i?{isFetching:!1,isFetched:!0,error:null}:i,s=e.classNames,c=void 0===s?{}:s,u=e.subscriptionLevels,d=null==r&&t?[]:Za(r,u),f=Boolean(r),m=t>0,p=f&&l.isFetching;return Gt.createElement("div",{className:cG()("PostAccessInfo_root_Yttn5",c.root)},p&&Gt.createElement("div",{className:"PostAccessInfo_loadingBlock_Z4ZpE"},Gt.createElement(uM,{size:30,solid:!0})),!p&&(o?Gt.createElement("div",{className:"PostAccessInfo_free_aHzDM"},qle.levels.open):Gt.createElement(Gt.Fragment,null,f&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"PostAccessInfo_levelsLabel_Mdnua"},a?qle.accessedOnLevels:qle.needSubscribeOnLevel),d.map((function(e){return Gt.createElement("div",{key:e.id,className:"PostAccessInfo_level_gyaYG"},function(e){return"follower"===e.name.toLowerCase()}(e)?qle.follower:e.name)}))),f&&m&&Gt.createElement("div",{className:"PostAccessInfo_divider_SckjO"},Gt.createElement("span",{className:"PostAccessInfo_or_gRW9d"},qle.or)),m&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"PostAccessInfo_buyLabel_pGzB5"},a?qle.postPrice:qle.needBuyPost),Gt.createElement("div",{className:"PostAccessInfo_price_BE6Hq"},Vr({amount:t,currency:n,useGrouping:!0}))))))},Qle=function(e){var t=e.subscriptionLevelId,n=e.price,r=e.subscriptionLevels,o=e.isFreePost,a=e.hasAccess,i=e.currency,l=e.networkStatus,s=void 0===l?{isFetching:!1,isFetched:!0,error:null}:l,c=e.onMouseLeave,u=e.onMouseOver,d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=o||a?hB.ajb:hB.Wal;return Gt.createElement("div",{className:"PostAccessLabel_root_GvR4G",onMouseOver:function(){m(!0),null==u||u()},onMouseLeave:function(){m(!1),null==c||c()}},Gt.createElement(pB,{glyph:p,className:"PostAccessLabel_icon_nvwoT"}),f&&(!t||s.isFetching||s.isFetched)&&Gt.createElement("div",{className:"PostAccessLabel_dropdownContainer_Nhb5Y"},Gt.createElement(Xle,{networkStatus:s,subscriptionLevels:r,isFreePost:o,price:n,currency:i,subscriptionLevelId:t,hasAccess:a})))},Jle=function(e){var t=e.subscriptionLevelId,n=e.price,r=e.subscriptionLevels,o=e.isFreePost,a=e.hasAccess,i=e.currency,l=e.networkStatus,s=void 0===l?{isFetching:!1,isFetched:!0,error:null}:l,c=e.classNames,u=void 0===c?{}:c,d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=o||a?hB.ajb:hB.Wal;return Gt.createElement("div",{className:"PostAccessLabel_root_KmKGe"},Gt.createElement(pB,{className:"PostAccessLabel_icon_S787U",glyph:p,onClick:function(){var t;m(!0),null===(t=e.onClick)||void 0===t||t.call(e)}}),f&&Gt.createElement(Dx,{classNames:{root:cG()("PostAccessLabel_dropdownRoot_LDa_1",null==u?void 0:u.dropdownRoot)},onClickOutside:function(){return m(!1)},trigger:gx.CLICK},Gt.createElement(Xle,{networkStatus:s,subscriptionLevels:r,isFreePost:o,price:n,currency:i,subscriptionLevelId:t,hasAccess:a})))},Zle=function(){return Zle=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zle.apply(this,arguments)},$le=function(e){return nr().isMobile?Gt.createElement(Jle,Zle({},e,{onClick:e.onDropdownShow})):Gt.createElement(Qle,Zle({},e,{onMouseOver:e.onDropdownShow}))},ese=function(){return ese=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ese.apply(this,arguments)},tse=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},nse=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},rse=function(e){var t=LH(),n=t.publishComment;return{publishPostComment:function(t,r){return void 0,void 0,a=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return[4,n({blogUrl:e.user.blogUrl,postId:e.id,commentData:t,replyComment:r})];case 1:return[2,o.sent()]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function r(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(n,r)}i((a=a.apply(undefined,[])).next())}));var o,a},publishingCommentsList:t.publishingCommentsList}},ose=function(){var e,t=(0,Vt.oR)();return(e={paragraph:{class:R$,config:{preserveBlank:!0,parseLinks:!1,store:t,isSmileSuggestEnabled:!1}}})[pe.SMILE]=P$,e},ase=function(){return ase=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ase.apply(this,arguments)},ise=function(e){var t=e.publisherRef,n=e.inlineData,r=e.setEditorData,o=nr().isMobile,a=Gf().blogUrl,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),l=i[0],s=i[1],c=(0,Vt.v9)(ZL),u=(0,Vt.v9)($L),d=W$({hasSmilesSelector:!0,inlineData:n,setEditorData:r,publisherRef:t}),f=d.isSmileSelectorOpened,m=d.smileSelectorWrapperRef,p=d.smileButtonRef,h=d.addSmileToInlineData,v=d.onSmilesButtonClick;return(0,Gt.useEffect)((function(){if(p.current){var e=p.current.getBoundingClientRect(),t=zd()+320;e.y+window.scrollY<t&&s(!0)}}),[p]),{isSmileSelectorOpened:f,renderSmilesActionButton:function(e){var t=e.classNames,n=e.renderProps;return Gt.createElement(G$,ase({},n,{ref:p,isActive:f,classNames:t,onClick:v}))},renderSmilesSelector:function(e){var t,n=e.classNames,r=n.container,i=n.underButton;return f&&Gt.createElement("div",{className:cG()(r,(t={},t[i]=l,t)),ref:m},Gt.createElement($$,{smiles:c,smilesNetworkStatus:u,blogUrl:a,isHorizontalNavigation:o,onSelect:h}))}}},lse=function(){var e=JU(),t=Ik({post:e}).canReportPost,n=(0,Vt.I0)(),r=(0,Gt.useCallback)((function(){return n(Qm.action({blogUrl:e.user.blogUrl}))}),[e.id]),o=AV({onReport:r}),a=o.reportText,i=o.sendReport,l=(0,Gt.useMemo)((function(){var e=[];return t&&e.push({text:a,onClick:i,isClickableOnce:!0}),e}),[t,e.poll,a]);return(null==l?void 0:l.length)>0&&Gt.createElement(H0,{classNames:{root:"StreamActionsMenu_iconDotsContainer_I1xTE",icon:"StreamActionsMenu_iconDots_IUMcd",dropdown:"StreamActionsMenu_dropdown_chVkA"},iconGlyph:pk.jgU},l.map((function(e,t){return Gt.createElement(W0,{className:"StreamActionsMenu_item_NoxJO",text:e.text,key:t,onClick:e.onClick,isClickableOnce:e.isClickableOnce})})))},sse=function(e){var t,n=e.isOnline,r=JU(),o=r.user.blogUrl,a=(0,Vt.I0)(),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(IH(o),2),l=i[0],s=i[1],c=(0,Vt.v9)(EA),u=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:o});return Gt.createElement("div",{className:"StreamHeaderWithAuthor_root_priuo"},Gt.createElement("div",{className:"StreamHeaderWithAuthor_headerLeftBlock_l0uwe"},Gt.createElement(cM,{className:"StreamHeaderWithAuthor_avatarBlock_Fc41J",to:u,noStyles:!0},Gt.createElement(PB,{size:g.S,img:r.user.avatarUrl})),Gt.createElement("div",{className:"StreamHeaderWithAuthor_textBlock_G5AwQ"},Gt.createElement(cM,{className:"StreamHeaderWithAuthor_authorName_BAYqZ",to:u,noStyles:!0},r.user.name))),Gt.createElement("div",{className:"StreamHeaderWithAuthor_headerRightBlock_rgAZy"},Gt.createElement(tie,{isOnline:n,className:"StreamHeaderWithAuthor_status_NVxE7"}),Gt.createElement($le,{hasAccess:r.hasAccess,price:r.price,isFreePost:om(r),subscriptionLevelId:null===(t=r.subscriptionLevel)||void 0===t?void 0:t.id,subscriptionLevels:l,networkStatus:s,currency:c,onDropdownShow:function(){s.isFetching||s.isFetched||a(Eb({blogUrl:o}))}}),Gt.createElement(lse,null)))},cse=function(e){var t=e.className,n=e.stream,r=e.onFollow,o=e.onSubscribe,a=e.onPay,i=e.isMuted,l=n.user.blogUrl,s=zU({isAuthorizationRequired:!0,shouldSubscribeToStreamChannelOnMount:!1}),c=s.subscribeOnStreamChannel,u=s.unsubscribeFromStreamChannel,d=(0,Yt.getParametrizedUrl)(ir.BLOG_STREAM,{blogUrl:l,streamId:n.id});return n?Gt.createElement(QU.Provider,{value:n},Gt.createElement("div",{className:cG()(i&&"Stream_muted_F6fcf",t)},Gt.createElement(sse,{isOnline:n.isOnline}),Boolean(n.title)&&Gt.createElement("div",{className:"Stream_title_Tk7eM",title:n.title},n.title),Gt.createElement(Hie,{classNames:{player:Mle},blogUrl:l,stream:n,onSubscribeClick:function(){0===n.subscriptionLevel.price?r():o(n.subscriptionLevel.id,Xu.BLOG_STREAM_SUBSCRIBE)},onPayClick:a,onSubscribeToStreamChannel:function(){c()},onUnsubscribeFromStreamChannel:function(){u()}}),Gt.createElement(Kle,{blogUrl:l,stream:n,linkToStream:d}))):null},use=(0,Qr.getTranslation)("@boosty/common/containers.Blog.desktop.components.AboutAuthorEmpty"),dse=function(){var e=Mf(),t=Gf().blogUrl,n=(0,Vt.v9)(XO),r=null==n?void 0:n.isTutorialFinished;return Gt.createElement("div",{className:"AboutAuthorEmpty_root_NR6iC"},Gt.createElement("div",{className:"AboutAuthorEmpty_picture_wPd4R"}),Gt.createElement("div",{className:"AboutAuthorEmpty_title_zYANK"},r?use.title:use.beginner.title),Gt.createElement("div",{className:"AboutAuthorEmpty_text_LhxeP"},r?use.text:(0,Qr.getParametrizedText)(use.beginner.text,{projectNameCapitalized:nr().projectName.capitalized})),Gt.createElement(Zte,{step:ln.EDIT_ABOUT},Gt.createElement(FB,{onClick:function(){e((0,Yt.getParametrizedUrl)(ir.BLOG_ABOUT_EDIT,{blogUrl:t}))}},r?use.edit:use.beginner.edit)))};const fse={block:"AboutAuthor_block_n7hpb",header:"AboutAuthor_header_z6XqP",title:"AboutAuthor_title_V7wIY",icon:"AboutAuthor_icon_wESPW",content:"AboutAuthor_content_HprOc",fadeIn:"AboutAuthor_fadeIn_LQbn5"};var mse=(0,Qr.getTranslation)("@boosty/common/containers.Blog.desktop.components.AboutAuthor"),pse=function(e){var t=e.editUrl,n=e.className,r=e.description,o=e.showAuth,a=!ta(r),i=Gf(),l=i.blogUrl,s=i.mediaType,c=Mf(),u=bk(l).canEdit;return a||u?Gt.createElement(Hd.Provider,{value:b.ABOUT_AUTHOR},Gt.createElement(qB,{className:cG()(fse.block,n),titleClassName:fse.header,title:Gt.createElement("div",{className:fse.title},Gt.createElement("h2",{className:fse.titleText},mse.aboutAuthor),u&&Gt.createElement("div",{className:fse.titleSettings},Gt.createElement(pB,{glyph:hB.iCC,className:fse.icon,onClick:function(){c((0,Yt.getParametrizedUrl)(t,{blogUrl:l,mediaType:s}))}})))},a?Gt.createElement("div",{className:fse.content},Gt.createElement(BJ,{data:r,showAuth:o})):Gt.createElement(dse,null))):null},hse=function(){var e=(0,Vt.I0)(),t=(0,Vt.v9)(Hw),n=(0,Vt.v9)(bL),r=(0,Vt.v9)(IL),o=fH().showPopup,i=_k().isAuthorized,l=(null==t?void 0:t.isSubscribed)&&!n.some((function(e){return e.isCurrent&&e.price>0}));return{followBlog:function(t){i?l?e((0,dm.Ax)(sy.action)({blogUrl:t})):function(t){var n,i;i=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,e((0,dm.Ax)(ly.action)({blogUrl:t}))];case 1:return n.sent(),r&&o({type:a.AFTER_FOLLOW,data:{blogUrl:t,levelId:"".concat(r.levelId)}}),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function r(e){try{a(i.next(e))}catch(e){t(e)}}function o(e){try{a(i.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(r,o)}a((i=i.apply(undefined,[])).next())}))}(t):o({type:a.AUTH_SIGN_IN})}}};const vse="BlogPageHeader_block_eSQb0";var gse,yse,_se=function(e){var t=e.blog,n=e.stream,r=e.editUrl,o=e.context.onStreamDelete,a=e.showAuth,i=hse().followBlog,l=AH().subscribeByLevel,s=rV().openSinglePayment;return Gt.createElement(Gt.Fragment,null,Gt.createElement(pse,{className:vse,description:t.description,signedQuery:t.signedQuery,showAuth:a,editUrl:r}),n&&Gt.createElement(jle,{className:vse,isAuthorizationRequired:!0,isSmileInfoAbsolute:!0,stream:n,onStreamDelete:o,onFollow:function(){return i(t.blogUrl)},onPay:s,showAuth:a,onSubscribe:l}))},Ese={BLOG:ir.BLOG,STREAM_EDIT:ir.BLOG_STREAM_EDIT,POST_EDIT:ir.BLOG_EDIT_POST,POST_NEW:ir.BLOG_NEW_POST,SUBSCRIPTION_LEVELS_ADD:ir.BLOG_SUBSCRIPTION_LEVELS_ADD,SUBSCRIPTION_LEVELS_EDIT:ir.BLOG_SUBSCRIPTION_LEVELS_EDIT,PURCHASE:ir.BLOG_PURCHASE,PURCHASE_GIFT:ir.BLOG_PURCHASE_GIFT,SINGLE_PAYMENT:ir.BLOG_SINGLE_PAYMENT,SINGLE_PAYMENT_DONATION:ir.BLOG_SINGLE_PAYMENT_DONATION,TARGET_ADD:ir.BLOG_TARGET_ADD,TARGET_EDIT:ir.BLOG_TARGET_EDIT,TRIAL_ACTIVATION:ir.BLOG_TRIAL_ACTIVATION,PHOTO_LAYER:ir.BLOG_PHOTO_LAYER},bse={BLOG:ir.MEDIA,STREAM_EDIT:ir.BLOG_MEDIA_STREAM_EDIT,POST_NEW:ir.BLOG_NEW_POST,PURCHASE:ir.BLOG_MEDIA_PURCHASE,PURCHASE_GIFT:ir.BLOG_MEDIA_PURCHASE_GIFT,SINGLE_PAYMENT:ir.BLOG_MEDIA_SINGLE_PAYMENT,SINGLE_PAYMENT_DONATION:ir.BLOG_MEDIA_SINGLE_PAYMENT_DONATION,TARGET_ADD:ir.BLOG_MEDIA_TARGET_ADD,TARGET_EDIT:ir.BLOG_MEDIA_TARGET_EDIT,TRIAL_ACTIVATION:ir.BLOG_MEDIA_TRIAL_ACTIVATION,PHOTO_LAYER:ir.BLOG_PHOTO_LAYER},Sse={PURCHASE:ir.BLOG_POST_PURCHASE,PURCHASE_GIFT:ir.BLOG_POST_PURCHASE_GIFT,SINGLE_PAYMENT:ir.BLOG_POST_SINGLE_PAYMENT,SINGLE_PAYMENT_DONATION:ir.BLOG_POST_SINGLE_PAYMENT_DONATION,TARGET_ADD:ir.BLOG_POST_TARGET_ADD,TARGET_EDIT:ir.BLOG_POST_TARGET_EDIT,TRIAL_ACTIVATION:ir.BLOG_POST_TRIAL_ACTIVATION,PHOTO_LAYER:ir.BLOG_POST_PHOTO_LAYER},Tse=function(e,t){var n=t.params.blogUrl,r=Hw(e),o=bL(e),a=cR(e),i=[];return r||i.push((function(){return(0,dm.Ax)(Nm.action)({blogUrl:n})})),o.length||i.push((function(){return(0,dm.Ax)(qp.action)({blogUrl:n})})),a.length||i.push((function(){return(0,dm.Ax)(oh.action)({blogUrl:n})})),i},Ise=(0,Qr.getTranslation)("@common/components.BlogBanDisclaimer"),Nse=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.description;return Gt.createElement("div",{className:fB()("BlogBanDisclaimer_root_Gnxbu",null==n?void 0:n.root)},Gt.createElement(pB,{className:fB()("BlogBanDisclaimer_icon_bGkmL",null==n?void 0:n.icon),glyph:hB.I8C}),Gt.createElement("span",{className:fB()("BlogBanDisclaimer_title_BmpYP",null==n?void 0:n.title)},Ise.title),Gt.createElement("span",{className:fB()("BlogBanDisclaimer_description_mb_Gl",null==n?void 0:n.description)},r))},Cse=n(44361),wse=function(e){var t=e.direction,n=void 0===t?"vertical":t,r=e.pagesToKeepPositionBetween,o=function(e){var t,n=e.uniqueScrollContainerKey,r=(0,Gt.useRef)((t=JSON.stringify(n),"scrollPosition_".concat(t))).current;return{saveScrollPositionToStorage:function(e){return zf(r,e.toString())},getScrollPositionFromStorage:function(){var e=jf(r);return e?Number.parseInt(e,10):0},clearScrollPositionFromStorage:function(){return function(e){return Lf(e)}(r)}}}({uniqueScrollContainerKey:JSON.stringify(r)}),a=o.getScrollPositionFromStorage,i=o.saveScrollPositionToStorage,l=o.clearScrollPositionFromStorage,s=function(e){var t=e.direction;return{getWindowScrollPosition:function(){return"horizontal"===t?window.scrollX:window.scrollY},setWindowScrollPosition:function(e){"horizontal"===t?window.scrollTo({left:e,top:window.scrollY}):window.scrollTo({left:window.scrollX,top:e})}}}({direction:n}),c=s.getWindowScrollPosition,u=s.setWindowScrollPosition,d=(0,Gt.useCallback)((0,Cse.Z)((function(e){var t=c();i(t)}),300),[]);return(0,Gt.useLayoutEffect)((function(){return u(a()),window.addEventListener("scroll",d),function(){var e=window.location.pathname;r.includes(e)?i(c()):l(),window.removeEventListener("scroll",d)}}),[]),null},Ose={BLOG:ir.BLOG,STREAM_EDIT:ir.BLOG_STREAM_EDIT,POST_EDIT:ir.BLOG_EDIT_POST,POST_NEW:ir.BLOG_NEW_POST,SUBSCRIPTION_LEVELS_ADD:ir.BLOG_SUBSCRIPTION_LEVELS_ADD,SUBSCRIPTION_LEVELS_EDIT:ir.BLOG_SUBSCRIPTION_LEVELS_EDIT,PURCHASE:ir.BLOG_PURCHASE,PURCHASE_GIFT:ir.BLOG_PURCHASE_GIFT,SINGLE_PAYMENT:ir.BLOG_SINGLE_PAYMENT,SINGLE_PAYMENT_DONATION:ir.BLOG_SINGLE_PAYMENT_DONATION,TARGET_ADD:ir.BLOG_TARGET_ADD,TARGET_EDIT:ir.BLOG_TARGET_EDIT,TRIAL_ACTIVATION:ir.BLOG_TRIAL_ACTIVATION};!function(e){e[e.FILTER=0]="FILTER",e[e.SEARCH=1]="SEARCH"}(gse||(gse={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SEARCH=1]="SEARCH"}(yse||(yse={}));var Ase=function(){return JH(),null},Pse=(0,Qr.getTranslation)("@boosty/common/containers.Blog.components.FeedEmpty.components.Empty"),Lse=function(e){var t=e.showViewForCreator,n=nr().isMobile;return Gt.createElement("div",{className:"Empty_root_yIgHh"},!(t&&!n)&&Gt.createElement("div",{className:"Empty_picture_lwM5v"}),Gt.createElement("div",{className:"Empty_title_ghTWE"},t?Pse.emptyFeed.forOwner:Pse.emptyFeed.forOthers))},Rse=(0,Qr.getTranslation)("@boosty/common/containers.Blog.components.FeedEmpty.components.EmptyWithFilter"),kse=function(e){var t=e.className,n=e.onFilterReset;return Gt.createElement("div",{className:cG()("EmptyWithFilter_container_dFxaj",t)},Gt.createElement(pB,{className:"EmptyWithFilter_loupeIcon_qQ_fy",glyph:hB.B0F}),Gt.createElement("div",{className:"EmptyWithFilter_title_VbLUh"},Rse.title),Gt.createElement("div",{className:"EmptyWithFilter_subTitle_G2obC"},(0,Qr.getReactText)(Rse.subtitle,{ResetText:function(e){var t=e.text;return Gt.createElement(Gt.Fragment,null,Gt.createElement("br",null),Gt.createElement("span",{className:"EmptyWithFilter_clickableText_iWPK5",onClick:n},t))}})))},Dse=function(e){var t=e.className,n=e.isFilterApplied,r=e.showViewForCreator,o=e.onFilterReset;return n?Gt.createElement(kse,{className:t,onFilterReset:o}):Gt.createElement(Lse,{showViewForCreator:r})};const Use="PostTag_icon_uVOR6",Bse="PostTag_title_GxOeW";var xse=function(e){var t,n,r=e.tag,o=e.headline,a=e.isDeletable,i=e.isSelected,l=e.onClick;return Gt.createElement("div",{className:cG()("PostTag_root_sJU6G",(t={},t.PostTag_rootSelected_cPtsy=i,t),(n={},n.PostTag_rootDeletable_r1L3X=a,n)),onClick:function(e){e.preventDefault(),l&&l(r)}},i&&Gt.createElement(pB,{className:cG()(Use,"PostTag_iconSelected_N0jLE"),glyph:hB.zfo}),o?Gt.createElement(NQ,{className:Bse,highlight:o,text:r.title}):Gt.createElement("span",{className:Bse},r.title),a&&Gt.createElement(pB,{className:cG()(Use,"PostTag_iconDeletable_wl94z"),glyph:hB.o7I}))},Mse=function(e){var t=e.tags,n=e.selectedTagsIds,r=e.headline,o=e.onClickTag;return Gt.createElement("div",{className:"PostTags_root_K_e6Z"},t.map((function(e){return Gt.createElement(xse,{key:e.id,isSelected:null==n?void 0:n.includes(e.id),tag:e,headline:r,onClick:o})})))},Fse=(0,Gt.createContext)(null),Gse=(0,Qr.getTranslation)("@boosty/common/components.Post.components.PostActionsMenu"),Hse=function(){var e=(0,Gt.useContext)(Fse),t=e.canRetractVote,n=e.canReportPost,r=e.hasAccessToPost,o=e.canEditPost,a=e.canPublishPost,i=e.retractVote,l=e.editCurrentPost,s=e.deleteCurrentPost,c=e.publishCurrentPost,u=JU(),d=SV().reportPost,f=(0,Gt.useCallback)((function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){return[2,null==d?void 0:d({post:u})]}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t}),[u.id,d]),m=AV({onReport:f}),p=m.reportText,h=m.sendReport,v=(0,Gt.useMemo)((function(){var e=[];return n&&e.push({text:p,onClick:h,isClickableOnce:!0}),t&&e.push({text:Gse.retractVote,onClick:i,isClickableOnce:!0}),o&&(e.push({text:Gse.edit,onClick:l}),e.push({text:Gse.delete,onClick:s})),a&&!u.isPublished&&e.push({text:Gse.publish,onClick:c}),e}),[n,t,u.poll,r,p]);return(null==v?void 0:v.length)>0&&Gt.createElement(H0,{classNames:{root:"PostActionsMenu_iconDotsContainer_AsNdJ",icon:"PostActionsMenu_iconDots_UdMez",dropdown:"PostActionsMenu_dropdown_MBXoD"},iconGlyph:pk.jgU},v.map((function(e,t){return Gt.createElement(W0,{className:"PostActionsMenu_item_iBw7B",text:e.text,key:t,onClick:e.onClick,isClickableOnce:e.isClickableOnce})})))},Wse=function(e){var t=e.url,n=JU(),r=n.id,o=n.publishTime,a=n.user.blogUrl,i=xf(),l=cm(i.pathname).isFeedPage,s=t||(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:a,postId:r});return Gt.createElement(cM,{className:"CreatedAt_headerLink_8cVbd",to:s,state:{isFromFeed:l}},_o(o))};const Vse="BasePostHeader_headerDeferredLabel_yAMvm";var jse=(0,Qr.getTranslation)("@boosty/common/components.Post.desktop.components.BasePostHeader"),zse=function(){var e,t=JU(),n=(0,Vt.v9)(bL),r=(0,Vt.v9)(EA),o=Gt.createElement(pB,{glyph:hB.RkH,className:"BasePostHeader_scheduledIcon_wYOVT"});return Gt.createElement("div",{className:"BasePostHeader_root_EZ8yT"},Gt.createElement("div",{className:"BasePostHeader_headerLeftBlock_bKBOS"},t.isPublished?t.isWaitingVideo?Gt.createElement(Gt.Fragment,null,o,Gt.createElement("span",{className:Vse},jse.willPublishAfterProcessingVideo)):Gt.createElement(Gt.Fragment,null,Gt.createElement(Wse,null)):Gt.createElement(Gt.Fragment,null,o,Gt.createElement("span",{className:Vse},jse.willPublish),Gt.createElement(Wse,null))),Gt.createElement("div",{className:"BasePostHeader_headerRightBlock_Kg7Py"},Gt.createElement($le,{hasAccess:t.hasAccess,price:t.price,isFreePost:om(t),subscriptionLevelId:null===(e=t.subscriptionLevel)||void 0===e?void 0:e.id,subscriptionLevels:n,currency:r}),Gt.createElement(Hse,null)))},Yse=function(e){var t=e.onAttachmentClick,n=e.isDisabled,r=e.classNames,o=void 0===r?{}:r;return Gt.createElement("button",{type:"button",className:fB()("AttachmentButton_attachContainer_O1Ybf",o.attachContainer),disabled:n},Gt.createElement(pB,{glyph:hB.nwm,className:fB()("AttachmentButton_iconAttach_tRVxA",o.iconAttach),onClick:t}))},Kse=function(e){var t,n=e.warningText,r=e.hasError,o=e.className,a=e.children;return Gt.createElement("div",{className:cG()("CommentPublisherWarningWrapper_root_e1C4W",o,(t={},t.CommentPublisherWarningWrapper_error_mtDyP=r,t))},r&&Gt.createElement("div",{className:"CommentPublisherWarningWrapper_warning_aTy1u"},Gt.createElement(pB,{glyph:pk.FCX,className:"CommentPublisherWarningWrapper_iconWarning_zIGya"}),n),a)};const qse={root:"EditingLabel_root_HOMpZ",editingIcon:"EditingLabel_editingIcon_pYfB1",closeIcon:"EditingLabel_closeIcon_BIK_I",closeButton:"EditingLabel_closeButton_ZoVQz",text:"EditingLabel_text_Gpbll",fadeIn:"EditingLabel_fadeIn_DvpHk"};var Xse=(0,Qr.getTranslation)("@boosty/common/components.Post.components.CommentPublisher.components.EditingLabel"),Qse=function(e){var t=e.className,n=e.isSaving,r=e.onCancelClick,o=n?"".concat(Xse.saving,"..."):Xse.editing;return Gt.createElement("div",{className:cG()(qse.root,t,n&&qse.saving)},Gt.createElement(pB,{glyph:hB.wf2,className:qse.editingIcon}),Gt.createElement("span",{className:qse.text},o),!n&&Gt.createElement("button",{className:qse.closeButton,onClick:function(){r()}},Gt.createElement(pB,{glyph:hB.bMz,className:qse.closeIcon})))};const Jse={root:"PhotoPreviewItem_root_cb09P",img:"PhotoPreviewItem_img_BS4t_",spinnerWrapper:"PhotoPreviewItem_spinnerWrapper_cB8km",button:"PhotoPreviewItem_button_y4sUO",icon:"PhotoPreviewItem_icon_z8obk",disabled:"PhotoPreviewItem_disabled_QQ5q8",fadeIn:"PhotoPreviewItem_fadeIn_lSG59"};var Zse=function(e){var t,n,r=e.image,o=e.className,a=e.isDisabled,i=e.onDeleteButtonClick,l=!!wD(r)&&r.status.isFetching,s=(0,Gt.useMemo)((function(){var e;return wD(r)?r.status.isFetching&&r.uploaded.data?"undefined"!=typeof window&&window.URL.createObjectURL(r.uploaded.data):null===(e=r.file)||void 0===e?void 0:e.url:r.url}),[l]);return Gt.createElement("div",{className:cG()(Jse.root,o,(t={},t[Jse.disabled]=a,t))},Gt.createElement("img",{className:cG()(Jse.img,(n={},n[Jse.loading]=l,n)),src:s}),l&&Gt.createElement("div",{className:Jse.spinnerWrapper},Gt.createElement(uM,{solid:!0,size:40})),!a&&Gt.createElement("button",{className:Jse.button,type:"button",onClick:function(){var e=wD(r)?r.uploaded.uploadId:r.id;i(e)}},Gt.createElement(pB,{className:Jse.icon,glyph:hB.bMz})))},$se=(0,Qr.getTranslation)("@boosty/common/components.Post.components.CommentPublisher.components.ReplyTo"),ece=function(e){var t=e.replyName,n=e.onCancelClick,r=e.className,o=nr().isMobile?hB.bMz:hB.$kn;return Gt.createElement("div",{className:cG()("ReplyTo_root_czAXe",r)},Gt.createElement(pB,{glyph:hB.hX,className:"ReplyTo_replyIcon_b2MU_"}),Gt.createElement("span",{className:"ReplyTo_text_HCbVn"},$se.replyTo," ",t),Gt.createElement("button",{className:"ReplyTo_closeButton_vnAHX",onClick:function(){n()}},Gt.createElement(pB,{glyph:o,className:"ReplyTo_closeIcon_o4tl4"})))},tce=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},nce=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},rce=function(e){return"".concat(e,",&nbsp;")},oce=function(e){return new RegExp("^\\s*".concat((0,ii.escapeRegExp)(e),",\\s*"))},ace=function(e,t){return oce(t).test(Yk(e))},ice=function(e){var t=e.textData,n=e.replyComment,r=e.setTextData,o=e.onAddReplyName,a=Ok(n),i=t.length&&t[0].type===pe.TEXT&&t[0];return(0,Gt.useEffect)((function(){n?(function(e){if(i){if(!ace(i,e)){var n="".concat(rce(e)).concat(Yk(i));r(nce(nce([],tce(tD(n)),!1),tce(t.slice(1)),!1))}}else r(nce(nce([],tce(tD(rce(e))),!1),tce(t),!1))}(n.author.name),o()):a&&function(e){if(i){var n=Yk(i).replace(oce(e),"");r(nce(nce([],tce(tD(n)),!1),tce(t.slice(1)),!1))}}(a.author.name)}),[n]),{startsWithReply:ace,getReplyToRegExp:oce}};const lce={iconSend:"CommentPublisher_iconSend_OMMmA",iconAttach:"CommentPublisher_iconAttach_DTLoD",checkIconSend:"CommentPublisher_checkIconSend_jrovJ",editor:"CommentPublisher_editor_aTxJZ",editorDisabled:"CommentPublisher_editorDisabled_BtUbx",actionsContainer:"CommentPublisher_actionsContainer_STYWf",smileContainer:"CommentPublisher_smileContainer_kRLgJ",root:"CommentPublisher_root__Xfqz",sticky:"CommentPublisher_sticky_wULLv",hasBorder:"CommentPublisher_hasBorder_XyTbR",focused:"CommentPublisher_focused_AysPJ",avatarWrapper:"CommentPublisher_avatarWrapper_Bzg5_",content:"CommentPublisher_content_EpowF",uploadedPreview:"CommentPublisher_uploadedPreview__k6eK",previewItem:"CommentPublisher_previewItem_aO2mg",replyHeader:"CommentPublisher_replyHeader_YBnu8",middleMain:"CommentPublisher_middleMain_fZxvd",checkIconSendContainer:"CommentPublisher_checkIconSendContainer_N7CMs",buttonContainer:"CommentPublisher_buttonContainer_yoEjv",editingLabel:"CommentPublisher_editingLabel_xXEKP",publisherWrapper:"CommentPublisher_publisherWrapper_NObfz",smileSelector:"CommentPublisher_smileSelector_Q9mVU",isReply:"CommentPublisher_isReply_d1zi0",attachContainerEditing:"CommentPublisher_attachContainerEditing_kZGx8",smileSelectorLower:"CommentPublisher_smileSelectorLower_jwLuv",fadeIn:"CommentPublisher_fadeIn_BgzPI"};var sce=function(){return sce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sce.apply(this,arguments)},cce=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},uce=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},dce=(0,Qr.getTranslation)("@boosty/common/components.Post.components.CommentPublisher"),fce=1e3,mce=function(e){var t,n,r,o=e.avatarUrl,a=e.isSticky,i=e.replyComment,l=e.commentToEdit,s=e.isEditingSaving,c=e.alwaysHasBorder,u=void 0!==c&&c,d=e.className,f=e.onPublish,m=e.onReplyCancelClick,p=e.onCancelEditingClick,h=void 0===p?Yt.noop:p,v=(0,Gt.useRef)(null),y=(0,Gt.useRef)(null),_=cce((0,Gt.useState)(""),2),E=_[0],b=_[1];(0,Gt.useEffect)((function(){b(Math.random().toString())}),[]);var S=jG().showAlert,T=function(e,t){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(e),2),r=n[0],o=n[1];return(0,Gt.useEffect)((function(){if(e){var n=(0,ii.throttle)((function(){if(t.current){var e=t.current.getBoundingClientRect().bottom>=window.innerHeight;o(e)}}),200);return document.addEventListener("scroll",n),function(){document.removeEventListener("scroll",n)}}return ii.noop}),[e]),r}(a,y)||u,I=nr(),N=I.comments.maxAttachedImages,C=I.isMobile,w=Boolean(l),O=function(){m()},A=cH({clearOnSubmit:!w,initialValue:null==l?void 0:l.data,maxInlineDataLength:fce,showAlert:S,publish:function(e){return void 0,void 0,n=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){return t=uce(uce([],cce(e.inlineData),!1),cce(e.imagesData),!1),f(t),O(),[2]}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n}}),P=A.editorData,L=A.inlineData,R=A.inlineDataLength,k=A.images,D=A.onInlineDataChange,U=A.onPublish,B=A.openAttachDialog,x=A.deleteFile,M=A.setEditorData,F=ice({textData:L,replyComment:i,setTextData:M,onAddReplyName:function(){setTimeout((function(){var e,t;null===(t=null===(e=v.current)||void 0===e?void 0:e.editorJs)||void 0===t||t.caret.setToLastBlock("end",0)}))}}).getReplyToRegExp;(0,Gt.useEffect)((function(){var e;i&&!C&&(null===(e=v.current)||void 0===e||e.scrollIntoView())}),[i]);var G=(0,Gt.useMemo)((function(){if(L.some((function(e){return e.type!==pe.TEXT})))return!1;var e=L.reduce((function(e,t){try{return e+Yk(t)}catch(t){return e}}),"");return!(!i||!F(i.author.name).test(e)||0!==e.replace(F(i.author.name),"").trim().length)||0===e.trim().length}),[L,i]),H=function(){B()},W=ise({publisherRef:v,inlineData:L,setEditorData:M}),V=W.renderSmilesActionButton,j=W.renderSmilesSelector,z=W.isSmileSelectorOpened,Y=R>=fce,K=k.length>0,q=k.length>=N,X=k.some((function(e){return wD(e)&&e.status.isFetching})),Q=G&&!K||X||s||Y,J=ose();return Gt.createElement("div",{className:cG()(lce.root,(t={},t[lce.sticky]=a,t[lce.hasBorder]=T,t[lce.focused]=z,t),d),ref:y,id:E},Gt.createElement("div",{className:lce.topLeft}),Gt.createElement("div",{className:lce.topMain},w?Gt.createElement(Qse,{className:lce.editingLabel,isSaving:s,onCancelClick:h}):i&&Gt.createElement(ece,{replyName:i.author.name,className:lce.replyHeader,onCancelClick:O})),Gt.createElement("div",{className:lce.middleLeft},!C&&Gt.createElement("div",{className:lce.avatarWrapper},Gt.createElement(PB,{img:o,className:lce.avatar,size:g.S}))),Gt.createElement("div",{className:lce.middleMain},Gt.createElement(Kse,{warningText:"".concat(dce.warning," ").concat(fce),hasError:Y,className:lce.publisherWrapper},Gt.createElement(I$,{ref:v,classNames:{editor:lce.editor,editorDisabled:lce.editorDisabled,iconSend:cG()(lce.iconSend,(n={},n[lce.checkIconSend]=w,n)),sendContainer:cG()(lce.buttonContainer,lce.sendContainer,(r={},r[lce.checkIconSendContainer]=w,r)),actionsContainer:lce.actionsContainer},editorTools:J,isInlineActions:!0,renderActionsRight:function(e){return Gt.createElement(Gt.Fragment,null,Gt.createElement(Yse,sce({classNames:{iconAttach:lce.iconAttach,attachContainer:cG()(lce.buttonContainer,lce.attachContainer,w&&lce.attachContainerEditing)},onAttachmentClick:H},e,{isDisabled:e.isDisabled||q})),V({classNames:{root:cG()(lce.buttonContainer,lce.smileContainer)},renderProps:e}))},isDisabled:s,placeholder:dce.placeholder,submitIcon:w?hB.NOm:hB.h9l,isSubmitButtonDisabled:Q,hasError:Y,editorData:P,inlineData:L,onInlineDataChange:D,onPublish:U,setEditorData:M}))),j({classNames:{container:lce.smileSelector,underButton:lce.smileSelectorLower}}),Gt.createElement("div",{className:lce.bottomLeft}),Gt.createElement("div",{className:lce.bottomMain},Gt.createElement("div",{className:lce.uploadedPreview},K&&k.map((function(e){return Gt.createElement(Zse,{className:lce.previewItem,image:e,key:wD(e)?e.uploaded.uploadId:e.id,onDeleteButtonClick:x,isDisabled:s})})))))},pce=(0,Qr.getTranslation)("@boosty/common/components.Post.components.BlacklistedNote"),hce=function(){return Gt.createElement("div",{className:"BlacklistedNote_container_BYfFt"},Gt.createElement("div",{className:"BlacklistedNote_blacklisted_qJ3xO"},pce.blacklisted))},vce=function(e){var t=e.avatarUrl;return Gt.createElement("div",{className:"Blacklisted_container_GTuq5"},Gt.createElement(PB,{img:t,className:"Blacklisted_avatar_vtl_T"}),Gt.createElement(hce,null))},gce=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},yce=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},_ce=function(e){var t=e.postId,n=e.renderProp,r=function(e){var t=e.postId,n=(0,Vt.I0)(),r=JU(),o=r.user.blogUrl,a=_k().currentUser,i=r.user.id===(null==a?void 0:a.id),l={removeCommentFromStore:function(e){n(O_({postId:t,commentId:e}))},onRemoveComment:function(e){var r=e.commentId;n((0,dm.Ax)(N_.action)({blogUrl:o,postId:t,commentId:r}))},onReportComment:function(e){n((0,dm.Ax)(S_.action)({blogUrl:o,postId:t,commentId:e}))},onReactionComment:function(e,r){return gce(void 0,void 0,void 0,(function(){return yce(this,(function(a){switch(a.label){case 0:return[4,n((0,dm.Ax)(C_.action)({blogUrl:o,postId:t,commentId:e,reaction:r,isOwner:i}))];case 1:return a.sent(),[2]}}))}))},onRemoveReactionComment:function(e){return gce(void 0,void 0,void 0,(function(){return yce(this,(function(r){switch(r.label){case 0:return[4,n((0,dm.Ax)(w_.action)({blogUrl:o,postId:t,commentId:e,isOwner:i}))];case 1:return r.sent(),[2]}}))}))},onRestoreComment:function(e){n((0,dm.Ax)(A_.action)({blogUrl:o,postId:t,commentId:e}))},onPutToBlackList:function(e,r){n((0,dm.Ax)(bm.action)({userId:e,blogUrl:o,commentId:r,postId:t}))}};return{actions:l}}({postId:t}).actions;return Gt.createElement(Gt.Fragment,null,n({actions:r}))},Ece=function(e){var t=e.children,n=e.onClick,r=e.className;return Gt.createElement("div",{className:cG()("ShowMore_showMore_VRTFG",r),onClick:n},t)};const bce={menuInlineIconsContainer:"CommentMenu_menuInlineIconsContainer_PzgO2",inlineIcon:"CommentMenu_inlineIcon_EEhFZ",menuItemIcon:"CommentMenu_menuItemIcon_hEPBK",edit:"CommentMenu_edit_ZSVE9",inlineButton:"CommentMenu_inlineButton_dQxUu",removeButton:"CommentMenu_removeButton_U0CAC",inlineButtonTooltip:"CommentMenu_inlineButtonTooltip_gmsZn",menuDropdownIconContainer:"CommentMenu_menuDropdownIconContainer_zopdH",menuIcon:"CommentMenu_menuIcon_ambS_",dropdownContainer:"CommentMenu_dropdownContainer_de0Gb",dropdown:"CommentMenu_dropdown_QMRti",dropdownItem:"CommentMenu_dropdownItem_kS9iW",iconBlock:"CommentMenu_iconBlock_BJoFO",dropdownItemDisabled:"CommentMenu_dropdownItemDisabled_YS5vd",fadeIn:"CommentMenu_fadeIn_aJTdB"};var Sce=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Tce=(0,Qr.getTranslation)("@boosty/common/components.Post.components.CommentMenu"),Ice=function(e){var t,n=e.className,r=e.forceClose,o=e.onReportComment,a=e.onRemoveComment,i=e.onBlock,l=e.onEditComment,s=e.showInDropdown,c=void 0!==s&&s,u=nr().isMobile,d=Sce((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=Sce((0,Gt.useState)(!1),2),h=p[0],v=p[1];return(0,Gt.useEffect)((function(){r&&m(!1)}),[r]),a||o||l?u||o||c?Gt.createElement("div",{className:n},Gt.createElement("div",{className:bce.menuDropdownIconContainer,onClick:function(){return m(!0)}},Gt.createElement(pB,{glyph:hB.y9O,className:bce.menuIcon})),f&&Gt.createElement("div",{className:bce.dropdownContainer},Gt.createElement(Dx,{trigger:gx.CLICK,onClickOutside:function(){return m(!1)}},Gt.createElement("div",{className:bce.dropdown},o&&Gt.createElement("div",{className:cG()(bce.dropdownItem,(t={},t[bce.dropdownItemDisabled]=h,t)),onClick:function(){h||(o(),v(!0))}},Gt.createElement(pB,{glyph:hB.GhR,className:bce.menuItemIcon})," ",Tce[h?"reportSent":"report"]),l&&Gt.createElement("div",{className:bce.dropdownItem,onClick:l},Gt.createElement(pB,{glyph:hB.wf2,className:cG()(bce.menuItemIcon,bce.edit)})," ",Tce.edit),a&&Gt.createElement("div",{className:bce.dropdownItem,onClick:a},Gt.createElement(pB,{glyph:hB.Fzz,className:bce.menuItemIcon})," ",Tce.remove),i&&Gt.createElement("div",{className:bce.dropdownItem,onClick:i},Gt.createElement(pB,{glyph:hB.FJo,className:cG()(bce.menuItemIcon,bce.iconblock)})," ",Tce.block))))):Gt.createElement("div",{className:n},Gt.createElement("div",{className:bce.menuInlineIconsContainer},l&&Gt.createElement(Dx,{trigger:gx.HOVER,content:Tce.edit,align:yx.LEFT_TOP,classNames:{content:bce.inlineButtonTooltip}},Gt.createElement("button",{className:cG()(bce.inlineButton,bce.editButton),onClick:l},Gt.createElement(pB,{glyph:hB.wf2,className:bce.inlineIcon}))),a&&Gt.createElement(Dx,{trigger:gx.HOVER,content:Tce.remove,align:yx.LEFT_TOP,classNames:{content:bce.inlineButtonTooltip}},Gt.createElement("button",{className:cG()(bce.inlineButton,bce.removeButton),onClick:a},Gt.createElement(pB,{glyph:hB.Fzz,className:bce.inlineIcon}))))):null},Nce=(0,Qr.getTranslation)("@boosty/common/components.Post.components.CommentView.components.ReplyTo"),Cce=function(e){var t=e.user,n=e.commentId,r=JU(),o=xf(),a=cm(o.pathname).isFeedPage,i=(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:r.user.blogUrl,postId:r.id},{comment:n});return Gt.createElement(cM,{to:i,className:"ReplyTo_text_G3OtY",itemProp:"author",reloadDocument:!0,state:{isFromFeed:a}},Nce.replyTo," ",t.name)},wce=function(e){var t=[],n=[];return e.forEach((function(e){(function(e){return oa(e)||ia(e)||ra(e)})(e)&&t.push(e),e.type===pe.IMAGE&&n.push(e)})),{inlineContent:t,images:n}},Oce=(0,Qr.getTranslation)("@boosty/common/components.Post.components.PostAuthorIcon"),Ace=function(){return Gt.createElement(pB,{glyph:pk.alo,className:"PostAuthorIcon_authorIcon_QRF_2",title:Oce.author})};const Pce={container:"PublishingComment_container_vEx_0",left:"PublishingComment_left_lZYit",info:"PublishingComment_info_RLeAv",avatar:"PublishingComment_avatar_aRAHp",header:"PublishingComment_header_wNBZo",name:"PublishingComment_name_H6Z7T",content:"PublishingComment_content_KsSkU",bottomBlock:"PublishingComment_bottomBlock_OJ6Hn",bottomLabel:"PublishingComment_bottomLabel_gFiDO",thread:"PublishingComment_thread_x6SPs",commentMenu:"PublishingComment_commentMenu_IMzX1",errorIconWrapper:"PublishingComment_errorIconWrapper_qW5zz",errorIcon:"PublishingComment_errorIcon_qMSL9",closeButton:"PublishingComment_closeButton_WT8iA",closeIcon:"PublishingComment_closeIcon_U_ZdV",errorBlock:"PublishingComment_errorBlock_ML4cU",retryButton:"PublishingComment_retryButton_j27vY",fadeIn:"PublishingComment_fadeIn_FY4jJ"};var Lce=(0,Qr.getTranslation)("@boosty/common/components.Post.components.PublishingComment"),Rce=function(e){var t=e.comment,n=e.author,r=e.avatarSize,o=e.onCancelClick,a=e.onRetryClick,i=t.commentData,l=t.status,s=JU().user.id===n.id,c=wce(i),u=c.inlineContent,d=c.images;return Gt.createElement(Hd.Provider,{value:b.COMMENTS},Gt.createElement("div",{className:Pce.container,"data-published":t.publishTimestamp},Gt.createElement("div",{className:Pce.left},Gt.createElement(PB,{img:n.avatarUrl,size:r,className:Pce.avatar}),Gt.createElement("div",{className:Pce.info},Gt.createElement("div",{className:Pce.header},Gt.createElement("span",{className:Pce.name,itemProp:"author"},n.name),s&&Gt.createElement(Ace,null),function(e){return Boolean(e.replyComment)&&Ca(e.replyComment)}(t)&&Gt.createElement(Cce,{user:t.replyComment.author,commentId:t.replyComment.intId})),Gt.createElement("span",{className:Pce.content},Gt.createElement(BJ,{data:u}),Gt.createElement(d8,{images:d})),Gt.createElement("div",{className:Pce.bottomBlock},Gt.createElement("span",{className:Pce.bottomLabel},l===qe.ERROR?Lce.notSend:_o(t.publishTimestamp/1e3)),l===qe.ERROR&&Gt.createElement(VB,{className:Pce.retryButton,onClick:function(){return a(t.publishTimestamp,t.commentData,t.replyComment)}},Lce.retry))),l===qe.LOADING&&Gt.createElement("div",{className:Pce.loading},Gt.createElement(uM,{size:25,thick:!0,solid:!0})),l===qe.ERROR&&Gt.createElement("div",{className:Pce.errorBlock},Gt.createElement(Ice,{onRemoveComment:function(){return o(t.publishTimestamp)},showInDropdown:!0}),Gt.createElement("div",{className:Pce.errorIconWrapper,title:Lce.error},Gt.createElement(pB,{glyph:pk.Ucq,className:Pce.errorIcon}))))))};const kce="RemovedComment_link_uGVce";var Dce=(0,Qr.getTranslation)("@boosty/common/components.Post.components.RemovedComment"),Uce=function(e){var t=e.canBlock,n=e.onBlockClick,r=e.onRestoreCommentClick;return Gt.createElement("div",{className:"RemovedComment_root_B5frq"},Gt.createElement("div",null,Dce.commentRemoved," ",Gt.createElement("span",{onClick:r,className:kce},Dce.restore)),t&&Gt.createElement("div",{onClick:n,className:kce},Dce.block))},Bce=[{id:z.LIKE,icon:hB.CNt},{id:z.DISLIKE,icon:hB.Blp},{id:z.HEART,icon:hB.cPq},{id:z.FIRE,icon:hB.ytx},{id:z.WONDER,icon:hB.vRd},{id:z.SAD,icon:hB.Dl3},{id:z.LAUGHT,icon:hB.pz1},{id:z.ANGRY,icon:hB.Tfd}],xce=function(e,t){var n=Boolean(null==t?void 0:t.author)?3:4;return Object.keys(e).sort((function(t,n){return e[n]-e[t]})).filter((function(n){return n!==(null==t?void 0:t.author)&&e[n]>0})).slice(0,n)},Mce=function(e){return Bce.find((function(t){return t.id===(null==e?void 0:e.author)}))},Fce=function(e){return Bce.reduce((function(t,n){return t+e[n.id]}),0)},Gce=function(e){var t=e.className,n=e.reactionAuthor,r=e.avatarUrl;return Gt.createElement(Gt.Fragment,null,Gt.createElement("span",{className:t},Gt.createElement(PB,{img:r,size:g.XXXS})),Gt.createElement(pB,{className:fB()(t,"ReactionAuthor_reactionAuthor_LJns_"),glyph:n.icon}))};const Hce="ReactionsApplied_icon_QBOyu";var Wce=function(e){var t=e.className,n=e.classNameIcon,r=e.appliedReactions,o=e.reactionAuthor,a=JU();return Gt.createElement("div",{className:fB()(t,"ReactionsApplied_content_mKbKS")},Boolean(o)&&Gt.createElement(Gce,{className:fB()(Hce,n),reactionAuthor:o,avatarUrl:a.user.avatarUrl}),r.map((function(e,t){var o=Bce.find((function(t){return t.id===e})),a=o.id,i=o.icon,l={zIndex:r.length-t};return Gt.createElement(pB,{key:a,glyph:i,className:fB()(Hce,n),style:l})})))},Vce=function(e){var t,n,r=e.className,o=e.type,a=e.counter,i=e.authorAvatar,l=e.icon,s=e.isReacted,c=a>99?"99+":a;return Gt.createElement("div",{className:fB()(r,"ReactionItem_container_wnpeD",(t={},t.ReactionItem_selected_cLjSI=s,t)),onClick:function(){return e.onReactionClick(o)}},Gt.createElement("div",{className:"ReactionItem_info_wPdsn"},a>0&&Gt.createElement("div",{className:fB()("ReactionItem_counter_nXgHz",(n={},n.ReactionItem_selectedReaction_Emh4k=s,n))},c),i&&Gt.createElement(PB,{img:i,className:"ReactionItem_avatar_QSLr2",size:g.XXXS})),Gt.createElement(pB,{className:"ReactionItem_icon_lMZoY",glyph:l}))},jce=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.align,o=e.reactions,a=e.reacted,i=e.canReact,l=void 0===i||i,s=e.children,c=e.authorAvatarUrl;return Gt.createElement(Dx,{align:r,trigger:gx.HOVER,classNames:{root:fB()("ReactionSelector_tooltipContainer_wBGho",n.tooltipContainer),content:fB()("ReactionSelector_tooltipContent_bLUvV",n.tooltipContent),childrenWrapper:"ReactionSelector_tooltipChildrenWrapper_eIh9f"},content:Gt.createElement("div",{className:"ReactionSelector_content_IOxTQ"},Bce.map((function(t){var n,r=t.id,i=t.icon,s=o[r],u=(null==a?void 0:a.actor)===r,d=(null==a?void 0:a.author)===r?c:null;return Gt.createElement(Vce,{className:fB()((n={},n.ReactionSelector_disabled_nYDvy=!l,n)),key:r,authorAvatar:d,counter:s,type:r,icon:i,isReacted:u,onReactionClick:e.onReactionClick})})))},s)},zce=function(e){var t,n,r=e.isDeletedComment,o=e.isMobile,a=e.isMouseOver,i=e.reactions,l=e.reacted,s=Fce(i),c=xce(i,l),u=Mce(l),d=Boolean(u),f=Boolean(null==l?void 0:l.actor),m=d||c.length>0,p=!r&&(o||!f&&a);return Gt.createElement(jce,{classNames:{tooltipContainer:fB()("ReactionsComment_tooltipContainer_pLZu8",(t={},t.ReactionsComment_withReactions_NUMvB=m,t)),tooltipContent:"ReactionsComment_tooltipContent_wWHD8"},align:yx.RIGHT,reactions:i,reacted:l,onReactionClick:e.onReactionClick},Gt.createElement("div",{className:"ReactionsComment_content_nrQUX"},m&&Gt.createElement("div",{className:"ReactionsComment_info__yzyz"},Gt.createElement(Wce,{className:"ReactionsComment_reactionsContainer_VBVcS",classNameIcon:"ReactionsComment_appliedReaction_yK0Di",reactionAuthor:u,appliedReactions:c}),Gt.createElement("div",{className:"ReactionsComment_amount_IHAfs"},s)),p&&Gt.createElement(pB,{className:fB()("ReactionsComment_iconReaction_zESOb",(n={},n.ReactionsComment_iconReactionMargin_Phlx2=!m,n)),glyph:hB.ueZ})))},Yce=function(e){var t,n=e.canReact,r=JU(),o=r.count.reactions,a=r.reacted,i=Fce(o),l=xce(o,a),s=Mce(a),c=Boolean(null==a?void 0:a.actor),u=Boolean(s)||l.length>0;return Gt.createElement(jce,{canReact:n,classNames:{tooltipContent:"ReactionsPost_tooltipContent_VfqNF"},align:yx.LEFT,reactions:o,reacted:a,onReactionClick:e.onReactionClick},Gt.createElement("div",{className:"ReactionsPost_content_dS4SZ"},!c&&Gt.createElement(pB,{className:fB()("ReactionsPost_iconReaction__RBom",(t={},t.ReactionsPost_iconReactionMargin_TSBJ3=u,t)),glyph:hB.ueZ}),u&&Gt.createElement("div",{className:"ReactionsPost_reactionsInfo_s7yON"},Gt.createElement(Wce,{classNameIcon:"ReactionsPost_appliedReaction_oFM2T",appliedReactions:l}),Gt.createElement("div",{className:"ReactionsPost_amount_xhaFo"},i))))},Kce=function(e){return"comment:".concat(e)},qce=(0,Qr.getTranslation)("@boosty/common/components.Post.components.BlockedIcon"),Xce=function(){return Gt.createElement(Dx,{trigger:gx.CLICK,align:yx.CENTER,content:qce.blocked,classNames:{content:"BlockedIcon_tooltip_vFpVW"}},Gt.createElement(pB,{glyph:pk.FJo,className:"BlockedIcon_blockedIcon_X7OGn",title:qce.blocked}))},Qce=(0,Qr.getTranslation)("@boosty/common/components.Post.components.CommentView.components.CreatedAtDate"),Jce=function(e){var t=e.createdAt,n=e.isEdited,r=e.commentId,o=JU(),a=(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:o.user.blogUrl,postId:o.id},{comment:r});return Gt.createElement(cM,{to:a,className:"CreatedAtDate_text_mTtf9",reloadDocument:!0},_o(t)," ",n&&"(".concat(Qce.edited,")"))};const Zce="CommentView_disabled_OagTt";var $ce=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},eue=(0,Qr.getTranslation)("@boosty/common/components.Post.components.CommentView"),tue=function(e){var t,n,r,o,a=e.comment,i=a.createdAt,l=a.author,s=a.data,c=a.replyToUser,u=a.replyId,d=a.isDeleted,f=a.isBlocked,m=a.isUpdated,p=a.intId,h=a.publishTimestamp,v=a.reacted,y=a.reactions,_=JU(),E=nr().isMobile,b=$ce((0,Gt.useState)(!1),2),S=b[0],T=b[1],I=$ce((0,Gt.useState)(!1),2),N=I[0],C=I[1],w=bH(),O=bk(_.user.blogUrl).canCreateComments,A=e.avatarSize,P=void 0===A?g.S:A,L=e.className,R=e.isHighlighted,k=e.isFlashing,D=d||f,U=wce(s),B=U.inlineContent,x=U.images,M=Ok(e.isDisabled);return(0,Gt.useEffect)((function(){!M&&e.isDisabled?C(!0):M&&!e.isDisabled&&C(!1)}),[e.isDisabled]),Gt.createElement("div",{className:cG()("CommentView_container_nRpEk",(t={},t.CommentView_highlighted_B4jfg=R,t.CommentView_flash_jzMG8=k,t[Zce]=e.isDisabled,t),L),id:Kce(p),"data-published":h},Gt.createElement("div",{className:cG()("CommentView_commentWrapper_iWBv8",(n={},n.CommentView_removing_rihmj=e.isRemoving,n)),itemProp:"review",itemType:"https://schema.org/Review",itemScope:!0,onMouseLeave:function(){return T(!1)},onMouseOver:function(){return T(!0)}},Gt.createElement("meta",{itemProp:"datePublished",content:go(i,"yyyy/MM/dd")}),Gt.createElement("div",{className:"CommentView_left_YsT2_"},Gt.createElement(PB,{img:D||null==l?void 0:l.avatarUrl,className:"CommentView_avatar_gipgB",size:P}),Gt.createElement("div",{className:"CommentView_info_NZX5P"},Gt.createElement("div",{className:"CommentView_header_GYHHc"},Gt.createElement("span",{className:cG()("CommentView_name_rDuK_",(r={},r[Zce]=D||w(l.id),r)),itemProp:"author"},l.name),e.commentAuthorIsPostAuthor&&Gt.createElement(Ace,null),O&&w(l.id)&&Gt.createElement(Xce,null),(o=e.comment,Boolean(Ca(o)&&o.replyId&&o.replyToUser)&&Gt.createElement(Cce,{user:c,commentId:u}))),Gt.createElement("span",{className:"CommentView_content_Wn_lx",itemProp:"reviewBody"},D?Gt.createElement("div",{className:"CommentView_isDeleted_kWXI4"},d?eue.isDeleted:eue.isBlocked):Gt.createElement(Gt.Fragment,null,Gt.createElement(BJ,{data:B}),Gt.createElement(d8,{images:x,commentId:p}))),Gt.createElement("div",{className:"CommentView_bottomBlock_J7QmR"},Gt.createElement(Jce,{createdAt:i,commentId:p,isEdited:m}),e.canReply&&!D&&Gt.createElement("span",{className:"CommentView_reply_bPHy8",onClick:e.onReplyClick},eue.reply),Gt.createElement(zce,{isDeletedComment:d,isMobile:E,isMouseOver:S,reacted:v,reactions:y,onReactionClick:e.onReactionClick,postAuthor:l}))),!D&&(E||S)&&Gt.createElement(Ice,{className:"CommentView_commentMenu_Tpw5c",onReportComment:e.canReport?e.onReportClick:null,onRemoveComment:e.canRemove?e.onRemoveClick:null,onEditComment:e.canEdit?e.onEditClick:null,onBlock:e.canBlock?e.onBlockClick:null,forceClose:N}))))};const nue={root:"PhotoPreviewItem_root_ssEgL",img:"PhotoPreviewItem_img_Iu3Fb",spinnerWrapper:"PhotoPreviewItem_spinnerWrapper_c8ce8",button:"PhotoPreviewItem_button_Y3TMo",icon:"PhotoPreviewItem_icon_iOfPh",disabled:"PhotoPreviewItem_disabled_mH8cy",fadeIn:"PhotoPreviewItem_fadeIn_t52hk"};var rue=function(e){var t,n,r=e.image,o=e.onDeleteButtonClick,a=e.className,i=e.disabled,l=!!wD(r)&&r.status.isFetching,s=(0,Gt.useMemo)((function(){var e;return wD(r)?r.status.isFetching&&r.uploaded.data?"undefined"!=typeof window&&window.URL.createObjectURL(r.uploaded.data):null===(e=r.file)||void 0===e?void 0:e.url:r.url}),[l]);return Gt.createElement("div",{className:cG()(nue.root,a,(t={},t[nue.disabled]=i,t))},Gt.createElement("img",{className:cG()(nue.img,(n={},n[nue.loading]=l,n)),src:s}),l&&Gt.createElement("div",{className:nue.spinnerWrapper},Gt.createElement(uM,{solid:!0,size:40})),!i&&Gt.createElement("button",{className:nue.button,type:"button",onClick:function(){var e=wD(r)?r.uploaded.uploadId:r.id;o(e)}},Gt.createElement(pB,{className:nue.icon,glyph:hB.bMz})))};const oue={editor:"EditedComment_editor_rxrbX",actionsContainer:"EditedComment_actionsContainer_MI6Gn",editorDisabled:"EditedComment_editorDisabled_cp35I",leftColumn:"EditedComment_leftColumn_pMx0L",mainColumn:"EditedComment_mainColumn_LPL7C",header:"EditedComment_header_O5Z_C",name:"EditedComment_name_aGToX",editingLabel:"EditedComment_editingLabel_k4tIU",root:"EditedComment_root_A2u8L",avatarWrapper:"EditedComment_avatarWrapper_NbsMr",uploadedPreview:"EditedComment_uploadedPreview_RC2D1",previewItem:"EditedComment_previewItem_BzohV",footerButtons:"EditedComment_footerButtons_s5E2u",publisherWrapper:"EditedComment_publisherWrapper_Y5yVW",attachContainer:"EditedComment_attachContainer_vf6FV",iconAttach:"EditedComment_iconAttach_bNhqs",smileContainer:"EditedComment_smileContainer_VS7cn",iconSmile:"EditedComment_iconSmile_PrabE",smileSelector:"EditedComment_smileSelector_G5EWq",isReply:"EditedComment_isReply_Tn1Yo",smileSelectorLower:"EditedComment_smileSelectorLower_Rbq21",fadeIn:"EditedComment_fadeIn_nhLWF"};var aue=function(){return aue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},aue.apply(this,arguments)},iue=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},lue=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},sue=(0,Qr.getTranslation)("@boosty/common/components.Post.desktop.components.Comments.components.EditedComment"),cue=1e3,uue=function(e){var t=e.comment,n=e.className,r=e.avatarSize,o=void 0===r?g.S:r,a=e.finishEditing,i=iue((0,Gt.useState)(""),2),l=i[0],s=i[1];(0,Gt.useEffect)((function(){s(Math.random().toString())}),[]);var c=(0,Gt.useRef)(null),u=jG().showAlert,d=function(e){var t=(0,Vt.I0)(),n=JU(),r=(0,Vt.v9)(Ow);return{saveEditedComment:function(r){var o,a,i=r.originalComment,l=r.newCommentData;return void 0,void 0,a=function(){var r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t((0,dm.Ax)(I_.action)({blogUrl:n.user.blogUrl,postId:n.id,commentData:l,originalComment:i}))];case 1:return o.sent(),[3,3];case 2:throw r=o.sent(),e({type:p.ERROR,text:tW.error}),r;case 3:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function r(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(n,r)}i((a=a.apply(undefined,[])).next())}))},isCommentSaving:function(e){var t;return Boolean(null===(t=null==r?void 0:r[e])||void 0===t?void 0:t.isFetching)}}}(u),f=d.saveEditedComment,m=(0,d.isCommentSaving)(t.intId),h=cH({clearOnSubmit:!1,initialValue:null==t?void 0:t.data,maxInlineDataLength:cue,showAlert:u,publish:function(e){return void 0,void 0,r=function(){var n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return n=lue(lue([],iue(e.inlineData),!1),iue(e.imagesData),!1),(0,ii.isEqual)(n,t.data)?[3,2]:[4,f({originalComment:t,newCommentData:n})];case 1:r.sent(),r.label=2;case 2:return a(),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r}}),v=h.inlineData,y=h.editorData,_=h.images,E=h.inlineDataLength,b=h.onInlineDataChange,S=h.onPublish,T=h.openAttachDialog,I=h.deleteFile,N=h.setEditorData;(0,Gt.useEffect)((function(){null==c||c.current.focus()}),[m]);var C=function(){T()},w=E>=cue,O=_.length>0,A=_.length>=nr().comments.maxAttachedImages,P=_.some((function(e){return wD(e)&&e.status.isFetching})),L=0===E&&0===_.length,R=ose(),k=ise({publisherRef:c,inlineData:v,setEditorData:N}),D=k.renderSmilesActionButton,U=k.renderSmilesSelector;return Gt.createElement("div",{className:cG()(oue.root,n),id:l},U({classNames:{container:oue.smileSelector,underButton:oue.smileSelectorLower}}),Gt.createElement("div",{className:oue.leftColumn},Gt.createElement("div",{className:oue.avatarWrapper},Gt.createElement(PB,{img:t.author.avatarUrl,className:oue.avatar,size:o}))),Gt.createElement("div",{className:oue.mainColumn},Gt.createElement("div",{className:oue.header},Gt.createElement("span",{className:oue.name},t.author.name),Gt.createElement("span",{className:oue.editingLabel},m?"".concat(sue.saving,"..."):sue.editing)),Gt.createElement(Kse,{hasError:w,warningText:"".concat(sue.warning," ").concat(cue),className:oue.publisherWrapper},Gt.createElement(I$,{ref:c,classNames:{editor:oue.editor,editorDisabled:oue.editorDisabled,actionsContainer:oue.actionsContainer},editorTools:R,renderActionsRight:function(e){return Gt.createElement(Gt.Fragment,null,Gt.createElement(Yse,aue({classNames:{attachContainer:oue.attachContainer,iconAttach:oue.iconAttach},onAttachmentClick:C},e,{isDisabled:e.isDisabled||A})),D({classNames:{root:oue.smileContainer,icon:oue.iconSmile},renderProps:e}))},isDisabled:m,editorData:y,inlineData:v,isInlineActions:!0,hasSubmitButton:!1,hasAutoFocus:!0,hasError:w,onInlineDataChange:function(e){b(e)},onPublish:Yt.noop,onKeyDown:function(e){e.key===ae.ENTER&&(e.ctrlKey||e.metaKey)&&S()},setEditorData:N})),O&&Gt.createElement("div",{className:oue.uploadedPreview},_.map((function(e){return Gt.createElement(rue,{className:oue.previewItem,image:e,key:wD(e)?e.uploaded.uploadId:e.id,onDeleteButtonClick:I,disabled:m})}))),Gt.createElement("div",{className:oue.footerButtons},Gt.createElement(FB,{isDisabled:L||P||m,onClick:function(){S()}},sue.save),Gt.createElement(HB,{isDisabled:m,onClick:function(){a()}},sue.cancel))))},due=function(e){var t=_k().isAuthorized,n=BH(e),r=n.canRemoveComment,o=n.isRemoved,a=n.isRemoving,i=n.remove,l=n.restoreComment,s=ZH(e.comment.author),c=MH(e),u=c.canReplyComment,d=c.replyOnComment,f=VH(e),m=f.canReportComment,p=f.report,h=WH(e),v=h.canReactOnComment,y=h.removeReaction,_=h.reactionOnComment,E=UH(e),b=E.canBlockComment,S=E.blockComment,T=wx(e.comment.intId).isHighlighted,I=eW(e),N=I.isEditing,C=I.startEditing,w=I.finishEditing,O=I.canEdit;return o?Gt.createElement(Uce,{onRestoreCommentClick:l,onBlockClick:S,canBlock:b}):N?Gt.createElement(uue,{comment:e.comment,finishEditing:w,className:"CommentInThread_edited_hgHtq",avatarSize:g.XS}):Gt.createElement("div",null,Gt.createElement(tue,{comment:e.comment,canRemove:r,onRemoveClick:i,isRemoving:a,onRestoreClick:l,canReply:u,onReplyClick:function(){d(e.comment)},canReaction:v,onReactionClick:function(n){var r,o;t?v&&!e.comment.isDeleted&&((null===(o=null===(r=e.comment)||void 0===r?void 0:r.reacted)||void 0===o?void 0:o.actor)===n?y(e.comment.id):_(e.comment.id,n)):(e.showAuth(),bd.log.auth.openPopup({source:ot.POST_COMMENT_REACTION}))},canReport:m,onReportClick:p,canBlock:b,onBlockClick:S,commentAuthorIsPostAuthor:s,avatarSize:g.XS,isHighlighted:T,className:"CommentInThread_comment_eiE1f",canEdit:O,onEditClick:C}))};const fue={spinner:"Thread_spinner_FmOTV",marginWrapper:"Thread_marginWrapper_inojP"};var mue=function(){return mue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mue.apply(this,arguments)},pue=(0,Qr.getTranslation)("@boosty/common/components.Post.desktop.components.Comments.components.Thread"),hue=function(e){var t,n=e.comment,r=e.replyOnComment,o=JU(),a=(0,Vt.v9)(XO),i=jG().showAlert,l=rse(o).publishingCommentsList,s=qH({showAlert:i,parentId:n.intId}),c=s.hasEarlierComments,u=s.loadEarlierComments,d=s.areEarlierCommentsFetching,f=s.hasLaterComments,m=s.loadLaterComments,p=s.areLaterCommentsFetching,h=null==l?void 0:l.thread[n.intId],v=$H(n.intId),y=v.cancel,_=v.retry;return(null===(t=n.replies)||void 0===t?void 0:t.data.length)||(null==h?void 0:h.length)||0!==n.replyCount?Gt.createElement("div",{className:fue.container},Gt.createElement(_ce,{postId:null==o?void 0:o.id,renderProp:function(t){var l,s,v=t.actions;return Gt.createElement("div",{className:cG()(fue.list)},n.replyCount>0&&!(null===(l=n.replies)||void 0===l?void 0:l.data.length)&&!(null==h?void 0:h.length)&&!d&&Gt.createElement("div",{className:fue.marginWrapper},Gt.createElement(Ece,{onClick:u},pue.showReplies," (",n.replyCount,")")),d?Gt.createElement("div",{className:fue.marginWrapper},Gt.createElement(uM,{size:20,className:fue.spinner,thick:!0})):c&&Gt.createElement("div",{className:fue.marginWrapper},Gt.createElement(Ece,{onClick:u},pue.showMore)),null===(s=n.replies)||void 0===s?void 0:s.data.map((function(t){return Gt.createElement(due,{showAlert:i,showAuth:e.showAuth,comment:t,post:o,key:t.intId,actions:mue(mue({},v),{onReplyComment:r,onEditComment:Yt.noop})})})),p?Gt.createElement("div",{className:fue.marginWrapper},Gt.createElement(uM,{size:20,className:fue.spinner,thick:!0})):f&&Gt.createElement("div",{className:fue.marginWrapper},Gt.createElement(Ece,{onClick:m},pue.showMore)),a&&(null==h?void 0:h.map((function(t){return wa(t)?Gt.createElement(due,{showAlert:i,showAuth:e.showAuth,comment:t.publishedComment,post:o,key:t.publishedComment.intId,actions:mue(mue({},v),{onReplyComment:r,onEditComment:Yt.noop})}):Gt.createElement("div",{className:fue.marginWrapper,key:"reply:publishing:".concat(t.publishTimestamp)},Gt.createElement(Rce,{comment:t,author:a,avatarSize:g.XS,onCancelClick:y,onRetryClick:_}))}))))}})):null},vue=function(e){var t=_k().isAuthorized,n=BH(e),r=n.canRemoveComment,o=n.isRemoved,a=n.isRemoving,i=n.remove,l=n.restoreComment,s=UH(e),c=s.canBlockComment,u=s.blockComment,d=MH(e),f=d.canReplyComment,m=d.replyOnComment,p=VH(e),h=p.canReportComment,v=p.report,g=WH(e),y=g.canReactOnComment,_=g.removeReaction,E=g.reactionOnComment,S=ZH(e.comment.author),T=wx(e.comment.intId).isHighlighted,I=eW(e),N=I.isEditing,C=I.startEditing,w=I.finishEditing,O=I.canEdit;return Gt.createElement(Hd.Provider,{value:b.COMMENTS},Gt.createElement("div",null,N?Gt.createElement(uue,{comment:e.comment,finishEditing:w}):o?Gt.createElement(Uce,{onRestoreCommentClick:l,onBlockClick:u,canBlock:c}):Gt.createElement(tue,{comment:e.comment,canRemove:r,onRemoveClick:i,isRemoving:a,onRestoreClick:l,canReply:f,onReplyClick:function(){m(e.comment)},canReaction:y,onReactionClick:function(n){var r,o;t?y&&!e.comment.isDeleted&&((null===(o=null===(r=e.comment)||void 0===r?void 0:r.reacted)||void 0===o?void 0:o.actor)===n?_(e.comment.id):E(e.comment.id,n)):(e.showAuth(),bd.log.auth.openPopup({source:ot.POST_COMMENT_REACTION}))},canReport:h,onReportClick:v,canEdit:O,onEditClick:C,onBlockClick:u,canBlock:c,commentAuthorIsPostAuthor:S,isHighlighted:T}),Gt.createElement(hue,{showAuth:e.showAuth,comment:e.comment,replyOnComment:m})))};const gue={spinner:"CommentsList_spinner_DDvM8"};var yue=function(){return yue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yue.apply(this,arguments)},_ue=(0,Qr.getTranslation)("@boosty/common/components.Post.desktop.components.Comments.components.CommentsList"),Eue=Gt.memo((function(e){var t=e.comments,n=e.publishingComments,r=e.onReplyComment,o=e.showAuth,a=JU(),i=(0,Vt.v9)(XO),l=jG().showAlert,s=qH({showAlert:l}),c=s.hasEarlierComments,u=s.loadEarlierComments,d=s.areEarlierCommentsFetching,f=s.hasLaterComments,m=s.loadLaterComments,p=s.areLaterCommentsFetching,h=s.areInitialCommentsFetching,v=$H(),g=v.cancel,y=v.retry;return Gt.createElement(_ce,{postId:null==a?void 0:a.id,renderProp:function(e){var s=e.actions;return Gt.createElement("div",{className:cG()(gue.container)},0===t.length&&h&&Gt.createElement(uM,{size:20,className:gue.spinner,thick:!0}),d?Gt.createElement(uM,{size:20,className:gue.spinner,thick:!0}):c&&Gt.createElement(Ece,{onClick:u},_ue.showMore),t.map((function(e){return Gt.createElement(vue,{showAlert:l,showAuth:o,comment:e,post:a,key:e.intId,actions:yue(yue({},s),{onReplyComment:r,onEditComment:Yt.noop})})})),p?Gt.createElement(uM,{size:20,className:gue.spinner,thick:!0}):f&&Gt.createElement(Ece,{onClick:m},_ue.showMore),i&&(null==n?void 0:n.map((function(e){return wa(e)?Gt.createElement(vue,{showAlert:l,showAuth:o,comment:e.publishedComment,post:a,key:e.publishedComment.intId,actions:yue(yue({},s),{onReplyComment:r,onEditComment:Yt.noop})}):Gt.createElement(Rce,{comment:e,onCancelClick:g,onRetryClick:y,key:"comment:publishing:".concat(e.publishTimestamp),author:i})}))))}})}));Eue.displayName="CommentsList";var bue=(0,Qr.getTranslation)("@boosty/common/components.Post.components.NotAuthorizedNote"),Sue=function(e){var t=e.showAuthPopup;return Gt.createElement("div",{className:"NotAuthorizedNote_container_WZCZv"},Gt.createElement("div",{className:"NotAuthorizedNote_authText_Y51Ow"},Gt.createElement("span",{className:"NotAuthorizedNote_link_EKS7o",onClick:t},bue.auth)," ",bue.toComment))},Tue=function(e){var t=e.showAuthPopup;return Gt.createElement("div",{className:"NotAuthorizedForComment_container_AnvZD"},Gt.createElement(PB,{className:"NotAuthorizedForComment_avatar_HFsdp",img:void 0}),Gt.createElement(Sue,{showAuthPopup:t}))};const Iue={muted:"Post_muted_x08mh",settingsContainer:"Post_settingsContainer_x6Ojh",contentWrapper:"Post_contentWrapper_gtBnX",contentWrapperTeaser:"Post_contentWrapperTeaser_qdHKq",content:"Post_content_mwhce",paragraph:"Post_paragraph_xtVeK",noIndent:"Post_noIndent_GJRwH",poll:"Post_poll_YIV6u",footer:"Post_footer_NWxJl",title:"Post_title_xWnNo",italic:"Post_italic_r6brx",bold:"Post_bold_xvpN6",underline:"Post_underline_MccS2",audio:"Post_audio_ShKut",file:"Post_file_zilE9",padded:"Post_padded_OxQKw",first:"Post_first_uNsIB",image:"Post_image_cQHET",last:"Post_last_W4NnP",shading:"Post_shading_voyr7",readMore:"Post_readMore_ntDXu",showPost:"Post_showPost_HNYz1",root:"Post_root_0fEms",rootWithOverlay:"Post_rootWithOverlay_JXWrH",deleted:"Post_deleted_b2F4t",commentsDenied:"Post_commentsDenied_hsxEO",commentsDeniedHasComments:"Post_commentsDeniedHasComments_rbWku",comments:"Post_comments_HLgqX",fadeIn:"Post_fadeIn_dHr9T"};var Nue=(0,Qr.getTranslation)("@boosty/common/components.Post.desktop.components.Comments"),Cue=function(e){var t,n=e.showCommentsList,r=e.showCommentPublisher,o=e.post,a=e.isBlacklisted,i=e.areCommentsDenied,l=e.publisherClassName,s=mH().showAuth,c=_k().isAuthorized,u=(0,Vt.v9)(XO),d=function(e){var t,n,r=nr().comments,o=r.feedLimit,a=r.feedRepliesLimit;if(e.comments.data.length>o)return!0;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e.comments.data),l=i.next();!l.done;l=i.next())if(l.value.replies.data.length>a)return!0}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1}(o)||e.isStickyPublisher,f=function(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),t=e[0],n=e[1];return{replyComment:t,replyOnComment:function(e){n(xH({},e))},cancelReply:function(){n(null)}}}(),m=f.replyOnComment,p=f.cancelReply,h=f.replyComment,v=rse(o),g=v.publishPostComment,y=v.publishingCommentsList;return Gt.createElement("div",{className:Iue.comments,id:"comments"},n&&Gt.createElement(Eue,{showAuth:s,comments:null==o?void 0:o.comments.data,publishingComments:null==y?void 0:y.post[o.id],onReplyComment:function(e){m(e)},onEditComment:Yt.noop}),r?c?a?Gt.createElement(vce,{avatarUrl:null==u?void 0:u.avatarUrl}):Gt.createElement(mce,{onPublish:function(e){g(e,h)},avatarUrl:null==u?void 0:u.avatarUrl,replyComment:h,onReplyCancelClick:p,isSticky:d,className:l}):Gt.createElement(Tue,{showAuthPopup:s}):i&&Gt.createElement("div",{className:cG()(Iue.commentsDenied,(t={},t[Iue.commentsDeniedHasComments]=am(o),t))},Nue.commentsDenied))},wue=function(e){var t=e.item,n=t.user,r=t.createdAt,o=t.amount,a=e.isGoToDialogBtnShown,i=e.onDialogBtnClick,l=e.currency;return Gt.createElement("div",{className:"PostDonationsItem_root_M17SY"},Gt.createElement(PB,{size:g.XS,img:n.avatarUrl,className:"PostDonationsItem_avatar_PGyVR"}),Gt.createElement("div",{className:"PostDonationsItem_username_T891S"},n.name),Gt.createElement("div",{className:"PostDonationsItem_date_fjnyu"},go(r,"dd/MMM/&/HH/mm")),Gt.createElement("div",{className:"PostDonationsItem_sumLabel_s0DmA"},Gt.createElement(fM,{sum:o,currency:l})),a&&Gt.createElement(cM,{to:(0,Yt.getParametrizedUrl)(ir.MESSAGES,{},{userId:n.id}),className:"PostDonationsItem_dialogButton_DXYMJ",onClick:i},Gt.createElement(pB,{glyph:hB.YJo,className:"PostDonationsItem_dialogIcon_InrB8"})))},Oue=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.donations,o=e.loadMoreDonations,a=e.isLoading,i=e.onDialogBtnClick,l=JU(),s=Sk(l.user.blogUrl),c=nr().currencies.default,u=(0,Vt.v9)(EA),d=s?c:u;return Gt.createElement(UM,{className:cG()("PostDonations_root_xcKXB",n.root)},Gt.createElement("div",{className:cG()("PostDonations_list_osd_B",n.list)},r.map((function(e){return Gt.createElement(wue,{item:e,key:e.id,isGoToDialogBtnShown:s,currency:d,onDialogBtnClick:i})})),Gt.createElement(FM,{onShow:o,className:"PostDonations_loadMoreSensor_EkJAW"}),a&&Gt.createElement("div",{className:"PostDonations_spinnerWrapper_G1r5v"},Gt.createElement(uM,{size:30,solid:!0}))))};const Aue={donationsIcon:"Donations_donationsIcon_fcLUq",root:"Donations_root_bJRBM",donationsButton:"Donations_donationsButton_yboet",disabled:"Donations_disabled_LQrQY",donationsButtonTooltip:"Donations_donationsButtonTooltip_BpBhG",donatorsTooltip:"Donations_donatorsTooltip_u4Lrz",donatorsTooltipContent:"Donations_donatorsTooltipContent_r1LcL",donationsTotal:"Donations_donationsTotal_j8xmu",interactive:"Donations_interactive_cfwjA",donatorsRoot:"Donations_donatorsRoot_nkRvX",disableHeightBounds:"Donations_disableHeightBounds_TBLGc",fadeIn:"Donations_fadeIn_RKIZg"};var Pue=(0,Qr.getTranslation)("@boosty/common/components.Post.desktop.components.Donations"),Lue=function(){var e,t,n=nr().currencies.default,o=JU(),a=Sk(o.user.blogUrl),i=WV({post:o}).openDonationPayment,l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=(0,Vt.v9)(EA),d=a?n:u,f=function(e,t){var n,r,o,a,i,l=(0,Vt.I0)(),s=(0,Vt.v9)(Uw),c=(0,Vt.v9)(FR),u=null==s?void 0:s.find((function(t){return t.id===e})),d=null===(n=null==c?void 0:c.find((function(t){return t.post.id===e})))||void 0===n?void 0:n.post,f=u||d,m=null===(r=(0,Vt.v9)(eR)[e])||void 0===r?void 0:r.isFetching,p=(0,Gt.useCallback)((function(){var e;!m&&f&&l(hy({blogUrl:t,postId:f.int_id,offset:null===(e=f.donators)||void 0===e?void 0:e.extra.offset}))}),[null==f?void 0:f.donators.data,m]);return{donations:(null===(o=null==f?void 0:f.donators)||void 0===o?void 0:o.data)||[],loadMoreDonations:p,isLoading:m,isLast:null===(i=null===(a=null==f?void 0:f.donators)||void 0===a?void 0:a.extra)||void 0===i?void 0:i.isLast}}(o.id,o.user.blogUrl),m=f.donations,p=f.isLast,h=f.isLoading,v=f.loadMoreDonations,g=p&&m.length<=7,y=Qo(r.SHARE_DONATION_LINK);return Gt.createElement("div",{className:Aue.root},Gt.createElement(Dx,{align:yx.CENTER_TOP,content:Pue.sendTip,trigger:gx.HOVER,classNames:{content:cG()(Aue.donationsButtonTooltip,s&&Aue.hide)}},Gt.createElement("button",{onClick:function(){i()},className:cG()(Aue.donationsButton,a&&!y&&Aue.disabled)},Gt.createElement(pB,{glyph:hB.iMT,className:Aue.donationsIcon}))),a&&o.donations>0?Gt.createElement(HF,{content:Gt.createElement(Oue,{donations:m,classNames:{root:cG()(Aue.donatorsRoot,g&&Aue.disableHeightBounds)},isLast:p,isLoading:h,loadMoreDonations:v}),position:NF.TOP_START,isGlobal:!0,trigger:IF.CLICK,classNames:{root:Aue.donatorsTooltip,content:Aue.donatorsTooltipContent},onToggleOpen:function(e){c(e)}},o.donations>0&&Gt.createElement("div",{className:cG()(Aue.donationsTotal,Aue.interactive)},Gt.createElement(fM,{currency:d,sum:o.donations}))):((null===(t=null===(e=null==o?void 0:o.user)||void 0===e?void 0:e.flags)||void 0===t?void 0:t.showPostDonations)||a)&&o.donations>0?Gt.createElement("div",{className:Aue.donationsTotal},Gt.createElement(fM,{currency:d,sum:o.donations})):null)},Rue=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},kue=(0,Qr.getTranslation)("@boosty/common/components.Poll.components.FinishTime"),Due=function(e){var t=e.className,n=e.finishTime,r=e.isFinished,o=(0,Gt.useRef)(null),a=Rue((0,Gt.useState)(!r),2),i=a[0],l=a[1],s=Rue((0,Gt.useState)(""),2),c=s[0],u=s[1],d=function(){var e=No(Date.now());if(n<=e)return l(!1),void u(kue.finished);var t=n-e,r=Math.ceil(t/60);u(r<60?qr([(0,Qr.getParametrizedText)(kue.lessThanHour.label1,{minutes:r}),(0,Qr.getParametrizedText)(kue.lessThanHour.label2,{minutes:r}),(0,Qr.getParametrizedText)(kue.lessThanHour.label5,{minutes:r})],r):(0,Qr.getParametrizedText)(kue.moreThanHour,{date:go(n,"dd/MMM/&/HH/mm")}))};return(0,Gt.useEffect)((function(){if(d(),i)return o.current=setInterval(d,15e3),function(){clearInterval(o.current)}}),[i]),(0,Gt.useEffect)((function(){i||clearInterval(o.current)}),[i]),Gt.createElement("div",{className:cG()("FinishTime_root_sNyOi",t)},c)},Uue=function(e){var t=e.className;return Gt.createElement("div",{className:cG()("PollLoading_root_QFeq2",t)},Gt.createElement(uM,{size:50,thick:!0}))};const Bue={root:"VoteCounter_root_T244A"};var xue=(0,Qr.getTranslation)("@boosty/common/components.Poll.components.VoteCounter"),Mue=function(e){var t=e.counter,n=e.onShowMoreClick;return Gt.createElement("div",{className:Bue.root},0===t?xue.empty:(0,Qr.getReactText)((0,Qr.getParametrizedText)(qr(xue.hasVotes,t),{count:t}),{ShowMore:function(e){var t=e.text;return n?Gt.createElement(VB,{className:Bue.showMore,onClick:n},t):Gt.createElement("span",null,t)}}))};const Fue={root:"Poll_root_bQamX",header:"Poll_header_I89Rr",option:"Poll_option_pIohl",finishTime:"Poll_finishTime_iOx3b",label:"Poll_label_pMgAz",fadeIn:"Poll_fadeIn_ttsQY"};var Gue,Hue=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Wue=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Vue=(0,Qr.getTranslation)("@boosty/common/components.Poll"),jue=function(e){var t,n=nr().isMobile,r=e.className,o=e.poll,a=e.isAuthorized,i=e.isLoading,l=void 0!==i&&i,s=e.isReadOnly,c=void 0!==s&&s,u=e.isCounterVisible,d=void 0===u||u,f=e.isFinishTimeVisible,m=void 0===f||f,p=e.areResultsVisible,h=void 0!==p&&p,v=e.canUserSeePollAsAuthor,g=void 0!==v&&v,y=e.onVoteCommit,_=void 0===y?Yt.noop:y,E=e.onVoteRetract,b=void 0===E?Yt.noop:E,S=e.onPollDetailsClick,T=e.onPollFinish,I=void 0===T?Yt.noop:T,N=e.showAuth,C=void 0===N?Yt.noop:N,w=o.answer,O=o.counter,A=o.title,P=o.options,L=o.finishTime,R=o.isFinished,k=o.isMultiple;!function(e){var t=e.targetTimestamp,n=e.delayInterval,r=e.callback,o=(0,Gt.useRef)(),a=(0,Gt.useCallback)((function(){Date.now()>=t&&r()}),[r,t]);(0,Gt.useEffect)((function(){if(Date.now()<t)return o.current=window.setInterval(a,n||6e4),function(){window.clearInterval(o.current)}}),[n,r,t])}({targetTimestamp:vo(L),callback:I});var D=Hue((0,Gt.useState)([]),2),U=D[0],B=D[1],x=Boolean(w)&&0!==w.length,M=k&&!x&&!c&&!R,F=(0,Gt.useCallback)((function(e){a?k?function(e){U.includes(e)?B(U.filter((function(t){return t!==e}))):B(Wue(Wue([],Hue(U),!1),[e],!1))}(e):function(e){(null==w?void 0:w.includes(e))?b():_([e])}(e):C()}),[a,w,U,k]);return Gt.createElement("div",{className:cG()(Fue.root,r)},l&&Gt.createElement(Uue,null),Gt.createElement("div",{className:Fue.header},m&&Boolean(L)&&Gt.createElement(Due,{className:Fue.finishTime,finishTime:L,isFinished:R}),Gt.createElement("span",{className:cG()(Fue.label,(t={},t[Fue.labelWithFinishTime]=Boolean(L),t))},A)),P.map((function(e,t){var r;return Gt.createElement(g7,{key:e.id,className:cG()((r={},r[Fue.option]=t!==P.length-1||k,r)),data:e,showPollDetails:!n&&g,showResult:h,isVoted:null==w?void 0:w.includes(e.id),isPending:null==U?void 0:U.includes(e.id),isCheckboxVisible:!c&&k&&!x,isDisabled:c||l||k&&x,onClick:F})})),M&&Gt.createElement(FB,{className:Fue.voteButton,isDisabled:!U.length,onClick:function(){_(U),B([])}},Vue.vote),d&&!M&&Gt.createElement(Mue,{className:Fue.voteCounter,onShowMoreClick:g?S:null,counter:O}))};!function(e){e.SINGLE_PAYMENT="SINGLE_PAYMENT",e.SUBSCRIPTION="SUBSCRIPTION",e.SUBSCRIPTION_TRIAL="SUBSCRIPTION_TRIAL",e.SUBSCRIPTION_DISCOUNT="SUBSCRIPTION_DISCOUNT",e.COMPLEX="COMPLEX"}(Gue||(Gue={}));var zue=function(e){var t,n=e.buttonText,r=e.hasUnlockIcon,o=e.label,a=e.description,i=e.subText,l=e.onClick;return Gt.createElement("div",{className:"PostSubscriptionBlockFooter_root_vbZFO"},o&&Gt.createElement("div",{className:"PostSubscriptionBlockFooter_label_jVJm0"},o),a&&Gt.createElement("div",{className:"PostSubscriptionBlockFooter_description_loFcT"},a),Gt.createElement(FB,{className:cG()("PostSubscriptionBlockFooter_button_gHtdM",(t={},t.PostSubscriptionBlockFooter_unlockButton_UZdOW=r,t)),onClick:function(){l()}},r&&Gt.createElement(pB,{glyph:pk.ajb,className:"PostSubscriptionBlockFooter_unlockIcon_N95YO"}),n),i&&Gt.createElement("div",{className:"PostSubscriptionBlockFooter_subText_lDtjE"},i))};const Yue="PostSubscriptionBlock_title_WXCN0",Kue="PostSubscriptionBlock_teaser_vz_CJ";var que=function(){return que=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},que.apply(this,arguments)},Xue=(0,Qr.getTranslation)("@boosty/common/components.Post.components.PostSubscriptionBlock"),Que={width:575,height:625},Jue=function(e){var t,n,r=e.titleHeadline,o=e.teaserHeadline,i=e.isPostPage,l=e.onSubscribeClick,s=e.onPayClick,c=e.imageLinkRoute,u=JU(),d=u.id,f=u.currencyPrices,m=u.price,p=u.subscriptionLevel,h=u.teaser,v=u.title,g=u.user,y=u.signedQuery,_=g.blogUrl,E=xf().state,b=OH(),S=null===(n=null==p?void 0:p.promos)||void 0===n?void 0:n[0],T=Mf(),I=null==p?void 0:p.price,N=null==p?void 0:p.name,C=function(e){var t=e.promo,n=e.subscriptionLevelPrice>0,r=e.postPrice>0,o=t&&ka(t),a=t&&Ua(t);return r&&!n?Gue.SINGLE_PAYMENT:n&&!r?o?Gue.SUBSCRIPTION_TRIAL:a?Gue.SUBSCRIPTION_DISCOUNT:Gue.SUBSCRIPTION:n&&r?Gue.COMPLEX:null}({postPrice:m,subscriptionLevelPrice:I,promo:S}),w=ni(h),O=w.teaserText,A=w.teaserMediaDataText,P=w.teaserImage,L=null==P?void 0:P.url,R=P&&P.rendition!==re.TEASER_AUTO_BACKGROUND,k=(0,Vt.v9)(EA),D=f[k],U=null==p?void 0:p.currencyPrices[k],B=(0,Gt.useMemo)((function(){switch(C){case Gue.SINGLE_PAYMENT:return(0,Qr.getParametrizedText)(Xue.pay,{price:Vr({amount:D,currency:k})});case Gue.SUBSCRIPTION:return Xue.subscribe;case Gue.SUBSCRIPTION_DISCOUNT:return Xue.openDiscount;case Gue.SUBSCRIPTION_TRIAL:return Xue.openFree;case Gue.COMPLEX:return Xue.unlock;default:return null}}),[C,D,k]),x=(0,Gt.useMemo)((function(){return C===Gue.SINGLE_PAYMENT?Xue.titleOnlyPostPaid:N}),[C,N]),M=(0,Gt.useMemo)((function(){switch(C){case Gue.SUBSCRIPTION_TRIAL:return(0,Qr.getParametrizedText)(qr(Xue.promoTrialText,S.trial.days),{trialDays:S.trial.days,price:Vr({amount:I,currency:k})});case Gue.SUBSCRIPTION_DISCOUNT:return S.endTime?(0,Qr.getParametrizedText)(Xue.promoDiscountText,{date:go(S.endTime,"dd/MMMM")}):null;default:return null}}),[C]),F=function(){s&&s({paymentPurposeType:Ce.POST,paymentPurposeId:d,blogUrl:_,postId:d})},G=(0,dH.useOverlayPopups)().showPopup;return Gt.createElement("div",{className:cG()("PostSubscriptionBlock_container_Wepog","PaidContent")},L?Gt.createElement("img",{className:"PostSubscriptionBlock_image_LtD2B",src:Bo(que({url:L,isCroped:!0},Que))}):Gt.createElement("div",{className:"PostSubscriptionBlock_defaultImage_J2st7"}),Gt.createElement("div",{className:cG()("PostSubscriptionBlock_content_X8BfF",(t={},t.PostSubscriptionBlock_uploadedTeaser_prDbW=R,t.PostSubscriptionBlock_autoTeaser_B3y0l=P&&!R,t))},Gt.createElement("div",{className:"PostSubscriptionBlock_heading_Bw6Y6"},v&&(i?Gt.createElement("h1",{className:Yue},v):Gt.createElement("div",{className:Yue},r?Gt.createElement(NQ,{highlight:r,text:v}):v)),A.length>0?Gt.createElement(BJ,{classNames:{markup:Kue},data:A,headline:o,imageLinkRoute:c,signedQuery:y}):Gt.createElement(Gt.Fragment,null,o?Gt.createElement(NQ,{className:Kue,highlight:o,text:O}):Gt.createElement("span",{className:Kue},O))),Gt.createElement(zue,{buttonText:B,hasUnlockIcon:C!==Gue.SINGLE_PAYMENT,label:C!==Gue.SINGLE_PAYMENT&&Xue.subscriptionLevelNeeded,description:x,subText:M,onClick:function(){switch(C){case Gue.SINGLE_PAYMENT:F();break;case Gue.SUBSCRIPTION:case Gue.SUBSCRIPTION_DISCOUNT:l();break;case Gue.SUBSCRIPTION_TRIAL:T((0,Yt.getParametrizedUrl)(b.trialActivation,{blogUrl:_,postId:d,levelId:p.id,promoId:S.id}),{state:E});break;case Gue.COMPLEX:G({type:a.POST_ACCESS_SELECTOR,data:{levelId:null==p?void 0:p.id,postId:d,blogUrl:_,postTitle:v,postPrice:D,subscriptionLevelPrice:U,avatarUrl:g.avatarUrl,currency:k,subscriptionLevelName:N,promo:S,trialUrl:b.trialActivation,onSubscribeClick:l,onPayClick:F}})}}})))},Zue=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const $ue={muted:"Post_muted_dnfOY",settingsContainer:"Post_settingsContainer_M7Byc",contentWrapper:"Post_contentWrapper_xwxk9",contentWrapperTeaser:"Post_contentWrapperTeaser_NjpJp",content:"Post_content_ETkyT",paragraph:"Post_paragraph_d06f1",noIndent:"Post_noIndent_FgxpC",poll:"Post_poll_i0TXk",footer:"Post_footer_hG4zj",title:"Post_title_G2QHp",italic:"Post_italic_bXf7b",bold:"Post_bold_l3BZ0",underline:"Post_underline_Bb1R8",audio:"Post_audio_bRdFx",file:"Post_file_Dtdm1",padded:"Post_padded_BeDlt",first:"Post_first_Hf5wf",image:"Post_image_xO2Bk",last:"Post_last_qPGFr",shading:"Post_shading_GNneF",readMore:"Post_readMore_tFuMa",showPost:"Post_showPost_uuQQR",fadeIn:"Post_fadeIn_DdLbP"};var ede=(0,Qr.getTranslation)("@boosty/common/components.Post.components.PostContent"),tde=(0,Gt.memo)((function(e){var t,n=Qo(r.VIDEO_VIEWS_COUNTER),o=e.imageLinkRoute,a=e.commitVote,i=e.retractVote,l=e.goToPollDetails,s=e.finishPoll,c=e.titleHeadline,u=e.contentHeadline,d=e.teaserHeadline,f=e.post,m=e.hidePost,p=e.isCollapsible,h=e.isNewPost,v=e.isTitleHidden,g=e.arePollsEnabled,y=e.arePollsResultsVisible,_=e.canUserSeePollAsAuthor,E=e.pollDataNetworkStatus,b=e.pollVoteNetworkStatus,S=e.showAuth,T=e.onSubscribeClick,I=e.onPayClick,N=function(e){var t=e.post,n=e.hidePost,r=e.isNewPost,o=e.isTitleHidden,a=e.isCollapsible,i=xf(),l=(0,Gt.useRef)(null),s=(0,Gt.useRef)(!1),c=(0,Vt.v9)(XO),u=_k().isAuthorized,d=Ik({post:t}),f=d.canViewPost,m=d.canEditPost,p=Zue((0,Gt.useState)(!1),2),h=p[0],v=p[1],g=Zue((0,Gt.useState)(n),2),y=g[0],_=g[1],E=Zue((0,Gt.useState)(null),2),b=E[0],S=E[1],T=f||t.hasAccess,I=h&&T,N=nr().maxContentCollapsedHeight,C=I?"".concat(N,"px"):"none";r&&(C="".concat(N/2,"px"));var w=I||r,O=cm(i.pathname),A=O.isPostPage,P=O.isFeedPage,L=!o&&T&&t.title,R=function(){var e=function(){var e;if(a||r){var n=function(e){for(var t=nr().contentWeights,n=t.maxPostContentWeight,r=t.mediaTypesBaseWeight,o=t.paragraphEndWeight,a=0,i=[],l=0;a<=n&&l<e.length;l++)oa(c=e[l])?a+=$o(c).length*r[c.type]:zk(c)?a+=o:a+=r[c.type],i.push(c);if(i.length<e.length){var s=0;for(l=i.length;l<e.length;l++){var c=e[l];if(!(na(c)&&!zk(c)||zk(c)&&s<1))break;i.push(c),zk(c)&&s++}}return{previewContent:i,hasRestContent:i.length<e.length,previewIsOverflown:a>n}}(t.data),o=(null===(e=null==l?void 0:l.current)||void 0===e?void 0:e.offsetHeight)>1.2*N;return n.hasRestContent||o?{content:n,isCollapsed:!0}:{content:n,isCollapsed:!1}}return null}();e&&(S(e.content),v(e.isCollapsed))};return(0,Gt.useEffect)((function(){R()}),[null==c?void 0:c.id,null==t?void 0:t.hasAccess,f]),{contentRef:l,content:b,contentMaxHeight:C,showTitle:L,showReadMore:w,canSeeContent:T,canEditPost:m,isCollapsed:h,isAuthorized:u,isPostPage:A,isFeedPage:P,isHidden:y,onReadMoreClick:function(){s.current=!0,v(!1)},onImageLoad:function(){s.current||R()},onShowPostClick:function(){_(!1)}}}({post:f,hidePost:m,isNewPost:h,isTitleHidden:v,isCollapsible:p}),C=N.contentRef,w=N.content,O=N.contentMaxHeight,A=N.canSeeContent,P=N.showTitle,L=N.showReadMore,R=N.isCollapsed,k=N.isAuthorized,D=N.canEditPost,U=N.isPostPage,B=N.isFeedPage,x=N.isHidden,M=N.onShowPostClick,F=N.onReadMoreClick,G=N.onImageLoad,H=xf(),W=n&&D;if(x)return Gt.createElement("div",{className:$ue.showPostWrapper},P&&Gt.createElement("h1",{className:$ue.title},f.title),Gt.createElement("div",{className:$ue.showPost,onClick:M},ede.showPost));var V=g&&(null==f?void 0:f.poll),j=(null==E?void 0:E.isFetching)||(null==b?void 0:b.isFetching);return Gt.createElement(QU.Provider,{value:f},Gt.createElement("div",{className:cG()($ue.contentWrapper,(t={},t[$ue.contentWrapperTeaser]=!A,t)),id:"postContentWrapper"},Gt.createElement("article",{className:$ue.content,style:{maxHeight:O},ref:C,id:"postContent"},L&&Gt.createElement("div",{className:$ue.shading}),P&&(U?Gt.createElement("h1",{className:$ue.title},f.title):Gt.createElement(cM,{to:e.urlToPost,state:{from:H.pathname,isFromFeed:B,returnToPost:f.id},noStyles:!0},Gt.createElement("h2",{className:$ue.title},c?Gt.createElement(NQ,{highlight:c,text:f.title}):f.title))),A?Gt.createElement(Gt.Fragment,null,Gt.createElement(BJ,{headline:u,data:R?null==w?void 0:w.previewContent:f.data,isAuthorized:k,showAuth:S,onImageLoad:G,imageLinkRoute:o,hasCounter:W}),V&&Gt.createElement(jue,{className:$ue.poll,poll:f.poll,isAuthorized:k,isLoading:j,isReadOnly:f.poll.isFinished,areResultsVisible:y,canUserSeePollAsAuthor:_,onVoteCommit:a,onVoteRetract:i,onPollDetailsClick:l,onPollFinish:s,showAuth:S})):Gt.createElement(Jue,{titleHeadline:c,isPostPage:Boolean(U),teaserHeadline:d,onSubscribeClick:T,onPayClick:I,imageLinkRoute:o})),L&&Gt.createElement("div",{className:$ue.readMore,onClick:F},ede.readMore)))}));tde.displayName="PostContent";var nde=function(e){var t=function(t){var n=t.post,r=lV({post:n});return Gt.createElement(e,sV({},t,r))};return t.displayName="withPollForm".concat(jd(e)),Vd(t,e)}(tde);const rde="PostFooter_commentsBlock_Typ_7",ode="PostFooter_iconComment_erw9j",ade="PostFooter_commentsCount_fOvdf";var ide,lde=((ide={})[De.LINK]=ke.POST_LINK,ide[De.QR]=ke.POST_QR,ide[De.VK]=ke.POST_VK,ide[De.FB]=ke.POST_FB,ide[De.OK]=ke.POST_OK,ide[De.TWITTER]=ke.POST_TWITTER,ide),sde=(0,Qr.getTranslation)("@boosty/common/components.Post.components.PostFooter"),cde=function(e){var t,n=e.showAuth,r=e.isLinkCommentsBlock,o=e.onReaction,a=e.onRemoveReaction,i=e.onCopyLink,l=e.urlToPost,s=e.renderDonations,c=JU(),u=c.id,d=xf(),f=cm(d.pathname).isFeedPage,m=_k().isAuthorized,p=Ik({post:c}).canReactOnPost;return Gt.createElement("div",{className:"PostFooter_container_OurjU",id:"postFooter"},Gt.createElement("div",{className:"PostFooter_leftBlock_zXZE3"},r?Gt.createElement(jt.rU,{className:cG()(rde,"PostFooter_link_URAWf"),to:l,state:{from:d,isFromFeed:f||(null===(t=d.state)||void 0===t?void 0:t.isFromFeed),toComments:!0},replace:l===d.pathname,title:sde.showAllComments},Gt.createElement(pB,{glyph:hB.ge4,className:ode}),c.count.comments>0&&Gt.createElement("span",{className:ade},c.count.comments)):Gt.createElement("div",{className:rde},Gt.createElement(pB,{glyph:hB.ge4,className:ode}),c.count.comments>0&&Gt.createElement("span",{className:ade},c.count.comments)),p&&Gt.createElement(Yce,{onReactionClick:function(e){var t;m?p&&((null===(t=null==c?void 0:c.reacted)||void 0===t?void 0:t.actor)!==e?o(e):a()):(n(e),bd.log.auth.openPopup({source:ot.POST_REACTION}))}}),s?s():null),Gt.createElement("div",{className:"PostFooter_rightBlock_xUZSS"},Gt.createElement(Mne,{classNames:{container:"PostFooter_share_OGUhA"},url:ir.BLOG_POST,params:{blogUrl:c.user.blogUrl,postId:u},referrers:lde,onShareClick:function(e){e===De.LINK&&i(),bd.log.share.shareDropdownItemClick(e)},onSharesDrop:function(){bd.log.share.openShareDropdown()},dropdownAlign:yx.LEFT})))},ude=function(){return ude=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ude.apply(this,arguments)},dde=(0,Qr.getTranslation)("@boosty/common/components.Post.desktop.components.PostFooter"),fde=function(e){var t=jG().showAlert;return Gt.createElement(cde,ude({},e,{onCopyLink:function(){t({type:p.SUCCESS,text:dde.linkCopied})}}))};const mde={root:"PostHeaderWithAuthor_root_VgqTl",rootLink:"PostHeaderWithAuthor_rootLink_h7zqS",scheduledIcon:"PostHeaderWithAuthor_scheduledIcon_xgHAK",headerDeferredLabel:"PostHeaderWithAuthor_headerDeferredLabel_gLKXc",headerRightBlock:"PostHeaderWithAuthor_headerRightBlock_LEPQT",headerLeftBlock:"PostHeaderWithAuthor_headerLeftBlock_KeN07",avatarBlock:"PostHeaderWithAuthor_avatarBlock_QoAHz",textBlock:"PostHeaderWithAuthor_textBlock_eFJj0",authorName:"PostHeaderWithAuthor_authorName_DmQ4O",fadeIn:"PostHeaderWithAuthor_fadeIn_v9bhf"};var pde,hde=(0,Qr.getTranslation)("@boosty/common/components.Post.desktop.components.PostHeaderWithAuthor"),vde=function(){var e,t=JU(),n=(0,Vt.I0)(),r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(IH(t.user.blogUrl),2),o=r[0],a=r[1],i=(0,Vt.v9)(EA),l=!t.isWaitingVideo||t.isPublished,s=t.isWaitingVideo?hde.willPublishAfterProcessingVideo:hde.willPublish,c=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:t.user.blogUrl});return Gt.createElement("div",{className:mde.root},Gt.createElement("div",{className:mde.headerLeftBlock},Gt.createElement(cM,{className:mde.avatarBlock,to:c,noStyles:!0},Gt.createElement(PB,{size:g.S,img:t.user.avatarUrl})),Gt.createElement("div",{className:mde.textBlock},Gt.createElement(cM,{className:mde.authorName,to:c,noStyles:!0},t.user.name),Gt.createElement("div",{className:mde.time},l?Gt.createElement(Wse,null):Gt.createElement("span",{className:mde.headerDeferredLabel},s)))),Gt.createElement("div",{className:mde.headerRightBlock},Gt.createElement($le,{hasAccess:t.hasAccess,price:t.price,isFreePost:om(t),subscriptionLevelId:null===(e=t.subscriptionLevel)||void 0===e?void 0:e.id,subscriptionLevels:o,networkStatus:a,currency:i,onDropdownShow:function(){a.isFetching||a.isFetched||n(Eb({blogUrl:t.user.blogUrl}))}}),Gt.createElement(Hse,null)))};!function(e){e.QR="QR",e.LINK="LINK"}(pde||(pde={}));const gde="PostPublishedOverlay_button_gnBA9",yde="PostPublishedOverlay_copyInput_eEowK",_de="PostPublishedOverlay_dropdown_NnhBq",Ede="PostPublishedOverlay_dropdownContent_aRVOh";var bde,Sde=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Tde=(0,Qr.getTranslation)("@boosty/common/components.Post.desktop.components.PostPublishedOverlay"),Ide=((bde={})[De.VK]=ke.SUCCESS_PUBLISH_VK,bde[De.FB]=ke.SUCCESS_PUBLISH_FB,bde[De.OK]=ke.SUCCESS_PUBLISH_OK,bde[De.TWITTER]=ke.SUCCESS_PUBLISH_TWITTER,bde),Nde=function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return HG(n,t),n.prototype.render=function(){var t=this;return Gt.createElement(VG.Consumer,null,(function(n){return Gt.createElement(e,WG({},t.props,n))}))},n.displayName="withAlertsContext(".concat(jd(e),")"),n}(Gt.PureComponent);return Vd(t,e)}((function(e){var t,n=e.blogUrl,r=e.postId,o=e.onClose,a=e.showAlert,i=nr().allowedSocialMediaShares,l=Object.keys(Ide).filter((function(e){return i[e]})),s=Mr()?l.filter((function(e){return e!==De.FB})):l,c=Sde((0,Gt.useState)(!1),2),u=c[0],d=c[1],f=Sde((0,Gt.useState)(""),2),m=f[0],h=f[1],v=(0,Gt.useRef)(null),g=m===pde.QR,y=m===pde.LINK,_=u&&g,E=u&&y,b=function(e){return _a(n,r,e)},S=b(ke.SUCCESS_PUBLISH_QR),T=b(ke.SUCCESS_PUBLISH_LINK),I=function(){return h(null)},N=function(){return a({type:p.SUCCESS,text:Tde.linkCopied})};return(0,Gt.useEffect)((function(){var e;(null===(e=v.current)||void 0===e?void 0:e.offsetHeight)<420&&d(!0);var t=window.setTimeout((function(){return bd.log.share.showPostPublishedOverlay()}),500);return function(){return clearTimeout(t)}})),Gt.createElement("div",{className:cG()("PostPublishedOverlay_root_loQc3",(t={},t.PostPublishedOverlay_collapsed_FFEZw=u,t)),ref:v},Gt.createElement(pB,{glyph:hB.bMz,className:"PostPublishedOverlay_close_DsX0U",onClick:o}),Gt.createElement(pB,{glyph:Rr()?hB.HZf:hB.ZaN,className:"PostPublishedOverlay_successIcon_Bf7qK"}),Gt.createElement("span",{className:"PostPublishedOverlay_title_gsHCd"},Tde.title),Gt.createElement("span",{className:"PostPublishedOverlay_shareText_yxfa7"},Tde.shareText),Gt.createElement("div",{className:"PostPublishedOverlay_shareContent_KZKrI"},Gt.createElement("div",{className:"PostPublishedOverlay_buttons_MkrXD"},s.map((function(e){return Gt.createElement(One,{key:e,type:e,isBig:!0,className:gde,onClick:function(){return function(e){var t=_a(n,r,Ide[e]);Ea(Sa(e,t)),I(),bd.log.share.postPublishedOverlayShareClick(e)}(e)}})})),Gt.createElement("div",{className:gde},Gt.createElement(kne,{onClick:function(){h(pde.QR),bd.log.share.postPublishedOverlayShareClick(De.QR)},isActive:g,isBig:!0}),_&&Gt.createElement("div",{className:_de},Gt.createElement(Dx,{onClickOutside:I,trigger:gx.CLICK},Gt.createElement(qB,{className:Ede},Gt.createElement(R4,{size:100,text:S}))))),Gt.createElement("div",{className:gde},Gt.createElement(Dne,{isBig:!0,isActive:y,onClick:function(){return h(pde.LINK)}}),E&&Gt.createElement("div",{className:_de},Gt.createElement(Dx,{onClickOutside:I},Gt.createElement(qB,{className:Ede},Gt.createElement(Ine,{text:T,onCopy:N,classNames:{container:yde}})))))),!u&&Gt.createElement("div",{className:"PostPublishedOverlay_activeContent_TcUGD"},g&&Gt.createElement(R4,{text:S,size:140}),y&&Gt.createElement(Ine,{text:T,onCopy:N,classNames:{container:yde}}))))})),Cde=function(){return Cde=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cde.apply(this,arguments)},wde=function(e){var t,n,o=e.post,i=e.areCommentsHidden,l=e.isMuted,s=e.feedFilterTagIds,c=e.withAuthor,u=e.areHeadlinesShown&&(null===(n=o.searchMetaData)||void 0===n?void 0:n.headline)||{},d=function(e){var t=e.post,n=function(){var e=Gf(),t=OH(),n=Mf(),r=xf(),o=mH().showAuth,a=_k().isAuthorized,i=cm(r.pathname),l=i.isPostPage,s=i.isStreamPage,c=i.isMediaPage,u=i.isBlogPage,d=(0,Gt.useCallback)((function(o){var a,i,d=o.levelId,f=o.source,m=o.blogUrl,p=o.postId,h=e.streamId,v=e.mediaType,g=nn.MAIN_FEED;l?g=nn.POST:s?g=nn.STREAM:c?g=nn.MEDIA:u&&(g=nn.BLOG_FEED),n((0,Yt.getParametrizedUrl)(t.purchase,{blogUrl:m,streamId:h,postId:p,levelId:d,mediaType:v},((a={}).ssource=f,a)),{state:{from:g,isFromFeed:null===(i=r.state)||void 0===i?void 0:i.isFromFeed}})}),[]);return{subscribeByPost:function(e){a?d(e):(o({onSuccess:function(){return d(e)}}),bd.log.auth.openPopup({source:ot.BLOG_FOLLOW}))}}}().subscribeByPost,r=function(e){var t=(0,dH.useOverlayPopups)().showPopup,n=(0,Vt.I0)(),r=mH().showAuth,o=_k().isAuthorized,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(IH(e),1)[0],l=(0,Gt.useCallback)((function(){return o=function(){var r,o,l;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(s){switch(s.label){case 0:return[4,n((0,dm.Ax)(ly.action)({blogUrl:e}))];case 1:return s.sent(),r=null,i?(r=i,[3,4]):[3,2];case 2:return[4,Promise.race([(0,Yt.delay)(3e3),n((0,dm.Ax)(Eb.action)({blogUrl:e}))])];case 3:(o=s.sent())&&"data"in o&&(r=o.data),s.label=4;case 4:return(l=r&&(c=r.filter((function(e){return!e.deleted&&e.price>0})))&&c[0])&&t({type:a.AFTER_FOLLOW,data:{blogUrl:e,levelId:l.id.toString()}}),[2]}var c}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(void 0,[])).next())}));var r,o}),[]);return{followBlog:function(){o?l():(r({onSuccess:function(){l()}}),bd.log.auth.openPopup({source:ot.BLOG_FOLLOW}))}}}(t.user.blogUrl).followBlog,o=(0,Gt.useCallback)((function(e){0===t.subscriptionLevel.price?r():n({levelId:e,source:Xu.POST_SUBSCRIBE,blogUrl:t.user.blogUrl,postId:t.id})}),[r,n,t.subscriptionLevel]),i=(0,Gt.useCallback)((function(){var e;(null===(e=t.subscriptionLevel)||void 0===e?void 0:e.id)&&o(t.subscriptionLevel.id)}),[o,t.subscriptionLevel]),l=function(){var e=jG().showAlert,t=(0,Vt.I0)(),n=(0,Gt.useCallback)((function(n){var r=n.post,o=n.reaction;return yV(void 0,void 0,void 0,(function(){var n,a,i;return _V(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,t((0,dm.Ax)(__.action)({blogUrl:r.user.blogUrl,postId:r.id,reaction:o}))];case 1:return l.sent(),[3,3];case 2:return n=l.sent(),a=n.statusText,i=(null==a?void 0:a.toLowerCase())===K.FORBIDDEN,e({type:p.ERROR,text:i?EV.errorForbidden:EV.errorUnknown}),[3,3];case 3:return[2]}}))}))}),[]),r=(0,Gt.useCallback)((function(n){var r=n.post;return yV(void 0,void 0,void 0,(function(){var n,o,a;return _V(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t((0,dm.Ax)(E_.action)({blogUrl:r.user.blogUrl,postId:r.id}))];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),o=n.statusText,a=(null==o?void 0:o.toLowerCase())===K.FORBIDDEN,e({type:p.ERROR,text:a?EV.errorForbidden:EV.errorUnknown}),[3,3];case 3:return[2]}}))}))}),[]);return{addPostReaction:n,removePostReaction:r}}(),s=l.addPostReaction,c=l.removePostReaction,u=(0,Gt.useCallback)((function(e){return tse(void 0,void 0,void 0,(function(){return nse(this,(function(n){switch(n.label){case 0:return[4,s({post:t,reaction:e})];case 1:return[2,n.sent()]}}))}))}),[null==t?void 0:t.id,s]),d=(0,Gt.useCallback)((function(){return tse(void 0,void 0,void 0,(function(){return nse(this,(function(e){switch(e.label){case 0:return[4,c({post:t})];case 1:return[2,e.sent()]}}))}))}),[null==t?void 0:t.id,c]),f=SV().reportPost,m=(0,Gt.useCallback)((function(){return tse(void 0,void 0,void 0,(function(){return nse(this,(function(e){return[2,null==f?void 0:f({post:t})]}))}))}),[null==t?void 0:t.id,f]),h=rV().openSinglePayment,v=(0,Gt.useCallback)((function(e){var n;return h(ese(ese({},e),{blogUrl:null===(n=null==t?void 0:t.user)||void 0===n?void 0:n.blogUrl,postId:null==t?void 0:t.id}))}),[null==t?void 0:t.id,h]);return{onCurrentPostSubscribeClick:i,onCurrentPostPay:v,onCurrentPostReaction:u,onCurrentPostRemoveReaction:d,onCurrentPostReport:m}}(e),f=function(e){var t=e.post,n=function(){var e=jG().showAlert,t=(0,dH.useOverlayPopups)(),n=t.showPopup,r=t.closePopup,o=(0,Vt.I0)(),i=Mf(),l=Gf(),s=(0,Gt.useCallback)((function(t){var s=t.post,c={entity:CV.post},u=n({type:a.CONFIRM,data:{onConfirm:function(){return IV(void 0,void 0,void 0,(function(){return NV(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,o((0,dm.Ax)(g_.action)({blogUrl:s.user.blogUrl,postId:s.id}))];case 1:return t.sent(),setTimeout((function(){o(ay())}),2e3),e({type:p.SUCCESS,text:(0,Qr.getParametrizedText)(CV.successRemove,c)}),l.postId&&i((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:s.user.blogUrl})),[3,3];case 2:return t.sent(),e({type:p.ERROR,text:(0,Qr.getParametrizedText)(CV.errorRemove,c)}),[3,3];case 3:return r(u),[2]}}))}))},description:(0,Qr.getParametrizedText)(CV.confirmRemove,c),confirmButtonText:CV.btnTextRemove}}).id}),[]),c=(0,Gt.useCallback)((function(e){var t=e.post;i((0,Yt.getParametrizedUrl)(ir.BLOG_EDIT_POST,{blogUrl:t.user.blogUrl,postId:t.id}))}),[]),u=(0,Gt.useCallback)((function(t){var s=t.post,c={entity:CV.post},u=n({type:a.CONFIRM,data:{onConfirm:function(){return IV(void 0,void 0,void 0,(function(){var t,n,a;return NV(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),t=TV(TV({},s),{publishTime:null,isWaitingVideo:!1}),n=null===(a=null==s?void 0:s.poll)||void 0===a?void 0:a.id,[4,o((0,dm.Ax)(v_.action)({blogUrl:s.user.blogUrl,postId:s.id,blogPost:t,pollId:n}))];case 1:return d.sent(),e({type:p.SUCCESS,text:(0,Qr.getParametrizedText)(CV.successPublish,c)}),l.postId&&i((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:s.user.blogUrl})),[3,3];case 2:return d.sent(),e({type:p.ERROR,text:(0,Qr.getParametrizedText)(CV.errorPublish,c)}),[3,3];case 3:return r(u),[2]}}))}))},description:(0,Qr.getParametrizedText)(CV.confirmPublish,c),confirmButtonText:CV.btnTextPublish}}).id}),[]);return{deletePost:s,editPost:c,publishPost:u}}(),r=n.deletePost,o=n.editPost,i=n.publishPost;return{deleteCurrentPost:(0,Gt.useCallback)((function(){return r({post:t})}),[null==t?void 0:t.id,r]),editCurrentPost:(0,Gt.useCallback)((function(){return o({post:t})}),[null==t?void 0:t.id,o]),publishCurrentPost:(0,Gt.useCallback)((function(){return i({post:t})}),[null==t?void 0:t.id,i])}}(e),m=L3().showPopup,h=mH().showAuth,v=function(e){var t,n,o,a,i=e.post,l=e.newPostId,s=bk(i.user.blogUrl).canEdit,c=Ik({post:i}),u=c.canViewPost,d=c.canPublishComment,f=c.canReportPost,m=c.canPublishPost,p=(i.searchMetaData||{}).headline,h=void 0===p?{}:p,v=xf(),g=(0,Vt.I0)(),y=(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:i.user.blogUrl,postId:i.id}),_=Boolean(yf(ir.BLOG_POST,v.pathname)),E=(0,Do.parseUrl)(v.search).query,b=Boolean(_&&E.comment),S=u||om(i),T=Boolean(h.title||h.teaser||h.data||h.data)?[h.title,h.teaser,h.data,h.tags].filter((function(e){return e})).join(""):"",I=(0,Vt.v9)(ww),N=(null===(n=null===(t=null==I?void 0:I.post)||void 0===t?void 0:t[i.id])||void 0===n?void 0:n.length)>0,C=S&&((null===(a=null===(o=null==i?void 0:i.comments)||void 0===o?void 0:o.data)||void 0===a?void 0:a.length)>0||N),w=s&&l===i.id,O=Qo(r.TIP_DONATIONS),A=!i.isWaitingVideo||i.isPublished,P=i.isDeleted,L=function(e){var t=OH(),n=xf().pathname,r={postId:e.id,blogUrl:e.user.blogUrl};return cm(n).isSearchByPostsPage?(0,Yt.getParametrizedUrl)(ir.BLOG_POST_SEARCH_PHOTO_LAYER,r):(0,Yt.getParametrizedUrl)(t.photoViewer,r)}(i);return{canViewPost:S,hasAccessToPost:u,canPublishPost:m,canReportPost:f,canEditPost:s,hasRightToPublishComment:d,isPostPage:_,urlToPost:y,contentHeadline:T,isNewPost:w,areDonationsEnabled:O,isVisibleCreatedAt:A,hasCommentToHighlight:b,isCommentListCanBeShown:C,resetNewPostId:function(){g(f_({postId:null}))},isMarkedAsDeleted:P,imageLinkRoute:L}}(e),g=v.canViewPost,y=v.urlToPost,_=v.contentHeadline,E=v.areDonationsEnabled,b=v.hasCommentToHighlight,S=v.isCommentListCanBeShown,T=v.hasRightToPublishComment,I=v.resetNewPostId,N=v.isNewPost,C=v.isMarkedAsDeleted,w=v.isPostPage,O=v.imageLinkRoute,A=lV({post:o}),P=g&&!i,L=A.arePollsEnabled&&Boolean(o.poll)&&!o.poll.isFinished&&g&&Boolean(o.poll.answer);return Gt.createElement(QU.Provider,{value:o},Gt.createElement(Fse.Provider,{value:Cde(Cde(Cde(Cde(Cde({},A),v),d),f),{canRetractVote:L})},Gt.createElement("div",{className:cG()(Iue.root,(t={},t[Iue.containerWithOverlay]=N,t[Iue.deleted]=C,t[Iue.muted]=l,t)),"data-post-id":o.id},N&&Gt.createElement(Nde,{postId:o.id,blogUrl:o.user.blogUrl,onClose:function(){I()}}),c?Gt.createElement(vde,null):Gt.createElement(zse,null),Gt.createElement(nde,Cde({showAuth:h,titleHeadline:u.title,teaserHeadline:u.teaser,contentHeadline:_,post:o,onSubscribeClick:d.onCurrentPostSubscribeClick,onPayClick:d.onCurrentPostPay,isCollapsible:e.isCollapsible,isNewPost:N,hidePost:b,imageLinkRoute:O,urlToPost:y},A)),o.tags.length>0&&Gt.createElement(Mse,{headline:u.tags,tags:o.tags,selectedTagsIds:s,onClickTag:e.onClickTag}),Gt.createElement("div",{className:Iue.footer},Gt.createElement(fde,{urlToPost:y,isLinkCommentsBlock:!w,onReaction:d.onCurrentPostReaction,onRemoveReaction:d.onCurrentPostRemoveReaction,showAuth:function(e){m({type:a.AUTH_SIGN_IN,data:{onSuccess:function(){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){return[2,d.onCurrentPostReaction(e)]}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n}}})},renderDonations:E?function(){return Gt.createElement(Lue,null)}:null})),P&&Gt.createElement(Cue,{areCommentsDenied:!T&&o.isCommentsDenied,canViewPost:g,post:o,showCommentsList:S,showCommentPublisher:T,isBlacklisted:e.isBlackListed,isStickyPublisher:w,publisherClassName:C&&Iue.deleted}))))};const Ode="Feed_center_oGu8f";var Ade=(0,Qr.getTranslation)("@boosty/common/containers.Blog.desktop.components.Feed"),Pde=function(e){var t=e.hasMorePosts,n=e.postsNetworkStatus,r=e.posts,o=e.isBlackListed,a=e.className,i=e.maxAutoLoadMoreCount,l=e.postsHasAuthor,s=e.areHeadlinesShown,c=e.showViewForCreator,u=e.keepOldDataOnLoading,d=e.areExtraDataFetching,f=function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(0),2),n=t[0],r=t[1];return{loadMore:function(){e.loadMore(),r((function(e){return e+1}))},loadMoreCallsCount:n}}(e),m=f.loadMoreCallsCount,p=f.loadMore,h=e.isFilterApplied,v=e.selectedPostTagIds,g=e.onFilterReset,y=t&&!n.isFetching&&m<i,_=t&&!n.isFetching&&m>=i,E=Boolean(!_&&!r.length&&n.isFetched),b=Boolean(!d&&u&&n.isFetching&&(null==r?void 0:r.length));return Gt.createElement("div",{className:cG()("Feed_feed_vmBqX",b&&"Feed_muted_YPeRf",a)},b&&Gt.createElement(uM,{size:50,className:"Feed_spinnerFixed_mL1LP"}),E&&Gt.createElement(Dse,{showViewForCreator:c,isFilterApplied:h,className:"Feed_feedEmptyWithFilter_bCeo1",onFilterReset:g}),r.map((function(t,n){return Gt.createElement("div",{className:"Feed_itemWrap_B5r5i",key:t.id},y&&n===e.posts.length-1&&Gt.createElement(FM,{onShow:p}),Gt.createElement(wde,{withAuthor:l,isBlackListed:o,areCommentsHidden:e.isHiddenComments,areHeadlinesShown:s,post:t,feedFilterTagIds:v,onClickTag:e.onClickPostTag,newPostId:e.newPostId,isCollapsible:e.isCollapsible,isMuted:b}))})),e.postsNetworkStatus.isFetching&&Gt.createElement("div",{className:Ode},Gt.createElement(uM,{size:50,solid:!0})),_&&Gt.createElement("div",{className:Ode},Gt.createElement(FB,{onClick:p},Ade.loadMore)))},Lde=(0,Qr.getTranslation)("@boosty/common/components.FilterReset"),Rde=function(e){var t=e.className,n=e.onReset;return Gt.createElement("div",{className:cG()("FilterReset_root_qsbbC",t)},Gt.createElement("button",{className:cG()("FilterReset_text_bXlo0","FilterReset_button_NkrfL","FilterReset_buttonText_v1mYj"),onClick:n},Gt.createElement(pB,{className:cG()("FilterReset_resetIcon_kUj3c","FilterReset_buttonIcon_cz9Hw"),glyph:hB.uNf}),Lde.buttonText))},kde=(0,Qr.getTranslation)("@boosty/common/components.FeedTabs.desktop"),Dde=function(e){var t=e.className,n=xf(),r=CH(),o=[{url:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:r}),route:ir.BLOG,title:kde.feed},{url:(0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:r,mediaType:ht.ALL}),route:ir.MEDIA,title:kde.media}];return Gt.createElement("div",{className:cG()("FeedTabs_root_Yv6Wf",t)},o.map((function(e,t){var r,o=e.url,a=e.route,i=e.title,l=yf(a,n.pathname);return Gt.createElement(jt.rU,{className:cG()("FeedTabs_item_IaY_I",(r={},r.FeedTabs_active_lPBT6=l,r)),key:"FeedTabsItem".concat(t),to:o},i)})))},Ude=(0,Qr.getTranslation)("@boosty/common/components.FilterSelect.hooks.useFilterSelectByAccessLevel"),Bde=n(56848),xde=function(){return xde=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xde.apply(this,arguments)},Mde=function(e){var t,n=e.classNames,r=void 0===n?{}:n,o=e.isDisabled;return Gt.createElement(lF,xde({},e,{className:"FilterSelect_root_KKjVx",classNames:{mainBox:cG()("FilterSelect_select_ELgh4",null==r?void 0:r.mainBox,(t={},t.FilterSelect_disabled_o0e8k=o,t)),option:null==r?void 0:r.option,placeholder:"FilterSelect_placeholder_XCeIi",arrow:"FilterSelect_arrow_rA7Gh"},arrowIconGlyph:Bde.y9O}))},Fde=function(e){var t=function(e){var t=[{title:Ude.allPosts,value:!1},{title:Ude.allowedPosts,value:!0}],n=t.find((function(t){return t.value===e.selected}));return{options:t,selected:n,onSelect:function(t){return e.onSelect(t.value)}}}({selected:e.selected,onSelect:e.onSelect}),n=t.options,r=t.selected,o=t.onSelect;return Gt.createElement(Mde,{labelProp:"title",valueProp:"value",onSelect:o,options:n,selected:r})},Gde=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Hde=(0,Qr.getTranslation)("@boosty/common/components.FilterSelect.desktop.FilterSelectByDate.hooks.useFilterSelectByDate"),Wde=new Date((new Date).setUTCHours(23,59,59,999)),Vde=function(e){var t,n=e.selectedDates,r=e.showViewForCreator,o=e.onSelect,a=e.isDisabled,i=e.classNames,l=void 0===i?{}:i,s=function(e){var t=e.selectedDates,n=t.postsFrom,r=t.postsTo,o=e.onSelect,a=(0,Gt.useRef)((function(){return null})),i=Gde((0,Gt.useState)(!1),2),l=i[0],s=i[1],c=Gde((0,Gt.useState)([]),2),u=c[0],d=c[1],f=function(e){return go(No(e),"dd/MM/yy")},m=function(e){d(e);var t=No(e[0])||null,n=No(e[1])||null;o({from:t,to:n}),a.current&&a.current()};return(0,Gt.useEffect)((function(){n&&r&&d([new Date(vo(n)),new Date(vo(r))])}),[n,r]),{isCalendarOpen:l,getTooltipCloseCallback:function(e){var t;t=e,a.current=t},setIsCalendarOpen:s,changeDates:function(e){m(e),s(!1)},resetDates:function(){m([]),a.current&&a.current()},getButtonText:function(){return n&&r&&u.length?function(e){var t=Gde(e,2),n=t[0],r=t[1];return"".concat(f(n)," - ").concat(f(r))}(u):Hde.buttonText}}}({selectedDates:n,onSelect:o}),c=s.isCalendarOpen,u=s.getTooltipCloseCallback,d=s.setIsCalendarOpen,f=s.changeDates,m=s.resetDates,p=s.getButtonText;return Gt.createElement("div",{className:cG()("FilterSelectByDate_root_nuhmR",l.root,a&&"FilterSelectByDate_rootDisabled_VB82O")},Gt.createElement(HF,{classNames:{content:"FilterSelectByDate_tooltip_JJJJ7"},isGlobal:!0,trigger:IF.CLICK,getCloseCallback:u,onToggleOpen:d,content:Gt.createElement("div",{className:"FilterSelectByDate_optionsContainer_roTQe"},Gt.createElement(wG,{maxDate:r?null:Wde,onAccept:f,onCancel:m,hasFooter:!0}))},Gt.createElement("div",{className:cG()("FilterSelectByDate_button_vrvM0",l.button,a&&"FilterSelectByDate_disabled_f_mrC")},Gt.createElement("span",null,p()),Gt.createElement(pB,{className:cG()("FilterSelectByDate_arrow_ouFDY",(t={},t.FilterSelectByDate_arrowRotated_uhaBQ=c,t),l.arrow),glyph:hB.y9O}))))},jde=(0,Qr.getTranslation)("@boosty/common/components.FilterSelect.hooks.useFilterSelectBySubscriptionLevel"),zde=function(e){var t=e.subscriptionLevels,n=function(e){var t=e.subscriptionLevels,n=e.selectedLevelId,r=!t.length,o=t.find((function(e){return e.id===n}));return{placeholder:jde.placeholder,selected:o,isDisabled:r,onSelect:function(t){return e.onSelect(null==t?void 0:t.id)}}}({subscriptionLevels:t,selectedLevelId:e.selectedLevelId,onSelect:e.onSelect}),r=n.placeholder,o=n.selected,a=n.isDisabled,i=n.onSelect;return Gt.createElement(Mde,{allowEmpty:!0,isDisabled:a,labelProp:"name",valueProp:"id",onSelect:i,options:t,placeholder:r,selected:o})},Yde=(0,Qr.getTranslation)("@boosty/common/containers.Blog.desktop.components.FeedFilter.components.SelectPostsTags"),Kde=function(e){var t=e.postsTags,n=e.selectedPostsTags,r=e.onSelect,o=!Boolean(t.length),a=t.filter((function(e){return n.includes(e.id)})),i=1===a.length?a[0].title:null;return Gt.createElement(Mde,{classNames:{mainBox:"SelectPostsTags_select_ODCME"},isDisabled:o,isMulti:!0,labelProp:"title",onSelect:function(e){r(e.map((function(e){return e.id})))},options:t,placeholder:Yde.placeholder,selected:a,selectionLabel:i,valueProp:"id"})},qde=function(e){var t=e.className,n=e.subscriptionLevels,r=e.subscriptionLevelId,o=e.postsFrom,a=e.postsTo,i=e.postsTags,l=e.selectedPostsTagIds,s=e.showViewForCreator,c=e.isOnlyAllowedPosts,u=e.onFeedFilterChange;return Gt.createElement("div",{className:cG()("Filter_container_I7MUg",t)},s?Gt.createElement(zde,{subscriptionLevels:n,selectedLevelId:r,onSelect:function(e){return u({subscriptionLevelId:e})}}):Gt.createElement(Fde,{selected:c,onSelect:function(e){return u({isOnlyAllowedPosts:e})}}),Gt.createElement(Vde,{showViewForCreator:s,selectedDates:{postsFrom:o,postsTo:a},onSelect:function(e){return u({postsFrom:e.from,postsTo:e.to})}}),Gt.createElement(Kde,{postsTags:i,selectedPostsTags:l,onSelect:function(e){return u({postsTagsIds:e})}}))};const Xde={searchButton:"FeedFilter_searchButton_owPUZ",searchIcon:"FeedFilter_searchIcon_xmenN",root:"FeedFilter_root_mE0Y_",mainPanel:"FeedFilter_mainPanel_rY4dH",resetPanel:"FeedFilter_resetPanel_WLxuK",controls:"FeedFilter_controls_cp3fP",icon:"FeedFilter_icon_VdVfc",controlButton:"FeedFilter_controlButton_q7HQk",active:"FeedFilter_active_invsa",fadeIn:"FeedFilter_fadeIn__c5ml"};var Qde=function(){return Qde=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qde.apply(this,arguments)},Jde=function(e){var t=e.className,n=e.innerRef,o=e.isFeedFilterApplied,a=e.postsCount,i=e.postsNetworkStatus,l=e.onSearchClick,s=e.onFeedFilterChange,c=e.onFeedFilterReset,u=e.currentFilter,d=u.isOnlyAllowedPosts,f=void 0!==d&&d,m=u.postsFrom,p=u.postsTo,h=u.subscriptionLevelId,v=u.postsTagsIds,g=void 0===v?[]:v,y=e.showViewForCreator,_=(0,Vt.v9)(bL),E=(0,Vt.v9)(WR),b=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(o),2),S=b[0],T=b[1],I=Boolean(a),N=Qo(r.SEARCH_BY_POSTS);return Gt.createElement("div",{ref:n,className:cG()(Xde.root,t)},Gt.createElement("div",{className:Xde.mainPanel},Gt.createElement(Dde,null),Gt.createElement("div",{className:Xde.controls},N&&l&&Gt.createElement("button",{className:cG()(Xde.controlButton,Xde.searchButton),onClick:l,type:"button"},Gt.createElement(pB,{className:cG()(Xde.icon,Xde.searchIcon),glyph:hB.jVj})),Gt.createElement("button",{className:cG()(Xde.controlButton,Xde.filterButton,S&&Xde.active),onClick:function(){return T(!S)},type:"button"},Gt.createElement(pB,{className:cG()(Xde.icon,Xde.filterIcon),glyph:hB.wHY})))),S&&Gt.createElement(qde,{className:Xde.feedFilter,subscriptionLevels:_,subscriptionLevelId:h,postsFrom:m,postsTo:p,postsTags:E,selectedPostsTagIds:g,showViewForCreator:y,isOnlyAllowedPosts:f,onFeedFilterChange:s}),S&&o&&I&&!i.isFetching&&Gt.createElement(Rde,{className:Xde.resetPanel,onReset:c}))},Zde=Gt.forwardRef((function(e,t){return Gt.createElement(Jde,Qde({innerRef:t},e))})),$de=(0,Qr.getTranslation)("@boosty/common/components.FilterSelect.hooks.useFilterSelectByAttachType"),efe=function(e){var t=e.selectedAttachTypes,n=e.attachTypes,r=e.isDisabled,o=function(e){var t=e.attachTypes,n=e.selectedAttachTypes,r=t.filter((function(e){return n.includes(e.key)}));return{placeholder:$de.placeholder,selected:r,onSelect:function(t){return e.onSelect(t.map((function(e){return e.key})))}}}({selectedAttachTypes:t,attachTypes:n,onSelect:e.onSelect}),a=o.placeholder,i=o.selected,l=o.onSelect;return Gt.createElement(Mde,{classNames:{option:"FilterSelectByAttachType_option_WRB4F"},isDisabled:r,isMulti:!0,labelProp:"title",onSelect:l,options:n,placeholder:a,selected:i,selectionLabel:1===i.length?i[0].title:null,valueProp:"key"})},tfe=(0,Qr.getTranslation)("@boosty/common/components.FilterSelect.hooks.useFilterSelectBySubscriptionLevels"),nfe=function(e){var t=e.selectedLevelId,n=void 0===t?[]:t,r=e.subscriptionLevels,o=function(e){var t=e.subscriptionLevels,n=e.selectedLevelId,r=t.filter((function(e){return n.includes(e.id)})),o=!t.length;return{placeholder:tfe.placeholder,selected:r,isDisabled:o,onSelect:function(t){e.onSelect(t.map((function(e){return e.id})))}}}({selectedLevelId:n,subscriptionLevels:r,onSelect:e.onSelect}),a=o.placeholder,i=o.selected,l=o.isDisabled,s=o.onSelect;return Gt.createElement(Mde,{isDisabled:l,labelProp:"name",valueProp:"id",isMulti:!0,onSelect:s,options:r,placeholder:a,selected:i,selectionLabel:1===i.length?i[0].name:null})},rfe=(0,Qr.getTranslation)("@boosty/common/containers.Blog.desktop.components.SearchFilter"),ofe=function(e){var t=e.className,n=e.filter,r=e.attachTypes,o=e.showViewForCreator,a=e.subscriptionLevels,i=e.onFilterChange,l={postsFrom:n.postsFrom,postsTo:n.postsTo},s=(0,Gt.useMemo)((function(){return r.map((function(e){return{title:rfe.attachTypes[e],key:e}}))}),[]),c=(0,Gt.useMemo)((function(){var e=[];return r.forEach((function(t){n[t]&&e.push(t)})),e}),[n]);return Gt.createElement("div",{className:cG()("SearchFilter_container_GflLi",t)},!o&&Gt.createElement(Fde,{selected:Boolean(n.isOnlyAllowedPosts),onSelect:function(e){i({isOnlyAllowedPosts:e})}}),Gt.createElement(nfe,{subscriptionLevels:a,selectedLevelId:n.subscriptionLevelId,onSelect:function(e){i({subscriptionLevelId:e})}}),Gt.createElement(efe,{attachTypes:s,selectedAttachTypes:c,onSelect:function(e){var t,n=((t={})[T.HAS_IMAGE]=!1,t[T.HAS_VIDEO]=!1,t[T.HAS_VIDEO_FILE]=!1,t[T.HAS_AUDIO]=!1,t[T.HAS_AUDIO_FILE]=!1,t[T.HAS_FILE]=!1,t);e.forEach((function(e){n[e]=!0})),i(n)}}),Gt.createElement(Vde,{selectedDates:l,showViewForCreator:!1,onSelect:function(e){i({postsFrom:e.from,postsTo:e.to})}}))},afe=function(){return afe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},afe.apply(this,arguments)},ife=(0,Qr.getTranslation)("@boosty/common/containers.Blog.desktop.components.SearchByPosts"),lfe=function(e){var t,n=e.className,r=e.innerRef,o=e.isFilterApplied,a=e.query,i=e.queryLimits,l=e.postsCount,s=e.postsNetworkStatus,c=e.filter,u=e.attachTypes,d=e.subscriptionLevels,f=e.onQueryReset,m=e.onQueryChange,p=e.onFilterChange,h=e.onFilterReset,v=e.onClose,g=e.onSearch,y=(0,Vt.v9)(HA),_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(a||""),2),E=_[0],b=_[1],S=(0,Gt.useRef)(null),T=l>0,I=function(){E.length>=i.min&&(m(E),g(E))},N=a.length<i.min;return Gt.createElement("div",{ref:r,className:cG()("SearchByPosts_container_coKI9",n)},Gt.createElement(Lee,{classNames:{input:cG()("SearchByPosts_searchInput_Pf6rw",(t={},t.SearchByPosts_active_D_Pqd=!N,t))},inputRef:S,isAutoFocus:!0,value:E,placeholder:ife.placeholder,limit:i.max,onReset:function(){var e;E.length?(b(""),null===(e=S.current)||void 0===e||e.focus()):(f(),v())},onChange:function(e){b(e.target.value)},onKeyDown:function(e){e.key===ae.ENTER&&I()},onSearchButtonClick:I}),Gt.createElement(ofe,{className:N?"SearchByPosts_filterHidden_xf9xR":null,showViewForCreator:y,filter:c,subscriptionLevels:d,onFilterChange:p,attachTypes:u}),o&&T&&!s.isFetching&&Gt.createElement(Rde,{className:"SearchByPosts_resetPanel_u3rHQ",onReset:h}))},sfe=Gt.forwardRef((function(e,t){return Gt.createElement(lfe,afe({innerRef:t},e))}));const cfe="Blog_filterBlock_sg67w",ufe="Blog_filterBlockActive_o4qFR";var dfe=function(){return dfe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dfe.apply(this,arguments)},ffe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},mfe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},pfe=function(){var e,t,n,r=Ff().pagesToKeepPositionBetween,o=qU().banStatus,a=(0,Vt.I0)(),i=Gf().blogUrl,l=Ok(i),s=xf(),c=s.search,u=s.state,d=Mf(),f=null===(n=(0,Do.parseUrl)(c).query)||void 0===n?void 0:n.searchQuery,m=Ok(c),p=ffe((0,Gt.useState)({isOnlyAllowedPosts:!1,postsFrom:null,postsTo:null,postsTagsIds:[],subscriptionLevelId:null}),2),h=p[0],v=p[1],g=ffe((0,Gt.useState)(Boolean(f)?gse.SEARCH:gse.FILTER),2),y=g[0],_=g[1],E=ffe((0,Gt.useState)(Boolean(f)?yse.SEARCH:yse.DEFAULT),2),b=E[0],S=E[1],I=YU({banStatus:o}).shouldShowBanDisclaimer,N=(0,Gt.useRef)(),C=(0,Gt.useRef)(!0),w=function(e){var t=nr().search.posts.limits,n=t.minLength,r=t.maxLength,o=t.limit,a=e.blogUrl,i=e.initialSearchParams,l=e.customLimit,s=e.onSearchParamsChange,c=void 0===s?Yt.noop:s,u=e.onResultChange,d=void 0===u?Yt.noop:u,f=e.onNetworkStatusChange,m=void 0===f?Yt.noop:f,p=(0,Vt.I0)(),h=kV((0,Gt.useState)(i.query||""),2),v=h[0],g=h[1],y=kV((0,Gt.useState)(i.filter||{}),2),_=y[0],E=y[1],b=Ok(v)||v,S=Ok(_)||_,I=(0,Vt.v9)(FR),N=(0,Vt.v9)(GR),C=(0,Vt.v9)(HR),w=(0,Gt.useCallback)((function(e){return void 0,void 0,n=function(){var t,n,r,o,i,l,s,c,u,d;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(f){switch(f.label){case 0:return t=e.query,n=e.offset,r=e.limit,o=JSON.stringify(b)!==JSON.stringify(v),i=JSON.stringify(S)!==JSON.stringify(_),l=I.length>0,s=n&&!C,c=o||i||!l||s,g(e.query),c?[4,p((0,dm.Ax)(fb.action)({blogUrl:a,query:t,filter:_,offset:n,limit:r}))]:[3,2];case 1:return d=f.sent(),[3,3];case 2:d={data:I,offset:N,isLast:C},f.label=3;case 3:return[2,{items:(u=d).data,offset:u.offset,isLast:u.isLast}]}}))},new((t=Promise)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n}),[v,_,I,N,C]);(0,Gt.useEffect)((function(){return v||p(mb()),function(){p(mb())}}),[v]);var O=oB({initialQuery:null==i?void 0:i.query,search:w,limit:l||o,onResultChange:d,onNetworkStatusChange:m}),A=O.items,P=O.isLast,L=O.networkStatus,R=O.onSearch,k=O.onClearResult;return(0,Gt.useEffect)((function(){c({query:v,filter:_})}),[v,_]),{networkStatus:L,query:v,limits:{min:n,max:r},filter:_,items:A,isLast:P,attachTypes:Object.values(T),onQueryChange:function(e){g(e)},onQueryReset:function(){g("")},onFilterChange:function(e){E((function(t){return RV(RV({},t),e)}))},onFilterReset:function(){E({})},onResultsReset:k,onSearch:R}}({blogUrl:i,initialSearchParams:{query:f,filter:pi(c)},onSearchParamsChange:function(){O?F(O):S(yse.DEFAULT)}}),O=w.query,A=w.limits,P=w.filter,L=w.isLast,R=w.attachTypes,k=w.networkStatus,D=w.onQueryChange,U=w.onQueryReset,B=w.onFilterChange,x=w.onFilterReset,M=w.onResultsReset,F=w.onSearch,G=bk(i).canCreate,H=(0,Vt.v9)(Hw),W=(0,Vt.v9)(MR),V=(0,Vt.v9)(kR),j=(0,Vt.v9)(Uw),z=(0,Vt.v9)(FR),Y=(0,Vt.v9)(xw),K=(0,Vt.v9)(DR),q=(0,Vt.v9)(RR),X=(0,Vt.v9)(VR),Q=(0,Vt.v9)(bL),J=(0,Vt.v9)(KP),Z=(0,Vt.v9)(UR),$=(0,Gt.useMemo)((function(){return{postsFromSearch:z.map((function(e){return e.post}))}}),[z]).postsFromSearch,ee=function(e){var t=e.limit,n=e.offset,r=e.commentsLimit,o=e.repliesLimit,l=e.filter,s=void 0===l?h:l;a((0,dm.Ax)(Am.action)({blogUrl:i,limit:t||10,offset:n,filter:s,commentsLimit:r,repliesLimit:o}))},te=function(){a((0,dm.Ax)(oy.action)({blogUrl:i}))},ne=function(){a((0,dm.Ax)(np.action)({blogUrl:i,from:je.BLOG}))},re=function(){a(Z_)},oe=function(){a(J_)},ae=function(){a(yp)},ie=function(e){a(py(e))};(0,Gt.useEffect)((function(){if(C.current){var e=null!=H&&H.blogUrl!==i||Y!==i,t=ai(c),n=u||JSON.stringify(t)!==JSON.stringify(h),r=ue().isFetched&&!de().every((function(e){return e.user.blogUrl===i}))||"feed"===Z;n&&v(t),J.isFetched&&!e||(ae(),ne()),X.isFetched&&!e||(oe(),te()),(n||e||r||!K.isFetched||K.isFetched&&W)&&(re(),ee({filter:t})),!W&&function(e){var t=oi(e);return Boolean(Object.keys(t).length)}(c)&&ie(!0),a(p_()),C.current=!1}else{e=i!==l,f=c,p=ai(m||""),g=ai(f),p.postsTagsIds.sort(),g.postsTagsIds.sort(),n=!(Object.entries(p).sort().toString()===Object.entries(g).sort().toString());var o=(d=pi(c),Boolean(Object.keys(d).length)),s=(0,Do.parseUrl)(c).query.searchQuery;(e||n)&&(t=ai(c),v(t),re(),ee({filter:t})),o||s||!O||(_(gse.FILTER),S(yse.DEFAULT),U(),M()),e&&(_(gse.FILTER),S(yse.DEFAULT),U(),M(),x(),oe(),ae(),te(),ne())}var d,f,p,g}),[i,l,c,m]);var le=function(e,t){W!==t&&ie(t),d((0,Yt.getParametrizedUrl)(Ose.BLOG,{blogUrl:i},dfe({},e)))},se=function(e,t){B(e),d((0,Yt.getParametrizedUrl)(Ose.BLOG,{blogUrl:i},dfe(dfe({searchQuery:t},P),e)))},ce=function(){b===yse.DEFAULT?le({isOnlyAllowedPosts:!1,postsFrom:null,postsTo:null,postsTagsIds:[],subscriptionLevelId:null},!1):(U(),x(),S(yse.DEFAULT),_(gse.FILTER),d((0,Yt.getParametrizedUrl)(Ose.BLOG,{blogUrl:i})))},ue=function(){return b===yse.DEFAULT?K:k},de=function(){return b===yse.DEFAULT?j:$},fe=Object.keys(h).some((function(e){var t=h[e];return Boolean(Array.isArray(t)?t.length:t)})),me=Object.keys(P).some((function(e){var t=P[e];return t instanceof Array?Boolean(t.length):Boolean(t)})),pe=(b===yse.DEFAULT?fe:me)||O.length>=A.min;return I?Gt.createElement(Nse,{description:null==o?void 0:o.description}):Gt.createElement(Gt.Fragment,null,y===gse.FILTER&&Gt.createElement(Zde,{ref:N,className:cG()(cfe,(e={},e[ufe]=fe&&!K.isFetching,e)),isFeedFilterApplied:fe,postsCount:j.length,postsNetworkStatus:K,onFeedFilterChange:function(e){le(dfe(dfe({},h),e),!0)},onFeedFilterReset:ce,currentFilter:h,onSearchClick:function(){return _(gse.SEARCH)},showViewForCreator:G}),y===gse.SEARCH&&Gt.createElement(sfe,{className:cG()(cfe,(t={},t[ufe]=fe&&!K.isFetching,t)),ref:N,isFilterApplied:me,query:O,queryLimits:A,filter:P,postsCount:$.length,postsNetworkStatus:k,attachTypes:R,subscriptionLevels:Q,onSearch:function(e){var t=pi(c);b===yse.DEFAULT&&S(yse.SEARCH),se(t,e)},onQueryChange:D,onQueryReset:U,onFilterChange:function(e){se(e,O)},onFilterReset:function(){x(),d((0,Yt.getParametrizedUrl)(Ose.BLOG,{blogUrl:i},{searchQuery:O}))},onClose:function(){_(gse.FILTER),S(yse.DEFAULT),x(),M(),se({},null)}}),K.isFetched&&Gt.createElement(wse,{direction:"vertical",pagesToKeepPositionBetween:r}),Gt.createElement(Pde,{posts:de(),areHeadlinesShown:b===yse.SEARCH,postsNetworkStatus:ue(),hasMorePosts:b===yse.DEFAULT?!V:!L,selectedPostTagIds:h.postsTagsIds,isBlackListed:H.isBlackListed,isHiddenComments:O.length>0,isCollapsible:!0,isFilterApplied:pe,loadMore:function(){if(b===yse.DEFAULT){var e=nr().comments,t=e.feedLimit,n=e.feedRepliesLimit;ee({limit:5,offset:q,commentsLimit:t,repliesLimit:n})}else F(O,{isNextPage:!0})},onClickPostTag:function(e){var t;t=h.postsTagsIds.includes(e.id)?dfe(dfe({},h),{postsTagsIds:h.postsTagsIds.filter((function(t){return t!==e.id}))}):dfe(dfe({},h),{postsTagsIds:mfe(mfe([],ffe(h.postsTagsIds),!1),[e.id],!1)}),wf(N.current,{onScrolled:function(){return le(t,!0)}})},onFilterReset:ce,maxAutoLoadMoreCount:nr().postsMaxLoadMoreByScrollCount.blog,showViewForCreator:G}),Gt.createElement(Ase,null))};pfe.getFetchActions=function(e,t){var n=t.query,r=t.params.blogUrl,o=pi("?"+(0,Do.stringify)(n,{arrayFormat:"comma"}));return mfe(mfe(mfe([],ffe(Tse(e,t)),!1),ffe(Boolean(n.searchQuery)?[function(){return fb.action({blogUrl:r,limit:10,filter:o,query:n.searchQuery,offset:null})}]:[function(){return Am.action({blogUrl:r,limit:10,filter:ai("?"+(0,Do.stringify)(n,{arrayFormat:"comma"}))})}]),!1),[function(){return oy.action({blogUrl:r})},function(){return np.action({blogUrl:r,from:je.BLOG})}],!1)};var hfe=(0,Qr.getTranslation)("@boosty/common/containers.BlogPost.BlogPost.components.LinkToAllPosts"),vfe=function(e){var t=e.isFromFeed,n=e.blogLinkUrl;return Gt.createElement("div",{className:"LinkToAllPosts_root_fvhTk"},Gt.createElement(cM,{to:n,className:"LinkToAllPosts_allPostsButton_X3nio"},t?hfe.toAllPostsOfAuthor:Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{className:"LinkToAllPosts_arrowIcon_sVAd_",glyph:pk.WTy}),hfe.toAllPosts)))},gfe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},yfe=(0,Qr.getTranslation)("@boosty/common/containers.BlogPost.BlogPost.hooks.useBlogPostLogic"),_fe=function(){return JH(),null},Efe=function(){var e=qU().banStatus,t=function(){var e,t=(0,Vt.I0)(),n=Mf(),r=xf(),o=Gf(),a=o.blogUrl,i=o.postId,l=(0,Vt.v9)(Hw),s=(0,Vt.v9)(Uw),c=(0,Vt.v9)(Tw),u=Iw(s,c,i),d=(0,Vt.v9)(Nw),f=(0,Vt.v9)(xR),m=(0,Vt.v9)(SL),p=(0,Vt.v9)(bL),h=(0,Vt.v9)(EL),v=(0,Vt.v9)(Gw),g=function(){var e=xf(),t=new URLSearchParams(e.search).get("comment");if(t){var n=Number.parseInt(t,10);if(Number.isInteger(n))return n}}(),y=(null==r?void 0:r.state)||{},_=y.isFromFeed,E=y.toComments,b=Boolean(u)&&((null==u?void 0:u.isWaitingVideo)?yfe.willPublishAfterProcessingVideo:_o(null==u?void 0:u.publishTime)),S=l.isSubscribed&&!p.some((function(e){return e.isCurrent&&e.price>0})),T=u&&om(u),I=function(){t(Y_({postId:i}))};(0,Gt.useEffect)((function(){u&&d.isFetched||t((0,dm.Ax)(Cv.action)({blogUrl:a,postId:i,commentId:g})),I(),t(p_())}),[]),(0,Gt.useEffect)((function(){I()}),[i]),(0,Gt.useEffect)((function(){if(E){var e=document.getElementById("comments");e&&wf(e)}}),[null===(e=r.state)||void 0===e?void 0:e.toComments]);var N=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:a});return{blogUrl:a,isFromFeed:_,toComments:E,blogLinkUrl:N,blog:l,post:u,postNetworkStatus:d,commentsNetworkStatus:f,subscriptionLevels:m,subscriptionLevelsAll:h,newPostId:v,publishedTimeText:b,isPublic:T,isFreeSubscription:S,onPostTagClick:function(e){var t=[e.id],r=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:a},{postsTagsIds:t});n(r,{state:{fromBlogPost:!0}})},goToBlog:function(){n(N)}}}(),n=t.blog,r=t.post,o=t.postNetworkStatus,a=t.newPostId,i=t.onPostTagClick,l=t.isFromFeed,s=t.blogLinkUrl;return YU({banStatus:e}).shouldShowBanDisclaimer?Gt.createElement(Nse,{description:null==e?void 0:e.description}):r?Gt.createElement(Gt.Fragment,null,Gt.createElement(Pde,{isBlackListed:n.isBlackListed,isHiddenComments:!1,posts:[r],hasMorePosts:!1,postsNetworkStatus:o,isFilterApplied:!1,onFilterReset:Yt.noop,onClickPostTag:i,loadMore:Yt.noop,newPostId:a,showViewForCreator:!1}),Gt.createElement(vfe,{isFromFeed:l,blogLinkUrl:s}),Gt.createElement(_fe,null)):Gt.createElement(ZY,null)};Efe.getFetchActions=function(e,t){var n,r=t.params,o=t.query,a=void 0===o?{}:o,i=r.blogUrl,l=r.postId;if(a.comment){var s=Number.parseInt(a.comment,10);Number.isInteger(s)&&(n=s)}return gfe(gfe([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(Tse(e,t)),!1),[function(){return Cv.action({blogUrl:i,postId:l,commentId:n,commentsLimit:nr().comments.fullPageLimit,repliesLimit:nr().comments.fullPageRepliesLimit})}],!1)};const bfe="StreamChatToggler_icon_UQ8JB",Sfe="StreamChatToggler_button_lsixE";var Tfe,Ife=(0,Qr.getTranslation)("@boosty/common/components.StreamChatToggler"),Nfe=function(e){var t,n=e.classNames,r=void 0===n?{}:n,o=e.children,a=e.onNewWindowClick,i=e.onHide,l=e.onShow,s=e.isOpen,c=e.isShowButtonHidden;return Gt.createElement("div",{className:cG()(r.root,"StreamChatToggler_root_jXzzQ",(t={},t.StreamChatToggler_rootClosed_edWYg=!s,t))},!s&&!c&&Gt.createElement("button",{className:cG()(Sfe,"StreamChatToggler_buttonOpen_HdfaM",r.openButton),type:"button",onClick:l},Gt.createElement(pB,{glyph:hB.Rzl,className:cG()(bfe,"StreamChatToggler_arrowLeft_rZLeu")})),Gt.createElement("div",{className:"StreamChatToggler_chatWrapper_MSMj8"},Gt.createElement("div",{className:"StreamChatToggler_chatButtons_NGJQO"},Gt.createElement("button",{className:Sfe,title:Ife.hide,onClick:i,type:"button"},Gt.createElement(pB,{glyph:hB.Rzl,className:bfe})),Gt.createElement("div",{className:"StreamChatToggler_chatTitle_lZ4Vs"},Ife.chatTitle),Gt.createElement("button",{className:cG()(Sfe,r.newWindowButton),title:Ife.newWindow,onClick:a,type:"button"},Gt.createElement(pB,{glyph:hB.ClC,className:bfe}))),o))};!function(e){e.ROOT="root",e.SUBSCRIBE_BUTTON="subscribeButton"}(Tfe||(Tfe={}));const Cfe={streamPanel:"StreamPanel_streamPanel_IvFqB",rows:"StreamPanel_rows_COmME",topRow:"StreamPanel_topRow_X6Tgv",bottomRow:"StreamPanel_bottomRow_BObEi",streamTitle:"StreamPanel_streamTitle_ZHuXu",streamAuthorAvatar:"StreamPanel_streamAuthorAvatar_T4irY",info:"StreamPanel_info_RRDpc",author:"StreamPanel_author_IX4jk",title:"StreamPanel_title_sg_8u",counters:"StreamPanel_counters_s0WYh",viewersIcon:"StreamPanel_viewersIcon_cMk88",timeCounter:"StreamPanel_timeCounter_QKX7r",clockIcon:"StreamPanel_clockIcon_Zwtdi",buttons:"StreamPanel_buttons_UYGeY",shareButtons:"StreamPanel_shareButtons_Gdzmu",donateButton:"StreamPanel_donateButton_O3KgK",streamFooter:"StreamPanel_streamFooter_rQ7On",fadeIn:"StreamPanel_fadeIn_Dgfi2"};var wfe,Ofe=function(){return Ofe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ofe.apply(this,arguments)},Afe=(0,Qr.getTranslation)("@boosty/common/components.StreamPanel"),Pfe=oo("StreamPanel"),Lfe=function(e){var t=e.blog,n=e.viewers,r=e.stream,o=e.isAuthorized,a=e.isCurrentUserStream,i=e.isFreeSubscription,l=e.onLike,s=e.onRemoveLike,c=e.onReport,u=e.onSubscribe,d=e.showAuth,f=t.blogUrl,m=t.owner,p=m.name,h=m.avatarUrl,v=t.isOwner,y=t.isSubscribed&&!i;return Gt.createElement("div",{className:Cfe.streamPanel},Gt.createElement(Jie,{classNames:{container:Cfe.streamAuthorAvatar},blogUrl:f,isOnline:r.isOnline,avatarUrl:h,size:g.L}),Gt.createElement("div",{className:Cfe.rows},Gt.createElement("div",{className:Cfe.topRow},Gt.createElement("div",{className:Cfe.streamTitle},Gt.createElement("div",{className:Cfe.info},Gt.createElement("div",{className:Cfe.author,title:p},p),Gt.createElement("div",{className:Cfe.title,title:r.title},r.title),Gt.createElement("div",{className:Cfe.counters},Gt.createElement(rie,{classNames:{icon:Cfe.viewersIcon},viewers:n}),(null==r?void 0:r.startTime)&&Gt.createElement(nle,{classNames:{container:Cfe.timeCounter,icon:Cfe.clockIcon},startedAt:r.startTime,isEnded:null==r?void 0:r.isEnded})))),Gt.createElement("div",{className:Cfe.buttons},r.daNick&&Gt.createElement(lle,{className:cG()(Cfe.buttonPanel,Cfe.donateButton),title:Afe.sendDonate,daNick:r.daNick}),!v&&Gt.createElement(gle,Ofe({onSubscribe:u,isPaidSubscribed:y},Na(Pfe(Tfe.SUBSCRIBE_BUTTON)))),Gt.createElement("div",{className:Cfe.shareButtons},Gt.createElement(pie,{classNames:{container:Cfe.streamFooter},blogUrl:f,streamId:r.id,likes:r.count.likes,dropdownAlign:yx.LEFT,isLiked:r.isLiked,isAuthorized:o,isCurrentUserStream:a,isOnline:r.isOnline,hasAccess:r.hasAccess,onLike:l,onRemoveLike:s,onReport:c,showAuth:d}))))))};!function(e){e.ROOT="root"}(wfe||(wfe={}));var Rfe,kfe=function(){return kfe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kfe.apply(this,arguments)},Dfe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Ufe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Bfe=oo("StreamPage"),xfe=function(e){var t,n,r,o=e.stream,i=Gf().blogUrl,l=fH().showPopup;zU({isAuthorizationRequired:!0,shouldSubscribeToStreamChannelOnMount:!0});var s=Mf(),c=(0,Vt.I0)(),u=(0,Vt.v9)(XO),d=(0,Vt.v9)(IL),f=(0,Vt.v9)(Hw),m=(0,Vt.v9)(RL),p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null==o?void 0:o.hasChat),2),h=p[0],v=p[1],g=null!==u,y=(null==u?void 0:u.id)===(null===(r=null==o?void 0:o.user)||void 0===r?void 0:r.id),_=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:i}),E=function(){return l({type:a.AUTH_SIGN_IN})},b=function(){c(ly.action({blogUrl:i}))},S=function(e){return function(e,t){var n;s((0,Yt.getParametrizedUrl)(ir.BLOG_STREAM_PURCHASE,{blogUrl:i,levelId:e},((n={}).ssource=t,n)))}(e,Xu.BLOG_STREAM_SUBSCRIBE)},T=function(){if(g){var e=Boolean(o.subscriptionLevel);e&&0!==o.subscriptionLevel.price?S(o.subscriptionLevel.id):e&&0===o.subscriptionLevel.price&&o.hasAccess?S(d.id):g?b():(l({type:a.AUTH_SIGN_IN,data:{onSuccess:b}}),bd.log.auth.openPopup({source:od.BLOG_FOLLOW}))}else E()},I=function(){return v(!1)};return o&&!o.hasAccess?Gt.createElement(tle,{onSubscribe:T,onPay:Yt.noop,stream:o,className:"StreamPage_subscriptionOverlay_DBzVP",blogUrl:i}):Gt.createElement("div",kfe({className:"StreamPage_block_tylnK"},Na(Bfe(wfe.ROOT))),Gt.createElement(UM,{className:cG()("StreamPage_stream_yWwlw",(t={},t.StreamPage_streamWithChat_QQOdX=h,t))},Gt.createElement(Hie,{classNames:{root:cG()("StreamPage_streamVideo_Twqu8",(n={},n.StreamPage_streamVideoWithChat_UpXBN=h,n))},blogUrl:i,stream:o,onSubscribeClick:T,onPayClick:Yt.noop,shouldSubscribeToStreamChannelOnMount:!0}),Gt.createElement(Lfe,{viewers:o.count.viewers,onSubscribe:T,onLike:function(){return Dfe(void 0,void 0,void 0,(function(){return Ufe(this,(function(e){switch(e.label){case 0:return[4,c((0,dm.Ax)(dp.action)({blogUrl:i}))];case 1:return e.sent(),[2]}}))}))},onRemoveLike:function(){return Dfe(void 0,void 0,void 0,(function(){return Ufe(this,(function(e){switch(e.label){case 0:return[4,c((0,dm.Ax)(Rp.action)({blogUrl:i}))];case 1:return e.sent(),[2]}}))}))},onReport:function(){return c(Qm.action({blogUrl:i}))},stream:o,isCurrentUserStream:y,isAuthorized:g,showAuth:E,blog:f,isFreeSubscription:m}),Gt.createElement("div",{className:"StreamPage_aboutStream_WUisj"},Gt.createElement(zie,{className:"StreamPage_aboutAuthor_OrzVb",linkToBlogComponent:Gt.createElement(Qie,{to:_})}),Gt.createElement(Kie,{className:"StreamPage_streamDescription_UEVzv",description:o.description}))),o.hasChat&&Gt.createElement(Nfe,{isOpen:h,onShow:function(){return v(!0)},onHide:I,onNewWindowClick:function(){var e=(0,Yt.getParametrizedUrl)(ir.BLOG_STREAM_ONLY_CHAT,{blogUrl:i});window.open(e,"chat","width=400,height=800,menu,menubar=no,toolbar=no,location=no,status=no"),I()}},Gt.createElement(xle,{stream:o,streamUserId:o.user.id,classNames:{root:"StreamPage_chat_R4jrW"},blogUrl:i,isModerator:o.isChatModerator,isAuthorizationRequired:!0,isAuthorized:g,showAuth:E})))},Mfe=function(){var e=(0,Vt.I0)(),t=Gf().blogUrl,n=(0,Vt.v9)(zP),r=(0,Vt.v9)(KP),o=(0,Vt.v9)(Hw),a=(0,Vt.v9)(Ww);return(0,Gt.useEffect)((function(){var i;(null===(i=null==n?void 0:n.user)||void 0===i?void 0:i.blogUrl)===t&&r.isFetched||e(np.action({blogUrl:t,from:je.LAYER})),(null==o?void 0:o.blogUrl)===t&&a.isFetched||e(Nm.action({blogUrl:t}))}),[]),r.isFetched&&a.isFetched?Gt.createElement(xfe,{stream:n}):Gt.createElement("div",{className:"Stream_loader_QEzZK"},Gt.createElement(ZY,null))};Mfe.fetchActions=function(e){var t=e.params.blogUrl;return[function(){return Nm.action({blogUrl:t})},function(){return np.action({blogUrl:t,from:je.LAYER})}]},function(e){e.ROOT="root"}(Rfe||(Rfe={}));var Ffe,Gfe=function(){return Gfe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gfe.apply(this,arguments)},Hfe=(0,Qr.getTranslation)("@boosty/common/components.PageForm"),Wfe=oo("PageForm"),Vfe=function(e){var t=e.title,n=e.children,r=e.onBackClick;return Gt.createElement("div",Gfe({className:"PageForm_container_F1Mdp"},Na(Wfe(Rfe.ROOT))),Gt.createElement("div",{className:"PageForm_header_MvJoX"},Gt.createElement("div",{className:"PageForm_link_koH8i",onClick:r},Gt.createElement(pB,{glyph:Bde.WTy,className:"PageForm_icon_hXKZo"}),Hfe.back),Gt.createElement("h1",{className:"PageForm_title_pzzL3"},t)),n)};!function(e){e.ROOT="root"}(Ffe||(Ffe={}));const jfe="DateSelector_btn_AFUtS";var zfe,Yfe,Kfe=function(){return Kfe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kfe.apply(this,arguments)},qfe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Xfe=(0,Qr.getTranslation)("@boosty/common/containers.BlogPost.DateSelector"),Qfe=oo("DateSelector"),Jfe=function(e){var t,n,r,o,a,i=e.minDate,l=void 0===i?new Date:i,s=e.maxDate,c=e.value,u=e.isSelectStyle,d=e.hasClearButton,f=void 0===d||d,m=e.onClear,p=e.onAccept,h=qfe((0,Gt.useState)(!1),2),v=h[0],g=h[1],y=qfe((0,Gt.useState)(!1),2),_=y[0],E=y[1],b=(0,Gt.useRef)(null),S=function(){return c?go(No(c),"dd/MMMM/yyyy/&/HH/mm"):Xfe[u?"choose":"now"]},T=function(){g(!1),E(!1)};return(0,Gt.useLayoutEffect)((function(){var e;v&&(e=(0,Ht.findDOMNode)(b.current).getBoundingClientRect().bottom,E(window.innerHeight<=e))}),[v]),Gt.createElement("div",Kfe({className:cG()("DateSelector_dateSelector_gZlFF",(t={},t.DateSelector_dateSelectStyled_UPaY0=u,t))},Na(Qfe(Ffe.ROOT))),Gt.createElement("button",{className:cG()(jfe,"DateSelector_toggleBtn_pF6K5",(n={},n.DateSelector_toggleBtnHover_xCOrm=!u,n.DateSelector_dateSelectButton_ILuVM=u,n.DateSelector_dateSelected_MD9ME=u&&!!c,n)),type:"button",onClick:function(){g(!0)}},u?Gt.createElement(Gt.Fragment,null,S(),Gt.createElement(pB,{className:cG()("DateSelector_iconArrow_svCsM",(r={},r.DateSelector_iconArrowUp_BR3jN=v,r)),glyph:hB.y9O})):Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{glyph:hB.jt6,className:"DateSelector_calendar_BefrF"}),S())),!u&&f&&c&&Gt.createElement("button",{className:cG()(jfe,"DateSelector_clearBtn__pHkJ"),type:"button",onClick:m},Gt.createElement(pB,{className:"DateSelector_iconClose_yWOXi",glyph:hB.bMz})),v&&Gt.createElement("div",{className:cG()("DateSelector_datePickerWrapper_KGGv2",(o={},o.DateSelector_datePickerWrapperTop_FcyrK=_,o.DateSelector_datePickerWrapperBottom_YxjGD=!_,o))},Gt.createElement(Dx,{onClickOutside:T,trigger:gx.CLICK},Gt.createElement(IG,{ref:b,type:H.DATETIME,className:cG()("DateSelector_datePicker_sy98G",(a={},a.DateSelector_datePickerTop_iTmIC=_,a.DateSelector_datePickerBottom_PN3ij=!_,a.DateSelector_datePickerStretched_ZOSJA=u,a)),defaultValue:c,minDate:l,maxDate:s,onAccept:function(e){T(),p(e)},onCancel:T}))))};!function(e){e.ROOT="root",e.PRICE="price",e.RECORD_SWITCHER="recordSwitcher"}(zfe||(zfe={})),function(e){e.ROOT="root",e.OPTION="option"}(Yfe||(Yfe={}));var Zfe,$fe=function(){return $fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$fe.apply(this,arguments)},eme=(0,Qr.getTranslation)("@boosty/common/components.BlogPostForm.components.AccessLevels"),tme=oo("AccessLevels"),nme=function(e){var t,n=e.className,r=e.accessLevel,o=e.availableAccessLevels,a=e.name,i=e.withTitle,l=e.onAccessLevelChange;return Gt.createElement("div",$fe({className:cG()("AccessLevels_accessSelector_qko1v",n)},Na(tme(Yfe.ROOT))),i&&Gt.createElement("div",{className:"AccessLevels_title_pnfJj"},eme.title),(t=nr().posts.paidPosts.isCreateEnable,o||(t?[E.OPEN,E.ONLY_SUBSCRIBERS,E.SUBSCRIBERS_AND_PRICE,E.ONLY_PRICE]:[E.OPEN,E.ONLY_SUBSCRIBERS])).map((function(e,t){return Gt.createElement("div",$fe({key:"".concat(t).concat(a),className:"AccessLevels_radioButtonContainer_OwRgJ"},Na(tme("".concat(Yfe.OPTION,":").concat(e)))),Gt.createElement(YF,{onRadioButtonClick:l,value:e,id:"".concat(t).concat(a),label:eme.levels[e],isChecked:e===r,classNames:{label:"AccessLevels_radioButtonLabel_A7D3E"}}))})))};!function(e){e.ROOT="root"}(Zfe||(Zfe={}));const rme={subscriptionLevel:"SubscriptionLevelsSelect_subscriptionLevel_PpdnG",selectOptions:"SubscriptionLevelsSelect_selectOptions_kZraD",selectOption:"SubscriptionLevelsSelect_selectOption_JVtSV",selectItemName:"SubscriptionLevelsSelect_selectItemName_r9vld",selectItemDescription:"SubscriptionLevelsSelect_selectItemDescription_k7sTT"};var ome=function(){return ome=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ome.apply(this,arguments)},ame=(0,Qr.getTranslation)("@boosty/common/components.BlogPostForm.components.SubscriptionLevelsSelect"),ime=oo("SubscriptionLevelsSelect"),lme=function(e){var t,n=e.classNames,r=void 0===n?{}:n,o=e.isPriceEnabled,a=e.subscriptionLevelsError,i=e.onSubscriptionLevelChange,l=function(){return!e.subscriptionLevels.length},s=function(){return e.subscriptionLevels.map((function(e){return ome(ome({},e),{name:e.price>0?e.name:ame.subscriptionLevel.followersOnly,description:e.price>0?e.description:ame.subscriptionLevel.followersOnly})}))},c=s(),u=function(t){return t.find((function(t){return e.subscriptionLevel&&e.subscriptionLevel.id===t.id}))}(c),d=l()?ame.subscriptionLevel.unavailable:ame.subscriptionLevel.placeholder,f=l();return Gt.createElement("div",ome({className:cG()(rme.subscriptionLevel,(t={},t[rme.subscriptionLevelWithPrice]=o,t))},Na(ime(Zfe.ROOT))),Gt.createElement(zx,{className:r.label,text:ame.subscriptionLevel.label,id:"BlogPostFormData"}),Gt.createElement(lF,{options:c,labelProp:"name",valueProp:"id",selected:u,placeholder:d,isDisabled:f,error:a,onSelect:i,Component:function(e){var t=e.valueObject,n=s().reduce((function(e,t){return t.price>e?t.price:e}),0),r=nr().currencies.default;return Gt.createElement("div",null,Gt.createElement("div",{className:rme.selectItemName},t.name),Gt.createElement("div",{className:rme.selectItemDescription},(0,Qr.getParametrizedText)(ame.fromPrice,{price:Vr({amount:t.price,currency:r})}),t.price<n&&Gt.createElement(Gt.Fragment,null," ",ame.andMore)))},classNames:{options:rme.selectOptions,option:rme.selectOption}}))};const sme="Access_toggleSwitchLabelText_GMzPB",cme="Access_toggleSwitchLabel_dI6nk";var ume,dme,fme=function(){return fme=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fme.apply(this,arguments)},mme=(0,Qr.getTranslation)("@boosty/common/components.BlogPostForm.components.Access"),pme=oo("AccessTestId"),hme=function(e){var t=e.accessLevel,n=e.commentsMode,r=e.chatMode,o=void 0===r?Ct.DENY:r,a=e.willRecord,i=void 0!==a&&a,l=e.availableAccessLevels,s=e.containerClassName,c=e.isSubscriptionLevelsEnable,u=e.recordStreamIsVisible,d=e.recordStreamIsEnabled,f=e.isPriceEnabled,m=e.subscriptionLevel,p=e.subscriptionLevels,h=e.subscriptionLevelsError,v=e.priceFormatted,g=e.priceError,y=e.isCommentsModeEnabled,_=e.isChatModeEnabled,E=void 0!==_&&_,b=e.onChatModeChange,S=void 0===b?Yt.noop:b,T=e.onWillRecordChange,I=void 0===T?Yt.noop:T,N=e.onPriceChange,C=e.onSubscriptionLevelChange,w=e.onCommentsModeChange,O=e.onAccessLevelChange,A=nr(),P=A.currencies.default,L=A.isMobile,R=(0,Vt.v9)(EA),k=n===Nt.DENY,D=o===Ct.ALLOW,U=null==g;return Gt.createElement("div",{className:cG()("Access_access_gAHfH",s)},Gt.createElement("div",{className:"Access_title_tjEU1"},mme.title),Gt.createElement("div",{className:"Access_accessBody_u_4J_"},Gt.createElement(nme,{availableAccessLevels:l,accessLevel:t,onAccessLevelChange:O,name:"access"}),c&&Gt.createElement(lme,{currency:R,isPriceEnabled:f,subscriptionLevels:p,subscriptionLevel:m,subscriptionLevelsError:h,onSubscriptionLevelChange:C}),f&&Gt.createElement("div",fme({className:"Access_price_IzutD"},Na(pme(zfe.PRICE))),Gt.createElement(Zx,{value:v,mask:Nf(),label:(0,Qr.getParametrizedText)(mme.price.label,{currency:jr(P)}),error:g,isValid:U,placeholder:mme.price.placeholder,onChange:N})),y&&Gt.createElement(SF,{label:mme.comments.deny,classNames:{labelText:sme,label:cme},size:dF.MIDDLE,onToggle:function(e){var t=e?Nt.DENY:Nt.ALLOW;w(t)},checked:k}),E&&Gt.createElement(SF,{label:mme.chat,classNames:{labelText:sme,label:cme},size:dF.MIDDLE,onToggle:function(e){var t=e?Ct.ALLOW:Ct.DENY;S(t)},checked:D}),u&&Gt.createElement("div",fme({},Na(pme(zfe.RECORD_SWITCHER)),{className:"Access_recordSwitcherContainer_YAVwH"}),Gt.createElement(SF,{label:Gt.createElement(Gt.Fragment,null,mme.save,d&&Gt.createElement(Bx,{tooltipTrigger:gx.HOVER,tooltipAlign:L?yx.CENTER:yx.RIGHT,classNames:{icon:"Access_hintIcon_gI8Kc",tooltip:"Access_hintBlock_hcYLs",tooltipContent:"Access_hintContent_ndMjF"}},mme.saveHint)),classNames:{labelText:sme,label:cme},size:dF.MIDDLE,onToggle:I,checked:i,isDisabled:!d}))))};!function(e){e.ROOT="root",e.TITLE="title",e.SUBMIT="submit"}(ume||(ume={})),function(e){e.INPUT="input",e.COPY_BUTTON="copyButton",e.RESET_BUTTON="resetButton"}(dme||(dme={}));const vme="StreamFormCredentials_btn_YpX33",gme="StreamFormCredentials_btnIcon_v6NI1";var yme,_me=function(){return _me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_me.apply(this,arguments)},Eme=(0,Qr.getTranslation)("@boosty/common/containers.Streams.components.StreamForm.components.StreamFormCredentials.components.StreamFormCredentialsKey"),bme=oo("StreamFormCredentialsKey"),Sme=function(e){var t=e.streamKey,n=e.isEditMode,r=e.onReset,o=e.onCopy;return Gt.createElement(Zx,{type:"text",label:Eme.label,value:"•••••••••••••••••••••••••••••••••••••••••",autocomplete:"off",readonly:!0,disabled:!0,isRightElementShifted:!0,rightElement:Gt.createElement("div",{className:"StreamFormCredentials_buttons_tU5GV"},Gt.createElement(c$,{text:t,onCopy:o(iU.KEY)},Gt.createElement(HB,{className:vme},Gt.createElement(pB,_me({className:gme,glyph:hB.vUr},Na(bme(dme.COPY_BUTTON)))),Eme.buttons.copy)),!n&&Gt.createElement(HB,{className:cG()(vme,"StreamFormCredentials_btnReset_NpK4_"),onClick:r},Gt.createElement(pB,_me({className:gme,glyph:hB.uNf},Na(bme(dme.RESET_BUTTON)))),Eme.buttons.reset)),dataAttributes:{"data-test-id":bme(dme.INPUT)}})};!function(e){e.INPUT="input",e.COPY_BUTTON="copyButton"}(yme||(yme={}));var Tme,Ime=function(){return Ime=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ime.apply(this,arguments)},Nme=(0,Qr.getTranslation)("@boosty/common/containers.Streams.components.StreamForm.components.StreamFormCredentials.components.StreamFormCredentialsUrl"),Cme=oo("StreamFormCredentialsUrl"),wme=function(e){var t=e.streamUrl,n=e.onCopy;return Gt.createElement(Zx,{label:Nme.label,value:t,readonly:!0,disabled:!0,isRightElementShifted:!0,rightElement:Gt.createElement(Gt.Fragment,null,Gt.createElement(c$,{text:t,onCopy:n(iU.URL)},Gt.createElement(HB,{className:vme},Gt.createElement(pB,Ime({className:gme,glyph:hB.vUr},Na(Cme(yme.COPY_BUTTON)))),Nme.buttons.copy))),dataAttributes:{"data-test-id":Cme(yme.INPUT)}})},Ome=(0,Qr.getTranslation)("@boosty/common/containers.Streams.components.StreamForm.components.StreamFormCredentials"),Ame=function(e){var t=e.streamKey,n=e.streamUrl,r=e.isEditMode,o=e.onReset,a=e.onCopy;return Gt.createElement(Nx,{title:Ome.title},Gt.createElement("div",{className:"StreamFormCredentials_fields_cuxIK"},Gt.createElement(Sme,{streamKey:t,isEditMode:r,onReset:o,onCopy:a}),Gt.createElement(wme,{streamUrl:n,onCopy:a})))};!function(e){e.ROOT="root",e.INPUT="input"}(Tme||(Tme={}));var Pme,Lme,Rme=(0,Qr.getTranslation)("@boosty/common/containers.Streams.components.StreamForm.components.StreamFormDALink"),kme=oo("StreamFormDALink"),Dme=function(e){var t=e.daNick,n=e.onChange;return Gt.createElement(Nx,{title:Rme.title},Gt.createElement(Zx,{type:"text",label:Rme.label,staticValue:"donationalerts.com/r/",placeholder:"username",value:t,dataAttributes:{"data-test-id":kme(Tme.INPUT)},onChange:function(e){return n(e.target.value)}}))};!function(e){e.UPLOAD_START="uploadstart",e.UPLOAD_END="uploadend"}(Pme||(Pme={})),function(e){e.ROOT="ROOT",e.EDITOR_JS="EDITOR_JS",e.TITLE="TITLE",e.TEXT_TOOL="TEXT_TOOL"}(Lme||(Lme={}));var Ume,Bme="RichEditor",xme=n(48090),Mme=(0,Qr.getTranslation)("@common/components.RichEditor.tools.Image"),Fme=function(){function e(e){var t,n,r=e.api,o=e.config,a=e.data,i=this;this.onRemove=function(e){void 0===e&&(e=Yt.noop);for(var t=i.api.blocks.getBlocksCount(),n=[],r=function(e){var t=i.api.blocks.getBlockByIndex(e);t&&t.name===pe.IMAGE&&n.push(new Promise((function(n){var r=e;t.save().then((function(e){e.data.uploadId===i.data.uploadId&&i.api.blocks.delete(r),n()}))})))},o=0;o<t;o++)r(o);Promise.all(n).then(e)},this.api=r,this.config=o,this.data=a,this.isUploading=!1,this.root=document.createElement("div"),this.root.classList.add(this.CSS.baseClass),this.uploader={uploadByFile:null===(n=null===(t=this.config)||void 0===t?void 0:t.uploader)||void 0===n?void 0:n.uploadByFile}}return e.prototype.rendered=function(){this.isUploading||this.data.complete||this.uploadImage(this.data)},Object.defineProperty(e.prototype,"CSS",{get:function(){return{baseClass:this.api.styles.block,fileBlock:"ImageTool_fileBlock_NLMan",imageBlock:"ImageTool_imageBlock_LSVnY"}},enumerable:!1,configurable:!0}),e.prototype.getHeaderText=function(){return this.data.complete?Mme.tools[pe.IMAGE].title:Mme.tools[pe.IMAGE].loadingTitle},e.prototype.onUploadStart=function(){this.isUploading=!0,this.api.events.emit(Pme.UPLOAD_START,null)},e.prototype.onUploadEnd=function(){this.isUploading=!1,this.api.events.emit(Pme.UPLOAD_END,this.api)},e.prototype.uploadImage=function(e){var t,n,r,o=e.file,a=e.url;return t=this,void 0,r=function(){var e,t=this;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:this.data.uploadId=Qa(),n.label=1;case 1:return n.trys.push([1,3,,4]),this.onUploadStart(),e=this,[4,this.uploader.uploadByFile({uploadId:this.data.uploadId,file:o,url:a})];case 2:return e.data=n.sent(),this.onUploadEnd(),this.render(),[3,4];case 3:return n.sent(),this.onRemove((function(){return t.onUploadEnd()})),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((r=r.apply(t,[])).next())}))},e.prototype.render=function(){return this.root.innerHTML=this.data.complete?(0,xme.renderToStaticMarkup)(Gt.createElement(GQ,{imageClassName:this.CSS.imageBlock,url:this.data.url})):(0,xme.renderToStaticMarkup)(Gt.createElement(FQ,{className:this.CSS.fileBlock,iconType:pe.IMAGE,header:this.getHeaderText(),fileName:this.data.file.name,size:this.data.file.size,isLoading:!this.data.complete,isFromEditor:!0,error:this.data.error,onRemoveClick:this.onRemove})),this.root},e.prototype.save=function(){return this.data},e}();!function(e){e.DONE="DONE",e.PROGRESS="PROGRESS",e.FAILED="FAILED"}(Ume||(Ume={}));var Gme,Hme=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Wme=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Vme=(0,Qr.getTranslation)("@common/components.RichEditor.tools.Attachment"),jme=function(){function e(e){var t=e.api,n=e.config,r=e.data,o=this;this.onRemove=function(){o.uploader.isUploadCancelled=!0;for(var e=o.api.blocks.getBlocksCount(),t=[],n=function(e){var n=o.api.blocks.getBlockByIndex(e);n&&n.name===o.type&&t.push(new Promise((function(t){var r=e;n.save().then((function(e){e.data.id===o.data.id&&o.api.blocks.delete(r),t()}))})))},r=0;r<e;r++)n(r);Promise.all(t)},this.api=t,this.config=n,this.data=r,this.isUploading=!1,this.root=document.createElement("div"),this.root.classList.add(this.CSS.baseClass)}return Object.defineProperty(e,"sanitize",{get:function(){return{title:!0}},enumerable:!1,configurable:!0}),e.prototype.rendered=function(){!this.isUploading&&!this.data.complete&&this.data.size>0&&this.upload()},e.prototype.removed=function(){this.isUploading&&this.onUploadEnd(),this.uploader&&(this.uploader.isUploadCancelled=!0)},Object.defineProperty(e.prototype,"CSS",{get:function(){return{baseClass:this.api.styles.block,block:"AttachmentTool_block_MNG5_"}},enumerable:!1,configurable:!0}),e.prototype.upload=function(){return Hme(this,void 0,void 0,(function(){var e,t=this;return Wme(this,(function(n){switch(n.label){case 0:e=this.type===pe.AUDIO_FILE?Dd:this.type===pe.VIDEO_FILE?Gd:xd,this.uploader=new e({url:this.data.src,file:this.data.file,sessionId:this.data.id,onProgress:function(e){return t.updateProgress(e)},onSuccess:function(){return Hme(t,void 0,void 0,(function(){return Wme(this,(function(e){return[2,this.onSuccess()]}))}))},onError:function(){return t.onError(t.uploader.lastError)}}),n.label=1;case 1:return n.trys.push([1,3,,4]),this.onUploadStart(),[4,this.uploader.upload()];case 2:return n.sent(),[3,4];case 3:return n.sent(),this.onError(this.uploader.lastError),[3,4];case 4:return[2]}}))}))},e.prototype.updateProgress=function(e){this.data.uploadProgress=e,this.render()},e.prototype.onUploadStart=function(){this.isUploading=!0,this.api.events.emit(Pme.UPLOAD_START,null)},e.prototype.onUploadEnd=function(){this.isUploading=!1,this.api.events.emit(Pme.UPLOAD_END,this.api)},e.prototype.onSuccess=function(){return Hme(this,void 0,void 0,(function(){return Wme(this,(function(e){return this.data.complete=!0,this.config.onSuccess(this.data.title),this.render(),[2,this.onUploadEnd()]}))}))},e.prototype.onError=function(e){this.onUploadEnd(),this.config.onError(this.data.title,e),this.onRemove()},e.prototype.getHeaderText=function(){var e=this.type===pe.AUDIO_FILE?"audio":this.type;return this.data.uploadProgress&&100!==this.data.uploadProgress.percent?Vme.tools[e].loadingTitle:Vme.tools[e].title},e.prototype.render=function(){return this.root.innerHTML=(0,xme.renderToStaticMarkup)(Gt.createElement(FQ,{className:this.CSS.block,iconType:this.type,header:this.getHeaderText(),fileName:this.data.title,size:this.data.size,progress:this.data.uploadProgress,error:this.error,isFromEditor:!0,onRemoveClick:this.onRemove})),this.root},e.prototype.save=function(){return this.data},e}(),zme=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yme=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=pe.AUDIO_FILE,t}return zme(t,e),t}(jme),Kme=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qme=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=pe.FILE,t}return Kme(t,e),t}(jme),Xme=function(){function e(e){var t=e.data,n=e.api;this.data=t,this.api=n,this.root=document.createElement("div"),this.root.classList.add(this.CSS.baseClass)}return Object.defineProperty(e.prototype,"CSS",{get:function(){return{baseClass:this.api.styles.block,iframe:"EmbedTool_iframe__8Kml"}},enumerable:!1,configurable:!0}),e.prototype.render=function(){return this.root.innerHTML=(0,xme.renderToStaticMarkup)(Gt.createElement(this.data.type===pe.VIDEO?zQ:jQ,{className:this.CSS.iframe,src:this.data.url})),this.root},e.prototype.save=function(){return this.data},e}(),Qme=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jme=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=pe.VIDEO_FILE,t}return Qme(t,e),t.prototype.removed=function(){this.isUploading&&(this.config.onCancel(this.data.id),this.isUploading=!1),this.uploader&&(this.uploader.isUploadCancelled=!0)},t.prototype.onUploadStart=function(){this.uploader.setExtraOptions({vid:this.data.videoId,videoId:this.data.id}),e.prototype.onUploadStart.call(this)},Object.defineProperty(t.prototype,"CSS",{get:function(){return{baseClass:this.api.styles.block,block:"VideoFileTool_block_Oorps"}},enumerable:!1,configurable:!0}),t.prototype.onSuccess=function(){return t=this,void 0,o=function(){var t,n,o,a,i,l,s,c,u,d,f;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(m){switch(m.label){case 0:t=Qo(r.VIDEO_COVER),m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.config.uploadVideoFinish({id:this.data.id})];case 2:return n=m.sent(),o=n.url,a=n.vid,i=n.playerUrls,l=n.duration,s=n.preview,c=n.id,u=n.timeCode,d=n.viewsCounter,f=n.showViewsCounter,this.data.src=o,this.data.videoId=a,this.data.playerUrls=i,this.data.duration=l,this.data.preview=s,this.data.vid=a,this.data.id=c,this.data.timeCode=u,this.data.viewsCounter=d,this.data.showViewsCounter=f,t&&(this.data.defaultPreview=n.defaultPreview,this.data.previewId=n.previewId),[2,e.prototype.onSuccess.call(this)];case 3:return m.sent(),this.isUploading=!1,this.config.onCancel(this.data.id),this.config.onError(this.data.title,null),this.onRemove(),[2,null];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,r){function a(e){try{l(o.next(e))}catch(e){r(e)}}function i(e){try{l(o.throw(e))}catch(e){r(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((o=o.apply(t,[])).next())}));var t,n,o},t.prototype.render=function(){return this.data.complete?(Ht.render(Gt.createElement(fJ,{className:this.CSS.block,iconType:this.type,header:this.getHeaderText(),fileName:this.data.title,src:this.data.src,size:this.data.size,progress:this.data.uploadProgress,error:this.error,isFromEditor:!0,onRemoveClick:this.onRemove,onVideoPreviewUpload:this.config.uploadVideoPreview,setVideoPreview:this.config.setVideoPreview,showAlert:this.config.showAlert,id:this.data.id,playerUrls:this.data.playerUrls,duration:this.data.duration,title:this.data.title,defaultPreview:this.data.defaultPreview,preview:this.data.preview,previewId:this.data.previewId,vid:this.data.vid,videoId:this.data.videoId,timeCode:this.data.timeCode,viewsCounter:this.data.viewsCounter,showViewsCounter:this.data.showViewsCounter}),this.root),this.root):e.prototype.render.call(this)},t}(jme),Zme=function(){function e(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}return Object.defineProperty(e,"anchorNode",{get:function(){var e=window.getSelection();return e?e.anchorNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e,"range",{get:function(){var e=window.getSelection();return e&&e.rangeCount?e.getRangeAt(0):null},enumerable:!1,configurable:!0}),e.get=function(){return window.getSelection()},e.prototype.removeFakeBackground=function(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))},e.prototype.setFakeBackground=function(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0},e.prototype.save=function(){this.savedSelectionRange=e.range},e.prototype.restore=function(){if(this.savedSelectionRange){var e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}},e.prototype.clearSaved=function(){this.savedSelectionRange=null},e.prototype.collapseToEnd=function(){var e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)},e.prototype.findParentTag=function(e,t,n){void 0===n&&(n=10);var r=window.getSelection(),o=null;if(!r||!r.anchorNode||!r.focusNode)return null;var a=[r.anchorNode,r.focusNode];return Array.from(a).forEach((function(r){for(var a=n;a>0&&r.parentNode&&(r.tagName!==e||(o=r,t&&r.classList&&!r.classList.contains(t)&&(o=null),!o));)r=r.parentNode,a--})),o},e.prototype.expandToTag=function(e){var t=window.getSelection();t.removeAllRanges();var n=document.createRange();n.selectNodeContents(e),t.addRange(n)},e}(),$me=function(){function e(e){var t=e.api,n=e.config;this.isMobile=nr().isMobile,this.commandLink="createLink",this.commandUnlink="unlink",this.CSS={actions:"ce-inline-tool-actions-container",actionsShowed:"ce-inline-tool-actions-container--showed",button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",input:"ce-inline-tool-input",inputWrapper:"ce-inline-tool-input-wrapper",confirmButton:"ce-inline-tool-confirm-button",confirmButtonActive:"ce-inline-tool-confirm-button--active"},this.ICONS={IconLinkTool:'\n\t\t\t<svg class="icon icon--link" width="20px" height="20px" viewBox="'.concat(hB.Llr.viewBox,'">\n\t\t\t\t<use xlink:href="#').concat(hB.Llr.id,'" />\n\t\t\t</svg>\n\t\t').trim(),IconLinkToolActive:'\n\t\t\t<svg class="icon icon--link-active" width="20px" height="20px" viewBox="'.concat(hB.Wnn.viewBox,'">\n\t\t\t\t<use xlink:href="#').concat(hB.Wnn.id,'" />\n\t\t\t</svg>\n\t\t').trim(),IconConfirm:'\n\t\t\t<svg class="icon icon--enter" width="20px" height="20px" viewBox="'.concat(hB.Fz0.viewBox,'">\n\t\t\t\t<use xlink:href="#').concat(hB.Fz0.id,'" />\n\t\t\t</svg>\n\t\t').trim()},this.nodes={button:null,actions:null,textInput:null,linkInput:null,linkInputWrapper:null,confirmButton:null},this.actionsOpened=!1,this.api=t,this.selection=new Zme,this.validateURL=n.onURLValidate||this._validateURL,this.validateText=n.onTextValidate||this._validateText,this.onURLValidationError=n.onURLValidationError||Yt.noop,this.onTextValidationError=n.onTextValidationError||Yt.noop}return Object.defineProperty(e,"sanitize",{get:function(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shortcut",{get:function(){return"CMD+K"},enumerable:!1,configurable:!0}),e.prototype.createTextInput=function(){this.nodes.textInput=document.createElement("input"),this.nodes.textInput.placeholder=this.api.i18n.t("Enter text"),this.nodes.textInput.classList.add(this.CSS.input),this.nodes.textInput.addEventListener("keydown",this.onTextInputKeyDown.bind(this)),this.nodes.textInput.addEventListener("keyup",this.onTextInputKeyUp.bind(this)),this.nodes.textInput.addEventListener("focus",this.onInputFocus.bind(this))},e.prototype.createLinkInputWrapper=function(){this.nodes.linkInputWrapper=document.createElement("div"),this.nodes.linkInputWrapper.classList.add(this.CSS.inputWrapper)},e.prototype.createLinkInput=function(){this.nodes.linkInput=document.createElement("input"),this.nodes.linkInput.placeholder=this.api.i18n.t("Add a link"),this.nodes.linkInput.classList.add(this.CSS.input),this.nodes.linkInput.addEventListener("keydown",this.onLinkInputKeyDown.bind(this)),this.nodes.linkInput.addEventListener("focus",this.onInputFocus.bind(this)),this.isMobile&&this.nodes.linkInput.addEventListener("input",this.onLinkInput.bind(this))},e.prototype.createConfirmButton=function(){this.nodes.confirmButton=document.createElement("button"),this.nodes.confirmButton.type="button",this.nodes.confirmButton.classList.add(this.CSS.confirmButton),this.nodes.confirmButton.innerHTML=this.ICONS.IconConfirm,this.nodes.confirmButton.addEventListener("click",this.onConfirmButtonClick.bind(this))},e.prototype.render=function(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML="".concat(this.ICONS.IconLinkTool).concat(this.ICONS.IconLinkToolActive),this.nodes.button},e.prototype.renderActions=function(){return this.nodes.actions=document.createElement("div"),this.nodes.actions.classList.add(this.CSS.actions),this.createTextInput(),this.createLinkInputWrapper(),this.createLinkInput(),this.createConfirmButton(),this.nodes.linkInputWrapper.appendChild(this.nodes.linkInput),this.nodes.linkInputWrapper.appendChild(this.nodes.confirmButton),this.nodes.actions.appendChild(this.nodes.textInput),this.nodes.actions.appendChild(this.nodes.linkInputWrapper),this.nodes.actions},e.prototype.surround=function(e){if(e){this.actionsOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());var t=this.selection.findParentTag("A");if(t)return this.selection.expandToTag(t),this.unlink(),this.closeActions(),this.checkState(),void this.api.toolbar.close()}this.toggleActions()},e.prototype.checkState=function(){var e=this.selection.findParentTag("A");return e?(this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions()):this.nodes.button.classList.remove(this.CSS.buttonActive),Boolean(e)},e.prototype.openActions=function(e){void 0===e&&(e=!1),this.selection.save();var t=this.selection.findParentTag("A"),n=null==t?void 0:t.getAttribute("href");this.nodes.textInput.value=this.selection.savedSelectionRange.commonAncestorContainer.textContent||"",this.nodes.actions.classList.add(this.CSS.actionsShowed),this.nodes.linkInput.value=n||"",e&&this.nodes.textInput.focus(),this.actionsOpened=!0},e.prototype.closeActions=function(e){var t;void 0===e&&(e=!0);var n=null===(t=this.selection)||void 0===t?void 0:t.savedSelectionRange;if(n&&n.collapsed&&!n.toString().trim()&&"A"===n.commonAncestorContainer.nodeName&&n.commonAncestorContainer.parentElement.removeChild(n.commonAncestorContainer),this.selection.isFakeBackgroundEnabled){var r=new Zme;r.save(),this.selection.restore(),this.selection.removeFakeBackground(),r.restore()}this.nodes.actions.classList.remove(this.CSS.actionsShowed),this.nodes.textInput.value="",this.nodes.linkInput.value="",e&&this.selection.clearSaved(),this.actionsOpened=!1},e.prototype.toggleActions=function(){this.actionsOpened?this.closeActions(!1):this.openActions(!0)},e.prototype.clear=function(){this.closeActions()},e.prototype._validateText=function(e){return 0!==e.length},e.prototype._validateURL=function(e){return!Bn.test(e)||!xn.test(e)},e.prototype.prepareLink=function(e){return e=e.trim(),this.addProtocol(e)},e.prototype.addProtocol=function(e){return/^https?:(\/\/)?/.test(e)?e:e="http://"+e},e.prototype.insertLink=function(e){this.selection.restore(),this.selection.removeFakeBackground(),document.execCommand(this.commandLink,!1,e)},e.prototype.unlink=function(){document.execCommand(this.commandUnlink)},e.prototype.onLinkSubmit=function(e){var t=this.nodes.textInput.value,n=this.nodes.linkInput.value||"";t.trim()||n.trim()||(this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions()),this.validateText(t)?this.validateURL(n)?(n=this.prepareLink(n),this.insertLink(n),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.api.toolbar.close()):this.onURLValidationError():this.onTextValidationError()},e.prototype.onInputFocus=function(e){if(!this.selection.isFakeBackgroundEnabled){var t=this.selection.findParentTag("A"),n=e.target;this.selection.expandToTag(t),this.selection.save(),this.selection.setFakeBackground(),n.focus()}},e.prototype.onTextInputKeyDown=function(e){e.key!==ae.ENTER&&e.key!==ae.TAB||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.nodes.linkInput.focus())},e.prototype.onTextInputKeyUp=function(e){var t=this.nodes.textInput.value||"";this.selection.savedSelectionRange.deleteContents(),this.selection.savedSelectionRange.insertNode(document.createTextNode(t))},e.prototype.onLinkInput=function(e){this.nodes.linkInput.value.length>0&&!this.nodes.confirmButton.classList.contains(this.CSS.confirmButtonActive)&&this.nodes.confirmButton.classList.add(this.CSS.confirmButtonActive),0===this.nodes.linkInput.value.length&&this.nodes.confirmButton.classList.contains(this.CSS.confirmButtonActive)&&this.nodes.confirmButton.classList.remove(this.CSS.confirmButtonActive)},e.prototype.onLinkInputKeyDown=function(e){e.shiftKey&&e.key===ae.TAB&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.nodes.textInput.focus()),e.key!==ae.ENTER&&13!==e.keyCode||this.onLinkSubmit(e)},e.prototype.onConfirmButtonClick=function(e){this.onLinkSubmit(e)},e.isInline=!0,e.title="Link",e}(),epe=function(){function e(t){var n=t.data,r=t.config,o=t.api,a=t.readOnly;this.isTag=function(e){return"tag"===e.type},this.api=o,this.readOnly=a,this._placeholder=r.placeholder?r.placeholder:e.DEFAULT_PLACEHOLDER,this._data={},this._preserveBlank=r.preserveBlank||!1,this._parseLinks=r.parseLinks||!1,this._element=this.drawView(),this.data=n}return Object.defineProperty(e,"DEFAULT_PLACEHOLDER",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CSS",{get:function(){return{block:this.api.styles.block,wrapper:"ce-paragraph"}},enumerable:!1,configurable:!0}),e.prototype.drawView=function(){var e=document.createElement("DIV");return e.classList.add(this.CSS.wrapper,this.CSS.block),e.contentEditable="false",e.dataset.placeholder=this.api.i18n.t(this._placeholder),e.dataset.testId=oo(Bme)(Lme.TEXT_TOOL),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp.bind(this)),this._parseLinks&&e.addEventListener("paste",this.onLinkPaste.bind(this))),e},e.prototype.render=function(){return this._element},e.prototype.merge=function(e){var t={text:this.data.text+e.text};this.data=t},e.prototype.validate=function(e){return""!==e.text.trim()||this._preserveBlank},e.prototype.save=function(e){return{text:e.innerHTML}},e.prototype.getLink=function(e){var t=document.createElement("A");return t.setAttribute("href",e),t.innerText=e,t},e.prototype.onKeyUp=function(e){"Backspace"!==e.code&&"Delete"!==e.code||""===this._element.textContent&&(this._element.innerHTML="")},e.prototype.onLinkPaste=function(e){var t=e.clipboardData.getData("text"),n=window.getSelection();if(t.match(Bn)&&n.rangeCount){var r=this.getLink(t);n.deleteFromDocument(),n.getRangeAt(0).insertNode(r),n.collapseToEnd(),e.preventDefault(),e.stopPropagation()}},e.prototype.onPaste=function(e){if(this.isTag(e)){var t={text:e.detail.data.innerHTML};this.data=t}},Object.defineProperty(e,"conversionConfig",{get:function(){return{export:"text",import:"text"}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sanitize",{get:function(){return{text:{br:!0}}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isReadOnlySupported",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){var e=this._element.innerHTML;return this._data.text=e,this._data},set:function(e){this._data=e||{},this._element.innerHTML=this._data.text||""},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pasteConfig",{get:function(){return{tags:["P"]}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"toolbox",{get:function(){return{icon:hB.HOS.content,title:"Text"}},enumerable:!1,configurable:!0}),e}(),tpe=function(){function e(e){var t=e.api;this.nodes={button:void 0},this.api=t}return Object.defineProperty(e.prototype,"shortcut",{get:function(){return this._shortcut},enumerable:!1,configurable:!0}),e.prototype.getIconSvgMarkup=function(e,t){return void 0===t&&(t=!1),'<svg class="icon icon--'.concat(this.commandName+(t?"-active":""),'" width="20px" height="20px" viewBox="').concat(e.viewBox,'"><use xlink:href="#').concat(e.id,'" /></svg>')},e.prototype.render=function(){var e=this.ICONS,t=e.iconInactive,n=e.iconActive,r=this.getIconSvgMarkup(t),o=this.getIconSvgMarkup(n,!0);return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML="".concat(r).concat(o),this.nodes.button},e.prototype.surround=function(e){document.execCommand(this.commandName)},e.prototype.checkState=function(e){var t=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,t),t},e.isInline=!0,e}(),npe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rpe=function(e){function t(t){var n=e.call(this,t)||this;return n._shortcut="CMD+B",n.commandName="bold",n.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--".concat(n.commandName)},n.ICONS={iconInactive:hB.vYZ,iconActive:hB.MEw},n}return npe(t,e),Object.defineProperty(t,"sanitize",{get:function(){return{b:{}}},enumerable:!1,configurable:!0}),t.title="Bold",t}(tpe),ope=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ape=function(e){function t(t){var n=e.call(this,t)||this;return n.tag="U",n.className="cdx-underline",n._shortcut="CMD+U",n.commandName="underline",n.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--".concat(n.commandName)},n.ICONS={iconInactive:hB.IPB,iconActive:hB.aGf},n}return ope(t,e),Object.defineProperty(t,"sanitize",{get:function(){return{u:{}}},enumerable:!1,configurable:!0}),t.prototype.wrap=function(e){var t=document.createElement(this.tag);t.classList.add(this.className),t.appendChild(e.extractContents()),e.insertNode(t),this.api.selection.expandToTag(t)},t.prototype.unwrap=function(e){this.api.selection.expandToTag(e);var t=window.getSelection(),n=t.getRangeAt(0),r=n.extractContents();e.parentNode.removeChild(e),n.insertNode(r),t.removeAllRanges(),t.addRange(n)},t.prototype.checkState=function(e){var t=this.api.selection.findParentTag(this.tag,this.className);return this.nodes.button.classList.toggle(this.CSS.buttonActive,!!t),!!t},t.prototype.surround=function(e){if(e){var t=this.api.selection.findParentTag(this.tag,this.className);t?this.unwrap(t):this.wrap(e)}},t.title="Underline",t}(tpe),ipe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lpe=function(e){function t(t){var n=e.call(this,t)||this;return n._shortcut="CMD+I",n.commandName="italic",n.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--".concat(n.commandName)},n.ICONS={iconInactive:hB.KuG,iconActive:hB.xZB},n}return ipe(t,e),Object.defineProperty(t,"sanitize",{get:function(){return{i:{}}},enumerable:!1,configurable:!0}),t.title="Italic",t}(tpe),spe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cpe=function(){return cpe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cpe.apply(this,arguments)},upe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},dpe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},fpe=(0,Qr.getTranslation)("@common/components.RichEditor"),mpe=function(e){function t(t){var r=e.call(this,t)||this;return r.editorContainerRef=Gt.createRef(),r.editorRef=Gt.createRef(),r.inputRef=Gt.createRef(),r.toolbarRef=Gt.createRef(),r.editorJS=null,r.isEditing=!1,r.state={isReinitializeEnabled:!0,isToolbarShadowed:!1,isShiftEnterDisabled:!1,isToolbarStaticForced:!1,recentlyFocusedBlockIndex:0},r.getTextLength=function(e){return e.reduce((function(e,t){try{return e+JSON.parse(t.content)[u.TEXT]}catch(t){return e}}),"").length},r.getImageErrorText=function(e,t){var n=nr().publisher.images.limits,r=n.maxSize,o=n.maxWidth,a=n.unit,i="".concat((0,Qr.getParametrizedText)(fpe.tools.common.uploadError,{fileName:e}));switch(t){case oe.IMAGE_SIZE_LIMIT:i+=" — ".concat((0,Qr.getParametrizedText)(fpe.errors.limitImageSize,{limit:Lo(r,a,Z.MB)}));break;case oe.IMAGE_WIDTH_LIMIT:i+=" — ".concat((0,Qr.getParametrizedText)(fpe.errors.limitImageWidth,{limit:o}));break;case oe.INVALID_FORMAT:i+=" - ".concat(fpe.errors.invalidFormat);break;case oe.NETWORK_ERROR:i+=" — ".concat(fpe.errors.network)}return i},r.getFileErrorText=function(e,t,n){var r,o=((r={})[pe.FILE]="files",r[pe.AUDIO_FILE]="audioFiles",r[pe.VIDEO_FILE]="videoFiles",r),a=nr(),i=o[e],l=a.publisher[i].limits,s=l.fileSize,c=l.unit,u="".concat((0,Qr.getParametrizedText)(fpe.tools.common.uploadError,{fileName:t}));switch(n){case Nd.FILE_SIZE_LIMIT:u+=" — ".concat((0,Qr.getParametrizedText)(fpe.errors.limitFileSize,{limit:Lo(s,c,Z.MB)}));break;case Nd.NETWORK_ERROR:u+=" — ".concat(fpe.errors.network)}return u},r.getBlock=function(e){return r.editorJS.blocks.getBlockByIndex(e)},r.setRecentlyFocusedBlockIndex=function(){r.setState({recentlyFocusedBlockIndex:r.editorJS.blocks.getCurrentBlockIndex()})},r.uploadVideoPreviewImage=function(e){return upe(r,void 0,Promise,(function(){var t,n;return dpe(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.props.onUploadStart(),[4,this.uploadImage(e)];case 1:return t=r.sent(),this.props.onUploadEnd(this.props.data),[2,t];case 2:throw n=r.sent(),this.props.onUploadEnd(this.props.data),new Ar(n);case 3:return[2]}}))}))},r.uploadImage=function(e){var t=e.uploadId,n=e.file;return upe(r,void 0,Promise,(function(){var e,r,o,a,i,l,s;return dpe(this,(function(c){switch(c.label){case 0:e=this.props.uploadImage,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,e({type:pe.IMAGE,data:n,uploadId:t})];case 2:return r=c.sent().image,o=r.id,a=r.url,[2,{id:o,uploadId:t,url:a,file:n,complete:!0}];case 3:if((i=c.sent())instanceof Ar){if((null===(l=i.serverError)||void 0===l?void 0:l.error)===ne.IMAGE_TOO_BIG)throw this.showErrorAlert(this.getImageErrorText(n.name,oe.IMAGE_SIZE_LIMIT)),new Error(this.getImageErrorText(n.name,oe.IMAGE_SIZE_LIMIT));if((null===(s=i.serverError)||void 0===s?void 0:s.error)===ne.WRONG_IMAGE_FORMAT)throw this.showErrorAlert(this.getImageErrorText(n.name,oe.INVALID_FORMAT)),new Error(this.getImageErrorText(n.name,oe.INVALID_FORMAT));throw this.showErrorAlert(this.getImageErrorText(n.name,oe.NETWORK_ERROR)),new Error(oe.NETWORK_ERROR)}throw this.showErrorAlert(this.getImageErrorText(n.name,oe.NETWORK_ERROR)),new Error(oe.NETWORK_ERROR);case 4:return[2]}}))}))},r.prepareInsertionPosition=function(){var e=r.state.recentlyFocusedBlockIndex,t=r.getBlock(e);return t&&t.isEmpty&&r.editorJS.blocks.delete(e),!t||t&&t.isEmpty?0:1},r.initEditorJS=function(){return upe(r,void 0,Promise,(function(){var e,t,r,o,a,i,l,s,c,u,d=this;return dpe(this,(function(f){switch(f.label){case 0:return[4,n.e(943).then(n.t.bind(n,13943,23))];case 1:return e=f.sent().default,t=this.props,r=t.textLimit,o=t.placeholder,a=t.uploadVideoFinish,i=t.onUploadStart,l=t.onUploadEnd,s=t.setVideoPreview,c=cpe({holder:this.editorRef.current,placeholder:o,tools:(u={paragraph:{class:epe,config:{preserveBlank:!0,parseLinks:this.props.inlineToolbar.includes("link")}},bold:{class:rpe},italic:{class:lpe},underline:{class:ape},link:{class:$me,config:{onURLValidate:this.handleLinkURLValidate,onTextValidationError:this.handleLinkTextValidationError,onURLValidationError:this.handleLinkURLValidationError}}},u[pe.IMAGE]={class:Fme,config:{uploader:{uploadByFile:this.uploadImage}}},u[pe.AUDIO_FILE]={class:Yme,config:{onSuccess:this.handleUploadSuccess,onError:this.handleAudioFileUploadError}},u[pe.FILE]={class:qme,config:{onSuccess:this.handleUploadSuccess,onError:this.handleFileUploadError}},u[pe.AUDIO]={class:Xme},u[pe.VIDEO]={class:Xme},u[pe.VIDEO_FILE]={class:Jme,config:{setVideoPreview:s,uploadVideoPreview:this.uploadVideoPreviewImage,showAlert:this.props.showAlert,uploadVideoFinish:a,onCancel:this.handleUploadSuccess,onSuccess:this.handleUploadSuccess,onError:this.handleVideoFileUploadError}},u),inlineToolbar:this.props.inlineToolbar,i18n:{messages:{ui:{blockTunes:{toggler:{"Click to tune":fpe.tools.blockTunes.title}}},toolNames:{Bold:fpe.tools.bold.title,Italic:fpe.tools.italic.title,Underline:fpe.tools.underline.title,Link:fpe.tools.link.title},tools:{link:{"Enter text":fpe.tools.link.textPlaceholder,"Add a link":fpe.tools.link.linkPlaceholder}},blockTunes:{delete:{Delete:fpe.tools.blockTunes.delete},moveUp:{"Move up":fpe.tools.blockTunes.moveUp},moveDown:{"Move down":fpe.tools.blockTunes.moveDown}}}},data:Xk(this.props.data)},this.props.dataChangeHandlers&&{onChange:function(e){return upe(d,void 0,void 0,(function(){var t,n,o,a,i,l,s;return dpe(this,(function(c){switch(c.label){case 0:return Object.keys(this.editorJS).length?(this.props.isReinitializeEnabled||this.setState({isReinitializeEnabled:!1}),[4,e.saver.save()]):[2];case 1:return t=c.sent(),n=nD(t),o=this.getTextLength(n),a=window.getSelection(),i=a.isCollapsed,l=a.focusNode,s=window.getSelection().anchorNode,!i||l instanceof HTMLElement||e.inlineToolbar.close(),(null==s?void 0:s.isContentEditable)&&e.toolbar.close(),this.isEditing=!1,this.props.dataChangeHandlers.onEnd(n),o>r&&this.removeExcessiveText(e,n),[2]}}))}))}}),this.editorJS=new e(c),[4,this.editorJS.isReady];case 2:return f.sent(),this.editorJS.on(Pme.UPLOAD_START,i),this.editorJS.on(Pme.UPLOAD_END,(function(e){return upe(d,void 0,void 0,(function(){var t,n;return dpe(this,(function(r){switch(r.label){case 0:return[4,e.saver.save()];case 1:return t=r.sent(),n=nD(t),l(n),[2]}}))}))})),[2]}}))}))},r.removeExcessiveText=function(e,t){return upe(r,void 0,void 0,(function(){var n,r,o,a;return dpe(this,(function(i){switch(i.label){case 0:return n=this.props.textLimit,r=0,o=t.reduce((function(e,t){try{if(t.type!==pe.TEXT||t.modificator===de.BLOCK_END)return e.push(t),e;var o="",a=JSON.parse(t.content),i=n-r,l=a[0].substring(0,i);return(r+=l.length)<=n&&(o=JSON.stringify([l,a[1],a[2]])),e.push(cpe(cpe({},t),{content:o})),e}catch(n){return e.push(t),e}}),[]),a=Xk(o),this.editorJS.clear(),[4,this.editorJS.render({blocks:a.blocks})];case 1:return i.sent(),e.caret.focus(!0),[2]}}))}))},r.showErrorAlert=function(e,t){void 0===t&&(t=!0),(0,r.props.showAlert)({type:p.ERROR,text:e,isPermanent:t})},r.showSuccessAlert=function(e){(0,r.props.showAlert)({type:p.SUCCESS,text:(0,Qr.getParametrizedText)(fpe.tools.common.uploadSuccess,{fileName:e})})},r.insertVideoEmbed=function(e){var t=r.state.recentlyFocusedBlockIndex+r.prepareInsertionPosition();r.editorJS.blocks.insert(pe.VIDEO,{type:pe.VIDEO,url:e},{},t)},r.insertAudioEmbed=function(e){return upe(r,void 0,void 0,(function(){var t,n,r,o;return dpe(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Kc.mediaData.getSoundcloudTrackEmbed(e)];case 1:return t=a.sent(),n=this.state.recentlyFocusedBlockIndex,r=this.prepareInsertionPosition(),o=n+r,this.editorJS.blocks.insert(pe.AUDIO,cpe({type:pe.AUDIO},t),{},o),[3,3];case 2:return a.sent(),this.showErrorAlert(fpe.errors.soundcloudEmbedGeneration),[3,3];case 3:return[2]}}))}))},r.validateAudioUrl=function(e){return e&&Boolean(e.match(/soundcloud.com\/.+\/.+/i))},r.validateVideoUrl=function(e){return e&&!!lD(e)},r.insertEmptyParagraphStub=function(e){r.editorJS.blocks.insert("paragraph",{},{},e)},r.insertImages=function(e,t){var n=nr().publisher.images.limits,o=n.checkWidth,a=n.maxWidth,i=n.maxSize,l=n.unit;Promise.all(Array.from(e).map((function(e,n){return upe(r,void 0,void 0,(function(){var r,s,c,u,d;return dpe(this,(function(f){switch(f.label){case 0:return r=t+n,this.insertEmptyParagraphStub(r),[4,Yd(e)];case 1:return((s=f.sent()).height>=a||s.width>=a)&&o?(this.showErrorAlert(this.getImageErrorText(e.name,oe.IMAGE_WIDTH_LIMIT)),[3,5]):[3,2];case 2:return ro(e.size,Z.B,l)>i?(this.showErrorAlert(this.getImageErrorText(e.name,oe.IMAGE_SIZE_LIMIT)),[3,5]):[3,3];case 3:return[4,Qd(e)];case 4:c=f.sent(),u=c.file,d=c.url,this.editorJS.blocks.delete(r),this.editorJS.blocks.insert(pe.IMAGE,{url:d,file:u,complete:!1},{},r),f.label=5;case 5:return[2]}}))}))})))},r.insertFiles=function(e,t,n){var o,a=r.props,i=a.createUploadAudioContainer,l=a.createUploadFileContainer,s=((o={})[pe.FILE]=l,o[pe.AUDIO_FILE]=i,o);Promise.all(Array.from(e).map((function(e,o){return upe(r,void 0,void 0,(function(){var r,a,i,l,c,u;return dpe(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),r=t+o,this.insertEmptyParagraphStub(r),u=e.name,a=e.size,[4,s[n]()];case 1:return i=d.sent().container,l=i.id,c=i.url,this.editorJS.blocks.delete(r),this.editorJS.blocks.insert(n,{id:l,src:c,title:u,size:a,file:e,complete:!1},{},r),[3,3];case 2:return d.sent(),u=e.name,this.showErrorAlert(this.getFileErrorText(n,u)),[3,3];case 3:return[2]}}))}))})))},r.insertVideoFiles=function(e,t){var n=r.props.createUploadVideoContainer;Promise.all(Array.from(e).map((function(e,o){return upe(r,void 0,void 0,(function(){var r,a,i,l,s,c,u;return dpe(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),r=t+o,this.insertEmptyParagraphStub(r),u=e.name,a=e.size,[4,n({fileName:e.name})];case 1:return i=d.sent().container,l=i.id,s=i.url,c=i.videoId,this.editorJS.blocks.delete(r),this.editorJS.blocks.insert(pe.VIDEO_FILE,{id:l,videoId:c,src:s,title:u,size:a,file:e,complete:!1},{},r),[3,3];case 2:return d.sent(),u=e.name,this.showErrorAlert(this.getFileErrorText(pe.VIDEO_FILE,u)),[3,3];case 3:return[2]}}))}))})))},r.insertBlocks=function(e){return function(){return upe(r,void 0,void 0,(function(){var t,n,r,o,a;return dpe(this,(function(i){switch(i.label){case 0:return e===pe.IMAGE?t="image/*":e===pe.AUDIO_FILE?t=Cd()?".mp3,.wav,.flac":"audio/*":e===pe.VIDEO_FILE?t=Cd()?"video/mp4,video/x-m4v,video/*":"video/*":e===pe.FILE&&(t=null),[4,cD({multiple:!0,accept:t})];case 1:return n=i.sent(),r=this.state.recentlyFocusedBlockIndex,o=this.prepareInsertionPosition(),a=r+o,e===pe.IMAGE?this.insertImages(n,a):e===pe.AUDIO_FILE||e===pe.FILE?this.insertFiles(n,a,e):e===pe.VIDEO_FILE&&this.insertVideoFiles(n,a),[2]}}))}))}},r.handleLinkURLValidate=function(e){return e.match(Bn)||e.match(xn)},r.handleLinkURLValidationError=function(){r.showErrorAlert(fpe.errors.invalidLinkUrl,!1)},r.handleLinkTextValidationError=function(){r.showErrorAlert(fpe.errors.invalidLinkText,!1)},r.handleUploadSuccess=function(e){r.showSuccessAlert(e)},r.handleFileUploadError=function(e,t){r.showErrorAlert(r.getFileErrorText(pe.FILE,e,t))},r.handleAudioFileUploadError=function(e,t){r.showErrorAlert(r.getFileErrorText(pe.AUDIO_FILE,e,t))},r.handleVideoFileUploadError=function(e,t){r.showErrorAlert(r.getFileErrorText(pe.VIDEO_FILE,e,t))},r.handleTitleKeyDown=function(e){if(e.key===ae.ENTER){var t=r.editorJS.blocks.getBlockByIndex(0);t&&"paragraph"!==t.name&&r.insertEmptyParagraphStub(0),r.editorJS.focus()}},r.handleKeyDown=function(e){r.state.isShiftEnterDisabled&&e.shiftKey&&e.key===ae.ENTER&&e.preventDefault();var t=1===e.key.length&&!function(e){return rD.some((function(t){return e.getModifierState(t)}))}(e);!e.repeat&&t&&(r.isEditing||r.props.dataChangeHandlers.onStart(),r.isEditing=!0)},r.handlePaste=function(e){e.clipboardData.getData("text").length>0&&(r.isEditing||r.props.dataChangeHandlers.onStart(),r.isEditing=!0)},r.handleWindowScroll=function(){var e,t,n=r.editorContainerRef.current.getBoundingClientRect().top!==(null!==(t=null===(e=r.toolbarRef.current)||void 0===e?void 0:e.getBoundingClientRect())&&void 0!==t?t:{}).top;r.state.isToolbarShadowed!==n&&r.setState({isToolbarShadowed:n})},r.onWindowScrollThrottled=(0,ii.throttle)(r.handleWindowScroll,200,{leading:!0}),r}return spe(t,e),t.prototype.componentDidMount=function(){var e=this.props.isToolbarHidden;this.initEditorJS(),e||window.addEventListener("scroll",this.onWindowScrollThrottled),Cd()&&this.setState({isShiftEnterDisabled:!0}),navigator.userAgent.includes("AppleWebKit")&&navigator.userAgent.includes("Mobile")&&this.setState({isToolbarStaticForced:!0})},t.prototype.componentWillUnmount=function(){var e=this,t=this.props.isToolbarHidden;this.editorJS&&(t||window.removeEventListener("scroll",this.onWindowScrollThrottled),this.editorJS.isReady.then((function(){e.editorJS.destroy()})))},t.prototype.componentDidUpdate=function(e){var t=this;if(e.isReinitializeEnabled!==this.props.isReinitializeEnabled&&this.setState({isReinitializeEnabled:this.props.isReinitializeEnabled}),this.state.isReinitializeEnabled&&this.editorJS){var n=this.props.data,r=e.data;(0,ii.isEqual)(r,n)||this.editorJS.isReady.then((function(){t.editorJS.clear(),t.editorJS.render(Xk(t.props.data)),t.props.dataChangeHandlers.onEnd(n)}))}},t.prototype.render=function(){var e=this.props,t=e.className,n=e.title,r=e.isTitleDisabled,o=e.isToolbarHidden,a=e.isToolbarStatic,i=e.isPollButtonHidden,l=e.onTitleChange,s=e.onPollButtonClick,c=this.state,u=c.isToolbarStaticForced,d=c.isToolbarShadowed;return Gt.createElement("div",cpe({ref:this.editorContainerRef},this.testAttr(Lme.ROOT)),!o&&Gt.createElement(TQ,{ref:this.toolbarRef,onImageUpload:this.insertBlocks(pe.IMAGE),onAudioUploadByFile:this.insertBlocks(pe.AUDIO_FILE),onAudioUploadByUrl:this.insertAudioEmbed,onVideoUploadByFile:this.insertBlocks(pe.VIDEO_FILE),onVideoUploadByUrl:this.insertVideoEmbed,onFileUpload:this.insertBlocks(pe.FILE),onPollButtonClick:s,validateAudioUrl:this.validateAudioUrl,validateVideoUrl:this.validateVideoUrl,isPollButtonHidden:i,isShadowed:d,isStatic:u||a}),!r&&Gt.createElement(Zx,{ref:this.inputRef,classNameInput:"RichEditor_titleInput_dRO_E",value:n,placeholder:fpe.headingPlaceholder,limit:500,dataAttributes:this.testAttr(Lme.TITLE),onChange:l,onKeyDown:this.handleTitleKeyDown}),Gt.createElement("div",cpe({ref:this.editorRef,className:fB()(t,"RichEditor_editor_udY6x"),onKeyDown:this.handleKeyDown,onPaste:this.handlePaste,onBlur:this.setRecentlyFocusedBlockIndex},this.testAttr(Lme.EDITOR_JS))))},t.defaultProps={isReinitializeEnabled:!0,inlineToolbar:["bold","italic","underline","link"]},t=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}([function(e){return e.prototype.testAttr=function(e,t){return Na(oo("RichEditor")(e),t)},e}],t),t}(Gt.Component),ppe=(0,Qr.getTranslation)("@boosty/common/containers.Streams.components.StreamForm.components.StreamFormDescription"),hpe=function(e){var t,n,r,o=e.data,a=e.dataChangeHandlers,i=e.showAlert,l=(0,Gt.useRef)(null),s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=null===(r=null===(n=l.current)||void 0===n?void 0:n.editorRef)||void 0===r?void 0:r.current;return(0,Gt.useEffect)((function(){if(d){var e=function(){return u(!0)},t=function(){return u(!1)};return d.addEventListener("focusin",e),d.addEventListener("focusout",t),function(){d.removeEventListener("focusin",e),d.removeEventListener("focusout",t)}}return Yt.noop}),[d]),Gt.createElement(Nx,{title:ppe.title},Gt.createElement(mpe,{ref:l,className:cG()("StreamFormDescription_publisher_yXLo4",(t={},t.StreamFormDescription_focused_JReuP=c,t)),placeholder:ppe.placeholder,data:o,dataChangeHandlers:a,showAlert:i,isTitleDisabled:!0,isToolbarHidden:!0,isReinitializeEnabled:!1,isPollButtonHidden:!1}))};!function(e){e.ROOT="root",e.BUTTON="button",e.INPUT="input"}(Gme||(Gme={}));var vpe,gpe=function(){return gpe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gpe.apply(this,arguments)},ype=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},_pe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Epe=(0,Qr.getTranslation)("@boosty/common/components.BlogPostForm.components.TeaserPhotoButton"),bpe=oo("TeaserPhotoButton"),Spe=function(e){var t=e.hasTeaserImage,n=void 0!==t&&t,r=e.isDisabled,o=e.setTeaserImageUploadId,a=e.onUpload,i=jG().showAlert,l=(0,Gt.useRef)(null),s=function(e,t){var n=nr().publisher.images.limits,r=n.maxSize,o=n.maxWidth,a=n.unit,l=(0,Qr.getParametrizedText)(Epe.errors.UPLOAD_ERROR,{fileName:e});switch(t){case oe.IMAGE_SIZE_LIMIT:l+=" — ".concat((0,Qr.getParametrizedText)(Epe.errors[t],{limit:Lo(r,a,Z.MB)}));break;case oe.IMAGE_WIDTH_LIMIT:l+=" — ".concat((0,Qr.getParametrizedText)(Epe.errors[t],{limit:o}));break;case oe.NETWORK_ERROR:l+=" — ".concat(Epe.errors[t])}i({type:p.ERROR,text:l,isPermanent:!0})};return Gt.createElement("div",gpe({className:"TeaserPhotoButton_root_gC3jH"},Na(bpe(Gme.ROOT))),Gt.createElement("input",gpe({ref:l,className:"TeaserPhotoButton_input_l97fC",type:"file",accept:"image/*",value:"",onChange:function(t){Array.from(t.target.files).forEach((function(t){t&&function(t){ype(void 0,void 0,void 0,(function(){var n,r,i,l,c,u,d,f;return _pe(this,(function(m){switch(m.label){case 0:return n=nr().publisher.images.limits,r=n.checkWidth,i=n.maxWidth,l=n.maxSize,c=n.unit,[4,Yd(t)];case 1:return((u=m.sent()).height>=i||u.width>=i)&&r?(s(t.name,oe.IMAGE_WIDTH_LIMIT),[3,5]):[3,2];case 2:return ro(t.size,Z.B,c)>l?(s(t.name,oe.IMAGE_SIZE_LIMIT),[3,5]):[3,3];case 3:return[4,Qd(t)];case 4:d=m.sent().file,f=Qa(),function(t,n){ype(void 0,void 0,void 0,(function(){var r,i,l;return _pe(this,(function(c){switch(c.label){case 0:o(n),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,e.uploadImage({type:pe.IMAGE,data:t,uploadId:n})];case 2:return r=c.sent().image,a({type:pe.IMAGE,id:r.id,uploadId:n,url:r.url}),[3,4];case 3:return(i=c.sent())instanceof Ar&&(null===(l=i.serverError)||void 0===l?void 0:l.error)===ne.IMAGE_TOO_BIG?s(t.name,oe.IMAGE_SIZE_LIMIT):s(t.name,oe.NETWORK_ERROR),[3,4];case 4:return[2]}}))}))}(d,f),m.label=5;case 5:return[2]}}))}))}(t)}))}},Na(bpe(Gme.INPUT)))),Gt.createElement(HB,gpe({className:"TeaserPhotoButton_photoButton_hAHKN",type:"button",isDisabled:r,onClick:function(){return l.current.click()}},Na(bpe(Gme.BUTTON))),Gt.createElement(pB,{className:"TeaserPhotoButton_photoButtonIcon_kzXwd",classNameSvg:"TeaserPhotoButton_photoButtonSvg_NwxMz",glyph:hB.NV3}),Gt.createElement("span",null,Epe.text[n?"change":"add"])))};!function(e){e.ROOT="root",e.BUTTON="button"}(vpe||(vpe={}));var Tpe=function(){return Tpe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tpe.apply(this,arguments)},Ipe=oo("TeaserPhotoItem"),Npe=(0,Gt.memo)((function(e){var t=e.src,n=e.isDisabled,r=e.onClick;return Gt.createElement("div",Tpe({className:"TeaserPhotoItem_root_M0Yu8"},Na(Ipe(vpe.ROOT))),Gt.createElement("img",{className:"TeaserPhotoItem_img_fBAfU",src:t,alt:""}),!n&&Gt.createElement("button",Tpe({className:"TeaserPhotoItem_button_WwDBV",type:"button",onClick:r},Na(Ipe(vpe.BUTTON))),Gt.createElement(pB,{className:"TeaserPhotoItem_icon_oPSzL",glyph:hB.bMz})))}));Npe.displayName=jd(Npe);var Cpe=Npe,wpe=(0,Gt.memo)((function(e){var t=e.teaserImage,n=e.description,r=e.isLoading,o=void 0!==r&&r,a=e.isDisabled,i=void 0!==a&&a,l=e.setTeaserImageUploadId,s=e.uploadImage,c=e.onUpload,u=e.onReset;return o?Gt.createElement(uM,{className:"TeaserPhotoField_loader_BAmtn",size:34,solid:!0}):Gt.createElement(Gt.Fragment,null,!i&&Gt.createElement(Spe,{setTeaserImageUploadId:l,uploadImage:s,onUpload:c,hasTeaserImage:Boolean(t)}),t?Gt.createElement(Cpe,{src:t.url,isDisabled:i,onClick:u}):Gt.createElement("div",{className:"TeaserPhotoField_description_WhMwI"},n))}));wpe.displayName=jd(wpe);var Ope,Ape=wpe,Ppe=(0,Qr.getTranslation)("@boosty/common/containers.Streams.components.StreamForm.components.StreamFormTeaser"),Lpe=function(e){var t=nr().publisher.images.limits,n=t.maxSize,r=t.unit,o=e.teaserImage,a=e.isLoading,i=e.isDisabled,l=e.uploadImage,s=e.setTeaserImageUploadId,c=e.onUpload,u=e.onReset,d=(0,Gt.useMemo)((function(){return(0,Qr.getParametrizedText)(Ppe.teaser.limit,{limit:Lo(n,r,Z.MB)})}),[n]);return Gt.createElement(Nx,{title:Ppe.title},Gt.createElement(Ape,{isLoading:a,isDisabled:i,description:d,teaserImage:o,uploadImage:l,setTeaserImageUploadId:s,onUpload:c,onReset:u}))};!function(e){e.ROOT="root"}(Ope||(Ope={}));var Rpe=oo("Title"),kpe=function(e){var t=e.title,n=e.value,r=e.placeholder,o=e.limit,a=e.isDisabled,i=e.onChange;return Gt.createElement(Nx,{title:t},Gt.createElement(Zx,{placeholder:r,value:n,limit:o,disabled:a,onChange:function(e){return i(e.target.value)},dataAttributes:{"data-test-id":Rpe(Ope.ROOT)}}))},Dpe=(0,Qr.getTranslation)("@boosty/common/containers.Streams.components.StreamForm.components.StreamFormTitle"),Upe=function(e){var t=e.value,n=e.isDisabled,r=e.onChange;return Gt.createElement(kpe,{title:Dpe.title,placeholder:Dpe.placeholder,value:t,limit:280,isDisabled:n,onChange:r})};const Bpe={container:"StreamForm_container_mTY6C",left:"StreamForm_left_HPH6e",publishTimeError:"StreamForm_publishTimeError__4wVB",streamButton:"StreamForm_streamButton_PEWlK",accessContainer:"StreamForm_accessContainer_FgH2S"};var xpe=function(){return xpe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xpe.apply(this,arguments)},Mpe=(0,Qr.getTranslation)("@boosty/common/containers.Streams.components.StreamForm"),Fpe=oo("StreamForm"),Gpe=[E.ONLY_SUBSCRIBERS],Hpe=function(e){var t,n=e.dateSelectorComponent,r=e.initialPublishTime,o=e.data,a=e.dataErrors,i=e.subscriptionLevels,l=e.streamCredentials,s=e.isEditMode,c=e.isPriceEnabled,u=e.isSubscriptionLevelsEnable,d=e.onDataPropertyChange,f=e.onWillRecordChange,m=e.isDescriptionPending,h=e.isTeaserImageLoading,v=e.teaserImage,g=e.showAlert,y=e.setTeaserImageUploadId,_=e.onImageUpload,E=e.onTeaserImageChange,b=e.onTeaserImageReset,S=e.onDescriptionChangeStart,T=e.onDescriptionChangeEnd,I=e.onStreamCreate,N=e.onStreamUpdate,C=e.onStreamCredentialsReset,w=Boolean(Object.keys(a).find((function(e){return a[e]}))),O=!s||!o.data.length,A=s?Mpe.save:o.publishTime?Mpe.plan:Mpe.start;return Gt.createElement("div",xpe({className:Bpe.container},Na(Fpe(ume.ROOT))),Gt.createElement("div",{className:Bpe.left},Gt.createElement(Upe,{value:o.title,isDisabled:s,onChange:function(e){return d({title:e})}}),!s&&Gt.createElement(Lpe,{teaserImage:v,isLoading:h,setTeaserImageUploadId:y,uploadImage:_,isDisabled:s,onUpload:E,onReset:b}),Gt.createElement(Ame,{streamKey:null==l?void 0:l.streamKey,streamUrl:null==l?void 0:l.streamServer,isEditMode:s,onReset:function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,C()];case 1:return e.sent(),g({type:p.SUCCESS,text:Mpe.streamKey.resetSuccess}),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t},onCopy:function(e){return function(){g({type:p.SUCCESS,text:Mpe[e].copySuccess})}}}),Gt.createElement(hpe,{data:o.description,dataChangeHandlers:{onStart:S,onEnd:T},showAlert:g}),Gt.createElement(Dme,{daNick:o.daNick,onChange:function(e){return d({daNick:e})}})),Gt.createElement("div",{className:Bpe.right},Gt.createElement(hme,{containerClassName:Bpe.accessContainer,availableAccessLevels:Gpe,accessLevel:o.accessLevel,commentsMode:null,isCommentsModeEnabled:!1,chatMode:o.hasChat?Ct.ALLOW:Ct.DENY,willRecord:o.willRecord,recordStreamIsVisible:o.recordStreamIsVisible,recordStreamIsEnabled:o.recordStreamIsEnabled,isChatModeEnabled:s,isPriceEnabled:c,isSubscriptionLevelsEnable:u,priceError:a.price,priceFormatted:o.priceFormatted,subscriptionLevel:o.subscriptionLevel,subscriptionLevels:i,subscriptionLevelsError:a.subscriptionLevels,onCommentsModeChange:Yt.noop,onWillRecordChange:f,onChatModeChange:function(e){return d({hasChat:e===Ct.ALLOW})},onAccessLevelChange:function(e){return d({accessLevel:e})},onPriceChange:function(e){return d({priceFormatted:e.target.value})},onSubscriptionLevelChange:function(e){return d({subscriptionLevel:e})}})),Gt.createElement(Nx,{buttons:Gt.createElement(Gt.Fragment,null,Gt.createElement(FB,xpe({className:Bpe.streamButton,isDisabled:m||h||w,onClick:function(e){e.preventDefault(),s?N():I()}},Na(Fpe(ume.SUBMIT))),A),O&&Gt.createElement(n,{minDate:new Date,value:(t=o.publishTime||r,t&&new Date(vo(t))),onAccept:function(e){d({publishTime:No(e)})},onClear:function(){return d({publishTime:null})}}))},!s&&a.publishTime&&Gt.createElement("div",{className:Bpe.publishTimeError},a.publishTime)))},Wpe=function(){var e=Gf().blogUrl,t=jG().showAlert,n=function(e){var t=e.blogUrl,n=e.showAlert,r=(0,Vt.I0)(),o=Mf(),a=(0,Vt.v9)(XO),i=(0,Vt.v9)(zP),l=(0,Vt.v9)(_L),s=(0,Vt.v9)(NL),c=(0,Vt.v9)(KP),u=(0,Vt.v9)(qP),d=(0,Vt.v9)(YP),f=function(e){var t=e.initialTeaser,n=(0,Vt.I0)(),r=RU((0,Gt.useState)(null),2),o=r[0],a=r[1],i=RU((0,Gt.useState)(t),2),l=i[0],s=i[1],c=(0,Vt.v9)(UL)[o],u=(null==c?void 0:c.meta.isFetching)||!1,d=function(e){return PU(void 0,void 0,void 0,(function(){return LU(this,(function(t){return[2,n((0,dm.Ax)(WE.action)({image:e}))]}))}))};return{teaserUploadId:o,isTeaserImageLoading:u,getTeaserImage:function(){return null==l?void 0:l.find((function(e){return e.type===pe.IMAGE&&e.rendition!==re.TEASER_AUTO_BACKGROUND}))},getTeaserText:function(){var e;return(null===(e=null==l?void 0:l.find((function(e){return e.type===pe.TEXT})))||void 0===e?void 0:e.content)||""},onImageUpload:function(e){return PU(void 0,void 0,void 0,(function(){return LU(this,(function(t){return[2,d(e)]}))}))},onTeaserUploadIdSet:function(e){a(e)},onTeaserChange:function(e){s(e)},onTeaserImageChange:function(e){var t=AU(AU({},e),{url:Bo(AU({url:e.url},kU))});s(null==l?void 0:l.filter((function(e){return e.type!==pe.IMAGE})).concat(t))},onTeaserImageReset:function(){s(null==l?void 0:l.filter((function(e){return e.type!==pe.IMAGE})))},onTeaserTextChange:function(e){var t={type:pe.TEXT,content:e.target.value,modificator:""};s(null==l?void 0:l.filter((function(e){return e.type!==pe.TEXT})).concat(t))}}}({initialTeaser:i?i.teaser:[]}),m=f.isTeaserImageLoading,h=f.teaserUploadId,v=f.getTeaserImage,g=f.onImageUpload,y=f.onTeaserChange,_=f.onTeaserUploadIdSet,b=f.onTeaserImageChange,S=f.onTeaserImageReset,T=!c.isFetching&&s.isFetched,I=T&&u.isFetched,N=xU((0,Gt.useState)(!1),2),C=N[0],w=N[1],O=xU((0,Gt.useState)(!1),2),A=O[0],P=O[1],L=xU((0,Gt.useState)(!1),2),R=L[0],k=L[1],D=xU((0,Gt.useState)(null==i?void 0:i.publishTime),2),U=D[0],B=D[1],x=xU((0,Gt.useState)(NU(DU(DU({},i),{subscriptionLevels:l,willRecord:a.shouldStreamRecord}))),2),M=x[0],F=x[1],G=xU((0,Gt.useState)({}),2),H=G[0],W=G[1],V=xU((0,Gt.useState)(I?aU.FIRST:aU.LOADING),2),j=V[0],z=V[1],Y=function(e){F((function(t){return DU(DU({},t),e)}))},K=function(e){return void 0===e&&(e=!1),UU(void 0,void 0,void 0,(function(){return BU(this,(function(n){return[2,r((0,dm.Ax)(rp.action)({blogUrl:t,refresh:e}))]}))}))},q=(0,Gt.useMemo)((function(){return(0,uU.Z)((function(e){return r((0,dm.Ax)(pp.action)({blogUrl:t,willRecord:e}))}),1e3)}),[]);return(0,Gt.useEffect)((function(){var e;c.isFetched&&(null===(e=null==i?void 0:i.user)||void 0===e?void 0:e.id)===a.id||UU(void 0,void 0,void 0,(function(){return BU(this,(function(e){return[2,r((0,dm.Ax)(np.action)({blogUrl:t}))]}))})),s.isFetched||UU(void 0,void 0,void 0,(function(){return BU(this,(function(e){return[2,r((0,dm.Ax)(qp.action)({blogUrl:t}))]}))})),u.isFetched||K()}),[]),(0,Gt.useEffect)((function(){T&&(y((null==i?void 0:i.teaser)||[]),B(null==i?void 0:i.publishTime),F(NU(DU(DU({},i),{subscriptionLevels:l,willRecord:a.shouldStreamRecord}))),z(aU.FIRST))}),[T]),(0,Gt.useEffect)((function(){var e,t=M.accessLevel,n=M.priceFormatted,r=M.publishTime,o=M.subscriptionLevel,a={},i=function(e,t,n){var r=nr(),o=r.posts.paidPosts.paymentLimits,a=r.currencies.default,i=o.minPaymentSum[a],l=function(e,t){return wU(t)?Number(String(e).replace(/\s/g,"")):0}(t,n);return wU(n)?l>e?(0,Qr.getParametrizedText)(IU.price.errors.max,{maxPostPrice:Vr({amount:e,currency:a,useGrouping:!0})}):l<i?(0,Qr.getParametrizedText)(IU.price.errors.min,{minPostPrice:Vr({amount:i,currency:a,useGrouping:!0})}):null:null}(1e5,n,t),s=function(e){var t=No(new Date);return e&&e<=t?(0,Qr.getParametrizedText)(IU.publishTime.errors.min,{now:go(t,"dd/MMMM/yyyy/&/HH/mm")}):null}(r),c=(e=o,l.length?e?null:IU.subscriptionLevels.errors.noLevelSelected:IU.subscriptionLevels.errors.noLevelsAvailable);P(wU(t)),k(function(e){return[E.ONLY_SUBSCRIBERS,E.SUBSCRIBERS_AND_PRICE].includes(e)}(t)),c&&(a.subscriptionLevels=c),i&&(a.price=i),s&&(a.publishTime=s),W(a)}),[M]),{formData:M,formErrors:H,stream:i,subscriptionLevels:l,streamCredentials:d,initialPublishTime:U,step:j,isDescriptionPending:C,isPriceEnabled:A,isSubscriptionLevelsEnable:R,isTeaserImageLoading:m,teaserUploadId:h,getTeaserImage:v,onImageUpload:g,onTeaserUploadIdSet:_,onTeaserImageChange:b,onTeaserImageReset:S,onFormDataPropertyChange:function(e){Y(e)},onDescriptionChangeStart:function(){w(!0)},onDescriptionChangeEnd:function(e){Y({description:e}),w(!1)},onStreamCreate:function(){return UU(void 0,void 0,void 0,(function(){var e,a,i,l,s,c,u,d,f;return BU(this,(function(m){switch(m.label){case 0:e=M.publishTime,a=M.title,i=M.description,l=M.subscriptionLevel,s=M.hasChat,c=M.daNick,u=v(),m.label=1;case 1:return m.trys.push([1,3,,4]),[4,r((0,dm.Ax)(Jm.action)({blogUrl:t,stream:{teaserData:u?[u]:[],publishTime:e,title:a,description:i,subscriptionLevelId:null==l?void 0:l.id,hasChat:s,daNick:c}}))];case 2:return m.sent(),o((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:t})),[3,4];case 3:return d=m.sent(),f=d.serverError.error,n({type:p.ERROR,text:OU(f)}),[3,4];case 4:return[2]}}))}))},onStreamUpdate:function(){return UU(void 0,void 0,void 0,(function(){var e,a,i,l,s,c;return BU(this,(function(u){switch(u.label){case 0:e=M.description,a=M.subscriptionLevel,i=M.publishTime,l=M.daNick,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,r((0,dm.Ax)(Dp.action)({blogUrl:t,stream:{description:e,subscriptionLevelId:null==a?void 0:a.id,daNick:l,publishTime:i}}))];case 2:return u.sent(),o((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:t})),[3,4];case 3:return s=u.sent(),c=s.serverError.error,n({type:p.ERROR,text:OU(c)}),[3,4];case 4:return[2]}}))}))},onStreamCredentialsReset:function(){return UU(void 0,void 0,void 0,(function(){return BU(this,(function(e){switch(e.label){case 0:return[4,K(!0)];case 1:return e.sent(),[2]}}))}))},onWillRecordChange:function(e){return UU(void 0,void 0,void 0,(function(){return BU(this,(function(t){switch(t.label){case 0:return Y({willRecord:e}),[4,q(e)];case 1:return t.sent(),[2]}}))}))}}}({blogUrl:e,showAlert:t}),r=n.step,o=n.formData,a=n.formErrors,i=n.subscriptionLevels,l=n.stream,s=n.streamCredentials,c=n.initialPublishTime,u=n.isSubscriptionLevelsEnable,d=n.isPriceEnabled,f=n.onFormDataPropertyChange,m=n.isDescriptionPending,h=n.isTeaserImageLoading,v=n.getTeaserImage,g=n.onTeaserUploadIdSet,y=n.onImageUpload,_=n.onTeaserImageChange,b=n.onTeaserImageReset,S=n.onDescriptionChangeStart,T=n.onDescriptionChangeEnd,I=n.onStreamCreate,N=n.onStreamUpdate,C=n.onStreamCredentialsReset,w=n.onWillRecordChange;return Gt.createElement(Gt.Fragment,null,r===aU.LOADING&&Gt.createElement(ZY,null),r===aU.FIRST&&Gt.createElement(Hpe,{dateSelectorComponent:Jfe,isEditMode:!!l,isSubscriptionLevelsEnable:u,isDescriptionPending:m,isPriceEnabled:d,subscriptionLevels:i,streamCredentials:s,initialPublishTime:c,data:o,dataErrors:a,onDataPropertyChange:f,showAlert:t,isTeaserImageLoading:h,teaserImage:v(),setTeaserImageUploadId:g,onImageUpload:y,onTeaserImageChange:_,onTeaserImageReset:b,onDescriptionChangeStart:S,onDescriptionChangeEnd:T,onStreamCreate:I,onStreamUpdate:N,onStreamCredentialsReset:C,onWillRecordChange:w}))},Vpe=(0,Qr.getTranslation)("@boosty/common/containers.Streams.StreamEdit.desktop"),jpe=function(e){var t=e.isAuthorizationRequired,n=e.stream,r=e.blogUrl,o=e.canBeWide,a=e.showAuth,i=null!==(0,Vt.v9)(XO);return Gt.createElement(xle,{blogUrl:r,stream:n,streamUserId:n.user.id,isModerator:n.isChatModerator,isAuthorizationRequired:t,isAuthorized:i,isPublisherHidden:!t&&!i,showAuth:a,isWide:o})},zpe=function(e){var t=e.showAuth,n=e.canBeWide,r=(0,Vt.I0)(),o=Gf().blogUrl,a=fk(),i=a.theme,l=a.setTheme,s=(0,Vt.v9)(zP),c=(0,Vt.v9)(KP),u=!(0,Vt.v9)(Ww).isFetched||!c.isFetched;return zU({isAuthorizationRequired:!0,shouldSubscribeToStreamChannelOnMount:!1}),(0,Gt.useEffect)((function(){return l(Ke.DARK),r(Nm.action({blogUrl:o})),r(np.action({blogUrl:o})),function(){l(Ke.LIGHT)}}),[]),Gt.createElement("div",{className:cG()("StreamChat_chat_osdCD",i)},u?Gt.createElement(uM,{className:"StreamChat_spinner_bVh5X",size:150}):Gt.createElement(jpe,{isAuthorizationRequired:!0,stream:s,blogUrl:o,showAuth:t,canBeWide:n}))},Ype=function(e){var t=e.classNamePicture,n=e.title,r=e.content,o=r.changedFilter,a=r.defaultFilter,i=e.isChangedFilter,l=e.onFiltersReset;return Gt.createElement("div",{className:"BlogIncomeEmpty_container_WUGbl"},Gt.createElement("div",{className:cG()("BlogIncomeEmpty_picture_PsUA2",t)}),Gt.createElement("div",{className:"BlogIncomeEmpty_title_NO8qn"},n),Gt.createElement("div",{className:"BlogIncomeEmpty_content_bXCh8"},i&&Gt.createElement(Gt.Fragment,null,o.text,Gt.createElement(VB,{onClick:l,className:"BlogIncomeEmpty_button_aPDwm"},o.buttonText)),!i&&a.text))},Kpe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},qpe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Xpe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogDonations.components.BlogDonationsFilter"),Qpe={orderBy:Li.DESC,offset:0,sortType:Ai.time,limit:11},Jpe=[yt.DIALOG,yt.POST,yt.AUTHOR],Zpe=function(e){var t,n,r,o=e.classNames,a=e.selectedTarget,i=e.selectedType,l=e.order,s=e.sortBy,c=e.targets,u=e.onChange,d=[{label:Xpe.sortDateDesc,value:[Ai.time,Li.DESC]},{label:Xpe.sortDateAsc,value:[Ai.time,Li.ASC]},{label:Xpe.sortSumAsc,value:[Ai.amount,Li.ASC]},{label:Xpe.sortSumDesc,value:[Ai.amount,Li.DESC]}],f=function(e){return qpe(qpe([{value:null,label:Xpe.selectAllTargets}],Kpe(e.map((function(e){return{value:e.id,label:e.description}}))),!1),[{value:yt.DIALOG,label:Xpe.donates.dialog},{value:yt.POST,label:Xpe.donates.post},{value:yt.AUTHOR,label:Xpe.donates.author}],!1)};return Gt.createElement("div",{className:cG()(null==o?void 0:o.container,"BlogDonationsFilter_filter_EJYmZ")},Gt.createElement(lF,{className:cG()(null==o?void 0:o.select,"BlogDonationsFilter_targetOptions_RbrvS"),classNames:{option:"BlogDonationsFilter_targetOption_IjeOK"},onSelect:function(e){var t;t=Jpe.includes(String(e.value))?{offset:Qpe.offset,targetId:null,type:String(e.value)}:{offset:Qpe.offset,targetId:e.value,type:void 0},u(t)},options:f(c),selected:(r=a,r?f(c).find((function(e){return e.value===r})):i?f(c).find((function(e){return e.value===i})):f(c)[0]),label:Xpe.selectLabelTarget}),Gt.createElement(lF,{className:cG()(null==o?void 0:o.select,"BlogDonationsFilter_sortOptions_KbGUY"),onSelect:function(e){var t=Kpe(e.value,2),n=t[0],r=t[1];u({sortType:n,orderBy:r})},options:d,selected:(t=s,n=l,d.find((function(e){var r=Kpe(e.value,2),o=r[0],a=r[1];return t===o&&n===a}))),label:Xpe.selectLabelSort}))},$pe=(0,Qr.getTranslation)("@boosty/common/components.BackButton"),ehe=function(e){var t=e.onlyIcon,n=e.classNames,r=void 0===n?{}:n,o=e.onClick,a=Mf();return Gt.createElement(HB,{className:cG()("BackButton_button_x3VFl",null==r?void 0:r.button),withIcon:!0,onClick:o||function(){a(-1)}},Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{className:cG()("BackButton_icon_mssE7",r.icon),glyph:hB.WTy}),!t&&$pe.back))},the=(0,Qr.getTranslation)("@boosty/common/components.ExportButton"),nhe=function(e){e.dataType;var t=e.hasOnlyIcon,n=e.classNames,r=void 0===n?{}:n,o=(e.from,e.to,e.onClick);return Gt.createElement("div",{className:"ExportButton_container_Yd1Om"},Gt.createElement("div",{onClick:o,className:cG()("ExportButton_button_cPvSV",r.button)},Gt.createElement(pB,{className:cG()("ExportButton_icon_njAbt",r.icon),glyph:hB.b8X}),!t&&the.export))},rhe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.components.BlogIncomeExport"),ohe=function(e){var t,n=e.classNames,r=void 0===n?{}:n,o=e.dataType,a=e.withBorder,i=e.withIcon,l=e.from,s=e.to,c=Mf(),u=xf().pathname,d=Gf().blogUrl,f=yf(ir.BLOG_STATISTICS_CATEGORY,u);return Gt.createElement("div",{className:cG()("BlogIncomeExport_container_lSeNE",r.container,(t={},t.BlogIncomeExport_containerWithIcon_q2S7U=i,t.BlogIncomeExport_containerWithBorder_yOPTd=a,t))},Gt.createElement("div",{className:cG()("BlogIncomeExport_title_aAE1l",r.title)},rhe.dataType[o]||rhe.title),Gt.createElement(nhe,{dataType:o,onClick:function(){var e=null==f?void 0:f.params.category;c(e?(0,Yt.getParametrizedUrl)(ir.BLOG_STATISTICS_CATEGORY_EXPORT,{blogUrl:d,category:e},{dataType:o}):(0,Yt.getParametrizedUrl)(ir.BLOG_STATISTICS_EXPORT,{blogUrl:d},{dataType:o}))},from:l,to:s}))},ahe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogDonations.components.BlogDonationsHeader"),ihe=function(e){var t=e.children,n=nr().isMobile,r=function(){return Gt.createElement(ohe,{dataType:q.DONATIONS,classNames:{container:"BlogDonationsHeader_exportContainer_Nc6pc",title:"BlogDonationsHeader_exportTitle_YGnip"}})};return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlogDonationsHeader_header_AcMSA"},Gt.createElement("div",{className:"BlogDonationsHeader_titleContainer_nhru0"},Gt.createElement(ehe,null),Gt.createElement("div",{className:"BlogDonationsHeader_title_cYv4J"},ahe.title)),!n&&r()),t,n&&r())},lhe=function(){return lhe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lhe.apply(this,arguments)},she=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogDonations"),che=function(e){var t,n,r=e.classNames,o=e.Component,a=e.RowsComponent,i=e.FooterComponent,l=nr().locale,s=(0,Vt.I0)(),c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(Qpe),2),u=c[0],d=c[1],f=Ok(u)||Qpe,m=Gf().blogUrl,p=(0,Vt.v9)(lR),h=(0,Vt.v9)(sR),v=(0,Vt.v9)(RO),g=(0,Vt.v9)(kO),y=h.isFetched&&g.isFetched,_=!u.targetId&&!u.type,E=l===ce.RU,b=function(e){d(lhe(lhe({},u),{offset:u.limit*e}))},S=function(e){d(lhe(lhe({},u),e))},T=function(){return d(Qpe)};(0,Gt.useEffect)((function(){var e;return p&&h.isFetched||s(ih.action({blogUrl:m,type:Ye.MONEY})),(null===(e=null==v?void 0:v.data)||void 0===e?void 0:e.length)&&g.isFetched||s(Zy.action(lhe({blogUrl:m},Qpe))),function(){s(r_())}}),[]),(0,Gt.useEffect)((function(){JSON.stringify(f)!==JSON.stringify(u)&&s(Zy.action(lhe({blogUrl:m},u)))}),[u]);var I=function(e){return Gt.createElement(Ype,{classNamePicture:E?"BlogDonations_emptyDonationsRu_SpbH7":"BlogDonations_emptyDonationsEn_eY4fI",title:e?she.title.whenAppliedFilter:she.title.whenDefaultFilter,content:{defaultFilter:{text:she.content.text},changedFilter:{buttonText:she.content.resetFilter}},isChangedFilter:e,onFiltersReset:T})};return Gt.createElement(o,{blogUrl:m,onPageChange:b,onFilterChange:S,onFilterReset:T,donations:v,targets:p},Gt.createElement(Gt.Fragment,null,y&&_&&!(null===(t=v.data)||void 0===t?void 0:t.length)&&I(!1),((null===(n=v.data)||void 0===n?void 0:n.length)>0||!_)&&Gt.createElement(ihe,null,h.isFetched&&Gt.createElement(Zpe,{classNames:{container:null==r?void 0:r.filterContainer,select:null==r?void 0:r.filterSelect},selectedTarget:u.targetId,selectedType:u.type,targets:p,order:u.orderBy,sortBy:u.sortType,onChange:S})),!y&&Gt.createElement(uM,null),y&&Gt.createElement(Gt.Fragment,null,!v.data.length&&!_&&I(!0),v.data.length>0&&Gt.createElement(Gt.Fragment,null,Gt.createElement(a,{targets:p,rows:v.data}),Gt.createElement(i,{onPageChange:b,forcePage:Number(u.offset)/u.limit,pagesCount:Math.ceil(v.extra.total/u.limit)})))))};che.fetchActions=function(e){var t=e.params.blogUrl;return[function(){return ih.action({blogUrl:t,type:Ye.MONEY})},function(){return Zy.action(lhe({blogUrl:t},Qpe))}]};var uhe=function(e){var t=e.forcePage,n=e.pagesCount,r=e.onPageChange;return Gt.createElement("div",{className:"BlogIncomingFooter_footer_hG6u_"},Gt.createElement(EM,{className:"BlogIncomingFooter_pagination_jDdks",onPageChange:r,forcePage:t,pageCount:n}))};const dhe={header:"BlogDonationsRows_header_ZUNKS",row:"BlogDonationsRows_row_P2ob6",fadeIn:"BlogDonationsRows_fadeIn_BHD59"};var fhe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogDonations.desktop.components.BlogDonationsRows"),mhe=function(e){var t=e.rows,n=e.targets,r=nr().currencies.default;return Gt.createElement("div",{className:dhe.table},Gt.createElement("div",{className:dhe.header},Gt.createElement("div",null,fhe.name),Gt.createElement("div",null,fhe.target),Gt.createElement("div",null,fhe.sum),Gt.createElement("div",null,fhe.date),Gt.createElement("div",null,fhe.email)),Gt.createElement("div",null,t.map((function(e,t){var o,a=e.user,i=a.email,l=a.name,s=e.amount,c=e.type,u=c===yt.TARGET?null===(o=n.find((function(t){return t.id===e.targetId})))||void 0===o?void 0:o.description:fhe.donate[c],d=go(e.createdAt,"dd/MM/yyyy");return Gt.createElement("div",{className:dhe.row,key:"row".concat(t)},Gt.createElement("div",null,l),Gt.createElement("div",null,u),Gt.createElement("div",null,Vr({amount:s,currency:r,useGrouping:!0})),Gt.createElement("div",null,d),Gt.createElement("div",null,i))}))))},phe=function(){return Gt.createElement(che,{classNames:{filterContainer:"BlogDonations_filterContainer_gV9y6"},RowsComponent:mhe,Component:function(e){var t=e.children;return Gt.createElement("div",{className:"BlogDonations_container_V4QLU"},t)},FooterComponent:uhe})};phe.fetchActions=function(e){return function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(che.fetchActions(e)),!1)};var hhe,vhe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogPostSales.components.BlogPostSalesFilter.components.BlogPostSalesResetButton"),ghe=function(e){var t=e.className,n=e.onClick;return Gt.createElement(HB,{onClick:n,className:cG()(t,"BlogPostSalesResetButton_container_QZOAa")},Gt.createElement(pB,{glyph:hB.uNf,className:"BlogPostSalesResetButton_icon_AGwxE"}),Gt.createElement("span",{className:"BlogPostSalesResetButton_label_d79_L"},vhe.reset))},yhe=new Date((new Date).setUTCHours(23,59,59,999)),_he=[null,null];!function(e){e[e.SELECT_DATE=0]="SELECT_DATE",e[e.SELECT_POST=1]="SELECT_POST"}(hhe||(hhe={}));var Ehe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogPostSales.components.BlogPostSalesFilter.components.BlogPostSalesSelector.components.BlogPostSalesList"),bhe=function(e){var t,n=e.dateRange,r=e.onBackClick,o=e.onPostSelect,a=(0,Vt.I0)(),i=Gf().blogUrl,l=(0,Vt.v9)(BO),s=(0,Vt.v9)(xO),c=function(e){return go(No(e),"dd/MM/yyyy")},u=function(e){return void 0===e&&(e=Ehe.postWithoutName),e};return(0,Gt.useEffect)((function(){var e=No(n[0]),t=No(n[1]);a(e_.action({blogUrl:i,from:e,to:t}))}),[n]),Gt.createElement("div",{className:"BlogPostSalesList_container_T5mUN"},Gt.createElement("div",{className:"BlogPostSalesList_header_O2T_G"},Gt.createElement("div",{className:"BlogPostSalesList_iconWrapper_SrJVs",onClick:r},Gt.createElement(pB,{glyph:hB.y9O,className:"BlogPostSalesList_iconArrowLeft_px6mH"})),Gt.createElement("div",{className:"BlogPostSalesList_title_pYCSP"},Ehe.posts," ",function(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(n,2),t=e[0],r=e[1],o=c(t),a=c(r);return t.toDateString()===r.toDateString()?o:"".concat(o," - ").concat(a)}())),!s.isFetched&&Gt.createElement("div",{className:"BlogPostSalesList_spinnerContainer_jL5iH"},Gt.createElement(uM,{size:50})),s.isFetched&&Gt.createElement(UM,{className:"BlogPostSalesList_content_Lg0py"},(null===(t=l.data)||void 0===t?void 0:t.length)&&(null==l?void 0:l.data.map((function(e){return Gt.createElement("div",{key:"postSaleItem".concat(e.id),className:"BlogPostSalesList_item_plta8",onClick:function(){return o(function(e){return{id:e.id,title:u(e.title)}}(e))}},Gt.createElement("div",null,u(e.title)),Gt.createElement("div",{className:"BlogPostSalesList_publishTime_aeExy"},(t=e.publishTime,n=go(t,"dd/MM/yyyy"),(0,Qr.getParametrizedText)(Ehe.publishTime,{publishTime:n}))));var t,n})))))},She=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},The=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogPostSales.components.BlogPostSalesFilter.components.BlogPostSalesSelector"),Ihe=function(e){var t,n,r=e.className,o=e.helper,a=e.selected,i=e.onSelect,l=(0,Gt.useRef)(null),s=(0,Vt.I0)(),c=(0,Gt.useRef)(),u=Gf().blogUrl,d=She((0,Gt.useState)(yhe),2),f=d[0],m=d[1],p=She((0,Gt.useState)(_he),2),h=p[0],v=p[1],g=She((0,Gt.useState)(!1),2),y=g[0],_=g[1],E=She((0,Gt.useState)(hhe.SELECT_DATE),2),b=E[0],S=E[1],T=She((0,Gt.useState)(The.all),2),I=T[0],N=T[1],C=(0,Vt.v9)(MO),w=(0,Vt.v9)(FO);return(0,Gt.useEffect)((function(){var e=No(new Date(f).setDate(15));s(n_.action({blogUrl:u,date:e}))}),[f]),(0,Gt.useEffect)((function(){b===hhe.SELECT_POST&&m(h[0])}),[b]),(0,Gt.useEffect)((function(){var e=She(h,2),t=e[0],n=e[1];if(!t&&!n&&y){var r=No((new Date).setDate(15));s(n_.action({blogUrl:u,date:r})),m(yhe)}}),[y]),(0,Gt.useEffect)((function(){a&&a.length||(N(The.all),v([null,null]),S(hhe.SELECT_DATE))}),[a]),Gt.createElement("div",{className:cG()(r,"BlogPostSalesSelector_container_Q6fpU")},Gt.createElement(zx,{text:The.post}),Gt.createElement("div",{className:"BlogPostSalesSelector_select_JJKt6",ref:c},Gt.createElement("div",{className:"BlogPostSalesSelector_button_yllkM",onClick:function(){_(!y)}},Gt.createElement("span",null,I),Gt.createElement(pB,{className:cG()("BlogPostSalesSelector_arrow__5jbS",(t={},t.BlogPostSalesSelector_arrowRotated_Mu3Rg=y,t)),glyph:hB.y9O,onClick:function(){return _(!1)}})),y&&Gt.createElement(Dx,{onClickOutside:function(e){c.current.contains(e.target)||_(!1)},trigger:gx.CLICK},Gt.createElement("div",{ref:l,className:cG()("BlogPostSalesSelector_optionsContainer_JvoF4",(n={},n.BlogPostSalesSelector_optionsContainerTop_BxmgJ=!1,n))},b===hhe.SELECT_DATE&&Gt.createElement(Gt.Fragment,null,o,!w.isFetched&&Gt.createElement("div",{className:"BlogPostSalesSelector_loading__Tz7O"},Gt.createElement(uM,null)),Gt.createElement(ix,{defaultValue:h,onClickMonth:function(e){return m(e)},onAccept:function(e){v(e),S(hhe.SELECT_POST)},onCancel:function(){return _(!1)},onActiveDateChange:function(e){var t=e.activeStartDate;m(t)},onTileDisabled:function(e){var t=e.date,n=e.view,r=(null==C?void 0:C.data)||[];return"month"===n&&(t.getMonth()!==f.getMonth()||!r.includes(t.getDate()))},onChange:function(e){e[0].getMonth()!==e[1].getMonth()&&m(e[0])}})),b===hhe.SELECT_POST&&Gt.createElement(bhe,{dateRange:h,onPostSelect:function(e){var t=e.title,n=e.id;N(t),i(n),_(!1)},onBackClick:function(){return S(hhe.SELECT_DATE)}})))))},Nhe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Che=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogPostSales.components.BlogPostSalesFilter"),whe={orderBy:Li.DESC,offset:0,sortType:Pi.time,limit:11},Ohe=function(e){var t,n,r=e.classNames,o=e.helper,a=e.posts,i=e.order,l=e.sortBy,s=e.onChange,c=[{label:Che.sortDateDesc,value:[Pi.time,Li.DESC]},{label:Che.sortDateAsc,value:[Pi.time,Li.ASC]},{label:Che.sortSumAsc,value:[Pi.amount,Li.ASC]},{label:Che.sortSumDesc,value:[Pi.amount,Li.DESC]}];return Gt.createElement("div",{className:cG()(null==r?void 0:r.container,"BlogPostSalesFilter_filter_YZym4")},Gt.createElement("div",{className:cG()(null==r?void 0:r.select,"BlogPostSalesFilter_postSelector_mC184")},Gt.createElement(Ihe,{helper:o,onSelect:function(e){s({postIds:[e],offset:whe.offset})},selected:a,className:cG()(null==r?void 0:r.select)}),(null==a?void 0:a.length)>0&&Gt.createElement(ghe,{className:r.resetButton,onClick:function(){s({postIds:[],offset:whe.offset})}})),Gt.createElement(lF,{className:cG()(null==r?void 0:r.select,"BlogPostSalesFilter_sortOptions__3SG4"),onSelect:function(e){var t=Nhe(e.value,2),n=t[0],r=t[1];s({sortType:n,orderBy:r})},options:c,selected:(t=l,n=i,c.find((function(e){var r=Nhe(e.value,2),o=r[0],a=r[1];return t===o&&n===a}))),label:Che.selectLabelSort}))},Ahe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogPostSales.components.BlogPostSalesHeader"),Phe=function(e){var t=e.children,n=nr().isMobile,r=function(){return Gt.createElement(ohe,{dataType:q.PAID_POSTS,classNames:{container:"BlogPostSalesHeader_exportContainer_XjWVi",title:"BlogPostSalesHeader_exportTitle_gq5ks"}})};return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlogPostSalesHeader_header_szq41"},Gt.createElement("div",{className:"BlogPostSalesHeader_titleContainer_ZCMa2"},Gt.createElement(ehe,null),Gt.createElement("div",{className:"BlogPostSalesHeader_title_kchyw"},Ahe.title)),!n&&r()),t,n&&r())},Lhe=function(){return Lhe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lhe.apply(this,arguments)},Rhe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogPostSales"),khe=function(e){var t,n,r=e.classNames,o=e.helper,a=e.Component,i=e.RowsComponent,l=e.FooterComponent,s=nr().locale,c=(0,Vt.I0)(),u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(whe),2),d=u[0],f=u[1],m=Ok(d)||whe,p=Gf().blogUrl,h=(0,Vt.v9)(DO),v=(0,Vt.v9)(UO),g=!function(e){return!e.postIds||!e.postIds.length}(d),y=s===ce.RU,_=function(e){f(Lhe(Lhe({},d),{offset:d.limit*e}))},E=function(e){f(Lhe(Lhe({},d),e))},b=function(){return f(whe)},S=function(e){return Gt.createElement(Ype,{classNamePicture:y?"BlogPostSales_postSalesNoRu_UVEOj":"BlogPostSales_postSalesNoEn_X0bkj",title:e?Rhe.title.whenAppliedFilter:Rhe.title.whenDefaultFilter,content:{defaultFilter:{text:Rhe.content.text},changedFilter:{buttonText:Rhe.content.resetFilter}},isChangedFilter:e,onFiltersReset:b})};return(0,Gt.useEffect)((function(){var e;return(null===(e=null==h?void 0:h.data)||void 0===e?void 0:e.length)&&v.isFetched||c($y.action(Lhe({blogUrl:p},whe))),function(){c(o_())}}),[]),(0,Gt.useEffect)((function(){JSON.stringify(m)!==JSON.stringify(d)&&c($y.action(Lhe({blogUrl:p},d)))}),[d]),Gt.createElement(a,{postSales:h,blogUrl:p,onPageChange:_,onFilterChange:E,onFilterReset:b},Gt.createElement(Gt.Fragment,null,v.isFetched&&!g&&!(null==h?void 0:h.data.length)&&S(!1),((null===(n=null==h?void 0:h.data)||void 0===n?void 0:n.length)||g)&&Gt.createElement(Phe,null,Gt.createElement(Ohe,{classNames:{resetButton:null==r?void 0:r.filterReset,container:cG()(null==r?void 0:r.filterContainer,(t={},t.BlogPostSales_hideFilter_QxOiX=function(){var e,t,n,r=g&&0===(null===(e=null==h?void 0:h.data)||void 0===e?void 0:e.length),o=g&&(null===(t=null==h?void 0:h.data)||void 0===t?void 0:t.length)>0,a=!g&&(null===(n=null==h?void 0:h.data)||void 0===n?void 0:n.length)>0;return!(r||o||a)}(),t)),select:null==r?void 0:r.filterSelect},helper:o,posts:d.postIds,order:d.orderBy,sortBy:d.sortType,onChange:E})),!v.isFetched&&Gt.createElement(uM,null),v.isFetched&&Gt.createElement(Gt.Fragment,null,!h.data.length&&g&&S(!0),h.data.length>0&&Gt.createElement(Gt.Fragment,null,Gt.createElement(i,{rows:h.data}),Gt.createElement(l,{onPageChange:_,forcePage:Number(d.offset)/d.limit,pagesCount:Math.ceil(h.extra.total/d.limit)})))))};khe.fetchActions=function(e){var t=e.params.blogUrl;return[function(){return $y.action(Lhe({blogUrl:t},whe))}]};var Dhe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogPostSales.desktop.components.BlogPostSalesRows"),Uhe=function(e){var t=e.rows,n=Gf().blogUrl,r=nr().currencies.default;return Gt.createElement("div",null,Gt.createElement("div",{className:"BlogPostSalesRows_header_T82cC"},Gt.createElement("div",null,Dhe.name),Gt.createElement("div",null,Dhe.post),Gt.createElement("div",null,Dhe.cost),Gt.createElement("div",null,Dhe.date),Gt.createElement("div",null,Dhe.email)),Gt.createElement("div",null,t.map((function(e){var t=e.user,o=t.email,a=t.name,i=t.id,l=e.amount,s=e.post,c=s.title,u=s.id,d=go(e.createdAt,"dd/MM/yyyy"),f=(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:n,postId:u}),m=c||Dhe.postWithoutName;return Gt.createElement("div",{className:"BlogPostSalesRows_row_BrZno",key:"".concat(u,"-").concat(i)},Gt.createElement("div",null,a),Gt.createElement("div",null,Gt.createElement(cM,{className:"BlogPostSalesRows_link__H8Pw",to:f,title:m},m)),Gt.createElement("div",null,Vr({amount:l,currency:r,useGrouping:!0})),Gt.createElement("div",null,d),Gt.createElement("div",null,Boolean(o)?o:"-"))}))))},Bhe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogPostSales.desktop.components.BlogPostSelectorHelper"),xhe=function(e){var t=e.className,n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),r=n[0],a=n[1],i=(0,Vt.I0)(),l=(0,Vt.v9)(XO);return(0,Gt.useEffect)((function(){if(l){var e=l.flags.hasBlogPostSelectorHelper;a(!e)}}),[l]),r?Gt.createElement("div",{className:cG()("BlogPostSelectorHelper_block_cTmoD","BlogPostSelectorHelper_container_L7Czi",t)},Gt.createElement("div",{className:"BlogPostSelectorHelper_text_Nvn5R"},Bhe.text),Gt.createElement("span",{className:"BlogPostSelectorHelper_ok_cbDNZ",onClick:function(){var e;e=o.HAS_BLOG_POST_SELECTOR_HELPER,i((0,dm.Ax)(tg.action)({flag:e})),a(!1)}},Bhe.ok),Gt.createElement("div",{className:"BlogPostSelectorHelper_arrow_QbRha"})):null},Mhe=function(){return Gt.createElement(khe,{classNames:{filterContainer:"BlogPostSales_filterContainer_GHBUx"},helper:Gt.createElement(xhe,null),RowsComponent:Uhe,Component:function(e){var t=e.children;return Gt.createElement("div",{className:"BlogPostSales_container_uJORv"},t)},FooterComponent:uhe})};Mhe.fetchActions=function(e){return function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(khe.fetchActions(e)),!1)};var Fhe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.components.BlogPayoutHint"),Ghe=function(e){var t=e.className,n=nr(),o=n.supportUrl,a=n.supportEmail,i=n.clientId,l=encodeURIComponent("".concat(Fhe.letterSubject," ").concat(Lr(),":").concat(i)),s=Qo(r.MY_GAMES_SUPPORT);return Gt.createElement("div",{className:cG()("BlogPayoutHint_root_Hedpf",t)},Gt.createElement("div",{className:"BlogPayoutHint_header_aJ1LC"},Gt.createElement(pB,{glyph:hB._13,className:"BlogPayoutHint_clock_ItQQ5"}),Gt.createElement("div",{className:"BlogPayoutHint_timeFrame_Mv3qN"},Fhe.timeFrame)),Gt.createElement("div",null,Fhe.protectionCommon,s?Gt.createElement(Gt.Fragment,null,(0,Qr.getReactText)(Fhe.protectionWithLink,{Link:function(e){var t=e.text;return Gt.createElement(cM,{to:o,target:"_blank"},t)}})):Gt.createElement(Gt.Fragment,null,(0,Qr.getReactText)((0,Qr.getParametrizedText)(Fhe.protectionWithEmail,{supportEmail:a}),{Link:function(e){var t=e.text;return Gt.createElement(cM,{to:"mailto:".concat(a,"?subject=").concat(l),target:"_blank"},t)}}))))},Hhe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogPayoutHistory.hooks.useBlogPayoutHistory");const Whe="BlogPayoutHistory_th_Ctfr0",Vhe="BlogPayoutHistory_td_ILrZM",jhe="BlogPayoutHistory_paginationText_xRKVP";var zhe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogPayoutHistory.desktop"),Yhe=function(){var e=function(e){var t=e.limit,n=e.blogUrl,r=xf(),o=function(){var e=(0,Do.parseUrl)(r.search).query;return e.page?Number(e.page)-1:0},a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(o()),2),i=a[0],l=a[1],s=(0,Vt.I0)(),c=Mf(),u=(0,Vt.v9)(vR),d=(0,Vt.v9)(gR),f=(0,Vt.v9)(yR),m=function(e){s((0,dm.Ax)(IS.action)({blogUrl:n,pageNumber:e,limit:t}))};return(0,Gt.useEffect)((function(){m(o())}),[]),{currentPage:i,total:u,historyItems:d,networkStatus:f,fetchPayoutHistory:m,getPayoutStatusText:function(e){switch(e){case Xt.SUCCESS:return Hhe.payoutStatus.success;case Xt.WAIT:return Hhe.payoutStatus.wait;case Xt.ERROR:return Hhe.payoutStatus.error;case Xt.CHARGEBACK:return Hhe.payoutStatus.chargeback;case Xt.REVERTED:return Hhe.payoutStatus.reverted;default:return e}},getSystemName:function(e){return Hhe.systemName[e]||e},onPageChange:function(e){i!==e&&(m(e),c(function(e,t){return Ga((0,Yt.getParametrizedUrl)(ir.BLOG_PAYOUT_HISTORY,{blogUrl:e}),t)}(n,e+1)),l(e),Of())}}}({blogUrl:Gf().blogUrl,limit:11}),t=e.total,n=e.historyItems,r=e.networkStatus.isFetching,o=e.currentPage,a=e.getSystemName,i=e.getPayoutStatusText,l=e.onPageChange,s=Math.ceil(t/11),c=s>1,u=!n.length&&!r;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlogPayoutHistory_header_xhMyt"},Gt.createElement(Ghe,null),!r&&!u&&Gt.createElement(ohe,{classNames:{container:"BlogPayoutHistory_exportButtonContainer_yV7bb",title:"BlogPayoutHistory_exportButtonTitle_OQssA"},dataType:q.PAYOUT_HISTORY,withIcon:!0,withBorder:!0})),Gt.createElement("div",null,r&&Gt.createElement("div",{className:"BlogPayoutHistory_spinnerContainer_G0kuI"},Gt.createElement(uM,null)),u&&Gt.createElement("div",{className:"BlogPayoutHistory_emptyText___23A"},zhe.emptyText),!u&&Gt.createElement("table",{className:"BlogPayoutHistory_table_ThSsn"},Gt.createElement("thead",null,Gt.createElement("tr",null,Gt.createElement("th",{className:Whe},"#"),Gt.createElement("th",{className:Whe},zhe.receiver),Gt.createElement("th",{className:Whe},zhe.sum),Gt.createElement("th",{className:Whe},zhe.system),Gt.createElement("th",{className:Whe},zhe.date),Gt.createElement("th",{className:Whe},zhe.status))),Gt.createElement("tbody",null,n.map((function(e,t){var n,r=e.id,o=e.status,l=e.amountWoFee,s=e.destination,c=e.currency,u=e.systemId,d=e.updatedAt,f=o!==Xt.SUCCESS&&o!==Xt.WAIT;return Gt.createElement("tr",{className:"BlogPayoutHistory_tr_SMvS9",key:"".concat(r,":").concat(t)},Gt.createElement("td",{className:Vhe},r),Gt.createElement("td",{className:Vhe},s),Gt.createElement("td",{className:Vhe},Gt.createElement(fM,{currency:c,sum:l})),Gt.createElement("td",{className:Vhe},a(u)),Gt.createElement("td",{className:Vhe},go(d,"dd/MM/yyyy/HH/mm")),Gt.createElement("td",{className:cG()(Vhe,(n={},n.BlogPayoutHistory_error_r6mlX=f,n))},i(o)))})))),c&&Gt.createElement("div",{className:"BlogPayoutHistory_paginationContainer_iKS_F"},Gt.createElement("div",{className:jhe},(0,Qr.getParametrizedText)(zhe.page,{current:o+1,total:s})),Gt.createElement(EM,{onPageChange:l,pageCount:s,initialPage:o,className:"BlogPayoutHistory_pagination_YmnSE"}),Gt.createElement("div",{className:jhe}))))};Yhe.getFetchActions=function(e,t){var n=t.params.blogUrl,r=t.query.page,o=Number(r)-1;return isNaN(o)&&(o=0),[function(){return IS.action({blogUrl:n,pageNumber:o,limit:11})}]};var Khe=(0,Qr.getTranslation)("@boosty/common/components.CopyButton"),qhe=function(e){var t=e.onlyIcon,n=e.successMessage,r=void 0===n?Khe.successMessage:n,o=e.classNames,a=void 0===o?{}:o,i=e.text,l=e.showAlert,s=e.onCopySuccess,c=e.timeout;return Gt.createElement(c$,{text:i,onCopy:function(){l&&l({type:p.SUCCESS,text:r,timeout:c}),s&&s()}},Gt.createElement(HB,{className:cG()("CopyButton_button_M3A0Z",a.button),withIcon:!0},Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{className:cG()("CopyButton_icon_k6zbW",a.icon),glyph:hB.O1o}),!t&&Khe.copy)))},Xhe=(0,Qr.getTranslation)("@boosty/common/components.QrDropdownButton"),Qhe=function(e){var t=e.onlyIcon,n=e.classNames,r=void 0===n?{}:n,o=e.link,a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),i=a[0],l=a[1];return Gt.createElement("div",{className:"QrDropdownButton_container_VXT0R"},Gt.createElement(HB,{className:cG()("QrDropdownButton_button_Mzpn8",r.button),withIcon:!0,onClick:function(){l(!0),bd.log.share.shareDropdownItemClick(De.QR)}},Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{className:cG()("QrDropdownButton_icon_U35Sp",r.icon),glyph:hB.LcT}),!t&&Xhe.qrCode)),i&&Gt.createElement("div",{className:"QrDropdownButton_dropdown_nfDhW"},Gt.createElement(Dx,{trigger:gx.CLICK,align:yx.LEFT,onClickOutside:function(){return l(!1)}},Gt.createElement(R4,{text:o,size:130}))))},Jhe=(0,Qr.getTranslation)("@boosty/common/components.ShareDropdownButton"),Zhe=function(e){var t=e.referrers,n=e.onlyIcon,r=e.url,o=e.classNames,a=void 0===o?{}:o,i=e.params,l=void 0===i?{}:i;return Gt.createElement(Mne,{url:r,params:l,referrers:t,classNames:{container:cG()("ShareDropdownButton_root_I5uc7",a.container)},onShareClick:function(e){bd.log.share.shareDropdownItemClick(e)},ButtonComponent:function(e){var t=e.onClick;return Gt.createElement(HB,{className:cG()("ShareDropdownButton_button_N_K64",a.button),withIcon:!0,onClick:t},Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{className:cG()("ShareDropdownButton_icon_NZeAY",a.icon),glyph:hB.oLY}),!n&&Jhe.share))}})};const $he={quantity:"BlogRefsStat_quantity_INizV",payout:"BlogRefsStat_payout_HvjgB",income:"BlogRefsStat_income_Zu4lF",container:"BlogRefsStat_container_f3evo",picture:"BlogRefsStat_picture_RSITO",title:"BlogRefsStat_title_MDYqC",text:"BlogRefsStat_text_ghpAs",bottomBlock:"BlogRefsStat_bottomBlock_ASm92",group:"BlogRefsStat_group_H03zd",icon:"BlogRefsStat_icon_bKBa9",amount:"BlogRefsStat_amount_sl7uo",fadeIn:"BlogRefsStat_fadeIn_ND_yc"};var eve=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogRefs.components.BlogRefsStat"),tve=function(e){var t=e.className,n=e.quantity,r=e.value,o=e.balance,a=nr().currencies.default;return Gt.createElement("div",{className:cG()(t,$he.container)},Gt.createElement("div",{className:$he.title},eve.title),Gt.createElement("div",{className:$he.bottomBlock},Gt.createElement("div",{className:$he.group},Gt.createElement("div",{className:cG()($he.icon,$he.quantity)}),Gt.createElement("div",{className:$he.info},Gt.createElement("div",{className:$he.amount},(0,Yt.getFormattedNumber)(n)," ",qr([eve.referees.n1,eve.referees.n3,eve.referees.n5],n)),Gt.createElement("div",{className:$he.text},qr([eve.registered.n1,eve.registered.n3,eve.registered.n5],n)))),Gt.createElement("div",{className:$he.group},Gt.createElement("div",{className:cG()($he.icon,$he.income)}),Gt.createElement("div",{className:$he.info},Gt.createElement("div",{className:$he.amount},Vr({amount:r,currency:a,useGrouping:!0})),Gt.createElement("div",{className:$he.text},qr([eve.income.n1,eve.income.n3,eve.income.n5],r)))),Gt.createElement("div",{className:$he.group},Gt.createElement("div",{className:cG()($he.icon,$he.payout)}),Gt.createElement("div",{className:$he.info},Gt.createElement("div",{className:$he.amount},Vr({amount:o,currency:a,useGrouping:!0})),Gt.createElement("div",{className:$he.text},eve.payout)))))};const nve="BlogRefsSteps_explanationStep_j4ddR",rve="BlogRefsSteps_explanationStepPicture_hMK5R",ove="BlogRefsSteps_explanationStepTitle_Wjxc7",ave="BlogRefsSteps_explanationStepText_tjSeO";var ive=function(){return ive=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ive.apply(this,arguments)},lve=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogRefs.components.BlogRefsSteps"),sve=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.refs,o=e.localizationParams,a=nr(),i=a.locale,l=a.projectName,s=i===ce.RU;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:cG()(n.title,"BlogRefsSteps_explanationTitle_kShwx")},lve.explanation.title),Gt.createElement("div",{className:cG()(n.container,"BlogRefsSteps_explanationSteps_IElL9")},Gt.createElement("div",{className:cG()(n.item,nve)},Gt.createElement("div",{className:cG()(rve,"BlogRefsSteps_pictureMessages__wLEk")}),Gt.createElement("div",{className:ove},(0,Qr.getParametrizedText)(lve.explanation.steps[1].title,o)),Gt.createElement("div",{className:ave},(0,Qr.getParametrizedText)(lve.explanation.steps[1].text,ive(ive({},o),{projectNameEnglishOnlyCapitalizes:l.latinCapitalized})))),Gt.createElement("div",{className:cG()(n.item,nve)},Gt.createElement("div",{className:cG()(rve,s?"BlogRefsSteps_pictureIncomeRub_TX6WK":"BlogRefsSteps_pictureIncomeUsd_HFBbE")}),Gt.createElement("div",{className:ove},(0,Qr.getParametrizedText)(lve.explanation.steps[2].title,o)),Gt.createElement("div",{className:ave},(0,Qr.getParametrizedText)(lve.explanation.steps[2].text,o))),Gt.createElement("div",{className:cG()(n.item,nve)},Gt.createElement("div",{className:cG()(rve,"BlogRefsSteps_pictureCalendar_dzJwu")}),Gt.createElement("div",{className:ove},12===r.payoutPeriodInMonths?(0,Qr.getParametrizedText)(lve.explanation.steps[3].titleYear,o):(0,Qr.getParametrizedText)(lve.explanation.steps[3].title,o)),Gt.createElement("div",{className:ave},(0,Qr.getParametrizedText)(lve.explanation.steps[3].text,o)))))},cve=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},uve=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogRefs.desktop.components.BlogRefsTable"),dve=function(e){var t=e.rows;return Gt.createElement("div",null,Gt.createElement("div",{className:"BlogRefsTable_header_L3LjO"},Gt.createElement("div",null,uve.name),Gt.createElement("div",null,uve.createdAt),Gt.createElement("div",null,uve.authorPage)),Gt.createElement("div",null,t.map((function(e,t){var n=e.blogUrl,r=e.name,o=e.createdAt,a=e.isBlogger,i=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:n}),l=go(o,"dd/MM/yyyy/HH/mm");return Gt.createElement("div",{className:"BlogRefsTable_row_kygdy",key:t},Gt.createElement("div",null,r),Gt.createElement("div",null,l),Gt.createElement("div",null,a&&Gt.createElement(cM,{className:"BlogRefsTable_link_f47AG",to:i},n)))}))))},fve=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogRefs.desktop"),mve=function(){var e,t=jG().showAlert,n=Gf().blogUrl,o=function(e){var t=e.blogUrl,n=cve((0,Gt.useState)(!1),2),o=n[0],a=n[1],i=cve((0,Gt.useState)(0),2),l=i[0],s=i[1],c=cve((0,Gt.useState)(!1),2),u=c[0],d=c[1],f=(0,Vt.v9)(XO),m=(0,Vt.v9)(cA),p=(0,Vt.v9)(gO),h=(0,Vt.v9)(pO),v=(0,Vt.v9)(hO),g=(0,Vt.v9)(vO),y=Ck().isModerator,_=Ok(t),E=Ok(f.referalConvVersion),b=(0,Vt.I0)(),S=nr().refPolicy.acceptVersion,T=Qo(r.REFERRAL_PAGE_SHARE_BUTTON),I=S===f.referalConvVersion||y,N=null!=p.balance&&null!=p.referralMoney&&null!=p.referral,C=v.data.referrals,w=v.extra.total,O=Math.ceil(w/11),A=C.length>0,P=!A&&g.isFetched||!I;(0,Gt.useEffect)((function(){return I&&(L(),R()),function(){k()}}),[]),(0,Gt.useEffect)((function(){_&&t!==_&&y&&window.location.reload()}),[t]),(0,Gt.useEffect)((function(){E<f.referalConvVersion&&(L(),R())}),[f.referalConvVersion]),(0,Gt.useEffect)((function(){R()}),[l,u]);var L=function(){h.isFetched||b((0,dm.Ax)(Gy.action)({blogUrl:t}))},R=function(){var e=11*l;b((0,dm.Ax)(Wy.action)({blogUrl:t,offset:e,limit:11,onlyBloggers:u}))},k=function(){b(Oy())};return{acceptRefPolicyNetworkStatus:m,blogRefsStats:p,blogRefsStatsNetworkStatus:h,blogRefsUsersStatsNetworkStatus:g,hasBlogRefsStats:N,isShowRefButton:T,totalPages:O,hasBlogRefsUsersStats:A,canShowRefStats:I,isOnlyBloggers:u,currentPage:l,isShowRefsSteps:P,isPolicyCheckboxActive:o,referrals:C,setCurrentPage:s,setIsPolicyCheckboxActive:a,setIsOnlyBloggers:d,acceptRefPolicy:function(){b((0,dm.Ax)(lg.action)({acceptVersion:S}))}}}({blogUrl:n}),a=o.currentPage,i=o.isPolicyCheckboxActive,l=o.acceptRefPolicyNetworkStatus,s=o.blogRefsStats,c=o.blogRefsStatsNetworkStatus,u=o.blogRefsUsersStatsNetworkStatus,d=o.canShowRefStats,f=o.hasBlogRefsStats,m=o.isShowRefButton,p=o.totalPages,h=o.hasBlogRefsUsersStats,v=o.isOnlyBloggers,g=o.isShowRefsSteps,y=o.referrals,_=o.setCurrentPage,E=o.setIsPolicyCheckboxActive,b=o.setIsOnlyBloggers,S=o.acceptRefPolicy,T=nr().refs,I=T.payoutDayOfMonth,N=T.payoutPeriodInMonths,C=T.payoutRate,w=ei(ir.BLOG_REF_LANDING,{blogUrl:n}),O=[{label:fve.select.all,value:!1},{label:fve.select.onlyBloggers,value:!0}],A={payoutDayOfMonth:I,payoutPeriodInMonths:N,payoutRate:C,months:qr([fve.months.n1,fve.months.n2,fve.months.n5],N)},P=O.find((function(e){var t=e.value;return v===t})),L=function(e){e.stopPropagation()};return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlogRefs_topBlock_y_ysU"},Gt.createElement("div",null,Gt.createElement("div",{className:"BlogRefs_proposal_dcWv7"},Gt.createElement("div",{className:"BlogRefs_proposalTitle_sKSd8"},(0,Qr.getParametrizedText)(fve.proposal.title,A)),Gt.createElement("div",{className:"BlogRefs_proposalText_LH9Ky"},(0,Qr.getParametrizedText)(fve.proposal.text,A))),d?Gt.createElement("div",{className:"BlogRefs_link_dsdwk"},Gt.createElement("div",{className:"BlogRefs_linkTitle_JWVj1"},fve.refLink),Gt.createElement(Zx,{classNameInput:"BlogRefs_linkField_UNFMN",value:w}),Gt.createElement("div",{className:"BlogRefs_linkButtons_PnbRE"},Gt.createElement(qhe,{text:w,showAlert:t,successMessage:fve.copyLinkSuccessMessage,classNames:{button:"BlogRefs_linkCopyButton_f8ZnF"}}),m&&Gt.createElement(Zhe,{params:{blogUrl:n},referrers:(e={},e[De.VK]=ke.REF_LINK_VK,e[De.FB]=ke.REF_LINK_FB,e[De.OK]=ke.REF_LINK_OK,e[De.TWITTER]=ke.REF_LINK_TWITTER,e),url:ir.BLOG_REF_LANDING,classNames:{container:"BlogRefs_shareDropdownButton_xf2hG"}}),Gt.createElement(Qhe,{link:w}))):Gt.createElement("div",{className:"BlogRefs_policy_reP_s"},Gt.createElement("div",{className:"BlogRefs_policyPrecondition_jIYew"},Gt.createElement(pB,{glyph:hB.Gc9,className:"BlogRefs_policyPreconditionIcon_VFxgs"}),Gt.createElement("div",{className:"BlogRefs_policyPreconditionText_wqlua"},fve.policy.precondition)),Gt.createElement(VM,{isDisabled:l.isFetching,isDefaultChecked:!1,labelClassName:"BlogRefs_policyCheckboxLabel_vLLCS",label:Gt.createElement("div",null,Gt.createElement("span",null,fve.policy.read)," ",Gt.createElement(cM,{className:"BlogRefs_refLink_zv3if",onClick:L,to:ir.OFFERS_REF_POLICY,target:"_blank"},fve.policy.text)," ",Gt.createElement("span",null,fve.policy.accept)),onToggle:function(e){E(e)}}),Gt.createElement(FB,{isDisabled:!i||l.isFetching,className:"BlogRefs_showRefLinkButton_snoyn",onClick:function(){S()}},fve.policy.showRefLink))),d&&f&&(c.isFetched?Gt.createElement(tve,{quantity:s.referral,value:s.referralMoney,balance:s.balance}):Gt.createElement("div",{className:"BlogRefs_spinnerContainer_CumG4"},Gt.createElement(uM,null)))),!u.isFetched&&d&&Gt.createElement("div",{className:"BlogRefs_spinnerList_smIHq"},Gt.createElement(uM,null)),h&&d&&u.isFetched&&Gt.createElement("div",{className:"BlogRefs_refs_PEAZg"},Gt.createElement("div",{className:"BlogRefs_titleTable_lougo"},fve.myRefs),Gt.createElement(lF,{className:"BlogRefs_bloggerSelect_qNvPy",onSelect:function(e){var t=e.value;b(t),_(0)},options:O,selected:P,label:fve.select.label}),Gt.createElement(dve,{rows:y}),p>1&&Gt.createElement(uhe,{forcePage:a,pagesCount:p,onPageChange:function(e){_(e)}})),g&&Gt.createElement("div",{className:"BlogRefs_explanation_aUYBh"},Gt.createElement(sve,{refs:T,localizationParams:A}),d&&Gt.createElement(cM,{className:"BlogRefs_informationLink_Nvztl",onClick:L,to:ir.OFFERS_REF_POLICY,target:"_blank"},Gt.createElement(pB,{glyph:hB.Gc9,className:"BlogRefs_iconInformation_WFI3_"}),Gt.createElement("div",{className:"BlogRefs_infoLinkText_QxlBm"},fve.policy.linkText))))};mve.getFetchActions=function(e,t){var n=t.params.blogUrl;return[function(){return Gy.action({blogUrl:n})},function(){return Wy.action({blogUrl:n,offset:0,limit:11,onlyBloggers:!1})}]};var pve=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.components.BlogBroadcastMessageStats"),hve=function(e){var t=e.blogUrl,n=(0,Yt.getParametrizedUrl)(ir.BLOG_BROADCAST_MESSAGE_STATS,{blogUrl:t});return Gt.createElement("div",{className:"BlogBroadcastMessageStats_container_HTtGx"},Gt.createElement("div",{className:"BlogBroadcastMessageStats_title_TlLxt"},pve.title),Gt.createElement("div",{className:"BlogBroadcastMessageStats_description_ddKMB"},pve.description),Gt.createElement(jt.rU,{to:n},Gt.createElement("div",{className:"BlogBroadcastMessageStats_button_TKWTf"},Gt.createElement(pB,{className:"BlogBroadcastMessageStats_icon_nl8zu",glyph:hB.Vcp}),pve.button)))},vve=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.components.BlogUnsubscribeReasons"),gve=function(e){var t=e.blogUrl,n=(0,Yt.getParametrizedUrl)(ir.BLOG_UNSUBSCRIBES,{blogUrl:t});return Gt.createElement("div",{className:"BlogUnsubscribeReasons_container_lfehW"},Gt.createElement("div",{className:"BlogUnsubscribeReasons_title_S4iYZ"},vve.title),Gt.createElement("div",{className:"BlogUnsubscribeReasons_description_vx_vU"},vve.description),Gt.createElement(jt.rU,{to:n},Gt.createElement("div",{className:"BlogUnsubscribeReasons_button_XJzGf"},Gt.createElement(pB,{className:"BlogUnsubscribeReasons_icon_XlstK",glyph:hB.NVv}),vve.button)))},yve=function(e){var t=e.className,n=e.icon,r=e.color;return Gt.createElement("div",{className:cG()(t,"ChartLoader_item_KKBz_")},Gt.createElement("div",{className:"ChartLoader_info_S5xqF"},Gt.createElement(pB,{glyph:n,style:{color:r},className:"ChartLoader_icon_HZSM0"}),Gt.createElement("div",{className:"ChartLoader_amount_K_oxK"}),Gt.createElement("div",{className:"ChartLoader_label_JwHUX"})),Gt.createElement("div",{className:"ChartLoader_chart_pDAZA"},Gt.createElement(pB,{glyph:hB.ghS,className:"ChartLoader_graph_Wm7Zr"})))},_ve=[{icon:hB.w5v,color:He.SUBSCRIBERS},{icon:hB.M1s,color:He.FOLLOWERS},{icon:hB.Ntz,color:He.CANCELED_SUBSCRIPTIONS},{icon:hB.FqK,color:He.UP_SUBSCRIBERS},{icon:hB.wUk,color:He.RESUBSCRIBE},{icon:hB.MG1,color:He.DONATE_TARGET},{icon:hB.zF_,color:He.POST_SALES},{icon:hB.G$k,color:He.GIFT_SALES},{icon:hB.f7e,color:He.MESSAGES},{icon:hB.TME,color:He.ON_ACCOUNT}],Eve=function(e){var t=e.classNames;return Gt.createElement("div",{className:cG()(null==t?void 0:t.container,"ChartsLoader_container_wGzdS")},_ve.map((function(e,n){var r=e.icon,o=e.color;return Gt.createElement(yve,{key:"Chart".concat(n),icon:r,color:o,className:null==t?void 0:t.item})})))};const bve="EventLoader_row_A0utM";var Sve=function(){return Gt.createElement("div",{className:"EventLoader_eventLoader_lFtMV"},Gt.createElement("div",{className:bve},Gt.createElement("div",{className:"EventLoader_icon_MwysG"}),Gt.createElement("div",{className:"EventLoader_title__aMoi"}),Gt.createElement("div",{className:"EventLoader_amount_JDQq9"})),Gt.createElement("div",{className:bve},Gt.createElement("div",{className:"EventLoader_from_cVupz"})),Gt.createElement("div",{className:bve},Gt.createElement("div",{className:"EventLoader_description_WvXvW"}),Gt.createElement("div",{className:"EventLoader_date_o6x60"})))},Tve=function(){return Gt.createElement("div",{className:"EventsLoader_container_Qe7lT"},Gt.createElement(Sve,null),Gt.createElement(Sve,null),Gt.createElement(Sve,null),Gt.createElement(Sve,null),Gt.createElement(Sve,null),Gt.createElement("div",{className:"EventsLoader_gradient_OVpx7"}))};const Ive="MainInfoLoader_info_BNcpm",Nve="MainInfoLoader_description_zqFy7",Cve="MainInfoLoader_counter_txpOf",wve="MainInfoLoader_caption_coN_1",Ove="MainInfoLoader_amount_uRC7H",Ave="MainInfoLoader_label_owFmS";var Pve=function(e){var t=e.classNames;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:null==t?void 0:t.counter.container},Gt.createElement("div",{className:null==t?void 0:t.counter.paidCounter},Gt.createElement(pB,{glyph:hB.a_W,className:null==t?void 0:t.counter.iconContainer,classNameSvg:null==t?void 0:t.counter.icon}),Gt.createElement("div",{className:Nve},Gt.createElement("div",{className:Cve}),Gt.createElement("div",{className:wve}))),Gt.createElement("div",{className:null==t?void 0:t.counter.followCounter},Gt.createElement(pB,{glyph:hB.tCy,className:null==t?void 0:t.counter.iconContainer,classNameSvg:null==t?void 0:t.counter.icon}),Gt.createElement("div",{className:Nve},Gt.createElement("div",{className:Cve}),Gt.createElement("div",{className:wve})))),Gt.createElement("div",{className:cG()(t.container,"MainInfoLoader_container_h0c_e")},Gt.createElement("div",{className:cG()(t.item,Ive)},Gt.createElement("div",{className:Ove}),Gt.createElement("div",{className:Ave})),Gt.createElement("div",{className:cG()(t.item,Ive)},Gt.createElement("div",{className:Ove}),Gt.createElement("div",{className:Ave})),Gt.createElement("div",{className:cG()(t.item,Ive)},Gt.createElement("div",{className:Ove}),Gt.createElement("div",{className:Ave}))))},Lve=function(e){return e.email?"".concat(e.name," (").concat(e.email,")"):e.name},Rve=(0,Qr.getTranslation)("@boosty/common/components.SearchUsersSuggest.SearchUsersInput"),kve=function(e){var t=e.onSelect,n=(0,Vt.I0)(),r=(0,Vt.v9)(IO),o=(0,Vt.v9)(NO),a=Gf().blogUrl;return Gt.createElement(Dee,{classNames:{container:"SearchUsersInput_container_cZnPq"},items:r,networkStatus:o,placeholder:Rve.username,onSelect:t,search:function(e){return n(jy.action({blogUrl:a,chunk:e}))},stringifyItem:Lve})},Dve=function(e){var t=e.list,n=e.onUserDelete;return Gt.createElement("div",{className:"SearchUsersSelected_container_ZzEy8"},t.map((function(e){return Gt.createElement("div",{className:"SearchUsersSelected_user_BjA0m",key:e.id},Gt.createElement("span",{title:Lve(e),className:"SearchUsersSelected_title_j5o5E"},Lve(e)),Gt.createElement(pB,{glyph:hB.bMz,className:"SearchUsersSelected_iconClose_m02Q1",onClick:function(){return n(e)}}))})))},Uve=function(){return Uve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Uve.apply(this,arguments)},Bve=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},xve=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Mve=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.components.StatEvents.components.EventSelector"),Fve=function(e){var t=Qo(r.HOLDS_STAT),n=(0,Gt.useRef)(null),o=Bve((0,Gt.useState)(!1),2),a=o[0],i=o[1],l=Bve((0,Gt.useState)([]),2),s=l[0],c=l[1],u=e.selected.length>0,d=e.selectedUsers.length>0;(0,Gt.useEffect)((function(){var e=xve([{id:Ge.SUBSCRIBERS,value:Ge.SUBSCRIBERS,valueObject:{id:gt.INC_SUBSCRIBERS},label:Mve.subscribe},{id:Ge.RESUBSCRIBES,value:Ge.RESUBSCRIBES,valueObject:{id:gt.RECURRENT},label:Mve.resubscribe},{id:Ge.ON_ACCOUNT,value:Ge.ON_ACCOUNT,valueObject:{id:gt.PAYOUT},label:Mve.withdraw},{id:Ge.RESUBSCRIBES,value:Ge.RESUBSCRIBES,valueObject:{id:gt.PAYOUT_ERROR},label:Mve.error},{id:Ge.UP_SUBSCRIBERS,value:Ge.UP_SUBSCRIBERS,valueObject:{id:gt.UP_SUBSCRIBERS},label:Mve.subscribeUp},{id:Ge.DONATE_TARGET,value:Ge.DONATE_TARGET,valueObject:{id:gt.DONATION},label:Mve.donateTarget},{id:Ge.DONATION_AUTHOR,value:Ge.DONATION_AUTHOR,valueObject:{id:gt.DONATION_AUTHOR},label:Mve.donateAuthor},{id:Ge.DONATION_POST,value:Ge.DONATION_POST,valueObject:{id:gt.DONATION_POST},label:Mve.donatePost},{id:Ge.DONATION_DIALOG,value:Ge.DONATION_DIALOG,valueObject:{id:gt.DONATION_DIALOG},label:Mve.donateDialog},{id:Ge.POST_SALES,value:Ge.POST_SALES,valueObject:{id:gt.POST_SALE},label:Mve.postSales},{id:Ge.MESSAGES_SALE,value:Ge.MESSAGES_SALE,valueObject:{id:gt.MESSAGE_SALE},label:Mve.messageSales},{id:Ge.GIFT_SALES,value:Ge.GIFT_SALES,valueObject:{id:gt.GIFT_SALE},label:Mve.gift},{id:Ge.GIFT_SALES,value:Ge.GIFT_SALES,valueObject:{id:gt.GIFT_ACCEPT},label:Mve.giftAccept},{id:Ge.REFERRALS_MONEY_OUT,value:Ge.REFERRALS_MONEY_OUT,valueObject:{id:gt.REFERAL_MONEY_OUT},label:Mve.referralBonus},{id:Ge.CANCELED_SUBSCRIPTIONS,value:Ge.CANCELED_SUBSCRIPTIONS,valueObject:{id:gt.DEC_SUBSCRIBERS},label:Mve.unsubscribe},{id:Ge.COMMISSION_COMPENSATION,value:Ge.COMMISSION_COMPENSATION,valueObject:{id:gt.COMMISSION_COMPENSATION},label:Mve.commissionCompensation}],Bve(t?[{id:Ge.HOLDS,value:Ge.HOLDS,valueObject:{id:gt.HOLD},label:Mve.hold},{id:Ge.HOLDS,value:Ge.HOLDS,valueObject:{id:gt.HOLD_CANCEL},label:Mve.holdCancel},{id:Ge.HOLDS,value:Ge.HOLDS,valueObject:{id:gt.HOLD_APPROVE},label:Mve.holdApprove}]:[]),!1);d&&(e=s.filter((function(e){return![gt.PAYOUT,gt.PAYOUT_ERROR].includes(e.valueObject.id)}))),c(e)}),[d]);var f=function(t){return e.selected.includes(t.id)},m=function(t){var n=e.selected.includes(t.id)?e.selected.filter((function(e){return t.id!==e})):xve(xve([],Bve(e.selected),!1),[t.id],!1);e.onSelect(n)};return Gt.createElement("div",{className:"EventSelector_selector_xgAZW",ref:n},Gt.createElement("button",{className:"EventSelector_button_LzDXg",onClick:function(){return i(!a)}},Gt.createElement(pB,{className:"EventSelector_filterIcon_uvtV7",glyph:hB.azK}),u&&Gt.createElement("div",{className:"EventSelector_statusFilter_dG9i2"})),a&&Gt.createElement(Dx,{onClickOutside:function(e){n.current.contains(e.target)||i(!1)},trigger:gx.CLICK},Gt.createElement(UM,{className:"EventSelector_filterList_DfkOE"},s.map((function(e,t){return Gt.createElement($M,Uve({},e,{classNameOption:"EventSelector_selectOptionItem_UCRbd",withCheckBox:!0,key:"".concat(e.id,"-").concat(t),selected:f(e.valueObject),onSelect:m}))})))))},Gve=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Hve=function(e){var t=e.onEventsSelect,n=e.onUsersSelect,r=e.selectedEvents,o=e.selectedUsers;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"EventFilterPanel_filter_bQSA9"},Gt.createElement(kve,{onSelect:function(e){o.find((function(t){return t.id===e.id}))||n(Gve(Gve([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(o),!1),[e],!1))}}),Gt.createElement(Fve,{selectedUsers:o,selected:r,onSelect:t})),Gt.createElement(Dve,{list:o,onUserDelete:function(e){var t=o.filter((function(t){return t.id!==e.id}));n(t)}}))};const Wve={eventsFooter:"EventFooter_eventsFooter_Bo_20",itemClassNamePage:"EventFooter_itemClassNamePage_sF5Yl",buttonMore:"EventFooter_buttonMore_jgq9F",fadeIn:"EventFooter_fadeIn_zPtlm"};var Vve=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.components.StatEvents.components.EventFooter"),jve=function(e){var t=e.className,n=e.pageCount,r=e.extra,o=e.currentPage,a=e.onChange,i=e.onLoadMore;return Gt.createElement("div",{className:cG()(t,Wve.eventsFooter)},Gt.createElement(EM,{itemClassName:Wve.itemClassNamePage,onPageChange:a,pageCount:n,forcePage:o,className:Wve.paging,disableInitialCallback:!0}),!r.isLast&&Gt.createElement("button",{className:Wve.buttonMore,onClick:i},Vve.more))},zve=(0,Qr.getTranslation)("@boosty/common/components.DateFormatter"),Yve=function(e){var t,n,r=e.dateTime;return Gt.createElement("div",{className:"DateFormatter_datetime_ePyQc"},(n=function(e,t){var n=new Date(e).setHours(0,0,0,0),r=new Date(t).setHours(0,0,0,0);return Io(n,r)}(+(t=new Date(vo(r))),Date.now()),n>1?go(No(t),"dd/MM/yy/&/HH/mm"):1===n?"".concat(zve.yesterday," ").concat(zve.at," ").concat(go(No(t),"HH/mm")):"".concat(zve.today," ").concat(zve.at," ").concat(go(No(t),"HH/mm"))))},Kve=(0,Qr.getTranslation)("@boosty/common/components.PromoStatInfo"),qve=function(e){var t=e.discount,n=e.trialDays,r=e.isActive,o=e.className;if(!t&&!n)return null;var a=t?(0,Qr.getParametrizedText)(r?Kve.discount.active:Kve.discount.past,{percent:t}):(0,Qr.getParametrizedText)(qr(r?Kve.trial.active:Kve.trial.past,n),{days:n});return Gt.createElement(HF,{content:a,position:NF.TOP,isGlobal:!0,classNames:{content:"PromoStatInfo_tooltip_LxOfV"}},Gt.createElement("div",{className:cG()("PromoStatInfo_root_EWtNU",t?"PromoStatInfo_discount_lsnxr":"PromoStatInfo_trial_jtQSi",o)},Gt.createElement(pB,{glyph:t?hB.rqj:hB.Mi4,className:"PromoStatInfo_icon_EgPrv"})))};const Xve={icon:"EventItem_icon_vMVTt",item:"EventItem_item_w54Hp",title:"EventItem_title_yd3Cx",period:"EventItem_period_h9Mce",money:"EventItem_money_rKG5i",withdrawMoney:"EventItem_withdrawMoney_aUvEw",holdCancel:"EventItem_holdCancel_MVCVN",hold:"EventItem_hold_xSivp",header:"EventItem_header_Q8fWN",content:"EventItem_content_gA2VB",info:"EventItem_info_ERX8c",from:"EventItem_from_EKSTE",fromWithMargin:"EventItem_fromWithMargin_Jj7k6",error:"EventItem_error_sHc8O",iconError:"EventItem_iconError_BM_Pn",datetime:"EventItem_datetime_qzMHT",description:"EventItem_description_tZrVO",subscribe:"EventItem_subscribe_vIvmm",subscribeUp:"EventItem_subscribeUp__511I",resubscribe:"EventItem_resubscribe_PjkFC",percentIcon:"EventItem_percentIcon_UKN1x",gift:"EventItem_gift_UoJz2",messageIcon:"EventItem_messageIcon_E6I9x",commissionCompensationIcon:"EventItem_commissionCompensationIcon_QFbDG",holdIcon:"EventItem_holdIcon_TDJyQ",discount:"EventItem_discount_Km668",fadeIn:"EventItem_fadeIn_ZmANg"};var Qve=function(){return Qve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qve.apply(this,arguments)},Jve=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.components.StatEvents.components.EventItem"),Zve=function(e){var t,n,o,a=e.type,i=e.money,l=e.period,s=e.user,c=e.datetime,u=e.destination,d=e.description,f=e.payoutSystem,m=e.trial,p=e.discount,h=nr().currencies.default,v=Qo(r.HOLDS_STAT),g=Qve(((t={})[gt.INC_SUBSCRIBERS]={className:Xve.subscribe,icon:hB.w5v,title:Jve.subscribe},t[gt.DEC_SUBSCRIBERS]={className:Xve.unsubscribe,icon:hB.Ntz,title:Jve.unsubscribe},t[gt.GIFT_SALE]={className:Xve.gift,icon:hB.G$k,title:Jve.gift},t[gt.GIFT_ACCEPT]={className:Xve.subscribe,icon:hB.w5v,title:Jve.subscribe},t[gt.UP_SUBSCRIBERS]={className:Xve.subscribeUp,icon:hB.FqK,title:Jve.subscribeUp},t[gt.DONATION]={className:Xve.donate,icon:hB.MG1,title:Jve.donate},t[gt.DONATION_AUTHOR]={className:Xve.donate,icon:hB.MG1,title:Jve.donateAuthor},t[gt.DONATION_POST]={className:Xve.donate,icon:hB.MG1,title:Jve.donatePost},t[gt.DONATION_DIALOG]={className:Xve.donate,icon:hB.MG1,title:Jve.donateDialog},t[gt.RECURRENT]={className:Xve.resubscribe,icon:hB.wUk,title:Jve.resubscribe},t[gt.REFERAL_MONEY_OUT]={className:Xve.referalMoney,classNameIcon:Xve.percentIcon,icon:hB.rqj,title:Jve.referralMoney},t[gt.REFFERAL_MONEY]={className:Xve.referalMoney,classNameIcon:Xve.percentIcon,icon:hB.rqj,title:Jve.referralMoney},t[gt.POST_SALE]={className:Xve.postSale,icon:hB.zF_,title:Jve.postSale},t[gt.PAYOUT]={className:Xve.onAccount,icon:hB.TME,title:(0,Qr.getParametrizedText)(Jve.withdraw,{payoutSystem:Jve.payoutSystems[f]})},t[gt.PAYOUT_ERROR]={className:Xve.onAccount,icon:hB.TME,title:(0,Qr.getParametrizedText)(Jve.withdraw,{payoutSystem:Jve.payoutSystems[f]})},t[gt.COMMISSION_COMPENSATION]={className:Xve.commissionCompensation,icon:hB.BYp,title:Jve.commissionCompensation},t[gt.MESSAGE_SALE]={classNameIcon:Xve.messageIcon,icon:hB.f7e,title:Jve.messageSale},t),v?((n={})[gt.HOLD]={classNameIcon:Xve.holdIcon,icon:hB.Uef,title:Jve.hold},n[gt.HOLD_APPROVE]={classNameIcon:Xve.holdIcon,icon:hB.Uef,title:Jve.holdApprove},n[gt.HOLD_CANCEL]={classNameIcon:Xve.holdIcon,icon:hB.Uef,title:Jve.holdCancel},n):{}),y=function(e){return[gt.REFERAL_MONEY_OUT,gt.COMMISSION_COMPENSATION].includes(e)}(a),_=function(e){return[gt.PAYOUT,gt.PAYOUT_ERROR].includes(e)}(a),E=function(e){return![gt.PAYOUT,gt.PAYOUT_ERROR,gt.REFERAL_MONEY_OUT,gt.COMMISSION_COMPENSATION].includes(e)}(a),b=function(e){return[gt.GIFT_SALE,gt.GIFT_ACCEPT,gt.RECURRENT].includes(e)}(a)?l||1:l,S=Boolean(d)||Boolean(u);if(!g[a])return null;var T=g[a].icon,I=g[a].className,N=g[a].classNameIcon,C=g[a].title;return Gt.createElement("div",{className:Xve.item},Gt.createElement("div",{className:Xve.header},Gt.createElement(pB,{glyph:T,className:cG()(Xve.icon,N)}),Gt.createElement("div",{className:Xve.title},C),Boolean(i)&&a!==gt.DEC_SUBSCRIBERS&&function(){var e;return a===gt.GIFT_ACCEPT?Gt.createElement("div",{className:Xve.money},Jve.giftAccept):a===gt.HOLD?Gt.createElement("div",{className:cG()(Xve.money,Xve.hold)},Gt.createElement(pB,{glyph:hB.Wal,className:Xve.icon}),Vr({amount:i,currency:h,useGrouping:!0})):a===gt.HOLD_APPROVE?Gt.createElement("div",{className:cG()(Xve.money,Xve.withdrawMoney)},"- ",Vr({amount:i,currency:h,useGrouping:!0})):a===gt.HOLD_CANCEL?Gt.createElement("div",{className:cG()(Xve.money,Xve.holdCancel)},Gt.createElement(pB,{glyph:hB.ajb,className:Xve.icon}),Vr({amount:i,currency:h,useGrouping:!0})):a===gt.PAYOUT_ERROR?Gt.createElement("div",{className:cG()(Xve.money,Xve.hold)},Vr({amount:i,currency:h,useGrouping:!0})):Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:cG()(Xve.money,(e={},e[Xve.withdrawMoney]=_,e))},_?"-":"+"," ",Vr({amount:i,currency:h,useGrouping:!0}),Boolean(p)&&Gt.createElement(qve,{discount:p,isActive:!0,className:Xve.discount})))}()),Boolean(b)&&!m&&Gt.createElement("div",{className:cG()(Xve.period,I)},b," ",Jve.month),m&&Gt.createElement("div",{className:cG()(Xve.period,I)},(0,Qr.getParametrizedText)(qr(Jve.trialPeriod,m),{period:m})),Gt.createElement("div",{className:Xve.content},Gt.createElement("div",{className:Xve.info},E&&Gt.createElement("div",{className:cG()(Xve.from,(o={},o[Xve.fromWithMargin]=S,o))},Lve(s)),Boolean(d)&&Gt.createElement("div",{className:Xve.description},d),Boolean(u)&&Gt.createElement("div",{className:Xve.description},u),y&&Jve.transferReferralToBalance),a===gt.PAYOUT_ERROR&&Gt.createElement("div",{className:Xve.error},Gt.createElement(pB,{glyph:hB.J7P,className:Xve.iconError}),Gt.createElement("span",null,Jve.error)),Gt.createElement(Yve,{dateTime:c})))},$ve=function(e){var t=e.className,n=e.list,r=e.targets,o=e.subscriptions;return Gt.createElement("div",{className:cG()(t,"EventList_list_qe8W_")},n.length>0&&n.map((function(e,t){var n=function(e){var t,n,a,i,l,s=(null===(t=null==e?void 0:e.post)||void 0===t?void 0:t.title)||"";if(e.eventType===gt.UP_SUBSCRIBERS&&e.oldLevelId){var c=null===(n=o.find((function(t){return t.id===e.levelId})))||void 0===n?void 0:n.name,u=null===(a=o.find((function(t){return t.id===e.oldLevelId})))||void 0===a?void 0:a.name;s=u?"«".concat(u,"» → «").concat(c,"»"):"«".concat(c,"»")}else if(e.levelId){var d=null===(i=o.find((function(t){return t.id===e.levelId})))||void 0===i?void 0:i.name;s="«".concat(d,"»")}else e.targetId&&(s=null===(l=r.find((function(t){return t.id===e.targetId})))||void 0===l?void 0:l.description);return s}(e),a=e.type,i=e.user,l=e.payoutSystem,s=e.amount,c=e.period,u=e.destination,d=e.createdAt,f=e.eventType,m=e.promo;return Gt.createElement(Zve,{key:"eventItem".concat(a).concat(t),type:f,user:i,datetime:d,payoutSystem:l,money:s,period:c,description:n,destination:u,discount:null==m?void 0:m.discountPercent,trial:null==m?void 0:m.trialDays})})))},ege=function(){return To(30)},tge=function(){return{from:ege(),to:No(new Date(vo(To(0))).setUTCHours(23,59,59,999)),limit:8,offset:0,types:[],userIds:[]}},nge=function(){return nge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nge.apply(this,arguments)},rge=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},oge=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.components.StatEvents"),age=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.filter,o=e.onFilterChange,a=e.onFilterReset,i=function(e){var t,n,r,o,a=e.blogUrl,i=e.filter,l=e.onFilterChange,s=e.onFilterReset,c=(0,Vt.I0)(),u=Ok(i)||tge(),d=rge((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=rge((0,Gt.useState)([]),2),h=p[0],v=p[1],g=(0,Vt.v9)(lR),y=(0,Vt.v9)(sR),_=(0,Vt.v9)(EL),E=(0,Vt.v9)(NL),b=(0,Vt.v9)(SO),S=(0,Vt.v9)(TO),T=S.isFetched&&y.isFetched&&E.isFetched,I=T&&b.data.length>0,N=T&&!b.data.length,C=!T&&!f,w=!T&&f,O=_k().isAuthorized;return(0,Gt.useEffect)((function(){(null==g?void 0:g.length)&&y.isFetched||c(ih.action({blogUrl:a})),c(qp.action({blogUrl:a,showDeleted:!0,showFree:!0})),b.data.length&&S.isFetched||c(Uy.action(nge({blogUrl:a},tge())))}),[]),(0,Gt.useEffect)((function(){O||c(Cy())}),[O]),(0,Gt.useEffect)((function(){var e=new Date(1e3*i.from).setUTCHours(23,59,59,999),t=new Date(1e3*i.to).setUTCHours(23,59,59,999);(0,ii.isEqual)(i,u)||c(Uy.action(nge(nge({blogUrl:a},i),{from:No(e),to:No(t)})))}),[i]),(0,Gt.useEffect)((function(){return m(!1)}),[b]),{users:h,subscriptions:_,targets:g,blogEvents:b,isContentLoading:C,isMoreItemsLoading:w,isEmptyContent:N,isChangedFilter:(t=tge(),n=i.to!==t.to||i.from!==t.from,r=i.types.length!==t.types.length,o=i.userIds.length!==t.userIds.length,n||r||o),hasContent:I,onTypesSelect:function(e){return l({types:e,offset:0})},onUsersSelect:function(e){v(e),l({userIds:e.map((function(e){return e.id})),offset:0})},onFiltersReset:function(){s(),v([])},onPageChange:function(e){l(nge(nge({},i),{offset:e*i.limit})),Of()},onLoadMore:function(){m(!0),l(nge(nge({},i),{limit:i.limit+6}))}}}({blogUrl:Gf().blogUrl,filter:r,onFilterChange:o,onFilterReset:a}),l=i.users,s=i.targets,c=i.blogEvents,u=i.subscriptions,d=i.isContentLoading,f=i.isMoreItemsLoading,m=i.isEmptyContent,p=i.isChangedFilter,h=i.hasContent,v=i.onTypesSelect,g=i.onUsersSelect,y=i.onFiltersReset,_=i.onPageChange,E=i.onLoadMore;return Gt.createElement(Gt.Fragment,null,Gt.createElement(Hve,{className:n.filter,onEventsSelect:v,onUsersSelect:g,selectedUsers:l,selectedEvents:r.types}),Gt.createElement("div",{className:"StatEvents_container_d61QB"},d&&Gt.createElement(Tve,null),m&&Gt.createElement(Ype,{classNamePicture:"StatEvents_pictureEmpty_Wj0sD",isChangedFilter:p,title:p?oge.eventsUnavailableWithFilterApplied:oge.eventsUnavailable,content:{defaultFilter:{text:oge.description},changedFilter:{text:oge.descriptionApplyFilter,buttonText:oge.resetFilterButton}},onFiltersReset:y}),(h||f)&&Gt.createElement($ve,{subscriptions:u,targets:s,className:n.container,list:c.data}),f&&Gt.createElement("div",{className:"StatEvents_spinnerContainer_NWT8k"},Gt.createElement(uM,{size:50})),h&&Gt.createElement(jve,{className:n.footer,extra:c.extra,currentPage:Math.ceil(r.offset/r.limit),pageCount:Math.ceil(c.extra.total/r.limit),onChange:_,onLoadMore:E})))},ige=(0,Qr.getTranslation)("@boosty/common/components.Currency"),lge=function(e){var t=e.currency,n=e.modifier;return Gt.createElement(Gt.Fragment,null,"symbol"===n?jr(t):ige[t][n])};const sge="StatMainInfo_container_TQQWz",cge="StatMainInfo_containerWithoutInformer_uEk96",uge="StatMainInfo_counters_YwV6s",dge="StatMainInfo_block_MNIOR",fge="StatMainInfo_iconContainer_pGiQ6",mge="StatMainInfo_icon_JJrTp",pge="StatMainInfo_description_U7h0v",hge="StatMainInfo_paidCounter_qUSRe",vge="StatMainInfo_followCounter_MRgr0",gge="StatMainInfo_item_G8LbG",yge="StatMainInfo_money_IdNCt",_ge="StatMainInfo_counter_bNg4h",Ege="StatMainInfo_caption_QCbYY";var bge,Sge=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.components.StatMainInfo"),Tge=function(e){var t=e.classNames,n=Gf().blogUrl,o=nr().currencies.default,a=(0,Vt.I0)(),i=(0,Vt.v9)(fO),l=(0,Vt.v9)(mO),s=Qo(r.HOLDS_STAT),c=!Rr();if((0,Gt.useEffect)((function(){i&&l.isFetched||a(c_.action({blogUrl:n}))}),[]),!i||!l.isFetched)return Gt.createElement(Pve,{classNames:{container:cG()(t.container,sge,!c&&cge),item:cG()(t.item,gge),counter:{container:cG()(null==t?void 0:t.container,uge),paidCounter:cG()(null==t?void 0:t.counter,dge,hge),followCounter:cG()(null==t?void 0:t.counter,dge,vge),iconContainer:fge,icon:mge}}});var u=i.followersCount.toLocaleString("ru"),d=i.paidCount.toLocaleString("ru");return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:cG()(null==t?void 0:t.container,uge)},Gt.createElement("div",{className:cG()(null==t?void 0:t.counter,dge,hge)},Gt.createElement(pB,{glyph:hB.a_W,className:fge,classNameSvg:mge}),Gt.createElement("div",{className:pge},Gt.createElement("span",{className:_ge},d),Gt.createElement("span",{className:Ege},qr([Sge.paidSubscribers1,Sge.paidSubscribers2,Sge.paidSubscribers5],i.paidCount)))),Gt.createElement("div",{className:cG()(null==t?void 0:t.counter,dge,vge)},Gt.createElement(pB,{glyph:hB.tCy,className:fge,classNameSvg:mge}),Gt.createElement("div",{className:pge},Gt.createElement("span",{className:_ge},u),Gt.createElement("span",{className:Ege},qr([Sge.followers1,Sge.followers2,Sge.followers5],i.followersCount))))),Gt.createElement("div",{className:cG()(null==t?void 0:t.container,sge,!c&&cge)},Gt.createElement("div",{className:cG()(t.item,gge)},Gt.createElement("span",{className:yge},Vr({amount:i.balance,currency:o,useGrouping:!0})),Gt.createElement("span",{className:Ege},Sge.currentBalance)),Gt.createElement("div",{className:cG()(t.item,gge)},Gt.createElement("span",{className:yge},Vr({amount:i.income,currency:o,useGrouping:!0})),Gt.createElement("span",{className:Ege},Sge.totalEarned)),Gt.createElement("div",{className:cG()(t.item,gge)},Gt.createElement("span",{className:yge},Vr({amount:i.payoutSum,currency:o,useGrouping:!0})),Gt.createElement("span",{className:Ege},Sge.totalWithdraw)),s&&Gt.createElement("div",{className:cG()(t.item,gge)},Gt.createElement("span",{className:yge},Vr({amount:i.hold,currency:o,useGrouping:!0})),Gt.createElement("span",{className:Ege},Sge.hold))),c&&Gt.createElement("div",{className:"StatMainInfo_informer_KieZA"},Gt.createElement(pB,{glyph:hB.AUb,className:cG()(mge,"StatMainInfo_iconExchange_Dy4SZ")}),(0,Qr.getReactText)(Sge.informer,{CurrencyText:function(){return Gt.createElement(lge,{currency:o,modifier:"plural"})},CurrencySymbol:function(){return Gt.createElement(lge,{currency:o,modifier:"symbol"})}})))};!function(e){e[e.WEEK=0]="WEEK",e[e.MONTH=1]="MONTH",e[e.CUSTOM=2]="CUSTOM"}(bge||(bge={}));var Ige=n(63258),Nge=n(85196),Cge=n(63004),wge=n(81073),Oge=function(e){var t=e.data,n=e.color,r="colorUv-".concat(n),o="url(#".concat(r,")");return Gt.createElement(Ige.h,{maxHeight:50,width:50},Gt.createElement(Nge.c,{data:t},Gt.createElement("defs",null,Gt.createElement("linearGradient",{id:r,x1:"0",y1:"0",x2:"0",y2:"1"},Gt.createElement("stop",{offset:"0%",stopColor:n,stopOpacity:1}),Gt.createElement("stop",{offset:"100%",stopColor:"#FFFFFF",stopOpacity:.5}))),Gt.createElement(Cge.x,{type:"basis",unit:"M",strokeLinecap:"round",strokeWidth:2,dataKey:"count",stroke:n,dot:!1,legendType:"none"}),Gt.createElement(wge.u,{type:"basis",dataKey:"count",strokeWidth:2,stroke:n,fill:o})))},Age=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.components.StatCommonItem"),Pge=function(e){var t,n=e.className,r=e.amount,o=e.type,a=e.data,i=nr().currencies.default,l=((t={})[Ge.SUBSCRIBERS]={color:He.SUBSCRIBERS,icon:hB.w5v,title:qr([Age.subscribers1,Age.subscribers2,Age.subscribers5],r)},t[Ge.SUBSCRIBERS_MONEY]={color:He.SUBSCRIBERS,icon:hB.w5v,title:qr([Age.subscribers1,Age.subscribers2,Age.subscribers5],r)},t[Ge.FOLLOWERS_INC]={color:He.FOLLOWERS,icon:hB.M1s,title:qr([Age.followers1,Age.followers2,Age.followers5],r)},t[Ge.FOLLOWERS_DEC]={color:He.FOLLOWERS,icon:hB.M1s,title:qr([Age.followers1,Age.followers2,Age.followers5],r)},t[Ge.CANCELED_SUBSCRIPTIONS]={color:He.CANCELED_SUBSCRIPTIONS,icon:hB.Ntz,title:qr([Age.canceledSubscriptions1,Age.canceledSubscriptions2,Age.canceledSubscriptions5],r)},t[Ge.UP_SUBSCRIBERS]={color:He.UP_SUBSCRIBERS,icon:hB.FqK,title:qr([Age.upSubscribers1,Age.upSubscribers2,Age.upSubscribers5],r)},t[Ge.RESUBSCRIBES]={color:He.RESUBSCRIBE,icon:hB.wUk,title:qr([Age.resubscribe1,Age.resubscribe2,Age.resubscribe5],r)},t[Ge.POST_SALES]={color:He.POST_SALES,icon:hB.zF_,title:qr([Age.postSales1,Age.postSales2,Age.postSales5],r)},t[Ge.POST_SALES_MONEY]={color:He.POST_SALES,icon:hB.zF_,title:qr([Age.postSales1,Age.postSales2,Age.postSales5],r)},t[Ge.GIFT_SALES]={color:He.GIFT_SALES,icon:hB.G$k,title:qr([Age.giftSales1,Age.giftSales2,Age.giftSales5],r)},t[Ge.ON_ACCOUNT]={color:He.ON_ACCOUNT,icon:hB.TME,title:Age.onAccount},t[Ge.REFERRALS]={color:He.REFERRALS,icon:hB.rqj,title:Age.referralBonus},t[Ge.REFERRALS_MONEY]={color:He.REFERRALS,icon:hB.rqj,title:Age.referralBonus},t[Ge.DONATE_TARGET]={color:He.DONATE_TARGET,icon:hB.MG1,title:qr([Age.donateTarget1,Age.donateTarget2,Age.donateTarget5],r)},t[Ge.DONATIONS_MONEY]={color:He.DONATE_TARGET,icon:hB.MG1,title:qr([Age.donateTarget1,Age.donateTarget2,Age.donateTarget5],r)},t[Ge.REFERRALS_MONEY_OUT]={color:He.REFERRALS_MONEY_OUT,icon:hB.MG1,title:Age.referralBonusOut},t[Ge.HOLDS]={color:He.HOLDS,icon:hB.Uef,title:qr([Age.refunds1,Age.refunds2,Age.refunds5],r)},t[Ge.COMMISSION_COMPENSATION]={color:He.ON_ACCOUNT,icon:hB.BYp,title:Age.commissionCompensation},t[Ge.MESSAGES_SALE]={color:He.MESSAGES,icon:hB.f7e,title:qr([Age.messages1,Age.messages2,Age.messages5],r)},t)[o],s=l.icon,c=l.color,u=l.title,d={color:c},f=[Ge.ON_ACCOUNT,Ge.REFERRALS_MONEY].includes(o),m=Ge.HOLDS===o,p=[Ge.SUBSCRIBERS,Ge.FOLLOWERS_INC].includes(o)?"+".concat(r.toLocaleString("ru")):r.toLocaleString("ru");return Gt.createElement("div",{className:cG()(n,"StatCommonItem_item_Ujlo2")},Gt.createElement("div",{className:"StatCommonItem_info_auUX5"},Gt.createElement(pB,{className:"StatCommonItem_icon_YQTAj",glyph:s,style:d}),Gt.createElement("div",{className:"StatCommonItem_count_ksDMT"},f&&Vr({amount:r,currency:i,useGrouping:!0}),m&&(0,Qr.getParametrizedText)(Age.man,{amount:p}),!f&&!m&&r),Gt.createElement("div",{className:"StatCommonItem_title_iPjhm"},u)),a.length>1&&Gt.createElement(Oge,{data:a,color:c}))},Lge=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Rge=function(e){var t=e.classNames,n=void 0===t?{}:t,o=e.metrics,a=e.charts,i=Qo(r.HOLDS_STAT),l=Lge(Lge([Ge.SUBSCRIBERS,Ge.FOLLOWERS_INC,Ge.CANCELED_SUBSCRIPTIONS,Ge.UP_SUBSCRIBERS,Ge.RESUBSCRIBES,Ge.DONATE_TARGET,Ge.POST_SALES],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(i?[Ge.HOLDS]:[]),!1),[Ge.GIFT_SALES,Ge.MESSAGES_SALE,Ge.ON_ACCOUNT],!1);return Gt.createElement("div",{className:cG()(n.container,"StatGraphs_content_efg43")},l.map((function(e){var t=o[e],r=a[e],i="".concat(e);return Gt.createElement(Pge,{className:n.item,key:i,type:e,amount:t,data:r})})))},kge=No(new Date(vo(To(0))).setUTCHours(23,59,59,999)),Dge=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Uge=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.desktop.components.StatisticsPeriodSelector.hooks");const Bge="StatisticsPeriodSelector_dropdownItem_jAjX8",xge="StatisticsPeriodSelector_dropdownItemActive_mzkZV";var Mge=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.desktop.components.StatisticsPeriodSelector"),Fge=function(e){var t,n,r,o,a=e.selectedPeriod,i=e.isReset,l=e.label,s=e.isActive,c=e.className,u=function(e){var t=e.isReset,n=e.defaultSelectedPeriod,r=e.loadBlogMetricsForPeriod,o=Dge((0,Gt.useState)(n),2),a=o[0],i=o[1],l=Dge((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=Dge((0,Gt.useState)(!1),2),d=u[0],f=u[1],m=Dge((0,Gt.useState)(null),2),p=m[0],h=m[1],v=Ok(a);(0,Gt.useEffect)((function(){t&&(i(n),h(null))}),[t]),(0,Gt.useEffect)((function(){void 0!==v&&_()}),[a,p]);var g=function(){if(!p)return"";var e=Dge(p,2),t=e[0],n=e[1];return Io(+t,+n)<1?(0,Qr.getParametrizedText)(Uge.forPeriod,{period:y(t)}):(0,Qr.getParametrizedText)(Uge.forPeriod,{period:"".concat(y(t),"-").concat(y(n))})},y=function(e){return go(No(e),"dd/MM/yy")},_=function(){switch(a){case bge.WEEK:var e=To(7);r({from:e,to:kge,limit:7});break;case bge.MONTH:r({from:To(30),to:kge,limit:30});break;case bge.CUSTOM:var t=Dge(p,2),n=t[0],o=t[1],i=function(e,t){return Io(+e,+t)+1}(n,o);r({from:No(n),to:No(o),limit:i})}},E=function(){c(!1),f(!1)},b=a===bge.WEEK,S=a===bge.MONTH,T=a===bge.CUSTOM;return{customPeriodDates:p,isWeekSelected:b,isMonthSelected:S,isCustomSelected:T,hasDropdown:s,hasDatePicker:d,onPeriodClick:function(){c(!0)},onDropdownHide:E,onDropdownItemClick:function(e){a!==e&&(i(e),h(null),E())},onDropdownFooterClick:function(){f(!0)},onCustomDatesAccept:function(e){i(bge.CUSTOM),h(e),f(!1),c(!1)},onDatePickerHide:function(){f(!1)},onResetPeriod:function(){i(bge.MONTH),h(null)},getCustomPeriodText:g,getSelectedPeriodText:function(){switch(a){case bge.WEEK:return Uge.forWeek;case bge.MONTH:return Uge.forMonth;case bge.CUSTOM:return g();default:return null}}}}({isReset:i,loadBlogMetricsForPeriod:e.loadBlogMetricsForPeriod,defaultSelectedPeriod:a}),d=u.customPeriodDates,f=u.isWeekSelected,m=u.isMonthSelected,p=u.isCustomSelected,h=u.hasDropdown,v=u.hasDatePicker,g=u.onPeriodClick,y=u.onDropdownHide,_=u.onDropdownItemClick,E=u.onDropdownFooterClick,b=u.onCustomDatesAccept,S=u.onDatePickerHide,T=u.onResetPeriod,I=u.getCustomPeriodText,N=u.getSelectedPeriodText;return Gt.createElement("div",{className:cG()(c,"StatisticsPeriodSelector_container_SV0Of")},Gt.createElement("span",{className:"StatisticsPeriodSelector_label_fBgu1"},l," "),Gt.createElement("span",{className:"StatisticsPeriodSelector_activePeriodContainer_GW0od"},Gt.createElement("span",{className:"StatisticsPeriodSelector_activePeriod_D2S5q",onClick:g},Gt.createElement("span",{className:cG()("StatisticsPeriodSelector_activePeriodText_GqBu4",(t={},t.StatisticsPeriodSelector_activePeriodTextWhite_XuyY_=s,t))},N()),Gt.createElement(pB,{glyph:hB.y9O,className:cG()("StatisticsPeriodSelector_iconArrow_rtgS0",(n={},n.StatisticsPeriodSelector_iconArrowWhite_AL5iL=s,n))})),h&&Gt.createElement(Dx,{onClickOutside:y,trigger:gx.CLICK},Gt.createElement("div",{className:"StatisticsPeriodSelector_dropdown_oq0IK"},!v&&Gt.createElement("div",{className:"StatisticsPeriodSelector_dropdownBaseContent_G4gk3"},Gt.createElement("ul",{className:"StatisticsPeriodSelector_dropdownList_qKhNL"},Gt.createElement("li",{className:cG()(Bge,(r={},r[xge]=f,r)),onClick:function(){return _(bge.WEEK)}},Mge.forWeek),Gt.createElement("li",{className:cG()(Bge,(o={},o[xge]=m,o)),onClick:function(){return _(bge.MONTH)}},Mge.forMonth)),Gt.createElement("div",{className:"StatisticsPeriodSelector_dropdownFooter_IX3X2",onClick:E},Gt.createElement(pB,{glyph:hB.jt6,className:"StatisticsPeriodSelector_calendar_U6845"}),p?Gt.createElement("span",{className:"StatisticsPeriodSelector_customPeriodText_gutEG"},I()):Mge.selectDates)),v&&Gt.createElement("div",{className:"StatisticsPeriodSelector_datePickerWrapper_N_Vl2"},Gt.createElement(wG,{minDate:wr,onAccept:b,onCancel:S,defaultValue:d,hasFooter:!0})))),!m&&Gt.createElement(pB,{glyph:hB.K7n,title:Mge.resetPeriod,onClick:T,className:"StatisticsPeriodSelector_resetButton_O2VZn"})))};const Gge="StatCharts_chartsItem_Nl0a7";var Hge=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.desktop.components.StatCharts"),Wge=function(e){var t=e.onPeriodChange,n=(0,Vt.I0)(),r=Gf().blogUrl,o=(0,Vt.v9)(yO),a=(0,Vt.v9)(_O),i=(0,Vt.v9)(EO),l=(0,Vt.v9)(bO),s=a.isFetched&&l.isFetched,c=_k().isAuthorized;return(0,Gt.useEffect)((function(){var e=To(30);o&&a.isFetched||n(My.action({blogUrl:r,from:e})),i&&l.isFetched||n(Yy.action({blogUrl:r,lastTime:kge,limit:30})),t({from:e})}),[]),(0,Gt.useEffect)((function(){c||n(wy())}),[c]),Gt.createElement(Gt.Fragment,null,Gt.createElement(Fge,{selectedPeriod:bge.MONTH,label:Hge.statistics,isActive:!1,loadBlogMetricsForPeriod:function(e){var o=e.from,a=e.to,i=e.limit;!function(e,t){var o=new Date(1e3*e).setUTCHours(23,59,59,999),a=new Date(1e3*t).setUTCHours(23,59,59,999);n(My.action({blogUrl:r,from:No(o),to:No(a)}))}(o,a),function(e,t){n(Yy.action({blogUrl:r,lastTime:e,limit:t}))}(a,i),t({from:o,to:a})}}),!s&&Gt.createElement(Eve,{classNames:{item:Gge}}),s&&Gt.createElement(Rge,{classNames:{item:Gge},metrics:o,charts:i}))},Vge=function(){return Vge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vge.apply(this,arguments)},jge=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},zge=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.desktop.components.StatEvents"),Yge=function(){var e=jge((0,Gt.useState)(tge()),2),t=e[0],n=e[1],r=jge((0,Gt.useState)(!1),2),o=r[0],a=r[1];return Gt.createElement("div",{className:"StatEvents_events_XLxxJ"},Gt.createElement(Fge,{className:"StatEvents_periodSelector_eiDQd",selectedPeriod:bge.MONTH,label:zge.events,isActive:!1,isReset:o,loadBlogMetricsForPeriod:function(e){var r=e.from,o=e.to;n(Vge(Vge({},t),{from:r,to:o,offset:tge().offset})),a(!1)}}),Gt.createElement(age,{filter:t,onFilterChange:function(e){n(Vge(Vge({},t),e)),a(!1)},onFilterReset:function(){n(tge()),a(!0)}}))},Kge=function(){return Kge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kge.apply(this,arguments)},qge=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogStatistics.desktop"),Xge=function(){var e=Gf().blogUrl,t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),n=t[0],r=t[1];return Gt.createElement("div",{className:"BlogStatistics_root_cCFxQ"},Gt.createElement("div",{className:"BlogStatistics_info_bzIl2"},Gt.createElement(Tge,{classNames:{item:"BlogStatistics_containerInfoItem_JVl_n",counter:"BlogStatistics_counter_ZH9An"}}),Gt.createElement(Wge,{onPeriodChange:function(e){r(e)}}),Gt.createElement("div",{className:"BlogStatistics_bottomButtons_5woPd"},Gt.createElement(ohe,{dataType:q.ALL,withBorder:!0,from:null==n?void 0:n.from,to:null==n?void 0:n.to}),Gt.createElement(gve,{blogUrl:e}),Gt.createElement(hve,{blogUrl:e})),Gt.createElement("div",{className:"BlogStatistics_timeInfo_BQIdZ"},qge.timeInfo)),Gt.createElement(Yge,null))};Xge.fetchActions=function(e){var t=e.params.blogUrl,n=tge();return[function(){return Uy.action(Kge({blogUrl:t},n))},function(){return Yy.action({blogUrl:t,lastTime:kge,limit:n.limit})},function(){return c_.action({blogUrl:t})},function(){return ih.action({blogUrl:t})},function(){return qp.action({blogUrl:t,showDeleted:!0})},function(){return My.action({blogUrl:t,from:ege()})}]};var Qge=(0,Qr.getTranslation)("@boosty/common/components.BlogSubscriptionLevelsSelect"),Jge=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.subscriptionLevels,o=e.subscriptionLevelsSelected,a=e.label,i=null==r?void 0:r.filter((function(e){return o.includes(e.id)}));return Gt.createElement(lF,{className:n.root,classNames:{option:"BlogSubscriptionLevelsSelect_optionItem_Docmf",optionCheckBoxLabel:"BlogSubscriptionLevelsSelect_optionCheckBoxLabel_QNh9r",options:"BlogSubscriptionLevelsSelect_optionsContainer_O5fsp",placeholder:cG()("BlogSubscriptionLevelsSelect_placeholder_MXBDa",n.placeholder)},label:a,isDisabled:!1,labelProp:"title",isMulti:!0,onSelect:function(t){return e.onSelect(t.map((function(e){return e.id})))},options:r,placeholder:Qge.placeholder,selected:i,multiSelectedOptionsShownLimit:1,valueProp:"id"})};const Zge={container:"BlogUsersSelect_container_Oczg8"};var $ge,eye=function(e){var t=e.className,n=e.label,r=e.onUserSelect;return Gt.createElement("div",{className:cG()(t,Zge.container)},n&&Gt.createElement(zx,{text:n}),Gt.createElement("div",{className:Zge.selector},Gt.createElement(kve,{onSelect:r})))},tye=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},nye=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},rye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogSubscribers.components.BlogSubscribersFilter"),oye={orderBy:Li.DESC,offset:0,sortBy:Oi.onTime,limit:11},aye=function(e){var t=[{label:rye.sortDateDesc,value:[Oi.onTime,Li.DESC]},{label:rye.sortDateAsc,value:[Oi.onTime,Li.ASC]},{label:rye.sortSumAsc,value:[Oi.payments,Li.ASC]},{label:rye.sortSumDesc,value:[Oi.payments,Li.DESC]}],n=[{label:rye.subscriptionStatus.all,value:void 0},{label:rye.subscriptionStatus.subscribed,value:!0},{label:rye.subscriptionStatus.unsubscribed,value:!1}],r=e.classNames,o=e.order,a=e.userIds,i=e.sortBy,l=e.selectedSubscriptionLevel,s=e.subscriptionStatus,c=e.subscriptionLevels,u=e.onChange,d=nr().isMobile;(0,Gt.useEffect)((function(){(null==a?void 0:a.length)||g([])}),[a]);var f,m,p,h=tye((0,Gt.useState)([]),2),v=h[0],g=h[1],y=function(e){return e.deleted?"".concat(e.name," (").concat(rye.deleted,")"):e.name},_=nye([],tye(c.map((function(e){return{id:e.id,title:y(e)}}))),!1),E=Gt.createElement("div",{className:"BlogSubscribersFilter_selectedUsers_Ow_bA"},Gt.createElement(Dve,{list:v,onUserDelete:function(e){var t=v.filter((function(t){return t.id!==e.id})),n=t.map((function(e){return e.id}));u({userIds:n}),g(t)}}));return Gt.createElement("div",{className:"BlogSubscribersFilter_container_MtWxe"},Gt.createElement("div",{className:cG()(null==r?void 0:r.container,"BlogSubscribersFilter_filterContainer_xZU1Z")},Gt.createElement(eye,{className:null==r?void 0:r.select,label:rye.subscriberLabel,onUserSelect:function(e){v.find((function(t){return t.id===e.id}))||(g(nye(nye([],tye(v),!1),[e],!1)),u({userIds:nye([e.id],tye(v.map((function(e){return e.id}))),!1),offset:oye.offset}))}}),d&&v.length>0&&E,Gt.createElement(Jge,{classNames:{root:cG()(null==r?void 0:r.select,"BlogSubscribersFilter_subscriptionLevels_Ya7Yx")},label:rye.subscriptionLevelLabel,subscriptionLevels:_,subscriptionLevelsSelected:l||[],onSelect:function(e){u({levelIds:e,offset:oye.offset})}}),Gt.createElement(lF,{className:cG()(null==r?void 0:r.select,"BlogSubscribersFilter_subscriptionStatus_gDodp"),onSelect:function(e){u({isActive:e.value,offset:oye.offset})},options:n,selected:(p=s,n.find((function(e){var t=e.value;return p===t}))),label:rye.subscriptionStatus.label}),Gt.createElement(lF,{className:cG()(null==r?void 0:r.select,"BlogSubscribersFilter_sortSelect_C4tV2"),onSelect:function(e){var t=tye(e.value,2),n=t[0],r=t[1];u({sortBy:n,orderBy:r})},options:t,selected:(f=i,m=o,t.find((function(e){var t=tye(e.value,2),n=t[0],r=t[1];return f===n&&m===r}))),label:rye.selectLabelSort})),!d&&v.length>0&&E)},iye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogSubscribers.components.BlogSubscribersHeader"),lye=function(e){var t=e.children,n=nr().isMobile,r=function(){return Gt.createElement(ohe,{dataType:q.SUBSCRIPTIONS,classNames:{container:"BlogSubscribersHeader_exportContainer_jQD96",title:"BlogSubscribersHeader_exportTitle__znJg"}})};return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlogSubscribersHeader_header_AUvt9"},Gt.createElement("div",{className:"BlogSubscribersHeader_titleContainer_Uuyq4"},Gt.createElement(ehe,null),Gt.createElement("div",{className:"BlogSubscribersHeader_title_YbsHJ"},iye.title)),!n&&r()),t,n&&r())},sye=function(){return sye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sye.apply(this,arguments)},cye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogSubscribers"),uye=function(e){var t=e.showAlert,n=e.classNames,r=e.Component,o=e.RowsComponent,a=e.FooterComponent,i=Gf().blogUrl,l=(0,Vt.I0)(),s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(oye),2),c=s[0],u=s[1],d=(0,Vt.v9)(AO),f=(0,Vt.v9)(LO),m=(0,Vt.v9)(PO),p=(0,Vt.v9)(EL),h=(0,Vt.v9)(NL),v=Ok(c)||oye,g=h.isFetched&&f.isFetched,y=!function(e){var t,n,r=null===(t=e.userIds)||void 0===t?void 0:t.length,o=null===(n=e.levelIds)||void 0===n?void 0:n.length,a=void 0!==(null==e?void 0:e.isActive);return!r&&!o&&!a}(c),_=function(e){u(sye(sye({},c),{offset:c.limit*e}))},E=function(e){u(sye(sye({},c),e))},b=function(){return u(oye)};(0,Gt.useEffect)((function(){return p.length&&h.isFetched||l(qp.action({blogUrl:i,showDeleted:!0})),d.length&&f.isFetched||l(t_.action(sye({blogUrl:i},oye))),function(){l(a_())}}),[]),(0,Gt.useEffect)((function(){JSON.stringify(v)!==JSON.stringify(c)&&l(t_.action(sye({blogUrl:i},c)))}),[c]);var S=function(e){return Gt.createElement(Ype,{classNamePicture:"BlogSubscribers_emptyPicture_BROho",title:e?cye.title.whenAppliedFilter:cye.title.whenDefaultFilter,content:{defaultFilter:{text:cye.content.create},changedFilter:{buttonText:cye.content.resetFilter}},isChangedFilter:e,onFiltersReset:b})};return Gt.createElement(r,{blogUrl:i,onPageChange:_,onFilterChange:E,onFilterReset:b,subscribers:{list:d,total:m}},g&&!y&&!(null==d?void 0:d.length)&&S(!1),((null==d?void 0:d.length)>0||y)&&Gt.createElement(lye,null,h.isFetched&&Gt.createElement(aye,{classNames:{container:null==n?void 0:n.filterContainer,select:null==n?void 0:n.filterSelect},subscriptionLevels:p,selectedSubscriptionLevel:c.levelIds,userIds:c.userIds,order:c.orderBy,subscriptionStatus:c.isActive,sortBy:c.sortBy,onChange:E})),!g&&Gt.createElement(uM,null),g&&Gt.createElement(Gt.Fragment,null,!d.length&&y&&S(!0),d.length>0&&Gt.createElement(Gt.Fragment,null,Gt.createElement(o,{rows:d,showAlert:t}),Gt.createElement(a,{onPageChange:_,forcePage:Number(c.offset)/c.limit,pagesCount:Math.ceil(m/c.limit)}))))};uye.fetchActions=function(e){var t=e.params.blogUrl;return[function(){return qp.action({blogUrl:t,showDeleted:!0})},function(){return t_.action(sye({blogUrl:t},oye))}]},function(e){e.FOLLOWER="follower"}($ge||($ge={}));var dye=function(e){var t=e.onCopy,n=e.email;return Gt.createElement(c$,{text:n,onCopy:t},Gt.createElement("div",{className:"BlogSubscribersCopyEmail_container_rJT5K"},Gt.createElement(pB,{className:"BlogSubscribersCopyEmail_icon_HZZzJ",glyph:hB.Lky}),n))};const fye={header:"BlogSubscribersRows_header_TylN9",row:"BlogSubscribersRows_row_zsM_m",columnWithHint:"BlogSubscribersRows_columnWithHint_aqX0Q",price:"BlogSubscribersRows_price_Jey7t",nextPayPrice:"BlogSubscribersRows_nextPayPrice_u35Ha",iconStatus:"BlogSubscribersRows_iconStatus_bIi_T",column:"BlogSubscribersRows_column_xcbz1",hint:"BlogSubscribersRows_hint_s1MtO",iconHint:"BlogSubscribersRows_iconHint_AEVuL",tooltipContent:"BlogSubscribersRows_tooltipContent_S7vqD",icon:"BlogSubscribersRows_icon_afkrz",email:"BlogSubscribersRows_email_ogi9j",dateSubscribe:"BlogSubscribersRows_dateSubscribe_eiybV",promoInfo:"BlogSubscribersRows_promoInfo_Qz2Ta",fadeIn:"BlogSubscribersRows_fadeIn_SkHND"};var mye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogSubscribers.desktop.components.BlogSubscribersRows"),pye=function(e){var t=e.showAlert,n=e.rows,r=function(e){return e?go(e,"dd/MM/yyyy"):""},o=nr().currencies.default,a=function(){t({type:p.SUCCESS,text:mye.copyEmailMessage})};return Gt.createElement("div",{className:fye.table},Gt.createElement("div",{className:fye.header},Gt.createElement("div",null,mye.name),Gt.createElement("div",null,mye.subscriptionLevel),Gt.createElement("div",{className:fye.column},mye.payment,Gt.createElement(gB,{classNames:{tooltip:fye.hint,icon:fye.iconHint}},mye.hintPayment)),Gt.createElement("div",{className:fye.column},mye.income,Gt.createElement(gB,{classNames:{tooltip:fye.hint,icon:fye.iconHint}},mye.hintIncome)),Gt.createElement("div",null,mye.dateSubscribe),Gt.createElement("div",null,mye.dateUnsubscribe),Gt.createElement("div",null,mye.email)),Gt.createElement("div",null,n.map((function(e,t){var n,i,l,s=e.name,c=e.email,u=e.offTime,d=e.onTime,f=e.payments,m=e.level,p=e.nextPayTime,h=e.price,v=e.subscribed,g=e.promo,y=r(d),_=u?r(u):"-",E=r(p),b=v?hB.unG:hB.z4t,S=m.name.toLowerCase()===$ge.FOLLOWER?mye.follower:m.name,T=c?Gt.createElement(dye,{email:c,onCopy:a}):"-",I=Gt.createElement("span",{className:cG()(fye.price,(n={},n[fye.nextPayPrice]=Boolean(h)&&!u,n))},Vr({amount:h,currency:o,useGrouping:!0}));return Gt.createElement("div",{className:fye.row,key:"row".concat(t)},Gt.createElement("div",null,s),Gt.createElement("div",null,S," ",m.deleted?"(".concat(mye.deleted,")"):""),Gt.createElement("div",{className:fye.columnWithHint},!u&&h>0&&Gt.createElement(Dx,{classNames:{content:fye.tooltipContent},content:(0,Qr.getParametrizedText)(mye.nextPayTime,{nextPayTime:E})},I),(u||0===h)&&I),Gt.createElement("div",null,Vr({amount:f,currency:o,useGrouping:!0})),Gt.createElement("div",{className:fye.dateSubscribe},Gt.createElement(pB,{glyph:b,className:fye.iconStatus}),y,g&&Gt.createElement(qve,{isActive:!1,discount:null===(i=null==g?void 0:g.discount)||void 0===i?void 0:i.percent,trialDays:null===(l=null==g?void 0:g.trial)||void 0===l?void 0:l.days,className:fye.promoInfo})),Gt.createElement("div",null,_),Gt.createElement("div",{className:fye.email},T))}))))},hye=function(){var e=jG().showAlert;return Gt.createElement(uye,{classNames:{filterContainer:"BlogSubscribers_filterContainer_yyRpR"},showAlert:e,RowsComponent:pye,Component:function(e){var t=e.children;return Gt.createElement("div",{className:"BlogSubscribers_container_RsjBl"},t)},FooterComponent:uhe})};hye.fetchActions=function(e){return function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(uye.fetchActions(e)),!1)};var vye=(0,Qr.getTranslation)("@boosty/common/components.BlogStats.BroadcastMessageStats.BroadcastMessageStatsEmpty"),gye=function(e){var t=e.className;return Gt.createElement("div",{className:cG()("BroadcastMessageStatsEmpty_root_au0cm",t)},Gt.createElement("div",{className:"BroadcastMessageStatsEmpty_image_RakSP"}),Gt.createElement("div",{className:"BroadcastMessageStatsEmpty_title_XAVhI"},vye.title),Gt.createElement("div",{className:"BroadcastMessageStatsEmpty_description_Cwpc_"},vye.description))},yye=function(){return yye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yye.apply(this,arguments)},_ye=(0,Qr.getTranslation)("@boosty/common/hooks.Statistics.useBroadcastMessageStats");const Eye={attachments:"MediaAttachmentsCount_attachments_tVrLW",emptyLabel:"MediaAttachmentsCount_emptyLabel_jSk04",icon:"MediaAttachmentsCount_icon_ernwk",audioCount:"MediaAttachmentsCount_audioCount_khLFk",filesCount:"MediaAttachmentsCount_filesCount_xNiLQ",fadeIn:"MediaAttachmentsCount_fadeIn_Su0CV"};var bye=(0,Qr.getTranslation)("@boosty/common/components.MediaAttachmentsCount"),Sye=function(e){var t=e.video,n=void 0===t?0:t,r=e.audio,o=void 0===r?0:r,a=e.images,i=void 0===a?0:a,l=e.files,s=void 0===l?0:l,c=e.className;return Gt.createElement("div",{className:cG()(Eye.attachments,c)},!n&&!s&&!i&&!o&&Gt.createElement("div",{className:Eye.emptyLabel},bye.emptyAttachments),n>0&&Gt.createElement("div",{className:Eye.videoCount},Gt.createElement(pB,{glyph:hB.zM1,className:Eye.icon}),Gt.createElement("span",{className:Eye.count},n)),s>0&&Gt.createElement("div",{className:Eye.filesCount},Gt.createElement(pB,{glyph:hB.fNk,className:Eye.icon}),Gt.createElement("span",{className:Eye.count},s)),i>0&&Gt.createElement("div",{className:Eye.imagesCount},Gt.createElement(pB,{glyph:hB.NV3,className:Eye.icon}),Gt.createElement("span",{className:Eye.count},i)),o>0&&Gt.createElement("div",{className:Eye.audioCount},Gt.createElement(pB,{glyph:hB.PWQ,className:Eye.icon}),Gt.createElement("span",{className:Eye.count},o)))};const Tye={attachments:"getBroadcastMessageItemViewData_attachments_flP_t",emptyLabel:"getBroadcastMessageItemViewData_emptyLabel_pG0G5",icon:"getBroadcastMessageItemViewData_icon_kuMTE",audioCount:"getBroadcastMessageItemViewData_audioCount_Mqgt5",filesCount:"getBroadcastMessageItemViewData_filesCount_Wxllj",message:"getBroadcastMessageItemViewData_message_YFiaC",textButton:"getBroadcastMessageItemViewData_textButton_EnvLo",fadeIn:"getBroadcastMessageItemViewData_fadeIn_iQqlB"};var Iye=(0,Qr.getTranslation)("@boosty/common/components.BlogStats.BroadcastMessageStats.utils.getBroadcastMessageItemViewData");const Nye={header:"BlogBroadcastMessageStatsTable_header_xVHsh",attachments:"BlogBroadcastMessageStatsTable_attachments_mLEGD",row:"BlogBroadcastMessageStatsTable_row_T6eEf",price:"BlogBroadcastMessageStatsTable_price_Vi0nd",iconStatus:"BlogBroadcastMessageStatsTable_iconStatus_HKAXs",column:"BlogBroadcastMessageStatsTable_column_STM9d",icon:"BlogBroadcastMessageStatsTable_icon_y5iJ6",wrappedText:"BlogBroadcastMessageStatsTable_wrappedText_f5oUb",fadeIn:"BlogBroadcastMessageStatsTable_fadeIn_lcp7D"};var Cye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogBroadcastMessageStats.desktop.components.BlogBroadcastMessageStatsTable"),wye=(0,Gt.memo)((function(e){var t=e.data;return Gt.createElement("div",{className:Nye.table},Gt.createElement("div",{className:Nye.header},Gt.createElement("div",null,Cye.time),Gt.createElement("div",null,Cye.message),Gt.createElement("div",null,Cye.attachments),Gt.createElement("div",null,Cye.price),Gt.createElement("div",null,Cye.sendCount),Gt.createElement("div",null,Cye.viewsCount),Gt.createElement("div",null,Cye.sellsCount),Gt.createElement("div",null,Cye.income)),Gt.createElement("div",null,t.map((function(e){var t=function(e){var t=e.data,n=e.createdAt,r=e.price,o=e.salesCount,a=e.viewsCount,i=e.sentCount,l=e.totalAmount,s=function(e){return{audio:e.filter((function(e){return e.type===pe.AUDIO||e.type===pe.AUDIO_FILE})).length,video:e.filter((function(e){return e.type===pe.VIDEO||e.type===pe.VIDEO_FILE})).length,files:e.filter((function(e){return e.type===pe.FILE})).length,images:e.filter((function(e){return e.type===pe.IMAGE})).length}}(t),c=nr().currencies.default;return{Income:function(){return Gt.createElement(Gt.Fragment,null,Vr({amount:l,currency:c,useGrouping:!0}))},Attachments:function(){return Gt.createElement(Sye,{files:s.files,video:s.video,images:s.images,audio:s.audio})},Message:function(){var e=function(e){return e.filter((function(e){return e.type===pe.LINK||e.type===pe.TEXT})).reduce((function(e,t){return t.type===pe.TEXT&&t.modificator===de.BLOCK_END&&(e+=" "),e+$o(t)}),"").trim()}(t),n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),r=n[0],o=n[1],a=e.length>165,i=r?e:e.slice(0,165);return Gt.createElement("div",{className:cG()(Tye.message,a?r?Tye.opened:Tye.closed:null)},i?i+(a&&!r?"...":""):Gt.createElement("span",{className:Tye.emptyLabel},Iye.emptyText),a&&Gt.createElement(VB,{className:Tye.textButton,onClick:function(){return o(!r)}},r?Iye.hide:Iye.show))},CreatedDate:function(){return Gt.createElement(Gt.Fragment,null,(e=n,Boolean(e)?go(e,"dd/MM/yyyy/HH/mm"):""));var e},Price:function(){return Gt.createElement(Gt.Fragment,null,Vr({amount:r,currency:c,useGrouping:!0}))},SentCount:function(){return Gt.createElement(Gt.Fragment,null,i)},ViewsCount:function(){return Gt.createElement(Gt.Fragment,null,a)},SalesCount:function(){return Gt.createElement(Gt.Fragment,null,o)}}}(e),n=t.Income,r=t.Attachments,o=t.Message,a=t.CreatedDate,i=t.Price,l=t.SentCount,s=t.ViewsCount,c=t.SalesCount;return Gt.createElement("div",{className:Nye.row,key:e.id},Gt.createElement("div",null,Gt.createElement(a,null)),Gt.createElement("div",{className:Nye.message},Gt.createElement(o,null)),Gt.createElement("div",{className:Nye.attachments},Gt.createElement(r,null)),Gt.createElement("div",null,Gt.createElement(i,null)),Gt.createElement("div",null,Gt.createElement(l,null)),Gt.createElement("div",null,Gt.createElement(s,null)),Gt.createElement("div",null,Gt.createElement(c,null)),Gt.createElement("div",null,Gt.createElement(n,null)))}))))}));wye.displayName="BlogBroadcastMessageStatsTable";var Oye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogBroadcastMessageStats.desktop.components.Header"),Aye=function(){return Gt.createElement("div",{className:"Header_header_qLOWz"},Gt.createElement("div",{className:"Header_titleContainer_kHnwE"},Gt.createElement(ehe,null),Gt.createElement("div",{className:"Header_title_m622t"},Oye.title)))};const Pye={container:"BlogUnsubscribesFilter_container_yqP0N",filterContainer:"BlogUnsubscribesFilter_filterContainer_EdoBV",placeholderTest:"BlogUnsubscribesFilter_placeholderTest_OCEH5",selectedUsers:"BlogUnsubscribesFilter_selectedUsers_y7MZn",subscriptionLevels:"BlogUnsubscribesFilter_subscriptionLevels_pxbvT",sortSelect:"BlogUnsubscribesFilter_sortSelect_jHTQU",select:"BlogUnsubscribesFilter_select_IQLMo",selectMargin:"BlogUnsubscribesFilter_selectMargin_cyzzt"};var Lye=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Rye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogUnsubscribes.components.BlogUnsubscribesFilter"),kye={orderBy:Li.DESC,offset:0,sortBy:Ri.onTime,limit:10,selectedReasons:[],period:ki.all,selectedLevels:[]},Dye=[{getLabel:function(){return Rye.sortDateDesc},value:[Ri.onTime,Li.DESC]},{getLabel:function(){return Rye.sortDateAsc},value:[Ri.onTime,Li.ASC]},{getLabel:function(){return Rye.sortSumAsc},value:[Ri.payments,Li.ASC]},{getLabel:function(){return Rye.sortSumDesc},value:[Ri.payments,Li.DESC]}],Uye=[{getLabel:function(){return Rye.period.all},value:ki.all},{getLabel:function(){return Rye.period.day},value:ki.day},{getLabel:function(){return Rye.period.month},value:ki.month},{getLabel:function(){return Rye.period.year},value:ki.year}],Bye=function(e){var t,n,r,o=e.classNames,a=e.period,i=e.order,l=e.reasons,s=e.sortBy,c=e.selectedReasons,u=e.onChange,d=e.levels,f=e.selectedLevels,m=l.filter((function(e){return-1!==c.indexOf(e.value)})),p=d.filter((function(e){return-1!==f.indexOf(e.value)})),h=function(){return Uye.map((function(e){return{value:e.value,label:(0,e.getLabel)()}}))},v=function(){return Dye.map((function(e){return{value:e.value,label:(0,e.getLabel)()}}))};return Gt.createElement("div",{className:Pye.container},Gt.createElement("div",{className:cG()(null==o?void 0:o.container,Pye.filterContainer)},Gt.createElement(lF,{className:cG()(null==o?void 0:o.select,Pye.select),classNames:{option:Pye.optionItem,optionCheckBoxLabel:Pye.optionCheckBoxLabel,options:Pye.optionsContainer,placeholder:Pye.placeholder},label:Rye.unsubcribeReason,labelProp:"label",isMulti:!0,onSelect:function(e){u({selectedReasons:e.map((function(e){return e.value}))})},options:l,selected:m,selectionLabel:1===m.length?m[0].label:null,valueProp:"value",placeholder:Rye.all}),Gt.createElement(lF,{className:cG()(null==o?void 0:o.select,Pye.select),classNames:{option:Pye.optionItem,optionCheckBoxLabel:Pye.optionCheckBoxLabel,options:Pye.optionsContainer,placeholder:Pye.placeholder},label:Rye.subscriptionLevelLabel,labelProp:"label",isMulti:!0,onSelect:function(e){u({selectedLevels:e.map((function(e){return e.value}))})},options:d,selected:p,selectionLabel:1===p.length?p[0].label:null,valueProp:"value",placeholder:Rye.all}),Gt.createElement(lF,{className:cG()(null==o?void 0:o.select,Pye.select,Pye.selectMargin),onSelect:function(e){u({period:e.value})},options:h(),selected:(r=a,h().find((function(e){return e.value===r}))),label:Rye.period.label}),Gt.createElement(lF,{className:cG()(null==o?void 0:o.select,Pye.sortSelect),onSelect:function(e){var t=Lye(e.value,2),n=t[0],r=t[1];u({sortBy:n,orderBy:r})},options:v(),selected:(t=s,n=i,v().find((function(e){var r=Lye(e.value,2),o=r[0],a=r[1];return t===o&&n===a}))),label:Rye.selectLabelSort})))},xye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogUnsubscribes.components.BlogUnsubscribesHeader"),Mye=function(e){var t=e.children,n=nr().isMobile;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlogUnsubscribesHeader_header_sX1kO"},Gt.createElement("div",{className:"BlogUnsubscribesHeader_titleContainer_xzUFr"},Gt.createElement(ehe,null),Gt.createElement("div",{className:"BlogUnsubscribesHeader_title_aqBBI"},xye.title)),!n&&Gt.createElement(ohe,{dataType:q.UNSUBSCRIBE_REASONS,classNames:{container:"BlogUnsubscribesHeader_exportContainer_TrCii",title:"BlogUnsubscribesHeader_exportTitle_S7oBE"}})),t)},Fye=function(){return Fye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fye.apply(this,arguments)},Gye=function(e){var t=e.showAlert,n=e.classNames,r=e.Component,o=e.RowsComponent,a=e.FooterComponent,i=Gf().blogUrl,l=(0,Vt.I0)(),s=(0,Vt.v9)(BL),c=s.data,u=s.meta.networkStatus,d=(0,Vt.v9)(xL),f=d.data,m=d.meta.networkStatus,p=(0,Vt.v9)(EL),h=(0,Vt.v9)(NL),v=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(kye),2),g=v[0],y=v[1],_=(null==c?void 0:c.data.poll.options)||[],E=_.reduce((function(e,t){var n;return Fye(Fye({},e),((n={})[t.id]=t.text,n))}),{})||{},b=(null==p?void 0:p.reduce((function(e,t){var n;return Fye(Fye({},e),((n={})[t.id]=t.name,n))}),{}))||{},S=f?f.data.unsubscribeAnswers:[],T=f?f.extra.total:0,I=!m.isFetched,N=!u.isFetched||!h.isFetched,C=_.map((function(e){return{label:e.text,value:e.id}}))||[],w=p&&p.filter((function(e){return e.price>0})).map((function(e){return{label:e.name,value:e.id}}))||[],O=function(e){var t=Fye(Fye({},g),{offset:g.limit*e});y(t),P(t)},A=function(e){var t=Fye(Fye(Fye({},g),e),{offset:kye.offset});y(t),P(t)},P=function(e){var t=e.limit,n=e.offset,r=e.sortBy,o=e.orderBy,a=e.selectedLevels,s=e.selectedReasons,c=e.period,u={blogUrl:i,limit:t,offset:n,sortBy:r,orderBy:o};if(s.length&&(u.answers=s),a.length&&(u.levelIds=a),c){var d=Math.round(Date.now()/1e3);u.from=d-24*c*3600,u.to=d}l(Qb.action(u))};return(0,Gt.useEffect)((function(){l(Zb),l(Xb.action()),p&&h.isFetched||l(qp.action({blogUrl:i,showDeleted:!0})),P(g)}),[]),Gt.createElement(r,{blogUrl:i,onPageChange:O,onFilterChange:A,onFilterReset:function(){return y(kye)},unsubscribes:S,total:T},Gt.createElement(Mye,null,!N&&Gt.createElement(Bye,{classNames:{container:null==n?void 0:n.filterContainer,select:null==n?void 0:n.filterSelect},period:g.period,order:g.orderBy,sortBy:g.sortBy,selectedReasons:g.selectedReasons,onChange:A,reasons:C,selectedLevels:g.selectedLevels,levels:w})),I&&Gt.createElement(uM,null),!I&&Gt.createElement(Gt.Fragment,null,Gt.createElement(o,{rows:S,showAlert:t,reasons:E,levels:b}),Gt.createElement(a,{onPageChange:O,forcePage:Number(g.offset)/g.limit,pagesCount:Math.ceil(T/g.limit)})))};const Hye={header:"BlogUnsubscribesRows_header_R4bLQ",row:"BlogUnsubscribesRows_row_OuIhw",columnWithHint:"BlogUnsubscribesRows_columnWithHint_WJil5",price:"BlogUnsubscribesRows_price_VeLRM",nextPayPrice:"BlogUnsubscribesRows_nextPayPrice_ofR6u",iconStatus:"BlogUnsubscribesRows_iconStatus_qLSsI",column:"BlogUnsubscribesRows_column_Ko3ug",hint:"BlogUnsubscribesRows_hint_x0QPW",iconHint:"BlogUnsubscribesRows_iconHint_lqT1b",tooltipContent:"BlogUnsubscribesRows_tooltipContent_FhNiK",icon:"BlogUnsubscribesRows_icon_t4eRd",email:"BlogUnsubscribesRows_email_bTFLc",dateSubscribe:"BlogUnsubscribesRows_dateSubscribe_CSWc9",wrappedText:"BlogUnsubscribesRows_wrappedText_VfLJd",answers:"BlogUnsubscribesRows_answers_YhTh3",fadeIn:"BlogUnsubscribesRows_fadeIn_SKX2r"};var Wye,Vye,jye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogUnsubscribes.desktop.components.BlogUnsubscribesRows"),zye=function(e){return Boolean(e)?go(e,"dd/MM/yyyy"):""},Yye=function(e){var t=e.showAlert,n=e.rows,r=e.reasons,o=e.levels,a=function(){t({type:p.SUCCESS,text:jye.copyEmailMessage})};return Gt.createElement("div",{className:Hye.table},Gt.createElement("div",{className:Hye.header},Gt.createElement("div",null,jye.level),Gt.createElement("div",null,jye.reason),Gt.createElement("div",{className:Hye.column},jye.payment,Gt.createElement(gB,{classNames:{tooltip:Hye.hint,icon:Hye.iconHint}},jye.hintPayment)),Gt.createElement("div",{className:Hye.column},jye.income,Gt.createElement(gB,{classNames:{tooltip:Hye.hint,icon:Hye.iconHint}},jye.hintIncome)),Gt.createElement("div",null,jye.dateSubscribe),Gt.createElement("div",null,jye.dateUnsubscribe),Gt.createElement("div",null,jye.email)),Gt.createElement("div",null,n.map((function(e,t){var n=e.other,i=e.answerIds,l=e.levelId,s=e.onTime,c=e.isAnonimous,u=e.user,d=e.offTime,f=e.price,m=e.payments,p=nr().currencies.default,h=zye(s),v=zye(d),g=o[l],y=i.map((function(e){return r[e]})).concat([n]).filter((function(e){return Boolean(e)})).map((function(e,t){return Gt.createElement("span",{key:t,className:Hye.wrappedText},e)}));return Gt.createElement("div",{className:Hye.row,key:"row".concat(t)},Gt.createElement("div",null,g),Gt.createElement("div",{className:Hye.answers},y),Gt.createElement("div",null,Vr({amount:f,currency:p,useGrouping:!0})),Gt.createElement("div",null,Vr({amount:m,currency:p,useGrouping:!0})),Gt.createElement("div",null,h),Gt.createElement("div",null,v),!c&&(null==u?void 0:u.email)&&Gt.createElement("div",{className:Hye.email},Gt.createElement(dye,{email:u.email,onCopy:a})),(c||!(null==u?void 0:u.email))&&Gt.createElement("div",null,jye.anonymous))}))))},Kye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.components.PayoutCommission"),qye=function(e){var t=e.isSimplified,n=void 0!==t&&t,r=e.systemOption,o=r.commissions,a=r.currency,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(o,1)[0],l=o.length>1,s=o.length-1,c=function(e){var t=e.currency,n=e.fixed,r=e.percent;return Gt.createElement(Gt.Fragment,null,r>0||!n?"".concat(r,"%"):null,r&&n?" + ":null,n?Gt.createElement(fM,{currency:t||a,sum:n}):null)};return n?Gt.createElement(Gt.Fragment,null,"".concat(Kye.simplified.commission," "),l&&"".concat(Kye.simplified.from," "),c(i)):l?Gt.createElement(Gt.Fragment,null,o.map((function(e,t){var n=0===t,r=t>0&&t<s,i=t===s,l=o[t+1];return Gt.createElement("div",{key:e.from},c(e)," ",Kye.text.sum," ",(r||i)&&Gt.createElement(Gt.Fragment,null,Kye.text.from," ",Gt.createElement(fM,{sum:e.from+.01,currency:a})),r&&" ",(n||r)&&Gt.createElement(Gt.Fragment,null,Kye.text.to," ",Gt.createElement(fM,{sum:l.from,currency:a})))}))):c(i)},Xye=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.components.PayoutLimits"),Qye=["maxPerTransaction","maxOnMonthPerPerson"],Jye=function(e){var t=e.currency,n=e.limits;return Gt.createElement(Gt.Fragment,null,n.map((function(e){var n=e.money,r=e.currency,o=e.count,a=e.type,i=r||t;return Gt.createElement("div",{key:[o,a].join("_")},Xye.limit.to," ",Gt.createElement(fM,{currency:i,sum:n})," ",o>0&&(0,Qr.getParametrizedText)(Xye.limit.transactions,{count:o,transaction:qr([Xye.transactions.one,Xye.transactions.many,Xye.transactions.many],o),period:Xye.type[a]})," ",Qye.includes(a)?Xye.type[a]:(0,Qr.getParametrizedText)(Xye.limit.span,{period:Xye.type[a]}))})))},Zye=((Wye={})[Ie.VISA]="Visa",Wye[Ie.MASTERCARD]="MasterCard",Wye),$ye=function(e){var t=e.limits,n=e.renderLimits;return Gt.createElement(Gt.Fragment,null,Object.keys(t).map((function(e){var r,o;return t[e].length>0&&Gt.createElement("div",{key:e,className:cG()((r={},r.PayoutLimitSystems_system_YlXOb=e!==Ie.ALL,r))},e!==Ie.ALL&&Gt.createElement("div",{className:"PayoutLimitSystems_systemName_ETDzO"},Zye[e]),Gt.createElement("div",{className:cG()((o={},o.PayoutLimitSystems_systemLimits_ZbO_E=e!==Ie.ALL,o))},n(t[e])))})))},e_e=function(e,t){return e.filter((function(e){return t.includes(e.type)})).reduce((function(e,t){var n=t.system||"all";return e[n]||(e[n]=[]),e[n].push(t),e}),{all:[]})},t_e=function(e){var t=e.title,n=e.children;return Gt.createElement("div",{className:"PayoutExtraInfo_block_WMjvm"},Gt.createElement("div",{className:"PayoutExtraInfo_title_n_uFB"},t),Gt.createElement("div",{className:"PayoutExtraInfo_text_FT760"},n))},n_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.components.PayoutExtraInfo"),r_e=function(e){var t=e.children,n=e.systemOption,r=e.systemOption,o=r.currency,a=r.limits,i=e_e(a,["transactionMin"]),l=e_e(a,["transactionMax"]),s=e_e(a,["day","week","month","maxPerTransaction","maxOnMonthPerPerson"]),c=function(e){return e.some((function(e){return!["transactionMax","transactionMin"].includes(e.type)}))}(a),u=function(e){return e.map((function(e,t){var n=e.money,r=e.currency;return Gt.createElement(fM,{key:t,sum:n,currency:r||o})}))},d=Gt.createElement($ye,{limits:i,renderLimits:u}),f=Gt.createElement($ye,{limits:l,renderLimits:u});return Gt.createElement(Gt.Fragment,null,Gt.createElement(t_e,{title:n_e.minAmount},d),Gt.createElement(t_e,{title:n_e.maxAmount},f),Gt.createElement(t_e,{title:n_e.commission},Gt.createElement(qye,{systemOption:n})),c&&Gt.createElement(t_e,{title:n_e.limits},Gt.createElement($ye,{limits:s,renderLimits:function(e){return Gt.createElement(Jye,{currency:o,limits:e})}})),Gt.createElement(t_e,{title:n_e.terms},t))},o_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.components.PayoutSystemsListItem"),a_e=((Vye={})[Qt.BANKCARD]="PayoutSystemsListItem_bankcard_R5lRd",Vye[Qt.PAYPAL]="PayoutSystemsListItem_paypal_fjqIH",Vye[Qt.QIWI]="PayoutSystemsListItem_qiwi_yNM2u",Vye[Qt.VKPAY]="PayoutSystemsListItem_vkpay_FwgJK",Vye[Qt.YANDEXMONEY]="PayoutSystemsListItem_yandex_Eofiy",Vye),i_e=function(e){var t,n=e.isDisabled,r=e.isSelected,o=e.system,a=e.systemOption,i=e.onSelectSystem;return Gt.createElement("div",{className:cG()("PayoutSystemsListItem_item_aI7iO",(t={},t.PayoutSystemsListItem_selected_MHJNl=r,t.PayoutSystemsListItem_disabled_Psdev=n,t)),onClick:function(){n||r||i(o)}},Gt.createElement("div",{className:cG()("PayoutSystemsListItem_systemIcon_vOjqs",a_e[o.id])}),Gt.createElement("div",{className:"PayoutSystemsListItem_systemNameBlock_vke9b"},Gt.createElement("span",{className:"PayoutSystemsListItem_systemNameBlockTitle_lEgKh"},o_e.title[o.id]),Gt.createElement("div",{className:"PayoutSystemsListItem_commission_ZSmKY"},Gt.createElement(qye,{systemOption:a,isSimplified:!0}))),r&&Gt.createElement(pB,{glyph:hB.cng,className:"PayoutSystemsListItem_activeIcon_qJQex"}))},l_e=function(e){var t=e.activeSystem,n=e.currency,r=e.isEditable,o=e.systems,a=e.selectedSystem,i=e.onSelectSystem;return Gt.createElement("div",null,Gt.createElement("div",null,o.map((function(e){var o=Boolean(e&&t&&e.id===t.id),l=Boolean(e&&a&&e.id===a.id),s=e.options.find((function(e){return e.currency===n}))||e.options[0];return Gt.createElement(i_e,{key:e.id,system:e,systemOption:s,isActive:o,isSelected:l,onSelectSystem:i,isDisabled:!r})}))))},s_e=function(){return s_e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s_e.apply(this,arguments)},c_e=function(){return nr().payoutSystems.map((function(e){return s_e(s_e({},e),{options:e.options.filter((function(e){return!e.isDisabled}))})})).filter((function(e){return!e.isDisabled&&e.options.length>0}))},u_e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},d_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.components.PayoutExtraInfo.components.PayoutExtraInfoTermsHint"),f_e=function(e){var t=e.system.id;return Gt.createElement(Gt.Fragment,null,d_e.text.common,t===Qt.BANKCARD&&" ".concat(d_e.text.bankCard),Gt.createElement("br",null),Gt.createElement("br",null),d_e.text.issues," ",Gt.createElement(yj,null,d_e.text.contactUs),".")},m_e=function(e){var t=e.system;return Gt.createElement(f_e,{system:t})};const p_e="PayoutForm_formWrapper_RDz0T",h_e="PayoutForm_title_lsuF5",v_e="PayoutForm_input_DBHTI",g_e="PayoutForm_invalid_koSP5",y_e="PayoutForm_dmrIFrame_ugB5e";var __e,E_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.components.PayoutForm.components.PayoutExisting"),b_e=function(e){var t=e.payout,n=t.systemId,r=t.destination,o=e.startEdit;return Gt.createElement("div",null,Gt.createElement("div",{className:p_e},Gt.createElement(Ix,null,Gt.createElement(zx,null,E_e.labels.destination[n]),Gt.createElement("div",{className:cG()(v_e,"PayoutForm_disabled_G0ygk","PayoutForm_existingInput_Za1a1")},n===Qt.BANKCARD?Gt.createElement(Q3,{description:r,asteriskClassName:"PayoutForm_existingInputAsterisk_KgH48"}):r)),Gt.createElement(FB,{className:"PayoutForm_changeButton_XvLwJ",onClick:o},Gt.createElement(pB,{glyph:hB.U3W,className:"PayoutForm_icon_UGlsb"}),E_e.changeMeans)))},S_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.components.PayoutForm.components.PayoutFormCardNoPassport"),T_e=function(e){var t=e.classNames,n=e.isSubmitting,r=e.payoutSystemOption,o=e.payoutCardFrame,a=e.payoutSystem,i=e.title,l=e.onSelectOption,s=e.onSubmit,c=(0,Gt.useMemo)((function(){return a.options.map((function(e){return{label:e.currency,value:e.currency}}))}),[a]),u=c.find((function(e){return e.value===(null==r?void 0:r.currency)}))||c[0],d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(u),2),f=d[0],m=d[1],p=(0,Gt.useCallback)((function(e){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,s({currency:f.value,destination:e.action_params.card_id,systemId:a.id})];case 1:return[2,t.sent()];case 2:return t.sent(),[2,null];case 3:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n}),[a,f]);return Gt.createElement("div",null,Gt.createElement("h3",{className:t.title},(0,Qr.getParametrizedText)(i,{currency:f.value})),Gt.createElement("div",{className:p_e},n&&Gt.createElement("div",{className:"PayoutForm_noPasswordSubmittingContainer_iK9Mz"},Gt.createElement(ZY,null)),Gt.createElement(Ix,null,Gt.createElement(zx,null,S_e.currency),Gt.createElement(lF,{onSelect:function(e){m(e),l(a.options.find((function(t){return t.currency===e.value})))},options:c,selected:f})),Gt.createElement(JY,{src:null==o?void 0:o.url,LoadingComponent:ZY,onSuccess:p,className:y_e,loaderClassName:cG()(y_e,"PayoutForm_iframeLoader_ujY_C")})))};!function(e){e.DESTINATION="destination"}(__e||(__e={}));var I_e,N_e,C_e=Sz.Ry().shape({destination:Sz.Z_().email("matchEmail").required("required")}),w_e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},O_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.components.PayoutForm.components.PayoutFormPaypal"),A_e=function(e){var t=e.classNames,n=e.isSubmitting,r=e.payoutSystemOption,o=e.payoutSystem,a=e.title,i=e.onSelectOption,l=e.onSubmit,s=(0,Gt.useMemo)((function(){return o.options.map((function(e){return{label:e.currency,value:e.currency}}))}),[o]),c=s.find((function(e){return e.value===(null==r?void 0:r.currency)}))||s[0],u=w_e((0,Gt.useState)(c),2),d=u[0],f=u[1],m=w_e((0,Gt.useState)(!1),2),p=m[0],h=m[1],v=function(e){f(e),i(o.options.find((function(t){return t.currency===e.value})))},g=function(){h(!0)};return Gt.createElement("div",null,Gt.createElement("h3",{className:t.title},(0,Qr.getParametrizedText)(a,{currency:d.value})),Gt.createElement("div",{className:p_e},Gt.createElement(Gz.J9,{initialValues:{},validateOnMount:!0,validateOnBlur:!0,validateOnChange:p,validationSchema:C_e,onSubmit:function(e){l({systemId:o.id,currency:d.value,destination:e.destination})}},(function(e){var t=e.values,r=e.errors,o=e.handleChange,a=e.handleBlur,i=Ef(e,__e.DESTINATION),l=i?null:O_e.validation[r.destination];return Gt.createElement(Gz.l0,null,Gt.createElement(Ix,null,Gt.createElement(zx,null,O_e.labels.currency),Gt.createElement(lF,{options:s,selected:d,onSelect:v})),Gt.createElement(Ix,null,Gt.createElement(Zx,{label:O_e.labels.destination,isValid:i,error:l,value:t.destination,name:__e.DESTINATION,onChange:o,onBlur:a,placeholder:O_e.placeholders.destination})),Gt.createElement(FB,{isDisabled:n,type:"submit",onClick:g},O_e.save))}))))};!function(e){e.INPUT_DESCRIPTION="inputDescription"}(I_e||(I_e={})),function(e){e.DESTINATION="destination"}(N_e||(N_e={}));var P_e,L_e=Sz.Ry().shape({destination:Sz.Z_().required("required").matches(/^\+\d{10,}$/,"matchPhone")}),R_e=Sz.Ry().shape({destination:Sz.Z_().required("required").matches(/^\d{11,20}$/,"matchYandex")}),k_e=Sz.Ry().shape({destination:Sz.Z_().required("required").matches(/^\d{1,20}$/,"matchVk")}),D_e=function(){return D_e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},D_e.apply(this,arguments)},U_e=oo("BlogIncome.BlogWithdrawal.PayoutForm.PayoutFormSimple"),B_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.components.PayoutForm.components.PayoutFormSimple"),x_e=((P_e={})[Qt.QIWI]=L_e,P_e[Qt.YANDEXMONEY]=R_e,P_e[Qt.VKPAY]=k_e,P_e),M_e=function(e){var t=e.classNames,n=e.description,r=e.isSubmitting,o=e.label,a=e.mask,i=e.placeholder,l=e.payoutSystem,s=l.id,c=l.options,u=e.title,d=e.onSubmit,f=(0,Gt.useRef)(null),m=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),p=m[0],h=m[1],v=x_e[s]||null,g=function(){h(!0)};return Gt.createElement("div",null,Gt.createElement("h3",{className:t.title},u),Gt.createElement("div",{className:p_e},Gt.createElement(Gz.J9,{initialValues:{},validateOnBlur:!0,validateOnChange:p,validateOnMount:!0,validationSchema:v,innerRef:f,onSubmit:function(e){d({systemId:s,currency:c[0].currency,destination:e.destination})}},(function(e){var t,l,c,u,d=e.values,m=e.errors,p=e.handleChange,h=e.handleBlur,v=Ef(e,N_e.DESTINATION),y=v?null:B_e.validation[m.destination],_=(c=p,u=s,function(e){if(c(e),u===Qt.VKPAY){var t=e.target&&e.target.value,n=t.replace(/\s/g,"").replace(/\D/g,"").slice(0,20);t&&f.current.setFieldValue("destination",n,!0)}});return Gt.createElement(Gz.l0,null,Gt.createElement(Ix,null,Gt.createElement(Kx,{description:n,label:o,error:y,isErrorInFlow:!0,isValid:v,className:"PayoutForm_form_oGB7u"},null!=a?Gt.createElement(tm(),D_e({},Na(U_e(I_e.INPUT_DESCRIPTION)),{className:cG()(v_e,(t={},t[g_e]=!v,t)),name:N_e.DESTINATION,value:d.destination,onChange:p,onBlur:h,placeholder:i,mask:a,guide:!1})):Gt.createElement("input",D_e({},Na(U_e(I_e.INPUT_DESCRIPTION)),{className:cG()(v_e,(l={},l[g_e]=!v,l)),value:d.destination,name:N_e.DESTINATION,onChange:_,onBlur:h,placeholder:i})))),Gt.createElement(FB,{isDisabled:r,type:"submit",onClick:g},B_e.save))}))))},F_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.components.PayoutForm"),G_e=function(e){var t=e.isResetting,n=e.isSubmitting,r=e.payoutSystemOption,o=e.payoutCardFrame,a=e.activePayout,i=e.payoutSystem,l=e.payoutSystem.id,s=e.startEdit,c=e.onSelectOption,u=e.onSubmit;return null==a||l!==a.systemId||t?l===Qt.PAYPAL?Gt.createElement(A_e,{classNames:{title:h_e},isSubmitting:n,payoutSystem:i,payoutSystemOption:r,title:F_e.formTitle.paypal,onSelectOption:c,onSubmit:u}):l===Qt.BANKCARD?Gt.createElement(T_e,{classNames:{title:h_e},isSubmitting:n,payoutCardFrame:o,payoutSystem:i,payoutSystemOption:r,title:F_e.formTitle.bankcard,onSelectOption:c,onSubmit:u}):Gt.createElement(M_e,{key:l,classNames:{title:h_e},isSubmitting:n,label:F_e.labels.destination[l],mask:l===Qt.QIWI?If:null,placeholder:F_e.placeholders.destination[l],payoutSystem:i,title:F_e.formTitle[l],onSubmit:u}):Gt.createElement("div",null,Gt.createElement("h3",{className:h_e},(0,Qr.getParametrizedText)(F_e.formTitle[l],{currency:a.currency})),Gt.createElement(b_e,{activeSystem:i,payout:a,startEdit:s}))},H_e=function(){return H_e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},H_e.apply(this,arguments)},W_e=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},V_e=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},j_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogWithdrawal.desktop.components.PayoutForm"),z_e=function(e){var t=e.activePayout,n=e.payoutSystem,r=e.fetchPayoutCardFrame,o=e.onSubmit,i=jG().showAlert,l=(0,dH.useOverlayPopups)(),s=l.showPopup,c=l.closePopup,u=null!=t;(0,Gt.useEffect)((function(){r()}),[]);var d=function(){i({type:p.ERROR,text:j_e.createApiError})};return Gt.createElement(G_e,H_e({},e,{onSubmit:function(e){return W_e(void 0,void 0,Promise,(function(){return V_e(this,(function(t){return u&&n.id!==Qt.BANKCARD?[2,new Promise((function(t,n){var r=s({type:a.CONFIRM,data:{onConfirm:function(){return W_e(void 0,void 0,void 0,(function(){var a,i;return V_e(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,o(e)];case 1:return a=l.sent(),c(r),t(a),[3,3];case 2:return i=l.sent(),d(),c(r),n(i),[3,3];case 3:return[2]}}))}))},description:j_e.confirmReplace}}).id}))]:[2,o(e).then((function(){n.id===Qt.BANKCARD&&r()})).catch((function(e){throw d(),e}))]}))}))},onYandexApiError:function(){i({type:p.ERROR,text:j_e.yandexError})}}))},Y_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogHolds.components.BlogHoldsHeader"),K_e=function(e){var t=e.children,n=nr().isMobile;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlogHoldsHeader_header_CulZ3"},Gt.createElement("div",{className:"BlogHoldsHeader_titleContainer_bX75O"},Gt.createElement(ehe,null),Gt.createElement("div",{className:"BlogHoldsHeader_title_bguhQ"},Y_e.title)),!n&&Gt.createElement(ohe,{dataType:q.HOLDS,classNames:{container:"BlogHoldsHeader_exportContainer_Sstvq",title:"BlogHoldsHeader_exportTitle_FRpqG"}})),t)},q_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogHolds"),X_e=function(e){var t=nr().locale,n=e.showAlert,r=e.Component,o=e.RowsComponent,a=e.FooterComponent,i=function(e){var t=Gf().blogUrl,n=(0,Vt.I0)(),r=(0,Vt.v9)(CO),o=(0,Vt.v9)(wO).total,a=(0,Vt.v9)(OO).isFetched,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(0),2),l=i[0],s=i[1],c=function(e){n(By.action({blogUrl:t,offset:10*e,limit:10}))};return(0,Gt.useEffect)((function(){c(0)}),[]),{blogUrl:t,holds:r,total:o,currentPage:l,holdsFetched:a,onPageChange:function(e){s(e),c(e)}}}(),l=i.blogUrl,s=i.holds,c=i.total,u=i.holdsFetched,d=i.onPageChange,f=i.currentPage;return Gt.createElement(r,{blogUrl:l,onPageChange:d,holds:s,total:c},Gt.createElement(K_e,null),!u&&Gt.createElement(uM,null),u&&Gt.createElement(Gt.Fragment,null,s.length>0&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlogHolds_info_snwzF"},Gt.createElement("div",{className:"BlogHolds_title_Ey_BE"},Gt.createElement(pB,{glyph:hB.Uef,className:"BlogHolds_icon_CJY2w"}),q_e.info.title),Gt.createElement("div",{className:"BlogHolds_description_HmrLB"},q_e.info.description1," ",Gt.createElement(yj,null,q_e.info.support),q_e.info.description2)),Gt.createElement(o,{rows:s,showAlert:n}),Gt.createElement(a,{onPageChange:d,forcePage:f,pagesCount:Math.ceil(c/10)})),0===s.length&&Gt.createElement(Ype,{classNamePicture:t===ce.RU?"BlogHolds_emptyHoldsRu_v1cG1":"BlogHolds_emptyHoldsEn_Qr980",title:q_e.empty.title,content:{defaultFilter:{text:q_e.empty.description}}})))};const Q_e={header:"BlogHoldsRows_header_H8p3c",row:"BlogHoldsRows_row_XaPLj",columnWithHint:"BlogHoldsRows_columnWithHint_NdZO9",approved:"BlogHoldsRows_approved_FWS1j",canceled:"BlogHoldsRows_canceled_TYGu8",price:"BlogHoldsRows_price_cDgj0",nextPayPrice:"BlogHoldsRows_nextPayPrice_DZ80x",iconStatus:"BlogHoldsRows_iconStatus_CqGsl",column:"BlogHoldsRows_column_ElC4f",hint:"BlogHoldsRows_hint_PaAAI",iconHint:"BlogHoldsRows_iconHint_vOi1c",tooltipContent:"BlogHoldsRows_tooltipContent_NwEJD",icon:"BlogHoldsRows_icon_oKUpS",email:"BlogHoldsRows_email_drSDd",dateSubscribe:"BlogHoldsRows_dateSubscribe_sIZj9",wrappedText:"BlogHoldsRows_wrappedText_D5iAR",answers:"BlogHoldsRows_answers_c5ZaT",fadeIn:"BlogHoldsRows_fadeIn_YStAL"};var J_e=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogHolds.desktop.components.BlogHoldsRows"),Z_e=function(e){return Boolean(e)?go(e,"dd/MM/yyyy"):""},$_e=function(e){var t=e.showAlert,n=e.rows,r=nr().currencies.default,o=function(){t({type:p.SUCCESS,text:J_e.copyEmailMessage})};return Gt.createElement("div",{className:Q_e.table},Gt.createElement("div",{className:Q_e.header},Gt.createElement("div",null,J_e.name),Gt.createElement("div",null,J_e.email),Gt.createElement("div",null,J_e.amount),Gt.createElement("div",null,J_e.holdDate),Gt.createElement("div",{className:Q_e.column},J_e.decisionDate,Gt.createElement(gB,{classNames:{tooltip:Q_e.hint,icon:Q_e.iconHint}},J_e.hintDecision)),Gt.createElement("div",null,J_e.decision)),Gt.createElement("div",null,n.map((function(e,t){var n=e.status,a=e.user,i=e.moderatedAt,l=e.amount,s=e.createdAt,c=Z_e(i),u=Z_e(s);return Gt.createElement("div",{className:Q_e.row,key:"row".concat(t)},Gt.createElement("div",null,a.name),Gt.createElement("div",{className:Q_e.email},a.email&&Gt.createElement(dye,{email:a.email,onCopy:o})),Gt.createElement("div",null,Vr({amount:l,currency:r})),Gt.createElement("div",null,u),Gt.createElement("div",null,c),Gt.createElement("div",{className:Q_e[n]},J_e.status[n]))}))))},eEe=function(e){var t=e.className,n=e.title;return Gt.createElement("div",{className:cG()(t,"Page_block_Rv2IG")},Gt.createElement("div",{className:"Page_content_djp0Y"},n&&Gt.createElement("div",{className:"Page_title_OyjQ7"},n),e.children))},tEe=function(e){var t=e.className,n=e.itemClassName,r=e.activeItemClassName,o=e.tabs,a=(0,Gt.useRef)(null),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(0),2),l=i[0],s=i[1],c=xf();return(0,Gt.useEffect)((function(){o.forEach((function(e,t){var n=e.url,r=e.extraUrls;(c.pathname===n||r&&r.some((function(e){return c.pathname===e})))&&s(t)}))}),[c.pathname]),Gt.createElement("div",{className:cG()("PageTabs_root_YAtVx",t),ref:a},o.map((function(e,t){var o,a=e.url,i=e.title;return Gt.createElement(jt.rU,{className:cG()("PageTabs_item_gFO_L",n,(o={},o.PageTabs_active_wY9f0=l===t,o[r]=l===t,o)),to:a,key:"PageTabsItem".concat(t)},i)})))},nEe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},rEe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},oEe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.desktop.components.BlogIncomingTabs"),aEe=function(e){var t,n,o,a,i=(n=(t={blogUrl:e.blogUrl,isBlogStatisticsEnable:nr().blogStatistics.isEnable,isHoldsEnabled:Qo(r.HOLDS_STAT),isRefsEnabled:Qo(r.REFERRAL_PROGRAM)}).blogUrl,o=t.isHoldsEnabled,a=t.isRefsEnabled,rEe(rEe(rEe(rEe([],nEe(t.isBlogStatisticsEnable?[{route:ir.BLOG_STATISTICS,url:(0,Yt.getParametrizedUrl)(ir.BLOG_STATISTICS,{blogUrl:n}),title:oEe.statistics}]:[]),!1),[{route:ir.BLOG_SUBSCRIBERS,url:(0,Yt.getParametrizedUrl)(ir.BLOG_SUBSCRIBERS,{blogUrl:n}),title:oEe.subscribers},{route:ir.BLOG_DONATIONS,url:(0,Yt.getParametrizedUrl)(ir.BLOG_DONATIONS,{blogUrl:n}),title:oEe.donations},{route:ir.BLOG_POST_SALES,url:(0,Yt.getParametrizedUrl)(ir.BLOG_POST_SALES,{blogUrl:n}),title:oEe.postSales},{route:ir.BLOG_WITHDRAWAL_METHODS,url:(0,Yt.getParametrizedUrl)(ir.BLOG_WITHDRAWAL_METHODS,{blogUrl:n}),title:oEe.withdrawal},{route:ir.BLOG_PAYOUT_HISTORY,url:(0,Yt.getParametrizedUrl)(ir.BLOG_PAYOUT_HISTORY,{blogUrl:n}),title:oEe.history}],!1),nEe(o&&[{route:ir.BLOG_HOLDS,url:(0,Yt.getParametrizedUrl)(ir.BLOG_HOLDS,{blogUrl:n}),title:oEe.refunds}]),!1),nEe(a&&[{route:ir.BLOG_REFS,url:(0,Yt.getParametrizedUrl)(ir.BLOG_REFS,{blogUrl:n}),title:oEe.refs}]),!1));return Gt.createElement(tEe,{tabs:i})},iEe=(0,Qr.getTranslation)("@boosty/common/containers.BlogIncome.BlogIncome.desktop"),lEe=function(e){var t=e.tabs,n=e.classNames,r=xf(),o=t.filter((function(e){return null==e?void 0:e.id})),a=o.findIndex((function(e){var t=e.url;return yf("".concat(t,"/*"),r.pathname)})),i=o[a];return Gt.createElement("div",{className:"Settings_wrapper_GH7yH"},Gt.createElement("aside",{className:fB()("Settings_menu_FKyWy",null==n?void 0:n.aside)},Gt.createElement(wB,{activeTab:a},o.map((function(e){var t=e.url,n=e.title,r=e.icon,o=e.id;return Gt.createElement(wB.Tab,{icon:r,title:n,url:t,id:o,key:o})})))),Gt.createElement("div",{className:fB()("Settings_contentContainer_CVL6Y",null==n?void 0:n.content)},i&&!i.hideCommonTitle&&Gt.createElement("h2",{className:fB()("Settings_title_sAREq",null==n?void 0:n.title)},i.title),Gt.createElement(Bf.j3,null)))},sEe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.desktop"),cEe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsNotifications.components.SettingsNotificationsForm"),uEe=[{notificationType:ge.SUBSCRIBER,getTitle:function(){return cEe.notificationTypes.newSubscriber.title},getDescription:function(){return cEe.notificationTypes.newSubscriber.description},isBloggerOnly:!0},{notificationType:ge.DONATION,getTitle:function(){return cEe.notificationTypes.donation.title},getDescription:function(){return cEe.notificationTypes.donation.description},isBloggerOnly:!0},{notificationType:ge.POST_PURCHASE,getTitle:function(){return cEe.notificationTypes.newPostPurchase.title},getDescription:function(){return cEe.notificationTypes.newPostPurchase.description},isBloggerOnly:!0},{notificationType:ge.MESSAGE_PURCHASE,getTitle:function(){return cEe.notificationTypes.messagePurchase.title},getDescription:function(){return cEe.notificationTypes.messagePurchase.description},isBloggerOnly:!0},{notificationType:ge.MESSAGE,getTitle:function(){return cEe.notificationTypes.newMessage.title},getDescription:function(){return cEe.notificationTypes.newMessage.description}},{notificationType:ge.COMMENT,getTitle:function(){return cEe.notificationTypes.newComment.title},getDescription:function(){return cEe.notificationTypes.newComment.description},isBloggerOnly:!0},{notificationType:ge.REPLY,getTitle:function(){return cEe.notificationTypes.newReply.title},getDescription:function(){return cEe.notificationTypes.newReply.description}},{notificationType:ge.STREAM,getTitle:function(){return cEe.notificationTypes.boostyStream.title},getDescription:function(){return cEe.notificationTypes.boostyStream.description}},{notificationType:ge.POST,getTitle:function(){return cEe.notificationTypes.newPost.title},getDescription:function(){return cEe.notificationTypes.newPost.description}},{notificationType:ge.NEW_TARGET,getTitle:function(){return cEe.notificationTypes.newTarget.title},getDescription:function(){return cEe.notificationTypes.newTarget.description}},{notificationType:ge.NEW_REFERRAL_REGISTRATION,getTitle:function(){return cEe.notificationTypes.newReferralRegistration.title},getDescription:function(){return cEe.notificationTypes.newReferralRegistration.description},isBloggerOnly:!0},{notificationType:ge.REFERRAL_IS_BLOGGER,getTitle:function(){return(0,Qr.getParametrizedText)(cEe.notificationTypes.referralCreatedBlog.title,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})},getDescription:function(){return cEe.notificationTypes.referralCreatedBlog.description},isBloggerOnly:!0},{notificationType:ge.NEWS,getTitle:function(){return cEe.notificationTypes.serviceNews.title},getDescription:function(){return(0,Qr.getParametrizedText)(cEe.notificationTypes.serviceNews.description,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})}},{notificationType:ge.NEW_PROMO,getTitle:function(){return cEe.notificationTypes.newPromo.title},getDescription:function(){return cEe.notificationTypes.newPromo.description}}],dEe=[{value:ve.STANDALONE,getLabel:function(){return cEe.selectTransportOptions.site}},{value:ve.MAIL,getLabel:function(){return cEe.selectTransportOptions.email}},{value:ve.TELERGAM,getLabel:function(){return cEe.selectTransportOptions.telegram}},{value:ve.MOBILE_PUSH,getLabel:function(){return cEe.selectTransportOptions.mobilePush}}],fEe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsNotifications.components.SettingsNotificationsForm"),mEe=function(){return nr().notificationSettings},pEe=function(e,t){var n=mEe()[e];return dEe.filter((function(r){var o,a=r.value;return n.includes(a)&&(null===(o=null==t?void 0:t[a])||void 0===o?void 0:o[e])})).map((function(e){return{value:e.value,label:(0,e.getLabel)()}}))},hEe=function(e){return e.length>0?e.map((function(e){return e.label})).join(", "):fEe.selectTransportOptions.off},vEe=function(e,t,n){var r=qa(e);return(0,ii.set)(r,[n.transportType,t],n.newChecked),r};const gEe={notificationType:"SettingsNotificationsForm_notificationType_w0eIQ",optionsContainer:"SettingsNotificationsForm_optionsContainer_KVZQN",notificationLabel:"SettingsNotificationsForm_notificationLabel_NjCA2",labelTitle:"SettingsNotificationsForm_labelTitle_nBslt",labelDescription:"SettingsNotificationsForm_labelDescription_Lm6_Z",transportSelectWrapper:"SettingsNotificationsForm_transportSelectWrapper_fw3Ql",select:"SettingsNotificationsForm_select_fSpMK",form:"SettingsNotificationsForm_form_OtEw4",fadeIn:"SettingsNotificationsForm_fadeIn_RrSfW"};var yEe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsNotifications.components.SettingsNotificationsForm"),_Ee=function(e){var t=e.classNames,n=void 0===t?{}:t,r=jG(),o=r.showAlert,a=r.hideAllAlerts,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),l=i[0],s=i[1],c=function(e){var t=void 0===e?{}:e,n=t.onUpdateError,r=t.onUpdateSuccess,o=(0,Vt.v9)(SA),a=(0,Vt.v9)(TA);(0,Gt.useEffect)((function(){f(qg({transports:tj()}))}),[]);var i=ej((0,Gt.useState)(!1),2),l=i[0],s=i[1],c=ej((0,Gt.useState)(null),2),u=c[0],d=c[1],f=(0,Vt.I0)(),m=(0,Gt.useCallback)((function(e){return void 0,void 0,o=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),s(!0),d(e),[4,f((0,dm.Ax)(Xg.action)(e))];case 1:return t.sent(),r&&r(e),[3,4];case 2:return t.sent(),n&&n(e),[3,4];case 3:return s(!1),[7];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function r(e){try{i(o.next(e))}catch(e){n(e)}}function a(e){try{i(o.throw(e))}catch(e){n(e)}}function i(n){var o;n.done?e(n.value):(o=n.value,o instanceof t?o:new t((function(e){e(o)}))).then(r,a)}i((o=o.apply(undefined,[])).next())}));var t,o}),[]);return{updateNotificationSettings:m,isUpdating:l,lastUpdatingValue:u,notificationSettings:o,isFetching:a.isFetching}}({onUpdateError:function(e){a(),o({type:p.ERROR,text:yEe.updateError,timeout:1500}),s((function(t){return vEe(t,e.notificationType,{transportType:e.transport,newChecked:!e.value})}))},onUpdateSuccess:function(){a(),o({type:p.SUCCESS,text:yEe.updateSucess,timeout:1500})}}),u=c.updateNotificationSettings,d=c.notificationSettings,f=c.isUpdating,m=c.lastUpdatingValue,h=c.isFetching;(0,Gt.useEffect)((function(){!h&&d&&s(d)}),[d,h]);var v=function(e){return(e?uEe:uEe.filter((function(e){return!e.isBloggerOnly}))).filter((function(e){var t=e.notificationType;return mEe()[t].length>0}))}((0,Vt.v9)(XO).isBlogger),g=h&&!l;return Gt.createElement(Sx,{className:gEe.form},v.map((function(e){var t=e.notificationType,r=e.getTitle,o=e.getDescription,a=function(e,t){return dEe.filter((function(n){var r,o=n.value;return t&&mEe()[e].includes(o)&&void 0!==(null===(r=t[o])||void 0===r?void 0:r[e])})).map((function(e){return{value:e.value,label:(0,e.getLabel)()}}))}(t,l),i=pEe(t,l),c=f&&(null==m?void 0:m.notificationType)===t?[m.transport]:[];return Gt.createElement(Ix,{className:n.row,key:t},Gt.createElement("div",{className:gEe.notificationType},Gt.createElement("div",{className:gEe.notificationLabel},Gt.createElement("div",{className:gEe.labelTitle},r()),Gt.createElement("div",{className:gEe.labelDescription},o())),Gt.createElement("div",{className:gEe.transportSelectWrapper},Gt.createElement(lF,{classNames:{mainBox:gEe.select,option:gEe.optionItem,optionCheckBoxLabel:gEe.optionCheckBoxLabel,options:gEe.optionsContainer,placeholder:gEe.placeholder},isDisabled:g,disabledOptionValues:c,isMulti:!0,onSelect:function(e){return function(e,t){var n=function(e,t,n){var r,o=pEe(t,n).map((function(e){return e.value})),a=e.map((function(e){return e.value}));return a.forEach((function(e){o.includes(e)||(r={transportType:e,newChecked:!0})})),r||(o.forEach((function(e){a.includes(e)||(r={transportType:e,newChecked:!1})})),r)}(t,e,l);s(vEe(l,e,n)),u({notificationType:e,transport:n.transportType,value:n.newChecked})}(t,e)},options:a,selected:i,selectionLabel:g?"...":hEe(i)}))))})))};const EEe="SettingsNotificationsForm_labelText_If1zX";var bEe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},SEe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsNotifications.components.SettingsNotificationsFormOld"),TEe=function(e){var t=e.isBlogger,n=e.notifications,r=n.newComment,o=n.newSubscriber,a=n.newMessage,i=n.otherNews,l=n.newReply,s=e.classNames,c=void 0===s?{}:s,u=e.notifySettingsOld,d=bEe((0,Gt.useState)(!1),2),f=d[0],m=d[1],h=bEe((0,Gt.useState)(!1),2),v=h[0],g=h[1],y=bEe((0,Gt.useState)(!1),2),_=y[0],E=y[1],b=bEe((0,Gt.useState)(!1),2),S=b[0],T=b[1],I=bEe((0,Gt.useState)(!1),2),N=I[0],C=I[1],w=jG().showAlert;(0,Gt.useEffect)((function(){((null==o?void 0:o.mail)||(null==r?void 0:r.mail)||(null==i?void 0:i.mail)||(null==l?void 0:l.mail))&&(m((null==o?void 0:o.mail)||!1),g((null==r?void 0:r.mail)||!1),E((null==i?void 0:i.mail)||!1),T((null==a?void 0:a.mail)||!1),C((null==l?void 0:l.mail)||!1))}),[]);var O=function(e,t){return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:switch(e){case ge.SUBSCRIBER:m(t);break;case ge.COMMENT:g(t);break;case ge.NEWS:E(t);break;case ge.MESSAGE:T(t);break;case ge.REPLY:C(t)}n.label=1;case 1:return n.trys.push([1,3,,4]),[4,u({notificationType:e,transport:{mail:t}})];case 2:return n.sent(),w({type:p.SUCCESS,text:SEe.success}),[3,4];case 3:switch(n.sent(),e){case ge.SUBSCRIBER:m(!t);break;case ge.COMMENT:g(!t);break;case ge.NEWS:E(!t);break;case ge.MESSAGE:T(!t);break;case ge.REPLY:C(!t)}return w({type:p.ERROR,text:SEe.error}),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r};return Gt.createElement(Sx,null,Gt.createElement(Ix,{className:c.titleRow},Gt.createElement("span",{className:"SettingsNotificationsForm_title_XIzwf"},SEe.email)),t&&Gt.createElement(Gt.Fragment,null,Gt.createElement(Ix,{className:c.row,isSmallIndent:!0},Gt.createElement(SF,{togglePosition:"left",size:dF.MIDDLE,label:SEe.subscriber,classNames:{label:c.label,labelText:EEe},isDefaultChecked:null==o?void 0:o.mail,onToggle:function(e){O(ge.SUBSCRIBER,e)},checked:f})),Gt.createElement(Ix,{className:c.row,isSmallIndent:!0},Gt.createElement(SF,{togglePosition:"left",size:dF.MIDDLE,label:SEe.comment,classNames:{label:c.label,labelText:EEe},isDefaultChecked:null==r?void 0:r.mail,onToggle:function(e){O(ge.COMMENT,e)},checked:v}))),Gt.createElement(Ix,{className:c.row,isSmallIndent:!0},Gt.createElement(SF,{togglePosition:"left",size:dF.MIDDLE,label:SEe.reply,classNames:{label:c.label,labelText:EEe},isDefaultChecked:null==l?void 0:l.mail,onToggle:function(e){O(ge.REPLY,e)},checked:N})),Gt.createElement(Ix,{className:c.row,isSmallIndent:!0},Gt.createElement(SF,{togglePosition:"left",size:dF.MIDDLE,label:SEe.message,classNames:{label:c.label,labelText:EEe},isDefaultChecked:null==a?void 0:a.mail,onToggle:function(e){O(ge.MESSAGE,e)},checked:S})),Gt.createElement(Ix,{className:c.row,isSmallIndent:!0},Gt.createElement(SF,{togglePosition:"left",size:dF.MIDDLE,label:SEe.news,classNames:{label:c.label,labelText:EEe},isDefaultChecked:null==i?void 0:i.mail,onToggle:function(e){O(ge.NEWS,e)},checked:_})))},IEe=function(e){var t=e.classNames,n=(0,Vt.I0)(),o=(0,Vt.v9)(XO),a=Boolean(o),i=Qo(r.NEW_NOTIFICATION_SETTINGS);return a?i?Gt.createElement(_Ee,{classNames:t}):Gt.createElement(TEe,{notifications:o.notifications,classNames:t,isBlogger:o.isBlogger,notifySettingsOld:function(e){return void 0,void 0,r=function(){var t,r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return t=e.notificationType,r=e.transport,[4,n((0,dm.Ax)(Kg.action)({notificationType:t,transport:r}))];case 1:return[2,o.sent()]}}))},new((t=void 0)||(t=Promise))((function(e,n){function o(e){try{i(r.next(e))}catch(e){n(e)}}function a(e){try{i(r.throw(e))}catch(e){n(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var t,r}}):null};IEe.getFetchActions=function(e,t){return[function(){return qg.action()}]};const NEe={selectItemName:"SettingsEditMessageLevels_selectItemName_P04nf",selectItemDescription:"SettingsEditMessageLevels_selectItemDescription_vSNXw",selectItemSelected:"SettingsEditMessageLevels_selectItemSelected_xoOCL",selectItemOption:"SettingsEditMessageLevels_selectItemOption_iCkfo",options:"SettingsEditMessageLevels_options_pdh3O"};var CEe=function(){return CEe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},CEe.apply(this,arguments)},wEe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditMessageLevels"),OEe=function(e){var t=e.selectedLevel,n=e.onChange,r=e.subscriptionLevels,o=nr().currencies.default,a=(0,Gt.useMemo)((function(){return function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(r.map((function(e){return CEe(CEe({},e),{name:e.deleted?"".concat(e.name," (").concat(wEe.deleted,")"):e.name})}))),!1)}),[r]),i=a.find((function(e){return e.id===t}))||a[0];return Gt.createElement(lF,{classNames:{options:NEe.options},isDisabled:!1,labelProp:"name",selected:i,onSelect:function(e){n(e.id)},options:a,selectionLabel:null,valueProp:"id",Component:function(e){var t,n=e.valueObject,a=e.selected,i="selected"in e,l=r.reduce((function(e,t){return t.price>e?t.price:e}),0);return Gt.createElement("div",{className:cG()(NEe.selectItem,(t={},t[NEe.selectItemSelected]=a,t[NEe.selectItemOption]=i,t))},Gt.createElement("div",{className:NEe.selectItemName},n.name),Gt.createElement("div",{className:NEe.selectItemDescription},(0,Qr.getParametrizedText)(wEe.fromPrice,{price:Vr({amount:n.price,currency:o,useGrouping:!0})}),n.price<l&&Gt.createElement(Gt.Fragment,null," ",wEe.andMore)))}})},AEe=function(){return AEe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},AEe.apply(this,arguments)},PEe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsPrivacy.components.PrivacySettings"),LEe=function(e){var t=e.settings,n=e.isBlogger,o=e.hasPaidLevels,a=e.onMessageRuleChange,i=function(e){return function(t){a(e,t)}},l=Qo(r.SETTINGS_PRIVACY_DONATIONS_CHECKBOX),s=(0,Gt.useMemo)((function(){var e,t,r;return AEe(((e={})[A.ANY]=PEe.titles.allUsers,e[A.NONE]=PEe.titles.nobody,e),n&&AEe(AEe({},l&&((t={})[A.DONATER]=PEe.titles.onlyDonations,t)),((r={})[A.FREE]=PEe.titles.allSubscribers,r[A.SUBSCRIBERS]=PEe.titles.onlyPaidSubscribers,r[A.LEVEL]=PEe.titles.onlyPaidSubscribersFromLevel,r)))}),[n,o,l]),c=function(e){return e===A.SUBSCRIBERS?!t[A.LEVEL]&&Boolean(t[e]):Boolean(t[e])};return Gt.createElement("div",null,Object.keys(s).map((function(e){return Gt.createElement(VM,{containerClassName:"PrivacySettings_checkboxContainer_YZ6OA",isDisabled:[A.LEVEL,A.SUBSCRIBERS].includes(e)&&!o,key:e,checked:c(e),label:s[e],onToggle:i(e)})})))};const REe="SettingsPrivacy_blockTitle_L2e92";var kEe,DEe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsPrivacy");!function(e){e.SUBSCRIPTION="subscription",e.GIFT="gift"}(kEe||(kEe={}));const UEe={root:"CardBase_root_ukDYX",header:"CardBase_header_PtHJB",userName:"CardBase_userName_EL2BL",title:"CardBase_title_o7fSh",link:"CardBase_link_rThPV",userNameLink:"CardBase_userNameLink_hCzh2",top:"CardBase_top_jV948",fadeIn:"CardBase_fadeIn_fd2Ds"};var BEe=function(e){var t=e.blogUrl,n=e.userName,r=e.avatarUrl,o=e.title,a=e.className,i=e.buttons,l=e.footer,s=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:t});return Gt.createElement("div",{className:fB()(UEe.root,a)},Gt.createElement("div",{className:UEe.top},Gt.createElement("div",{className:UEe.header},Gt.createElement(cM,{to:s,className:UEe.link},Gt.createElement(PB,{img:r,size:g.SM,className:UEe.avatar})),i),Gt.createElement(cM,{to:s,className:fB()(UEe.link,UEe.userNameLink)},Gt.createElement("div",{className:UEe.userName},n)),Gt.createElement("div",{className:UEe.title},o)),l&&Gt.createElement("div",{className:UEe.bottom},l))},xEe=function(e){var t=e.label,n=e.content;return Gt.createElement("div",{className:"CardFooter_root_PQa6P"},Gt.createElement("span",{className:"CardFooter_label_wKPRx"},t),Gt.createElement(HF,{content:n,classNames:{root:"CardFooter_tooltipRoot_x_KsZ",content:"CardFooter_tooltipContent_Bh_az"}},Gt.createElement(pB,{glyph:hB.Gc9,className:"CardFooter_icon_EIDBQ"})))},MEe=(0,Qr.getTranslation)("@common/components.SubscriptionCard.components.CardTypeGift"),FEe=function(e){var t=e.blogUrl,n=e.blogName,r=e.avatarUrl,o=e.gift,a=o.key,i=o.level.name,l=e.className,s=e.onGiftSubscriptionSend,c=Gt.createElement(Gt.Fragment,null,Gt.createElement(FB,{className:"CardTypeGift_button_LxqUd",onClick:function(){s({giftKey:a})}},Gt.createElement(pB,{className:"CardTypeGift_openIcon_nLB05",glyph:hB.Lmt}),MEe.send),Gt.createElement(xEe,{label:MEe.hintLabel,content:MEe.hintContent}));return Gt.createElement(BEe,{blogUrl:t,userName:n,avatarUrl:r,className:l,title:i,footer:c})},GEe=(0,Qr.getTranslation)("@common/components.SubscriptionCard.components.CardTypeSubscription"),HEe=function(e){var t,n,r=e.blogUrl,o=e.blogName,a=e.avatarUrl,i=e.subscription,l=e.isRssFeedEnabled,s=e.className,c=e.showRssLinkPopup,u=e.onUnsubscribe,d="follower"===i.name.toLowerCase()?GEe.follower:i.name,f=(0,Vt.v9)(EA),m=null!=i.offTime,p=nr().isMobile,h=null===(n=null===(t=null==i?void 0:i.promo)||void 0===t?void 0:t.trial)||void 0===n?void 0:n.days,v=(0,Qr.getParametrizedText)(GEe.price,{sum:Vr({amount:i.customPrice||i.price,currency:f})}),g=Gt.createElement("div",{className:"CardTypeSubscription_buttons_BOBMH"},l&&Gt.createElement(HB,{className:"CardTypeSubscription_rssButton_QuaUv",onClick:function(){c(r,o)}},Gt.createElement(pB,{glyph:hB.o0A,className:"CardTypeSubscription_rssIcon__PCtI"}),!p&&GEe.rss),!m&&Gt.createElement(HF,{classNames:{content:"CardTypeSubscription_tooltipContent_zLsEF"},content:Gt.createElement("div",{className:"CardTypeSubscription_cancelSubscription_p6BpU",onClick:function(){u({blogUrl:i.blog.blogUrl,name:i.blog.owner.name,nextPayTime:i.nextPayTime,bloggerId:i.blog.owner.id,hasPromo:Boolean(i.promo)})}},GEe.cancelSubscription),trigger:IF.CLICK},Gt.createElement(HB,{className:"CardTypeSubscription_settingsButton_j5Qzw"},Gt.createElement(pB,{glyph:hB.z4b,className:"CardTypeSubscription_settingsIcon_c5aXA"})))),y=Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"CardTypeSubscription_text_Y0cBG"},h?(0,Qr.getParametrizedText)(qr(GEe.trialDuration,h),{days:h}):(0,Qr.getParametrizedText)(GEe.price,{sum:Vr({amount:i.customPrice||i.price,currency:f})})),i.price>0&&Gt.createElement(xEe,{tooltipAlign:yx.CENTER,label:h?(0,Qr.getReactText)((0,Qr.getParametrizedText)(GEe.trialEndingAt,{price:v,date:yo(i.nextPayTime)}),{Br:function(){return Gt.createElement("br",null)}}):m?(0,Qr.getParametrizedText)(GEe.endingAt,{date:yo(i.offTime)}):(0,Qr.getParametrizedText)(GEe.nextWithdrawal,{date:yo(i.nextPayTime)}),content:h?(0,Qr.getParametrizedText)(GEe.trialEndingAtHint,{date:yo(i.nextPayTime)}):m?(0,Qr.getParametrizedText)(GEe.endingAtHint,{date:yo(i.offTime)}):(0,Qr.getParametrizedText)(GEe.nextWithdrawalHint,{date:yo(i.nextPayTime)})}));return Gt.createElement(BEe,{blogUrl:r,userName:o,avatarUrl:a,title:(0,Yt.strCapitalize)(d),className:s,buttons:g,footer:y})},WEe=function(e){var t=e.blogUrl,n=e.blogName,r=e.avatarUrl,o=e.data,a=e.type,i=e.isRssFeedEnabled,l=e.className,s=e.showRssLinkPopup,c=e.onUnsubscribe,u=e.onGiftSubscriptionSend;switch(a){case kEe.SUBSCRIPTION:return Gt.createElement(HEe,{avatarUrl:r,blogUrl:t,blogName:n,subscription:o,isRssFeedEnabled:i,className:l,onUnsubscribe:c,showRssLinkPopup:s});case kEe.GIFT:return Gt.createElement(FEe,{avatarUrl:r,blogUrl:t,blogName:n,gift:o,className:l,onGiftSubscriptionSend:u});default:return null}},VEe=(0,Qr.getTranslation)("@common/containers.Settings.SettingsSubscriptions"),jEe=function(e){var t=e.fetchOnInit,n=void 0===t||t,r=e.classNames,o=e.subscriptionsItems,a=e.isFetching,i=e.giftsNetworkStatus,l=e.gifts,s=e.pageCount,c=e.fetchSubscriptionsSettingsData,u=e.onUnsubscribe,d=e.onGiftSubscriptionSend,f=(0,Gt.useRef)(0),m=xf(),p=Mf();(0,Gt.useEffect)((function(){if(n){var e=(0,Do.parseUrl)(m.search).query;e.page&&(f.current=Number(e.page)-1),c({pageNumber:f.current,withFollow:!0})}}),[]);var h=function(t,n,o,a){var i=n===kEe.SUBSCRIPTION?"SubscriptionCard:".concat(t.levelId).concat(o):"GiftSubscriptionCard:".concat(t.level.id).concat(o);return Gt.createElement("div",{key:i,className:fB()("SettingsSubscriptions_card_fqDjC",r.cardClassName)},e.renderCard({data:t,isRssFeedEnabled:a,type:n,onUnsubscribe:u,onGiftSubscriptionSend:d}))},v=!(o.length||a||l.length||i.isFetching),g=s>1,y=a||i.isFetching;return Gt.createElement(Gt.Fragment,null,v&&Gt.createElement("div",{className:fB()("SettingsSubscriptions_emptyText_SQ1Qf",r.emptyTextClassName)},VEe.noSubscriptions),Gt.createElement("div",{className:fB()("SettingsSubscriptions_cardsContainer_rSRt6",r.cardsContainerClassName)},y&&Gt.createElement(uM,null),!y&&Gt.createElement(Gt.Fragment,null,o.map((function(e,t){var n;return h(e,kEe.SUBSCRIPTION,t,null===(n=e.blog.flags)||void 0===n?void 0:n.isRssFeedEnabled)})),l.map((function(e,t){return h(e,kEe.GIFT,t)})))),g&&Gt.createElement("div",{className:"SettingsSubscriptions_pagination_fVh01"},Gt.createElement(EM,{onPageChange:function(e){c({pageNumber:e,withFollow:!0}),p(function(e){return Ga(ir.SETTINGS_SUBSCRIPTIONS,e)}(e+1)),Of()},pageCount:s,initialPage:f.current,disableInitialCallback:!0})))},zEe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},YEe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};const KEe={card:"SettingsSubscriptions_card__mSwx",pagination:"SettingsSubscriptions_pagination_L6DRH"};var qEe,XEe,QEe,JEe=function(){var e=function(){var e=(0,Vt.I0)(),t=(0,dH.useOverlayPopups)(),n=t.showPopup,r=t.closePopup,o=jG().showAlert,i=(0,Vt.v9)(XO),l=(0,Vt.v9)(YL),s=(0,Vt.v9)(KL),c=(0,Vt.v9)(zL),u=(0,Vt.v9)(VL),d=(0,Vt.v9)(jL),f=function(t,n){return zEe(void 0,void 0,void 0,(function(){return YEe(this,(function(r){switch(r.label){case 0:return[4,e((0,dm.Ax)(iy)({blogUrl:t,isKeepFollow:n}))];case 1:return r.sent(),[2]}}))}))};(0,Gt.useEffect)((function(){e((0,dm.Ax)(AE)())}),[]);var m=function(e,t){var o=n({type:a.UNSUBSCRIBE_RESULT_POPUP,data:{name:e,blogUrl:t,onClose:function(){return r(o)}}}).id};return{currentUser:i,gifts:l,giftsNetworkStatus:s,pageCount:c,subscriptionsItems:u,subscriptionsSettingsNetworkStatus:d,unsubscribe:function(e){var t=e.blogUrl,o=e.name,i=e.nextPayTime,l=e.bloggerId,s=e.hasPromo,c=yo(i);if(i)var u=n({type:a.UNSUBSCRIBE,data:{onConfirm:function(e){return zEe(void 0,void 0,void 0,(function(){return YEe(this,(function(i){switch(i.label){case 0:return[4,f(t,e)];case 1:return i.sent(),r(u),setTimeout((function(){!function(e,t,r){n({type:a.UNSUBSCRIBE_POLL_POPUP,data:{bloggerId:e,onClose:function(){m(t,r)}},onClose:function(){m(t,r)}})}(l,o,t)}),100),[2]}}))}))},blogName:o,nextPayTimeNormalize:c,hasPromo:s}}).id;else f(t)},fetchSubscriptionsSettingsData:function(t){return e((0,dm.Ax)(jp)(t))},showRssLinkPopup:function(e,t){n({type:a.RSS_LINK_POPUP,data:{blogUrl:e,authorName:t,showAlert:o}})}}}(),t=e.gifts,n=e.giftsNetworkStatus,r=e.pageCount,o=e.subscriptionsSettingsNetworkStatus,i=e.subscriptionsItems,l=e.unsubscribe,s=e.fetchSubscriptionsSettingsData,c=e.showRssLinkPopup,u=(0,dH.useOverlayPopups)().showPopup;return Gt.createElement(jEe,{classNames:{cardClassName:KEe.card,cardsContainerClassName:KEe.cardsContainer,emptyTextClassName:KEe.emptyText},gifts:t,giftsNetworkStatus:n,isFetching:o.isFetching,pageCount:r,subscriptionsItems:i,fetchSubscriptionsSettingsData:s,onUnsubscribe:l,onGiftSubscriptionSend:function(e){var t=e.giftKey;u({type:a.SEND_GIFT_SUBSCRIPTION,data:{giftKey:t,from:dn.SETTINGS}})},renderCard:function(e){var t=e.data,n=e.type,r=e.onUnsubscribe,o=e.onGiftSubscriptionSend,a=e.isRssFeedEnabled;return Gt.createElement(WEe,{type:n,avatarUrl:t.blog.owner.avatarUrl,blogUrl:t.blog.blogUrl,blogName:t.blog.owner.name,data:t,isRssFeedEnabled:a,className:KEe.card,showRssLinkPopup:c,onUnsubscribe:r,onGiftSubscriptionSend:o})}})};JEe.getFetchActions=function(){return[function(){return jp.action({pageNumber:0,withFollow:!0})},function(){return AE.action()}]},function(e){e.ROOT="root"}(qEe||(qEe={})),function(e){e.ADD_STOP_WORD="addStopWord",e.ADD_MODERATOR="addModerator"}(XEe||(XEe={})),function(e){e.WORD_EXISTED="word_existed",e.STOP_LIST_LIMIT="stop_list_limit",e.SELF_MODERATOR="self_moderator",e.ALREADY_ASSIGNED_MODERATOR="already_assigned_moderator",e.USER_BLACKLISTED="blacklisted",e.USER_BANNED="user_baned",e.USER_NOT_FOUND="user_not_found",e.DEFAULT="something_went_wrong"}(QEe||(QEe={}));var ZEe=function(e){var t=e.className,n=e.moderator,r=e.onRemove;return Gt.createElement("div",{className:cG()("Moderator_moderator_P3ZfP",t)},Gt.createElement(PB,{className:"Moderator_avatar__m5KU",size:g.XS,img:n.avatarUrl}),Gt.createElement("span",{className:"Moderator_text_dAOHR"},n.name),Gt.createElement("button",{className:"Moderator_removeBtn_SE3eD",onClick:function(){r(n.id)},type:"button"},Gt.createElement(pB,{className:"Moderator_removeIcon_lO0WY",glyph:hB.bMz})))},$Ee=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsStreamModeration.components.More"),ebe=function(e){var t=e.className,n=e.count,r=e.onClick;return Gt.createElement("div",{className:cG()("More_root_IFF0_",t),onClick:r},Gt.createElement("span",{className:"More_text_Yj4ub"},(0,Qr.getParametrizedText)($Ee.showMore,{count:n})))},tbe=function(e){var t=e.className,n=e.word,r=e.onRemove;return Gt.createElement("div",{className:cG()("StopWord_stopWord_fk6yE",t)},Gt.createElement("span",{className:"StopWord_text_dpSNN"},n),Gt.createElement("button",{className:"StopWord_removeBtn_Rm4s6",onClick:function(){r(n)},type:"button"},Gt.createElement(pB,{className:"StopWord_removeIcon_eK7Pr",glyph:hB.bMz})))};const nbe={container:"Suggests_container_Aolay",notFound:"Suggests_notFound_EApnC",item:"Suggests_item__znEU",avatar:"Suggests_avatar_tNyhg",userName:"Suggests_userName_d_X5g",fadeIn:"Suggests_fadeIn_rC69P"};var rbe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsStreamModeration.components.Suggests"),obe=function(e){var t=e.className,n=e.query,r=e.users,o=e.onSelect,a=e.onClose;return Gt.createElement(Dx,{onClickOutside:a,trigger:gx.CLICK},Gt.createElement(UM,{className:cG()(t,nbe.container)},0!==(null==r?void 0:r.length)?r.map((function(e,t){return Gt.createElement("div",{key:t,className:nbe.item,onClick:(n=e.id,function(){return o(n)})},Gt.createElement(PB,{className:nbe.avatar,size:g.XXS,img:e.avatarUrl}),Gt.createElement("span",{className:nbe.userName},e.name));var n})):Gt.createElement("div",{className:nbe.notFound},Gt.createElement("span",{className:nbe.notFoundLine},(0,Qr.getParametrizedText)(rbe.notFound,{query:n})),Gt.createElement("span",{className:nbe.notFoundLine},rbe.tryAgain))))};const abe={addStopWordField:"SettingsStreamModeration_addStopWordField_f3esT",addModeratorField:"SettingsStreamModeration_addModeratorField_XazeX",addedStopWordsField:"SettingsStreamModeration_addedStopWordsField_hFHHQ",addStopWordInput:"SettingsStreamModeration_addStopWordInput_ybIOk",addModeratorSearch:"SettingsStreamModeration_addModeratorSearch_v_bqq",addStopWordInputField:"SettingsStreamModeration_addStopWordInputField_EeCWI",addStopWordInputCounter:"SettingsStreamModeration_addStopWordInputCounter_bAGvG",suggests:"SettingsStreamModeration_suggests_Qz3WS",label:"SettingsStreamModeration_label_qCY1y",sublabel:"SettingsStreamModeration_sublabel_FO1mm",stopWords:"SettingsStreamModeration_stopWords_wQPzo",moderators:"SettingsStreamModeration_moderators_RDqy8",stopWord:"SettingsStreamModeration_stopWord_um29m",moderator:"SettingsStreamModeration_moderator_EibOZ",emptyText:"SettingsStreamModeration_emptyText_YtI58"};var ibe=function(){return ibe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ibe.apply(this,arguments)},lbe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},sbe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},cbe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ube=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsStreamModeration"),dbe=oo("StreamModerationSettings");const fbe={root:"ExternalAppCard_root_ZsT84",appIcon:"ExternalAppCard_appIcon_B85V_",title:"ExternalAppCard_title_XN0kO",titleConnected:"ExternalAppCard_titleConnected_Fc9Fs",button:"ExternalAppCard_button___lxH",footer:"ExternalAppCard_footer_yTr5k",iconContainer:"ExternalAppCard_iconContainer_GhKFg",name:"ExternalAppCard_name_R0gKf",footerLink:"ExternalAppCard_footerLink_NXTuh",fadeIn:"ExternalAppCard_fadeIn_a2dAu"};var mbe=function(e){var t,n=e.classNames,r=void 0===n?{}:n,o=e.icon,a=e.title,i=e.isConnected,l=e.userName,s=e.buttonText,c=e.description,u=e.footerElem,d=e.onConnectClick,f=e.onDisconnectClick;return Gt.createElement("div",{className:cG()(fbe.root,r.root)},Gt.createElement("div",{className:fbe.iconContainer},Gt.createElement(pB,{glyph:o,className:cG()(fbe.appIcon,r.appIcon)})),Gt.createElement("div",{className:cG()(fbe.title,(t={},t[fbe.titleConnected]=i,t))},a),l&&Gt.createElement("div",{className:fbe.name},l),Gt.createElement("div",{className:fbe.button},i?Gt.createElement(HB,{type:"button",onClick:f},s):Gt.createElement(FB,{type:"button",onClick:d},s)),Gt.createElement("div",{className:cG()(fbe.footer)},Gt.createElement("div",{className:fbe.footerDescription},c),Gt.createElement("div",{className:cG()(fbe.footerLink,r.footer)},u)))};const pbe={link:"SettingsExternalApps_link_Xf3Rf",arrow:"SettingsExternalApps_arrow_NyKbt",server:"SettingsExternalApps_server_jGTTQ",serverWrapper:"SettingsExternalApps_serverWrapper_NH1Ag",disconnectServer:"SettingsExternalApps_disconnectServer_mgprV",discordServerName:"SettingsExternalApps_discordServerName_XBIbm",footerDiscord:"SettingsExternalApps_footerDiscord_uIvKW",fadeIn:"SettingsExternalApps_fadeIn_AYKvh"};var hbe,vbe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsExternalApps"),gbe=function(e){var t=e.isBlogger,n=e.hasDiscordServer,o=e.discordServerName,a=e.hasAccountDiscord,i=e.hasAccountTelegram,l=e.classNames,s=e.userNameTelegram,c=e.userNameDiscord,u=e.connectToDiscordBot,d=e.connectToTelegram,f=e.connectToDiscord,m=e.disconnectDiscordServer,p=e.disconnectFromApp,h=nr().externalApps,v=h.discord,g=h.telegram,y=i?vbe.buttonText.disconnected:vbe.buttonText.connected,_=a?vbe.buttonText.disconnected:vbe.buttonText.connected,E=Qo(r.DISCORD),b=Qo(r.TELEGRAM);return Gt.createElement("div",{className:cG()(pbe.cardsList,l.cardsList)},b&&Gt.createElement(mbe,{icon:hB.PVw,isConnected:i,title:vbe.telegram.title,userName:s,buttonText:y,footerElem:!i&&g.tutorialUrl?Gt.createElement(cM,{to:g.tutorialUrl,className:pbe.link},vbe.tuneUpText):null,classNames:{root:l.appCardContainer},onConnectClick:d,onDisconnectClick:p(Q.TELEGRAM)}),E&&Gt.createElement(mbe,{icon:hB.tj4,isConnected:a,title:vbe.discord.title,userName:c,buttonText:_,description:!n&&t?Gt.createElement("span",{onClick:u,className:pbe.link},vbe.discord.serverConnection):null,footerElem:n?Gt.createElement("div",{className:pbe.serverWrapper},Gt.createElement("span",{className:pbe.server},vbe.server)," ",Gt.createElement("span",{className:pbe.discordServerName},o),Gt.createElement("div",{onClick:m,className:pbe.disconnectServer},vbe.disconnectServer)):n||a||!v.tutorialUrl?null:Gt.createElement(cM,{to:v.tutorialUrl,className:pbe.link},vbe.tuneUpText),classNames:{root:l.appCardContainer,footer:n&&pbe.footerDiscord},onConnectClick:f,onDisconnectClick:p(Q.DISCORD)}))},ybe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsExternalApps.desktop"),_be=(0,Qr.getTranslation)("@common/components.PaymentBindList.PaymentBindListAddNewCardButton"),Ebe=function(e){var t=e.isPrimary,n=void 0!==t&&t;return Gt.createElement(cM,{className:"PaymentBindListAddNewCardButton_link_LSZff",to:ir.SETTINGS_NEW_CARD},!n&&Gt.createElement(pB,{glyph:hB.zNh,className:"PaymentBindListAddNewCardButton_plusIcon_UVTsF"}),_be.addCard[n?"first":"extra"])},bbe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sbe=(0,Qr.getTranslation)("@common/components.PaymentBindList.PaymentBindListItem"),Tbe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isSettingsShown:!1},t.showSettings=function(){t.setState({isSettingsShown:!0})},t.hideSettings=function(){t.setState({isSettingsShown:!1})},t.onRemoveCard=function(){var e=t.props,n=e.paymentMethod,r=e.onRemove,o=e.canRemove,a=e.onError;o?r():a({paymentMethod:n})},t}return bbe(t,e),t.prototype.getWalletName=function(){var e=this.props.paymentMethod;return Sbe.methods[e]||""},t.prototype.render=function(){var e,t,n=this.props,r=n.className,o=n.settingsButtonClassName,a=n.customSettingIcon,i=n.paymentType,l=n.paymentMethod,s=n.value,c=n.deleted,u=n.isRemoveDisabled,d=this.state.isSettingsShown,f=l===Ee.CARD,m=f?s.slice(0,4).concat("..",s.slice(6)):s;return Gt.createElement(qB,{className:fB()("PaymentBindListItem_container_VgU_T",r,(e={},e.PaymentBindListItem_hasError_XtfmQ=c,e))},Gt.createElement("div",{className:"PaymentBindListItem_paymentTypeContainer_uPdeV"},Gt.createElement("span",{className:"PaymentBindListItem_boldString_grLX8"},f?i:this.getWalletName())),Gt.createElement("div",null,Gt.createElement(Q3,{description:m})),c&&Gt.createElement("div",{className:"PaymentBindListItem_deletedCardText_TdKM8"},Sbe.inactiveCardError),!u&&Gt.createElement("div",{className:"PaymentBindListItem_settingsContainer_zaoB8"},Gt.createElement("div",{className:fB()("PaymentBindListItem_settings_B_wdd",o)},Gt.createElement(pB,{glyph:a||hB.iCC,onClick:this.showSettings,className:"PaymentBindListItem_settingsIcon_IuoDh",classNameSvg:fB()("PaymentBindListItem_settingSvg_iN7U2",(t={},t.PaymentBindListItem_active_VE0cG=d,t))}),d&&Gt.createElement("div",{className:"PaymentBindListItem_settingsPopupContainer_UgUU0"},Gt.createElement(Dx,{onClickOutside:this.hideSettings,trigger:gx.CLICK},Gt.createElement("div",{className:"PaymentBindListItem_settingsPopup_h7qfU",onClick:this.onRemoveCard},f?Sbe.unbindCard:Sbe.unbind))))))},t.defaultProps={canRemove:!0},t}(Gt.PureComponent),Ibe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nbe=(0,Qr.getTranslation)("@common/components.PaymentBindList.PaymentBindListNotFound"),Cbe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ibe(t,e),t.prototype.render=function(){return Gt.createElement(qB,null,Gt.createElement("div",{className:"PaymentBindListNotFound_mainLabelContainer_mNgmP"},Nbe.noPayment),this.props.children)},t}(Gt.PureComponent),wbe=function(e){var t=e.paymentBinds,n=e.removePayment,r=e.isAllowedToDeleteLastBind,o=e.isRemoveDisabled,a=e.onRemoveError,i=e.classNames,l=e.customSettingIcon,s=e.customBindingButton,c=t&&t.length>1||r,u=null!=t&&t.length>0,d=function(e){return s||Gt.createElement(Ebe,{isPrimary:e})};return Gt.createElement("div",{className:"PaymentBindList_container_VkSna"},u&&Gt.createElement("div",{className:null==i?void 0:i.wrapper},t.map((function(e){var t=e.payType,r=e.payMethod,s=e.description,u=e.id,d=e.deleted;return Gt.createElement("div",{className:fB()("PaymentBindList_listItem_NFlL7",null==i?void 0:i.itemWrapper),key:u},Gt.createElement(Tbe,{paymentType:t,paymentMethod:r,value:s,onRemove:function(){return n(u)},canRemove:c,isRemoveDisabled:o,deleted:d,onError:a,className:fB()("PaymentBindList_listItemCart_wioVa",null==i?void 0:i.item),settingsButtonClassName:null==i?void 0:i.settings,customSettingIcon:l}))}))),u?d():Gt.createElement(Cbe,null,d(!0)))},Obe=(0,Qr.getTranslation)("@boosty/common/components.DeleteAccount"),Abe=function(e){var t=e.name,n=fH().showPopup,r=jG().showAlert;return Gt.createElement(VB,{className:"DeleteAccount_button_LfVtJ",onClick:function(){return n({type:a.DELETE_ACCOUNT,data:{showAlert:r}})},type:"button",name:t},Obe.delete)},Pbe=function(e){var t=e.isValid,n=e.dirty,r=e.isSubmitting,o=e.submitForm,a=e.values,i=e.initialValues,l=e.excludedFieldNames,s=(0,Gt.useCallback)((0,ii.debounce)((function(){t&&o()}),1e3),[o,t]);return(0,Gt.useEffect)((function(){if(t&&n&&!r){var e=!0;(null==l?void 0:l.length)&&(e=Object.keys(i).some((function(e){return-1===l.indexOf(e)&&!(0,ii.isEqual)(i[e],a[e])}))),e&&("photo"in a&&(null==a?void 0:a.photo)?o():s())}}),[t,n,r,a,o,s,i,l]),null},Lbe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditEmailField"),Rbe=function(e){var t=e.description,n=e.label,r=e.placeholder,o=e.isDisabled,a=e.isReadOnly,i=e.onChangeClick,l=e.onBlur,s=e.onKeyDown;return Gt.createElement(Gz.gN,{name:mz.EMAIL},(function(e){var c=e.field,u=c.value,d=c.onChange,f=c.onBlur,m=c.name,p=e.form,h=p.errors,v=p.touched[mz.EMAIL]&&!h[mz.EMAIL],g=o||a,y=o&&!a?Gt.createElement(zB,{onClick:i},Lbe.change):null;return Gt.createElement(Zx,{description:t,label:n,name:m,onBlur:function(e){f(e),l()},onChange:d,onKeyDown:s,value:u,isValid:v,placeholder:r,disabled:g,rightElement:y})}))},kbe=function(e){var t=e.description,n=e.label,r=e.placeholder,o=e.isEditEnabled,a=e.error,i=e.onBlur,l=e.onKeyDown;return Gt.createElement(Gz.gN,{name:mz.NAME},(function(e){var s=e.field,c=s.value,u=s.onChange,d=s.onBlur,f=s.name;return Gt.createElement(Zx,{description:t,label:n,name:f,onBlur:function(e){d(e),i()},onChange:u,onKeyDown:l,value:c,error:a,placeholder:r,disabled:!o})}))};!function(e){e.BUTTON="BUTTON"}(hbe||(hbe={}));var Dbe=function(){return Dbe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Dbe.apply(this,arguments)},Ube=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Bbe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditPhoneField"),xbe=oo("SettingsEditPhoneField"),Mbe=function(e){var t=e.btnTitle,n=e.onClick,r=Ube((0,Gt.useState)(e.phone),2),o=r[0],a=r[1],i=Ube((0,Gt.useState)(!1),2),l=i[0],s=i[1];return(0,Gt.useEffect)((function(){a(e.phone)}),[e.phone]),(0,Gt.useEffect)((function(){e.isFetched?setTimeout((function(){return s(!0)}),300):s(!1)}),[e.isFetched]),Gt.createElement(Gt.Fragment,null,Gt.createElement("span",{className:"SettingsEditPhoneField_label_VrC8H"},Bbe.label),!l&&Gt.createElement(uM,{className:"SettingsEditPhoneField_spinner_PvlK1",size:24,solid:!0}),l&&Gt.createElement("div",{className:"SettingsEditPhoneField_container_T4BnJ"},o&&Gt.createElement("span",{className:"SettingsEditPhoneField_phone_StZBV"},o),Gt.createElement(VB,Dbe({className:"SettingsEditPhoneField_button_uwOfF",onClick:function(){n()},type:"button",name:mz.PHONE},Na(xbe(hbe.BUTTON))),Gt.createElement(pB,{className:"SettingsEditPhoneField_icon_oVqRB",glyph:hB.S9Z}),t)),Gt.createElement("div",{className:"SettingsEditPhoneField_description_itrVl"},Bbe.description))},Fbe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Gbe=function(){return Gbe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gbe.apply(this,arguments)},Hbe=function(e){var t=e.classNames,n=e.tooltipContent,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["classNames","tooltipContent"]);return Gt.createElement("div",{className:"SettingsEditToggler_root_PlNYM"},Gt.createElement(SF,Gbe({},r,{togglePosition:"left",size:dF.MIDDLE,classNames:{label:cG()("SettingsEditToggler_label_Enb8D",null==t?void 0:t.label),labelText:cG()("SettingsEditToggler_labelText_N8NKx",null==t?void 0:t.labelText)}})),Gt.createElement(eG,{classNames:{block:"SettingsEditToggler_hintBlock_o2Q7k",tooltip:cG()("SettingsEditToggler_hintTooltip_o2Kr1")}},Gt.createElement("div",{className:"SettingsEditToggler_tooltipContent_pjqmx"},n)))};const Wbe={exampleLink:"SettingsEditRss_exampleLink_UR2NM",link:"SettingsEditRss_link_k0SSx",icon:"SettingsEditRss_icon_Goo37",example:"SettingsEditRss_example__IqtA",fadeIn:"SettingsEditRss_fadeIn_Tb4Uw"};var Vbe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditRss"),jbe=function(e){var t=e.showAlert,n=e.showRssLinkPopup,r=function(e){var t=void 0===e?{}:e,n=t.onSuccess,r=t.onError,o=(0,Vt.I0)(),a=(0,Vt.v9)(nO),i=Fbe((0,Gt.useState)(!1),2),l=i[0],s=i[1],c=Fbe((0,Gt.useState)(null),2),u=c[0],d=c[1];return{isRssTurnedOn:(0,Vt.v9)(cO),isLoading:l,error:u,toggleRss:function(e){return void 0,void 0,i=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),s(!0),d(null),[4,o((0,dm.Ax)(Ey.action)({blogUrl:a,value:e}))];case 1:return i.sent(),n&&n(),[3,4];case 2:throw t=i.sent(),d(u),r&&r(t),t;case 3:return s(!1),[7];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function r(e){try{a(i.next(e))}catch(e){n(e)}}function o(e){try{a(i.throw(e))}catch(e){n(e)}}function a(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(r,o)}a((i=i.apply(undefined,[])).next())}));var t,i}}}({onError:function(){t({type:p.ERROR,text:Vbe.error})},onSuccess:function(){t({type:p.SUCCESS,text:Vbe.success})}}),o=r.toggleRss,a=r.isRssTurnedOn,i=r.isLoading,l=lB({realCheckedState:a,promise:o}),s=l.isChecked,c=l.optimisticToggle;return Gt.createElement(Hbe,{checked:s,isDisabled:i,onToggle:c,label:Vbe.settingsTitle,tooltipContent:Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:Wbe.description},Vbe.description.text),Gt.createElement("div",{className:Wbe.example},Gt.createElement(VB,{onClick:function(e){e.preventDefault(),e.stopPropagation(),n()},className:Wbe.exampleLink},Gt.createElement(pB,{glyph:hB.JHz,className:Wbe.icon}),Vbe.testLink)))})},zbe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.hooks.useCurrentUserFlags"),Ybe=function(e){var t=e.flagValue,n=e.flag,r=e.errorText,o=e.successText,a=(0,Vt.I0)(),i=(0,Vt.v9)(nO),l=jG().showAlert,s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=lB({realCheckedState:t,promise:function(e){return void 0,void 0,s=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),u(!0),[4,a((0,dm.Ax)(Qg.action)({blogUrl:i,value:e,flag:n}))];case 1:return s.sent(),l({type:p.SUCCESS,text:o||zbe.success}),[3,4];case 2:throw t=s.sent(),l({type:p.ERROR,text:r||zbe.error}),t;case 3:return u(!1),[7];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function r(e){try{a(s.next(e))}catch(e){n(e)}}function o(e){try{a(s.throw(e))}catch(e){n(e)}}function a(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(r,o)}a((s=s.apply(undefined,[])).next())}));var t,s}});return{isLoading:c,isChecked:d.isChecked,toggleFlag:d.optimisticToggle}},Kbe=function(){return Kbe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kbe.apply(this,arguments)},qbe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Xbe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Qbe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Jbe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.hooks.useSettingsEdit"),Zbe=function(e){var t=e.needSubmitProfileSettings,n=e.needSubmitSocialLinks,r=e.needSubmitBlogSettings,o=(0,Vt.v9)(XO),a=Qbe((0,Gt.useState)(!1),2),i=a[0],l=a[1],s=Qbe((0,Gt.useState)(Boolean(null==o?void 0:o.email)),2),c=s[0],u=s[1],d=(0,Gt.useRef)(null),f=(0,Vt.v9)(Hw),m=_k().isBlogger,h=bk(null==f?void 0:f.blogUrl).canEdit,v=ZA(m,h),g=(0,Vt.v9)(Ww),y=(0,Vt.v9)(bA),_=(0,Vt.v9)(CA),E=(0,Vt.v9)(vA),b=(0,Vt.v9)(gA),S=(0,Vt.v9)(uA),T=(0,Vt.v9)(dA),I=(0,Vt.I0)(),N=jG().showAlert;(0,Gt.useEffect)((function(){m&&(!g.isFetched||null!=f&&f.blogUrl!==o.blogUrl)&&(I((0,dm.Ax)(Nm.action)({blogUrl:o.blogUrl})),I((0,dm.Ax)(qp.action)({blogUrl:o.blogUrl}))),I((0,dm.Ax)($v.action)({withDeleted:!0,currency:y})),I((0,dm.Ax)(Jv.action)())}),[]),(0,Gt.useEffect)((function(){var e=d.current,t=e.dirty,n=e.isSubmitting,r=e.resetForm;!t&&n&&r(),_.isFetched&&r()}),[_]);var C=function(e){return I((0,dm.Ax)(ty.action)({blogUrl:f.blogUrl,blog:Kbe(Kbe({},f),e)}))};return{formRef:d,isLoading:i,isEmailInputDisabled:c,blog:f,currentUser:o,currentUserPhoneNumber:E,paymentBindsList:S,paymentBindsExtra:T,canEditSettings:v,isBlogger:m,phoneNetworkStatus:b,removePayment:function(e){return qbe(void 0,void 0,void 0,(function(){return Xbe(this,(function(t){switch(t.label){case 0:return[4,I((0,dm.Ax)(eg.action)({id:e}))];case 1:return t.sent(),[2]}}))}))},getPhoneBtnTitle:function(){return E?Jbe.phoneField.btnChange:Jbe.phoneField.btnAdd},activateEmailInput:function(){u(!1)},onSubmit:function(e){return qbe(void 0,void 0,void 0,(function(){var a,i;return Xbe(this,(function(s){switch(s.label){case 0:if(u(!0),!v)return[2];l(!0),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.all([t?(h=e,I((0,dm.Ax)(cg.action)(Kbe(Kbe({},h),{id:o.id})))):Promise.resolve(),m&&r?C(e):Promise.resolve(),m&&n?(c=e.socialLinks,I((0,dm.Ax)(uy.action)({blogUrl:f.blogUrl,socialLinks:c}))):Promise.resolve()])];case 2:return s.sent(),l(!1),N({type:p.SUCCESS,text:Jbe.alerts.successSettingsChange,timeout:1e3}),[3,4];case 3:throw a=s.sent(),i=a.serverError.error,l(!1),N({type:p.ERROR,text:Jbe.alerts.errorSettingsChange}),i!==ne.IMAGE_TOO_BIG&&i!==ne.WRONG_IMAGE_FORMAT||d.current.setFieldValue("photo",null),a;case 4:return[2]}var c,h}))}))}}},$be=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditShowPostDonations.hooks.useSettingsEditShowPostDonations"),eSe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditShowPostDonations"),tSe=function(e){var t=e.isEditEnabled,n=function(){var e=(0,Vt.v9)(XO).blog;return Ybe({flagValue:!!e&&e.showPostDonations,flag:_t.SHOW_POST_DONATION,errorText:$be.errorText,successText:$be.successText})}(),r=n.isLoading,o=n.isChecked,a=n.toggleFlag;return Gt.createElement(Hbe,{isDefaultChecked:o,isDisabled:!t||r,onToggle:a,label:eSe.label,tooltipContent:eSe.tooltip})},nSe=function(e){var t=e.currentUser;return Gt.createElement(rj,{currentUser:t,className:"AccountScheduledForDeletionSettingsMessage_text_nlMKz"})},rSe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditHasAdultContentField.hooks.useAdultContentSetting"),oSe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditHasAdultContentField"),aSe=function(e){var t=e.isEditEnabled,n=function(){var e=(0,Vt.v9)(XO).blog;return Ybe({flagValue:!!e&&e.hasAdultContent,flag:_t.HAS_ADULT_CONTENT,errorText:rSe.errorText,successText:rSe.successText})}(),r=n.isLoading,o=n.isChecked,a=n.toggleFlag,i=nr().offer.userAgreement,l=(0,Gt.useMemo)((function(){return Gt.createElement(Gt.Fragment,null,(0,Qr.getParametrizedText)(oSe.tooltip[1],{projectNameCapitalized:nr().projectName.capitalized})," ",Gt.createElement(cM,{to:i.url,target:"_blank"},oSe.tooltip[2]),oSe.tooltip[3])}),[i,oSe]);return Gt.createElement(Hbe,{isDefaultChecked:o,isDisabled:!t||r,onToggle:a,label:oSe.label,tooltipContent:l})},iSe=function(e){var t=e.isEditEnabled;return Gt.createElement(aSe,{isEditEnabled:t,tooltipContentClassName:"SettingsEditHasAdultContentField_tooltipContent_i6snO",tooltipClassName:"SettingsEditHasAdultContentField_hintTooltip_ctyRb"})},lSe=function(){return lSe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lSe.apply(this,arguments)},sSe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},cSe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditPhotoPreview"),uSe={mobile:{width:103,height:127},desktop:{width:225,height:280}},dSe=function(e){var t,n=e.photo,r=e.avatarUrl,o=e.hasAvatar,a=e.isMobile,i=e.isTouched,l=a?uSe.mobile:uSe.desktop,s=o&&!!r,c=i&&!!n,u=sSe((0,Gt.useState)(!1),2),d=u[0],f=u[1],m=sSe((0,Gt.useState)(!1),2),p=m[0],h=m[1],v=sSe((0,Gt.useState)(""),2),g=v[0],y=v[1];return(0,Gt.useEffect)((function(){if(c){f(!0),h(!1);var e=new FileReader;e.onerror=function(){f(!1),h(!0)},e.onloadend=function(){f(!1),h(!1),y(e.result)},e.readAsDataURL(n)}else s&&y(Bo(lSe({url:r},l)))}),[c,s,n]),s||c?Gt.createElement("div",{className:cG()("SettingsEditPhotoPreview_centredBox_mNKUc",(t={},t.SettingsEditPhotoPreview_loading_v2aXn=d,t)),style:l},d&&Gt.createElement(uM,null),p&&Gt.createElement(pB,{glyph:hB.Ucq}),!d&&!p&&Gt.createElement("img",{className:"SettingsEditPhotoPreview_image_NVmL8",src:g,style:l})):Gt.createElement("div",{className:"SettingsEditPhotoPreview_emptyPhoto_BC5XW",style:l},Gt.createElement("span",{className:"SettingsEditPhotoPreview_text_vaw0W"},cSe.noPhoto))},fSe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditPhotoField"),mSe=function(e){var t=e.supportedMimeTypes,n=e.photoClassName,r=e.avatarUrl,o=e.hasAvatar,a=e.isEditEnabled,i=e.renderFileButton,l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!0),2),s=l[0],c=l[1],u=jG().showAlert,d=nr(),f=d.isMobile,m=d.user.avatar.limits,h=m.maxSize,v=m.unit,g=m.maxWidth,y=m.checkWidth,_=function(){return Lo(h,v,Z.MB)},E=function(e){var t="";switch(e){case oe.IMAGE_SIZE_LIMIT:t="".concat((0,Qr.getParametrizedText)(fSe.errors.limitImageSize,{limit:_()}));break;case oe.IMAGE_WIDTH_LIMIT:t="".concat((0,Qr.getParametrizedText)(fSe.errors.limitImageWidth,{limit:g}))}return t},b=function(e){var t=e.setFieldTouched,n=e.setFieldValue;return function(e){return void 0===e&&(e=Yt.noop),function(r){return void 0,void 0,a=function(){var o,a,i,l;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(s){switch(s.label){case 0:return o=r.target.files,[4,Yd(a=o[0])];case 1:return((i=s.sent()).height>=g||i.width>=g)&&y?(T(E(oe.IMAGE_WIDTH_LIMIT)),[3,6]):[3,2];case 2:return ro(a.size,Z.B,v)>h?(T(E(oe.IMAGE_SIZE_LIMIT)),[3,6]):[3,3];case 3:return S(a.type)?[3,4]:(T(fSe.errors.wrongType),[3,6]);case 4:return[4,Qd(o[0])];case 5:return l=s.sent().file,n(mz.PHOTO,l,!0),t(mz.PHOTO,!0),I(),e(),[2];case 6:return N(),[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function r(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(n,r)}i((a=a.apply(undefined,[])).next())}));var o,a}}},S=function(e){return t.indexOf(e)>=0},T=function(e){u({type:p.ERROR,text:e})},I=function(){c(!0)},N=function(){c(!1)};return Gt.createElement(Gz.gN,{name:mz.PHOTO},(function(e){var t=e.field,l=t.name,c=t.value,u=e.form,d=u.setFieldValue,m=u.setFieldTouched,p=u.touched;return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:cG()("SettingsEditPhotoField_photo_DEj6F",n)},Gt.createElement(dSe,{avatarUrl:r,hasAvatar:o,isTouched:p[mz.PHOTO],photo:c,isMobile:f})),a&&Gt.createElement("div",{className:"SettingsEditPhotoField_upload_OiNqw"},i({name:l,isValid:s,onChangeCreator:b({setFieldValue:d,setFieldTouched:m})}),Gt.createElement(px,{text:(0,Qr.getParametrizedText)(fSe.photoLimits,{limit:_()}),className:"SettingsEditPhotoField_fileDescription_Wfpmg"})))}))},pSe=function(e){var t=e.avatarUrl,n=e.hasAvatar,r=e.isEditEnabled,o=vj(),a=o.activeStep,i=o.removeActiveStep,l=function(){a===ln.ADD_PHOTO&&i()};return Gt.createElement(mSe,{avatarUrl:t,hasAvatar:n,isEditEnabled:r,supportedMimeTypes:["image/jpeg","image/png"],renderFileButton:function(e){var t=e.isValid,n=e.name,r=e.onChangeCreator;return Gt.createElement(Zte,{step:ln.ADD_PHOTO,className:"SettingsEditPhotoField_buttonWrapper_FMHFl"},Gt.createElement(mx,{format:[".jpg",".png"],id:"myFile",name:n,isValid:t,onChange:r(l)}))}})};const hSe="SettingsEdit_blockTitle_lMypl";var vSe=function(){return vSe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vSe.apply(this,arguments)},gSe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.desktop"),ySe=function(){var e=Zbe({needSubmitProfileSettings:!0,needSubmitBlogSettings:!0}),t=e.formRef,n=e.blog,o=e.currentUser,i=e.currentUserPhoneNumber,l=e.paymentBindsList,s=e.paymentBindsExtra.allowDeleteLastBind,c=e.isLoading,u=e.isEmailInputDisabled,d=e.canEditSettings,f=e.isBlogger,m=e.phoneNetworkStatus,p=e.getPhoneBtnTitle,h=e.activateEmailInput,v=e.removePayment,g=e.onSubmit,y=(0,dH.useOverlayPopups)(),_=y.showPopup,E=y.closePopup,b=jG().showAlert,S=vj(),T=S.activeStep,I=S.removeActiveStep,N=nr().isDeleteAccountEnabled,C=Qo(r.SETTINGS_PROFILE_SHOW_DONATIONS_UNDER_POST),w=Qo(r.LINK_PHONE_TO_PROFILE),O=Qo(r.ADULT_CONTENT);(0,Gt.useEffect)((function(){if(T===ln.ADD_SOCIAL){var e=document.getElementById("social");setTimeout((function(){e.scrollIntoView(Zd())})),I()}}),[T]);var A=function(){_({type:a.RSS_LINK_POPUP,data:{blogUrl:n.blogUrl,authorName:n.owner.name,showAlert:b}})},P=function(){_({type:a.CHANGE_PHONE})},L=function(e){var t=_({type:a.CONFIRM,data:{onConfirm:function(){return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,v(e)];case 1:return n.sent(),E(t),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r},description:gSe.confirmUnbind}}).id},R=function(e){var t=e.paymentMethod;_({type:a.UNBIND_CARD_ERROR,data:{paymentMethod:t}})};return Gt.createElement(Gz.J9,{initialValues:{name:o.name,email:o.email,photo:null},enableReinitialize:!0,innerRef:t,validateOnMount:!0,validationSchema:Iz({hasEmail:Boolean(o.email)}),onSubmit:g},(function(e){var t,n=e.handleSubmit,r=e.dirty,a=e.submitForm,v=e.isSubmitting,g=e.isValid,y=e.errors,_=function(){g&&r&&!v&&a()},E=function(e){e.key===ae.ENTER&&(e.target.blur(),e.preventDefault(),e.stopPropagation())};return Gt.createElement("div",{className:cG()("SettingsEdit_container_ycz84",(t={},t.SettingsEdit_isLoading_z3o3F=c,t))},Gt.createElement("form",{className:"SettingsEdit_form_EEYht",onSubmit:n},Gt.createElement("div",{className:"SettingsEdit_photoBlock_iom21"},Gt.createElement("div",{className:hSe},gSe.profilePhoto),Gt.createElement("div",{className:"SettingsEdit_photoFieldContainer_rHg3Z"},Gt.createElement(pSe,{hasAvatar:o.hasAvatar,avatarUrl:o.avatarUrl,isEditEnabled:d}))),Gt.createElement(Ix,null,Gt.createElement(kbe,{description:gSe.nameInput.description,label:gSe.nameInput.label,placeholder:gSe.nameInput.placeholder,isEditEnabled:d,error:y[mz.NAME],onBlur:_,onKeyDown:E})),w&&Gt.createElement(Ix,null,Gt.createElement(Mbe,{isFetched:null==m?void 0:m.isFetched,phone:i,btnTitle:p(),onClick:P})),Gt.createElement(Ix,null,Gt.createElement(Rbe,{description:gSe.emailInput.description,label:gSe.emailInput.label,placeholder:gSe.emailInput.placeholder,changeTitle:gSe.btnTitles.change,isReadOnly:!d,isDisabled:u,onChangeClick:h,onBlur:_,onKeyDown:E})),Gt.createElement(Ix,null,Gt.createElement("div",{className:hSe},gSe.payMethod),Gt.createElement(wbe,{isRemoveDisabled:!d,removePayment:L,paymentBinds:l,isAllowedToDeleteLastBind:s,onRemoveError:R})),f&&Gt.createElement(Gt.Fragment,null,O&&Gt.createElement(Ix,{isSmallIndent:!0},Gt.createElement(iSe,{isEditEnabled:d})),Gt.createElement(Ix,{isSmallIndent:!0},Gt.createElement(jbe,{showAlert:b,showRssLinkPopup:A})),C&&Gt.createElement(Ix,{isSmallIndent:!0},Gt.createElement(tSe,{isEditEnabled:d}))),Gt.createElement(Ix,null,o.isScheduledForDeletion?Gt.createElement(nSe,{currentUser:o}):N&&Gt.createElement(Abe,null)),d&&Gt.createElement(Pbe,vSe({excludedFieldNames:[mz.NAME,mz.SOCIAL_LINKS,mz.EMAIL]},e))))}))};ySe.getFetchActions=function(e,t){var n=XO(e),r=n.blogUrl,o=n.defaultCurrency;return function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([function(){return Jv.action()},function(){return $v.action({withDeleted:!0,currency:o})}],Qbe(r&&[function(){return qp.action({blogUrl:r})}]),!1)};var _Se=function(e){return ESe().map((function(t){return{type:t,url:bSe(e,t)}}))},ESe=function(){return nr().socialLinksSettings.filter((function(e){return e.isEnabled})).map((function(e){return e.type}))},bSe=function(e,t){if(Array.isArray(e)){var n=e.find((function(e){return e.type===t}));return n?n.url:""}return""},SSe=function(e,t,n){var r=bSe(t,n);return!e||!r||Fa(r)},TSe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsEdit.components.SettingsEditSocialLinksField"),ISe=function(e){var t=e.isEditEnabled,n=e.socialLinks,r=e.onBlur,o=e.onKeyDown,a=(0,Gt.useRef)(_Se(n));return(0,Gt.useEffect)((function(){a.current=_Se(n)}),[n]),Gt.createElement(Gz.gN,{name:mz.SOCIAL_LINKS},(function(e){var n,i=e.field,l=i.name,s=i.value,c=i.onBlur,u=e.form,d=u.setFieldValue,f=u.setFieldTouched,m=u.errors,p=u.touched,h=m&&p&&!!m[mz.SOCIAL_LINKS]&&!!p[mz.SOCIAL_LINKS],v=function(e){c(e),r()};return Gt.createElement(Gt.Fragment,null,(n=ESe(),Mr()?n.filter((function(e){return!xr.includes(e)})):n).map((function(e){return Gt.createElement("div",{className:"SettingsEditSocialLinksField_item_mXsMD",key:e},Gt.createElement("div",{className:"SettingsEditSocialLinksField_iconWrapper_dg8Vh"},Gt.createElement(ene,{type:e})),Gt.createElement(Zx,{classNameInput:"SettingsEditSocialLinksField_input_hpNrj",name:"".concat(l,"_").concat(e),onBlur:v,onChange:function(t){return function(e,t,n,r){var o=a.current.find((function(e){return e.type===t}));o&&(o.url=e.target.value.trim()),n(mz.SOCIAL_LINKS,a.current.filter((function(e){return e.url&&e.url.length>0}))),r(mz.SOCIAL_LINKS,!0)}(t,e,d,f)},value:bSe(s,e),placeholder:e===Me.WEBSITE?TSe.items[e]:"".concat(TSe.placeholder," ").concat(TSe.items[e]),disabled:!t,isValid:SSe(h,s,e),onKeyDown:o}))})))}))},NSe=function(){var e;return Sz.Ry().shape(((e={})[mz.SOCIAL_LINKS]=Sz.nK().test("url","url is not a valid",(function(e){return!e||!e.some((function(e){return e.url&&e.url.trim().length>0&&!Fa(e.url)}))})),e))},CSe=function(e){var t=e.formClassName,n=Zbe({needSubmitSocialLinks:!0}),r=n.formRef,o=n.blog,a=n.canEditSettings,i=n.isBlogger,l=n.isLoading,s=n.onSubmit,c=o?o.socialLinks:[];return Gt.createElement(Gz.J9,{initialValues:{socialLinks:i&&c},enableReinitialize:!0,innerRef:r,validateOnMount:!0,validationSchema:NSe(),onSubmit:s},(function(e){var n,r=e.handleSubmit,o=e.dirty,i=e.submitForm,s=e.isSubmitting,u=e.isValid;return Gt.createElement("div",{className:cG()("SettingsSocial_container_W_xfF",(n={},n.SettingsSocial_isLoading_bEobY=l,n))},Gt.createElement("form",{className:t,onSubmit:r},Gt.createElement(Ix,null,Gt.createElement(ISe,{socialLinks:c,isEditEnabled:a,onBlur:function(){u&&o&&!s&&i()},onKeyDown:function(e){e.key===ae.ENTER&&(e.target.blur(),e.preventDefault(),e.stopPropagation())}}))))}))},wSe=function(e){var t,n=e.agent,r=n.avatarUrl,o=n.id,a=n.name,i=function(e){var t=e.agentUserId,n=(0,Vt.I0)(),r=(0,Vt.v9)(XO).blogUrl,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),a=o[0],i=o[1];return(0,Gt.useEffect)((function(){var e,o;a&&(o=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,n((0,dm.Ax)(hm.action)({blogUrl:r,userId:t}))];case 1:return e.sent(),[4,n((0,dm.Ax)(pm.action)({blogUrl:r}))];case 2:return e.sent(),[3,4];case 3:return e.sent(),i(!1),[3,4];case 4:return[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function r(e){try{i(o.next(e))}catch(e){n(e)}}function a(e){try{i(o.throw(e))}catch(e){n(e)}}function i(n){var o;n.done?t(n.value):(o=n.value,o instanceof e?o:new e((function(e){e(o)}))).then(r,a)}i((o=o.apply(void 0,[])).next())})))}),[a]),{isUnassigning:a,onUnassignAgent:function(){i(!0)}}}({agentUserId:o}),l=i.isUnassigning,s=i.onUnassignAgent;return Gt.createElement("div",{key:o,className:cG()("SettingsEditAgent_root_NV1GO",(t={},t.SettingsEditAgent_opaque_KTCPs=l,t))},Gt.createElement(PB,{img:r,size:g.XXS_OVERSIZE,className:"SettingsEditAgent_avatar_MYHmT"}),Gt.createElement("span",{className:"SettingsEditAgent_name_H4OTR"},a),Gt.createElement(pB,{glyph:hB.o7I,className:"SettingsEditAgent_closeButton_RAOZQ",onClick:l?Yt.noop:s}))},OSe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsAgents"),ASe=function(){var e=Mf(),t=function(e){var t=e.goToAssignAgentPage,n=(0,Vt.I0)(),r=(0,Vt.v9)(_w),o=(0,Vt.v9)(Ew),a=(0,Vt.v9)(XO).blogUrl;return(0,Gt.useEffect)((function(){a&&!r.length&&n(pm.action({blogUrl:a}))}),[a]),{agents:r,isLoading:o.isFetching,onAssignAgent:function(){t()}}}({goToAssignAgentPage:function(){return e(ir.SETTINGS_AGENT_ASSIGN)}}),n=t.agents,r=t.onAssignAgent,o=t.isLoading;return Gt.createElement("div",{className:"SettingsAgents_wrapper_s6OuV"},Gt.createElement("div",{className:"SettingsAgents_description_H0XgK"},OSe.description.text," ",Gt.createElement(cM,{className:"SettingsAgents_link_R1DWF",to:ir.SETTINGS_AGENT_RIGHTS},OSe.description.link),"."),o&&!(null==n?void 0:n.length)?Gt.createElement("div",{className:"SettingsAgents_spinnerWrapper_VYedJ"},Gt.createElement(uM,{solid:!0,size:30})):(null==n?void 0:n.length)>0?Gt.createElement("div",{className:"SettingsAgents_agentsList_fExR0"},n.map((function(e){return Gt.createElement(wSe,{key:e.id,agent:e})}))):null,Gt.createElement(FB,{onClick:r,className:"SettingsAgents_button_iNscQ",withIcon:!0},Gt.createElement(pB,{className:"SettingsAgents_icon_BgQ80",glyph:hB.Qgu}),OSe.assignAgent))},PSe=function(e){var t=jo(e);return Boolean(e)&&t},LSe=function(e){var t;return!Boolean(e.isOnlyPaidPosts||(null===(t=e.postTags)||void 0===t?void 0:t.length)>0||e.postsFrom||e.postsTo||e.searchQuery)},RSe=function(e){var t;return!(e.isOnlyAllowedPosts||e.isOnlyPaidPosts||(null===(t=e.postTags)||void 0===t?void 0:t.length)||e.searchQuery||e.postsTo||e.postsFrom)},kSe=function(){return kSe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kSe.apply(this,arguments)},DSe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},USe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},BSe=function(){var e,t=(0,Vt.I0)(),n=(0,Gt.useRef)(null),r=(0,Gt.useRef)(null),o=_k().currentUser,i=(0,Vt.v9)(UR),l=(0,Vt.v9)(BR),s=function(){var e=_k().currentUser,t=(0,Vt.v9)(Cw),n=(0,Gt.useMemo)((function(){return ui({currentUser:e})}),[e]),r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)((null==t?void 0:t.filter)||n),2),o=r[0],a=r[1],i=(0,Gt.useCallback)((function(e){var t=FV(FV({},o),e);a(t)}),[o]),l=(0,Gt.useCallback)((function(e){var t=(void 0===e?{}:e).excludeKeys,r=FV({},n);null==t||t.forEach((function(e){r[e]=o[e]})),a(r)}),[o]),s=(0,Gt.useCallback)((function(e){var t,r,a=(void 0===e?{}:e).excludeKeys,i=Object.entries(n);try{for(var l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),s=l.next();!s.done;s=l.next()){var c=s.value[0];if(!a||!a.includes(c))if("postTags"===c){if(!o.postTags||o.postTags.length!==n.postTags.length)return!0;var u=o.postTags.sort((function(e,t){return e.id-t.id})),d=n.postTags.sort((function(e,t){return e.id-t.id}));if(!(0,ii.isEqual)(u,d))return!0}else if(o[c]!==n[c])return!0}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return!1}),[o,n]);return{feedFilter:o,lastFetchFeedPostsParams:t,changeFilter:i,resetFilter:l,isFeedFilterApplied:s}}(),c=s.changeFilter,u=s.feedFilter,d=s.isFeedFilterApplied,f=s.resetFilter,m=s.lastFetchFeedPostsParams,p=(0,Vt.v9)(Uw),h=(0,Vt.v9)(RR),v=(0,Vt.v9)(DR),g=null==p?void 0:p.slice(0,10).map((function(e){return e.id})).join(""),y=Ok(g),_=(0,Vt.v9)(kR),E=(0,Vt.v9)(FP),b=(0,Vt.v9)(HP),S=(0,dH.useOverlayPopups)().showPopup,T=LSe(u);(0,Gt.useLayoutEffect)((function(){var e=!di(null==m?void 0:m.filter,u),t="feed"!==i,n=l!==(null==o?void 0:o.id);(e||t||n)&&(I({limit:10,filter:u,userId:null==o?void 0:o.id,reset:n||t}),T&&N({limit:5,reset:n||t}))}),[m,u,T,i,v,null==o?void 0:o.id,l]),(0,Gt.useEffect)((function(){y&&y!==g&&setTimeout(Of)}),[y,g]);var I=function(e){t(X_(kSe({},e)))},N=function(e){t(bE(kSe({},e)))};(0,Gt.useEffect)((function(){di(null==m?void 0:m.filter,u)||t(p_())}),[]),function(e){var t=e.feedFilter,n=(0,Vt.v9)(DR),r=(0,Vt.I0)(),o=(0,Vt.v9)(Cw),a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(0),2),i=a[0],l=a[1];(0,Gt.useEffect)((function(){o&&RSe(null==o?void 0:o.filter)&&n.isFetched&&setTimeout((function(){l((function(e){return e+1}))}),nr().feed.updateSessionTimeout)}),[n,null==o?void 0:o.filter]),(0,Gt.useEffect)((function(){i&&RSe(t)&&(r(SE()),r($_()))}),[i])}({feedFilter:u}),JH(),function(){var e=xf(),t=e.state,n=e.pathname,r=e.search,o=Mf(),a=(0,Vt.v9)(Bw),i=(0,Vt.v9)(DR);(0,Gt.useEffect)((function(){if((null==t?void 0:t.returnToPost)&&window.scrollY<50&&(null==a?void 0:a.length)&&i.isFetched){var e=document.querySelector('[data-post-id="'.concat(t.returnToPost,'"]'));e&&wf(e,{block:"top",isSmooth:!1,onScrolled:function(){o(n+r,{state:{},replace:!0,preventScrollReset:!0})}})}}),[i,null==a?void 0:a.length,t])}();var C=nr().postsMaxLoadMoreByScrollCount,w=v.isFetching||!!T&&b.isFetching,O=(!m||m.reset)&&w,A=v.isFetched&&(!T||Dr(b)),P=Boolean(A&&!(null==p?void 0:p.length)&&!!T&&!(null===(e=E.streams)||void 0===e?void 0:e.length)),L=!LSe(u),R=Boolean(h&&(null==m?void 0:m.offset)&&v.isFetching);return{feedFilter:u,maxAutoLoadMoreCount:C.mainFeed,posts:p,postsNetworkStatus:v,isFeedInitialFetching:O,areExtraDataFetching:R,isFeedFetching:w,areStreamsHidden:L,isEmptyFeed:P,streamsList:E,streamsNetworkStatus:b,feedFilterRef:n,isLastPostLoaded:_,getIsFeedFilterApplied:d,resetFilter:function(e){var t;f(e),null===(t=r.current)||void 0===t||t.clearInput()},changeFilter:c,loadMorePosts:function(){I({limit:5,offset:h,filter:u,userId:null==o?void 0:o.id})},showAuthPopup:function(){S({type:a.AUTH_SIGN_IN})},addTagToFilter:function(e){var t;(null===(t=u.postTags)||void 0===t?void 0:t.find((function(t){return t.id===e.id})))?c({postTags:u.postTags.filter((function(t){return t.id!==e.id}))}):c({postTags:USe(USe([],DSe(u.postTags||[]),!1),[e],!1)})}}},xSe=function(e,t){var n=t.currentUser;return[function(){return X_.action({limit:10,filter:ui({currentUser:n}),reset:!0,userId:n.id})},function(){return bE.action({limit:5,reset:!0})}]},MSe="search_root",FSe=(0,Qr.getTranslation)("@boosty/common/containers.MainFeed.common.components.EmptyMainFeed.components.AuthorItem"),GSe=function(e){var t=e.item,n=e.index,r=e.isAnimated,o=(0,Yt.getParametrizedUrl)(ir.ABOUT,{blogUrl:t.blogUrl}),a=Math.max(t.count.subscribers,0);return Gt.createElement("div",{className:"AuthorItem_root_EF8aj"},Gt.createElement(cM,{to:o,className:cG()("AuthorItem_animatedInner_RbMlQ",r&&"AuthorItem_animated_rA1LP"),style:{animationDelay:"".concat(150*n,"ms")},noStyles:!0},Gt.createElement("div",{className:"AuthorItem_leftBlock_rPd9X"},Gt.createElement("div",{className:"AuthorItem_avatarBlock_kXNv3"},Gt.createElement(PB,{size:g.S_OVERSIZE,img:t.owner.avatarUrl})),Gt.createElement("div",{className:"AuthorItem_textBlock_JKawF"},Gt.createElement("div",{className:"AuthorItem_authorName_bA8ML"},t.owner.name),Gt.createElement("div",{className:"AuthorItem_subtext_Q2Ymg"},a>=1e3?(0,Qr.getParametrizedText)(FSe.thousandsSubscribers,{value:Math.round(a/100)/10}):a?(0,Qr.getParametrizedText)(qr(FSe.subscribers,a),{value:a}):FSe.noSubscribersYet,t.title&&" · ",t.title))),Gt.createElement("div",{className:"AuthorItem_rightBlock_BiEj0"},Gt.createElement("div",{className:"AuthorItem_goToBlog_wGH7I"},Gt.createElement(pB,{glyph:pk.zqH,className:"AuthorItem_subscribeIcon_MAknU"})))))};const HSe={root:"EmptyMainFeed_root_n8m9a",hero:"EmptyMainFeed_hero_GNyCc",title:"EmptyMainFeed_title_eqvSC",authorsList:"EmptyMainFeed_authorsList_Z3SOh",description:"EmptyMainFeed_description_h1uL1",cover:"EmptyMainFeed_cover_vpb9b",showMore:"EmptyMainFeed_showMore_NvFSJ",fadeIn:"EmptyMainFeed_fadeIn_dtJmH",arrow:"EmptyMainFeed_arrow_KHZOa",spinner:"EmptyMainFeed_spinner_t34hn"};var WSe,VSe=(0,Qr.getTranslation)("@boosty/common/containers.MainFeed.common.components.EmptyMainFeed"),jSe=function(){var e=(0,Vt.I0)(),t=(0,Vt.v9)(TR),n=(0,Vt.v9)(IR);(0,Gt.useEffect)((function(){e(HS())}),[]);var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),o=r[0],a=r[1],i=n.isFetched&&t,l=o?t:null==t?void 0:t.slice(0,5);return Gt.createElement("section",{className:HSe.root},Gt.createElement("section",{className:HSe.hero},Gt.createElement("div",{className:HSe.cover}),Gt.createElement("h2",{className:HSe.title},VSe.title),Gt.createElement("p",{className:HSe.description},VSe.description)),Gt.createElement("section",{className:cG()(HSe.authorsList,!i&&HSe.empty)},i?Gt.createElement(Gt.Fragment,null,l.map((function(e,t){return Gt.createElement(GSe,{index:t,key:t,item:e,isAnimated:t<5})})),!o&&Gt.createElement(VB,{className:HSe.showMore,onClick:function(){return a(!0)}},Gt.createElement(pB,{className:HSe.arrow,glyph:pk.y9O}),VSe.more)):Gt.createElement(uM,{size:50,className:HSe.spinner})))},zSe={purchase:ir.FEED_PURCHASE,purchaseGift:ir.FEED_PURCHASE_GIFT,singlePayment:ir.FEED_SINGLE_PAYMENT,donationPayment:ir.FEED_SINGLE_PAYMENT_DONATION,trialActivation:ir.FEED_TRIAL_ACTIVATION,photoViewer:ir.FEED_PHOTO_LAYER},YSe=function(e){var t=e.children,n=nr().comments,r=(0,Gt.useRef)({commentsLimit:n.feedLimit,repliesLimit:n.feedRepliesLimit}).current;return Gt.createElement(Hd.Provider,{value:b.BLOG},Gt.createElement(wH.Provider,{value:zSe},Gt.createElement(Zf.Provider,{value:r},t)))},KSe=function(){var e,t=(0,Vt.v9)(FP),n=hse().followBlog,r=AH().subscribeByLevel,o=rV().openSinglePayment;return Gt.createElement(Gt.Fragment,null,null===(e=null==t?void 0:t.streams)||void 0===e?void 0:e.map((function(e){return Gt.createElement(cse,{key:e.id,className:"CurrentStreams_block_t1YTg",isAuthorizationRequired:!0,stream:e,onFollow:function(){return n(e.user.blogUrl)},onPay:o,onSubscribe:r})})))};!function(e){e.ALL_POSTS="ALL_POSTS",e.ONLY_ALLOWED="ONLY_ALLOWED",e.ONLY_PAID="ONLY_PAID"}(WSe||(WSe={}));const qSe={suggestContainer:"SearchMultiSelect_suggestContainer_u7kkg",suggestItem:"SearchMultiSelect_suggestItem_fVxHQ",iconSearch:"SearchMultiSelect_iconSearch_mgSVA",iconReset:"SearchMultiSelect_iconReset_CtTfO",iconSearchFocused:"SearchMultiSelect_iconSearchFocused_ef7VO",selectedOptionsLabel:"SearchMultiSelect_selectedOptionsLabel_NHXJ3",root:"SearchMultiSelect_root_NPBzE",inputWrapper:"SearchMultiSelect_inputWrapper_TxxJ_",inputWithButton:"SearchMultiSelect_inputWithButton_sPoyy",iconLeft:"SearchMultiSelect_iconLeft_UY3ib",iconRight:"SearchMultiSelect_iconRight_Bzzx5",inputWithLeftIcon:"SearchMultiSelect_inputWithLeftIcon_Cghjh",inputWithRightIcon:"SearchMultiSelect_inputWithRightIcon_hu21i",iconArrow:"SearchMultiSelect_iconArrow_YmGuu",iconArrowDisabled:"SearchMultiSelect_iconArrowDisabled_w8KpM",iconArrowRotated:"SearchMultiSelect_iconArrowRotated_qaVMB",suggest:"SearchMultiSelect_suggest_IUE8R",notFound:"SearchMultiSelect_notFound_OMaEE",spinnerContainer:"SearchMultiSelect_spinnerContainer_aXzPK",option:"SearchMultiSelect_option_Alme5",arrow:"SearchMultiSelect_arrow_vcxJD",arrowClosed:"SearchMultiSelect_arrowClosed_VTv0R",resetButton:"SearchMultiSelect_resetButton_vbIUK",fadeIn:"SearchMultiSelect_fadeIn_JMkbH"};var XSe=function(){return XSe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},XSe.apply(this,arguments)},QSe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},JSe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ZSe=(0,Qr.getTranslation)("@common/components.SearchMulltiSelect"),$Se=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.suggestedOptions,o=e.selectedOptions,a=e.multiSelectedOptionsShownLimit,i=void 0===a?2:a,l=e.isDisabled,s=e.isAutoFocus,c=e.fetchOptionsNetworkStatus,u=e.placeholder,d=void 0===u?ZSe.search:u,f=e.maxSearchLength,m=e.renderSelectedOptionsLabel,p=e.renderEmpty,h=e.onOptionSelect,v=e.onSuggestScrollEnd,g=e.onSearchValueChange,y=void 0===g?Yt.noop:g,_=(0,Gt.useRef)(null),E=(0,Gt.useRef)(null),b=QSe((0,Gt.useState)(""),2),S=b[0],T=b[1],I=QSe((0,Gt.useState)(!1),2),N=I[0],C=I[1],w=QSe((0,Gt.useState)(o),2),O=w[0],A=w[1],P=QSe((0,Gt.useState)(!1),2),L=P[0],R=P[1];(0,Gt.useEffect)((function(){N||(A(o),T(""),R(!0))}),[N]),(0,Gt.useEffect)((function(){N&&(A(o),y(S))}),[S,N]);var k=function(e,t){h(t?JSe(JSe([],QSe(o),!1),[e],!1).map((function(e){return e.valueObject})):o.filter((function(t){return t.id!==e.id})).map((function(e){return e.valueObject})))},D=Gt.useCallback((function(e){var t=e.currentTarget;v&&t.offsetHeight+t.scrollTop>=t.scrollHeight-50&&v(S)}),[v]),U=c.isFetched&&!r.length,B=(0,Gt.useMemo)((function(){return m?m(o):"number"==typeof i&&o.length>i?(0,Qr.getParametrizedText)(qr(ZSe.chosenLabel,o.length),{value:o.length}):o.map((function(e){return e.label})).join(", ")}),[o]);return Gt.createElement("div",{className:fB()(qSe.root,n.root),ref:_},L&&Boolean(o.length)&&Gt.createElement("div",{className:qSe.selectedOptionsLabel},Gt.createElement("div",{className:qSe.selectedOptionsLabelText},B)),Gt.createElement(Lee,{classNames:{inputContainer:n.inputContainer,input:n.input,arrowIcon:fB()(qSe.arrow,N?qSe.arrowActive:qSe.arrowClosed),resetButton:qSe.resetButton,resetIcon:qSe.resetIcon},inputRef:E,value:S,placeholder:d,limit:f,onChange:function(e){var t=e.currentTarget.value;T(t)},onFocus:function(){C(!0),R(!1)},onBlur:function(){0===(null==S?void 0:S.length)&&setTimeout((function(){R(!0)}),100)},onReset:function(){T(""),R(!0)},onArrowClick:function(e){e.stopPropagation(),C(!1)},isDisabled:l,isAutoFocus:s,isResetButtonHidden:!(null==S?void 0:S.length),isSearchButtonHidden:!0,isIconSearchHidden:!0,isVisibleArrowIcon:!0,iconPosition:See.RIGHT}),N&&Gt.createElement(Dx,{classNames:{root:fB()(qSe.suggestContainer,n.suggestContainer)},trigger:gx.CLICK,onClickOutside:function(e){_.current.contains(e.target)||C(!1)}},Gt.createElement(UM,{onScroll:v&&D,className:fB()(qSe.suggest,n.suggestContent)},O.map((function(e){return Gt.createElement(ZM,XSe({},e,{value:e.id.toString(),valueObject:e,disabled:l,selected:Boolean(o.find((function(t){return t.id===e.id}))),withCheckBox:!0,onSelect:k,key:e.id,classNameOption:qSe.option,classNameOptionCheckBoxLabel:qSe.optionCheckBoxLabel}))})),r.filter((function(e){var t=e.id;return!O.find((function(e){return e.id===t}))})).map((function(e){return Gt.createElement(ZM,XSe({},e,{value:e.id.toString(),valueObject:e,disabled:l,selected:Boolean(o.find((function(t){return t.id===e.id}))),withCheckBox:!0,onSelect:k,key:e.id,classNameOption:qSe.option,classNameOptionCheckBoxLabel:qSe.optionCheckBoxLabel}))})),U&&!c.isFetching||c.error?p?p():eTe(S):null,c.isFetching&&Gt.createElement("div",{className:qSe.spinnerContainer},Gt.createElement(uM,{size:40,solid:!0})))))},eTe=function(e){return Gt.createElement("div",{className:qSe.notFound},Gt.createElement("span",null,e?(0,Qr.getParametrizedText)(ZSe.notFoundFor,{searchValue:e}):ZSe.notFound))},tTe=(0,Qr.getTranslation)("@boosty/common/containers.MainFeed.common.components.MainFeedTagsSelect"),nTe=function(e){return e.map((function(e){return{label:e.title,id:e.id,valueObject:e}}))},rTe=function(e){var t=e.selectedTags,n=e.isDisabled,r=(0,Vt.v9)(jR),o=r.tags,a=r.extra,i=(0,Vt.v9)(zR),l=(0,Vt.I0)(),s=(0,Gt.useCallback)((function(e){l(Q_({searchQuery:e,limit:10,resetOffset:!0}))}),[i,Q_]),c=(0,Gt.useMemo)((function(){return nTe(t)}),[t]),u=(0,Gt.useMemo)((function(){return nTe(o)}),[o]);return Gt.createElement($Se,{selectedOptions:c,suggestedOptions:u,fetchOptionsNetworkStatus:i,onOptionSelect:function(t){return e.onSelect(t)},onSuggestScrollEnd:!a.isLast&&function(e){a.isLast||i.error||i.isFetching||l(Q_({searchQuery:e,limit:10}))},renderSelectedOptionsLabel:function(e){return 1===e.length?e[0].label:(0,Qr.getParametrizedText)(qr(tTe.chosenTag,e.length),{value:e.length})},onSearchValueChange:s,classNames:{root:"MainFeedTagsSelect_root_oDsGs",input:"MainFeedTagsSelect_input_R_y8d"},placeholder:tTe.placeholder,isDisabled:n})},oTe=(0,Qr.getTranslation)("@boosty/common/containers.MainFeed.desktop.components.FeedFilter.components.Search"),aTe=function(e){var t=e.onSearch,n=e.onReset,r=e.initialValue,o=e.isAutofocus,a=nr().search.posts.limits,i=a.minLength,l=a.maxLength,s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(r),2),c=s[0],u=s[1],d=function(){c.length>=i&&t(c)};return Gt.createElement(Lee,{classNames:{inputContainer:"Search_inputWrapper_AEK_5",input:"Search_input_oVQtG",resetButton:"Search_resetButton__UYM_",resetIcon:"Search_resetIcon_uq5oL"},value:c,limit:l,placeholder:oTe.placeholder,isResetButtonHidden:!1,isSearchButtonDisabled:c.length<i,onChange:function(e){u(e.target.value)},onKeyDown:function(e){e.key===ae.ENTER&&d()},onReset:function(){u(""),n()},onSearchButtonClick:d,hideButtonsOnBlur:!1,isAutoFocus:o})};const iTe={searchButton:"FeedFilter_searchButton_mGeBF",searchIcon:"FeedFilter_searchIcon_W97ZR",root:"FeedFilter_root_AWN22",header:"FeedFilter_header_c5q23",rightCorner:"FeedFilter_rightCorner_INr2P",title:"FeedFilter_title_BotEU",icon:"FeedFilter_icon_deC07",tabs:"FeedFilter_tabs_da1Pv",datePickerButton:"FeedFilter_datePickerButton_uOT31",datePickerRoot:"FeedFilter_datePickerRoot_OvryN",muted:"FeedFilter_muted_qdIPJ",datePickerArrow:"FeedFilter_datePickerArrow_VjKLB",active:"FeedFilter_active_zE5Bv",resetBlock:"FeedFilter_resetBlock_mOQln",resetButton:"FeedFilter_resetButton_EOCVt",resetIcon:"FeedFilter_resetIcon_PJT3Q",counter:"FeedFilter_counter_F1w5F",fadeIn:"FeedFilter_fadeIn_KrJvJ"};var lTe,sTe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},cTe=(0,Qr.getTranslation)("@boosty/common/containers.MainFeed.desktop.components.FeedFilter"),uTe=function(e){var t=e.className,n=e.onFeedFilterChange,o=e.currentFilter,a=o.isOnlyAllowedPosts,i=o.isOnlyPaidPosts,l=o.postTags,s=o.postsFrom,c=o.postsTo,u=o.searchQuery,d=e.isFeedFilterApplied,f=e.onFeedFilterReset,m=Qo(r.MAIN_FEED_SEARCH),p=function(){var e=(0,Vt.v9)(aL),t=(0,Vt.v9)(iL);return Dr(t)&&!(null==e?void 0:e.length)}(),h=(0,Vt.v9)(WP),v=sTe((0,Gt.useState)(!1),2),g=v[0],y=v[1],_=sTe((0,Gt.useState)(!0),2),E=_[0],b=_[1];(0,Gt.useEffect)((function(){var e=Boolean(u);y(e),e&&b(!1)}),[]);var S=function(){y(!1),b(!0)},T=i?WSe.ONLY_PAID:a?WSe.ONLY_ALLOWED:WSe.ALL_POSTS;return Gt.createElement("section",{className:cG()(iTe.root,t)},Gt.createElement("header",{className:cG()(iTe.header,t)},Gt.createElement("p",{className:iTe.title},cTe.title),Gt.createElement("div",{className:iTe.rightCorner},!g&&m&&Gt.createElement("button",{className:iTe.searchButton,onClick:function(){Of(),y(!0)},type:"button",disabled:p},Gt.createElement(pB,{className:cG()(iTe.icon,iTe.searchIcon),glyph:hB.jVj})))),Gt.createElement("div",{className:iTe.tabs},Gt.createElement(VF,{name:"mode",value:T,onChange:function(e){n({isOnlyAllowedPosts:e===WSe.ONLY_ALLOWED,isOnlyPaidPosts:e===WSe.ONLY_PAID})}},Gt.createElement(VF.Item,{value:WSe.ONLY_ALLOWED},Gt.createElement(pB,{glyph:hB.ajb,className:cG()(iTe.icon,iTe.iconLock)})," ",cTe.onlyAllowedForMe),Gt.createElement(VF.Item,{value:WSe.ALL_POSTS},Gt.createElement(pB,{glyph:hB.kBP,className:iTe.icon})," ",cTe.allPosts,h?Gt.createElement(x1,{className:iTe.counter,value:h}):null),Gt.createElement(VF.Item,{value:WSe.ONLY_PAID},Gt.createElement(pB,{glyph:hB.qSP,className:cG()(iTe.icon,iTe.iconCoins)})," ",cTe.onlyPaid))),Gt.createElement(rTe,{selectedTags:l,onSelect:function(e){n({postTags:e})},isDisabled:p}),Gt.createElement(Vde,{showViewForCreator:!1,selectedDates:{postsFrom:s,postsTo:c},onSelect:function(e){return n({postsFrom:e.from,postsTo:e.to})},classNames:{root:iTe.datePickerRoot,button:iTe.datePickerButton,arrow:iTe.datePickerArrow},isDisabled:p}),d&&Gt.createElement("div",{className:iTe.resetBlock},Gt.createElement(VB,{className:iTe.resetButton,onClick:function(){S(),f()}},Gt.createElement(pB,{glyph:hB.uNf,className:iTe.resetIcon}),cTe.resetFilter)),g&&m&&(0,Ht.createPortal)(Gt.createElement(aTe,{onSearch:function(e){n({searchQuery:e||void 0})},onReset:function(){u?n({searchQuery:""}):S()},initialValue:u,isAutofocus:E}),document.getElementById(MSe)))},dTe=oo("MainFeed");!function(e){e.OWN_BLOG_BUTTON="ownBlogButton"}(lTe||(lTe={}));var fTe={OwnBlogButton:dTe(lTe.OWN_BLOG_BUTTON)};const mTe={root:"MainFeed_root_pO8A5",leftPanelWrapper:"MainFeed_leftPanelWrapper_HDaTi",myPage:"MainFeed_myPage_QNAbr",myPageIcon:"MainFeed_myPageIcon_b7GWI",subscriptions:"MainFeed_subscriptions_ZeTwe",subscriptionsTitle:"MainFeed_subscriptionsTitle_XIP9m",subscriptionsWrapper:"MainFeed_subscriptionsWrapper__b16h",spinner:"MainFeed_spinner_WJVw_",fadeIn:"MainFeed_fadeIn_NwYqV"};var pTe=(0,Qr.getTranslation)("@boosty/common/containers.MainFeed.desktop"),hTe=["isOnlyAllowedPosts","isOnlyFreePosts","isOnlyPaidPosts"],vTe=function(){var e,t=BSe(),n=t.posts,r=t.streamsList,o=t.postsNetworkStatus,a=t.isEmptyFeed,i=t.isFeedInitialFetching,l=t.areExtraDataFetching,s=t.areStreamsHidden,c=t.isLastPostLoaded,u=t.loadMorePosts,d=t.maxAutoLoadMoreCount,f=t.feedFilter,m=t.getIsFeedFilterApplied,p=t.resetFilter,h=t.changeFilter,v=t.addTagToFilter,g=(e=xf().search,(0,Gt.useMemo)((function(){return Object.fromEntries(new URLSearchParams(e))}),[e])).showEmpty,y=m({excludeKeys:hTe}),_=function(){return p({excludeKeys:hTe})},E=WU(XO).blogUrl,b=Ck().isBlogger,S=function(){var e=(0,Vt.I0)(),t=(0,Vt.v9)(sL),n=(0,Vt.v9)(iL),r=(0,Vt.v9)(lL);(0,Gt.useEffect)((function(){n.isFetched||o()}),[]);var o=function(){return void 0,void 0,n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,e((0,dm.Ax)(Mp.action)({withFollow:!0}))];case 1:return t.sent(),[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n};return{subscriptions:t,isFetching:n.isFetching,isLast:r,fetchSubscriptions:o}}(),T=S.subscriptions,I=S.isFetching,N=S.isLast,C=S.fetchSubscriptions,w=a&&!y||g;return Gt.createElement(YSe,null,Gt.createElement("div",{className:mTe.root},Gt.createElement(Zj,{left:Gt.createElement("div",{className:mTe.leftPanelWrapper},b&&Gt.createElement(cM,{className:mTe.myPage,to:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:E}),"data-test-id":fTe.OwnBlogButton},Gt.createElement(pB,{glyph:hB.f1c,className:mTe.myPageIcon})," ",pTe.myPage),Gt.createElement(uTe,{currentFilter:f,isFeedFilterApplied:y,onFeedFilterChange:h,onFeedFilterReset:_})),center:Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{id:MSe}),function(){var e,t;return i?Gt.createElement(dM,{size:50,className:mTe.spinner}):w?Gt.createElement(jSe,null):Gt.createElement(Gt.Fragment,null,Boolean((null===(e=r.streams)||void 0===e?void 0:e.length)&&!s)&&Gt.createElement(KSe,null),Gt.createElement(Pde,{postsHasAuthor:!0,loadMore:u,selectedPostTagIds:null===(t=f.postTags)||void 0===t?void 0:t.map((function(e){return e.id})),posts:n,hasMorePosts:!c,postsNetworkStatus:o,className:mTe.feed,maxAutoLoadMoreCount:d,isFilterApplied:y,onFilterReset:_,onClickPostTag:v,areHeadlinesShown:!0,isCollapsible:!0,showViewForCreator:!1,keepOldDataOnLoading:!0,areExtraDataFetching:l}))}()),right:Gt.createElement("div",{className:mTe.subscriptionsWrapper},Gt.createElement(t8,{className:mTe.subscriptions,titleClassName:mTe.subscriptionsTitle,subscriptions:T,isFetching:I,isLast:N,fetchSubscriptions:C,title:pTe.mySubscriptions}))})),Gt.createElement(Rte,{showAtPositionPercent:.7,footerHeight:30}))};vTe.getFetchActions=xSe;var gTe=function(e){var t=e.className;return Gt.createElement("div",{className:cG()(t,"FrontImage_root_ThHZB")})};const yTe={slider:"SuccessStoriesSlider_slider_Z1ZDc",list:"SuccessStoriesSlider_list_stB6u",item:"SuccessStoriesSlider_item_twHHM",avatar:"SuccessStoriesSlider_avatar_r0Gzg",name:"SuccessStoriesSlider_name_kQyDP",countSubscribers:"SuccessStoriesSlider_countSubscribers_k_F9u",category:"SuccessStoriesSlider_category_ZIBLq",goToBlog:"SuccessStoriesSlider_goToBlog_gPcIB",pagination:"SuccessStoriesSlider_pagination_GglBd",paginationItem:"SuccessStoriesSlider_paginationItem_e3Bcj",fadeIn:"SuccessStoriesSlider_fadeIn_tfp8T"};var _Te=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ETe=(0,Qr.getTranslation)("@boosty/common/containers.MainLanding.components.SuccessStoriesSlider"),bTe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.maxSuccessStoriesPerPage,o=e.successStories,a=e.avatarSize,i=function(){return e.successStoriesPerPage?e.successStoriesPerPage:r&&Math.min(Math.floor(window.innerWidth/340),r)||1},l=(0,Gt.useRef)({pageX:null,pageY:null}),s=_Te((0,Gt.useState)(0),2),c=s[0],u=s[1],d=_Te((0,Gt.useState)(i()),2),f=d[0],m=d[1];(0,Gt.useEffect)((function(){return window.addEventListener("orientationchange",p),window.addEventListener("resize",p),function(){window.removeEventListener("orientationchange",p),window.removeEventListener("resize",p)}}),[]);var p=function(){var e=i();m(e),u(Math.min(c,Math.floor(o.length/e)))},h=function(e){u(e)},v=function(e){l.current={pageX:e.pageX,pageY:e.pageY}},g=function(e){var t=l.current,n=t.pageX,r=t.pageY;e.pageX===n&&e.pageY===r||e.preventDefault()};if(!Array.isArray(o)||!o.length)return null;var y=o.reduce((function(e,t,n){var r=Math.floor(n/f);return e[r]||(e[r]=[]),e[r].push(t),e}),[]);return Gt.createElement("div",{className:cG()(yTe.block,n.block)},Gt.createElement(T6.ZP,{className:yTe.slider,axis:"x",index:c,onChangeIndex:h,enableMouseEvents:!0,springConfig:{duration:"1.5s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!0},y.map((function(e,t){return Gt.createElement("div",{key:t,className:cG()(yTe.list,n.list)},e.map((function(e){return Gt.createElement(cM,{key:e.owner.id,to:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:e.blogUrl}),target:"_blank",className:cG()(yTe.item,n.item),style:{width:"calc((100% / ".concat(f,") - 15px - 15px - 10px - 10px)")},onMouseDown:v,onClick:g},Gt.createElement(PB,{className:yTe.avatar,img:e.owner.avatarUrl,size:a}),Gt.createElement("div",{className:cG()(yTe.name,n.name)},e.owner.name),Gt.createElement("div",{className:cG()(yTe.countSubscribers,n.countSubscribers)},e.count.subscribers," ",qr(ETe.subscribers,e.count.subscribers)),Gt.createElement("div",{className:cG()(yTe.category,n.category)},e.category),Gt.createElement("span",{className:cG()(yTe.goToBlog,n.goToBlog)},ETe.goToBlog))})))}))),Gt.createElement(EM,{onPageChange:h,pageCount:Math.ceil(o.length/f),initialPage:0,forcePage:c,className:yTe.pagination,itemClassName:yTe.paginationItem}))},STe=function(){return STe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},STe.apply(this,arguments)},TTe=(0,Qr.getTranslation)("@boosty/common/containers.MainLanding.components.Tags"),ITe=[{className:"Tags_star_gXOcQ",getText:function(){return TTe.levels}},{className:"Tags_stream_DB79J",getText:function(){return TTe.streams}},{className:"Tags_coins_YrAD3",getText:function(){return TTe.donates}},{className:"Tags_donate_j14MT",getText:function(){return TTe.fundraising}},{className:"Tags_messengers_tfyuf",getText:function(){return TTe.privateChats}},{className:"Tags_stat_ANSRx",getText:function(){return TTe.stats}},{className:"Tags_private_sBbmC",getText:function(){return TTe.privatePosts}}],NTe=function(e){var t=STe({limit:ITe.length,offset:0},e),n=t.className,r=t.limit,o=t.offset,a=ITe.slice(o,o+r);return Gt.createElement("div",{className:n},a.map((function(e,t){return Gt.createElement("div",{className:"Tags_tag_XNf3n",key:t},Gt.createElement("div",{className:cG()(e.className,"Tags_icon_HCO05")}),Gt.createElement("div",{className:"Tags_text_qXGR7"},e.getText()))})))};const CTe="UseTabItem_iconKey_Zqzqq",wTe="UseTabItem_iconVideo_DKPwo";var OTe,ATe=((OTe={})[Ot.VIDEO]={pictureClassName:"UseTabItem_pictureVideo_T5fS3",items:[{iconClassName:CTe,text:"tabs.video.items.access"},{iconClassName:"UseTabItem_iconDiamond_nAhVY",text:"tabs.video.items.exclusive"},{iconClassName:wTe,text:"tabs.video.items.unbroken"}],userGroup:"tabs.video.userGroup"},OTe[Ot.PODCAST]={pictureClassName:"UseTabItem_picturePodcast_v6UiR",items:[{iconClassName:CTe,text:"tabs.podcast.items.access"},{iconClassName:"UseTabItem_iconThanks_s85Gz",text:"tabs.podcast.items.thanks"},{iconClassName:"UseTabItem_iconMic_fEEQL",text:"tabs.podcast.items.appeal"}],userGroup:"tabs.podcast.userGroup"},OTe[Ot.ILLUSTRATOR]={pictureClassName:"UseTabItem_pictureIllustrator_m1fXU",items:[{iconClassName:wTe,text:"tabs.illustrator.items.video"},{iconClassName:"UseTabItem_iconHq_fdOib",text:"tabs.illustrator.items.hq"},{iconClassName:"UseTabItem_iconTshirt_AgQeT",text:"tabs.illustrator.items.tshirt"}],userGroup:"tabs.illustrator.userGroup"},OTe[Ot.MUSIC]={pictureClassName:"UseTabItem_pictureMusic_q0mue",items:[{iconClassName:CTe,text:"tabs.music.items.access"},{iconClassName:"UseTabItem_iconPoll_iTyXK",text:"tabs.music.items.poll"},{iconClassName:wTe,text:"tabs.music.items.video"}],userGroup:"tabs.music.userGroup"},OTe[Ot.JOURNALIST]={pictureClassName:"UseTabItem_pictureJournalist_fw9pd",items:[{iconClassName:CTe,text:"tabs.journalist.items.access"},{iconClassName:"UseTabItem_iconTopic_frbI_",text:"tabs.journalist.items.topic"},{iconClassName:"UseTabItem_iconQuestion_yggA0",text:"tabs.journalist.items.question"}],userGroup:"tabs.journalist.userGroup"},OTe),PTe=function(e){var t=e.id,n=e.t,r=nr(),o=r.isMobile,a=r.mainPageTutorialVideos,i=ATe[t],l=a[t],s=nr().locale===ce.RU;return Gt.createElement("div",{className:"UseTabItem_root_NVVAt"},Gt.createElement("div",{className:cG()("UseTabItem_picture_ij16a",i.pictureClassName)}),Gt.createElement("div",{className:"UseTabItem_list_kfolg"},Gt.createElement("div",{className:"UseTabItem_title_FHMln"},n.youCanOffer),i.items.map((function(e,t){return Gt.createElement("div",{key:t,className:cG()("UseTabItem_item_bs_Lr",e.iconClassName)},(0,ii.get)(n,e.text))})),s&&Gt.createElement(cM,{to:l,className:"UseTabItem_link_EG4ou",target:"_blank",rel:"noopener noreferrer"},Gt.createElement(FB,{className:"UseTabItem_button_xmRMn",withIcon:!0},Gt.createElement(pB,{glyph:hB.WF9,className:"UseTabItem_icon_w_usz"}),n.contentIdeas,!o&&(0,Qr.getParametrizedText)(n.forUserGroup,{userGroup:(0,ii.get)(n,i.userGroup)})))))},LTe=(0,Qr.getTranslation)("@boosty/common/containers.MainLanding.components.UseTabList"),RTe=function(){var e=function(e){return LTe.tabs[e].title};return Gt.createElement("div",{className:"UseTabList_root_bJ0Mf"},Gt.createElement(gF,{classNameHead:"UseTabList_head_Mhb8F",withContent:!0},Object.values(Ot).map((function(t){return Gt.createElement(gF.Tab,{className:"UseTabList_headItem_vIEuI",key:t,title:e(t)},Gt.createElement(PTe,{id:t,t:LTe}))}))))},kTe=(0,Qr.getTranslation)("@boosty/common/components.BlockTemplates.SubscriptionLevelBlockTemplate"),DTe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.title,o=e.price,a=e.description;return Gt.createElement("div",{className:cG()("SubscriptionLevelBlockTemplate_root_KdIBZ",n.root)},Gt.createElement("div",{className:cG()("SubscriptionLevelBlockTemplate_wrapper_FBCiw",n.wrapper)},Gt.createElement("div",{className:"SubscriptionLevelBlockTemplate_title_AcnX_"},r),Gt.createElement("div",{className:"SubscriptionLevelBlockTemplate_price_krxcj"},o),Gt.createElement("div",{className:"SubscriptionLevelBlockTemplate_description_y3xJO"},a),Gt.createElement(FB,{className:"SubscriptionLevelBlockTemplate_button_EfYPf"},kTe.button)))},UTe=(0,Qr.getTranslation)("@boosty/common/containers.MainLanding.components.HowWorkSteps.HowWorkStep1"),BTe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=nr().locale,o=zr(r),a=r===ce.EN?40:400;return Gt.createElement("div",{className:cG()("HowWorkStep1_root_GM7lZ",n.root)},Gt.createElement("div",{className:cG()("HowWorkStep1_wrapper_j2KxF",n.wrapper)},Gt.createElement("div",{className:"HowWorkStep1_site_gAh3v"}),Gt.createElement("div",{className:"HowWorkStep1_bg_fTjuO"}),Gt.createElement("div",{className:"HowWorkStep1_corner_qKH9_"}),Gt.createElement(DTe,{classNames:{root:"HowWorkStep1_block_ztN11"},title:UTe.title,price:(0,Qr.getParametrizedText)(UTe.price,{price:Vr({amount:a,currency:o})}),description:UTe.description})))};const xTe="CommentBlockItems_username_xZhyh";var MTe=(0,Qr.getTranslation)("@boosty/common/containers.MainLanding.components.HowWorkSteps.HowWorkStep2.components.CommentBlockItems"),FTe=function(e){var t=e.className,n=[{classNameAvatar:"CommentBlockItems_avatarUser1_haWNw",username:(0,Qr.getReactText)(MTe.user1.username,{UserName:function(e){var t=e.text;return Boolean(t)&&Gt.createElement("span",{className:xTe},t)}}),message:(0,Qr.getParametrizedText)(MTe.user1.message,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized}),likes:237},{classNameAvatar:"CommentBlockItems_avatarUser2_L7u5K",username:(0,Qr.getReactText)(MTe.user2.username,{UserName:function(e){var t=e.text;return Boolean(t)&&Gt.createElement("span",{className:xTe},t)}}),message:MTe.user2.message,likes:null},{classNameAvatar:"CommentBlockItems_avatarUser3_fvk_L",username:(0,Qr.getReactText)(MTe.user3.username,{UserName:function(e){var t=e.text;return Boolean(t)&&Gt.createElement("span",{className:xTe},t)}}),message:MTe.user3.message,likes:null}];return Gt.createElement("div",{className:cG()("CommentBlockItems_root_GYr9E",t)},n.map((function(e,t){return Gt.createElement("div",{className:"CommentBlockItems_item_fhRoz",key:t},Gt.createElement("div",{className:cG()("CommentBlockItems_avatar_eZg5b",e.classNameAvatar)}),Gt.createElement("div",{className:"CommentBlockItems_user_k7xuW"},Gt.createElement("div",{className:"CommentBlockItems_userFullName_YeHHH"},e.username),Gt.createElement("div",{className:"CommentBlockItems_userMessage_lh2qP"},e.message),e.likes>0&&Gt.createElement("div",{className:"CommentBlockItems_footer_PNwh1"},Gt.createElement(pB,{glyph:hB.MlY,className:"CommentBlockItems_icon_HWeAg"}),Gt.createElement("span",{className:"CommentBlockItems_likesCounter_dMXHZ"},e.likes))))})))},GTe=function(e){var t=e.classNames;return Gt.createElement("div",{className:cG()("HowWorkStep2_root_hROT0",t.root)},Gt.createElement("div",{className:cG()("HowWorkStep2_wrapper_B8H3A",t.wrapper)},Gt.createElement(FTe,{className:"HowWorkStep2_items_yNTIV"}),Gt.createElement("div",{className:"HowWorkStep2_bg_TZ38D"}),Gt.createElement("div",{className:"HowWorkStep2_arrow_KofPk"})))};const HTe="VideoBlockTemplate_line_EyQSn",WTe="VideoBlockTemplate_icon_uW1Ls";var VTe=(0,Qr.getTranslation)("@boosty/common/containers.MainLanding.components.HowWorkSteps.HowWorkStep3.components.VideoBlockTemplate"),jTe=function(e){var t=e.className;return Gt.createElement("div",{className:cG()("VideoBlockTemplate_root_DxPwm",t)},Gt.createElement("div",{className:"VideoBlockTemplate_title_WdPYP"},VTe.title),Gt.createElement("div",{className:"VideoBlockTemplate_preview_XfnSW"},Gt.createElement("div",{className:"VideoBlockTemplate_iconPlay_oZwZl"})),Gt.createElement("div",{className:"VideoBlockTemplate_description_KtAhy"},Gt.createElement("div",{className:cG()(HTe,"VideoBlockTemplate_line1_rpDEi")}),Gt.createElement("div",{className:cG()(HTe,"VideoBlockTemplate_line2_JAfBo")}),Gt.createElement("div",{className:cG()(HTe,"VideoBlockTemplate_line3_bly_H")}),Gt.createElement("div",{className:cG()(HTe,"VideoBlockTemplate_line4_sdvmS")})),Gt.createElement("div",{className:"VideoBlockTemplate_footer_lyBLe"},Gt.createElement("div",{className:"VideoBlockTemplate_likes_WRFJa"},Gt.createElement(pB,{glyph:hB.MlY,className:cG()(WTe,"VideoBlockTemplate_iconLike_bo9bn")}),Gt.createElement("div",{className:"VideoBlockTemplate_totalLikes_Zrbby"},1256..toLocaleString("en"))),Gt.createElement("div",{className:"VideoBlockTemplate_comments_rU2PK"},Gt.createElement(pB,{glyph:hB.ge4,className:WTe}),Gt.createElement("div",{className:"VideoBlockTemplate_totalComments_MJGU9"},253..toLocaleString("en")))))},zTe=function(e){var t=e.classNames,n=void 0===t?{}:t;return Gt.createElement("div",{className:cG()("HowWorkStep3_root_IDaF_",n.root)},Gt.createElement("div",{className:cG()("HowWorkStep3_wrapper_LIbUb",n.wrapper)},Gt.createElement(jTe,{className:"HowWorkStep3_videoBlock_Zw0V3"}),Gt.createElement("div",{className:"HowWorkStep3_bg_bxA7S"}),Gt.createElement("div",{className:"HowWorkStep3_stroke_IYZjR"})))},YTe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const KTe={root:"MainLanding_root_dWiqk",createBlog:"MainLanding_createBlog_N395q",top:"MainLanding_top_NQnKf",topTitle:"MainLanding_topTitle_t0bYs",topText:"MainLanding_topText_lLCZB",topSeparator:"MainLanding_topSeparator_bgdwP",topBottomText:"MainLanding_topBottomText_B95J3",topTags:"MainLanding_topTags_eFZrZ",inner:"MainLanding_inner_FZJcj",line:"MainLanding_line__BJdn",lineLeft:"MainLanding_lineLeft_pAf7T",title:"MainLanding_title_mRis6",howWork:"MainLanding_howWork_rS6AW",howWorkRow:"MainLanding_howWorkRow_XbDiu",howWorkStep:"MainLanding_howWorkStep_Smgcp",howWorkStepPicture1:"MainLanding_howWorkStepPicture1__E1UQ",howWorkStepPicture2:"MainLanding_howWorkStepPicture2_lGEpZ",howWorkStepPicture3:"MainLanding_howWorkStepPicture3_Ae9IR",howWorkStepNumber:"MainLanding_howWorkStepNumber_s8Nud",howWorkStepTitle:"MainLanding_howWorkStepTitle_GEnx7",howWorkStepText:"MainLanding_howWorkStepText_w_TmS",howWorkStepLink:"MainLanding_howWorkStepLink_vqjUv",successStories:"MainLanding_successStories_ANj2z",successStoriesSliderList:"MainLanding_successStoriesSliderList_pDQ3n",successStoriesSliderItem:"MainLanding_successStoriesSliderItem_r5g8d",successStoriesSliderItemName:"MainLanding_successStoriesSliderItemName_rEuh_",successStoriesSliderItemCountSubscribers:"MainLanding_successStoriesSliderItemCountSubscribers_FQ98s",successStoriesSliderItemCategory:"MainLanding_successStoriesSliderItemCategory_ypyHg",successStoriesSliderItemGoToBlog:"MainLanding_successStoriesSliderItemGoToBlog_au_nt",separator:"MainLanding_separator_oO5BY",why:"MainLanding_why_uRCqs",whyItems:"MainLanding_whyItems_DlcVj",whyItem:"MainLanding_whyItem_Bk0uj",whyItemIcon:"MainLanding_whyItemIcon_mKOPm",whyItemIconSecurity:"MainLanding_whyItemIconSecurity_EUTfO",whyItemIconCommission:"MainLanding_whyItemIconCommission_NdVhM",whyItemIconPrice:"MainLanding_whyItemIconPrice_Rb5Yz",whyItemIconSupport:"MainLanding_whyItemIconSupport_gDmm7",whyItemText:"MainLanding_whyItemText_Rwnd4",calculator:"MainLanding_calculator_Y1cI9",calculatorField:"MainLanding_calculatorField_rUkmV",calculatorFieldTitle:"MainLanding_calculatorFieldTitle_wb8pl",calculatorFieldInput:"MainLanding_calculatorFieldInput_ynT_M",calculatorDescription:"MainLanding_calculatorDescription_NSNId",calculatorResult:"MainLanding_calculatorResult_aX80G",calculatorResultNumber:"MainLanding_calculatorResultNumber_lkHjF",calculatorResultUnit:"MainLanding_calculatorResultUnit_Yz3pU",calculatorCommissionInfo:"MainLanding_calculatorCommissionInfo_HLJOi",calculatorOfferPopular:"MainLanding_calculatorOfferPopular_qrX_6",calculatorOfferItem:"MainLanding_calculatorOfferItem_rkAZl",use:"MainLanding_use_gCQbr",join:"MainLanding_join_RYpzH",joinText:"MainLanding_joinText_A8XAa",frontImage:"MainLanding_frontImage_onVOb",fadeIn:"MainLanding_fadeIn_OIiap"};var qTe=(0,Qr.getTranslation)("@boosty/common/containers.MainLanding.desktop"),XTe=function(){var e=nr().blog.hasVerifiedEmailsRestriction,t=Qo(r.MY_GAMES_SUPPORT),n=function(e){var t=YTe((0,Gt.useState)(1e3),2),n=t[0],r=t[1],a=YTe((0,Gt.useState)(200),2),i=a[0],l=a[1],s=YTe((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=(0,Vt.I0)(),f=(0,Vt.v9)(TR),m=(0,Vt.v9)(IR),p=(0,Vt.v9)(EA),h=(0,Vt.v9)(XO),v=_k(),g=v.isAuthorized,y=v.isBlogger;(0,Gt.useEffect)((function(){(0,Yt.getFromLocalStorage)(o.SHOW_BECOME_AUTHOR_POPUP),Array.isArray(f)&&m.isFetched||E()}),[]);var _,E=function(){return d((0,dm.Ax)(HS.action)())};return{successStories:f,currency:p,currentUser:h,isAuthorized:g,isBlogger:y,isCreatingBlog:c,calculatorSubscribers:n,calculatorPrice:i,calculatorResult:(0,Yt.getFormattedNumber)((_=new Function("subscribers","price","return ".concat(nr().calculator.formula))(n,i),Boolean(_)?Math.round(_):0)),onCalculatorSubscribersChange:function(e){var t=parseInt(String(e.target.value).replace(/\s/g,""),10);t=t?Math.min(t,nr().calculator.maxSubscribers):0,r(t)},onCalculatorPriceChange:function(e){var t=parseInt(String(e.target.value).replace(/\s/g,""),10);t=t?Math.min(t,nr().calculator.maxPrice):0,l(t)},onCreateBlogClick:function(){u(!0)}}}(),i=n.currency,l=n.currentUser,s=n.successStories,c=n.isBlogger,u=n.isAuthorized,d=n.isCreatingBlog,f=n.calculatorPrice,m=n.calculatorSubscribers,h=n.calculatorResult,v=n.onCalculatorPriceChange,y=n.onCalculatorSubscribersChange,_=n.onCreateBlogClick,E=xf(),b=Mf(),S=jG().showAlert,T=(0,dH.useOverlayPopups)().showPopup;(0,Gt.useEffect)((function(){!t&&yf(ir.SUPPORT_CONTACT,E.pathname)&&setTimeout(C),yf(ir.BLOG_CREATE,E.pathname)&&(u?c?w():I():N())}),[]),(0,Gt.useEffect)((function(){u&&d&&(c?w():setTimeout(I))}),[u,d]);var I=function(){var t=l.email,n=l.emailConfirmed,r=n.social,o=n.noSocial;Boolean(t)&&r&&o||!e?(T({type:a.BECOME_AUTHOR}),bd.log.gtm.startBecomingAuthor()):S({type:p.ERROR,text:qTe.confirmEmail})},N=function(){T({type:a.AUTH_SIGN_IN})},C=function(){var e=(0,Do.parse)(E.search);T({type:a.CONTACT_SUPPORT,data:{from:null==e?void 0:e.from}}),b(ir.MAIN,{replace:!0})},w=function(){b((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:l.blogUrl}))},O=function(){u?c?w():I():(N(),bd.log.auth.openPopup({source:od.MAIN_BECOME_AUTHOR}),_())};return Gt.createElement("div",{className:KTe.root},Gt.createElement("div",{className:KTe.top},Gt.createElement("div",{className:KTe.inner},Gt.createElement(gTe,{className:KTe.frontImage}),Gt.createElement("div",{className:KTe.topTitle},qTe.top.title),Gt.createElement("div",{className:KTe.topText},qTe.top.text1,Gt.createElement("br",null),qTe.top.text2),Gt.createElement(NTe,{className:KTe.topTags}),Gt.createElement(FB,{className:KTe.createBlog,onClick:O},c?qTe.openMyPage:qTe.createBlog))),Gt.createElement("div",{className:cG()(KTe.line,KTe.howWork)},Gt.createElement("div",{className:KTe.inner},Gt.createElement("div",{className:KTe.title},qTe.howWork.title),Gt.createElement("div",{className:KTe.howWorkRow},Gt.createElement("div",{className:KTe.lineLeft},Gt.createElement(BTe,{classNames:{root:KTe.howWorkStepPicture1}})),Gt.createElement("div",{className:KTe.lineRight},Gt.createElement("div",{className:KTe.howWorkStep},Gt.createElement("div",{className:KTe.howWorkStepNumber},qTe.howWork.steps.step," 1"),Gt.createElement("div",{className:KTe.howWorkStepTitle},qTe.howWork.steps.step1.title),Gt.createElement("div",{className:KTe.howWorkStepText},u?Gt.createElement("span",null,qTe.howWork.steps.step1.signUp):Gt.createElement("span",{className:KTe.howWorkStepLink,onClick:function(){N(),bd.log.auth.openPopup({source:od.MAIN_LOGIN})}},qTe.howWork.steps.step1.signUp)," ",(0,Qr.getParametrizedText)(qTe.howWork.steps.step1.text,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized}))))),Gt.createElement("div",{className:KTe.howWorkRow},Gt.createElement("div",{className:KTe.lineLeft},Gt.createElement("div",{className:KTe.howWorkStep},Gt.createElement("div",{className:KTe.howWorkStepNumber},qTe.howWork.steps.step," 2"),Gt.createElement("div",{className:KTe.howWorkStepTitle},(0,Qr.getParametrizedText)(qTe.howWork.steps.step2.title,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})),Gt.createElement("div",{className:KTe.howWorkStepText},(0,Qr.getParametrizedText)(qTe.howWork.steps.step2.text,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})))),Gt.createElement("div",{className:KTe.lineRight},Gt.createElement(GTe,{classNames:{root:KTe.howWorkStepPicture2}}))),Gt.createElement("div",{className:KTe.howWorkRow},Gt.createElement("div",{className:KTe.lineLeft},Gt.createElement(zTe,{classNames:{root:KTe.howWorkStepPicture3}})),Gt.createElement("div",{className:KTe.lineRight},Gt.createElement("div",{className:KTe.howWorkStep},Gt.createElement("div",{className:KTe.howWorkStepNumber},qTe.howWork.steps.step," 3"),Gt.createElement("div",{className:KTe.howWorkStepTitle},qTe.howWork.steps.step3.title),Gt.createElement("div",{className:KTe.howWorkStepText},(0,Qr.getParametrizedText)(qTe.howWork.steps.step3.text,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized}))))))),Array.isArray(s)&&Gt.createElement("div",{className:cG()(KTe.line,KTe.successStories)},Gt.createElement("div",{className:KTe.inner},Gt.createElement("div",{className:KTe.title},qTe.successStories.title),Gt.createElement(bTe,{successStories:s,successStoriesPerPage:3,avatarSize:g.L,classNames:{block:KTe.successStoriesSlider,list:KTe.successStoriesSliderList,item:KTe.successStoriesSliderItem,name:KTe.successStoriesSliderItemName,countSubscribers:KTe.successStoriesSliderItemCountSubscribers,category:KTe.successStoriesSliderItemCategory,goToBlog:KTe.successStoriesSliderItemGoToBlog}}))),Gt.createElement("div",{className:KTe.separator}),Gt.createElement("div",{className:cG()(KTe.line,KTe.why)},Gt.createElement("div",{className:KTe.inner},Gt.createElement("div",{className:KTe.title},qTe.why.title),Gt.createElement("div",{className:KTe.whyItems},Gt.createElement("div",{className:KTe.whyItem},Gt.createElement("div",{className:cG()(KTe.whyItemIcon,KTe.whyItemIconSecurity)}),Gt.createElement("div",{className:KTe.whyItemText},qTe.why.items.security)),Gt.createElement("div",{className:KTe.whyItem},Gt.createElement("div",{className:cG()(KTe.whyItemIcon,KTe.whyItemIconCommission)}),Gt.createElement("div",{className:KTe.whyItemText},qTe.why.items.commission)),Gt.createElement("div",{className:KTe.whyItem},Gt.createElement("div",{className:cG()(KTe.whyItemIcon,KTe.whyItemIconPrice)}),Gt.createElement("div",{className:KTe.whyItemText},qTe.why.items.price)),Gt.createElement("div",{className:KTe.whyItem},Gt.createElement("div",{className:cG()(KTe.whyItemIcon,KTe.whyItemIconSupport)}),Gt.createElement("div",{className:KTe.whyItemText},qTe.why.items.support))))),Gt.createElement("div",{className:cG()(KTe.line,KTe.calculator)},Gt.createElement("div",{className:KTe.inner},Gt.createElement("div",{className:KTe.lineLeft},Gt.createElement("div",{className:KTe.title},qTe.calculator.titleLeft),Gt.createElement("div",{className:KTe.calculatorField},Gt.createElement("div",{className:KTe.calculatorFieldTitle},(0,Qr.getParametrizedText)(qTe.calculator.fields.subscribers.title,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})),Gt.createElement(tm(),{className:KTe.calculatorFieldInput,value:m||"",onChange:y,mask:Tf()({prefix:"",suffix:" ".concat(qTe.calculator.fields.subscribers.unit),thousandsSeparatorSymbol:" "})})),Gt.createElement("div",{className:KTe.calculatorField},Gt.createElement("div",{className:KTe.calculatorFieldTitle},qTe.calculator.fields.price.title),Gt.createElement(tm(),{className:KTe.calculatorFieldInput,value:f||"",onChange:v,mask:Nf({currency:i})})),Gt.createElement("div",{className:KTe.calculatorDescription},(0,Qr.getParametrizedText)(qTe.calculator.description,{price:Vr({amount:f||0,currency:i,useGrouping:!0})})),Gt.createElement("div",{className:KTe.calculatorResult},Gt.createElement("span",{className:KTe.calculatorResultNumber},h)," ",Gt.createElement("span",{className:KTe.calculatorResultUnit},(0,Qr.getParametrizedText)(qTe.calculator.priceInMonth,{currency:i}))),Gt.createElement("div",{className:KTe.calculatorCommissionInfo},qTe.calculator.commissionInfo)),Gt.createElement("div",{className:KTe.lineRight},Gt.createElement("div",{className:KTe.title},qTe.calculator.titleRight),Gt.createElement("div",{className:KTe.calculatorOfferPopular},qTe.calculator.offer.popular),Gt.createElement("div",{className:KTe.calculatorOfferItems},Gt.createElement("div",{className:KTe.calculatorOfferItem},qTe.calculator.offer.items.access),Gt.createElement("div",{className:KTe.calculatorOfferItem},qTe.calculator.offer.items.influence),Gt.createElement("div",{className:KTe.calculatorOfferItem},qTe.calculator.offer.items.exclusive),Gt.createElement("div",{className:KTe.calculatorOfferItem},qTe.calculator.offer.items.secret),Gt.createElement("div",{className:KTe.calculatorOfferItem},qTe.calculator.offer.items.unbroken),Gt.createElement("div",{className:KTe.calculatorOfferItem},qTe.calculator.offer.items.all))))),Gt.createElement("div",{className:cG()(KTe.line,KTe.use)},Gt.createElement("div",{className:KTe.inner},Gt.createElement("div",{className:KTe.title},qTe.use.title),Gt.createElement(RTe,null))),Gt.createElement("div",{className:cG()(KTe.line,KTe.join)},Gt.createElement("div",{className:KTe.inner},Gt.createElement("div",{className:KTe.title},qTe.join.title),Gt.createElement("div",{className:KTe.joinText},qTe.join.text),Gt.createElement(FB,{onClick:O},c?qTe.openMyPage:qTe.createBlog))))},QTe=function(){return QTe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},QTe.apply(this,arguments)},JTe=function(e){var t,n,o,i=(t=xf().pathname,_f(t,ir.FB_AUTH,!1)),l=function(){var e=_k().currentUser;return PSe(e)}();return function(){var e=Qo(r.FB_AUTH_DISABLED_DISCLAIMER),t=xf(),n=_k().currentUser,o=DV();(0,Gt.useEffect)((function(){e&&(!_f(t.pathname,ir.FB_AUTH,!1)||n&&o||function(){var e,n,r=decodeURIComponent((null===(n=null===(e=(0,Do.parseUrl)(t.search))||void 0===e?void 0:e.query)||void 0===n?void 0:n.back_url)||ir.MAIN);window.location.href="".concat(window.location.protocol,"//").concat(window.location.host).concat(r)}())}),[n])}(),n=i,o=(0,dH.useOverlayPopups)().showPopup,(0,Gt.useEffect)((function(){n&&o({type:a.AUTH_SIGN_IN,data:{disableCloseOnSuccess:!1}})}),[n]),i||!l?Gt.createElement(XTe,QTe({},e)):Gt.createElement(vTe,null)};JTe.getFetchActions=function(e,t){return PSe(t.currentUser)?xSe(0,t):[function(){return HS.action()}]};var ZTe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},$Te=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},eIe=(0,Qr.getTranslation)("@boosty/common/containers.Messages.desktop.hooks.useMessages"),tIe=(0,Qr.getTranslation)("@boosty/common/containers.Messages.desktop.hooks.useMessagesTitle"),nIe=0,rIe=function(){return rIe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rIe.apply(this,arguments)},oIe=(0,Qr.getTranslation)("@boosty/common/containers.Messages.desktop.hooks.useMessagesBroadcast"),aIe=!1,iIe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},lIe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},sIe=function(){var e=(0,dH.useOverlayPopups)(),t=e.showPopup,n=e.closePopup,o=jG().showAlert,i=function(e){var t=e.showPopup,n=e.closePopup,r=e.showAlert,o=(0,Vt.I0)(),i=xf().search,l=$Te((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=$Te((0,Gt.useState)(ft.DEFAULT),2),d=u[0],f=u[1],m=(0,Do.parseUrl)(i).query,h=m.dialogId,v=m.userId;return{dialogId:h,userId:v,dialogueMode:d,isAppliedFilter:s,onMessageVideoOpen:function(e,r){var o=t({type:a.VIDEO_CONTENT,data:{id:e,data:r,onClose:function(){return n(o)}}}).id},onMessagesDelete:function(e,i,l){var s=t({type:a.DELETE_MESSAGE_CONFIRM,data:{onConfirm:function(t){return void 0,void 0,i=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,o((0,dm.Ax)(Hh.action)({dialogId:Number(h),messageIds:e,forAll:t}))];case 1:return a.sent(),r({type:p.SUCCESS,text:eIe.deleteMessageSuccess}),[3,3];case 2:return a.sent(),r({type:p.ERROR,text:eIe.deleteMessageError}),[3,3];case 3:return n(s),[2]}}))},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{o(i.next(e))}catch(e){t(e)}}function r(e){try{o(i.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(n,r)}o((i=i.apply(undefined,[])).next())}));var a,i},isVisibleCheckboxForAll:i,hasDonations:l}}).id},onAppliedFilter:function(e){return c(e)},onDialogueModeChange:function(e){return f(e)}}}({showPopup:t,showAlert:o,closePopup:n}),l=i.dialogId,s=i.userId,c=i.dialogueMode,u=i.isAppliedFilter,d=i.onMessageVideoOpen,f=i.onMessagesDelete,m=i.onAppliedFilter,h=i.onDialogueModeChange,v=function(e){var t=e.dialogueMode,n=e.showPopup,r=e.closePopup,o=e.showAlert,i=e.setDialogueMode,l=(0,Vt.I0)(),s=(0,Vt.v9)(XO).blogUrl,c=function(e){var t=e.dialogueMode,n=(0,Vt.v9)(RP),r=(0,Vt.v9)(kP),o=MW((0,Gt.useState)([]),2),a=o[0],i=o[1],l=MW((0,Gt.useState)([]),2),s=l[0],c=l[1],u=MW((0,Gt.useState)(!1),2),d=u[0],f=u[1],m=MW((0,Gt.useState)(BW),2),p=m[0],h=m[1],v=d?r.total-s.length:a.length,g=JSON.stringify(p)===JSON.stringify(BW),y=p.subscriptionLevelIds.length>0||null!==p.moneySpentFrom||null!==p.moneySpentTo||null!==p.subscriptionMonthsDurationFrom||null!==p.subscriptionMonthsDurationTo||p.paidSubscriptionCanceled;return(0,Gt.useEffect)((function(){return function(){t!==ft.BROADCAST&&h(BW)}}),[p,t]),(0,Gt.useEffect)((function(){if(d){var e=s.map((function(e){return e.id})),t=n.filter((function(t){return!e.includes(t.chatmate.id)})).map((function(e){return e.chatmate}));i(t)}}),[n]),{mailingListFilter:p,selectedTotal:v,selectedContactIds:a,excludedContactIds:s,isSelectedContactsAll:d,isNotAllSubscribers:y,isDefaultFilterMailingList:g,onContactIdsSelect:function(e){return i(e)},onContactIdsExclude:function(e){return c(e)},onContactIdsSelectAll:function(){var e=n.map((function(e){return e.chatmate}));f(!0),c([]),i(e)},onContactIdsReset:function(){c([]),i([]),f(!1)},onFilterChange:function(e){f(!1),i([]),h(e)},onFilterReset:function(){return h(BW)}}}({dialogueMode:t}),u=c.mailingListFilter,d=c.selectedTotal,f=c.selectedContactIds,m=c.excludedContactIds,h=c.isSelectedContactsAll,v=c.isNotAllSubscribers,g=c.isDefaultFilterMailingList,y=c.onContactIdsSelect,_=c.onContactIdsExclude,E=c.onContactIdsSelectAll,b=c.onContactIdsReset,S=c.onFilterChange,T=c.onFilterReset;return{selectedTotal:d,selectedContactIds:f,excludedContactIds:m,isSelectedContactsAll:h,isDefaultFilterMailingList:g,mailingListFilter:u,onContactIdsSelect:y,onContactIdsExclude:_,onContactIdsSelectAll:E,onContactIdsReset:b,onMailingFilterButtonClick:function(){var e=n({type:a.MAILING_LIST_FILTER,data:{filter:u,onApply:function(e){var t=e.moneySpentFrom,n=e.moneySpentTo,r=e.subscriptionMonthsDurationFrom,a=e.subscriptionMonthsDurationTo,i=t&&n&&t>n,l=r&&a&&r>a;i&&o({type:p.ERROR,text:oIe.moneySpentError}),l&&o({type:p.ERROR,text:oIe.subscriptionTimeError}),i||l||S(e)},onClose:function(){return r(e)}}}).id},onFilterReset:T,onMessageBroadcastSend:function(e,t,c,g){if(!aIe){aIe=!0;var y=n({type:a.SEND_MESSAGE_CONFIRM,onClose:function(){return aIe=!1},data:{data:e,teaserData:t,price:c,totalRecipients:d,onConfirm:function(){return a=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,l((0,dm.Ax)(Fh.action)(rIe(rIe({blogUrl:s,isAllSubscribers:!v&&h,fixedSubscriberIds:h?[]:f.map((function(e){return e.id})),excludeSubscriberIds:h?m.map((function(e){return e.id})):[],data:e,teaserData:t,price:c},u),{isNotifyUsersByEmail:g})))];case 1:return n.sent(),b(),i(ft.DEFAULT),o({type:p.SUCCESS,text:oIe.sendBroadcastMessageSuccess}),[3,3];case 2:return n.sent(),o({type:p.ERROR,text:oIe.sendBroadcastMessageError}),[3,3];case 3:return aIe=!1,r(y),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function r(e){try{i(a.next(e))}catch(e){t(e)}}function o(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(r,o)}i((a=a.apply(void 0,[])).next())}));var n,a},onClose:function(){aIe=!1,r(y)}}}).id}}}}({dialogueMode:c,showAlert:o,showPopup:t,closePopup:n,setDialogueMode:h}),g=v.isDefaultFilterMailingList,y=v.isSelectedContactsAll,_=v.mailingListFilter,E=v.selectedTotal,b=v.selectedContactIds,S=v.excludedContactIds,T=v.onContactIdsSelect,I=v.onContactIdsExclude,N=v.onContactIdsSelectAll,C=v.onContactIdsReset,w=v.onMailingFilterButtonClick,O=v.onFilterReset,A=v.onMessageBroadcastSend;return function(){var e=(0,Vt.v9)(XO),t=(0,Gt.useRef)(),n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),r=n[0],o=n[1],a=e.unreadMsgCount,i=Ok(a),l=!0,s="",c=function(){var e=nIe>99?"99+":nIe;return qr([(0,Qr.getParametrizedText)(tIe.newMessagesTitle1,{counter:e}),(0,Qr.getParametrizedText)(tIe.newMessagesTitle2,{counter:e}),(0,Qr.getParametrizedText)(tIe.newMessagesTitle5,{counter:e})],nIe)},u=function(){var e=c();m(l?s:e),l=!l},d=function(){s=document.title,nIe&&(t.current=window.setInterval(u,1e3)),o(!0)},f=function(){window.clearInterval(t.current),m(s),o(!1)},m=function(e){return document.title=e};(0,Gt.useEffect)((function(){var e=Df.isVisible();if(e&&(nIe=0),!e&&a){var t=c(),n=a-i==1;s=document.title,n&&nIe++,m(t),r&&f(),d()}}),[a,r]),(0,Gt.useLayoutEffect)((function(){return window.addEventListener("blur",d),window.addEventListener("focus",f),function(){window.removeEventListener("focus",f),window.removeEventListener("blur",d)}}),[a])}(),function(){var e,t=null!==(e=(0,Vt.v9)(XO))&&void 0!==e?e:{},n=t.flags,o=t.isBlogger,i=(0,Vt.I0)(),l=(0,dH.useOverlayPopups)().showPopup,s=Qo(r.DIALOGUE_DONATION);(0,Gt.useEffect)((function(){!n[M.HAS_DIALOG_SETTINGS_PROMO]&&o&&s&&l({type:a.DIALOGS_SETTINGS_PROMO,onClose:function(){i(tg.action({flag:M.HAS_DIALOG_SETTINGS_PROMO}))}})}),[])}(),Gt.createElement("div",{className:"Messages_root_i6x6v"},Gt.createElement("div",{className:"Messages_container_Nv2Ab"},Gt.createElement(s2,{className:"Messages_contacts_ok4Bp",dialogId:Number(l),dialogueMode:c,mailingListFilter:_,isDefaultFilterMailingList:g,isSelectedContactsAll:y,selectedTotal:E,selectedContactIds:b,excludedContactIds:S,onContactIdsReset:C,onContactIdsSelect:T,onContactIdsExclude:I,onContactsSelectAll:N,onDialogueChangeMode:h,onAppliedFilter:m,onMailingFilterButtonClick:w,onMailingFilterReset:O}),Gt.createElement(f1,{selectedTotal:E,recipients:b,isAppliedFilter:u,onMessagesDelete:f,onMessageBroadcastSend:A,onVideoClick:d,showAlert:o,userId:Number(s),dialogId:Number(l),dialogueMode:c})))};sIe.fetchActions=function(e){var t=e.query,n=t.userId,r=t.dialogId,o=e.cookies,a=e.currentUser,i=yW(o),l=iIe(i.sortContactList.value,2),s=l[0],c=l[1],u=iIe(i.sortDialogueList.value,2),d=u[0],f=u[1];return lIe(lIe(lIe(lIe([],iIe(Boolean(a.isBlogger)&&[function(){return qp.action({blogUrl:a.blogUrl})}]),!1),[function(){return Rh.action({offset:0,sortBy:d,sortOrder:f})},function(){return Kh.action({offset:0,sortBy:s,sortOrder:c})}],!1),iIe(Boolean(r)&&[function(){return Dh.action({dialogId:Number(r)})}]),!1),iIe(Boolean(n)&&[function(){return Uh.action({userId:Number(n)})}]),!1)};var cIe=function(e){var t,n=((t={})[le.EN]=hB.Meh,t[le.RU]=hB.$tF,t);return Gt.createElement("div",{className:"LanguageSelectorOption_root_Cl_xe"},Gt.createElement(pB,{className:"LanguageSelectorOption_flagIcon_p3qUA",glyph:n[e.value]}),Gt.createElement("span",{className:"LanguageSelectorOption_localeLabel_LyHnU"},e.label))};const uIe="Offers_tabItem_oKtTD";var dIe=(0,Qr.getTranslation)("@boosty/common/containers.Offers.Offers.desktop"),fIe=function(e){var t=e.isLoading,n=e.text;return Gt.createElement("div",{className:"OfferText_root_ZVog_"},t?Gt.createElement(uM,{className:"OfferText_spinner_jZS_3"}):Gt.createElement(Cf,null,Vo.decode(n)))},mIe=function(e){var t=e.offerConfig,n=(0,Vt.I0)(),r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(Ff(),1)[0],o=(0,Vt.v9)(QR),a=r,i=o[t][a],l=i.data,s=i.meta.networkStatus,c=!l||!s.isFetched;return(0,Gt.useEffect)((function(){l&&s.isFetched||n((0,dm.Ax)(hT.action)({offerType:t,lang:r}))}),[r]),{isLoading:c,text:l}};const pIe={blacklistTable:"SettingsBlacklist_blacklistTable_f_K6X",even:"SettingsBlacklist_even_gBKxR",removeColumn:"SettingsBlacklist_removeColumn_UB93_",tableHeadName:"SettingsBlacklist_tableHeadName_lfok0",tableHeadEmail:"SettingsBlacklist_tableHeadEmail_Eysy6",tableHeadDate:"SettingsBlacklist_tableHeadDate_cV0yq",tableHeadRemove:"SettingsBlacklist_tableHeadRemove_tNNKB",row:"SettingsBlacklist_row_JK7g5",paging:"SettingsBlacklist_paging_isg4q",close:"SettingsBlacklist_close_XBMpq",noTableData:"SettingsBlacklist_noTableData_D24sV",fadeIn:"SettingsBlacklist_fadeIn_jonPy"};var hIe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.SettingsBlacklist.desktop"),vIe=function(e){var t=e.classNames,n=e.children;return Gt.createElement("div",{className:cG()("Card_root_ITt8M",t.root)},Gt.createElement("div",{className:cG()("Card_image_Z3NHr")},Gt.createElement("div",{className:"Card_imageWrapper_c644u"},Gt.createElement("div",{className:t.image}))),Gt.createElement("div",null,n))};const gIe={title:"CardsSet_title_osPdx",description:"CardsSet_description_NRCsv"};var yIe=function(e){var t=e.classNames,n=t.cardsContainerClassName,r=t.cardsSetContainerClassName,o=e.title,a=e.description,i=e.children;return Gt.createElement("div",{className:cG()(gIe.cardsSetContainer,r)},Gt.createElement("div",{className:gIe.title},o),a&&Gt.createElement("div",{className:gIe.description},a),Gt.createElement("div",{className:cG()(gIe.cards,n)},i))};const _Ie="LogoAndBrandFooter_link_pU5cE";var EIe=function(e){var t=e.title,n=e.epsArchiveUrl,r=e.svgArchiveUrl,o=e.pngArchiveUrl;return Gt.createElement("div",null,Gt.createElement("div",{className:"LogoAndBrandFooter_title_XBqvm"},t),Gt.createElement("div",{className:"LogoAndBrandFooter_downloadLinks_j9jg3"},Gt.createElement(pB,{glyph:hB.DjJ,className:"LogoAndBrandFooter_downloadIcon_d5gUq"}),Gt.createElement("a",{href:n,download:!0,className:_Ie,target:"_blank",rel:"noopener noreferrer"},"EPS"),Gt.createElement("a",{href:r,download:!0,className:_Ie,target:"_blank",rel:"noopener noreferrer"},"SVG"),Gt.createElement("a",{href:o,download:!0,className:_Ie,target:"_blank",rel:"noopener noreferrer"},"PNG")))};const bIe={bigBLogo:"Brand_bigBLogo_tyf0o",boostyLogo:"Brand_boostyLogo_H4cNB",boostyDomainLogo:"Brand_boostyDomainLogo_vSkxp",useRulesColor:"Brand_useRulesColor_j3l4A",useRulesCut:"Brand_useRulesCut_Upu8g",useRulesPosition:"Brand_useRulesPosition_ygwQV",useRulesSpace:"Brand_useRulesSpace_kseNt",colorOrange:"Brand_colorOrange_wTv1N",colorDark:"Brand_colorDark_zVw5L",colorGray:"Brand_colorGray_yVsXN",colorBackground:"Brand_colorBackground_JKUB_",rulesFooter:"Brand_rulesFooter_OsODF",footerTitle:"Brand_footerTitle_KSayt",colorsFooterTitle:"Brand_colorsFooterTitle_qiSL7",colorsFooterHex:"Brand_colorsFooterHex_fZOZX",fadeIn:"Brand_fadeIn_OaO3w"};var SIe=(0,Qr.getTranslation)("@boosty/common/containers.Brand"),TIe=function(e){var t=e.classNames,n=t.brandContainerClassName,r=t.cardsContainerClassName,o=t.cardContainerClassName,a=t.cardsSetContainerClassName,i=nr(),l=i.hosts,s=i.projectName,c="".concat(null==l?void 0:l.static,"/static");return Gt.createElement("div",{className:cG()(bIe.brandBookContainer,n)},Gt.createElement(yIe,{title:SIe.logo.title,description:(0,Qr.getParametrizedText)(SIe.logo.description,{projectNameEnglishOnlyCapitalizes:s.latinCapitalized}),classNames:{cardsContainerClassName:r,cardsSetContainerClassName:a}},Gt.createElement(vIe,{classNames:{root:o,image:bIe.bigBLogo}},Gt.createElement(EIe,{title:SIe.logo.footerBigB,epsArchiveUrl:"".concat(c,"/brand_mark_eps.zip"),svgArchiveUrl:"".concat(c,"/brand_mark_svg.zip"),pngArchiveUrl:"".concat(c,"/brand_mark_png.zip")})),Gt.createElement(vIe,{classNames:{root:o,image:bIe.boostyLogo}},Gt.createElement(EIe,{title:SIe.logo.footerBoostyLogo,epsArchiveUrl:"".concat(c,"/boosty_logo_eps.zip"),svgArchiveUrl:"".concat(c,"/boosty_logo_svg.zip"),pngArchiveUrl:"".concat(c,"/boosty_logo_png.zip")})),Gt.createElement(vIe,{classNames:{root:o,image:bIe.boostyDomainLogo}},Gt.createElement(EIe,{title:SIe.logo.footerBoostyDomainLogo,epsArchiveUrl:"".concat(c,"/boosty_domain_logo_eps.zip"),svgArchiveUrl:"".concat(c,"/boosty_domain_logo_svg.zip"),pngArchiveUrl:"".concat(c,"/boosty_domain_logo_png.zip")}))),Gt.createElement(yIe,{title:SIe.rules.title,description:SIe.rules.description,classNames:{cardsContainerClassName:r,cardsSetContainerClassName:a}},Gt.createElement(vIe,{classNames:{root:o,image:bIe.useRulesColor}},Gt.createElement("div",{className:bIe.rulesFooter},SIe.rules.useRulesColor)),Gt.createElement(vIe,{classNames:{root:o,image:bIe.useRulesPosition}},Gt.createElement("div",{className:bIe.rulesFooter},SIe.rules.useRulesPosition)),Gt.createElement(vIe,{classNames:{root:o,image:bIe.useRulesCut}},Gt.createElement("div",{className:bIe.rulesFooter},SIe.rules.useRulesCut)),Gt.createElement(vIe,{classNames:{root:o,image:bIe.useRulesSpace}},Gt.createElement("div",{className:bIe.rulesFooter},SIe.rules.useRulesSpace))),Gt.createElement(yIe,{title:(0,Qr.getParametrizedText)(SIe.colors.title,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized}),classNames:{cardsContainerClassName:r,cardsSetContainerClassName:a}},Gt.createElement(vIe,{classNames:{root:o,image:bIe.colorOrange}},Gt.createElement("div",{className:bIe.colorsFooterTitle},SIe.colors.colorOrangeTitle),Gt.createElement("div",{className:bIe.colorsFooterHex},SIe.colors.colorOrangeHex)),Gt.createElement(vIe,{classNames:{root:o,image:bIe.colorDark}},Gt.createElement("div",{className:bIe.colorsFooterTitle},SIe.colors.colorDarkTitle),Gt.createElement("div",{className:bIe.colorsFooterHex},SIe.colors.colorDarkHex)),Gt.createElement(vIe,{classNames:{root:o,image:bIe.colorGray}},Gt.createElement("div",{className:bIe.colorsFooterTitle},SIe.colors.colorGrayTitle),Gt.createElement("div",{className:bIe.colorsFooterHex},SIe.colors.colorGrayHex)),Gt.createElement(vIe,{classNames:{root:o,image:bIe.colorBackground}},Gt.createElement("div",{className:bIe.colorsFooterTitle},SIe.colors.colorBackgroundTitle),Gt.createElement("div",{className:bIe.colorsFooterHex},SIe.colors.colorBackgroundHex))))};const IIe="BrowserUnsupported_description_InTbV",NIe="BrowserUnsupported_link_Ui2zU";var CIe,wIe,OIe=(0,Qr.getTranslation)("@boosty/common/containers.BrowserUnsupported"),AIe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.desktop.components.BlogSubscriptionLevelsChange"),PIe=function(e){var t=e.title,n=e.onBackClick,r=e.children;return Gt.createElement("div",{className:"BlogSubscriptionLevelsChange_root_lIJO8"},Gt.createElement("div",{className:"BlogSubscriptionLevelsChange_link_fLEHj",onClick:n},Gt.createElement(pB,{glyph:hB.WTy,className:"BlogSubscriptionLevelsChange_icon_cEirt"}),AIe.back),Gt.createElement("div",{className:"BlogSubscriptionLevelsChange_titleContainer_cT8np"},Gt.createElement("h1",{className:"BlogSubscriptionLevelsChange_title_I6eD9"},t)),r)},LIe=(0,Qr.getTranslation)("@common/components.MiniRichEditor"),RIe=function(e){var t,n,r,o=e.classNames,a=void 0===o?{}:o,i=e.value,l=void 0===i?[]:i,s=e.placeholder,c=e.label,d=e.error,f=e.maxTextLength,m=e.onChange,p=(0,Gt.useRef)(null),h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),v=h[0],g=h[1],y=(0,Gt.useMemo)((function(){return l.reduce((function(e,t){try{return e+JSON.parse(t.content)[u.TEXT]}catch(t){return e}}),"").length}),[l]),_=null===(r=null===(n=p.current)||void 0===n?void 0:n.editorRef)||void 0===r?void 0:r.current;return(0,Gt.useEffect)((function(){if(_){var e=function(){return g(!0)},t=function(){return g(!1)};return _.addEventListener("focusin",e),_.addEventListener("focusout",t),function(){_.removeEventListener("focusin",e),_.removeEventListener("focusout",t)}}return Yt.noop}),[_]),Gt.createElement(Kx,{className:a.input,label:c,error:d},Gt.createElement(Gt.Fragment,null,Gt.createElement(mpe,{ref:p,className:fB()("MiniRichEditor_editor_wveAI",(t={},t.MiniRichEditor_focused_vqrv2=v,t)),placeholder:s,data:l,dataChangeHandlers:{onStart:Yt.noop,onEnd:m},textLimit:f,inlineToolbar:["bold","italic","underline"],isTitleDisabled:!0,isToolbarHidden:!0,isPollButtonHidden:!0,isReinitializeEnabled:!1}),Gt.createElement("div",{className:fB()("MiniRichEditor_totalSymbols_lJqCI",a.counterSymbols,Boolean(d)&&"MiniRichEditor_error_rJ0hl")},(0,Qr.getParametrizedText)(LIe.symbolsLimit,{textLength:y,maxTextLength:f}))))};!function(e){e.NAME="name",e.COVER="cover",e.DESCRIPTION="description",e.PRICE="price",e.DISCORD_ROLE_ID="discordRoleId",e.TELEGRAM_GROUPS_IDS="telegramGroupsIds",e.THANK_MESSAGE="thankMessage",e.IS_THANK_MESSAGE_ENABLED="isThankMessageEnabled"}(CIe||(CIe={})),function(e){e.PRICE_REQUIRED="PRICE_REQUIRED",e.PRICE_MIN="PRICE_MIN",e.PRICE_MAX="PRICE_MAX",e.TOO_EXPENSIVE_SUBSCRIPTION="TOO_EXPENSIVE_SUBSCRIPTION",e.TOO_LONG_LEVEL_NAME="TOO_LONG_LEVEL_NAME",e.LEVEL_WITH_SUCH_PRICE_EXISTS="LEVEL_WITH_SUCH_PRICE_EXISTS",e.LEVEL_WITH_SUCH_NAME_EXISTS="LEVEL_WITH_SUCH_NAME_EXISTS",e.DESCRIPTION_TOO_MANY_PARAGRAPHS="DESCRIPTION_TOO_MANY_PARAGRAPHS",e.DESCRIPTION_TOO_MANY_CHARS="DESCRIPTION_TOO_MANY_CHARS"}(wIe||(wIe={}));var kIe=function(e){var t=e.src,n=e.alt,r=e.onClick;return Gt.createElement("div",{className:"CoverImage_cover_AMZ4Q"},Gt.createElement("img",{className:"CoverImage_img_jd73X",src:t,alt:n}),Gt.createElement("button",{className:"CoverImage_button_LQm_c",type:"button",onClick:r},Gt.createElement(pB,{className:"CoverImage_icon_yLNZg",glyph:hB.bMz})))},DIe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},UIe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},BIe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.components.EditForm.components.CoverUpload"),xIe=function(e){var t=e.name,n=void 0===t?"":t,r=e.setCoverUploadId,o=e.onUpload,a=nr().subscriptionLevel.images.limits,i=a.checkWidth,l=a.maxWidth,s=a.maxSize,c=(0,Gt.useRef)(),u=jG().showAlert,d=function(e,t){var n=(0,Qr.getParametrizedText)(BIe.errors.UPLOAD_ERROR,{fileName:e});switch(t){case oe.IMAGE_SIZE_LIMIT:n+=" — ".concat((0,Qr.getParametrizedText)(BIe.errors[t],{limit:s}));break;case oe.IMAGE_WIDTH_LIMIT:n+=" — ".concat((0,Qr.getParametrizedText)(BIe.errors[t],{limit:l}));break;case oe.NETWORK_ERROR:n+=" — ".concat(BIe.errors[t])}u({type:p.ERROR,text:n,isPermanent:!0})};return Gt.createElement(Gt.Fragment,null,Gt.createElement("input",{name:n,ref:c,className:"CoverUpload_input_rmRJx",type:"file",accept:"image/*",value:"",onChange:function(t){Array.from(t.target.files).forEach((function(t){t&&function(t){DIe(void 0,void 0,Promise,(function(){var n,a,c;return UIe(this,(function(u){switch(u.label){case 0:return[4,Yd(t)];case 1:return((n=u.sent()).height>=l||n.width>=l)&&i?(d(t.name,oe.IMAGE_WIDTH_LIMIT),[3,5]):[3,2];case 2:return ro(t.size,Z.B,Z.MB)>s?(d(t.name,oe.IMAGE_SIZE_LIMIT),[3,5]):[3,3];case 3:return[4,Qd(t)];case 4:a=u.sent().file,c=Qa(),function(t,n){DIe(void 0,void 0,Promise,(function(){var a,i,l;return UIe(this,(function(s){switch(s.label){case 0:r(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.uploadImage({type:pe.IMAGE,data:t,uploadId:n})];case 2:return a=s.sent().image,o({type:pe.IMAGE,id:a.id,uploadId:n,url:a.url}),[3,4];case 3:return(i=s.sent())instanceof Ar&&(null===(l=i.serverError)||void 0===l?void 0:l.error)===ne.IMAGE_TOO_BIG?d(t.name,oe.IMAGE_SIZE_LIMIT):d(t.name,oe.NETWORK_ERROR),[3,4];case 4:return[2]}}))}))}(a,c),u.label=5;case 5:return[2]}}))}))}(t)}))}}),Gt.createElement(HB,{className:"CoverUpload_coverButton_n8eDU",type:"button",onClick:function(){c.current.click()}},Gt.createElement(pB,{className:"CoverUpload_coverButtonIcon_yIgaa",classNameSvg:"CoverUpload_coverButtonSvg_o3h8k",glyph:hB.NV3}),Gt.createElement("span",null,BIe.cover.upload)))},MIe=function(e){var t=e.value,n=e.name,r=e.label,o=e.description,a=e.isLoading,i=e.setCoverUploadId,l=e.showAlert,s=e.handleUpload,c=e.onUpload,u=e.onReset;return Gt.createElement(Gt.Fragment,null,Gt.createElement(zx,null,r),a&&Gt.createElement(uM,{size:34,solid:!0}),!a&&(t?Gt.createElement(kIe,{src:t.url,onClick:u}):Gt.createElement(xIe,{name:n,setCoverUploadId:i,uploadImage:s,showAlert:l,onUpload:c})),!t&&Gt.createElement("div",{className:"CoverField_description_FGX4U"},o))},FIe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const GIe="ExternalApps_item_L_8Oz",HIe="ExternalApps_itemExternalApp_spSjj",WIe="ExternalApps_itemExternalAppInfo_f2SN2",VIe="ExternalApps_icon_RR5YE",jIe="ExternalApps_title_u6Hay",zIe="ExternalApps_connectLink_XWNjF";var YIe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.components.EditForm.components.ExternalApps"),KIe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.level,o=e.telegramGroups,a=e.discordRoles,i=e.selectedTelegramGroupsIds,l=e.selectedDiscordRoleId,s=e.currentUserHasAccountTelegram,c=e.currentUserHasDiscordServer,u=function(e){var t=e.level,n=e.telegramGroups,r=e.discordRoles,o=e.selectedTelegramGroupsIds,a=e.selectedDiscordRoleId,i=e.onDiscordRoleChange,l=e.onTelegramGroupChange,s=FIe((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=FIe((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=r?r.find((function(e){return e.id===a})):null,h=n.filter((function(e){return o.includes(e.groupId)}));return(0,Gt.useEffect)((function(){u(t&&t.externalApps&&t.externalApps.discord&&t.externalApps.discord.isConfigured),m(t&&t.externalApps&&t.externalApps.telegram&&t.externalApps.telegram.isConfigured)}),[t]),{isDiscordConfigured:c,isTelegramConfigured:f,selectedTelegramGroups:h,selectedDiscordRole:p,handleDiscordToggle:function(){u(!c),i(c?null:t&&t.externalApps&&t.externalApps.discord&&t.externalApps.discord.data&&t.externalApps.discord.data.role)},handleTelegramToggle:function(){m(!f),l(f?[]:t&&t.externalApps&&t.externalApps.telegram&&t.externalApps.telegram.groups)},handleDiscordRoleChange:function(t){e.onDiscordRoleChange(t)},handleTelegramGroupChange:function(t){var n=t.map((function(e){return e.groupId}));e.onTelegramGroupChange(n)}}}({level:r,telegramGroups:o,discordRoles:a,selectedDiscordRoleId:l,selectedTelegramGroupsIds:i,onDiscordRoleChange:e.onDiscordRoleChange,onTelegramGroupChange:e.onTelegramGroupChange}),d=u.isDiscordConfigured,f=u.isTelegramConfigured,m=u.selectedTelegramGroups,p=u.selectedDiscordRole,h=u.handleDiscordToggle,v=u.handleTelegramToggle,g=u.handleDiscordRoleChange,y=u.handleTelegramGroupChange;return Gt.createElement(qB,{className:n.root,titleClassName:n.title,title:YIe.title},Gt.createElement("div",{className:cG()(GIe,n.item)},Gt.createElement("div",{className:HIe},Gt.createElement("div",{className:WIe},Gt.createElement(pB,{glyph:hB.tj4,className:VIe}),Gt.createElement("div",{className:jIe},YIe.discord),c?Gt.createElement(SF,{checked:d,size:dF.MIDDLE,onToggle:h}):Gt.createElement(cM,{className:zIe,to:ir.SETTINGS_EXTERNAL_APP,target:"_blank"},YIe.connect)),d&&Gt.createElement(lF,{isDisabled:!a.length,options:a,selected:p,labelProp:"name",valueProp:"id",placeholder:YIe.discordRolePlaceholder,Component:function(e){var t=e.valueObject.name;return Gt.createElement(Gt.Fragment,null,t)},onSelect:g}))),Gt.createElement("div",{className:cG()(GIe,n.item)},Gt.createElement("div",{className:HIe},Gt.createElement("div",{className:WIe},Gt.createElement(pB,{glyph:hB.PVw,className:VIe}),Gt.createElement("div",{className:jIe},YIe.telegram),s?Gt.createElement(SF,{checked:f,size:dF.MIDDLE,onToggle:v}):Gt.createElement(cM,{className:zIe,to:ir.SETTINGS_EXTERNAL_APP,target:"_blank"},YIe.connect)),f&&Gt.createElement(lF,{isDisabled:!o.length,isMulti:!0,options:o,selected:m,selectionLabel:1===m.length?m[0].title:null,labelProp:"title",valueProp:"groupId",placeholder:YIe.telegramGroupPlaceholder,onSelect:y,Component:function(e){var t=e.valueObject.title;return Gt.createElement(Gt.Fragment,null,t)}}))))};const qIe={root:"ExternalAppsNotConnected_root_gsNsS",text:"ExternalAppsNotConnected_text_j03em",row:"ExternalAppsNotConnected_row_FDNiB",left:"ExternalAppsNotConnected_left_TDcqQ",right:"ExternalAppsNotConnected_right_Eth5l",icon:"ExternalAppsNotConnected_icon_LIoVT",iconDiscord:"ExternalAppsNotConnected_iconDiscord_dkYkk",iconDiscordOnly:"ExternalAppsNotConnected_iconDiscordOnly_Gki4N",iconTelegram:"ExternalAppsNotConnected_iconTelegram_PEXdd",link:"ExternalAppsNotConnected_link_Yref5",linkText:"ExternalAppsNotConnected_linkText_wDP4t",fadeIn:"ExternalAppsNotConnected_fadeIn_QEOXN"};var XIe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.components.EditForm.components.ExternalAppsNotConnected"),QIe=function(){var e=Qo(r.TELEGRAM),t=Qo(r.DISCORD),n=e&&!t,o=t&&!e,a=o?(0,Qr.getParametrizedText)(XIe.text,{externalApps:XIe.discord}):n?(0,Qr.getParametrizedText)(XIe.text,{externalApps:XIe.telegram}):(0,Qr.getParametrizedText)(XIe.text,{externalApps:"".concat(XIe.discord," ").concat(XIe.or," ").concat(XIe.telegram)});return Gt.createElement("div",{className:qIe.root},Gt.createElement("div",{className:qIe.text},a),Gt.createElement("div",{className:qIe.row},Gt.createElement("div",{className:qIe.left},Gt.createElement(cM,{to:ir.SETTINGS_EXTERNAL_APP,className:qIe.link,target:"_blank"},Gt.createElement("span",{className:qIe.linkText},XIe.connect))),Gt.createElement("div",{className:qIe.right},e&&Gt.createElement(pB,{className:cG()(qIe.icon,qIe.iconTelegram,n&&qIe.iconTelegramOnly),glyph:hB.PVw}),t&&Gt.createElement(pB,{className:cG()(qIe.icon,qIe.iconDiscord,o&&qIe.iconDiscordOnly),glyph:hB.tj4}))))},JIe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.components.EditForm.components.SmilesBlock"),ZIe=function(e){var t=e.className;return Gt.createElement("div",{className:cG()("SmilesBlock_root_z0H_q",t)},Gt.createElement("div",{className:"SmilesBlock_text_V_M3S"},JIe.text),Gt.createElement("div",{className:"SmilesBlock_row_vSMbI"},Gt.createElement("div",{className:"SmilesBlock_left_m4JXQ"},Gt.createElement(cM,{className:"SmilesBlock_link_Fo0xc",to:ir.SETTINGS_SMILES,target:"_blank"},Gt.createElement("span",{className:"SmilesBlock_linkText_PiHU9"},JIe.link),Gt.createElement(pB,{glyph:hB.XKU,className:"SmilesBlock_upgradeIcon_sz3J7"}))),Gt.createElement("div",{className:"SmilesBlock_right_viLnL"},Gt.createElement("div",{className:"SmilesBlock_smiles_Ccs58"}))))},$Ie=function(e){var t=e.className,n=e.title,r=e.price,o=e.description,a=e.button;return Gt.createElement("div",{className:cG()("SubscriptionLevelsExampleTemplate_root_NBZyF",t)},Gt.createElement("div",{className:"SubscriptionLevelsExampleTemplate_title_PzCgi"},n),Gt.createElement("div",{className:"SubscriptionLevelsExampleTemplate_price_H1Auz"},r),Gt.createElement("div",{className:"SubscriptionLevelsExampleTemplate_description_WmuF4"},o),Gt.createElement("div",{className:"SubscriptionLevelsExampleTemplate_button_C_UKd"},a))},eNe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.components.EditForm.components.SubscriptionLevelsExample"),tNe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.onClick,o=nr().locale,a=o===ce.EN,i=zr(o);return Gt.createElement("div",{className:cG()("SubscriptionLevelsExample_root_hRmzo",n.root)},Gt.createElement("div",{className:"SubscriptionLevelsExample_text_m0L1M"},Gt.createElement("span",null,eNe.text1),Gt.createElement("span",null,eNe.text2)),Gt.createElement("div",{className:cG()("SubscriptionLevelsExample_row_iUNXd",n.rowRoot)},Gt.createElement("div",{className:cG()("SubscriptionLevelsExample_left_OynSc",n.rowLeft)},Gt.createElement("div",{className:"SubscriptionLevelsExample_linkButton_O0HkC",onClick:r},eNe.button)),Gt.createElement("div",{className:cG()("SubscriptionLevelsExample_right_adqk3",n.rowRight)},Gt.createElement($Ie,{className:"SubscriptionLevelsExample_subscriptionLevelFirst_nItK9",title:eNe.subscriptionLevel1.title,price:(0,Qr.getParametrizedText)(eNe.price,{price:Vr({amount:a?20:200,currency:i})}),description:eNe.subscriptionLevel1.description,button:eNe.subscriptionLevel1.button}),Gt.createElement($Ie,{className:"SubscriptionLevelsExample_subscriptionLevelSecond_V4Sa3",title:eNe.subscriptionLevel2.title,price:(0,Qr.getParametrizedText)(eNe.price,{price:Vr({amount:a?50:500,currency:i})}),description:eNe.subscriptionLevel2.description,button:eNe.subscriptionLevel2.button}))))};const nNe="SubscriptionLevelsPromo_example_Pwp0o";var rNe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.components.EditForm.components.SubscriptionLevelsPromo"),oNe=function(e){var t=e.className,n=Gf().blogUrl,r=(0,Yt.getParametrizedUrl)(ir.BLOG_PROMO,{blogUrl:n});return Gt.createElement("div",{className:cG()("SubscriptionLevelsPromo_root_A5tF9",t)},Gt.createElement("div",{className:"SubscriptionLevelsPromo_text_wpFXz"},rNe.text),Gt.createElement(cM,{className:"SubscriptionLevelsPromo_linkButton_p3pds",to:r},rNe.goTo),Gt.createElement(j7,{title:rNe.exampleA.title,price:{default:150,usd:15},description:rNe.exampleA.description,classNames:{root:cG()(nNe,"SubscriptionLevelsPromo_exampleA_xaYxW")}}),Gt.createElement(j7,{title:rNe.exampleB.title,price:{default:200,usd:25},discount:25,description:rNe.exampleB.description,classNames:{root:cG()(nNe,"SubscriptionLevelsPromo_exampleB_OsSWR"),cardTitle:"SubscriptionLevelsPromo_exampleBCardTitle_CzoFb"}}),Gt.createElement("div",{className:"SubscriptionLevelsPromo_lines_I_8fI"}))},aNe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.components.EditForm.components.ThankMessage"),iNe={data:[],teaser:[],price:null},lNe=function(e){var t=e.thankMessage,n=void 0===t?iNe:t,r=e.isThankMessageEnabled,o=e.onChange,a=e.onPreviewClick,i=e.onThankMessageEnableChange,l=e.onSaveButtonDisableChange,s=nr().dialogues.textMaxLength,c=n.data,u=n.price,d=u>0?function(e){var t=e.filter((function(e){return e.type===pe.TEXT})),n=e.filter((function(e){return e.type===pe.FILE})),r=e.filter((function(e){return e.type===pe.VIDEO_FILE})),o=e.filter((function(e){return e.type===pe.IMAGE})),a=e.filter((function(e){return e.type===pe.AUDIO_FILE})),i=o.length?Bo({url:o[0].url,width:100,height:100,isCroped:!1}):"",l=r.length&&r[0].preview?Bo({url:r[0].preview,width:100,height:100,isCroped:!1}):"";return{audios:{count:a.length,previewUrl:""},files:{count:n.length,previewUrl:""},videos:{count:r.length,previewUrl:l},images:{count:o.length,previewUrl:i},text:{count:t.length,previewUrl:""}}}(c):null,f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),m=f[0],p=f[1];return Gt.createElement("div",{className:"ThankMessage_root_XgvLa"},Gt.createElement("div",{className:"ThankMessage_header_RTk9t"},Gt.createElement("div",{className:"ThankMessage_title_UJrWK"},aNe.title),Gt.createElement(SF,{size:dF.SMALL,onToggle:i,checked:r})),Gt.createElement("div",{className:"ThankMessage_description_ST3Lr"},aNe.description),r&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"ThankMessage_publisher_xOPiX"},Gt.createElement(L0,{initialValue:n,onUploadingStatusChange:function(e){p(e),l(e)},onChange:function(e){var t=e.data,n=e.teaser,r=e.price,a=e.messageTextLength,i=e.teaserTextLength,c=a>=s||i>=s;o({data:t,teaser:n,price:r}),l(c)}})),Gt.createElement("div",{className:"ThankMessage_footer_UCwn_"},Gt.createElement(HB,{isDisabled:m,className:"ThankMessage_button_gw1Sy",onClick:function(){return a({id:null,dialogId:null,authorId:null,createdAt:No(new Date),attachments:d,isPaid:u<=0,price:n.price,data:u>0?[]:n.data,teaser:u<=0?[]:n.teaser})}},Gt.createElement(pB,{glyph:hB.tCy,className:"ThankMessage_icon_l9pxs"}),Gt.createElement("span",null,aNe.previewButton)))))},sNe=function(e){var t;return Sz.Ry().shape(((t={})[CIe.NAME]=Sz.Z_().trim().max(40,wIe.TOO_LONG_LEVEL_NAME).required(),t[CIe.DESCRIPTION]=Sz.IX().transform((function(e){return e.filter((function(e){return e.type===pe.TEXT&&e.modificator!==de.BLOCK_END}))})).max(10,wIe.DESCRIPTION_TOO_MANY_PARAGRAPHS).test("description-length",wIe.DESCRIPTION_TOO_MANY_CHARS,(function(e){return e.reduce((function(e,t){try{return e+JSON.parse(t.content)[u.TEXT]}catch(t){return e}}),"").length<=500})),t[CIe.PRICE]=Sz.Rx().required(wIe.PRICE_REQUIRED).min(e.minLevelPrice,wIe.PRICE_MIN).max(e.maxLevelPrice,wIe.PRICE_MAX),t))};const cNe="EditForm_externalApps_lqUgk",uNe="EditForm_saveButton_F5P_7";var dNe=function(){return dNe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dNe.apply(this,arguments)},fNe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},mNe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.components.EditForm"),pNe=[wIe.LEVEL_WITH_SUCH_PRICE_EXISTS,wIe.PRICE_MAX,wIe.PRICE_MIN,wIe.PRICE_REQUIRED,wIe.TOO_EXPENSIVE_SUBSCRIPTION],hNe=[wIe.LEVEL_WITH_SUCH_NAME_EXISTS],vNe=function(e){var t,n,o,a,i,l,s,c,u,d=e.level,f=e.error,m=e.maxLevelPrice,p=e.minLevelPrice,h=e.currentUser,v=e.currentUserHasAccountTelegram,g=e.currentUserHasDiscordServer,y=e.blog,_=e.isSmallIndentRows,E=e.isCoverLoading,b=e.discordRoles,S=e.telegramGroups,T=e.classNames,I=void 0===T?{}:T,N=e.setCoverUploadId,C=e.uploadImage,w=e.showPreviewMessage,O=e.showExampleSubscriptionLevels,A=e.onRemove,P=void 0===A?Yt.noop:A,L=e.onClose,R=void 0===L?Yt.noop:L,k=nr(),D=k.currencies.default,U=k.tutorialSubscriptionLevels.defaultPrice,B=void 0===U?"":U,x=k.isMobile,M=fNe((0,Gt.useState)(!1),2),F=M[0],G=M[1],H=(0,Gt.useRef)(null),W=jG().showAlert;(0,Gt.useEffect)((function(){d&&$(d)}),[d]),(0,Gt.useEffect)((function(){if(f&&f.serverError){var e=String(f.serverError.error).toUpperCase();ee(hNe,e)&&H.current.setFieldError(CIe.NAME,e),ee(pNe,e)&&H.current.setFieldError(CIe.PRICE,e)}}),[f]);var V=d&&d.count.subscribers>0,z=v||g,Y=Qo(r.THANK_MESSAGE),K=(null==h?void 0:h.isStreamer)&&Qo(r.SMILES_AND_BADGES_SETTINGS),q=Qo(r.DISCORD),X=Qo(r.TELEGRAM),Q=q||X,J=gi(y),Z=function(e){switch(e){case wIe.PRICE_MAX:case wIe.TOO_EXPENSIVE_SUBSCRIPTION:return(0,Qr.getParametrizedText)(mNe.errors[e],{limit:(0,Yt.getFormattedNumber)(Vr({amount:m,currency:D}))});case wIe.PRICE_MIN:return(0,Qr.getParametrizedText)(mNe.errors[e],{limit:(0,Yt.getFormattedNumber)(Vr({amount:p,currency:D}))});case wIe.LEVEL_WITH_SUCH_PRICE_EXISTS:case wIe.LEVEL_WITH_SUCH_NAME_EXISTS:return mNe.errors[String(e).toUpperCase()];case wIe.TOO_LONG_LEVEL_NAME:return(0,Qr.getParametrizedText)(mNe.errors[e],{symbols:"".concat(40," ").concat(qr([mNe.symbols[1],mNe.symbols[2],mNe.symbols[5]],40))});case wIe.DESCRIPTION_TOO_MANY_CHARS:return(0,Qr.getParametrizedText)(mNe.errors[e],{limit:500});case wIe.DESCRIPTION_TOO_MANY_PARAGRAPHS:return(0,Qr.getParametrizedText)(mNe.errors[e],{limit:10});default:return null}},$=function(e){var t=e.name,n=e.price,r=e.externalApps,o=e.thankMessage,a=e.isThankMessageEnabled,i=Ra(e),l=i.cover,s=i.description,c=r&&r.discord&&r.discord.data&&r.discord.data.role&&r.discord.data.role.id,u=r&&r.telegram&&r.telegram.groups&&r.telegram.groups.length>0&&r.telegram.groups||[];H.current.setFieldValue(CIe.NAME,t),H.current.setFieldValue(CIe.COVER,l),H.current.setFieldValue(CIe.DESCRIPTION,s),H.current.setFieldValue(CIe.THANK_MESSAGE,o),H.current.setFieldValue(CIe.IS_THANK_MESSAGE_ENABLED,a),H.current.setFieldValue(CIe.PRICE,n),H.current.setFieldValue(CIe.DISCORD_ROLE_ID,c),H.current.setFieldValue(CIe.TELEGRAM_GROUPS_IDS,u)},ee=function(e,t){return e.some((function(e){return e===t}))},te=function(){P()},ne=function(e){H.current.setFieldValue(CIe.DESCRIPTION,e)},re=function(e){H.current.setFieldValue(CIe.DISCORD_ROLE_ID,e?e.id:null)},oe=function(e){H.current.setFieldValue(CIe.TELEGRAM_GROUPS_IDS,e)},ae=function(e){H.current.setFieldValue(CIe.IS_THANK_MESSAGE_ENABLED,e)},ie=function(e){H.current.setFieldValue(CIe.THANK_MESSAGE,e)},le=function(e){H.current.setFieldValue(CIe.COVER,dNe(dNe({},e),{url:Bo({url:e.url,width:ze.WIDTH,height:ze.HEIGHT})}))},se=function(){H.current.setFieldValue(CIe.COVER,null)};return Gt.createElement(Gz.J9,{initialValues:{name:(null==d?void 0:d.name)||"",cover:null,description:Boolean(null==d?void 0:d.description)?JSON.parse(d.description):[],price:+B||(null==d?void 0:d.price)||0,discordRoleId:(null===(a=null===(o=null===(n=null===(t=null==d?void 0:d.externalApps)||void 0===t?void 0:t.discord)||void 0===n?void 0:n.data)||void 0===o?void 0:o.role)||void 0===a?void 0:a.id)||"",telegramGroupsIds:(null===(l=null===(i=null==d?void 0:d.externalApps)||void 0===i?void 0:i.telegram)||void 0===l?void 0:l.groups)||[],isThankMessageEnabled:(null==d?void 0:d.isThankMessageEnabled)||null,thankMessage:{data:(null===(s=null==d?void 0:d.thankMessage)||void 0===s?void 0:s.data)||[],teaser:(null===(c=null==d?void 0:d.thankMessage)||void 0===c?void 0:c.teaser)||[],price:(null===(u=null==d?void 0:d.thankMessage)||void 0===u?void 0:u.price)||0}},innerRef:H,validateOnMount:!0,validationSchema:sNe({maxLevelPrice:m,minLevelPrice:p}),onSubmit:function(t){var n,r,o=t.name,a=t.cover,i=t.description,l=t.price,s=t.thankMessage,c=t.isThankMessageEnabled,u=t.discordRoleId,d=t.telegramGroupsIds,f=!(null===(n=null==s?void 0:s.data)||void 0===n?void 0:n.length)&&!(null===(r=null==s?void 0:s.teaser)||void 0===r?void 0:r.length),m=f?void 0:s,p=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([a],fNe(i),!1).filter(Boolean);e.onSubmit({name:o,data:p,isThankMessageEnabled:!f&&c,thankMessage:m,price:Number(String(l).replace(/\s/g,""))},u,d)}},(function(e){var t=e.handleSubmit,n=e.errors;return Gt.createElement(Sx,{onSubmit:t,className:cG()("EditForm_root_MniMG",I.root)},Gt.createElement("div",{className:cG()("EditForm_wrapper_dAGK1",I.wrapper)},Gt.createElement("div",{className:I.leftBlock},Gt.createElement(qB,{className:I.form,titleClassName:cG()(I.title,"EditForm_title_aXSai"),title:mNe.title},Gt.createElement(Ix,{isSmallIndent:_,className:I.name},Gt.createElement(Gz.gN,{name:CIe.NAME},(function(t){var r=t.field,o=r.value,a=r.onChange,i=r.onBlur,l=r.name,s=Ef(e,CIe.NAME),c=s?null:Z(n.name);return Gt.createElement(Zx,{name:l,value:o,label:mNe.name.label,placeholder:mNe.name.placeholder,isValid:s,onChange:a,onBlur:i,error:c})}))),Gt.createElement(Ix,{isSmallIndent:_,className:I.cover},Gt.createElement(Gz.gN,{name:CIe.COVER},(function(e){var t=e.field,n=t.value,r=t.name;return Gt.createElement(MIe,{name:r,value:n,label:mNe.cover.label,description:mNe.cover.description,isLoading:E,setCoverUploadId:N,showAlert:W,handleUpload:C,onReset:se,onUpload:le})}))),Gt.createElement(Ix,{isSmallIndent:_,className:I.description},Gt.createElement(Gz.gN,{name:CIe.DESCRIPTION},(function(e){var t=e.field.value,r=n.description,o=Boolean(r)&&Z(r);return Gt.createElement(RIe,{value:t,onChange:ne,label:mNe.description.label,placeholder:mNe.description.placeholder,error:o,maxTextLength:500})}))),Gt.createElement(Ix,{isSmallIndent:_,className:I.price},Gt.createElement(Gz.gN,{name:CIe.PRICE},(function(t){var r=t.field,o=r.value,a=r.onChange,i=r.onBlur,l=r.name,s=Ef(e,CIe.PRICE),c=s?"":Z(n.price),u=s||!o?Z(wIe.PRICE_MAX):null;return Gt.createElement(Gt.Fragment,null,Gt.createElement(Zx,{name:l,value:o||"",disabled:V,mask:Nf(),label:(0,Qr.getParametrizedText)(mNe.price.label,{currency:D}),description:u,descriptionPosition:j.BOTTOM,placeholder:mNe.price.placeholder,onChange:a,onBlur:i,error:c,isValid:s,isErrorInFlow:!0}),V&&Gt.createElement("div",{className:"EditForm_disabledPriceDescription_PJpHH"},mNe.price.disabledBySubscribers))})))),Y&&Gt.createElement("div",{className:"EditForm_thanksMessage_eOv8f"},Gt.createElement(Gz.gN,{name:CIe.THANK_MESSAGE},(function(e){var t=e.field.value,n=e.form.getFieldProps(CIe.IS_THANK_MESSAGE_ENABLED).value;return Gt.createElement(lNe,{thankMessage:t,isThankMessageEnabled:n,onThankMessageEnableChange:ae,onChange:ie,onPreviewClick:w,onSaveButtonDisableChange:G})})))),Q&&x&&z&&Gt.createElement(Ix,{className:cNe},Gt.createElement(Gz.gN,{name:CIe.DISCORD_ROLE_ID},(function(e){var t=e.field.value,n=e.form.getFieldProps(CIe.TELEGRAM_GROUPS_IDS).value,r=void 0===n?[]:n;return Gt.createElement(KIe,{classNames:{root:"EditForm_externalAppsRoot_xHgJV",title:"EditForm_externalAppsTitle__g4ML",item:"EditForm_externalAppsItem_OhnlX"},level:d,currentUserHasAccountTelegram:v,currentUserHasDiscordServer:g,discordRoles:b,telegramGroups:S,selectedDiscordRoleId:t,selectedTelegramGroupsIds:r,onDiscordRoleChange:re,onTelegramGroupChange:oe})}))),Gt.createElement("div",{className:I.rightBlock},Gt.createElement(tNe,{onClick:O}),Q&&Gt.createElement(Gt.Fragment,null,x&&!z?Gt.createElement(QIe,null):x?null:Gt.createElement(Ix,{className:cNe},Gt.createElement(Gz.gN,{name:CIe.DISCORD_ROLE_ID},(function(e){var t=e.field.value,n=e.form.getFieldProps(CIe.TELEGRAM_GROUPS_IDS).value,r=void 0===n?[]:n;return z?Gt.createElement(KIe,{level:d,currentUserHasAccountTelegram:v,currentUserHasDiscordServer:g,discordRoles:b,telegramGroups:S,selectedDiscordRoleId:t,selectedTelegramGroupsIds:r,onDiscordRoleChange:re,onTelegramGroupChange:oe}):Gt.createElement(QIe,null)})))),!x&&K&&Gt.createElement(ZIe,{className:"EditForm_smilesBlock_xeOQH"}),J&&Gt.createElement(oNe,null))),Gt.createElement("div",{className:cG()("EditForm_buttons_r_bh3",I.buttons,I.leftBlock)},d?Gt.createElement(Gt.Fragment,null,Gt.createElement(FB,{isDisabled:F,type:"submit",className:cG()(uNe,I.saveButton)},mNe.save),Gt.createElement(HB,{className:cG()("EditForm_cancelButton_wlJbz",I.cancelButton),onClick:R},mNe.cancel),Gt.createElement(HB,{className:cG()("EditForm_removeButton_UnKyq",I.removeButton),onClick:te,withIcon:!0},Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{glyph:hB.IT9,className:"EditForm_trashIcon_n98PT"}),!x&&mNe.delete))):Gt.createElement(FB,{isDisabled:F,type:"submit",className:cG()(uNe,I.saveButton)},mNe.create)))}))},gNe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.isSmallIndentRows,o=e.onClose,a=e.showPreviewMessage,i=e.showExampleSubscriptionLevels,l=function(e){var t=e.onClose,n=nr(),r=n.subscriptionLevel.paymentLimits,o=r.minPaymentSum,a=r.maxPaymentSum,i=n.currencies.default,l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),s=l[0],c=l[1],u=(0,Vt.I0)(),d=Gf().blogUrl,f=(0,Vt.v9)(XO),m=(0,Vt.v9)(Hw),p=(0,Vt.v9)(Ww),h=(0,Vt.v9)(CL),v=(0,Vt.v9)(eA),g=(0,Vt.v9)(rA),y=(0,Vt.v9)(aA),_=(0,Vt.v9)(wR),E=(0,Vt.v9)(OR),b=(0,Vt.v9)(NR),S=(0,Vt.v9)(CR),T=(0,Vt.v9)(UL);(0,Gt.useEffect)((function(){m||p.isFetching||I(),y&&!S.isFetched&&w(),v&&!E.isFetched&&C()}),[]),(0,Gt.useEffect)((function(){h.isFetched&&t()}),[h]),(0,Gt.useEffect)((function(){y&&!S.isFetched&&w()}),[y]),(0,Gt.useEffect)((function(){v&&!E.isFetched&&C()}),[v]);var I=function(){u((0,dm.Ax)(Nm.action)({blogUrl:d}))},N=function(e,t,n){return u((0,dm.Ax)(Qp.action)({blogUrl:d,level:e,discordRoleId:t,tgGroupIds:n}))},C=function(){u((0,dm.Ax)(vE.action)({blogUrl:d}))},w=function(){u((0,dm.Ax)(hE.action)())},O=T[s]&&T[s].meta.isFetching,A=a[i],P=o[i],L=y&&!S.isFetched&&!S.error,R=v&&!E.isFetched&&!E.error;return{blog:m,currentUser:f,currentUserHasAccountTelegram:v,currentUserHasAccountDiscord:g,currentUserHasDiscordServer:y,discordRoles:b,telegramGroups:_,createNetworkStatus:h,isLoading:R||L,maxLevelPrice:A,minLevelPrice:P,isCoverLoading:O,setCoverUploadId:c,onSubmit:function(e,t,n){return void 0,void 0,o=function(){var r,o,a,i,l;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(s){switch(s.label){case 0:return r=e.name,o=e.data,a=e.price,i=e.externalApps,l=e.thankMessage,[4,N({name:r,data:o,price:a,thankMessage:l,externalApps:i},t,n)];case 1:return s.sent(),bd.log.gtm.createTearSuccess(),[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}));var r,o},uploadImage:function(e){return u((0,dm.Ax)(WE.action)({image:e}))}}}({onClose:o}),s=l.blog,c=l.currentUser,u=l.currentUserHasAccountTelegram,d=l.currentUserHasAccountDiscord,f=l.currentUserHasDiscordServer,m=l.discordRoles,p=l.telegramGroups,h=l.isLoading,v=l.createNetworkStatus,g=l.maxLevelPrice,y=l.minLevelPrice,_=l.isCoverLoading,E=l.setCoverUploadId,b=l.uploadImage,S=l.onSubmit;return h?Gt.createElement("div",{className:"BlogSubscriptionLevelsAdd_spinnerContainer_B_QpL"},Gt.createElement(uM,{size:100})):Gt.createElement(vNe,{classNames:{form:n.form,root:n.root,wrapper:n.wrapper,leftBlock:n.leftBlock,rightBlock:n.rightBlock,title:n.formTitle,name:n.formName,description:n.formDescription,cover:n.formCover,price:n.formPrice,buttons:n.formButtons,removeButton:n.formRemoveButton,cancelButton:n.formCancelButton,saveButton:n.formSaveButton},currentUser:c,currentUserHasAccountTelegram:u,currentUserHasAccountDiscord:d,currentUserHasDiscordServer:f,discordRoles:m,telegramGroups:p,maxLevelPrice:g,minLevelPrice:y,error:v.error,isCoverLoading:_,isSmallIndentRows:r,setCoverUploadId:E,showPreviewMessage:a,showExampleSubscriptionLevels:i,uploadImage:b,onSubmit:S,blog:s})},yNe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.BlogSubscriptionLevelsAdd.desktop"),_Ne=function(){return _Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_Ne.apply(this,arguments)},ENe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.isSmallIndentRows,o=e.onClose,a=e.onRemove,i=e.showPreviewMessage,l=e.showExampleSubscriptionLevels,s=function(e){var t=e.onClose,n=nr(),r=n.subscriptionLevel.paymentLimits,o=n.currencies.default,a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),i=a[0],l=a[1],s=(0,Vt.I0)(),c=Gf(),u=c.blogUrl,d=c.levelId,f=(0,Vt.v9)(XO),m=(0,Vt.v9)(Hw),p=(0,Vt.v9)(cL),h=(0,Vt.v9)(eA),v=(0,Vt.v9)(rA),g=(0,Vt.v9)(aA),y=(0,Vt.v9)(wR),_=(0,Vt.v9)(NR),E=(0,Vt.v9)(Ww),b=(0,Vt.v9)(uL),S=(0,Vt.v9)(wL),T=(0,Vt.v9)(OR),I=(0,Vt.v9)(CR),N=(0,Vt.v9)(UL);(0,Gt.useEffect)((function(){w(),m||E.isFetching||C(),g&&!I.isFetched&&A(),h&&!T.isFetched&&O()}),[]),(0,Gt.useEffect)((function(){S.isFetched&&t()}),[S]),(0,Gt.useEffect)((function(){g&&!I.isFetched&&A()}),[g]),(0,Gt.useEffect)((function(){h&&!T.isFetched&&O()}),[h]);var C=function(){s((0,dm.Ax)(Nm.action)({blogUrl:u}))},w=function(){s((0,dm.Ax)(Fp.action)({blogUrl:u,levelId:Number(d)}))},O=function(){s((0,dm.Ax)(vE.action)({blogUrl:u}))},A=function(){s((0,dm.Ax)(hE.action)())},P=N[i]&&N[i].meta.isFetching,L=r.maxPaymentSum[o],R=r.minPaymentSum[o],k=g&&!I.isFetched&&!I.error,D=h&&!T.isFetched&&!T.error,U=!b.isFetched||k||D;return{currentUserHasDiscordServer:g,currentUserHasAccountTelegram:h,currentUserHasAccountDiscord:v,currentUser:f,blog:m,level:p,discordRoles:_,telegramGroups:y,editNetworkStatus:S,isCoverLoading:P,maxLevelPrice:L,minLevelPrice:R,isLoading:U,setCoverUploadId:l,onSubmit:function(e,t,n){var r=e.name,o=e.data,a=e.price,i=e.thankMessage,l=e.isThankMessageEnabled;!function(e,t,n){s((0,dm.Ax)(Jp.action)({blogUrl:u,levelId:Number(d),level:e,discordRoleId:t,tgGroupIds:n}))}(_Ne({name:r,data:o,price:a,isThankMessageEnabled:l},l&&{thankMessage:i}),t,n)},uploadImage:function(e){return s((0,dm.Ax)(WE.action)({image:e}))}}}({onClose:o}),c=s.currentUserHasDiscordServer,u=s.currentUserHasAccountTelegram,d=s.currentUserHasAccountDiscord,f=s.currentUser,m=s.blog,p=s.level,h=s.discordRoles,v=s.telegramGroups,g=s.editNetworkStatus,y=s.isLoading,_=s.isCoverLoading,E=s.minLevelPrice,b=s.maxLevelPrice,S=s.setCoverUploadId,T=s.onSubmit,I=s.uploadImage;return y?Gt.createElement("div",{className:"BlogSubscriptionLevelsEdit_spinnerContainer_Av4oO"},Gt.createElement(uM,{size:100})):Gt.createElement(vNe,{classNames:{form:n.form,root:n.root,wrapper:n.wrapper,leftBlock:n.leftBlock,rightBlock:n.rightBlock,title:n.formTitle,name:n.formName,description:n.formDescription,price:n.formPrice,cover:n.formCover,buttons:n.formButtons,saveButton:n.formSaveButton,removeButton:n.formRemoveButton,cancelButton:n.formCancelButton},currentUser:f,maxLevelPrice:b,minLevelPrice:E,level:p,blog:m,currentUserHasAccountTelegram:u,currentUserHasAccountDiscord:d,currentUserHasDiscordServer:c,discordRoles:h,telegramGroups:v,error:g.error,isCoverLoading:_,isSmallIndentRows:r,setCoverUploadId:S,onSubmit:T,onRemove:a,onClose:o,showPreviewMessage:i,showExampleSubscriptionLevels:l,uploadImage:I})},bNe=(0,Qr.getTranslation)("@boosty/common/containers.BlogSubscriptionLevels.BlogSubscriptionLevelsEdit.desktop"),SNe=function(){return SNe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},SNe.apply(this,arguments)},TNe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},INe=(0,Qr.getTranslation)("@boosty/common/components.EmptyMediaAlbum.components.EmptyWithFilter"),NNe=function(e){var t=e.className;return Gt.createElement("div",{className:cG()("EmptyWithFilter_root_Uzbuu",t)},Gt.createElement(pB,{className:"EmptyWithFilter_loupeIcon_Wz1or",glyph:hB.B0F}),Gt.createElement("div",{className:"EmptyWithFilter_title_vst6e"},INe.title),Gt.createElement("div",{className:"EmptyWithFilter_subTitle_L8hhr"},(0,Qr.getReactText)(INe.subtitle,{ResetText:function(t){var n=t.text;return Gt.createElement(Gt.Fragment,null,Gt.createElement("br",null),Gt.createElement("span",{className:"EmptyWithFilter_clickableText_ziarj",onClick:e.onResetFeedFilter},n))}})))},CNe=(0,Qr.getTranslation)("@boosty/common/components.EmptyMediaAlbum"),wNe=function(e){var t=e.hasQuery,n=e.type,r=e.onFilterReset;if(t)return Gt.createElement(NNe,{onResetFeedFilter:r});var o=function(e,t){return e?{title:CNe.noQueryMediaFoundTitle}:t===ht.AUDIO?{title:CNe.noAudioTitle,description:CNe.noAudioDescription}:t===ht.VIDEO?{title:CNe.noVideoTitle,description:CNe.noVideoDescription}:t===ht.IMAGE?{title:CNe.noImagesTitle,description:CNe.noImagesDescription}:{title:CNe.noMediaTitle,description:CNe.noMediaDescription}}(t,n),a=o.title,i=o.description;return Gt.createElement("div",{className:"EmptyMediaAlbum_root_VP7vi"},Gt.createElement("div",{className:"EmptyMediaAlbum_image_yM35P"}),Gt.createElement("div",{className:"EmptyMediaAlbum_title_OZfiP"},a),!t&&Gt.createElement("div",{className:"EmptyMediaAlbum_description_zaP2r"},i))},ONe=(0,Qr.getTranslation)("@boosty/common/components.MediaAlbum.MediaAlbumCounters"),ANe=[{type:ht.ALL,getTitle:function(){return ONe.all}},{type:ht.IMAGE,getTitle:function(){return ONe.image}},{type:ht.VIDEO,getTitle:function(){return ONe.video}},{type:ht.AUDIO,getTitle:function(){return ONe.audio}}],PNe=(0,Gt.memo)((function(e){var t=e.mediaAlbumCounters,n=void 0===t?{}:t,r=e.classNames,o=void 0===r?{}:r,a=o.root,i=o.inner,l=Gf(),s=l.blogUrl,c=l.mediaType,u=xf();return Gt.createElement("div",{className:cG()("MediaAlbumCounters_root_pcsDp",a)},Gt.createElement("div",{className:cG()("MediaAlbumCounters_inner_SmOrQ",i)},ANe.map((function(e){var t=e.type,r=e.getTitle,o=n[t];if(0===o)return null;var a=(0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:s,mediaType:t},(0,Do.parse)(u.search)),i=c===t;return Gt.createElement(cM,{className:cG()("MediaAlbumCounters_item_Pi0WW",i&&"MediaAlbumCounters_active_KM7qd"),key:t,to:a,onClick:function(){bd.log.mediaAlbum.albumTypeFilterClick(t)}},r()," ",o||"")}))))}));function LNe(e){return e.media.type===pe.VIDEO_FILE}function RNe(e){return e.media.type===pe.AUDIO_FILE}function kNe(e){return e.media.type===pe.IMAGE}PNe.displayName="MediaAlbumCounters";var DNe=function(e){if(!e)return"";var t=Math.floor(e/60),n=e%60,r=Math.floor(t/60),o=t%60,a=r?"".concat(r,":"):"",i=o?"".concat(a?o.toString().padStart(2,"0"):o):"00",l=n?":".concat(n.toString().padStart(2,"0")):":00";return"".concat(a).concat(i).concat(l)},UNe=(0,Qr.getTranslation)("@boosty/common/components.MediaViewer.components.GoToPostButton"),BNe=(0,Gt.memo)((function(e){var t=e.postId,n=e.blogUrl,r=e.className,o=(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:n,postId:t});return Gt.createElement(cM,{to:o,className:cG()("GoToPostButton_link_HgFEG",r)},UNe.goToPost)}));BNe.displayName="GoToPostButton";var xNe=function(){return Gt.createElement("div",{className:"MediaLoading_root_JSulR"},Gt.createElement(uM,{size:50}))},MNe=(0,Qr.getTranslation)("@boosty/common/components.MediaViewer.components.MediaViewerItemFetchingError"),FNe=function(){var e=jG().showAlert;return(0,Gt.useEffect)((function(){e({type:p.ERROR,text:MNe.error})}),[]),Gt.createElement("div",null)},GNe=function(e){var t=e.media,n=t.media,r=n.url,o=n.size,a=n.title,i=n.id,l=n.duration,s=t.post.signedQuery,c=e.className,u=e.disableSwipeClassName;return Gt.createElement("div",{className:cG()("AudioViewer_root_Crxw2")},Gt.createElement(_J,{classNames:{root:cG()(c,"AudioViewer_audioWrapper_xzqYd"),progressWrapper:u,volumeRangeWrapper:u},url:r,size:o,fileName:a,signedQuery:s,showDownload:!1,id:i,predefinedDuration:l}))},HNe={width:575,height:625};const WNe={defaultImage:"ClosedMediaTeaser_defaultImage_XAisi",root:"ClosedMediaTeaser_root_k7N0y",lockIcon:"ClosedMediaTeaser_lockIcon_it6eT",card:"ClosedMediaTeaser_card_ci_3N",attachments:"ClosedMediaTeaser_attachments_f54XH",title:"ClosedMediaTeaser_title_odZ6o",content:"ClosedMediaTeaser_content_DcRjF",image:"ClosedMediaTeaser_image_pQQQe",uploadedTeaser:"ClosedMediaTeaser_uploadedTeaser_hCkJO",autoTeaser:"ClosedMediaTeaser_autoTeaser_cZWW4",fadeIn:"ClosedMediaTeaser_fadeIn__PT37"};var VNe=function(){return VNe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},VNe.apply(this,arguments)},jNe=function(e){var t,n=e.media,r=n.media,o=n.post,a=e.className,i=ni(o.teaser),l=i.teaserText,s=i.teaserImage,c=function(e,t,n){return n||(t.title?t.title:e.type==pe.AUDIO_FILE||e.type===pe.VIDEO_FILE?e.title:null)}(r,o,l),u=null==s?void 0:s.url,d=s&&s.rendition!==re.TEASER_AUTO_BACKGROUND;return Gt.createElement("div",{className:WNe.root},Gt.createElement("div",{className:cG()(WNe.card,a,(t={},t[WNe.withTeaser]=Boolean(u),t[WNe.uploadedTeaser]=Boolean(u)&&d,t[WNe.autoTeaser]=Boolean(u)&&!d,t))},u?Gt.createElement("img",{className:WNe.image,src:Bo(VNe({url:u,isCroped:!0},HNe))}):Gt.createElement("div",{className:WNe.defaultImage}),Gt.createElement("div",{className:WNe.content},c&&Gt.createElement("p",{className:WNe.title},c),Gt.createElement(pB,{glyph:hB.Wal,className:WNe.lockIcon}))))},zNe=n(92977);function YNe(e){return Object.is(e,-0)}function KNe(){return window.innerHeight}var qNe=function(e){var t=e.imageRef,n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),r=n[0],o=n[1],a=function(e){var t=e.imageRef,n=(0,Gt.useRef)(null),r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)([null,null]),2),o=r[0],a=r[1];return(0,Gt.useEffect)((function(){return n.current=window.setInterval((function(){var e,r;(null===(e=t.current)||void 0===e?void 0:e.naturalWidth)&&(null===(r=t.current)||void 0===r?void 0:r.naturalHeight)&&(window.clearInterval(n.current),a([t.current.naturalWidth,t.current.naturalHeight]))}),200),function(){window.clearInterval(n.current)}}),[]),o}({imageRef:t}),i=!a[0],l=(0,Gt.useRef)((function(){(t.current.naturalWidth>window.innerWidth||t.current.naturalHeight>window.innerHeight)&&o(!0)})).current;return(0,Gt.useEffect)((function(){l()}),[a]),(0,Gt.useEffect)((function(){return window.addEventListener("orientationchange",l),function(){window.removeEventListener("orientationchange",l)}}),[]),{photoCanBeZoomed:r,imageSizesAreUnknown:i}};const XNe={image:"ImageViewer_image_SWAZz",loading:"ImageViewer_loading_maS3g",root:"ImageViewer_root_lD6Sq",noZoom:"ImageViewer_noZoom_Z_W1O",fadeIn:"ImageViewer_fadeIn_xsBs4"};var QNe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},JNe=function(e){var t=e.media.media.url,n=e.className,r=e.disableSwipe,o=e.enableSwipe,a=e.isSwipeEnabled,i=e.disableSwipeClassName,l=(0,Gt.useRef)(),s=QNe((0,Gt.useState)(!0),2),c=s[0],u=s[1],d=(0,Gt.useRef)(null),f=qNe({imageRef:d}),m=f.photoCanBeZoomed,p=f.imageSizesAreUnknown,h=Bo({url:t,width:120,height:120,isCroped:!1,isRetina:!1}),v=QNe((0,Gt.useState)(!0),2),g=v[0],y=v[1],_=(0,Gt.useCallback)((function(e){var t=d.current;if(!YNe(e.x)&&"0"===(null==t?void 0:t.style.opacity)&&u(!1),(null==e?void 0:e.scale)<=1.01&&!a&&o(),(null==e?void 0:e.scale)>1.01&&a&&r(),t){var n=(0,zNe.z9)()?(0,zNe.Z3)(e):(0,zNe.kO)(e);t.style.setProperty("transform",n)}}),[a]),E=(0,Gt.useCallback)((function(){y(!1)}),[]),b=(0,Gt.useCallback)((function(e){return e.ctrlKey||e.metaKey}),[]);return p?Gt.createElement("div",{className:cG()(XNe.root,n)},Gt.createElement(uM,{size:50}),Gt.createElement("img",{src:t,ref:d,className:XNe.image,style:{visibility:"hidden"}})):m?Gt.createElement("div",{className:cG()(XNe.root,m&&XNe.zoomable,!a&&i,n)},Gt.createElement(zNe.ZP,{inertia:!1,ref:l,onUpdate:_,tapZoomFactor:1,zoomOutFactor:1.4,draggableUnZoomed:!1,shouldInterceptWheel:b},Gt.createElement("img",{src:t,ref:d,style:{backgroundImage:"url(".concat(h,")"),opacity:c?"0":"1"},className:XNe.image,onLoad:E,decoding:"sync"}))):Gt.createElement("div",{className:cG()(XNe.root,XNe.noZoom,n,g&&XNe.loading)},Gt.createElement("img",{src:t,ref:d,style:{backgroundImage:g?"url(".concat(h,")"):""},onLoad:E,className:XNe.image,decoding:"sync",draggable:"false"}))},ZNe=function(e){var t=e.media,n=t.media,r=n.url,o=n.size,a=n.title,i=n.id,l=n.vid,s=n.playerUrls,c=n.preview,u=n.duration,d=n.timeCode,f=n.viewsCounter,m=n.showViewsCounter,p=t.post.signedQuery,h=e.className;return Gt.createElement("div",{className:cG()("VideoViewer_root_B_Gf0",h)},Gt.createElement(fJ,{id:i,src:r,vid:l,videoId:l,title:a,iconType:pe.VIDEO_FILE,playerUrls:s,preview:c,duration:u,className:"VideoViewer_video_iO67d",url:r,size:o,fileName:a,signedQuery:p,timeCode:d,viewsCounter:f,showViewsCounter:m}))},$Ne=function(){return $Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$Ne.apply(this,arguments)},eCe=function(e){var t=e.media,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["media"]),r=D2(n.isPreviousViewed);return t.post.hasAccess?kNe(t)?Gt.createElement(JNe,$Ne({media:t,key:r},n)):RNe(t)?Gt.createElement(GNe,$Ne({media:t,key:r},n)):LNe(t)?Gt.createElement(ZNe,$Ne({media:t,key:r},n)):null:Gt.createElement(jNe,$Ne({media:t},n))},tCe=function(e){var t=e.initialMediaType,n=e.currentActiveSlideIndex,r=e.openingSource,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),a=o[0],i=o[1];return(0,Gt.useEffect)((function(){bd.log.mediaViewer.viewerOpen({contentType:t,openingSource:r}),bd.log.mediaViewer.itemShow({contentType:t,transitionType:me.FIRST_OPENING,openingSource:r})}),[]),{handleStatOnTouchEnd:(0,Gt.useCallback)((function(){i(me.SWIPE)}),[]),handleStatOnNavigationButtonClick:(0,Gt.useCallback)((function(){i(me.CONTROL_CLICK)}),[]),handleStatOnKeyPress:(0,Gt.useCallback)((function(e,t){37!=t&&39!=t||i(me.KEYBOARD)}),[]),handleStatOnTransitionEnd:(0,Gt.useCallback)((function(e,t){n!==e.activeIndex&&a&&bd.log.mediaViewer.itemShow({contentType:t,transitionType:a,openingSource:r})}),[a,n])}};const nCe={root:"MediaViewer_root_zXGCf",carouselWrapper:"MediaViewer_carouselWrapper_y4u8V",controlIcon:"MediaViewer_controlIcon_cYya8",controlButton:"MediaViewer_controlButton_T7FSQ",hidden:"MediaViewer_hidden_eGhRp",closeButton:"MediaViewer_closeButton_MJFi6",prevButton:"MediaViewer_prevButton_mHdBU",arrowIcon:"MediaViewer_arrowIcon_nns38",nextButton:"MediaViewer_nextButton_RwPP7",fadeIn:"MediaViewer_fadeIn_DiOny"};var rCe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},oCe=[w2.W_,w2.eZ,w2.N1],aCe=function(e){var t,n,r=e.onClose,o=e.initialMediaId,a=e.loadMore,i=e.showPostLink,l=void 0===i||i,s=e.openingSource,c=Gf().blogUrl,u=jV(),d=u.mediaAlbum,f=u.isFetching,m=u.error,p=null===(t=null==d?void 0:d.data)||void 0===t?void 0:t.items,h=rCe((0,Gt.useState)(p.findIndex((function(e){return e.id===o}))),1),v=h[0],g=rCe((0,Gt.useState)(v),2),y=g[0],_=g[1],E=rCe((0,Gt.useState)(null),2),b=E[0],S=E[1],T=rCe((0,Gt.useState)((null===(n=p[0])||void 0===n?void 0:n.post)||null),2),I=T[0],N=T[1],C=rCe((0,Gt.useState)(!0),2),w=C[0],O=C[1],A=Gt.useRef(null);(0,Gt.useEffect)((function(){return function(e){var t=document.body;(0,bf.dR)(e);var n="".concat(window.innerHeight,"px");t.style.touchAction="none",t.style.height=n,t.style.overflow="hidden";var r=document.getElementById("root");return r.style.touchAction="none",function(){(0,bf.fW)(),t.style.touchAction="auto",t.style.height="auto",t.style.overflow="auto",r.style.touchAction="auto"}}(document.getElementById(A2))}),[]),x2(r);var P=tCe({initialMediaType:null==p?void 0:p[v].media.type,openingSource:s,currentActiveSlideIndex:y}),L=P.handleStatOnTouchEnd,R=P.handleStatOnNavigationButtonClick,k=P.handleStatOnKeyPress,D=P.handleStatOnTransitionEnd,U=function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(KNe()),2),n=t[0],r=t[1];return(0,Gt.useEffect)((function(){var e=function(){var e=KNe();e>n&&r(e)},t=document.getElementById("modal-root"),o=new ResizeObserver((function(){r(KNe())}));return t&&o.observe(t),document.addEventListener("resize",e),function(){document.removeEventListener("resize",e),o.disconnect()}}),[]),n}();return(0,Ht.createPortal)(Gt.createElement("div",{className:cG()(nCe.root),id:A2,style:matchMedia("(hover: none)").matches?{height:"".concat(U,"px")}:{bottom:0}},Gt.createElement(C2.tq,{modules:oCe,slidesPerView:1,onSwiper:function(e){A.current=e},onTouchEnd:L,onNavigationPrev:R,onNavigationNext:R,onKeyPress:k,initialSlide:v,grabCursor:!0,touchMoveStopPropagation:!0,noSwiping:!0,noSwipingClass:O2,longSwipesRatio:.4,keyboard:!0,spaceBetween:20,threshold:2,speed:250,onTransitionEnd:function(e){var t,n,r=e.previousIndex;S(r);var o=e.activeIndex;_(o);var i=null===(t=p[o])||void 0===t?void 0:t.post;(null==I?void 0:I.id)!==(null==i?void 0:i.id)&&N(i),!(e.activeIndex===p.length-1)||f||d.extra.isLast||a(),D(e,null===(n=null==p?void 0:p[o])||void 0===n?void 0:n.media.type)},observeSlideChildren:!0,preventInteractionOnTransition:!0,navigation:{enabled:!0,nextEl:".".concat(nCe.nextButton),prevEl:".".concat(nCe.prevButton)},virtual:{enabled:!0,addSlidesAfter:0,addSlidesBefore:0,cache:!1}},p.map((function(e,t){return Gt.createElement(C2.o5,{key:e.id,virtualIndex:t},Gt.createElement(eCe,{media:e,isPreviousViewed:b===t,key:e.id,enableSwipe:function(){return O(!0)},disableSwipe:function(){return O(!1)},isSwipeEnabled:w,disableSwipeClassName:O2}))})),!d.extra.isLast&&Gt.createElement(C2.o5,{key:"extra",virtualIndex:p.length},m?Gt.createElement(FNe,null):Gt.createElement(xNe,{key:"loading"}))),Gt.createElement("button",{className:cG()(nCe.controlButton,nCe.closeButton),type:"button",onClick:r},Gt.createElement(pB,{glyph:hB.bMz,className:cG()(nCe.controlIcon,nCe.closeIcon)})),Gt.createElement("button",{className:cG()(nCe.controlButton,nCe.prevButton,0===y&&nCe.hidden),type:"button"},Gt.createElement(pB,{glyph:hB.y9O,className:cG()(nCe.controlIcon,nCe.arrowIcon)})),Gt.createElement("button",{className:cG()(nCe.controlButton,nCe.nextButton,y===p.length-1&&nCe.hidden),type:"button"},Gt.createElement(pB,{glyph:hB.y9O,className:cG()(nCe.controlIcon,nCe.arrowIcon)})),I&&l&&Gt.createElement(BNe,{postId:I.id,blogUrl:c,className:nCe.goToPost})),document.getElementById("root"))},iCe=(0,Qr.getTranslation)("@boosty/common/components.MediaAlbum.MediaAlbumFetchError"),lCe=function(e){var t=e.onRetryClick,n=e.className;return Gt.createElement("div",{className:cG()("MediaAlbumFetchError_root_yFVB1",n)},Gt.createElement("div",{className:"MediaAlbumFetchError_title_fEdqk"},iCe.fetchError),Gt.createElement(VB,{onClick:t},iCe.retry))},sCe=function(e){var t,n,r=e.item,o=!r.post.hasAccess,a=o?null===(n=null===(t=r.post.teaser)||void 0===t?void 0:t.find((function(e){return e.type===pe.IMAGE})))||void 0===n?void 0:n.url:null;return Gt.createElement("div",{className:cG()("AudioItem_root_J2AVw",o&&"AudioItem_rootClosed_FskoP")},a&&Gt.createElement("img",{className:"AudioItem_teaser_PDusy",src:a}),Gt.createElement("div",{className:cG()("AudioItem_overlay_JxrrH",Boolean(a)&&"AudioItem_withTeaser_I7Cj9")},Gt.createElement("div",{className:"AudioItem_title_AuV9e"},r.post.hasAccess&&r.media.title),o?Gt.createElement(pB,{glyph:hB.Wal,className:"AudioItem_closedIcon_zXp5H"}):Gt.createElement(pB,{glyph:hB.BHy,className:"AudioItem_playIcon_UWhT9"}),Gt.createElement("div",{className:"AudioItem_meta_PkBJm"},Gt.createElement(pB,{glyph:hB.PWQ,className:"AudioItem_playIconSmall_TT96Z"}),r.media.duration?Gt.createElement("div",{className:"AudioItem_time_Hm0vW"},DNe(r.media.duration)):null)))},cCe=function(e){var t,n,r=e.item,o=!r.post.hasAccess,a=nr().isMobile?200:300,i=r.media.url||(null===(n=null===(t=r.post.teaser)||void 0===t?void 0:t.find((function(e){return e.type===pe.IMAGE})))||void 0===n?void 0:n.url),l=i&&Bo({url:i,width:a,height:a,isCroped:!1});return Gt.createElement("div",{className:cG()("ImageItem_root_rNlS1",o&&"ImageItem_rootClosed_fAjgn")},l&&Gt.createElement("img",{className:"ImageItem_image_S7fnT",src:l}),Gt.createElement("div",{className:"ImageItem_overlay_NqAaT"},o&&Gt.createElement(pB,{glyph:hB.Wal,className:"ImageItem_closedIcon_G6bLq"}),o&&Gt.createElement(pB,{glyph:hB.NV3,className:"ImageItem_imageIconSmall_r6WV9"})))};const uCe="VideoItem_root_zua2K",dCe="VideoItem_overlay_Zdeqd",fCe="VideoItem_playIconSmall_nUu2f",mCe="VideoItem_meta_oRuOh",pCe="VideoItem_time_AVRhQ";var hCe=(0,Qr.getTranslation)("@boosty/common/components.MediaAlbum.MediaAlbumGallery.components.MediaAlbumGalleryItem.components.VideoItem"),vCe=function(e){var t,n,r=e.item,o=!r.post.hasAccess,a=!r.media.complete;if(o){var i=null===(n=null===(t=r.post.teaser)||void 0===t?void 0:t.find((function(e){return e.type===pe.IMAGE})))||void 0===n?void 0:n.url;return Gt.createElement("div",{className:cG()(uCe,"VideoItem_rootClosed_GAIul")},i&&Gt.createElement("img",{className:"VideoItem_teaser_C8Qsc",src:i}),Gt.createElement("div",{className:cG()(dCe,Boolean(i)&&"VideoItem_withTeaser_Mow2U")},Gt.createElement(pB,{glyph:hB.Wal,className:"VideoItem_closedIcon_fPauh"}),Gt.createElement("div",{className:cG()(mCe,"VideoItem_metaClosed_cdu0g")},Gt.createElement(pB,{glyph:hB.kT3,className:fCe}),r.media.duration?Gt.createElement("div",{className:pCe},DNe(r.media.duration)):null)))}return a?Gt.createElement("div",{className:cG()(uCe,"VideoItem_rootProcessing_vxHp0")},Gt.createElement("div",{className:dCe},Gt.createElement("div",{className:"VideoItem_processingImage_srSBR"}),Gt.createElement("div",{className:"VideoItem_textProcessing_l41WM"},hCe.processing))):Gt.createElement("div",{className:cG()(uCe,"VideoItem_rootWithPreview_Mo8lx")},Gt.createElement("img",{className:"VideoItem_image_Ihhhk",src:r.media.preview}),Gt.createElement("div",{className:dCe},Gt.createElement(pB,{glyph:hB.BHy,className:"VideoItem_playIcon_x5LZ4"}),Gt.createElement("div",{className:mCe},Gt.createElement(pB,{glyph:hB.kT3,className:fCe}),r.media.duration?Gt.createElement("div",{className:pCe},DNe(r.media.duration)):null)))},gCe=function(e){var t=e.item,n=e.onClick;return Gt.createElement("div",{className:"MediaAlbumGalleryItem_wrapper_oDaL_",onClick:function(){n(t)}},LNe(t)?Gt.createElement(vCe,{item:t}):RNe(t)?Gt.createElement(sCe,{item:t}):kNe(t)?Gt.createElement(cCe,{item:t}):null)};const yCe="MediaAlbumGallery_root_rU7du",_Ce="MediaAlbumGallery_listPart_S9Ph4";var ECe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},bCe=function(e){var t=e.list,n=e.onItemClick,r=nr().isMobile?0:192,o=(0,Gt.useRef)(null),a=vD({element:o,rootMargin:"300px 0px 300px 0px"}),i=Math.ceil(t.length/3);return Gt.createElement("div",{className:_Ce,style:{height:i*r,visibility:a?"visible":"hidden"},ref:o},t.map((function(e){return Gt.createElement(gCe,{item:e,onClick:n,key:e.id})})))},SCe=function(e){var t,n=e.loadMore,r=e.classNames,o=void 0===r?{}:r,a=Mf(),i=Gf().blogUrl,l=jV(),s=l.mediaAlbum,c=l.isFetched,u=l.error,d=_k().isAuthorized,f=BK().showPopup,m=ECe((0,Gt.useState)(!1),2),p=m[0],h=m[1],v=ECe((0,Gt.useState)(null),2),g=v[0],y=v[1],_=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.items,E=(0,Gt.useCallback)((function(){h(!1),y(null)}),[]),b=(0,Gt.useCallback)((function(e){if(bd.log.mediaAlbum.tileClick(e.media.type),!RNe(e)&&!LNe(e)||d)if(e.post.hasAccess)!function(e){h(!0),y(e.id)}(e);else{var t=(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:i,postId:e.post.id});a(t)}else f({type:we.AUTH_SIGN_IN})}),[_,d,f]);if(!_||"media"!==s.data.groupBy)return null;if(_.length>=600&&!nr().isMobile){var S=Math.ceil(_.length/15);return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:yCe},new Array(S).fill("").map((function(e,t){var n=_.slice(15*t,15*(t+1));return Gt.createElement(bCe,{list:n,key:t,index:t,onItemClick:b,isLast:t===S-1})})),!s.extra.isLast&&c&&Gt.createElement(FM,{onShow:n}),Boolean(u)&&Gt.createElement(lCe,{onRetryClick:n,className:o.error})),p&&Gt.createElement(aCe,{initialMediaId:g,onClose:E,loadMore:n,openingSource:fe.MEDIA_ALBUM}))}return Gt.createElement("div",{className:yCe},Gt.createElement("div",{className:_Ce},_.map((function(e){return Gt.createElement(gCe,{item:e,onClick:b,key:e.id})}))),(!s.extra.isLast||s.extra.offset)&&c&&Gt.createElement(FM,{onShow:n}),Boolean(u)&&Gt.createElement(lCe,{onRetryClick:n,className:o.error}),p&&Gt.createElement(aCe,{initialMediaId:g,onClose:E,loadMore:n,openingSource:fe.MEDIA_ALBUM}))},TCe={width:575,height:625},ICe=function(){return ICe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ICe.apply(this,arguments)},NCe=function(e){var t,n=e.item,r=n.mediaItems,o=n.post,a=e.className,i=ni(o.teaser),l=i.teaserText,s=i.teaserImage,c=function(e,t,n){if(n)return n;if(t.title)return t.title;var r=e.filter((function(e){return e.type===pe.VIDEO_FILE||e.type===pe.AUDIO_FILE}));return 1===r.length?r[0].title:null}(r,o,l),u=null==s?void 0:s.url,d=s&&s.rendition!==re.TEASER_AUTO_BACKGROUND,f=function(e){return{audio:e.filter((function(e){return e.type===pe.AUDIO_FILE})).length,video:e.filter((function(e){return e.type===pe.VIDEO_FILE})).length,images:e.filter((function(e){return e.type===pe.IMAGE})).length}}(r),m=f.audio,p=f.video,h=f.images;return Gt.createElement("div",{className:cG()("MediaAlbumPostItemTeaser_root_wUOfn",a,(t={},t.MediaAlbumPostItemTeaser_withTeaser_mYgjx=Boolean(u),t.MediaAlbumPostItemTeaser_uploadedTeaser_KNbPI=Boolean(u)&&d,t.MediaAlbumPostItemTeaser_autoTeaser_Acy6k=Boolean(u)&&!d,t))},u?Gt.createElement("img",{className:"MediaAlbumPostItemTeaser_image_J7l1K",src:Bo(ICe({url:u,isCroped:!0},TCe))}):Gt.createElement("div",{className:"MediaAlbumPostItemTeaser_defaultImage_pSwOw"}),Gt.createElement("div",{className:"MediaAlbumPostItemTeaser_content_LiOoB"},c&&Gt.createElement("p",{className:"MediaAlbumPostItemTeaser_title_GLhqq"},c),Gt.createElement(Sye,{audio:m,video:p,images:h,className:"MediaAlbumPostItemTeaser_attachments_BgVH0"})))},CCe=(0,Qr.getTranslation)("@boosty/common/containers.MediaAlbum.BlogMedia.desktop.components.MediaAlbumPostFeed.components.MediaAlbumPostFeedItem"),wCe=(0,Gt.memo)((function(e){var t=e.item,n=t.mediaItems,r=t.post,o=e.subscriptionLevels,a=void 0===o?[]:o,i=Gf().blogUrl,l=(0,Vt.v9)(EA),s=!r.subscriptionLevelId&&!r.price,c=(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:i,postId:r.id});return Gt.createElement("article",{className:cG()("MediaAlbumPostFeedItem_root_ua784",!r.hasAccess&&"MediaAlbumPostFeedItem_withTeaser_g3dGf")},Gt.createElement("div",{className:"MediaAlbumPostFeedItem_header_AXCAC"},Gt.createElement($le,{hasAccess:r.hasAccess,price:r.price,isFreePost:s,subscriptionLevelId:r.subscriptionLevelId,subscriptionLevels:a,currency:l}),Gt.createElement(cM,{className:"MediaAlbumPostFeedItem_goToPost_fekVc",to:c},CCe.goToPost)),r.hasAccess&&r.title&&Gt.createElement("h1",{className:"MediaAlbumPostFeedItem_title_Gtjv0"},r.title),r.hasAccess?Gt.createElement(BJ,{data:n,signedQuery:r.signedQuery}):Gt.createElement(NCe,{item:e.item}))}));wCe.displayName="MediaAlbumPostFeedItem";var OCe=function(e){var t=jV(),n=t.mediaAlbum,r=t.isFetched,o=(0,Vt.v9)(bL);return n&&"post"===n.data.groupBy?Gt.createElement("div",{className:"MediaAlbumPostFeed_root_XyuwV"},n.data.items.map((function(e,t){return Gt.createElement(wCe,{item:e,key:e.post.id,subscriptionLevels:o})})),Gt.createElement("div",{className:"MediaAlbumPostFeed_loadMoreScreenSensor_AjBDD"},!n.extra.isLast&&r&&Gt.createElement(FM,{onShow:e.loadMore}))):null};const ACe={root:"MediaAlbum_root_FZmU1",block:"MediaAlbum_block__SPIs",emptyWrapper:"MediaAlbum_emptyWrapper_CNXh4",countersWrapper:"MediaAlbum_countersWrapper_VVghV",loading:"MediaAlbum_loading_zBFrD"};var PCe=function(){return PCe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},PCe.apply(this,arguments)},LCe=function(e){var t,n,r,o,a=e.listViewType,i=Gf(),l=i.blogUrl,s=i.mediaType,c=Ff().pagesToKeepPositionBetween,u=(0,Gt.useRef)(null);(0,Gt.useEffect)((function(){bd.log.mediaAlbum.albumOpen()}),[]);var d=jV(),f=d.mediaAlbum,m=d.isFetched,p=d.error,h=d.isFetching,v=d.getMediaAlbum,g=d.resetMediaAlbum,y=function(){var e=(0,Vt.I0)(),t=(0,Gt.useCallback)((function(t){return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return[4,e((0,dm.Ax)(kS.action)(t))];case 1:return n.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var n,r}),[]),n=(0,Vt.v9)(bR),r=(0,Vt.v9)(SR),o=!!n&&0===n.all;return zV(zV({mediaAlbumCounters:n,areCountersEmpty:o},r),{getMediaAlbumCounters:t,resetMediaAlbumCounters:function(){e(US())}})}(),_=y.mediaAlbumCounters,E=y.isFetched,b=y.areCountersEmpty,S=y.error,T=y.getMediaAlbumCounters,I=y.resetMediaAlbumCounters,N=_k().isAuthorized,C=function(){var e=Mf(),t=xf(),n=oi(t.search),r=MV((0,Gt.useState)(n),2),o=r[0],a=r[1],i=MV((0,Gt.useState)(!1),2),l=i[0],s=i[1],c=(0,Gt.useCallback)((function(n){var r=xV(xV({},o),n);a(r),s(!0),e((0,Yt.getParametrizedUrl)(t.pathname,null,r))}),[o]),u=(0,Gt.useCallback)((function(){a({isOnlyAllowedPosts:!1,postsFrom:null,postsTo:null,postsTagsIds:[],subscriptionLevelId:null}),s(!1)}),[]),d=(0,Gt.useCallback)((function(){return Object.keys(o).some((function(e){var t=o[e];return Boolean(Array.isArray(t)?t.length:t)}))}),[o]);return{feedFilter:o,isFilterTouched:l,changeFilter:c,resetFilter:u,isFeedFilterApplied:d}}(),w=C.changeFilter,O=C.feedFilter,A=C.isFeedFilterApplied,P=C.resetFilter,L=Ok(O)||O,R=Ok(s)||s,k=Ok(l)||l,D=Boolean(m||p),U=!(null===(t=null==f?void 0:f.data)||void 0===t?void 0:t.items.length),B=Boolean(E||S),x=function(){return!(0,ii.isEqual)(L,O)||k!==l||R!==s},M=function(){var e=fi(a);v(PCe({type:s,blogUrl:l,groupBy:e},O))};return(0,Gt.useEffect)((function(){return function(){g(),I()}}),[]),(0,Gt.useEffect)((function(){var e=fi(a);!x()&&m||v(PCe(PCe({type:s,blogUrl:l,groupBy:e},O),{reset:!0}))}),[O,l,s,N]),(0,Gt.useEffect)((function(){!x()&&E||T(PCe({blogUrl:l},O))}),[l,O]),Gt.createElement(Gt.Fragment,null,m&&Gt.createElement(wse,{direction:"vertical",pagesToKeepPositionBetween:c}),Gt.createElement(Zde,{ref:u,isFeedFilterApplied:A(),onFeedFilterChange:w,onFeedFilterReset:P,currentFilter:O,postsCount:null===(n=null==f?void 0:f.data)||void 0===n?void 0:n.items.length,postsNetworkStatus:{isFetched:m,isFetching:h,error:p}}),Gt.createElement("div",{className:ACe.root},Gt.createElement("div",{className:ACe.countersWrapper},B&&!b&&Gt.createElement(PNe,{mediaAlbumCounters:_})),D&&U&&Gt.createElement("div",{className:ACe.emptyWrapper},Gt.createElement(wNe,{type:s,hasQuery:A(),onFilterReset:P})),(null===(o=null===(r=null==f?void 0:f.data)||void 0===r?void 0:r.items)||void 0===o?void 0:o.length)>0&&Gt.createElement("div",{className:ACe.listWrapper},a===un.POSTS?Gt.createElement(OCe,{loadMore:M}):Gt.createElement(SCe,{loadMore:M})),h&&Gt.createElement("div",{className:ACe.loading},Gt.createElement(uM,{size:40}))))},RCe=function(){var e,t=(e=Gf().mediaType,{config:mi(e)}).config,n=qU().banStatus;return YU({banStatus:n}).shouldShowBanDisclaimer?Gt.createElement(Nse,{description:null==n?void 0:n.description}):Gt.createElement(LCe,{listViewType:t.feedView})};RCe.getFetchActions=function(e,t){var n=t.query,r=t.params,o=r.blogUrl,a=r.mediaType,i=mi(a),l=fi(i.feedView),s=oi("?"+(0,Do.stringify)(n,{arrayFormat:"comma"}));return TNe(TNe([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(Tse(e,t)),!1),[function(){return RS.action(SNe(SNe({type:a,blogUrl:o,groupBy:l},s),{limit:i.loadingLimit}))},function(){return oy.action({blogUrl:o})},function(){return kS.action(SNe({blogUrl:o},s))}],!1)};var kCe=(0,Qr.getTranslation)("@common/components.SearchResultEmpty"),DCe=function(e){var t=e.className;return Gt.createElement("div",{className:fB()("SearchResultEmpty_container_om1qd",t)},Gt.createElement("div",{className:"SearchResultEmpty_picture_tFhxs"}),Gt.createElement("span",{className:"SearchResultEmpty_heading_QajGK"},kCe.heading),Gt.createElement("span",{className:"SearchResultEmpty_description_ZWoeq"},kCe.description))},UCe=(0,Qr.getTranslation)("@common/components.SearchResultNetworkError"),BCe=function(e){return Gt.createElement("div",{className:"SearchResultNetworkError_container_Vezdx"},Gt.createElement("div",{className:"SearchResultNetworkError_pictureNetworkError_EJfnj"}),Gt.createElement("div",{className:"SearchResultNetworkError_title_V02GN"},UCe.title),Gt.createElement("div",{className:"SearchResultNetworkError_description_jGVks"},UCe.description),Gt.createElement(VB,{className:"SearchResultNetworkError_button_twr_0",onClick:e.onTryAgain},UCe.button))},xCe=(0,Qr.getTranslation)("@boosty/common/containers.SearchByBlogs.SearchByBlogsResults.desktop.components.ResultCenterSection"),MCe=function(e){var t=e.title,n=e.subtitle,r=e.publicationsCount;return Gt.createElement(Gt.Fragment,null,Gt.createElement("span",{className:"ResultCenterSection_title_VUPPY"},t),Boolean(n)&&Gt.createElement("span",{className:"ResultCenterSection_subtitle_BFIkg"},n),null!=r&&Gt.createElement("span",{className:"ResultCenterSection_subscribers_P18_v"},(0,Qr.getParametrizedText)(qr([xCe.publications.n1,xCe.publications.n2,xCe.publications.n5],r),{count:r})))},FCe=(0,Qr.getTranslation)("@boosty/common/containers.SearchByBlogs.SearchByBlogsResults.desktop.components.ResultRightSection"),GCe=function(e){var t=e.subscribersCount;return Gt.createElement("div",{className:"ResultRightSection_subscribers_G7ExW"},Gt.createElement("span",{className:"ResultRightSection_count_FmASw"},t)," ",Gt.createElement("span",{className:"ResultRightSection_text_nhpJ9"},qr([FCe.subscribers.n1,FCe.subscribers.n2,FCe.subscribers.n5],Math.abs(t))))},HCe=function(e){var t=e.className,n=e.item,r=e.onSelect,o=(0,Gt.useCallback)((function(){return Gt.createElement(MCe,{title:n.blog.owner.name,subtitle:n.blog.title,publicationsCount:n.blog.count.posts})}),[n]),a=(0,Gt.useCallback)((function(){return Gt.createElement(GCe,{subscribersCount:n.blog.count.subscribers})}),[n]);return Gt.createElement(xee,{classNames:{container:cG()("ResultItem_resultItem_YYpYv",t)},avatarSize:g.L,avatarUrl:n.blog.owner.avatarUrl,renderCenterSection:o,renderRightSection:a,onClick:function(){r(n)}})};const WCe={resultEmpty:"ResultList_resultEmpty_vq6Ny",container:"ResultList_container_Ed3Ze",resultItem:"ResultList_resultItem_inA3T",fadeIn:"ResultList_fadeIn_a6H6r"};var VCe=(0,Qr.getTranslation)("@boosty/common/containers.SearchByBlogs.SearchByBlogsResults.desktop.components.ResultList"),jCe=function(e){var t=e.className,n=e.query,r=e.items,o=e.isLoading,a=e.isErrorNetwork,i=e.isLast,l=e.onSelect,s=e.onShowMore,c=e.onTryAgain,u=e.onResetData,d=Ok(n),f=(0,Gt.useRef)(),m=!r.length,p=function(e){var t=e.visibilityParams,n=e.callsLimit,r=void 0===n?3:n,o=e.isActive,a=e.onAction,i=(0,Gt.useRef)(0),l=vD(t),s=i.current>=r,c=function(){i.current+=1,a()};return(0,Gt.useEffect)((function(){o&&l&&i.current<r&&c()}),[o,l,i]),{isLimitExceeded:s,onAction:c,onCallsCountReset:function(){i.current=0}}}({visibilityParams:{element:f,rootMargin:"0px 0px 50px 0px"},isActive:!m&&!i&&!o,onAction:s}),h=p.isLimitExceeded,v=p.onAction,g=p.onCallsCountReset,y=!o&&!i&&h,_=Boolean(n.length)&&m&&i&&!o&&!a,E=function(e){var t=e.blog.blogUrl;l(t)};return(0,Gt.useEffect)((function(){Boolean(d)&&d!==n&&(g(),u())}),[n]),Gt.createElement("div",{className:cG()(WCe.container,t)},a&&Gt.createElement(BCe,{onTryAgain:c}),_&&Gt.createElement(DCe,{className:WCe.resultEmpty}),!m&&r.map((function(e){return Gt.createElement(HCe,{className:WCe.resultItem,key:e.id,item:e,onSelect:E})})),Gt.createElement("div",{ref:f}),o&&Gt.createElement(ZY,null),y&&Gt.createElement(FB,{className:WCe.showMoreButton,onClick:v},VCe.showMore))},zCe=(0,Qr.getTranslation)("@boosty/common/containers.SearchByBlogs.SearchByBlogsResults.desktop"),YCe=function(){var e,t=nr().search.blogs.limits.limitResultsPage,n=Mf(),r=xf(),o=null===(e=(0,Do.parseUrl)(r.search).query)||void 0===e?void 0:e.searchQuery,a=Ok(o),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),l=i[0],s=i[1],c=function(e){var t=nr().search.blogs.limits,n=t.minLength,r=t.maxLength,o=t.limitInline,a=e.initialQuery,i=e.customLimit,l=e.onQueryChange,s=void 0===l?Yt.noop:l,c=e.onResultChange,u=void 0===c?Yt.noop:c,d=e.onNetworkStatusChange,f=void 0===d?Yt.noop:d,m=(0,Vt.I0)(),p=Mf(),h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(a||""),2),v=h[0],g=h[1],y=oB({initialQuery:a,search:function(e){return void 0,void 0,n=function(){var t,n,r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return g(e.query),t=e.query,n=e.offset,r=e.limit,[4,m((0,dm.Ax)(cb.action)({query:t,offset:n,limit:r}))];case 1:return[2,{items:(o=a.sent()).data.map((function(e){return LV(LV({},e),{id:e.blog.owner.id})})),offset:o.offset,isLast:o.isLast}]}}))},new((t=Promise)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n},limit:i||o,onResultChange:u,onNetworkStatusChange:f}),_=y.items,E=y.isLast,b=y.networkStatus,S=y.onSearch,T=y.onClearResult;return(0,Gt.useEffect)((function(){s(v)}),[v]),{networkStatus:b,query:v,limits:{min:n,max:r},items:_,isLast:E,onChange:function(e){g(e)},onSelect:function(e){p((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:e}))},onResetQuery:function(){g("")},onResetData:T,onSearch:S}}({initialQuery:o||"",customLimit:t,onQueryChange:function(){u.length||s(!1)},onNetworkStatusChange:function(e){e.isFetching||s(!1)}}),u=c.query,d=c.limits,f=c.networkStatus,m=c.items,p=c.isLast,h=c.onChange,v=c.onSelect,g=c.onResetQuery,y=c.onResetData,_=c.onSearch,E=l||f.isFetching,b=Boolean(f.error);return(0,Gt.useEffect)((function(){var e=!u&&!a&&Boolean(o),t=Boolean(a)&&Boolean(o)&&a!==o;(e||t)&&(s(!0),y(),h(o),_(o))}),[o]),Gt.createElement("div",{className:"SearchByBlogsResults_container_cXUnD"},Gt.createElement("h1",{className:"SearchByBlogsResults_heading_MtRGm"},zCe.heading),Gt.createElement(Wee,{className:"SearchByBlogsResults_search_rYEFJ",query:u,items:m,networkStatus:f,limits:d,onEnterKeyDown:function(e){e&&n((0,Yt.getParametrizedUrl)(ir.SEARCH_BY_BLOGS,{},{searchQuery:e}))},onReset:function(){s(!1),g(),n((0,Yt.getParametrizedUrl)(ir.SEARCH_BY_BLOGS,{},{}))},hasSearchButton:!0,isSuggestHidden:!0}),Gt.createElement(jCe,{className:"SearchByBlogsResults_results_hXNW8",query:u,items:m,isLoading:E,isErrorNetwork:b,isLast:p,onShowMore:function(){_(u,{isNextPage:!0})},onTryAgain:function(){s(!0),_(o)},onResetData:y,onSelect:v}))};YCe.fetchActions=function(e){var t=e.query.searchQuery;return t?[function(){return cb.action({query:t,offset:null,limit:20})}]:[]};var KCe=function(e){var t=e.tooltipAlign,n=e.classNames,r=(0,Vt.v9)(XO),o=(0,Vt.v9)(zw),a=null!==r;return(0,Gt.useEffect)((function(){o.isFetched&&function(){if(window.opener){var e={type:I.SUCCESS,data:{status:!0}};try{var t=nr().oauthAllowedOrigins,n=(0,Do.parse)(window.location.search).from;window.opener.postMessage(e,t[n])}catch(t){ho.error('Failed send postMessage "'.concat(e.type,'" with data "').concat(JSON.stringify(e.data),'"'),t)}}}()}),[o.isFetched]),a?Gt.createElement(I3,{classNames:n,email:r.email,createNetworkStatus:o,tooltipAlign:t}):null},qCe=(0,Qr.getTranslation)("@boosty/common/containers.BecomeAuthorStandalone.desktop"),XCe=function(){return XCe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},XCe.apply(this,arguments)},QCe=function(e){var t=e.iconGlyph,n=e.size,r=void 0===n?"medium":n,o=e.classNames,a=void 0===o?{}:o,i=e.children,l=e.type,s=void 0===l?"button":l,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["iconGlyph","size","classNames","children","type"]);return Gt.createElement("button",XCe({className:cG()("PrimaryButton_root_N7Gxt","large"===r?"PrimaryButton_sizeLarge_yJnEn":"PrimaryButton_sizeMedium_wmBUo",null==a?void 0:a.button)},c,{type:s}),t&&Gt.createElement(pB,{className:cG()("PrimaryButton_icon_Z8EcG",a.icon),glyph:t}),i)},JCe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.BlogPromoFilter"),ZCe=vi();const $Ce={select:"BlogPromoFilter_select_wHOHy",placeholder:"BlogPromoFilter_placeholder_ih4Kq"};var ewe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.BlogPromoFilter"),twe=(0,Gt.memo)((function(e){var t=e.classNames,n=e.selectedPromotionTypes,r=e.selectedSortBy,o=e.selectedSubscriptionLevelIds,a=void 0===o?[]:o,i=e.subscriptionLevels,l=void 0===i?[]:i,s=e.onChange,c=[{label:JCe.sortDateDesc,value:St.START_TIME_DESC},{label:JCe.sortDateAsc,value:St.START_TIME_ASC}],u=function(e){return e.deleted?"".concat(e.name," (").concat(ewe.deleted,")"):e.name},d=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(l.map((function(e){return{id:e.id,title:u(e)}}))),!1),f=ZCe.filter((function(e){return null==n?void 0:n.includes(e.value)}));return Gt.createElement(Gt.Fragment,null,Gt.createElement(lF,{className:cG()(null==t?void 0:t.select,$Ce.select,$Ce.promotionSelect),classNames:{placeholder:$Ce.placeholder},onSelect:function(e){var t=null==e?void 0:e.map((function(e){return null==e?void 0:e.value}));s({promotionTypes:(null==t?void 0:t.length)>0?t:void 0})},options:ZCe,selected:f,isMulti:!0,label:ewe.promotionType,placeholder:ewe.allPromoTypes}),Gt.createElement(Jge,{classNames:{root:cG()(null==t?void 0:t.select,$Ce.select),placeholder:$Ce.placeholder},label:ewe.subscriptionLevelLabel,subscriptionLevels:d,subscriptionLevelsSelected:a,onSelect:function(e){s({levelIds:e,offset:Ba.offset})}}),Gt.createElement(lF,{className:cG()(null==t?void 0:t.select,$Ce.select,$Ce.sortSelect),classNames:{placeholder:$Ce.placeholder},onSelect:function(e){s({sortBy:e.value,offset:Ba.offset})},selected:c.find((function(e){return e.value===r})),options:c,label:ewe.selectLabelSort}))}));twe.displayName="BlogPromoFilter";var nwe=["limit","offset","sortBy"],rwe=function(){return rwe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rwe.apply(this,arguments)};const owe="TrialActivationExample_title_covqi",awe="TrialActivationExample_platform_N7FXN";var iwe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.TrialActivationExample"),lwe=function(e){var t=e.userName,n=e.subscriptionName,r=e.trialDuration,o=e.classNames,a=void 0===o?{}:o;return Gt.createElement("div",{className:cG()("TrialActivationExample_root_Ft40r",a.root)},Gt.createElement("div",{className:"TrialActivationExample_avatar_Zh5Ov"}),Gt.createElement("div",{className:cG()(owe,"TrialActivationExample_mainTitle_wktW1")},iwe.title),Gt.createElement("div",{className:"TrialActivationExample_userName_XBZdf"},t),Gt.createElement("div",{className:"TrialActivationExample_card_P6fCH"},Gt.createElement("div",{className:"TrialActivationExample_subscriptionName_QdvLk"},n),Gt.createElement("div",{className:"TrialActivationExample_chat_ZWwep"},iwe.chat,Gt.createElement(pB,{glyph:hB.tj4,className:cG()(awe,"TrialActivationExample_discord_BgKCa")}),Gt.createElement(pB,{glyph:hB.PVw,className:cG()(awe,"TrialActivationExample_telegram_moJno")}))),Gt.createElement("div",{className:cG()(owe,"TrialActivationExample_duration_dXCC9")},(0,Qr.getParametrizedText)(qr(iwe.duration,r),{days:r})),Gt.createElement(FB,{className:cG()("TrialActivationExample_button_LFKcz",a.button)},iwe.activate))};const swe="PromoBannerContent_item_XZKbw",cwe="PromoBannerContent_text_IEsGw",uwe="PromoBannerContent_title_uDdu3",dwe="PromoBannerContent_description_aUvqN",fwe="PromoBannerContent_levelExample_J38kb",mwe="PromoBannerContent_example_AVp2V",pwe="PromoBannerContent_exampleTitle_c06Rg",hwe="PromoBannerContent_exampleDescription_lnyaY",vwe="PromoBannerContent_exampleDiscount_fPcMQ",gwe="PromoBannerContent_exampleCard_VJlPh";var ywe,_we,Ewe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.PromoBannerContent"),bwe=function(e){var t=e.className,n=function(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),t=e[0],n=e[1],r=(0,Vt.I0)(),o=(0,Vt.v9)(XO);return(0,Gt.useEffect)((function(){if(o){var e=o.flags.isPromoBannerSeen;n(!e)}}),[o]),{isVisible:t,onClose:function(){r(tg.action({flag:M.IS_PROMO_BANNER_SEEN})),n(!1)}}}(),r=n.isVisible,o=n.onClose;return r?Gt.createElement("div",{className:cG()("PromoBanner_root_F9k7h",t)},Gt.createElement("ul",{className:"PromoBanner_list_aXuWi"},[Gt.createElement("li",{className:swe,key:0},Gt.createElement(j7,{title:Ewe.example.title,description:Ewe.example.description,discount:25,price:{default:1e3,usd:100},classNames:{root:cG()(mwe,fwe,"PromoBannerContent_firstLevelExample_qocm6"),title:pwe,description:hwe,discount:vwe,card:gwe}}),Gt.createElement("div",{className:cwe},Gt.createElement("div",{className:uwe},Ewe.first.title),Gt.createElement("div",{className:dwe},Ewe.first.description))),Gt.createElement("li",{className:swe,key:1},Gt.createElement(j7,{title:Ewe.example.title,description:Ewe.example.description,trialPeriod:14,trialDescription:Ewe.second.example.trialDescription,price:{default:1e3,usd:100},classNames:{root:cG()(mwe,fwe,"PromoBannerContent_secondLevelExample_Vl2fR"),title:pwe,description:hwe,discount:vwe,card:gwe,trialButton:"PromoBannerContent_trialButton_hXkKq"}}),Gt.createElement("div",{className:cwe},Gt.createElement("div",{className:uwe},Ewe.second.title),Gt.createElement("div",{className:dwe},Ewe.second.description))),Gt.createElement("li",{className:swe,key:2},Gt.createElement("div",{className:"PromoBannerContent_activationExampleContent_en9rj"},Gt.createElement("div",{className:"PromoBannerContent_activationExampleWrapper_M0T1o"},Gt.createElement("div",{className:"PromoBannerContent_activationIcons_W_J1y"},Gt.createElement("div",{className:"PromoBannerContent_lockContainer_XuZjh"},Gt.createElement(pB,{glyph:hB.Wal,className:"PromoBannerContent_lockIcon_UgdGE"})),Gt.createElement("div",{className:"PromoBannerContent_trialLink_nZSoq"},Gt.createElement(pB,{glyph:hB.JHz,className:"PromoBannerContent_linkIcon_JnuoS"}),(0,Qr.getParametrizedText)(Ewe.third.example.link,{host:nr().hosts.main})),Gt.createElement(pB,{glyph:hB.oqS,className:"PromoBannerContent_activationArrowIcon_TFIRo"})),Gt.createElement(lwe,{userName:Ewe.third.example.userName,subscriptionName:Ewe.third.example.subscriptionName,trialDuration:14,classNames:{root:cG()(mwe,"PromoBannerContent_activationExample_MVdMI"),button:"PromoBannerContent_activationButton_OvFwf"}}))),Gt.createElement("div",{className:cwe},Gt.createElement("div",{className:uwe},Ewe.third.title),Gt.createElement("div",{className:dwe},Ewe.third.description)))]),Gt.createElement(pB,{glyph:hB.bMz,className:"PromoBanner_close_Dg9FB",onClick:function(){o()}})):null},Swe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.EmptyPromoList"),Twe=function(e){var t=e.onCreatePromoClick,n=e.isFilterApplied,r=e.onResetFilterClick;return Gt.createElement("div",{className:"EmptyPromoList_root_MXUxg"},Gt.createElement("div",{className:"EmptyPromoList_picture_B95Sc"},Gt.createElement(pB,{glyph:Bde.L_T,className:"EmptyPromoList_pictureArea_Dtm5m"}),Gt.createElement(pB,{glyph:Bde.PMF,className:"EmptyPromoList_ticket_u1QqS"}),Gt.createElement(pB,{glyph:Bde.OmY,className:"EmptyPromoList_percent_sM3Ky"})),Gt.createElement("p",{className:"EmptyPromoList_title_Bqt_x"},n?Swe.filterTitle:Swe.title),Gt.createElement("p",{className:"EmptyPromoList_text_h6mWc"},(0,Qr.getReactText)(n?Swe.filterText:Swe.text,{Link:function(e){var o=e.text;return Gt.createElement(VB,{onClick:n?r:t},o)}})))},Iwe=n(20578),Nwe=n(63761);!function(e){e.PROMOTION_TYPE="promotionType",e.SUBSCRIPTION_LEVEL="subscriptionLevel",e.ACCESS_SUBSCRIBERS_TYPES="accessSubscribersTypes",e.IS_DURATION_LIMITED="isDurationLimited",e.TRIAL_DURATION_IN_DAYS="trialDurationInDays",e.PROMO_END_TIME="promoEndTime",e.IS_ACTIVATION_COUNT_LIMITED="isActivationCountLimited",e.MAX_ACTIVATION_COUNT="maxActivationCount",e.DESCRIPTION="description",e.DISCOUNT_PERCENT="discountPercent"}(ywe||(ywe={})),function(e){e.FIELD_REQUIRED="FIELD_REQUIRED",e.PROMO_ALREADY_EXISTS_AT_LEVEL="PROMO_ALREADY_EXISTS_AT_LEVEL",e.EMPTY_LEVELS="EMPTY_LEVELS",e.DISCOUNT_MIN_LEVEL_PRICE_REACHED="DISCOUNT_MIN_LEVEL_PRICE_REACHED",e.TRIAL_DURATION_TOO_LOW="TRIAL_DURATION_TOO_LOW",e.TRIAL_DURATION_TOO_BIG="TRIAL_DURATION_TOO_BIG",e.PROMO_END_TIME_CANNOT_BE_IN_PAST="PROMO_END_TIME_CANNOT_BE_IN_PAST",e.PROMO_DURATION_TOO_LOW="PROMO_DURATION_TOO_LOW",e.DISCOUNT_PERCENT_TOO_LOW="DISCOUNT_PERCENT_TOO_LOW",e.DISCOUNT_PERCENT_TOO_BIG="DISCOUNT_PERCENT_TOO_BIG",e.DESCRIPTION_TOO_BIG="DESCRIPTION_TOO_BIG",e.SUBSCRIBERS_TYPE_REQUIRED="SUBSCRIBERS_TYPE_REQUIRED"}(_we||(_we={}));var Cwe=[_we.FIELD_REQUIRED,_we.SUBSCRIBERS_TYPE_REQUIRED];const wwe={root:"PromoNewForm_root_hsviC",wrapper:"PromoNewForm_wrapper_XLsk3",formContainer:"PromoNewForm_formContainer_Ji9Kx",title:"PromoNewForm_title_YV8xD",buttons:"PromoNewForm_buttons_rDwdq",saveButton:"PromoNewForm_saveButton_OIyiE",cancelButton:"PromoNewForm_cancelButton_M0Xib",iconInOption:"PromoNewForm_iconInOption_Fbh_o",percent:"PromoNewForm_percent_DIFV0",calendarLink:"PromoNewForm_calendarLink_W06OK",noteError:"PromoNewForm_noteError_hIl6R",noteTextLink:"PromoNewForm_noteTextLink_Az25h",fadeIn:"PromoNewForm_fadeIn_Ag1nQ"};var Owe,Awe=function(){return Awe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Awe.apply(this,arguments)},Pwe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.PromoNew.common.PromoNewForm"),Lwe=function(e){var t=Pwe.errors,n=nr().promo.newPromoFormConfig,r=n.descriptionLength,o=n.promoDuration,a=n.trialDurationInDays,i=n.discountPercent;switch(e){case _we.FIELD_REQUIRED:return t.fieldRequired;case _we.SUBSCRIBERS_TYPE_REQUIRED:return t.subscribersTypeRequired;case _we.DESCRIPTION_TOO_BIG:return(0,Qr.getParametrizedText)(t.maxCharsLength,{value:r.max});case _we.PROMO_DURATION_TOO_LOW:return(0,Qr.getParametrizedText)(qr(t.promoDurationTooLow,o.minHours),{value:o.minHours});case _we.PROMO_END_TIME_CANNOT_BE_IN_PAST:return t.promoEndTimeCannotBeInPast;case _we.TRIAL_DURATION_TOO_LOW:return(0,Qr.getParametrizedText)(t.minValue,{value:a.min});case _we.TRIAL_DURATION_TOO_BIG:return(0,Qr.getParametrizedText)(t.maxValue,{value:a.max});case _we.DISCOUNT_PERCENT_TOO_LOW:return(0,Qr.getParametrizedText)(t.minValue,{value:i.min});case _we.DISCOUNT_PERCENT_TOO_BIG:return(0,Qr.getParametrizedText)(t.maxValue,{value:i.max});case _we.EMPTY_LEVELS:return t.emptyLevels;default:return null}},Rwe=function(e,t){var n,r=t.submitCount,o=t.errors[e];return n=o,Cwe.includes(n)?r>0?Lwe(o):null:Lwe(o)},kwe=function(e){return Pwe.fieldLabels[e]},Dwe=function(e){return Pwe.placeholders[e]},Uwe=function(e){return Pwe.helpers[e]},Bwe=((Owe={})[bt.TRIAL]=function(e){var t=e.selected;return Gt.createElement(pB,{glyph:pk.Mi4,className:cG()(wwe.iconInOption,wwe.calendar,t&&wwe.selected)})},Owe[bt.DISCOUNT]=function(e){var t=e.selected;return Gt.createElement(pB,{glyph:pk.rqj,className:cG()(wwe.iconInOption,wwe.percent,t&&wwe.selected)})},Owe[bt.TRIAL_PRIVATE]=function(e){var t=e.selected;return Gt.createElement(pB,{glyph:pk.HcZ,className:cG()(wwe.iconInOption,wwe.calendarLink,t&&wwe.selected)})},Owe),xwe=vi().map((function(e){return Awe({renderIcon:Bwe[e.value]},e)})),Mwe=function(){return[{value:Tt.NEW_SUBSCRIBERS,label:Pwe.subscribersTypeLabels.newSubscribers.title,description:Pwe.subscribersTypeLabels.newSubscribers.description},{value:Tt.OLD_PAID_SUBSCRIBERS,label:Pwe.subscribersTypeLabels.oldPaidSubscribers.title,description:Pwe.subscribersTypeLabels.oldPaidSubscribers.description},{value:Tt.OTHER_LEVEL_SUBSCRIBERS,label:Pwe.subscribersTypeLabels.otherLevelSubscribers.title,description:Pwe.subscribersTypeLabels.otherLevelSubscribers.description}]},Fwe=function(e){return e[ywe.PROMOTION_TYPE]===bt.DISCOUNT},Gwe=function(e){return e[ywe.PROMOTION_TYPE]===bt.TRIAL},Hwe=function(e){return Gwe(e)||function(e){return e[ywe.PROMOTION_TYPE]===bt.TRIAL_PRIVATE}(e)},Wwe=function(e){return Boolean(e[ywe.IS_ACTIVATION_COUNT_LIMITED])},Vwe=function(e){return Boolean(e[ywe.IS_DURATION_LIMITED])},jwe=(0,Gt.createContext)(null);const zwe={root:"AccessSubscribers_root_IaKHo",icon:"AccessSubscribers_icon_D0KA9",tooltip:"AccessSubscribers_tooltip_ojHJI",unclickable:"AccessSubscribers_unclickable_I72yf",bold:"AccessSubscribers_bold_xDxcQ",list:"AccessSubscribers_list_y_bVH",listItem:"AccessSubscribers_listItem_a6dPT",fadeIn:"AccessSubscribers_fadeIn_nvnH7"};var Ywe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.PromoListItem.components.AccessSubscribers"),Kwe=function(e){var t=e.title,n=e.value,r=e.className;return Gt.createElement("div",{className:cG()("DefinitionItem_root_Yi49C",r)},Gt.createElement("div",{className:"DefinitionItem_title_Pb0nH"},t),Gt.createElement("div",{className:"DefinitionItem_value_uvRnd"},n))},qwe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.PromoListItem.components.ActivationsCount"),Xwe=function(e){var t=e.blogUrl,n=e.promotion;return"".concat(ei(ir.BLOG_TRIAL_ACTIVATION,{blogUrl:t,levelId:n.level.id,promoId:n.id},{linkId:n.linkId}))},Qwe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.PromoListItem.components.CopyLinkButton"),Jwe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.PromoListItem.components.EndTime"),Zwe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.PromoListItem.components.FinishPromoButton");const $we={root:"PromoType_root_OsW1C",text:"PromoType_text_NjAYd",head:"PromoType_head_pq3mY",name:"PromoType_name_pD0YI",iconWrapper:"PromoType_iconWrapper_ytPza",iconType:"PromoType_iconType_IlFvN",discount:"PromoType_discount_tL2QO",fadeIn:"PromoType_fadeIn_YSH4T"};var eOe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.PromoListItem.components.PromoType"),tOe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.PromoListItem.components.StartTime");const nOe={statusText:"Status_statusText_Cdf1w",finished:"Status_finished_yhrzK",highlight:"Status_highlight_TVtyK",active:"Status_active_FT4zQ",light:"Status_light_UO8aX",widthBlock:"Status_widthBlock_k9bLg",visible:"Status_visible__qZoB",hidden:"Status_hidden_XOV1u",fadeIn:"Status_fadeIn_FsaXf"};var rOe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.PromoListItem.components.Status"),oOe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.common.PromoListItem.components.SubscriptionLevel"),aOe=function(e){var t=e.promotion,n=e.children;return Gt.createElement(jwe.Provider,{value:t},n)};aOe.PromoType=function(e){var t=(0,Gt.useContext)(jwe),n=e.className,r=(0,Gt.useMemo)((function(){return Ua(t)?Gt.createElement("div",{className:cG()($we.iconWrapper,$we.discount)},Gt.createElement(pB,{glyph:hB.rqj,className:$we.iconType})):ka(t)?Gt.createElement("div",{className:cG()($we.iconWrapper,$we.trial)},Gt.createElement(pB,{glyph:hB.Mi4,className:cG()($we.iconType,$we.calendar)})):Da(t)?Gt.createElement("div",{className:cG()($we.iconWrapper,$we.trialPrivate)},Gt.createElement(pB,{glyph:hB.HcZ,className:cG()($we.iconType,$we.calendarLink)})):null}),[t]),o=Ua(t)?"".concat(t.discount.percent,"%"):(0,Qr.getParametrizedText)(qr(eOe.trialName,t.trial.days),{value:t.trial.days}),a=Ua(t)?eOe.discountType:ka(t)?eOe.trialType:eOe.trialPrivateType;return Gt.createElement("header",{className:cG()($we.root,n)},r,Gt.createElement("div",{className:$we.text},Gt.createElement("p",{className:$we.head},o),Gt.createElement("p",{className:$we.name},a)))},aOe.AccessSubscribers=function(e){var t=(0,Gt.useContext)(jwe),n=e.classNames,r=void 0===n?{}:n,o=(0,Gt.useMemo)((function(){return e=t.access,Mwe().filter((function(t){switch(t.value){case Tt.NEW_SUBSCRIBERS:return e.newSubscriber;case Tt.OLD_PAID_SUBSCRIBERS:return e.oldPaidSubscriber;case Tt.OTHER_LEVEL_SUBSCRIBERS:return e.accessOtherLevelSubscriber;default:return null}}));var e}),[t.access]),a=1===o.length?o[0].label:(0,Qr.getReactText)((0,Qr.getParametrizedText)(Ywe.mainLabelAndMore,{mainSubscriberType:o[0].label,count:o.length-1}),{Bold:function(e){var t=e.text;return Gt.createElement("b",{className:zwe.bold}," ",t)}}),i=o.length>1?o.slice(1):null;return Gt.createElement(HF,{content:Gt.createElement("div",null,null==i?void 0:i.map((function(e){var t=e.label,n=e.value;return Gt.createElement("div",{className:zwe.listItem,key:n},Gt.createElement(pB,{glyph:hB.ajb,className:zwe.icon})," ",t)}))),position:NF.BOTTOM_END,isGlobal:!0,classNames:{root:cG()(zwe.tooltip,r.root,!i&&zwe.unclickable),content:zwe.contentWrapper}},Gt.createElement("div",{className:zwe.root},Gt.createElement(pB,{glyph:hB.ajb,className:zwe.icon}),a))},aOe.FinishPromoButton=function(e){var t=e.className,n=(0,Gt.useContext)(jwe),r=Gf().blogUrl,o=(0,Vt.I0)(),a=jG().showAlert,i=kH().openConfirmation;return Gt.createElement("button",{onClick:function(){i({onConfirm:function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,o((0,dm.Ax)(aS.action)({blogUrl:r,promoId:n.id}))];case 1:return e.sent(),a({type:p.SUCCESS,text:Zwe.success}),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t},title:Zwe.confirmTitle,confirmButtonText:Zwe.finish,description:Zwe.confirmText,classNames:{root:"FinishPromoButton_confirm_VNCl3",description:"FinishPromoButton_confirmDescription_sh_iv",confirmButton:"FinishPromoButton_confirmButton_WnS1D",title:"FinishPromoButton_confirmTitle_Coi2L",buttons:"FinishPromoButton_buttons_fq6es"}})},className:cG()("FinishPromoButton_button_bkPBq",t)},Zwe.finish)},aOe.CopyLinkButton=function(e){var t=e.className,n=Gf().blogUrl,r=(0,Gt.useContext)(jwe),o=jG().showAlert;return Gt.createElement(qhe,{text:Da(r)&&Xwe({blogUrl:n,promotion:r}),showAlert:o,timeout:2e3,successMessage:Qwe.success,classNames:{button:cG()("CopyLinkButton_button_tXKiT",t),icon:"CopyLinkButton_buttonIcon_DV5fG"}})},aOe.SubscriptionLevel=function(e){var t=e.className,n=(0,Gt.useContext)(jwe);return Gt.createElement(Kwe,{title:oOe.subscriptionLevel,value:n.level.name,className:t})},aOe.ActivationsCount=function(e){var t=e.className,n=(0,Gt.useContext)(jwe);return Gt.createElement(Kwe,{title:qwe.activations,value:"".concat(n.count.activation," / ").concat(n.count.maxActivation||"∞"),className:t})},aOe.StartTime=function(e){var t=e.className,n=(0,Gt.useContext)(jwe);return Gt.createElement(Kwe,{title:tOe.startTime,value:go(n.startTime,"dd/MM/yy/HH/mm"),className:t})},aOe.EndTime=function(e){var t=e.className,n=(0,Gt.useContext)(jwe);return Gt.createElement(Kwe,{title:Jwe.endTime,value:n.endTime?go(n.endTime,"dd/MM/yy/HH/mm"):Jwe.unlimitedTime,className:t})},aOe.Status=function(e){var t=e.className,n=(0,Gt.useContext)(jwe),r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),o=r[0],a=r[1];return $G((function(e){!e&&n.isFinished&&a(!0)}),[n.isFinished]),Gt.createElement(Kwe,{title:rOe.status,value:Gt.createElement("div",{className:cG()(nOe.statusText,n.isFinished&&nOe.finished)},Gt.createElement("div",{className:cG()(nOe.highlight,o&&nOe.active),onClick:function(){return a(!0)}}),Gt.createElement("div",{className:nOe.widthBlock},Gt.createElement("div",{className:nOe.hidden},rOe.finished),Gt.createElement("div",{className:nOe.hidden},rOe.active)),Gt.createElement("span",{className:nOe.visible},n.isFinished?rOe.finished:rOe.active)),className:cG()(t,nOe.status)})};const iOe={root:"PromoList_root_wi4SU",item:"PromoList_item_AB5Ax",top:"PromoList_top_tdMCR",topRight:"PromoList_topRight_hivON",bottom:"PromoList_bottom_hldcS",bottomRight:"PromoList_bottomRight_Cfotd",endTime:"PromoList_endTime_tUNUA",fadeIn:"PromoList_fadeIn_bA8MY"};var lOe=function(e){var t=e.promotions,n=e.onCreatePromoClick,r=e.isFilterApplied,o=e.onResetFilterClick;return Gt.createElement("div",{className:iOe.root},0===(null==t?void 0:t.length)?Gt.createElement(Twe,{onCreatePromoClick:n,isFilterApplied:r,onResetFilterClick:o}):null==t?void 0:t.map((function(e){return Gt.createElement(aOe,{promotion:e,key:e.id},Gt.createElement("article",{className:iOe.item},Gt.createElement("div",{className:iOe.top},Gt.createElement(aOe.PromoType,{className:iOe.promoItem}),Gt.createElement("div",{className:iOe.topRight},Gt.createElement(aOe.AccessSubscribers,null),Da(e)&&Gt.createElement(aOe.CopyLinkButton,null),!e.isFinished&&Gt.createElement(aOe.FinishPromoButton,null))),Gt.createElement("div",{className:iOe.bottom},Gt.createElement("div",{className:iOe.bottomLeft},Gt.createElement(aOe.SubscriptionLevel,null)),Gt.createElement("div",{className:iOe.bottomRight},Gt.createElement(aOe.ActivationsCount,null),Gt.createElement(aOe.StartTime,null),Gt.createElement(aOe.EndTime,{className:iOe.endTime}),Gt.createElement(aOe.Status,null)))))})))};const sOe={root:"BlogPromo_root_pFiTm",listWrapper:"BlogPromo_listWrapper_f3nKl",spinner:"BlogPromo_spinner_nhnX6",title:"BlogPromo_title_K7vkc",panel:"BlogPromo_panel_qzASs",filterItem:"BlogPromo_filterItem_Dubjy",addButton:"BlogPromo_addButton_CD9jA",paginationWrapper:"BlogPromo_paginationWrapper_Ml0Ub",banner:"BlogPromo_banner_v6tdg",fadeIn:"BlogPromo_fadeIn_kUn3Q"};var cOe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.BlogPromo.desktop"),uOe=function(){var e=Gf().blogUrl,t=Mf(),n=iB({blogUrl:e,showFree:!1}).subscriptionLevels,r=(0,Vt.v9)(Hw),o=(0,Vt.I0)();!function(){var e=Gf().blogUrl,t=Mf(),n=(0,Vt.I0)(),r=(0,Vt.v9)(Hw),o=(0,Vt.v9)(XO),a=bk(e).canView;(0,Gt.useEffect)((function(){if(r||n(Nm({blogUrl:e})),r&&!a){var i=null==o?void 0:o.blogUrl;(null==o?void 0:o.isBlogger)&&i?t((0,Yt.getParametrizedUrl)(ir.BLOG_PROMO,{blogUrl:i})):t((0,Yt.getParametrizedUrl)(ir.MAIN))}}),[r,o])}();var a=function(e){var t=e.blogUrl,n=e.autoFetch,r=void 0===n||n,o=(0,Vt.v9)(lP),a=(0,Vt.I0)(),i=(0,Vt.v9)(aP),l=(0,Vt.v9)(iP),s=(0,Vt.v9)(sP);(0,Gt.useEffect)((function(){r&&a(rS.action({blogUrl:t,filter:o}))}),[o,r,t]);var c=function(){a(lS(rwe(rwe({},Ba),{sortBy:o.sortBy,offset:0})))};(0,Gt.useEffect)((function(){return function(){return c()}}),[]);var u=function(e){var t,n,r=Object.entries(e);try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=o.next();!a.done;a=o.next()){var i=a.value,l=i[0],s=i[1];if(!nwe.includes(l)&&(Array.isArray(s)&&s.length>0||Boolean(s)))return!0}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!1}(o);return{currentFilter:o,isPromoListFilterApplied:u,totalCount:null==l?void 0:l.total,promotionsList:i,promotionsListNetworkStatus:s,updateFilter:function(e){a(lS(rwe(rwe(rwe({},o),e),{offset:0})))},updatePage:function(e){a(lS(rwe(rwe({},o),{offset:o.limit*e})))},resetFilter:c}}({blogUrl:e}),i=a.updateFilter,l=a.resetFilter,s=a.currentFilter,c=a.isPromoListFilterApplied,u=a.totalCount,d=a.updatePage,f=a.promotionsList,m=a.promotionsListNetworkStatus,p=(0,Gt.useCallback)((function(){t((0,Yt.getParametrizedUrl)(ir.BLOG_PROMO_NEW,{blogUrl:e}))}),[e]);return(0,Gt.useEffect)((function(){(null==r?void 0:r.blogUrl)!==e&&o(Nm({blogUrl:e}))}),[]),Gt.createElement("div",{className:sOe.root},Gt.createElement("h2",{className:sOe.title},cOe.title),Gt.createElement(bwe,{className:sOe.banner}),Gt.createElement("div",{className:sOe.container},Gt.createElement("div",{className:sOe.panel},Gt.createElement(twe,{classNames:{select:sOe.filterItem},selectedPromotionTypes:s.promotionTypes,selectedSortBy:s.sortBy,selectedSubscriptionLevelIds:s.levelIds,onChange:i,subscriptionLevels:n}),Gt.createElement(QCe,{onClick:p,classNames:{button:sOe.addButton},iconGlyph:pk.zNh,size:"large"},cOe.createPromo)),Gt.createElement("div",{className:sOe.listWrapper},m.isFetching?Gt.createElement("div",{className:sOe.spinner},Gt.createElement(uM,null)):Gt.createElement(lOe,{promotions:f,onCreatePromoClick:p,isFilterApplied:c,onResetFilterClick:l})),u>5&&Gt.createElement("div",{className:sOe.paginationWrapper},Gt.createElement(EM,{onPageChange:d,forcePage:Math.floor((s.offset||0)/s.limit),pageCount:Math.ceil(u/s.limit),className:sOe.pagination,ragesPagesLimit:2}))))};uOe.fetchActions=function(e){var t=e.params.blogUrl;return[function(){return qp.action({blogUrl:t,showDeleted:!0})},function(){return rS.action({blogUrl:t,filter:Ba})},function(){return Nm.action({blogUrl:t})}]};var dOe=(0,Qr.getTranslation)("@boosty/common/containers.TrialActivation.common.TrialError"),fOe=function(e){var t=e.onClose;return Gt.createElement("div",{className:"TrialError_root_XFwkg"},Gt.createElement("div",{className:"TrialError_iconContainer_hYuQi"},Gt.createElement(pB,{glyph:hB.FJo,className:"TrialError_icon_r4xoq"})),Gt.createElement("div",{className:"TrialError_title_IRkPX"},dOe.title),Gt.createElement("div",{className:"TrialError_text_Y5TeO"},dOe.text),Gt.createElement(FB,{onClick:function(){t()},className:"TrialError_button_sDqeT"},dOe.close))},mOe=(0,Qr.getTranslation)("@boosty/common/containers.TrialActivation.common.TrialActivationView"),pOe=function(e){var t,n=e.promoId,o=e.levelId,a=e.blogUrl,i=e.postId,l=e.mediaType,s=e.onClose,c=e.onSuccess,u=e.onTrialStartClick,d=xf(),f=(0,Do.parse)(d.search),m=null==f?void 0:f.linkId,h=d.state||{},v=function(e){var t=e.blogUrl,n=e.levelId,r=e.promoId,o=e.linkId,a=(0,Vt.I0)(),i=(0,Vt.v9)(Hw),l=(0,Vt.v9)(Ww),s=(0,Vt.v9)(NL),c=(0,Vt.v9)(_L),u=(0,Vt.v9)(hL),d=xa(c,n),f=(0,Vt.v9)(EA),m=(0,Vt.v9)(pL),p=(0,Vt.v9)(cP),h=(0,Vt.v9)(uP),v=(0,Vt.v9)(uA),g=(0,Vt.v9)(fA),y=!l.isFetched||!s.isFetched||!g.isFetched||o&&!h.isFetched&&!h.error;(0,Gt.useEffect)((function(){l.isFetched&&i.blogUrl===t||a((0,dm.Ax)(Nm.action)({blogUrl:t})),s.isFetched&&t===u||a((0,dm.Ax)(qp.action)({blogUrl:t})),g.isFetched&&v.length||a((0,dm.Ax)($v.action)({withDeleted:!0,currency:f})),o&&!h.isFetched&&_()}),[]);var _=function(){a((0,dm.Ax)(oS.action)({blogUrl:t,linkId:o}))},E=(0,Gt.useMemo)((function(){return o?p:null==d?void 0:d.promos.find((function(e){return e.id===r&&ka(e)}))}),[d,r,o,p]);return{isLoading:y,level:d,promo:E,blog:i,currency:f,currentSubscriptionLevel:m,activateTrial:function(){return void 0,void 0,o=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,a((0,dm.Ax)(tS.action)({blogUrl:t,levelId:n,promoId:String(r)}))];case 1:return e.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function r(e){try{i(o.next(e))}catch(e){n(e)}}function a(e){try{i(o.throw(e))}catch(e){n(e)}}function i(n){var o;n.done?t(n.value):(o=n.value,o instanceof e?o:new e((function(e){e(o)}))).then(r,a)}i((o=o.apply(undefined,[])).next())}));var e,o}}}({blogUrl:a,levelId:o,promoId:n,linkId:m}),y=v.isLoading,_=v.level,E=v.promo,b=v.blog,S=v.currency,T=v.currentSubscriptionLevel,I=v.activateTrial,N=jG().showAlert,C=(0,Vt.v9)(uA),w=Mf(),O=Uf(ga(),d.pathname)[0],A=null==b?void 0:b.isOwner,P=Qo(r.TRIAL_BIND_CARD),L=function(){return void 0,void 0,t=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,I()];case 1:return e.sent(),c(),N({type:p.SUCCESS,text:mOe.success}),[3,3];case 2:return e.sent(),N({type:p.ERROR,text:mOe.error}),[3,3];case 3:return[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t};return(0,Gt.useEffect)((function(){h&&h.isActivate&&P&&L()}),[]),y||h.isActivate?Gt.createElement(ZY,null):!E||E.isFinished?Gt.createElement(fOe,{onClose:s}):Gt.createElement("div",{className:"TrialActivationView_root_XDyOP"},Gt.createElement(Q2,{avatarUrl:b.owner.avatarUrl,title:mOe.trial,description:b.owner.name,avatarSize:g.SM_OVERSIZE,className:cG()("TrialActivationView_header_xTBZd",(t={},t.TrialActivationView_ownerHeader_WNG7r=A,t))}),A&&Gt.createElement("div",{className:"TrialActivationView_ownerWarning_RYcFz"},mOe.ownerWarning),Gt.createElement(X2,{level:_,isStandalone:!0,classNames:{root:"TrialActivationView_card_x6QMa",title:"TrialActivationView_cardTitle_qFpu_"},titleComponent:Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"TrialActivationView_subscriptionName_wEtse"},_.name),(null==E?void 0:E.description)&&Gt.createElement("div",{className:"TrialActivationView_promoDescription_xYPrB"},Gt.createElement(PB,{img:b.owner.avatarUrl,size:g.XS_PLUS,className:"TrialActivationView_promoAvatar_uNRjF"}),E.description))}),Gt.createElement("div",{className:"TrialActivationView_duration_aX5IA"},(0,Qr.getParametrizedText)(qr(mOe.duration,E.trial.days),{days:E.trial.days})),Gt.createElement(FB,{className:"TrialActivationView_button_cAdrz",disabled:A,onClick:function(){var e,t;u(),P&&!C.length?w((e=O.route.path,t={blogUrl:a,levelId:o,promoId:n,postId:i,mediaType:l},e===ir.BLOG_POST_TRIAL_ACTIVATION?(0,Yt.getParametrizedUrl)(ir.BLOG_POST_TRIAL_ACTIVATION_BIND_CARD,t,f):e===ir.BLOG_MEDIA_TRIAL_ACTIVATION?(0,Yt.getParametrizedUrl)(ir.BLOG_MEDIA_TRIAL_ACTIVATION_BIND_CARD,t,f):e===ir.FEED_TRIAL_ACTIVATION?(0,Yt.getParametrizedUrl)(ir.FEED_TRIAL_ACTIVATION_BIND_CARD,t,f):(0,Yt.getParametrizedUrl)(ir.BLOG_TRIAL_ACTIVATION_BIND_CARD,t,f)),{state:h}):L()}},mOe.startTrial),T&&Gt.createElement("div",{className:"TrialActivationView_warning_P9nPN"},Gt.createElement(pB,{glyph:hB.Gc9,className:"TrialActivationView_warningIcon_NMqzl"}),(0,Qr.getParametrizedText)(mOe.warning,{subscriptionName:T.name})),Gt.createElement("div",{className:"TrialActivationView_subText_fOQi6"},(0,Qr.getReactText)((0,Qr.getParametrizedText)(mOe.subText,{price:Vr({amount:_.currencyPrices[S],currency:S,useGrouping:!0})}),{Br:function(){return Gt.createElement("br",null)}})))},hOe=function(){var e=function(){var e=Gf(),t=e.blogUrl,n=e.promoId,r=e.levelId,o=e.mediaType,a=e.postId,i=(0,Vt.v9)(Xw),l=(0,Vt.v9)(XO),s=(0,Vt.v9)(sA),c=(0,Vt.v9)(_L),u=Mf(),d=xf(),f=d.search,m=d.pathname,p=d.state,h=(0,Do.parse)(f).linkId,v=xa(c,Number(r)),g=(0,Vt.v9)(cP),y=(0,Vt.v9)(uP),_=(0,Gt.useMemo)((function(){return h?g:null==v?void 0:v.promos.find((function(e){return e.id===Number(n)&&ka(e)}))}),[v,n,h,g]),E=h?bt.TRIAL_PRIVATE:bt.TRIAL,b=cm(m),S=b.isFeedPage,T=b.isPostPage,I=b.isMediaPage,N=function(){I?u((0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:t,mediaType:o})):T?u((0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:t,postId:a}),{state:{isFromFeed:null==p?void 0:p.isFromFeed}}):u(S?ir.MAIN:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:t}))},C=function(e){bd.log.trial.sendTrialAction({ownerId:i,statType:e,subscriptionLevelId:r,promoId:n,promoType:E,promotionIsEnded:!_||(null==_?void 0:_.isFinished)?"1":"0"})};return(0,Gt.useEffect)((function(){if(i){var e=E===bt.TRIAL_PRIVATE&&y.isFetched,t=E===bt.TRIAL;l&&i&&(e||t)&&C(We.TRIAL_ACTION_SHOW)}}),[i,E]),{blogUrl:t,promoId:n,levelId:r,mediaType:o,postId:a,currentUser:l,currentUserNetworkStatus:s,closePopup:N,onClose:function(){C(We.TRIAL_ACTION_CLOSE),N()},onSuccess:function(){N()},onTrialStartClick:function(){C(We.TRIAL_ACTION_START_CLICK)}}}(),t=e.blogUrl,n=e.promoId,r=e.levelId,o=e.mediaType,a=e.postId,i=e.currentUser,l=e.currentUserNetworkStatus,s=e.closePopup,c=e.onClose,u=e.onSuccess,d=e.onTrialStartClick;return Gt.createElement(R3,{currentUser:i,currentUserNetworkStatus:l,onCloseLogin:s},Gt.createElement(PM,{classNames:{title:"TrialActivation_title_IgOoE"},onClose:c},Gt.createElement(pOe,{promoId:Number(n),blogUrl:t,levelId:Number(r),mediaType:o,postId:a,onClose:s,onSuccess:u,onTrialStartClick:d})))};hOe.fetchActions=function(e){var t=e.params.blogUrl;return[function(){return Nm.action({blogUrl:t})},function(){return qp.action({blogUrl:t})}]};var vOe=[{value:"val1",label:"label1",id:1},{value:"val2",label:"label2",id:2},{value:"val3",label:"label3",id:3},{value:"val4",label:"label4",id:4},{value:"val5",label:"label6",id:5},{value:"val6",label:"label6",id:6}],gOe=function(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),t=e[0],n=e[1];return Gt.createElement(lF,{options:vOe,selected:t,placeholder:"Choose one",onSelect:function(e){n(e)},isMulti:!0})},yOe=[{value:"val1",label:"label1",id:1},{value:"val2",label:"label2",id:2}],_Oe=function(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),t=e[0],n=e[1];return Gt.createElement(lF,{options:yOe,selected:t,placeholder:"Choose one",onSelect:function(e){n(e)}})};const EOe="UiKit_row_tl7AW",bOe="UiKit_selectContainer_kVhOo",SOe="UiKit_title_cfypY";var TOe=function(){var e=fk(),t=e.theme,n=e.toggleTheme,r=t===Ke.DARK;return Gt.createElement(SF,{label:"Dark theme",checked:r,classNames:{label:"UiKit_themeSwitchLabel_uS3xe"},onToggle:n})},IOe=function(e){var t=e.blog,n=e.onAuthorClick,r=t.owner,o=r.avatarUrl,a=r.name,i=t.blogUrl,l=t.title;return Gt.createElement(qB,{className:"BlogAuthorCard_root_As1gj"},Gt.createElement(PB,{size:g.S_OVERSIZE,className:"BlogAuthorCard_avatar_KHrOl",img:o}),Gt.createElement("div",null,Gt.createElement(jt.rU,{className:"BlogAuthorCard_name_jZ0Zw",to:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:i}),onClick:n},a),Gt.createElement("div",{className:"BlogAuthorCard_description_WFzqt"},l)))};const NOe={levelCard:"StepStart_levelCard_KPzeS",container:"StepStart_container_N2vJx",title:"StepStart_title_wKgWQ",fromUser:"StepStart_fromUser_m4WWO",fromUserName:"StepStart_fromUserName_byiwA",fromUserAvatar:"StepStart_fromUserAvatar_Ydz64",description:"StepStart_description_ic8R0",buttons:"StepStart_buttons_e7C81",buttonsHasCardBinds:"StepStart_buttonsHasCardBinds_y_8bJ",button:"StepStart_button_Yr5ih",cancelButton:"StepStart_cancelButton_LMiG2",footer:"StepStart_footer_QGeF3",fadeIn:"StepStart_fadeIn_Abqzx"};var COe,wOe,OOe=(0,Qr.getTranslation)("@boosty/common/containers.Gifts.GiftsAccept.components.StepStart"),AOe=function(e){var t,n=e.gift,r=e.hasCardBinds,o=e.description,a=e.onAcceptGiftClick,i=e.onClose,l=e.onBindCardClick,s=n.isAnonymous,c=n.donator,u=PD({id:n.key,type:Ce.GIFT}).sendPaymentStat;return Gt.createElement(Gt.Fragment,null,!s&&Gt.createElement("div",{className:NOe.container},Gt.createElement("div",{className:NOe.title},OOe.fromUser),Gt.createElement("div",{className:NOe.fromUser},Gt.createElement(PB,{className:NOe.fromUserAvatar,img:c.avatarUrl}),Gt.createElement("div",{className:NOe.fromUserName},c.name))),Gt.createElement("div",{className:NOe.container},Gt.createElement("div",{className:NOe.title},OOe.authorCardTitle),Gt.createElement(IOe,{blog:n.blog,onAuthorClick:function(){u(We.ACCEPT_GIFT_BLOGGER_CLICK)}})),Gt.createElement("div",{className:NOe.container},Gt.createElement("div",{className:NOe.title},OOe.subscriptionLevelTitle),Gt.createElement(X2,{classNames:{board:NOe.levelCard},level:n.level,isStandalone:!0,isStandaloneExtended:!0,isFirstMonthFree:!0,hideFooter:!0,onDescriptionOpen:function(){u(We.ACCEPT_GIFT_SHOW_DESCRIPTION)}})),Gt.createElement("div",{className:NOe.description},o),Gt.createElement("div",{className:cG()(NOe.buttons,(t={},t[NOe.buttonsHasCardBinds]=r,t))},Gt.createElement(FB,{className:cG()(NOe.primary,NOe.button),onClick:r?a:l},OOe.button[r?"accept":"bindCard"]),!r&&Gt.createElement(HB,{className:NOe.button,onClick:a},OOe.button.acceptNoBind),Gt.createElement("div",{className:NOe.cancelButton},Gt.createElement(VB,{className:NOe.cancelLink,onClick:function(){i(),u(We.ACCEPT_GIFT_REFUSE)}},OOe.button.cancel))))},POe=((COe={})[RW.SUCCESS]="GiftsAccept_giftReceived_rOChH",COe[RW.ERROR_ALREADY_ACCEPTED]="GiftsAccept_giftOpened_c7lXn",COe[RW.ERROR_CANT_BE_ACCEPTED]="GiftsAccept_giftUnavailable_jGZ0O",COe),LOe=function(e){var t=e.step,n=e.gift,r=e.title,o=e.description,a=e.hasCardBinds,i=e.onAcceptGiftClick,l=e.onBindCardClick,s=e.onClose;return Gt.createElement(Gt.Fragment,null,t===RW.LOADING&&Gt.createElement(ZY,null),t===RW.START&&Gt.createElement(AOe,{gift:n,description:o,hasCardBinds:a,onAcceptGiftClick:i,onBindCardClick:l,onClose:s}),[RW.ERROR_ALREADY_ACCEPTED,RW.SUCCESS,RW.ERROR_CANT_BE_ACCEPTED].includes(t)&&Gt.createElement(cK,{classNamePicture:POe[t],title:r,onButtonClick:s},o))},ROe=function(){return ROe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ROe.apply(this,arguments)},kOe=function(){var e=Mf(),t=xf().state,n=Gf(),r=n.blogUrl,o=n.mediaType,a=n.postId;return Gt.createElement(A5,{onClose:function(){o?e((0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:r,mediaType:o})):a?e((0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:r,postId:a}),{state:{isFromFeed:null==t?void 0:t.isFromFeed}}):e((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:r}))}})};!function(e){e.ROOT="ROOT",e.TITLE="TITLE",e.DRAFT_OPTION_TEXT="DRAFT_OPTION_TEXT",e.DRAFT_OPTION_DELETE_BUTTON="DRAFT_OPTION_DELETE_BUTTON"}(wOe||(wOe={}));var DOe,UOe=function(){return UOe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},UOe.apply(this,arguments)},BOe=(0,Qr.getTranslation)("@boosty/common/components.BlogPostForm.components.BlogPostDraftSelector"),xOe=oo("BlogPostForm.BlogPostDraftSelector"),MOe=function(e){var t=e.items,n=e.selected,r=e.onDelete,a=e.onSelect,i=function(){return"true"===(0,Yt.getFromLocalStorage)(o.IS_USED_TO_BLOG_POST_DRAFTS)},l=Boolean(t.length),s=l&&!i,c=Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:"BlogPostDraftSelector_iconContainer_XbWrI"},Gt.createElement(pB,{glyph:hB.DvK,className:"BlogPostDraftSelector_icon_jBwH8"}),s&&Gt.createElement("div",{className:"BlogPostDraftSelector_iconDot_MD3F6"})),Gt.createElement("div",UOe({className:"BlogPostDraftSelector_title_sd_0k"},Na(xOe(wOe.TITLE))),l?t.length:BOe.no," ",qr([BOe.drafts1,BOe.drafts2,BOe.drafts5],t.length)));return Gt.createElement("div",UOe({className:"BlogPostDraftSelector_block_xt_9l"},Na(xOe(wOe.ROOT))),Gt.createElement(lF,{isDisabled:!l,isInline:!0,options:t,selected:n,selectionLabel:c,valueProp:"updatedAt",className:"BlogPostDraftSelector_select_J1sSQ",classNames:{mainLabel:"BlogPostDraftSelector_mainLabel_FLy8f",arrow:"BlogPostDraftSelector_arrow_id8Q0",options:"BlogPostDraftSelector_list_ibMD6",option:"BlogPostDraftSelector_option_JSpSd"},onSelect:function(e){i()||(0,Yt.setToLocalStorage)(o.IS_USED_TO_BLOG_POST_DRAFTS,"true"),a(e)},Component:function(e){var t=e.valueObject,n=go(No(t.updatedAt),"dd/MM/yyyy/HH/mm"),o=t.title||"...";return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",UOe({onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),r(t)}},Na(xOe(wOe.DRAFT_OPTION_DELETE_BUTTON))),Gt.createElement(pB,{glyph:hB.GmE,className:"BlogPostDraftSelector_optionIcon_sFf1F"})),Gt.createElement("div",UOe({className:"BlogPostDraftSelector_optionText_pBJoc"},Na(xOe(wOe.DRAFT_OPTION_TEXT))),Gt.createElement("div",{className:"BlogPostDraftSelector_optionDate_W_lqj"},n),"-",Gt.createElement("div",{className:"BlogPostDraftSelector_optionTitle_MObMa"},o)))}}))};!function(e){e.ROOT="ROOT"}(DOe||(DOe={}));var FOe,GOe=function(e){HOe(e.errorText,e.showContextAlert,0),WOe(e.errorCode,e.formType)},HOe=function(e,t,n){void 0===n&&(n=0),setTimeout((function(){t({type:p.ERROR,text:e,timeout:5e3+n})}),n)},WOe=function(e,t){bd.log.postFormErrors.submit({errorCode:e,formType:t})};!function(e){e.ROOT="ROOT",e.BACK_BUTTON="BACK_BUTTON"}(FOe||(FOe={}));var VOe=function(){return VOe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},VOe.apply(this,arguments)},jOe=(0,Qr.getTranslation)("@boosty/common/containers.BlogPost.BlogPostChange.desktop"),zOe=oo("BlogPost.BlogPostChange"),YOe=function(e){var t=e.title,n=e.blogPostDraftSelector,r=e.children,o=e.onBackClick;return Gt.createElement("div",VOe({className:"BlogPostChange_root_Wt_s5"},Na(zOe(FOe.ROOT))),Gt.createElement("div",VOe({className:"BlogPostChange_link_yHe80",onClick:function(){o()}},Na(zOe(FOe.BACK_BUTTON))),Gt.createElement(pB,{glyph:hB.WTy,className:"BlogPostChange_icon_mLmI9"}),jOe.back),Gt.createElement("div",{className:"BlogPostChange_titleContainer_PzSS8"},Gt.createElement("h1",{className:"BlogPostChange_title_Lrbdw"},t),n),r)};const KOe="AccessDeferred_toggleSwitchLabelText_EzLO7",qOe="AccessDeferred_toggleSwitchLabel_rlWLN";var XOe,QOe=(0,Qr.getTranslation)("@boosty/common/components.BlogPostForm.components.AccessDeferred"),JOe=function(e){var t=e.containerClassName,n=e.accessLevel,r=e.commentsMode,o=e.isSubscriptionLevelsEnable,a=e.isPriceEnabled,i=e.subscriptionLevelsError,l=e.priceFormatted,s=e.priceError,c=e.onSubscriptionLevelChange,u=e.onPriceChange,d=e.subscriptionLevels,f=e.onDeferredAccessLevelChange,m=e.DateSelector,p=e.isDeferredAccessEnable,h=e.subscriptionLevel,v=e.onCommentsModeChange,g=e.onDeferredAccessChange,y=(0,Vt.v9)(EA),_=nr().currencies.default,E=r===Nt.DENY,b=null==s;return Gt.createElement("div",{className:cG()("AccessDeferred_access_A6dlq",t)},Gt.createElement("div",{className:"AccessDeferred_header_Llqdb"},Gt.createElement("div",{className:"AccessDeferred_title_lcFnq"},Gt.createElement("span",{className:"AccessDeferred_titleText_gppBk"},QOe.title),Gt.createElement(SF,{classNames:{labelText:KOe,label:qOe},size:dF.MIDDLE,onToggle:function(e){g(e)},checked:p})),Gt.createElement("div",{className:"AccessDeferred_description_P5d8z"},QOe.description)),p&&Gt.createElement("div",{className:"AccessDeferred_accessBody_irUAT"},Gt.createElement("div",{className:"AccessDeferred_dateSelector__ArJL"},Gt.createElement("div",{className:"AccessDeferred_dateSelectorLabel_pQvum"},QOe.dateSelectorLabel),m),Gt.createElement(nme,{accessLevel:n,onAccessLevelChange:f,className:"AccessDeferred_accessLevels_HX_mh",name:"deferredAccess",withTitle:!0}),o&&Gt.createElement(lme,{currency:y,isPriceEnabled:a,subscriptionLevels:d,subscriptionLevel:h,subscriptionLevelsError:i,classNames:{label:"AccessDeferred_levelsLabel_lwn9M"},onSubscriptionLevelChange:c}),a&&Gt.createElement("div",{className:"AccessDeferred_price_Unlo9"},Gt.createElement(Zx,{value:l,mask:Nf(),label:(0,Qr.getParametrizedText)(QOe.price.label,{currency:jr(_)}),error:s,isValid:b,placeholder:QOe.price.placeholder,onChange:u})),Gt.createElement(SF,{label:QOe.comments.deny,classNames:{labelText:cG()(KOe,"AccessDeferred_commentsToggleLabelText_TmjUC"),label:qOe},size:dF.MIDDLE,onToggle:function(e){var t=e?Nt.DENY:Nt.ALLOW;v(t)},checked:E})))},ZOe=(0,Qr.getTranslation)("@boosty/common/components.BlogPostForm.components.Tags.components.Field"),$Oe=function(e){var t,n=e.className,r=e.innerRef,o=e.isDisabled,a=e.theMostSuggestedSearch,i=e.theMostSuggestedTag,l=e.tagLengthLimit,s=e.tagsCountLimit,c=e.onSuggestedFocus,u=e.onSubmit,d=e.onChange,f=e.onFocus,m=Boolean(a)&&(null==i?void 0:i.title.startsWith(a));return Gt.createElement("div",{className:cG()("Field_root_pIcXW",n)},Gt.createElement(Zx,{className:"Field_input_sedvE",classNameInput:"Field_inputField_vXbLS",disabled:o,innerRef:r,limit:l,value:a,placeholder:(0,Qr.getParametrizedText)(o?ZOe.onDisabled:ZOe.onAvailable,{limit:s}),onFocus:f,onChange:function(e){var t=e.target.value.toLowerCase().replace(/,/g,"");d(t)},onKeyDown:function(e){var t;a&&(e.key===ae.ARROW_DOWN&&c(),e.key===ae.ENTER&&(t=a.trim())&&u({title:t}))},dataAttributes:{enterKeyHint:"done"}}),Gt.createElement(Zx,{className:cG()("Field_inputGhost_ZbY6N",(t={},t.Field_inputGhostVisible_xVUBW=m,t)),value:(null==i?void 0:i.title)||null}))},eAe=function(e){return Gt.createElement("div",{className:cG()("List_root_FIpb9",e.className)},e.tags.map((function(t,n){return Gt.createElement(xse,{key:n,tag:t,isDeletable:!0,onClick:e.onItemClick})})))},tAe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},nAe=function(e){var t=e.className,n=e.blogTags,r=e.postTags,o=e.innerRef,a=function(e){var t=e.blogTags,n=e.postTags,r=e.theMostSuggestedTagSearch,o=e.onUpLimitReached,a=e.onSuggestedTagClick,i=e.onTheMostSuggestedTagFind,l=tAe((0,Gt.useState)(0),2),s=l[0],c=l[1],u=tAe((0,Gt.useState)(!1),2),d=u[0],f=u[1],m=tAe((0,Gt.useState)([]),2),p=m[0],h=m[1],v=tAe((0,Gt.useState)(null),2),g=v[0],y=v[1],_=(0,Gt.useRef)(null),E=(0,Gt.useRef)(null);return(0,Gt.useEffect)((function(){i(g)}),[null==g?void 0:g.title]),(0,Gt.useEffect)((function(){if(!r)return y(null),void h([]);var e=function(e,t){return e.filter((function(e){return e.title.toLowerCase().includes(t)}))}(t,r);if(n.length){var o=n.map((function(e){return e.title}));e=e.filter((function(e){return-1===o.indexOf(e.title)}))}y(e[0]||null),h(function(e,t){return function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],tAe(e),!1).sort((function(e,n){return e.title.indexOf(t)-n.title.indexOf(t)}))}(e,r))}),[r]),{cursor:s,suggestedTags:p,activeItem:E,scrollContainer:_,isFocus:d,onBlur:function(){f(!1)},onFocus:function(){f(!0)},onKeyDown:function(e){e.preventDefault(),e.key===ae.ENTER&&(a(p[s]),c(0),f(!1)),e.key===ae.ARROW_UP&&(s<=0&&o?o():(c(s-1),_.current.scrollTop=E.current.offsetTop-40)),e.key===ae.ARROW_DOWN&&s<p.length-1&&(c(s+1),_.current.scrollTop=E.current.offsetTop)},onTagClick:function(e,t){a(t),c(0),f(!1)}}}({blogTags:n,postTags:r,theMostSuggestedTagSearch:e.theMostSuggestedTagSearch,onUpLimitReached:e.onUpLimitReached,onSuggestedTagClick:e.onSuggestedTagClick,onTheMostSuggestedTagFind:e.onTheMostSuggestedTagFind}),i=a.scrollContainer,l=a.activeItem,s=a.suggestedTags,c=a.cursor,u=a.isFocus,d=a.onBlur,f=a.onFocus,m=a.onTagClick,p=a.onKeyDown;return(null==s?void 0:s.length)?Gt.createElement("div",{className:"Suggested_root_UJ0Mr",ref:o,tabIndex:0,onBlur:d,onFocus:f,onKeyDown:p},Gt.createElement(UM,{innerRef:i,className:cG()("Suggested_scrollContainer__DT7P",t)},s.map((function(e,t){var n;return Gt.createElement("div",{ref:c===t?l:null,key:e.id,className:cG()("Suggested_item_Im3zw",(n={},n.Suggested_itemActive_OFM9S=c===t&&u,n)),onClick:function(t){return m(t,e)}},e.title)})))):null},rAe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},oAe=(0,Qr.getTranslation)("@boosty/common/components.BlogPostForm.components.Tags"),aAe=function(e){var t=e.className,n=e.blogTags,r=e.tags,o=function(e){var t=e.tags,n=nr().publisher.tags,r=n.maxCount,o=n.maxLength,a=(0,Gt.useRef)(null),i=(0,Gt.useRef)(null),l=rAe((0,Gt.useState)(null),2),s=l[0],c=l[1],u=rAe((0,Gt.useState)(null),2),d=u[0],f=u[1],m=rAe((0,Gt.useState)(!1),2),p=m[0],h=m[1],v=function(e){window.setTimeout((function(){return e.focus({preventScroll:!0})}),0)},g=function(t){e.onTagAdd(t),c(null)},y=function(){v(a.current)};return{maxTagsCount:r,maxTagsLength:o,tagsField:a,tagsSuggested:i,theMostSuggestedTagSearch:s,theMostSuggestedTag:d,isSuggestedActive:p,onTagDelete:function(t){e.onTagDelete(t)},onTagsFieldSubmit:function(e){t.some((function(t){return t.title===e.title}))||g(e)},onSuggestedTagClick:function(e){g(e),y()},onTheMostSuggestedTagSet:function(e){f(e)},onTagSuggestedFocus:function(){i.current&&v(i.current)},onSuggestedTagSearchSet:function(e){c(e)},onSuggestedClose:function(e){a.current.contains(e.target)||h(!1)},onTagsFieldFocus:y,onSuggestedActive:function(){h(!0)}}}({tags:r,onTagAdd:e.onTagAdd,onTagDelete:e.onTagDelete}),a=o.maxTagsCount,i=o.maxTagsLength,l=o.tagsField,s=o.tagsSuggested,c=o.theMostSuggestedTagSearch,u=o.theMostSuggestedTag,d=o.isSuggestedActive,f=o.onTagsFieldSubmit,m=o.onTheMostSuggestedTagSet,p=o.onSuggestedTagClick,h=o.onTagSuggestedFocus,v=o.onTagsFieldFocus,g=o.onSuggestedClose,y=o.onSuggestedTagSearchSet,_=o.onSuggestedActive,E=o.onTagDelete;return Gt.createElement("div",{className:cG()("Tags_wrapper_Ai0uD",t)},Gt.createElement("div",{className:"Tags_title_Odhax"},oAe.title),Gt.createElement("div",{className:"Tags_body_lhHpH"},Gt.createElement($Oe,{innerRef:l,isDisabled:r.length>=a,tagLengthLimit:i,tagsCountLimit:a,theMostSuggestedTag:u,theMostSuggestedSearch:c,onFocus:_,onChange:y,onSubmit:f,onSuggestedFocus:h}),d&&Gt.createElement("div",{className:"Tags_suggestedTags_XCvAZ"},Gt.createElement(Dx,{trigger:gx.CLICK,onClickOutside:g},Gt.createElement(nAe,{innerRef:s,blogTags:n,postTags:r,theMostSuggestedTagSearch:c,onTheMostSuggestedTagFind:m,onSuggestedTagClick:p,onUpLimitReached:v}))),Boolean(null==r?void 0:r.length)&&Gt.createElement(eAe,{className:"Tags_tags_jjfG7",tags:r,onItemClick:E})))};!function(e){e.ROOT="ROOT",e.TEASER_INPUT="TEASER_INPUT"}(XOe||(XOe={}));var iAe,lAe=function(){return lAe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lAe.apply(this,arguments)},sAe=(0,Qr.getTranslation)("@boosty/common/components.BlogPostForm.components.Teaser"),cAe=oo("Teaser"),uAe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.teaserPhotoFieldProps,o=r.teaserImage,a=r.isLoading,i=r.isDisabled,l=r.setTeaserImageUploadId,s=r.uploadImage,c=r.onReset,u=r.onUpload,d=e.teaserText,f=e.onTeaserChange,m=nr().publisher.images.limits,p=m.maxSize,h=m.unit,v=(0,Gt.useMemo)((function(){return(0,Qr.getParametrizedText)(sAe.description.photo,{limit:Lo(p,h,Z.MB)})}),[p]);return Gt.createElement("div",lAe({className:cG()("Teaser_teaser_LkDIy",n.root)},Na(cAe(XOe.ROOT))),Gt.createElement("div",{className:"Teaser_title_kl1fM"},sAe.title),Gt.createElement("div",{className:"Teaser_teaserBody_kinPk"},Gt.createElement("div",{className:"Teaser_description_koYXW"},sAe.description.text),Gt.createElement(Ape,{isLoading:a,isDisabled:i,description:v,teaserImage:o,setTeaserImageUploadId:l,uploadImage:s,onReset:c,onUpload:u}),Gt.createElement(RIe,{classNames:{input:"Teaser_input_C1LPF",counterSymbols:"Teaser_inputCounter_BsumV"},placeholder:sAe.placeholder,value:d,onChange:f,maxTextLength:140})))},dAe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},fAe=function(e){var t=e.initialValues,n=e.values,r=e.isValid,o=e.isSubmitting,a=e.onValuesChange,i=void 0===a?Yt.noop:a,l=e.onValidChange,s=void 0===l?Yt.noop:l,c=e.onSubmittingChange,u=void 0===c?Yt.noop:c,d=dAe((0,Gt.useState)(r),2),f=d[0],m=d[1],p=dAe((0,Gt.useState)(o),2),h=p[0],v=p[1],g=dAe((0,Gt.useState)(n),2),y=g[0],_=g[1];return(0,Gt.useEffect)((function(){var e=(0,ii.isEqual)(y,n),a=n===t;f!==r&&(m(r),s(r)),h!==o&&(v(o),u(o)),e||_(n),e||a||i(n)}),[t,n,r,o]),null};!function(e){e.TITLE="title",e.OPTIONS="options",e.IS_MULTIPLE="isMultiple",e.FINISH_TIME="finishTime"}(iAe||(iAe={}));var mAe=(0,Qr.getTranslation)("@boosty/common/components.PollForm.components.AddAnswerButton"),pAe=function(e){var t=e.className,n=e.tabIndex,r=e.onClick;return Gt.createElement("button",{className:cG()("AddAnswerButton_root_KD3hf",t),tabIndex:n,onClick:r,type:"button"},Gt.createElement(pB,{className:"AddAnswerButton_icon_euguW",glyph:hB.zNh}),Gt.createElement("span",{className:"AddAnswerButton_text_KJpT1"},mAe.addAnswer))},hAe=(0,Qr.getTranslation)("@boosty/common/components.PollForm"),vAe=function(){var e,t=uV(),n=t.min,r=t.max;return Sz.Ry().shape(((e={})[iAe.TITLE]=Sz.Z_().required(hAe.fields.title.errors.empty).min(1).max(256),e[iAe.OPTIONS]=Sz.IX().of(Sz.Z_().test("isUnique",hAe.fields.options.errors.isNotUnique,(function(e,t){var n=t.parent;return!(null==e?void 0:e.length)||n.filter((function(t){return t===e})).length<2})).required(hAe.fields.options.errors.empty)).test("isEnoughOptions",(0,Qr.getParametrizedText)(hAe.fields.options.errors.notEnoughOptions,{min:2}),(function(e,t){return e.filter((function(e){return e})).length>=2})).required(),e[iAe.IS_MULTIPLE]=Sz.O7(),e[iAe.FINISH_TIME]=Sz.hT().nullable().min(n,(0,Qr.getParametrizedText)(hAe.fields.finishTime.errors.earlier,{min:go(No(n),"dd/MM/yyyy/HH/mm")})).max(r,(0,Qr.getParametrizedText)(hAe.fields.finishTime.errors.later,{max:go(No(r),"dd/MM/yyyy/HH/mm")})),e))};const gAe={root:"PollForm_root_uEQpj",closeButton:"PollForm_closeButton_xiqBz",closeIcon:"PollForm_closeIcon_f95nr",optionInputRemoveButton:"PollForm_optionInputRemoveButton_vSvjn",withError:"PollForm_withError_RLcd9",titleRow:"PollForm_titleRow_fjsWl",optionInput:"PollForm_optionInput_IrsD6",optionInputFieldShrinked:"PollForm_optionInputFieldShrinked_H1D0R",dateSelectorWrapper:"PollForm_dateSelectorWrapper_gbIxm",optionInputRemoveButtonIcon:"PollForm_optionInputRemoveButtonIcon_imSuc",toggleSwitchLabelText:"PollForm_toggleSwitchLabelText_b5dIE",lastFormRow:"PollForm_lastFormRow_NFWY2",readOnlyWarning:"PollForm_readOnlyWarning_Q0AQC",error:"PollForm_error_ialYL",fadeIn:"PollForm_fadeIn_hdJ3X"};var yAe,_Ae=function(){return _Ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_Ae.apply(this,arguments)},EAe=(0,Qr.getTranslation)("@boosty/common/components.PollForm"),bAe=(0,Gt.forwardRef)((function(e,t){var n=e.classNames,r=void 0===n?{}:n,o=e.isReadOnly,a=e.isLoading,i=e.poll,l=e.formData,s=e.renderDateSelector,c=e.onFormDataChange,u=e.onFormValidStateChange,d=e.onFormSubmittingStateChange,f=e.onClose,m=uV(),p=m.min,h=m.max,v=(0,Gt.useRef)(),g=(0,Gt.useRef)([]),y=function(){v.current.focus(),v.current.scrollIntoView(Zd())},_=function(e){var t,n;null===(t=g.current[e])||void 0===t||t.focus(),null===(n=g.current[e])||void 0===n||n.scrollIntoView(Zd())},E=function(e){return function(t){var n,r=t.shiftKey,o=t.key,a=t.target;if(o===ae.TAB||o===ae.ENTER){var i=a.name,s=void 0,c=void 0;return i===iAe.TITLE?s=i:(s=(n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(i.split("."),2))[0],c=n[1]),t.preventDefault(),r?s!==iAe.TITLE&&(0===Number(c)?y():_(Number(c)-1),!0):Number(c)===l.options.length-1?(e&&e(),!1):(_(s===iAe.TITLE?0:Number(c)+1),!0)}return!0}};return(0,Gt.useEffect)((function(){a||o||l.title||y()}),[a]),o?Gt.createElement("div",{className:cG()(gAe.root,null==r?void 0:r.root)},Gt.createElement("div",{className:gAe.readOnlyWarning},Boolean(null==i?void 0:i.isFinished)?EAe.warning.isFinished:EAe.warning.hasVotes),Gt.createElement(jue,{poll:i,isAuthorized:!0,isCounterVisible:!1,isFinishTimeVisible:!1,isReadOnly:o,isLoading:a})):Gt.createElement("div",{className:cG()(gAe.root,null==r?void 0:r.root)},Gt.createElement("button",{className:gAe.closeButton,type:"button",onClick:f},Gt.createElement(pB,{className:gAe.closeIcon,glyph:hB.WcQ})),a&&Gt.createElement(uM,null),!a&&!o&&Gt.createElement(Gt.Fragment,null,Gt.createElement(Gz.J9,{innerRef:t,initialValues:fV(l),validationSchema:vAe(),onSubmit:Yt.noop},(function(e){var t=e.values,n=e.errors,o=e.touched,a=e.setFieldValue,i=e.setFieldTouched,l=e.handleSubmit,f=function(e,t,n){var r=t.options;if(r){if("string"==typeof(null==n?void 0:n.options))return n.options;if((null==n?void 0:n.options)&&Array.isArray(n.options))for(var o=0;o<r.length;o++){var a=(0,Gz.u9)(t,[iAe.OPTIONS,String(o)]),i=(0,Gz.u9)(n,[iAe.OPTIONS,String(o)]);if(a&&i)return i}}}(0,o,n);return Gt.createElement(Sx,{className:cG()(gAe.form,r.form),onSubmit:l},Gt.createElement(fAe,_Ae({},e,{onValidChange:u,onSubmittingChange:d,onValuesChange:c})),Gt.createElement(Ix,{className:cG()(gAe.titleRow,r.formInner),isSmallIndent:!0},Gt.createElement(Gz.gN,{name:iAe.TITLE},(function(e){var t=e.field,r=t.value,a=t.onChange,i=t.onBlur,l=t.name;return Gt.createElement(Zx,{ref:v,label:EAe.fields.title.label,placeholder:EAe.fields.title.placeholder,name:l,onBlur:i,onChange:a,onKeyDown:E(),value:r,limit:256,isValid:!o.title||o.title&&!n.title,error:o.title&&n.title})}))),Gt.createElement(Ix,{className:r.formInner,isSmallIndent:!0},Gt.createElement(Gt.Fragment,null,Gt.createElement(Gz.F2,{name:iAe.OPTIONS},(function(e){var r=function(t){e.push(""),setTimeout((function(){return _(t+1)}),0)};return Gt.createElement(Gt.Fragment,null,t.options.map((function(a,i){return Gt.createElement(Gz.gN,{name:"".concat(iAe.OPTIONS,".").concat(i),key:i},(function(a){var l,s,c=a.field,u=c.value,d=c.onChange,f=c.onBlur,m=c.name,p=(0,Gz.u9)(n,[iAe.OPTIONS,String(i)]),h=(0,Gz.u9)(o,[iAe.OPTIONS,String(i)]),v=!h||h&&!p;return Gt.createElement(Zx,{ref:function(e){return g.current[i]=e},key:"option.".concat(i),className:gAe.optionInput,classNameInput:cG()((l={},l[gAe.optionInputFieldShrinked]=t.options.length>2,l)),label:0===i&&EAe.fields.options.label,placeholder:EAe.fields.options.placeholder,name:m,value:u,limit:140,isValid:v,onBlur:function(e){var t;"removeOption"!==(null===(t=null==e?void 0:e.relatedTarget)||void 0===t?void 0:t.getAttribute("data-id"))&&f(e)},onChange:d,onKeyDown:E(10!==t.options.length?function(){return r(i)}:null),rightElement:t.options.length>2&&Gt.createElement("button",{"data-id":"removeOption",className:cG()(gAe.optionInputRemoveButton,(s={},s[gAe.withError]=!v,s)),type:"button",onClick:function(){return function(t){e.remove(t),_(t)}(i)},tabIndex:-1},Gt.createElement(pB,{className:gAe.optionInputRemoveButtonIcon,glyph:hB.WcQ}))})}))})),t.options.length<10&&Gt.createElement(pAe,{onClick:function(){return r(t.options.length-1)}}))})),Boolean(f)&&Gt.createElement("span",{className:gAe.error},f))),Gt.createElement(Ix,{className:r.formInner,isSmallIndent:!0},Gt.createElement(Gz.gN,{name:iAe.IS_MULTIPLE},(function(e){var t=e.field,n=t.value,r=t.name;return Gt.createElement(SF,{classNames:{labelText:gAe.toggleSwitchLabelText},size:dF.MIDDLE,isDefaultChecked:n,togglePosition:"left",label:Gt.createElement("div",{className:gAe.toggleLabelText},Gt.createElement("span",{className:cG()(gAe.toggleLabelText,gAe.checkboxLabel)},EAe.fields.isMultiple.label)),onToggle:function(e){i(r),a(r,e)}})}))),Gt.createElement(Ix,{className:cG()(r.formInner,gAe.lastFormRow),isSmallIndent:!0},Gt.createElement(Gz.gN,{name:iAe.FINISH_TIME},(function(e){var t=e.field,r=t.value,o=t.name;return Gt.createElement(Gt.Fragment,null,Gt.createElement(SF,{classNames:{labelText:gAe.toggleSwitchLabelText},size:dF.MIDDLE,checked:Boolean(r),isDefaultChecked:Boolean(r),togglePosition:"left",label:Gt.createElement("div",{className:gAe.toggleLabelText},Gt.createElement("span",{className:cG()(gAe.toggleLabelText,gAe.checkboxLabel)},EAe.fields.finishTime.label)),onToggle:function(e){i(o),a(o,e?uV().defaultMin:null)}}),Boolean(r)&&Gt.createElement("div",{className:gAe.dateSelectorWrapper},s({value:r,min:p,max:h,onChange:function(e){i(o),a(o,e)},onClear:function(){i(o),a(o,null)}})),Boolean(n.finishTime)&&Gt.createElement("span",{className:gAe.error},String(n.finishTime)))}))))}))))}));bAe.displayName="PollForm",function(e){e.ROOT="ROOT",e.PUBLISH_BUTTON="PUBLISH_BUTTON"}(yAe||(yAe={}));var SAe=function(e){return[E.ONLY_PRICE,E.SUBSCRIBERS_AND_PRICE].includes(e)},TAe=function(e,t){return SAe(t)?Number(String(e).replace(/\s/g,"")):0},IAe=function(e){return[E.ONLY_SUBSCRIBERS,E.SUBSCRIBERS_AND_PRICE].includes(e)},NAe=function(e){var t=No(new Date);return!e||e.publishTime>t},CAe=function(e){var t=e.value,n=e.min,r=e.max,o=e.onChange,a=e.onClear;return Gt.createElement(Jfe,{value:t,minDate:n,maxDate:r,onAccept:o,onClear:a})},wAe=function(){return wAe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wAe.apply(this,arguments)},OAe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},AAe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const PAe="BlogPostForm_teaserContainer_iHtMd",LAe="BlogPostForm_accessContainer_WvZHT";var RAe,kAe=function(){return kAe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kAe.apply(this,arguments)},DAe=(0,Qr.getTranslation)("@boosty/common/containers.BlogPost.BlogPostForm.desktop"),UAe=oo("BlogPost.BlogPostForm"),BAe=function(e){var t=e.post,n=e.isBanned,o=e.isAuthorized,a=e.subscriptionLevels,i=e.blogTags,l=e.isSubmitting,s=e.actions,c=e.pollForm,u=e.deferredAccess,d=e.teaserData,f=function(e){var t,n=e.post,o=e.drafts.postDraft,a=e.isBanned,i=e.isAuthorized,l=e.subscriptionLevels,s=e.currentUser,c=e.isOwner,u=e.blogUrl,d=e.minPostPrice,f=e.pollForm,m=e.deferredAccess,p=e.errors,h=e.teaserData,v=e.onDraftSelect,g=e.onDraftSave,y=OAe((0,Gt.useState)(""),2),_=y[0],E=y[1],b=OAe((0,Gt.useState)([]),2),S=b[0],T=b[1],I=OAe((0,Gt.useState)([]),2),N=I[0],C=I[1],w=OAe((0,Gt.useState)([]),2),O=w[0],A=w[1],P=OAe((0,Gt.useState)(null),2),L=P[0],R=P[1],k=OAe((0,Gt.useState)(null),2),D=k[0],U=k[1],B=OAe((0,Gt.useState)(null),2),x=B[0],M=B[1],F=OAe((0,Gt.useState)(null),2),G=F[0],H=F[1],W=OAe((0,Gt.useState)(""),2),V=W[0],j=W[1],z=OAe((0,Gt.useState)(!1),2),Y=z[0],K=z[1],q=OAe((0,Gt.useState)(!1),2),X=q[0],Q=q[1],J=OAe((0,Gt.useState)(!0),2),Z=J[0],$=J[1],ee=OAe((0,Gt.useState)(!1),2),te=ee[0],ne=ee[1],oe=(0,Gt.useRef)(null),ae=(0,Gt.useRef)([]),ie=(0,Gt.useRef)(!1),le=(0,Gt.useRef)(0),se=(0,Gt.useRef)(null),ce=(0,Gt.useRef)(Yt.noop),ue=function(e){var t=(e||N||S).map((function(e){if(e.type===pe.VIDEO_FILE){var t=ae.current.find((function(t){return t.vid===e.vid}));return t?wAe(wAe({},e),{previewId:t.id,preview:t.url}):e}return e})),n=m.isDeferredAccessEnable?{isApplied:!0,price:TAe(m.deferredAccessPriceFormatted,m.deferredAccessLevelType),applyTime:m.deferredAccessPublishTime,subscriptionLevel:IAe(m.deferredAccessLevelType)?m.deferredAccessSubscriptionLevel:null,isCommentsDenied:m.deferredAccessCommentsMode===Nt.DENY}:null,o=Qo(r.PUBLICATION_AFTER_PROCESSING_VIDEO);return{data:t,deferredAccessLevel:n,isCommentsDenied:x===Nt.DENY,price:TAe(V,D),publishTime:G,subscriptionLevel:fe(),tags:O,teaser:Ee(),title:_,isWaitingVideo:!(!Te||!o)&&Z}},de=jG().hideAllAlerts,fe=function(){return IAe(D)?L:null},me=function(e){return e?new Date(vo(e)):null},he=function(e){R(e||(Array.isArray(l)&&l.length>0?l[0]:null))},ve=function(e,t){void 0===e&&(e={}),E(e.title.trim()),T(e.data),R(e.subscriptionLevel),h.setTeaser({image:e.teaser.find((function(e){return e.type===pe.IMAGE&&e.rendition!==re.TEASER_AUTO_BACKGROUND})),text:e.teaser.filter((function(e){return e.type===pe.TEXT}))}),A(e.tags),U(m.getAccessLevel()),M(e.isCommentsDenied?Nt.DENY:Nt.ALLOW),j((0,Yt.getFormattedNumber)(e.price||d)),H(e.publishTime),$(e.isWaitingVideo),f.arePollsEnabled&&(t?(f.onPollFormDataChange(t),f.onPollFormValidStateChange(!0),f.isPollFormVisible||f.onPollFormOpen(),f.isPollFormVisible&&!f.isPollReadOnly&&se.current.setValues(fV(t))):f.isPollFormVisible&&f.onPollFormClose()),he(e.subscriptionLevel)},ge=function(){var e,t;i&&(oe.current=null!==(e=null==o?void 0:o.key)&&void 0!==e?e:function(e,t,n){return{id:t,blogUrl:n,hash:Qa(),userId:e}}(s.id,null!==(t=null==n?void 0:n.id)&&void 0!==t?t:null,c?null:u))},ye=function(e){var t,n,r,o,a;if(void 0===e&&(e={}),null===(t=null==oe?void 0:oe.current)||void 0===t?void 0:t.hash){var i=(null==e?void 0:e.editableData)||ue();if((null===(n=null==i?void 0:i.data)||void 0===n?void 0:n.length)||(null==i?void 0:i.deferredAccessLevel)||(null==i?void 0:i.price)||null!==(null==i?void 0:i.publishTime)||(null===(r=null==i?void 0:i.tags)||void 0===r?void 0:r.length)||(null===(o=null==i?void 0:i.title)||void 0===o?void 0:o.length)||(null===(a=null==i?void 0:i.teaser)||void 0===a?void 0:a.length)||f.isPollFormValid){var l=wAe(wAe(wAe({},i),f.arePollsEnabled&&f.isPollFormVisible?{pollFormData:f.pollFormData}:null),{key:oe.current,updatedAt:Date.now()});g(l)}}};ce.current=ye;var _e=(0,Gt.useRef)((0,uU.Z)((function(e){return ye(e)}),1e3*nr().publisher.drafts.savingTimeout,{leading:!0})),Ee=function(){return h.teaser.image||h.teaser.text?AAe([h.teaser.image],OAe(h.teaser.text),!1).filter((function(e){return e})):null},be=function(){n?(ve(n,(null==n?void 0:n.poll)?dV(n.poll):null),Q(!1),C(n.data)):(he(),C([]),Q(!1),U(m.getAccessLevel()),M(Nt.ALLOW),j((0,Yt.getFormattedNumber)(d))),i&&!a&&m.setDeferredAccessLevelState(),ge(),le.current=0,ie.current=!1},Se=function(e){var t=le.current>0,n=null!=e?e:!t&&!ie.current;Q(!0),K(n)},Te=N.filter((function(e){return e.type===pe.VIDEO_FILE&&e.complete})).length>0;(0,Gt.useEffect)((function(){return be(),function(){ce.current(),oe.current=null,v(null),de()}}),[]),(0,Gt.useEffect)((function(){i&&be()}),[i]),(0,Gt.useEffect)((function(){n&&be()}),[n]),(0,Gt.useEffect)((function(){(null==n?void 0:n.deferredAccessLevel)&&m.setDeferredAccessLevelState()}),[null==n?void 0:n.deferredAccessLevel]),(0,Gt.useEffect)((function(){if(o){var e=o.key,t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(o,["key"]);delete t.deferredAccessLevel,oe.current.hash!==e.hash&&(le.current=0,ie.current=!1,ge(),Pe(),Se(!1),ve(wAe(wAe({},n),t),o.pollFormData),i&&!a&&m.setDeferredAccessLevelState())}}),[o]),(0,Gt.useEffect)((function(){var e,t;l&&(he(n&&n.subscriptionLevel),i&&!a&&((null===(e=null==n?void 0:n.deferredAccessLevel)||void 0===e?void 0:e.applyTime)&&(null===(t=null==n?void 0:n.deferredAccessLevel)||void 0===t?void 0:t.subscriptionLevel)?m.setDeferredAccessSubscriptionLevelState(n&&n.deferredAccessLevel.subscriptionLevel):m.setDeferredAccessSubscriptionLevelState()))}),[l]),(0,Gt.useEffect)((function(){var e=ue();_e.current({editableData:e})}),[_,S,h.teaser,O,G,V,D,x,f.pollFormData,f.isPollFormValid,m]);var Ie=null!==(t=p.getErrorsMap({draftData:N,accessLevel:D,priceFormatted:V,publishTime:G,isValid:Y,isEditorTouched:X,isFileUploadInProgress:te}))&&void 0!==t?t:{},Ne=Ie[mn.PRICE_LOW],Ce=Ie[mn.PRICE_HIGH],we=Ie[mn.DEFERRED_PRICE_LOW],Oe=Ie[mn.DEFERRED_PRICE_HIGH],Ae=Ie[mn.DATE],Pe=function(){E(""),T([]),C([]),R(null),A([]),j(""),$(!0),H(null),j(""),U(null),M(null),K(!1),Q(!1),h.resetTeaserState()};return{pollFormRef:se,errors:{priceErrorLow:Ne,priceErrorHigh:Ce,deferredAccessPriceErrorLow:we,deferredAccessPriceErrorHigh:Oe,dateError:Ae},publishTime:G,draftData:N,accessLevel:D,title:_,data:S,tags:O,isWaitingVideo:Z,commentsMode:x,subscriptionLevel:L,priceFormatted:V,isPostHasVideo:Te,setAccessLevel:U,setCommentsMode:M,setSubscriptionLevel:R,setTitle:E,setPriceFormatted:j,setVideoPreview:function(e,t,n){ae.current.find((function(e){return e.vid===t}))?ae.current=ae.current.map((function(r){return r.vid===t?wAe(wAe({},r),{vid:t,id:e,url:n}):r})):ae.current.push({id:e,vid:t,url:n})},onTagAdd:function(e){A(AAe(AAe([],OAe(O),!1),[e],!1))},onTagDelete:function(e){A(O.filter((function(t){return t.title!==e.title})))},onPublishTimeAccept:function(e){H(No(e))},onPublishTimeClear:function(){H(null)},onToggleAfterProcessingVideo:function(){$(!Z)},getDeferredAccessMinDate:function(){var e=new Date;return!G||G<No(e)?e:me(G)},getPublishTimeDate:me,onSubmit:function(){return n=function(){var t,n,r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return t={denyComments:m.deferredAccessCommentsMode===Nt.DENY,price:TAe(m.deferredAccessPriceFormatted,m.deferredAccessLevelType),applyTime:m.deferredAccessPublishTime,subscriptionLevelId:m.deferredAccessSubscriptionLevelId},p.validate({draftData:N,accessLevel:D,priceFormatted:V,publishTime:G,isValid:Y,isEditorTouched:X,isFileUploadInProgress:te},(function(e){throw new Error(e)})),(n=f.arePollsEnabled&&f.isPollFormVisible)&&!f.isPollReadOnly?[4,se.current.validateForm()]:[3,2];case 1:if(r=a.sent(),Boolean(Object.values(r).length))return[2];a.label=2;case 2:return o=ue(),ye({editableData:o}),delete o.deferredAccessLevel,e.onSubmit(o,m.isDeferredAccessEnable?t:null,n),ae.current=[],[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(void 0,[])).next())}));var t,n},onDataChangeStart:function(){Se(!1)},onDataChangeEnd:function(e){_e.current({editableData:ue(e)}),C(e),Se()},onUploadStart:function(){le.current=le.current+1,ne(!0),Se(!1)},onUploadEnd:function(e){le.current=le.current-1,C(e),_e.current(),ne(!1),Se()}}}(e),m=f.pollFormRef,p=f.publishTime,h=f.errors,v=f.accessLevel,g=f.title,y=f.data,_=f.tags,b=f.isWaitingVideo,S=f.commentsMode,T=f.subscriptionLevel,I=f.priceFormatted,N=f.isPostHasVideo,C=f.onTagAdd,w=f.onTagDelete,O=f.onPublishTimeAccept,A=f.onPublishTimeClear,P=f.onToggleAfterProcessingVideo,L=f.setAccessLevel,R=f.setCommentsMode,k=f.setSubscriptionLevel,D=f.setTitle,U=f.setPriceFormatted,B=f.onSubmit,x=f.getDeferredAccessMinDate,M=f.getPublishTimeDate,F=f.onDataChangeStart,G=f.onDataChangeEnd,H=f.setVideoPreview,W=f.onUploadStart,V=f.onUploadEnd,j=jG().showAlert,z=Qo(r.PUBLICATION_AFTER_PROCESSING_VIDEO),Y=v!==E.OPEN||u.isDeferredAccessEnable&&u.deferredAccessLevelType!==E.OPEN;return Gt.createElement("div",kAe({className:"BlogPostForm_root_IJDw9"},Na(UAe(yAe.ROOT))),Gt.createElement("div",{className:"BlogPostForm_leftColumn_gKYXU"},Gt.createElement("div",{className:"BlogPostForm_title_Tmbk7"},Gt.createElement("span",null,DAe.editor.title)),Gt.createElement("div",{className:"BlogPostForm_editorWrapper_dXArL"},Gt.createElement("div",{className:"BlogPostForm_editor_vTFdc"},Gt.createElement(mpe,{title:g,placeholder:DAe.editor.editorPlaceholder,data:y,onTitleChange:function(e){D(e.target.value)},uploadImage:s.uploadImage,createUploadAudioContainer:s.createUploadAudioContainer,createUploadFileContainer:s.createUploadFileContainer,createUploadVideoContainer:s.createUploadVideoContainer,uploadVideoFinish:s.uploadVideoFinish,showAlert:j,dataChangeHandlers:{onStart:F,onEnd:G},setVideoPreview:H,onUploadStart:W,onUploadEnd:V,onPollButtonClick:c.onPollFormOpen}),h.dateError&&Gt.createElement("div",{className:"BlogPostForm_dateError_a68N8"},h.dateError)),c.arePollsEnabled&&c.isPollFormVisible&&Gt.createElement(bAe,{ref:m,classNames:{root:"BlogPostForm_pollForm_Z8H4e"},isReadOnly:c.isPollReadOnly,isLoading:c.pollNetworkStatus.isFetching,poll:c.poll,formData:c.pollFormData,onFormDataChange:c.onPollFormDataChange,onFormValidStateChange:c.onPollFormValidStateChange,onFormSubmittingStateChange:c.onPollFormSubmittingStateChange,onClose:c.onPollFormClose,renderDateSelector:CAe})),Y&&Gt.createElement(uAe,{classNames:{root:PAe},teaserText:d.teaser.text,teaserPhotoFieldProps:{teaserImage:d.teaser.image,setTeaserImageUploadId:d.setTeaserUploadId,uploadImage:s.uploadImage,onReset:d.onResetTeaserImage,onUpload:d.onUploadTeaserImage,isLoading:d.isTeaserImageLoading},onTeaserChange:d.onTeaserTextChange}),Gt.createElement(aAe,{tags:_,blogTags:i,className:PAe,onTagAdd:C,onTagDelete:w}),Gt.createElement("div",{className:"BlogPostForm_submit_XrW_9"},Gt.createElement("div",{className:"BlogPostForm_submitBlock_KwY9k"},Gt.createElement(FB,kAe({className:"BlogPostForm_saveButton_SSchW",onClick:B,isDisabled:l},Na(UAe(yAe.PUBLISH_BUTTON))),(null==t?void 0:t.id)?DAe.save:p?DAe.addToQueue:DAe.create),NAe(t)&&Gt.createElement(Jfe,{value:M(p),onAccept:O,onClear:A})),N&&z&&!(null==t?void 0:t.isPublished)&&Gt.createElement("div",{className:"BlogPostForm_checkBoxBlock_pawEZ"},Gt.createElement(VM,{onToggle:P,checked:b,label:DAe.publishAfterProcessingVideo}),Gt.createElement(Dx,{classNames:{content:"BlogPostForm_publishAfterProcessingVideoContent_O2KHH"},trigger:gx.HOVER,align:yx.RIGHT_TOP,content:DAe.publishAfterProcessingVideoInfo},Gt.createElement(pB,{glyph:hB.Gc9,className:"BlogPostForm_icon_rOiJl"}))))),Gt.createElement("div",{className:"BlogPostForm_rightColumn_GPfBL"},Gt.createElement(hme,{accessLevel:v,onAccessLevelChange:L,commentsMode:S,onCommentsModeChange:R,isSubscriptionLevelsEnable:IAe(v),isPriceEnabled:SAe(v),isCommentsModeEnabled:!0,subscriptionLevels:a,subscriptionLevel:T,onSubscriptionLevelChange:k,onPriceChange:function(e){U(e.target.value)},priceFormatted:I,priceError:h.priceErrorHigh||h.priceErrorLow,containerClassName:LAe}),o&&!n&&Gt.createElement(JOe,{accessLevel:u.deferredAccessLevelType,onDeferredAccessLevelChange:u.onDeferredAccessLevelTypeChange,commentsMode:u.deferredAccessCommentsMode,onCommentsModeChange:u.onDeferredAccessModeChange,isSubscriptionLevelsEnable:IAe(u.deferredAccessLevelType),isPriceEnabled:SAe(u.deferredAccessLevelType),subscriptionLevels:a,subscriptionLevel:u.deferredAccessSubscriptionLevel,onSubscriptionLevelChange:u.onDeferredAccessSubscriptionLevelChange,onPriceChange:u.onDeferredAccessPriceChange,priceFormatted:u.deferredAccessPriceFormatted,priceError:h.deferredAccessPriceErrorHigh||h.deferredAccessPriceErrorLow,containerClassName:LAe,DateSelector:Gt.createElement(Jfe,{minDate:x(),value:M(u.deferredAccessPublishTime),onAccept:u.onDeferredAccessPublishTimeAccept,onClear:u.onDeferredAccessPublishTimeClear,isSelectStyle:!0}),onDeferredAccessChange:u.onDeferredAccessChange,isDeferredAccessEnable:u.isDeferredAccessEnable})))},xAe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},MAe=function(){return MAe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},MAe.apply(this,arguments)},FAe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},GAe={width:138,height:150},HAe=function(){var e,t=FAe((0,Gt.useState)({image:null,text:[]}),2),n=t[0],r=t[1],o=FAe((0,Gt.useState)(null),2),a=o[0],i=o[1],l=null===(e=(0,Vt.v9)(UL)[a])||void 0===e?void 0:e.meta.isFetching;return{teaser:n,isTeaserImageLoading:l,setTeaser:r,setTeaserUploadId:i,resetTeaserState:function(){r({image:null,text:[]}),i(null)},onTeaserTextChange:function(e){r(MAe(MAe({},n),{text:e}))},onResetTeaserImage:function(){r(MAe(MAe({},n),{image:null}))},onUploadTeaserImage:function(e){r(MAe(MAe({},n),{image:MAe(MAe({},e),{url:Bo(MAe({url:e.url},GAe))})}))}}};!function(e){e[e.PRICE_LOW=0]="PRICE_LOW",e[e.PRICE_HIGH=1]="PRICE_HIGH"}(RAe||(RAe={}));var WAe,VAe=function(){return VAe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},VAe.apply(this,arguments)},jAe=(0,Qr.getTranslation)("@boosty/common/containers.BlogPost.BlogPostForm.hooks.usePostFormErrors"),zAe=function(e){var t=e.post,n=e.maxPostPrice,r=e.minPostPrice,o=e.deferredAccessPublishTime,a=e.isDeferredAccessEnable,i=e.subscriptionLevels,l=e.arePollsEnabled,s=e.isPollFormVisible,c=e.isPollFormValid,u=e.isPollFormSubmitting,d=e.deferredAccessPriceFormatted,f=e.deferredAccessLevelType,m=e.formType,p=nr().currencies.default,h=function(e){var t=e.priceFormatted,o=e.accessLevel,a=TAe(t,o);return SAe(o)&&n?a>n?{code:RAe.PRICE_HIGH,text:(0,Qr.getParametrizedText)(jAe.errors.price.max,{maxPostPrice:(0,Yt.getFormattedNumber)(Vr({amount:n,currency:p}))})}:!a||a<r?{code:RAe.PRICE_LOW,text:(0,Qr.getParametrizedText)(jAe.errors.price.min,{minPostPrice:(0,Yt.getFormattedNumber)(Vr({amount:r,currency:p}))})}:null:null},v=function(){return function(e){return!e.length}(i)?jAe.errors.subscriptionLevel.unavailable:null},g=function(e){var n,r,i,l,s,c,u,m,p,g,_=e.accessLevel,E=e.priceFormatted,b=e.publishTime,S=e.draftData,T=e.isFileUploadInProgress,I=null!==(p=h({priceFormatted:E,accessLevel:_}))&&void 0!==p?p:{},N=I.text,C=I.code,w=null!==(g=h({priceFormatted:d,accessLevel:f}))&&void 0!==g?g:{},O=w.text,A=w.code,P=function(e){if(!NAe(t))return null;var n=No(new Date);return e&&e<=n?(0,Qr.getParametrizedText)(jAe.errors.publishTime,{now:go(No(new Date),"dd/MMMM/yyyy/&/HH/mm")}):null}(b),L=function(e){if(!a)return null;if(a&&!o)return jAe.errors.deferredPublishTimeNull;var t=function(e){var t=new Date;return!e||e<No(t)?t:function(e){return e&&new Date(vo(e))}(e)}(e),n=No(t);return o&&o<n?(0,Qr.getParametrizedText)(jAe.errors.deferredPublishTime,{date:go(n,"dd/MMMM/yyyy/&/HH/mm")}):null}(o),R=IAe(_)&&v(),k=!(null==R?void 0:R.length)&&IAe(f)&&v(),D=y(S)?jAe.errors.hasNoChanges:"",U=T?jAe.errors.uploadingInProgress:"",B=function(e,t){var n=t?mn.DEFERRED_PRICE_LOW:mn.PRICE_LOW,r=t?mn.DEFERRED_PRICE_HIGH:mn.PRICE_HIGH;return e===RAe.PRICE_LOW?n:r};return VAe(VAe(VAe(VAe(VAe(VAe(VAe(VAe({},(null==N?void 0:N.length)?((n={})[B(C)]=N,n):void 0),(null==O?void 0:O.length)&&a?((r={})[B(A,!0)]=O,r):void 0),(null==k?void 0:k.length)&&a?((i={})[mn.DEFERRED_SUBSCRIPTIONS_LEVELS]=k,i):void 0),(null==P?void 0:P.length)?((l={})[mn.DATE]=P,l):void 0),(null==L?void 0:L.length)&&a?((s={})[mn.DEFERRED_DATE]=L,s):void 0),(null==D?void 0:D.length)?((c={})[mn.IS_EMPTY]=D,c):void 0),(null==U?void 0:U.length)?((u={})[mn.FILE_UPLOAD]=U,u):void 0),(null==R?void 0:R.length)?((m={})[mn.SUBSCRIPTIONS_LEVELS]=R,m):void 0)},y=function(e){var t=function(e){return ta(e)}(e);return l?s&&(!c||u)||!s&&t:t};return{isSubmitDisabled:function(e){var t;return Boolean(null===(t=Object.keys(g(e)))||void 0===t?void 0:t.length)},isEmptyPost:y,validate:function(t,n){var r=g(t),o=Object.keys(r),a="";o.forEach((function(t,n){WOe(t,m),r[t]&&(HOe(r[t],e.showAlert,100*n),a+=r[t]+"; ")})),Boolean(o.length)&&n&&n(a)},getErrorsMap:g}},YAe=function(e){var t=e.blogUrl,n=e.post,o=e.postDraft,a=e.formType,i=e.showAlert,l=nr(),s=l.currencies.default,c=l.posts.paidPosts.paymentLimits,u=c.minPaymentSum,d=c.maxPaymentSum[s],f=u[s],m=(0,Vt.v9)(Ww),p=(0,Vt.v9)(VR),h=(0,Vt.v9)(XO),v=(0,Vt.v9)(WR),g=(0,Vt.v9)(UL),y=(0,Vt.v9)(bL),_=Ck(),b=_.isAuthorized,S=_.isBanned,T=function(e){var t=e.blogUrl,n=(0,Vt.I0)();return{fetchBlog:function(){n((0,dm.Ax)(Nm.action)({blogUrl:t}))},fetchCurrentBlogSubscriptionLevels:function(){n((0,dm.Ax)(qp.action)({blogUrl:t}))},fetchBlogTags:function(){n((0,dm.Ax)(oy.action)({blogUrl:t}))},createUploadAudioContainer:function(){return n((0,dm.Ax)(zE.action)())},createUploadFileContainer:function(){return n((0,dm.Ax)(jE.action)())},createUploadVideoContainer:function(e){return n((0,dm.Ax)(YE.action)(e))},uploadImage:function(e){return n((0,dm.Ax)(WE.action)({image:e}))},uploadVideoFinish:function(e){return n((0,dm.Ax)(KE.action)(e))}}}({blogUrl:t}),I=function(e){var t=e.post,n=e.blogPostDraft,r=e.subscriptionLevels,o=nr(),a=o.posts.paidPosts.paymentLimits.minPaymentSum,i=o.currencies.default,l=xAe((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=xAe((0,Gt.useState)(!1),2),d=u[0],f=u[1],m=xAe((0,Gt.useState)(null),2),p=m[0],h=m[1],v=xAe((0,Gt.useState)(null),2),g=v[0],y=v[1],_=xAe((0,Gt.useState)(null),2),b=_[0],S=_[1],T=xAe((0,Gt.useState)(null),2),I=T[0],N=T[1],C=xAe((0,Gt.useState)(null),2),w=C[0],O=C[1];(0,Gt.useEffect)((function(){s||L()}),[s]);var A=function(e){var o,a,i=n||t,l=nr().posts.paidPosts.isCreateEnable,s=e?null===(o=null==i?void 0:i.deferredAccessLevel)||void 0===o?void 0:o.subscriptionLevel:null==i?void 0:i.subscriptionLevel,c=e?null===(a=null==i?void 0:i.deferredAccessLevel)||void 0===a?void 0:a.price:null==i?void 0:i.price;return i?s&&c?E.SUBSCRIBERS_AND_PRICE:s?E.ONLY_SUBSCRIBERS:c?E.ONLY_PRICE:E.OPEN:r&&r.length?E.ONLY_SUBSCRIBERS:l?E.ONLY_PRICE:E.OPEN},P=function(e){S(e||(Array.isArray(r)&&r.length>0?r[0]:null))},L=function(){!d&&g&&(f(!0),c(!0))},R=IAe(p)?null==b?void 0:b.id:null;return{isDeferredAccessEnable:d,deferredAccessLevelType:p,deferredAccessSubscriptionLevel:b,deferredAccessCommentsMode:w,deferredAccessPriceFormatted:I,deferredAccessPublishTime:g,deferredAccessSubscriptionLevelId:R,getAccessLevel:A,onDeferredAccessChange:function(e){f(e),c(!0)},onDeferredAccessLevelTypeChange:function(e){h(e)},setDeferredAccessLevelState:function(){var e,r=n||t;(null===(e=null==r?void 0:r.deferredAccessLevel)||void 0===e?void 0:e.applyTime)?(f(!0),h(A(!0)),O(r.deferredAccessLevel.isCommentsDenied?Nt.DENY:Nt.ALLOW),y(r.deferredAccessLevel.applyTime),N((0,Yt.getFormattedNumber)(r.deferredAccessLevel.price||a[i])),r.deferredAccessLevel.subscriptionLevel?P(r.deferredAccessLevel.subscriptionLevel):P()):(f(!1),h(A(!0)),O(Nt.ALLOW),N((0,Yt.getFormattedNumber)(a[i])),P())},onDeferredAccessSubscriptionLevelChange:function(e){S(e)},onDeferredAccessModeChange:function(e){O(e)},onDeferredAccessPriceChange:function(e){N(e.target.value)},onDeferredAccessPublishTimeAccept:function(e){y(No(e))},onDeferredAccessPublishTimeClear:function(){y(null)},setDeferredAccessSubscriptionLevelState:P}}({post:n,blogPostDraft:o,subscriptionLevels:y}),N=function(e){var t=e.blogUrl,n=e.poll,o=(0,Vt.I0)(),a=gV((0,Gt.useState)(dV(n)),2),i=a[0],l=a[1],s=gV((0,Gt.useState)(Boolean(n)),2),c=s[0],u=s[1],d=gV((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=gV((0,Gt.useState)(Boolean(null==n?void 0:n.id)),2),h=p[0],v=p[1],g=gV((0,Gt.useState)({isFetching:!1,isFetched:!1,error:null}),2),y=g[0],_=g[1],E=Qo(r.USER_GENERATED_POLLS),b=(null==n?void 0:n.isFinished)||n&&0!==n.counter;(0,Gt.useEffect)((function(){(null==n?void 0:n.id)&&(l(dV(n)),v(!0))}),[n]);var S=(0,Gt.useCallback)((function(){return hV(void 0,void 0,void 0,(function(){var e,n;return vV(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),_({isFetching:!0,isFetched:!1,error:null}),[4,o((0,dm.Ax)(uS.action)({blogUrl:t,title:i.title,options:i.options,isMultiple:null==i?void 0:i.isMultiple,finishTime:(null==i?void 0:i.finishTime)&&No(i.finishTime),hasOther:!1}))];case 1:return e=r.sent().data.poll,_({isFetching:!1,isFetched:!0,error:null}),[2,{poll:e}];case 2:throw n=r.sent(),_(kr(n)),n;case 3:return[2]}}))}))}),[i]),T=(0,Gt.useCallback)((function(){return hV(void 0,void 0,void 0,(function(){var e;return vV(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),_({isFetching:!0,isFetched:!1,error:null}),[4,o((0,dm.Ax)(dS.action)({blogUrl:t,pollId:n.id,title:i.title,options:i.options,isMultiple:null==i?void 0:i.isMultiple,finishTime:(null==i?void 0:i.finishTime)&&No(i.finishTime),hasOther:!1}))];case 1:return r.sent(),_({isFetching:!1,isFetched:!0,error:null}),[3,3];case 2:throw e=r.sent(),_(kr(e)),e;case 3:return[2]}}))}))}),[i,null==n?void 0:n.id]),I=(0,Gt.useCallback)((function(){l(dV()),v(!1)}),[]),N=(0,Gt.useCallback)((function(){v(!0)}),[]),C=(0,Gt.useCallback)((function(e){l(pV(pV({},i),e))}),[]),w=(0,Gt.useCallback)((function(e){u(e)}),[]),O=(0,Gt.useCallback)((function(e){m(e)}),[]);return{poll:n,pollNetworkStatus:y,pollFormData:i,isPollFormVisible:h,isPollFormValid:c,isPollFormSubmitting:f,isPollReadOnly:b,arePollsEnabled:E,onPollCreate:S,onPollEdit:T,onPollFormDataChange:C,onPollFormValidStateChange:w,onPollFormSubmittingStateChange:O,onPollFormClose:I,onPollFormOpen:N}}({blogUrl:t,poll:null==n?void 0:n.poll});return(0,Gt.useEffect)((function(){m.isFetched||m.isFetching||T.fetchBlog(),p.isFetched||p.isFetching||T.fetchBlogTags(),Array.isArray(y)&&0!==y.length||T.fetchCurrentBlogSubscriptionLevels()}),[]),{blogUrl:t,currentUser:h,blogTags:v,mediaDataUploads:g,subscriptionLevels:y,isAuthorized:b,isBanned:S,minPostPrice:f,actions:T,pollForm:N,deferredAccess:I,errors:zAe({post:n,isDeferredAccessEnable:I.isDeferredAccessEnable,isPollFormSubmitting:N.isPollFormSubmitting,isPollFormValid:N.isPollFormValid,isPollFormVisible:N.isPollFormVisible,arePollsEnabled:N.arePollsEnabled,deferredAccessLevelType:I.deferredAccessLevelType,deferredAccessPriceFormatted:I.deferredAccessPriceFormatted,deferredAccessPublishTime:I.deferredAccessPublishTime,maxPostPrice:d,minPostPrice:f,subscriptionLevels:y,formType:a,showAlert:i}),teaserData:HAe()}},KAe=function(e){var t=e.blogUrl,n=e.postId,r=e.isOwner,o=(0,Vt.I0)(),a=(0,Vt.v9)(Fw),i=(0,Vt.v9)(Mw),l=(0,Vt.v9)(XO);return{postDraft:a,postDrafts:i,selectPostDraft:function(e){o((0,dm.Ax)(B_.action)({blogPostDraft:e}))},restorePostDrafts:function(){var e,a=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),Qf().filter((function(r){var o,a,i;return(null===(o=null==r?void 0:r.key)||void 0===o?void 0:o.blogUrl)===n&&(null===(a=null==r?void 0:r.key)||void 0===a?void 0:a.id)===t&&(null===(i=null==r?void 0:r.key)||void 0===i?void 0:i.userId)===e}))}(l.id,n,r?null:t);e={postDrafts:a,blogPostId:n,blogUrl:r?null:t,userId:l.id},o((0,dm.Ax)(k_.action)(e))},savePostDraft:function(e){var t;Xf(qf(qf([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(Jf(t=e)),!1),[t],!1)),o((0,dm.Ax)(D_.action)({blogPostDraft:e}))},deletePostDraft:function(e){return Xf(Jf(e)),o((0,dm.Ax)(U_.action)({blogPostDraft:e}))}}},qAe=function(){return qAe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qAe.apply(this,arguments)},XAe=function(){return XAe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},XAe.apply(this,arguments)},QAe=(0,Qr.getTranslation)("@boosty/common/containers.BlogPost.BlogPostAdd.desktop"),JAe=oo("BlogPost.BlogPostAdd"),ZAe=function(){var e=Gf().blogUrl,t=Mf(),n=jG().showAlert,r=function(e){var t=e.blogUrl,n=e.showAlert,r=(0,Vt.I0)(),o=(0,Vt.v9)(kw),a=(0,Vt.v9)(Hw),i=KAe({blogUrl:t,isOwner:a.isOwner}),l=YAe({blogUrl:t,postDraft:i.postDraft,formType:pn.CREATE,showAlert:n});return qAe(qAe({},l),{isSubmitting:o,isOwner:a.isOwner,create:function(e,n){return r((0,dm.Ax)(h_.action)({blogUrl:t,blogPost:e,pollId:n}))},updateDeferredAccessLevel:function(e){return r((0,dm.Ax)(L_.action)(e))},drafts:i})}({blogUrl:e,showAlert:n}),o=r.isAuthorized,a=r.pollForm.onPollCreate,i=r.drafts,l=i.postDraft,s=i.postDrafts,c=i.restorePostDrafts,u=i.deletePostDraft,d=i.savePostDraft,f=i.selectPostDraft,m=r.create,p=r.updateDeferredAccessLevel;return(0,Gt.useEffect)((function(){o&&c()}),[]),(0,Gt.useEffect)((function(){o&&c()}),[o]),Gt.createElement("div",XAe({},Na(JAe(DOe.ROOT))),Gt.createElement(YOe,{title:QAe.title,blogPostDraftSelector:Gt.createElement(MOe,{items:s,selected:l,onSelect:f,onDelete:u}),onBackClick:function(){t(-1)}},Gt.createElement(BAe,XAe({},r,{onDraftSave:d,onDraftSelect:f,onSubmit:function(r,o,i){return void 0===i&&(i=!1),void 0,void 0,c=function(){var s,c,d,f,h,v,g,y,_,E,b,S,T,I;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(N){switch(N.label){case 0:if(s=r.title,c=r.data,d=r.subscriptionLevel,f=r.price,h=r.teaser,v=r.tags,g=r.isCommentsDenied,y=r.isWaitingVideo,_=r.publishTime,E=null,!i)return[3,4];N.label=1;case 1:return N.trys.push([1,3,,4]),[4,a()];case 2:return b=N.sent().poll,E=null==b?void 0:b.id,[3,4];case 3:return N.sent(),GOe({errorText:mV(),errorCode:mn.POLL,formType:pn.CREATE,showContextAlert:n}),[2];case 4:return N.trys.push([4,10,,11]),[4,m({title:s,data:c,subscriptionLevel:d,price:f,teaser:h,tags:v,isCommentsDenied:g,isWaitingVideo:y,publishTime:_},E)];case 5:return S=N.sent(),T=null===(I=null==S?void 0:S.blogPost)||void 0===I?void 0:I.id,bd.log.gtm.createPostSuccess(),(null==o?void 0:o.applyTime)&&T?[4,p(XAe(XAe({},o),{blogUrl:e,postId:T}))]:[3,7];case 6:N.sent(),N.label=7;case 7:return l?[4,u(l)]:[3,9];case 8:N.sent(),N.label=9;case 9:return t((0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:e,postId:T})),[3,11];case 10:return N.sent(),GOe({errorText:QAe.error,errorCode:mn.DEFAULT,formType:pn.CREATE,showContextAlert:n}),[3,11];case 11:return[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(n,r)}o((c=c.apply(undefined,[])).next())}));var s,c}}))))};ZAe.getFetchActions=function(e,t){var n=t.params.blogUrl;return[function(){return Nm.action({blogUrl:n})},function(){return qp.action({blogUrl:n})}]},function(e){e.ROOT="ROOT"}(WAe||(WAe={}));var $Ae=function(){return $Ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$Ae.apply(this,arguments)},ePe=function(){return ePe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ePe.apply(this,arguments)},tPe=(0,Qr.getTranslation)("@boosty/common/containers.BlogPost.BlogPostEdit.desktop"),nPe=oo("BlogPost.BlogPostEdit"),rPe=function(){var e=Gf(),t=e.blogUrl,n=e.postId,r=Mf(),o=jG().showAlert,a=function(e){var t=e.blogUrl,n=e.postId,r=e.showAlert,o=(0,Vt.I0)(),a=(0,Vt.v9)(Rw),i=(0,Vt.v9)(Dw),l=(0,Vt.v9)(Tw),s=(0,Vt.v9)(Uw),c=Iw(s,l,n),u=(0,Vt.v9)(Hw),d=KAe({blogUrl:t,postId:null==c?void 0:c.id,isOwner:u.isOwner}),f=YAe({blogUrl:t,post:c,postDraft:d.postDraft,formType:pn.EDIT,showAlert:r});(0,Gt.useEffect)((function(){c||m(),c&&f.isAuthorized&&!f.isBanned&&p()}),[]);var m=function(){o((0,dm.Ax)(Cv.action)({blogUrl:t,postId:n}))},p=function(){return o((0,dm.Ax)(P_.action)({blogUrl:t,postId:n}))};return $Ae($Ae({},f),{isFetched:a,post:c,isSubmitting:i,update:function(e,r){return o((0,dm.Ax)(v_.action)({blogUrl:t,postId:n,blogPost:e,pollId:r}))},removeDeferredAccessLevels:function(){return o((0,dm.Ax)(R_.action)({blogUrl:t,postId:n}))},updateDeferredAccessLevels:function(e){return o((0,dm.Ax)(L_.action)(e))},isOwner:u.isOwner,drafts:d})}({blogUrl:t,postId:n,showAlert:o}),i=a.post,l=a.isAuthorized,s=a.isFetched,c=a.removeDeferredAccessLevels,u=a.updateDeferredAccessLevels,d=a.update,f=a.pollForm,m=f.poll,p=f.isPollReadOnly,h=f.onPollCreate,v=f.onPollEdit,g=a.drafts,y=g.postDraft,_=g.postDrafts,E=g.selectPostDraft,b=g.savePostDraft,S=g.restorePostDrafts,T=g.deletePostDraft;(0,Gt.useEffect)((function(){i&&S()}),[]),(0,Gt.useEffect)((function(){l&&i&&S()}),[l,i]);var I=Gt.createElement(MOe,{items:_,selected:y,onSelect:E,onDelete:T});return Gt.createElement("div",ePe({},Na(nPe(WAe.ROOT))),Gt.createElement(YOe,{title:tPe.title,blogPostDraftSelector:I,onBackClick:function(){r((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:t}))}},Gt.createElement(BAe,ePe({},a,{onDraftSave:b,onDraftSelect:E,onSubmit:function(e,a,l){return void 0===l&&(l=!1),void 0,void 0,f=function(){var s,f,g,_,E,b,S,I,N,C,w;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(O){switch(O.label){case 0:if(s=e.title,f=e.data,g=e.subscriptionLevel,_=e.price,E=e.teaser,b=e.tags,S=e.isCommentsDenied,I=e.publishTime,N=null==m?void 0:m.id,!l)return[3,8];O.label=1;case 1:return O.trys.push([1,6,,7]),!Boolean(m)||p?[3,3]:[4,v()];case 2:return O.sent(),[3,5];case 3:return[4,h()];case 4:C=O.sent().poll,N=null==C?void 0:C.id,O.label=5;case 5:return[3,7];case 6:return O.sent(),GOe({errorText:mV(),errorCode:mn.POLL,formType:pn.EDIT,showContextAlert:o}),[2];case 7:return[3,9];case 8:N=null,O.label=9;case 9:return O.trys.push([9,17,,18]),[4,d({title:s,data:f,subscriptionLevel:g,price:_,teaser:E,tags:b,isCommentsDenied:S,publishTime:I},N)];case 10:return O.sent(),a||!(null===(w=i.deferredAccessLevel)||void 0===w?void 0:w.applyTime)?[3,12]:[4,c()];case 11:O.sent(),O.label=12;case 12:return(null==a?void 0:a.applyTime)?[4,u(ePe({blogUrl:t,postId:n},a))]:[3,14];case 13:O.sent(),O.label=14;case 14:return y?[4,T(y)]:[3,16];case 15:O.sent(),O.label=16;case 16:return r((0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:t,postId:n})),[3,18];case 17:return O.sent(),GOe({errorText:tPe.error,errorCode:mn.DEFAULT,formType:pn.EDIT,showContextAlert:o}),[3,18];case 18:return[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{o(f.next(e))}catch(e){t(e)}}function r(e){try{o(f.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(n,r)}o((f=f.apply(undefined,[])).next())}));var s,f}}))),!s&&Gt.createElement(ZY,{isGlobal:!0}))};rPe.getFetchActions=function(e,t){var n=t.params.blogUrl;return[function(){return Nm.action({blogUrl:n})},function(){return qp.action({blogUrl:n})}]};var oPe=function(){return oPe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oPe.apply(this,arguments)},aPe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},iPe=(0,Qr.getTranslation)("@boosty/common/containers.BlogAboutEdit.desktop"),lPe=function(){var e=aPe((0,Gt.useState)([]),2),t=e[0],n=e[1],r=aPe((0,Gt.useState)(!0),2),o=r[0],a=r[1],i=(0,Gt.useRef)([]),l=(0,Gt.useRef)([]),s=(0,Gt.useRef)(!1),c=(0,Gt.useRef)(0),u=Gf().blogUrl,d=(0,Vt.I0)(),f=Mf(),m=jG().showAlert,h=(0,Vt.v9)(Hw),v=(0,Vt.v9)(Ww),g=(0,Vt.v9)(tO)||!o;(0,Gt.useEffect)((function(){v.isFetched&&h.blogUrl===u?_(h.description):y()}),[]),(0,Gt.useEffect)((function(){h&&_(h.description)}),[h]);var y=function(){d((0,dm.Ax)(Nm.action)({blogUrl:u}))},_=function(e){n(e),i.current=e},E=function(e){var t=c.current>0,n=ta(i.current),r=null!=e?e:!t&&!s.current&&!n;a(r)},b=function(){f(-1)};return Gt.createElement(PM,{classNames:{block:"BlogAboutEdit_popup_HM9Se",title:"BlogAboutEdit_popupTitle_vAo1T"},title:iPe.title,onClose:function(){b()},footer:Gt.createElement(FB,{isDisabled:g,onClick:function(){return void 0,void 0,n=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:e=(i.current||t).map((function(e){if(e.type===pe.VIDEO_FILE){var t=l.current.find((function(t){return t.vid===e.vid}));return t?oPe(oPe({},e),{previewId:t.id,preview:t.url}):e}return e})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(r={title:h.title,description:e},d((0,dm.Ax)(ty.action)({blogUrl:u,blog:r})))];case 2:return n.sent(),b(),[3,4];case 3:return n.sent(),m({type:p.ERROR,text:iPe.errorSave}),[3,4];case 4:return l.current=[],[2]}var r}))},new((e=void 0)||(e=Promise))((function(t,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?t(n.value):(r=n.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var e,n}},iPe.save)},v.isFetching?Gt.createElement(ZY,null):h?Gt.createElement(mpe,{className:"BlogAboutEdit_editor_Gr8Ar",data:t,uploadImage:function(e){return d((0,dm.Ax)(WE.action)({image:e}))},showAlert:m,createUploadFileContainer:function(){return d((0,dm.Ax)(jE.action)())},createUploadAudioContainer:function(){return d((0,dm.Ax)(zE.action)())},createUploadVideoContainer:function(e){return d((0,dm.Ax)(YE.action)(e))},uploadVideoFinish:function(e){return d((0,dm.Ax)(KE.action)(e))},dataChangeHandlers:{onStart:function(){E(!1)},onEnd:function(e){i.current=e,E()}},onUploadStart:function(){c.current=c.current+1,E(!1)},onUploadEnd:function(e){c.current=c.current-1,i.current=e,E()},isTitleDisabled:!0,isToolbarStatic:!0,isPollButtonHidden:!0,setVideoPreview:function(e,t,n){l.current.find((function(e){return e.vid===t}))?l.current=l.current.map((function(r){return r.vid===t?oPe(oPe({},r),{vid:t,id:e,url:n}):r})):l.current.push({id:e,vid:t,url:n})}}):null)};const sPe="TutorialOffers_description_oTPwj";var cPe=(0,Qr.getTranslation)("@boosty/common/containers.TutorialOffers.desktop"),uPe=function(){return uPe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},uPe.apply(this,arguments)},dPe=function(e,t,n){var r=e.paymentPurposeType,o=void 0===r?Ce.SUBSCRIPTION:r,a=e.paymentPurposeId,i=void 0===a?Ce.SUBSCRIPTION:a,l=e.paymentPurposeDonationType,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["paymentPurposeType","paymentPurposeId","paymentPurposeDonationType"]);return yf(ir.BLOG_DONATE,n)&&(o=Ce.DONATION,t.forPost?(i=t.forPost,l=V.POST):l=V.AUTHOR),uPe(uPe({},s),{paymentPurposeDonationType:l,paymentPurposeId:i,paymentPurposeType:o})},fPe=function(){return fPe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fPe.apply(this,arguments)},mPe=function(){var e=xf(),t=e.search,n=e.pathname,r=(0,Do.parse)(t),o=function(){var e=Gf(),t=xf(),n=t.search,r=t.state,o=t.pathname,a=null==r?void 0:r.isShare,i=(0,Do.parse)(n),l=i,s=l.dialogId,c=l.userId,u=l.donationAmount,d=l.ssource,f=dPe(e,i,o),m=f.blogUrl,p=f.postId,h=f.levelId,v=f.mediaType,g=f.paymentPurposeDonationType,y=f.paymentPurposeId,_=f.paymentPurposeType;return{dialogId:Number(s),userId:Number(c),levelId:Number(h),isShare:a,blogUrl:m,postId:p,mediaType:v,paymentPurposeDonationType:g,paymentPurposeId:y,paymentPurposeType:_,donationAmount:Number(u),source:d||Xu.DIRECT}}(),a=o.dialogId,i=o.blogUrl,l=o.userId,s=o.levelId,c=o.isShare,u=o.postId,d=o.mediaType,f=o.paymentPurposeDonationType,m=o.paymentPurposeId,p=o.paymentPurposeType,h=o.source,v=o.donationAmount,g=Mf(),y=xf().state,_=cm(n),E=_.isPostPage,b=_.isStreamPage,S=_.isMessagesPage,T=_.isMediaPage,I=_.isFeedPage;return(0,Gt.useEffect)((function(){var e;if(t){var n=(0,Do.stringify)(fPe(fPe({},r),((e={}).ssource=void 0,e)));history.replaceState(null,document.title,window.location.href.replace(t,n?"?".concat(n):""))}}),[]),Gt.createElement(g9,{dialogId:a,userId:l,levelId:s,isShare:c,type:p,typeDonation:f,blogUrl:i,donationAmount:v,id:m,source:h,onGoToPost:function(e){g(e,{state:{isFromFeed:null==y?void 0:y.isFromFeed}}),Of()},onClose:function(){E?g((0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:i,postId:u}),{state:{isFromFeed:null==y?void 0:y.isFromFeed}}):g(b?(0,Yt.getParametrizedUrl)(ir.BLOG_STREAM,{blogUrl:i}):S?(0,Yt.getParametrizedUrl)(ir.MESSAGES,{},{dialogId:a,userId:l}):T?(0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:i,mediaType:d}):I?ir.MAIN:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:i}))}})};mPe.fetchActions=function(e){var t=e.params,n=e.query,r=e.pathname,o=dPe(t,n,r),a=o.blogUrl,i=o.paymentPurposeDonationType,l=o.paymentPurposeType,s=o.paymentPurposeId,c=o.levelId;return function(e){var t=e.blogUrl,n=e.type,r=e.id,o=e.userId,a=bU.includes(n);return function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([function(){return Nm.action({blogUrl:t})},function(){return qp.action({blogUrl:t})}],_U(a?function(e){var t=e.blogUrl,n=e.type,r=e.id;return n===Ce.DONATION?[function(){return oh.action({blogUrl:t})}]:n===Ce.POST?[function(){return G_.action({blogUrl:t,postId:String(r)})}]:n===Ce.MESSAGE?[function(){return Gh.action({messageId:String(r)})}]:[]}({blogUrl:t,type:n,id:r,userId:o}):[]),!1)}({blogUrl:a,type:l,typeDonation:i,id:s,levelId:Number(c),userId:Number(n.userId)})};const pPe="PhotoViewerItem_image_QvOcq",hPe="PhotoViewerItem_root_DyI78";var vPe,gPe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},yPe=function(e){var t=e.className,n=e.disableSwipeClassName,r=e.image.url,o=e.isSwipeEnabled,a=e.enableSwipe,i=e.disableSwipe,l=(0,Gt.useRef)(),s=gPe((0,Gt.useState)(!0),2),c=s[0],u=s[1],d=(0,Gt.useRef)(null),f=qNe({imageRef:d}),m=f.photoCanBeZoomed,p=f.imageSizesAreUnknown,h=Bo({url:r,width:120,height:120,isCroped:!1,isRetina:!1}),v=gPe((0,Gt.useState)(!0),2),g=v[0],y=v[1],_=(0,Gt.useCallback)((function(e){var t=d.current;if(!YNe(e.x)&&"0"===(null==t?void 0:t.style.opacity)&&u(!1),(null==e?void 0:e.scale)<=1.01&&!o&&a(),(null==e?void 0:e.scale)>1.01&&o&&i(),t){var n=(0,zNe.z9)()?(0,zNe.Z3)(e):(0,zNe.kO)(e);t.style.setProperty("transform",n)}}),[o]),E=(0,Gt.useCallback)((function(){y(!1)}),[]),b=(0,Gt.useCallback)((function(e){return e.ctrlKey||e.metaKey}),[]);return p?Gt.createElement("div",{className:cG()(hPe,t)},Gt.createElement(uM,{size:50}),Gt.createElement("img",{src:r,ref:d,className:pPe,style:{visibility:"hidden"}})):m?Gt.createElement("div",{className:cG()(hPe,!o&&n,t)},Gt.createElement(zNe.ZP,{inertia:!1,ref:l,onUpdate:_,tapZoomFactor:1,zoomOutFactor:1.4,draggableUnZoomed:!1,shouldInterceptWheel:b},Gt.createElement("img",{src:r,ref:d,style:{backgroundImage:"url(".concat(h,")"),opacity:c?"0":"1"},className:pPe,onLoad:E,decoding:"sync"}))):Gt.createElement("div",{className:cG()(hPe,"PhotoViewerItem_noZoom_RnhQy",t,g&&"PhotoViewerItem_loading_aXDZp")},Gt.createElement("img",{src:r,ref:d,style:{backgroundImage:g?"url(".concat(h,")"):""},onLoad:E,className:pPe,decoding:"sync",draggable:"false"}))},_Pe=function(e){var t=e.search;return(0,Do.parseUrl)(t).query},EPe=function(e){var t=_Pe(e).dialogId;return Number(t)};!function(e){e.NO_ACCESS="NO_ACCESS"}(vPe||(vPe={}));var bPe,SPe,TPe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},IPe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},NPe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},CPe=function(e){var t=e.goToPhotoUrl,n=e.onClose,r=function(e){var t=e.goToPhotoUrl,n=e.onClose,r=Gf(),o=r.blogUrl,a=r.postId,i=r.imageId,l=r.messageId,s=function(){var e=xf(),t=Gf().postId,n=EPe(e),r=_Pe(e).fromComment;return t===fn.ABOUT?fe.ABOUT_AUTHOR:r?fe.COMMENT:n?fe.DIALOG:fe.POST}(),c=(0,Vt.I0)(),u=(0,Gt.useRef)(null),d=(0,Vt.v9)(Hw),f=(0,Vt.v9)(Ww),m=(0,Vt.v9)(Tw),p=(0,Vt.v9)(Bw),h=Iw(p,m,a),v=(0,Vt.v9)(Nw),g=(0,Vt.v9)(ww),y=(0,Vt.v9)(mP),_=(0,Vt.v9)(EP),E=(0,Vt.v9)(UP),b=function(e){var t=e.postId,n=e.messageId,r=e.dialogueMessages,o=e.blogPost,a=e.blog,i=e.publishingCommentsList,l=xf(),s=TPe((0,Gt.useState)(null),2),c=s[0],u=s[1],d=(0,Gt.useMemo)((function(){var e=_Pe(l),s=[];if(EPe(l)&&n){var c=IPe([],TPe(r||[]),!1),u=null==c?void 0:c.find((function(e){var t,r;return e.id===Number(n)&&Boolean((null===(t=e.data)||void 0===t?void 0:t.length)||Boolean(null===(r=e.teaser)||void 0===r?void 0:r.length))}));s=IPe(IPe([],TPe((null==u?void 0:u.teaser)||[]),!1),TPe((null==u?void 0:u.data)||[]),!1)}else if(t===fn.ABOUT&&a&&Array.isArray(a.description))s=a.description;else if(o)if(e.fromComment&&"string"==typeof e.fromComment){var d=Number.parseInt(e.fromComment,10),f=Aa(o,i,(function(e){return e.intId===d}));f&&(s=f.data)}else Array.isArray(o.data)&&(s=o.data);return s.filter((function(e){return e.type===pe.IMAGE}))}),[t,n,r,o,a,i]);return(0,Gt.useEffect)((function(){o&&!o.hasAccess&&u(vPe.NO_ACCESS)}),[o]),{location:l,images:d,error:c,getActiveImageIndex:function(e){return d.findIndex((function(t){return t.id===e}))}}}({postId:a,messageId:l,dialogueMessages:E,dialogueActive:y,blog:d,blogPost:h,publishingCommentsList:g}),S=b.location,T=b.images,I=b.getActiveImageIndex,N=b.error,C=NPe((0,Gt.useState)(I(i)),2),w=C[0],O=C[1],A=NPe((0,Gt.useState)(w),2),P=A[0],L=A[1],R=NPe((0,Gt.useState)(T.length?T[0]:null),2),k=R[0],D=R[1],U=NPe((0,Gt.useState)(!0),2),B=U[0],x=U[1];x2(n);var M=tCe({initialMediaType:pe.IMAGE,currentActiveSlideIndex:P,openingSource:s}),F=M.handleStatOnKeyPress,G=M.handleStatOnNavigationButtonClick,H=M.handleStatOnTouchEnd,W=M.handleStatOnTransitionEnd;return(0,Gt.useEffect)((function(){O(I(i))}),[]),(0,Gt.useEffect)((function(){N&&n()}),[N]),(0,Gt.useEffect)((function(){var e,t=EPe(S)&&(!y||!_.isFetched),n=!(a!==fn.ABOUT||d&&f.isFetched),r=a&&a!==fn.ABOUT&&(!h||!v.isFetched);t?(e=EPe(S),c((0,dm.Ax)(Dh.action)({dialogId:e}))):n?c((0,dm.Ax)(Nm.action)({blogUrl:o})):r&&c((0,dm.Ax)(Cv.action)({blogUrl:o,postId:a})),bd.log.photoLayer.open()}),[]),(0,Gt.useEffect)((function(){var e=I(i);u.current.slideTo(e)}),[i]),{swiperRef:u,swipeIsEnabled:B,setSwipeIsEnabled:x,initialSlideIndex:w,list:T,currentActiveSlideIndex:P,setSwiperRef:function(e){return u.current=e},onTransitionEnd:function(e){var n=e.activeIndex;L(n);var r=T[n];k&&r&&k.id!==r.id&&(D(r),t(r.id)),W(e,pe.IMAGE)},onTouchEnd:H,onNavigationButtonClick:G,onKeyPress:F}}({goToPhotoUrl:t,onClose:n}),o=r.currentActiveSlideIndex,a=r.initialSlideIndex,i=r.list,l=r.swipeIsEnabled,s=r.setSwipeIsEnabled,c=void 0===s?Yt.noop:s,u=r.setSwiperRef,d=r.onTransitionEnd,f=r.onNavigationButtonClick,m=r.onKeyPress,p=r.onTouchEnd;return Gt.createElement(k2,{initialSlideIndex:a,currentActiveSlideIndex:o,totalSlides:i.length,setSwiperRef:u,onTransitionEnd:d,onClose:n,onTouchEnd:p,onKeyPress:m,onNavigationNext:f,onNavigationPrev:f},i.map((function(e,t){return Gt.createElement(C2.o5,{key:e.id,virtualIndex:t},Gt.createElement(yPe,{image:e,disableSwipeClassName:O2,disableSwipe:function(){return c(!1)},enableSwipe:function(){return c(!0)},isSwipeEnabled:l}))})))},wPe=function(){var e=function(){var e=Gf(),t=e.blogUrl,n=e.postId,r=e.messageId,o=xf(),a=Mf();return{onClose:function(){var e=_Pe(o),r=function(e){var t=cm(e),n=t.isPostPage,r=t.isStreamPage,o=t.isMessagesPage,a=t.isMediaPage,i=t.isBlogPage,l=t.isFeedPage,s=t.isSearchByBlogsPage,c=t.isSearchByPostsPage;return l?ir.MAIN:i?ir.BLOG:n?ir.BLOG_POST:o?ir.MESSAGES:c?ir.SEARCH_BY_POSTS:a?ir.MEDIA:r?ir.BLOG_STREAM:s?ir.SEARCH_BY_BLOGS:ir.BLOG}(o.pathname);e.from===b.EMAIL&&(r=ir.BLOG_POST),a((0,Yt.getParametrizedUrl)(r,{blogUrl:t,postId:n},da(e,"fromComment","comment","from")),{replace:!0,state:o.state})},goToPhotoUrl:function(e){var i=_Pe(o),l=cm(o.pathname),s=l.isFeedPage,c=l.isPostPage,u=s?ir.FEED_PHOTO_LAYER:i.from===b.MESSAGE?ir.BLOG_MESSAGE_PHOTO_LAYER:c?ir.BLOG_POST_PHOTO_LAYER:ir.BLOG_PHOTO_LAYER;a((0,Yt.getParametrizedUrl)(u,{blogUrl:t,postId:n,messageId:r,imageId:e},i),{replace:!1,state:o.state})}}}(),t=e.onClose,n=e.goToPhotoUrl;return Gt.createElement(PM,{isModal:!1,isHiddenClose:!0,classNames:{wrapper:"PhotoViewer_popupWrapper_aW5M2",block:"PhotoViewer_popupBlock_JCFTQ"}},Gt.createElement(CPe,{onClose:t,goToPhotoUrl:n}))};wPe.fetchActions=function(e){var t=e.params,n=e.query,r=t.blogUrl,o=t.postId,a=n.dialogId?Number(n.dialogId):null;return o!==fn.ABOUT?function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([function(){return Cv.action({blogUrl:r,postId:o})}],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(Boolean(a)&&[function(){return Dh.action({dialogId:a})}]),!1):[]},function(e){e.PRICE_REQUIRED="PRICE_REQUIRED",e.DESCRIPTION_REQUIRED="DESCRIPTION_REQUIRED",e.MIN_TARGET_PRICE="MIN_TARGET_PRICE",e.MAX_TARGET_PRICE="MAX_TARGET_PRICE",e.MAX_SUBSCRIBERS_TARGET_PRICE="MAX_SUBSCRIBERS_TARGET_PRICE",e.MIN_TARGET_SUBSCRIBERS_COUNT="MIN_TARGET_SUBSCRIBERS_COUNT",e.DUPLICATE_TARGET="DUPLICATE_TARGET"}(bPe||(bPe={})),function(e){e.DESCRIPTION="description",e.TARGET_SUM="targetSum"}(SPe||(SPe={}));var OPe=function(e){var t;return Sz.Ry().shape(((t={})[SPe.DESCRIPTION]=Sz.Z_().trim().required(bPe.DESCRIPTION_REQUIRED),t[SPe.TARGET_SUM]=e.targetType===Ye.MONEY?Sz.Rx().required(bPe.PRICE_REQUIRED).min(e.minMoneyTargetSum,bPe.MIN_TARGET_PRICE).max(e.maxMoneyTargetSum,bPe.MAX_TARGET_PRICE):Sz.Rx().required(bPe.PRICE_REQUIRED).min(1,bPe.MIN_TARGET_SUBSCRIBERS_COUNT).max(e.maxSubscribersTargetSum,bPe.MAX_SUBSCRIBERS_TARGET_PRICE),t))},APe=(0,Qr.getTranslation)("@boosty/common/containers.Targets.EditForm"),PPe=[bPe.MAX_TARGET_PRICE,bPe.MIN_TARGET_PRICE,bPe.PRICE_REQUIRED,bPe.DUPLICATE_TARGET],LPe=[bPe.DESCRIPTION_REQUIRED],RPe=function(e){var t=e.target,n=e.targetType,r=e.error,o=e.classNames,a=void 0===o?{}:o,i=e.maxPrice,l=e.onRemove,s=void 0===l?Yt.noop:l,c=nr(),u=c.target,d=u.minMoneyTargetSum,f=u.maxMoneyTargetSum,m=u.maxSubscribersTargetSum,p=c.currencies.default,h=(0,Gt.useRef)(null),v=n===Ye.MONEY,g=v?APe.targetSum.moneyLabel:APe.targetSum.subscribersLabel,y=v?APe.description.moneyPlaceholder:APe.description.subscribersPlaceholder,_=v?Vr({amount:Kr(1e4,p),currency:p,useGrouping:!0}):APe.targetSum.subscribersPlaceholder;(0,Gt.useEffect)((function(){t&&b(t)}),[t]),(0,Gt.useEffect)((function(){if(null==r?void 0:r.serverError){var e=String(r.serverError.error).toUpperCase();S(LPe,e)&&h.current.setFieldError(SPe.DESCRIPTION,e),S(PPe,e)&&h.current.setFieldError(SPe.TARGET_SUM,e)}}),[r]);var E=function(e){switch(e){case bPe.MAX_TARGET_PRICE:return(0,Qr.getParametrizedText)(APe.errors[e],{limit:(0,Yt.getFormattedNumber)(Vr({amount:f,currency:p}))});case bPe.MIN_TARGET_PRICE:return(0,Qr.getParametrizedText)(APe.errors[e],{limit:(0,Yt.getFormattedNumber)(Vr({amount:d,currency:p}))});case bPe.MIN_TARGET_SUBSCRIBERS_COUNT:return APe.errors[e];case bPe.MAX_SUBSCRIBERS_TARGET_PRICE:return(0,Qr.getParametrizedText)(APe.errors[e],{limit:(0,Yt.getFormattedNumber)(m)});case bPe.DESCRIPTION_REQUIRED:return APe.errors[e];case bPe.DUPLICATE_TARGET:return APe.errors[String(e).toUpperCase()];default:return null}},b=function(e){var t=e.description,n=e.targetSum;h.current.setFieldValue(SPe.DESCRIPTION,t),h.current.setFieldValue(SPe.TARGET_SUM,n)},S=function(e,t){return e.some((function(e){return e===t}))},T=function(){s()};return Gt.createElement(Gz.J9,{initialValues:{description:"",targetSum:0},innerRef:h,validateOnMount:!0,validationSchema:OPe({maxPrice:i,targetType:n,minMoneyTargetSum:d,maxMoneyTargetSum:f,maxSubscribersTargetSum:m}),onSubmit:function(t){var n=t.description,r=t.targetSum;e.onSubmit({description:n,targetSum:Number(String(r).replace(/\s/g,""))})}},(function(e){var n=e.handleSubmit,r=e.touched,o=e.errors;return Gt.createElement(Sx,{onSubmit:n},Gt.createElement(Ix,null,Gt.createElement(Gz.gN,{name:SPe.TARGET_SUM},(function(t){var n=t.field,a=n.value,i=n.onChange,l=n.onBlur,s=n.name,c=!r.targetSum||Ef(e,SPe.TARGET_SUM),u=c?null:E(o.targetSum);return Gt.createElement(Gt.Fragment,null,Gt.createElement(Zx,{name:s,value:a||"",mask:Nf({allowLeadingZeroes:!0,currency:null}),label:g,placeholder:_,onChange:i,onBlur:l,error:u,isValid:c}))}))),Gt.createElement(Ix,null,Gt.createElement(Gz.gN,{name:SPe.DESCRIPTION},(function(t){var n=t.field,a=n.value,i=n.onChange,l=n.onBlur,s=n.name,c=!r.description||Ef(e,SPe.DESCRIPTION),u=c?null:E(o.description);return Gt.createElement(Zx,{name:s,value:a,label:APe.description.label,placeholder:y,multiline:!0,withCounter:!0,limit:150,rows:6,onChange:i,onBlur:l,isValid:c,error:u})}))),Gt.createElement("div",{className:a.buttons},t?Gt.createElement(Gt.Fragment,null,Gt.createElement(FB,{type:"submit",className:a.saveButton},APe.save),Gt.createElement(HB,{className:cG()("EditForm_removeButton_jQUtF",a.removeButton),onClick:T,withIcon:!0},Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{glyph:hB.IT9,className:"EditForm_trashIcon_vP_i2"}),APe.delete))):Gt.createElement(FB,{type:"submit",className:a.saveButton},APe.create)))}))};const kPe="TargetTypeToggle_targetsType_ry7k8",DPe="TargetTypeToggle_targetsTypeSelected_z30yO";var UPe,BPe=(0,Qr.getTranslation)("@boosty/common/containers.Targets.TargetTypeToggle"),xPe=function(e){var t,n,r=e.targetType,o=e.onMoneyTypeClick,a=e.onSubscribersTypeClick,i=e.classNames,l=nr().locale===ce.RU;return Gt.createElement("div",{className:i.types},Gt.createElement("div",{className:cG()(i.selectedType,kPe,(t={},t[DPe]=r===Ye.SUBSCRIBERS,t)),onClick:a},Gt.createElement("div",{className:i.iconWrapperType},Gt.createElement("div",{className:"TargetTypeToggle_subscribersIcon_kuQoe"})),Gt.createElement("div",{className:i.selectorTextType},BPe.subscribersTargetExplain)),Gt.createElement("div",{className:cG()(i.selectedType,kPe,(n={},n[DPe]=r===Ye.MONEY,n)),onClick:o},Gt.createElement("div",{className:i.iconWrapperType},Gt.createElement("div",{className:cG()("TargetTypeToggle_moneyIcon_ckZZj",l?"TargetTypeToggle_moneyIconRub__lz1M":"TargetTypeToggle_moneyIconUsd_rKVU7")})),Gt.createElement("div",{className:i.selectorTextType},BPe.moneyTargetExplain)))},MPe=(0,Qr.getTranslation)("@boosty/common/containers.Targets.TargetAdd"),FPe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.onClose,o=nr(),a=o.donation.paymentLimits,i=o.currencies.default,l=a.maxPaymentSum[i],s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(Ye.SUBSCRIBERS),2),c=s[0],u=s[1],d=Gf().blogUrl,f=(0,Vt.I0)(),m=(0,Vt.v9)(uR);return(0,Gt.useEffect)((function(){m.isFetched&&r()}),[m]),Gt.createElement("div",{className:"TargetAdd_root_ETB2t"},Gt.createElement("div",{className:n.form},Gt.createElement("div",{className:"TargetAdd_targetAbout_yQseY"},(0,Qr.getParametrizedText)(MPe.about,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})),Gt.createElement(xPe,{targetType:c,onMoneyTypeClick:function(){u(Ye.MONEY)},onSubscribersTypeClick:function(){u(Ye.SUBSCRIBERS)},classNames:{types:n.formTypes,selectedType:n.formSelectedType,iconWrapperType:n.iconWrapperType,selectorTextType:n.selectorTextType}}),Gt.createElement(RPe,{maxPrice:l,error:m.error,onSubmit:function(e){var t=e.description,n=e.targetSum;c===Ye.MONEY?function(e,t){f(lh.action({blogUrl:d,description:e,targetSum:t}))}(t,n):c===Ye.SUBSCRIBERS&&function(e,t){f(sh.action({blogUrl:d,description:e,targetSum:t}))}(t,n)},targetType:c,classNames:{buttons:n.formButtons,saveButton:n.formSaveButton,removeButton:n.formRemoveButton}})))},GPe=(0,Qr.getTranslation)("@boosty/common/containers.Targets.TargetAdd.desktop"),HPe=function(){var e=Gf(),t=e.blogUrl,n=e.postId,r=e.mediaType,o=Mf(),a=function(){o(n?(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:t,postId:n}):r?(0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:t,mediaType:r}):(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:t}))};return Gt.createElement(PM,{classNames:{block:"TargetAdd_popup_jqH9V",close:"TargetAdd_close_dQERE",title:"TargetAdd_popupTitle_UmffB"},onClose:a,title:GPe.title},Gt.createElement(FPe,{onClose:a,classNames:{form:"TargetAdd_addTarget_SeO9f",formTypes:"TargetAdd_targetTypesWrapper_A9H9h",formSelectedType:"TargetAdd_targetsType_y3rHA",iconWrapperType:"TargetAdd_iconWrapper_vRBoa",selectorTextType:"TargetAdd_targetSelectorText_pq0ns",formButtons:"TargetAdd_buttons__aEwA"}}))},WPe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.onClose,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(null),2),a=o[0],i=o[1],l=Gf(),s=l.blogUrl,c=l.targetId,u=(0,Vt.I0)(),d=(0,Vt.v9)(cR),f=(0,Vt.v9)(uR),m=nr(),p=m.donation.paymentLimits,h=m.currencies.default,v=p.maxPaymentSum[h],g=function(){i(d.find((function(e){return e.id===Number(c)})))};return(0,Gt.useEffect)((function(){d?g():u((0,dm.Ax)(oh.action)({blogUrl:s,type:void 0}))}),[]),(0,Gt.useEffect)((function(){f.isFetched&&(g(),a&&r())}),[f.isFetched]),Gt.createElement("div",{className:"TargetEdit_root_E73kb"},Gt.createElement("div",{className:n.form},Gt.createElement(RPe,{maxPrice:v,error:f.error,onSubmit:function(e){!function(e){var t=e.description,n=e.targetSum;u(ch.action({description:t,targetSum:n,id:a.id}))}({description:e.description,targetSum:e.targetSum})},targetType:Ye.SUBSCRIBERS,target:a,onRemove:function(){u(uh.action({id:a.id}))},classNames:{buttons:n.formButtons,saveButton:n.formSaveButton,removeButton:n.formRemoveButton}})))},VPe=(0,Qr.getTranslation)("@boosty/common/containers.Targets.TargetEdit.desktop"),jPe=function(){var e=Gf(),t=e.blogUrl,n=e.postId,r=e.mediaType,o=Mf(),a=function(){o(n?(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:t,postId:n}):r?(0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:t,mediaType:r}):(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:t}))};return Gt.createElement(PM,{classNames:{block:"TargetEdit_popup_c3VqD",close:"TargetEdit_close_vUwxn",title:"TargetEdit_popupTitle_PcE_6"},onClose:a,title:VPe.title},Gt.createElement(WPe,{onClose:a,classNames:{form:"TargetEdit_addTarget_S4Zsk",formButtons:"TargetEdit_buttons_jPaC5",formSaveButton:"TargetEdit_saveButton_UhGBA",formRemoveButton:"TargetEdit_removeButton_zAWz5"}}))},zPe=(0,Qr.getTranslation)("@boosty/common/components.Agents.components.AgentRightsList"),YPe=[{icon:hB.tCy,getDescription:function(){return zPe.view_posts}},{icon:hB.BLL,getDescription:function(){return zPe.edit_settings}},{icon:hB.qSP,getDescription:function(){return zPe.edit_subscription_levels}},{icon:hB.bQz,getDescription:function(){return zPe.edit_posts}},{icon:hB.f7e,getDescription:function(){return zPe.edit_comments}},{icon:hB.Ypn,getDescription:function(){return zPe.edit_blacklist}}],KPe=function(){return Gt.createElement("div",{className:"AgentRightsList_root_mSOSi"},YPe.map((function(e,t){return Gt.createElement("div",{key:t,className:"AgentRightsList_description_LHztb"},Gt.createElement("div",{className:"AgentRightsList_iconWrapper_nvdkO"},Gt.createElement(pB,{glyph:e.icon,className:"AgentRightsList_icon_xdqIF"})),Gt.createElement("div",{className:"AgentRightsList_descriptionText_It2cm"},e.getDescription()))})))},qPe=function(e){var t=e.text;return Gt.createElement("div",{className:"AgentRightsNotice_root_Y9ZXP"},Gt.createElement("div",{className:"AgentRightsNotice_iconWrapper_qwKL1"},Gt.createElement(pB,{glyph:hB.Gc9,className:"AgentRightsNotice_icon_D0Cxw"})),Gt.createElement("div",{className:"AgentRightsNotice_text_Dq4tI"},t))},XPe=function(e){var t=e.title;return Gt.createElement("div",{className:"AgentRightsTitle_root_AOniS"},t)},QPe=(0,Qr.getTranslation)("@boosty/common/components.Agents.components.AssignAgentForm"),JPe=function(){var e=nr().isMobile,t=function(){var e=(0,Vt.I0)(),t=(0,Vt.v9)(XO).blogUrl,n=vH((0,Gt.useState)(""),2),r=n[0],o=n[1],a=vH((0,Gt.useState)(""),2),i=a[0],l=a[1],s=vH((0,Gt.useState)(null),2),c=s[0],u=s[1],d=vH((0,Gt.useState)(!1),2),f=d[0],m=d[1],p=vH((0,Gt.useState)(!1),2),h=p[0],v=p[1],g=vH((0,Gt.useState)(null),2),y=g[0],_=g[1];return(0,Gt.useEffect)((function(){i&&!c&&pH(void 0,void 0,void 0,(function(){var t;return hH(this,(function(n){switch(n.label){case 0:v(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e((0,dm.Ax)(dy.action)({blogUrl:i}))];case 2:return(null==(t=n.sent())?void 0:t.id)&&u(t.id),[3,4];case 3:return n.sent().serverError.error===qG.BLOG_NOT_FOUND?_(gH[qG.BLOG_NOT_FOUND]):_(gH[qG.UNKNOWN_ERROR]),v(!1),[3,4];case 4:return[2]}}))}))}),[i,c]),(0,Gt.useEffect)((function(){c&&!f&&pH(void 0,void 0,void 0,(function(){return hH(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e((0,dm.Ax)(vm.action)({blogUrl:t,userId:c}))];case 1:return n.sent()&&m(!0),[3,3];case 2:return n.sent().serverError.error===qG.AGENT_ALREADY_EXISTS?_(gH[qG.AGENT_ALREADY_EXISTS]):_(gH[qG.UNKNOWN_ERROR]),[3,3];case 3:return v(!1),[2]}}))}))}),[c,f]),(0,Gt.useEffect)((function(){f&&e((0,dm.Ax)(pm.action)({blogUrl:t}))}),[f]),{agentBlogPathname:r,error:y,isLoading:h,isAgentAssigned:f,onAssignAgent:function(){var e,t,n=(e=r,t=nr().hosts.main,e.replace("https://","").replace(t,"").replace("/","").split("/")[0]);n&&l(n)},onAgentBlogPathnameChange:function(e){o(e),l(null),u(null),v(!1),_(null)}}}(),n=t.agentBlogPathname,r=t.error,o=t.isAgentAssigned,a=t.isLoading,i=t.onAssignAgent,l=t.onAgentBlogPathnameChange,s=function(){var e;return Gt.createElement(zB,{isDisabled:a||o,className:cG()("AssignAgentForm_button_OwbXt",(e={},e.AssignAgentForm_buttonWhenAgentAssigned_Bg_6h=o,e.AssignAgentForm_opaque_LbgZx=a,e)),onClick:i},o?Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{glyph:hB.NOm,className:"AssignAgentForm_buttonIcon_bUBoL"}),QPe.assigned):QPe.assign)};return Gt.createElement(Zx,{error:r,disabled:o,value:n,label:QPe.label,placeholder:(0,Qr.getParametrizedText)(QPe.placeholder,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized}),bottomElement:e&&s(),rightElement:!e&&s(),description:(0,Qr.getParametrizedText)(QPe.description,{hostMain:nr().projectName.hostMain}),className:"AssignAgentForm_root_LOmaW",classNameInput:"AssignAgentForm_input_USrZu",onChange:function(e){l(e.target.value)},onKeyDown:function(e){e.key===ae.ENTER&&i()}})},ZPe=(0,Qr.getTranslation)("@boosty/common/components.Agents.AssignAgent"),$Pe=function(){return Gt.createElement("div",{className:"AssignAgent_root_BWNEF"},Gt.createElement(XPe,{title:ZPe.title}),Gt.createElement(KPe,null),Gt.createElement(JPe,null),Gt.createElement(qPe,{text:ZPe.notice}))},eLe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.desktop.components.SettingsAssignAgent"),tLe=(0,Qr.getTranslation)("@boosty/common/components.Agents.ShowAgentRights"),nLe=function(){return Gt.createElement("div",{className:"ShowAgentRights_root_JotQs"},Gt.createElement(XPe,{title:tLe.title}),Gt.createElement(KPe,null),Gt.createElement(qPe,{text:tLe.notice}))},rLe=(0,Qr.getTranslation)("@boosty/common/containers.Settings.desktop.components.SettingsShowAgentRights"),oLe=function(){var e=xf().pathname,t=Uf(ga(),e)[0],n=_f(t.route.path,[ir.BLOG_ACCEPT_GIFT_BIND_CARD,ir.BLOG_TRIAL_ACTIVATION_BIND_CARD,ir.BLOG_POST_TRIAL_ACTIVATION_BIND_CARD,ir.BLOG_MEDIA_TRIAL_ACTIVATION_BIND_CARD]);return Gt.createElement(mK,{onBindSuccess:function(){zf(i.HAS_CARD_BINDS,"true")},shouldCloseOnSuccess:n})};!function(e){e.FORM="FORM",e.CREATED="CREATED",e.QR="QR"}(UPe||(UPe={}));var aLe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},iLe=UPe.FORM,lLe={},sLe=(0,Gt.createContext)(lLe),cLe=(0,Gt.createContext)(iLe),uLe=(0,Gt.createContext)(null),dLe=function(e){var t=e.children,n=e.initialStep,r=void 0===n?UPe.FORM:n,o=aLe((0,Gt.useState)(lLe),2),a=o[0],i=o[1],l=aLe((0,Gt.useState)(r),2),s=l[0],c=l[1],u=(0,Gt.useMemo)((function(){return{setPromoData:i,setStep:c}}),[]);return Gt.createElement(uLe.Provider,{value:u},Gt.createElement(cLe.Provider,{value:s},Gt.createElement(sLe.Provider,{value:a},t)))},fLe=function(){return(0,Gt.useContext)(sLe)},mLe=function(){return(0,Gt.useContext)(uLe)},pLe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.PromoNew.common.PromoNewCreated.components.PromotionInfoBlock"),hLe=function(e){var t=e.promotion,n=Boolean(t.endTime||t.count.maxActivation);return Gt.createElement("section",{className:cG()("PromotionInfoBlock_root_wxSlk",Ua(t)?"PromotionInfoBlock_discount_OlbAu":"PromotionInfoBlock_trial_OyZqI")},Gt.createElement("p",{className:"PromotionInfoBlock_title_prpYc"},Gt.createElement("div",{className:"PromotionInfoBlock_iconWrapper_J2Ul4"},function(e){return Ua(e)?Gt.createElement(pB,{glyph:hB.rqj,className:"PromotionInfoBlock_iconPercent_KYKXa"}):ka(e)?Gt.createElement(pB,{glyph:hB.Mi4,className:"PromotionInfoBlock_iconCalendar_RaGa6"}):Da(e)?Gt.createElement(pB,{glyph:hB.HcZ,className:"PromotionInfoBlock_iconCalendarLink_MH7WJ"}):null}(t)),function(e){return Ua(e)?(0,Qr.getParametrizedText)(pLe.discountTitle,{value:e.discount.percent}):ka(e)||Da(e)?(0,Qr.getParametrizedText)(qr(pLe.trialTitle,e.trial.days),{value:e.trial.days}):"Invalid promotion type"}(t)),n&&Gt.createElement("p",{className:"PromotionInfoBlock_restrictions_pzBNZ"},function(e){var t=[];return e.count.maxActivation&&t.push((0,Qr.getParametrizedText)(qr(pLe.maxActivations,e.count.maxActivation),{value:e.count.maxActivation})),e.endTime&&t.push((0,Qr.getParametrizedText)(pLe.endTimeTill,{value:go(e.endTime,"dd/MM/yyyy/HH/mm")})),t.join(" · ")}(t)))},vLe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.PromoNew.common.PromoNewCreated.components.PromotionPrivate"),gLe=function(e){var t=e.promotion,n=jG().showAlert,r=mLe().setStep,o=Gf().blogUrl,a=Xwe({blogUrl:o,promotion:t}),i=function(){n({type:p.SUCCESS,text:vLe.copied})};return Gt.createElement(Gt.Fragment,null,Gt.createElement("p",{className:"PromotionPrivate_description_tvCcO"},Gt.createElement(pB,{className:"PromotionPrivate_lockedIcon_R2tbR",glyph:hB.Wal})," ",vLe.linkOnly),Gt.createElement("div",{className:"PromotionPrivate_copyInputWrapper_qkHDS"},Gt.createElement(c$.CopyToClipboard,{text:a,onCopy:i},Gt.createElement("div",{className:"PromotionPrivate_inputCopyIconWrapper_jLZkh"},Gt.createElement(pB,{glyph:hB.vUr,className:"PromotionPrivate_inputCopyIcon_Mk4Ns"}))),Gt.createElement("input",{type:"text",value:a,className:"PromotionPrivate_copyInput_QqUca",readOnly:!0})),Gt.createElement("div",{className:"PromotionPrivate_buttons_yLDx3"},Gt.createElement(QCe,{classNames:{button:"PromotionPrivate_copyButton_t159D"},onClick:function(){Fr(a,i)}},Gt.createElement(pB,{className:"PromotionPrivate_buttonCopyIcon_p2X0J",glyph:hB.vUr}),vLe.copy),Gt.createElement(HB,{className:"PromotionPrivate_qrButton_TbzXf",onClick:function(){r(UPe.QR)}},Gt.createElement(pB,{glyph:hB.n1O,className:"PromotionPrivate_qrIcon_xPAjZ"})," ",vLe.qr)))},yLe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.PromoNew.common.PromoNewCreated"),_Le=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.onCancel,o=fLe().promotionData;return Gt.createElement("section",{className:cG()("PromoNewCreated_root_D9P3m",n.root)},Gt.createElement("div",{className:"PromoNewCreated_checkWrapper_glk2G"},Gt.createElement(pB,{glyph:hB.ENJ,className:"PromoNewCreated_checkIcon_ewPqn"})),Gt.createElement("p",{className:"PromoNewCreated_title_sAh8s"},yLe.title),Gt.createElement(hLe,{promotion:o}),Da(o)?Gt.createElement(gLe,{promotion:o}):Gt.createElement("div",{className:"PromoNewCreated_buttonWrapper_Ja9oX"},Gt.createElement(QCe,{onClick:r,classNames:{button:"PromoNewCreated_cancelButton_TrFUa"}},yLe.cancel)))},ELe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.PromoNew.common.PromoNewForm.components.MinLevelPriceNote"),bLe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.onClick,o=nr(),a=o.promo.newPromoFormConfig.discountMinLevelPrice,i=o.currencies.default,l=(0,Qr.getParametrizedText)(ELe.text,{minPrice:Vr({amount:a,currency:i})}),s=function(){r()};return Gt.createElement(PG,{type:"error",title:ELe.title,classNames:{root:n.root},text:Gt.createElement("span",null,(0,Qr.getReactText)(l,{Link:function(e){return Gt.createElement(VB,{className:n.button,onClick:s},e.text)}}))})};const SLe={hint:"PromoNewFormField_hint_VRQsH",flagField:"PromoNewFormField_flagField_JHHfJ",labelInlineText:"PromoNewFormField_labelInlineText_WTA9d",toggleWrapper:"PromoNewFormField_toggleWrapper_o9w9y",labelWrapper:"PromoNewFormField_labelWrapper_dG0Ti",hintTooltip:"PromoNewFormField_hintTooltip_rUNCZ",icon:"PromoNewFormField_icon_xOnPU",errorCaption:"PromoNewFormField_errorCaption_BgNMp",noteCaption:"PromoNewFormField_noteCaption_mR5zp",textAreaContainer:"PromoNewFormField_textAreaContainer_Ztz3z",textAreaCounter:"PromoNewFormField_textAreaCounter_b5e4J",toggleLabelText:"PromoNewFormField_toggleLabelText_Q_qzW",textAreaLabel:"PromoNewFormField_textAreaLabel_V7VjV",fadeIn:"PromoNewFormField_fadeIn_GUR4S"};var TLe=function(e){var t=(0,Gz.u6)(),n=t.isSubmitting,r=t.setFieldValue,o=e.name,a=e.maxLength,i=Uwe(o);return Gt.createElement(Ix,{isSmallIndent:!0,className:SLe.field},Gt.createElement(Gz.gN,{name:o},(function(e){var l,s=e.field.value,c=Rwe(o,t),u=n;return Gt.createElement(Zx,{multiline:!0,isValid:!c,withCounter:!0,limit:a,error:c,className:SLe.textAreaContainer,classNameInput:cG()((l={},l[SLe.disabled]=u,l)),classNameErrorCaption:SLe.errorCaption,classNameCounter:SLe.textAreaCounter,disabled:u,placeholder:Dwe(o),value:s,onChange:function(e){var t=e.target.value;r(o,t)},label:Gt.createElement("span",{className:SLe.textAreaLabel},kwe(o),i&&Gt.createElement(eG,{classNames:{block:SLe.hint,tooltip:SLe.hintTooltip}},Gt.createElement("div",{className:SLe.tooltipContent},i))),isErrorInFlow:!0,rows:3})})))},ILe=function(e){var t=(0,Gz.u6)(),n=t.isSubmitting,r=t.setFieldValue,o=e.name;return Gt.createElement(Ix,{isSmallIndent:!0,className:SLe.field},Gt.createElement(Gz.gN,{name:o},(function(e){var a=e.field.value,i=Rwe(o,t),l=n;return Gt.createElement(FG,{value:a,error:i,classNames:{errorCaption:SLe.errorCaption,noteCaption:SLe.noteCaption},isDisabled:l,onAccept:function(e){r(o,e)},label:kwe(o),isErrorInFlow:!0})})))},NLe=function(e){var t=(0,Gz.u6)(),n=t.isSubmitting,r=t.setFieldValue,o=e.name,a=nr().isMobile;return Gt.createElement(Ix,{isSmallIndent:!0,className:SLe.flagField},Gt.createElement(Gz.gN,{name:o},(function(e){var t=e.field.value,i=n;return Gt.createElement(Gt.Fragment,null,Gt.createElement(SF,{checked:t,isDisabled:i,label:Gt.createElement("div",{className:SLe.labelWrapper},Gt.createElement("span",{className:SLe.labelInlineText},kwe(o)),Gt.createElement(eG,{classNames:{block:SLe.hint,tooltip:cG()(SLe.hintTooltip)}},Gt.createElement("div",{className:SLe.tooltipContent},Uwe(o)))),onToggle:function(e){r(o,e)},size:a?dF.SMALL:dF.MIDDLE,togglePosition:"left",classNames:{wrapper:SLe.toggleWrapper,labelText:SLe.toggleLabelText}}))})))},CLe=function(e){var t=(0,Gz.u6)(),n=t.isSubmitting,r=t.setFieldValue,o=e.name;return Gt.createElement(Ix,{isSmallIndent:!0,className:SLe.field},Gt.createElement(Gz.gN,{name:o},(function(e){var a,i=e.field.value,l=Rwe(o,t),s=n;return Gt.createElement(Zx,{isValid:!l,error:l,className:SLe.numberInput,classNameInput:cG()((a={},a[SLe.disabled]=s,a)),classNameErrorCaption:SLe.errorCaption,disabled:s,placeholder:Dwe(o),value:void 0!==i?String(i):"",onChange:function(e){var t=e.target.value;r(o,$a(t)||void 0)},label:kwe(o),type:"number",isErrorInFlow:!0})})))},wLe=function(e){var t=(0,Gz.u6)(),n=t.setFieldValue,r=t.isSubmitting,o=e.name,a=e.options,i=e.isDisabled;return Gt.createElement(Ix,{isSmallIndent:!0,className:SLe.field},Gt.createElement(Gz.gN,{name:o},(function(e){var l=e.field.value,s=Rwe(o,t),c=function(e,t){return e.find((function(e){return t===e.value}))}(a,l);return Gt.createElement(lF,{options:a,selected:c,label:kwe(o),placeholder:Dwe(o),error:s,isDisabled:i||r,onSelect:function(e){n(o,e.value)},isErrorInFlow:!0,classNames:{errorCaption:SLe.errorCaption}})})))};const OLe={optionsContainer:"SubscriptionLevelField_optionsContainer_c1WQE",checkbox:"SubscriptionLevelField_checkbox_thwTg",selectOption:"SubscriptionLevelField_selectOption_cC_v5",labelRoot:"SubscriptionLevelField_labelRoot_B5cZU",title:"SubscriptionLevelField_title_iUEHk",description:"SubscriptionLevelField_description_CN_oV",fadeIn:"SubscriptionLevelField_fadeIn_gPqDE"};function ALe(){var e=(0,Gz.u6)(),t=e.setFieldValue,n=e.isSubmitting,r=ywe.ACCESS_SUBSCRIBERS_TYPES,o=(0,Gz.u6)(),a=(0,Gt.useMemo)(Mwe,[]);return Gt.createElement(Ix,{isSmallIndent:!0,className:OLe.select},Gt.createElement(Gz.gN,{name:r},(function(e){var i=e.field.value,l=Rwe(r,o),s=a.filter((function(e){return null==i?void 0:i.includes(e.value)}));return Gt.createElement(lF,{isMulti:!0,options:a,selected:s,label:kwe(r),placeholder:Dwe(r),error:l,onSelect:function(e){t(r,e.map((function(e){return e.value})))},isDisabled:n,classNames:{options:OLe.optionsContainer,option:OLe.selectOption,optionCheckBoxLabel:OLe.checkbox},Component:function(e){var t=e.label,n=e.valueObject;return Gt.createElement("div",{className:OLe.labelRoot},Gt.createElement("div",{className:OLe.title},t),Gt.createElement("div",{className:OLe.description},n.description))},isErrorInFlow:!0})})))}var PLe=function(){return PLe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},PLe.apply(this,arguments)},LLe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.PromoNew.common.PromoNewForm"),RLe=function(){var e,t,n,r=nr().promo.newPromoFormConfig,o=r.discountPercent,a=r.trialDurationInDays,i=r.maxActivationsCount;return(e={})[ywe.DISCOUNT_PERCENT]=o.default,e[ywe.TRIAL_DURATION_IN_DAYS]=a.default,e[ywe.PROMO_END_TIME]=(t=nr().promo.newPromoFormConfig.promoDuration,n=new Date(Date.now()),"hours"===t.defaultDuration[1]?n=(0,Iwe.Z)(n,t.defaultDuration[0]):"days"===t.defaultDuration[1]&&((n=(0,Nwe.Z)(n,t.defaultDuration[0]+1)).setHours(0),n.setMinutes(0)),n.setSeconds(0),n.setMilliseconds(0),n),e[ywe.MAX_ACTIVATION_COUNT]=i.default,e[ywe.IS_DURATION_LIMITED]=!1,e[ywe.IS_ACTIVATION_COUNT_LIMITED]=!1,e}(),kLe=function(e){var t=e.onCancel,n=Gf().blogUrl,r=(0,Gt.useRef)(),o=jG().showAlert,a=(0,Vt.I0)(),i=mLe(),l=i.setStep,s=i.setPromoData,c=(0,Vt.v9)(Hw);(0,Gt.useEffect)((function(){c&&c.blogUrl===n||a(Nm({blogUrl:n}))}),[c,n]);var u=(0,Gt.useMemo)((function(){return xwe.filter((function(e){var t;return Boolean(null===(t=null==c?void 0:c.allowedPromoTypes)||void 0===t?void 0:t.includes(e.value))}))}),[c]),d=nr().promo.newPromoFormConfig.descriptionLength,f=iB({blogUrl:n,showDeleted:!1,showFree:!1}).subscriptionLevels,m=void 0===f?[]:f,h=(0,Gt.useMemo)((function(){return function(e){return e.map((function(e){return{label:e.name,value:e.id}}))}(m)}),[m]),v=gi(c),g=function(){var e;null===(e=r.current)||void 0===e||e.setFieldValue(ywe.PROMOTION_TYPE,bt.TRIAL_PRIVATE)},y=Mf(),_=(0,Gt.useMemo)((function(){return function(e){var t,n=nr().promo.newPromoFormConfig,r=n.discountPercent,o=n.descriptionLength,a=n.trialDurationInDays,i=n.promoDuration,l=n.discountMinLevelPrice,s=e.subscriptionLevels;return Sz.Ry().shape(((t={})[ywe.PROMOTION_TYPE]=Sz.nK().oneOf(Object.values(bt)).required(_we.FIELD_REQUIRED),t[ywe.SUBSCRIPTION_LEVEL]=Sz.Rx().test({message:_we.EMPTY_LEVELS,test:function(){return s.length>0}}).required(_we.FIELD_REQUIRED).test({message:_we.PROMO_ALREADY_EXISTS_AT_LEVEL,test:function(e,t){var n=s.find((function(t){return t.id===e}));if(!n)return!1;var r,o=t.parent;return!((Gwe(r=o)||Fwe(r))&&n.promos&&n.promos.length>0)}}).test({message:_we.DISCOUNT_MIN_LEVEL_PRICE_REACHED,test:function(e,t){var n=s.find((function(t){return t.id===e}));return!(!n||t.parent[ywe.PROMOTION_TYPE]===bt.DISCOUNT&&n.price<l)}}),t[ywe.ACCESS_SUBSCRIBERS_TYPES]=Sz.IX().required(_we.SUBSCRIBERS_TYPE_REQUIRED).min(1,_we.SUBSCRIBERS_TYPE_REQUIRED),t[ywe.TRIAL_DURATION_IN_DAYS]=Sz.Rx().when(ywe.PROMOTION_TYPE,{is:function(e){return e===bt.TRIAL_PRIVATE||e===bt.TRIAL},then:function(e){return e.required(_we.FIELD_REQUIRED).min(a.min,_we.TRIAL_DURATION_TOO_LOW).max(a.max,_we.TRIAL_DURATION_TOO_BIG)}}),t[ywe.DISCOUNT_PERCENT]=Sz.Rx().when(ywe.PROMOTION_TYPE,{is:function(e){return e===bt.DISCOUNT},then:function(e){return e.required(_we.FIELD_REQUIRED).min(r.min,_we.DISCOUNT_PERCENT_TOO_LOW).max(r.max,_we.DISCOUNT_PERCENT_TOO_BIG)}}),t[ywe.DESCRIPTION]=Sz.Z_().max(o.max,_we.DESCRIPTION_TOO_BIG),t[ywe.IS_DURATION_LIMITED]=Sz.Xg(),t[ywe.IS_ACTIVATION_COUNT_LIMITED]=Sz.Xg(),t[ywe.MAX_ACTIVATION_COUNT]=Sz.Rx().when(ywe.IS_ACTIVATION_COUNT_LIMITED,{is:!0,then:function(e){return e.required(_we.FIELD_REQUIRED).positive(_we.FIELD_REQUIRED)}}),t[ywe.PROMO_END_TIME]=Sz.hT().when(ywe.IS_DURATION_LIMITED,{is:!0,then:function(e){return e.required(_we.FIELD_REQUIRED).when(ywe.PROMO_END_TIME,{is:function(e){return(null==e?void 0:e.valueOf())<=Date.now()},then:function(e){return e.min(new Date,_we.PROMO_END_TIME_CANNOT_BE_IN_PAST)},otherwise:function(e){return e.min((0,Iwe.Z)(new Date,i.minHours),_we.PROMO_DURATION_TOO_LOW)}})}}),t))}({subscriptionLevels:m})}),[m]);return Gt.createElement(Gz.J9,{initialValues:RLe,onSubmit:function(e){return void 0,void 0,r=function(){var t,r,i,c;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(u){switch(u.label){case 0:t=e[ywe.ACCESS_SUBSCRIBERS_TYPES].reduce((function(e,t){return t===Tt.NEW_SUBSCRIBERS&&(e.accessNewSubscriber=!0),t===Tt.OLD_PAID_SUBSCRIBERS&&(e.accessOldPaidSubscriber=!0),t===Tt.OTHER_LEVEL_SUBSCRIBERS&&(e.accessOtherLevelSubscriber=!0),e}),{accessNewSubscriber:!1,accessOldPaidSubscriber:!1,accessOtherLevelSubscriber:!1}),r=PLe({type:e[ywe.PROMOTION_TYPE],levelId:e[ywe.SUBSCRIPTION_LEVEL],maxActivationCount:Wwe(e)?e[ywe.MAX_ACTIVATION_COUNT]:void 0,discountPercent:Fwe(e)?e[ywe.DISCOUNT_PERCENT]:void 0,trialDurationInDays:Hwe(e)?e[ywe.TRIAL_DURATION_IN_DAYS]:void 0,endTime:Vwe(e)?e[ywe.PROMO_END_TIME]:void 0,description:e[ywe.DESCRIPTION]},t),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,a((0,dm.Ax)(nS.action)({blogUrl:n,data:r}))];case 2:return i=u.sent().promo,s({promotionData:i,levelId:r.levelId}),a(lS(Ba)),a(rS({blogUrl:n,filter:Ba})),l(UPe.CREATED),[3,4];case 3:return c=u.sent(),ho.error("FAILED TO CREATE NEW PROMO: ",c),o({type:p.ERROR,text:LLe.creatingError}),[3,4];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function o(e){try{i(r.next(e))}catch(e){n(e)}}function a(e){try{i(r.throw(e))}catch(e){n(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}));var t,r},validationSchema:_,innerRef:r,validateOnMount:!0},(function(e){var r=e.values,o=e.isSubmitting;return Gt.createElement(Sx,{onSubmit:e.handleSubmit,className:cG()(wwe.root)},!v&&c&&Gt.createElement(PG,{type:"error",title:LLe.notAllowed,classNames:{root:wwe.noteError}}),Gt.createElement(wLe,{name:ywe.PROMOTION_TYPE,options:v?u:xwe}),Gt.createElement(wLe,{name:ywe.SUBSCRIPTION_LEVEL,options:h,isDisabled:e.errors[ywe.SUBSCRIPTION_LEVEL]===_we.EMPTY_LEVELS}),e.errors[ywe.SUBSCRIPTION_LEVEL]===_we.PROMO_ALREADY_EXISTS_AT_LEVEL&&Gt.createElement(PG,{type:"error",title:LLe.promoExistsError.title,classNames:{root:wwe.noteError},text:Gt.createElement("span",null,(0,Qr.getReactText)(LLe.promoExistsError.text,{Link:function(e){var t=e.text;return Gt.createElement(VB,{onClick:g,className:wwe.noteTextLink},t)}}))}),e.errors[ywe.SUBSCRIPTION_LEVEL]===_we.DISCOUNT_MIN_LEVEL_PRICE_REACHED&&Gt.createElement(bLe,{classNames:{root:wwe.noteError,button:wwe.noteTextLink},onClick:function(){return e=r.subscriptionLevel,void y((0,Yt.getParametrizedUrl)(ir.BLOG_SUBSCRIPTION_LEVELS_EDIT,{blogUrl:n,levelId:e}));var e}}),Fwe(r)&&Gt.createElement(CLe,{name:ywe.DISCOUNT_PERCENT}),Hwe(r)&&Gt.createElement(CLe,{name:ywe.TRIAL_DURATION_IN_DAYS}),Gt.createElement(ALe,null),Gt.createElement(NLe,{name:ywe.IS_ACTIVATION_COUNT_LIMITED}),Wwe(r)&&Gt.createElement(CLe,{name:ywe.MAX_ACTIVATION_COUNT}),Gt.createElement(NLe,{name:ywe.IS_DURATION_LIMITED}),Vwe(r)&&Gt.createElement(ILe,{name:ywe.PROMO_END_TIME}),Gt.createElement(TLe,{name:ywe.DESCRIPTION,maxLength:d.max}),Gt.createElement("div",{className:wwe.buttons},Gt.createElement(FB,{isDisabled:o||!v,type:"submit",className:cG()(wwe.saveButton)},LLe.create),Gt.createElement(HB,{className:cG()(wwe.cancelButton),onClick:t},LLe.cancel)))}))},DLe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.PromoNew.common.PromoNewQr"),ULe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=Gf().blogUrl,o=fLe().promotionData,a=(0,Gt.useRef)(Math.random().toString()).current,i=Da(o)&&Xwe({blogUrl:r,promotion:o});return Gt.createElement("section",{className:cG()("PromoNewQr_root_Nbbsa",n.root)},Gt.createElement("p",{className:"PromoNewQr_title_k6PPH"},DLe.title),Gt.createElement("p",{className:"PromoNewQr_description_FLfiR"},DLe.description),Gt.createElement("div",{className:"PromoNewQr_qrWrapper_7ISi2"},Gt.createElement("div",{className:"PromoNewQr_qrInner_ECjXk"},Gt.createElement(R4,{text:i,size:200,id:a,margin:3}))),Gt.createElement(HB,{className:"PromoNewQr_button_xpyGQ",onClick:function(){var e=document.createElement("a");e.download="".concat(r,"-promo.png");var t=document.getElementById(a);t&&(e.href=t.toDataURL(),e.click())}},Gt.createElement(pB,{glyph:pk.DjJ,className:"PromoNewQr_icon_LIzMs"}),DLe.download))};const BLe={root:"PromoNewView_root_XQIxg",title:"PromoNewView_title_ddlzN",backButton:"PromoNewView_backButton_DbRPx",backIcon:"PromoNewView_backIcon_It4mF",createdPopup:"PromoNewView_createdPopup_xC28_",fadeIn:"PromoNewView_fadeIn_WNizm"};var xLe,MLe,FLe=(0,Qr.getTranslation)("@boosty/common/containers.Promo.PromoNew.desktop.components.PromoNewView"),GLe=function(e){var t=e.onClose,n=(0,Gt.useContext)(cLe),r=mLe().setStep,o=n===UPe.FORM?FLe.createTitle:void 0;return Gt.createElement(PM,{title:o,classNames:{root:n===UPe.CREATED&&BLe.createdPopup,title:BLe.title,content:BLe.content},onClose:t},Gt.createElement("div",{className:BLe.root},n===UPe.CREATED?Gt.createElement(_Le,{onCancel:t}):n===UPe.QR?Gt.createElement(Gt.Fragment,null,Gt.createElement("button",{className:BLe.backButton,onClick:function(){return r(UPe.CREATED)}},Gt.createElement(pB,{glyph:pk.WTy,className:BLe.backIcon})),Gt.createElement(ULe,null)):Gt.createElement(kLe,{onCancel:t})))};!function(e){e.START="START",e.ERROR="ERROR",e.SUCCESS="SUCCESS",e.LOADING="LOADING",e.PROCESSING="PROCESSING"}(xLe||(xLe={})),function(e){e.TODAY="TODAY",e.WEEK="WEEK",e.CURRENT_MONTH="CURRENT_MONTH",e.LAST_MONTH="LAST_MONTH",e.ALL_TIME="ALL_TIME",e.SELECT_RANGE="SELECT_RANGE"}(MLe||(MLe={}));var HLe=(0,Qr.getTranslation)("@boosty/common/containers.ExportStat.components.ErrorStep"),WLe=function(e){var t=e.onNavigateBack;return Gt.createElement("div",null,Gt.createElement("div",{className:"ErrorStep_image_RsXCV"}),Gt.createElement("div",{className:"ErrorStep_footer_JvhyO"},Gt.createElement("div",null,HLe.firstSentence),Gt.createElement("div",{className:"ErrorStep_greyText_eQ0Pr"},(0,Qr.getReactText)(HLe.secondSentence,{Link:function(e){var n=e.text;return Gt.createElement("span",{onClick:t,className:"ErrorStep_link_eNESS"},n)}}))))},VLe=(0,Qr.getTranslation)("@boosty/common/containers.ExportStat.components.LoadingStep"),jLe=function(e){var t=e.isProcessing;return Gt.createElement("div",null,Gt.createElement("div",{className:"LoadingStep_spinner_LV5X6"},Gt.createElement(uM,{size:80})),Gt.createElement("div",{className:"LoadingStep_footer_dDQSE"},(0,Qr.getReactText)(t?VLe.processing:VLe.loading,{Black:function(e){var t=e.text;return Gt.createElement("span",{className:"LoadingStep_darkText_Sp2Af"},t)}})))};function zLe(e,t,n){return go(No(e),n?t?"dd/MMMM/yyyy":"dd/MMMM":"dd/MM/yy")}function YLe(e){var t=e.from,n=e.hasYear,r=e.isMonthWord,o=e.to||new Date;return t?t.toLocaleDateString()===o.toLocaleDateString()?zLe(t,n,r):[t,o].map((function(e){return zLe(e,n,r)})).join(" - "):""}function KLe(e){void 0===e&&(e=0);var t=new Date;return(t=(0,lo.Z)(t,{date:t.getDate()-e})).setHours(0,0,0,0),t}var qLe,XLe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},QLe=(0,Qr.getTranslation)("@boosty/common/containers.ExportStat.components.StartStep"),JLe=[{name:MLe.TODAY,from:KLe(),to:null},{name:MLe.WEEK,from:KLe(7),to:null},{name:MLe.CURRENT_MONTH,from:KLe((new Date).getDate()-1),to:null},{name:MLe.LAST_MONTH,from:KLe(30),to:null},{name:MLe.ALL_TIME,from:null,to:null},{name:MLe.SELECT_RANGE,from:null,to:null}],ZLe=function(e){var t=e.onCancel,n=e.onExport,r=XLe((0,Gt.useState)(0),2),o=r[0],a=r[1],i=XLe((0,Gt.useState)(!1),2),l=i[0],s=i[1],c=XLe((0,Gt.useState)({from:null,to:null}),2),u=c[0],d=c[1],f=function(e){var t=Number(e);a(t),s(JLe[t].name===MLe.SELECT_RANGE)};return Gt.createElement("div",null,JLe.map((function(e,t){var n;return Gt.createElement("div",{className:"StartStep_item_x6OHT",key:t},Gt.createElement(YF,{classNames:{root:"StartStep_radioButton_kk7gt"},label:QLe.rangeItems[e.name],value:t.toString(),isChecked:t===o,onRadioButtonClick:f}),Gt.createElement("div",{className:cG()("StartStep_range_AunuJ",(n={},n.StartStep_rangeSelected_LNiQv=t===o,n))},function(e){var t=JLe[e];return t.name===MLe.SELECT_RANGE?YLe({from:u.from,to:u.to,hasYear:!0,isMonthWord:!0}):YLe({from:t.from,to:t.to,isMonthWord:!0})}(t)))})),l&&Gt.createElement(wG,{className:"StartStep_calendar_IuWsO",minDate:wr,onChange:function(e){d({from:e[0],to:e[1]})},hasFooter:!1,defaultValue:[u.from,u.to]}),Gt.createElement("div",{className:"StartStep_footer_TYjhm"},Gt.createElement(FB,{onClick:function(){if(l)n(u);else{var e=JLe[o],t=e.from,r=e.to;n({from:t,to:r})}},isDisabled:l&&!u.from},QLe.export),Gt.createElement(HB,{onClick:t},QLe.cancel)))},$Le=(0,Qr.getTranslation)("@boosty/common/containers.ExportStat.components.SuccessStep"),eRe=function(e){var t=e.onNavigateBack,n=e.onDownload;return Gt.createElement("div",null,Gt.createElement("div",{className:"SuccessStep_image_daIlm"}),Gt.createElement("div",{className:"SuccessStep_text_Nq2QE"},Gt.createElement("div",null,$Le.text)),Gt.createElement("div",{className:"SuccessStep_footer_dXpO1"},Gt.createElement(FB,{onClick:n},Gt.createElement("div",{className:"SuccessStep_buttonContent_nZUwj"},Gt.createElement(pB,{glyph:hB.DjJ,className:"SuccessStep_icon_fLwaH"}),$Le.download)),Gt.createElement(HB,{onClick:t},$Le.newReport)))},tRe=function(e){var t=e.onClose,n=e.onAcceptRange,r=e.onNavigateBack,o=e.onDownload,a=e.currentStep;return Gt.createElement("div",null,a===xLe.START&&Gt.createElement(ZLe,{onCancel:t,onExport:n}),(a===xLe.LOADING||a===xLe.PROCESSING)&&Gt.createElement(jLe,{isProcessing:a===xLe.PROCESSING}),a===xLe.ERROR&&Gt.createElement(WLe,{onNavigateBack:r}),a===xLe.SUCCESS&&Gt.createElement(eRe,{onNavigateBack:r,onDownload:o}))};!function(e){e.COMPLETED="completed",e.FAILED="failed",e.PROCESSING="processing"}(qLe||(qLe={}));var nRe,rRe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},oRe=(0,Qr.getTranslation)("@boosty/common/containers.ExportStat.hooks"),aRe=function(){var e=function(){var e=Gf().blogUrl,t=xf(),n=t.search,r=t.pathname,o=(0,Do.parse)(n),a=o.dataType,i=o.lastReport,l=Mf(),s=(0,Vt.v9)(WO),c=(0,Vt.v9)(VO).isFetched,u=null==s?void 0:s[a],d=rRe((0,Gt.useState)(null),2),f=d[0],m=d[1],p=rRe((0,Gt.useState)(xLe.START),2),h=p[0],v=p[1],g=rRe((0,Gt.useState)(""),2),y=g[0],_=g[1],E=(0,Vt.I0)(),b=yf(ir.BLOG_STATISTICS_CATEGORY_EXPORT,r);(0,Gt.useEffect)((function(){u||S()}),[]),(0,Gt.useEffect)((function(){if(u&&c){var e=h===xLe.LOADING||h===xLe.PROCESSING;if(u.status===qLe.PROCESSING&&v(xLe.PROCESSING),f&&u.status===qLe.FAILED&&v(xLe.ERROR),u.status===qLe.COMPLETED&&(e||i)){if(!f){var t=u.startDate,n=u.endDate;m({from:t?new Date(vo(t)):null,to:n?new Date(vo(n)):null})}v(xLe.SUCCESS),_(u.url)}}}),[u]);var S=function(){E((0,dm.Ax)(Xy.action)({blogUrl:e,dataType:a}))};return{currentStep:h,handleAcceptRange:function(t){m(t),v(xLe.LOADING),function(t){var n=No(t.to),r=No(t.from);E((0,dm.Ax)(qy.action)({blogUrl:e,dataType:a,from:r,to:n}))}(t)},handleClose:function(){var t=null==b?void 0:b.params.category;l(t?(0,Yt.getParametrizedUrl)(ir.BLOG_STATISTICS_CATEGORY,{blogUrl:e,category:t}):(0,Yt.getParametrizedUrl)(ir.BLOG_STATISTICS,{blogUrl:e}))},handleNavigateBack:function(){v(xLe.START)},handleDownload:function(){return void 0,void 0,t=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,E((0,dm.Ax)(Ky.action)(y))];case 1:return e=t.sent().data,$f({data:e,filename:"stat-".concat(a.toString(),".csv")}),[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t},getTitle:function(){switch(h){case xLe.START:case xLe.PROCESSING:return oRe.steps[h];case xLe.LOADING:case xLe.ERROR:case xLe.SUCCESS:var e=YLe({from:f.from,to:f.to,hasYear:!0});return(0,Qr.getParametrizedText)(oRe.steps[h],{range:e||oRe.forAllTime})}return""}}}(),t=e.currentStep,n=e.handleAcceptRange,r=e.handleClose,o=e.handleNavigateBack,a=e.handleDownload,i=e.getTitle;return Gt.createElement(PM,{classNames:{block:"ExportStat_popupBlock_Gksfo"},title:i(),onClose:r},Gt.createElement(tRe,{currentStep:t,onClose:r,onAcceptRange:n,onNavigateBack:o,onDownload:a}))};!function(e){e.SMALL="small",e.MEDIUM="medium"}(nRe||(nRe={}));const iRe="SignIn_icon_Ks_b8",lRe="SignIn_item_JLPO0";var sRe,cRe,uRe=function(e){var t=ef(),n=(e.itemSize||nRe.MEDIUM)===nRe.MEDIUM?"SignIn_itemMedium_BYM10":"SignIn_itemSmall_dxZP1",r=function(n){return function(){return void 0,void 0,o=function(){var r,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return r=e.requestAuth,(o=t.find((function(e){return e.code===n})))?[4,r(o)]:[3,2];case 1:a.sent(),e.onAuthorize&&e.onAuthorize(),a.label=2;case 2:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}));var r,o}};return Gt.createElement("div",{className:cG()("SignIn_block_bcJGq",e.className)},Gt.createElement("div",{className:cG()(lRe,n,"SignIn_itemTwitch_nqdKk"),onClick:r(fa.ProviderCodes.Twitch)},Gt.createElement(pB,{className:cG()(iRe,"SignIn_iconTwitch_mtwU8"),glyph:hB.z$6})),Gt.createElement("div",{className:cG()(lRe,n,"SignIn_itemYoutube_yT4qo"),onClick:r(fa.ProviderCodes.Youtube)},Gt.createElement(pB,{className:cG()(iRe,"SignIn_iconYoutube_R14bp"),glyph:hB.iQP})),Gt.createElement("div",{className:cG()(lRe,n,"SignIn_itemVk_J5P2F"),onClick:r(fa.ProviderCodes.VK)},Gt.createElement(pB,{className:cG()(iRe,"SignIn_iconVk_He25P"),glyph:hB.LuJ})),Gt.createElement("div",{className:cG()(lRe,n,"SignIn_itemMore_NVQAf"),onClick:function(){e.showAuth()}},Gt.createElement(pB,{className:cG()(iRe,"SignIn_iconMore_ocntU"),glyph:hB.jgU})))};!function(e){e.FAVORITES="favorites",e.TARGETS="targets",e.PRICE="price"}(sRe||(sRe={})),function(e){e.COMMISSION="commission",e.PAYOUT="payout",e.PAY_SYSTEMS="paySystems",e.DISCORD="discord"}(cRe||(cRe={}));var dRe=Object.values(sRe),fRe=Object.values(cRe),mRe=(0,Qr.getTranslation)("@boosty/common/components.BlockTemplates.TargetBlockTemplate"),pRe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.currentSum,o=e.targetSum,a=e.targetType,i=e.description,l=nr().currencies.default,s=Math.round(100*r/o),c=a===Ye.MONEY?Vr({amount:o,currency:l}):o;return Gt.createElement("div",{className:cG()("TargetBlockTemplate_root_TceSa",n.root)},Gt.createElement("div",{className:cG()("TargetBlockTemplate_wrapper_azALQ",n.wrapper)},Gt.createElement("div",{className:"TargetBlockTemplate_title_zwtLV"},(0,Qr.getReactText)((0,Qr.getParametrizedText)(mRe.title[a],{currentSum:r,targetSum:c}),{CollectedText:function(e){var t=e.text;return Gt.createElement("span",{className:"TargetBlockTemplate_titleCollected_mrW7X"},t)}})),Gt.createElement(LM,{percent:s,classNames:{root:"TargetBlockTemplate_progress_bT1fo"}}),Gt.createElement("div",{className:"TargetBlockTemplate_description_LK527"},i)))};const hRe="FlyingBlocks_item_Ki4bU";var vRe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingDonationAlerts.desktop.components.FlyingBlocks"),gRe=function(e){var t=e.className,n=nr().currencies.default,r=function(e){return Vr({amount:Kr(e,n),currency:n})};return Gt.createElement("div",{className:cG()("FlyingBlocks_root_Rka9Q",t)},Gt.createElement(DTe,{classNames:{root:cG()(hRe,"FlyingBlocks_item1_NPwF8")},title:vRe.supportChannel,price:(0,Qr.getParametrizedText)(vRe.pricePerMonth,{price:r(200)}),description:vRe.description1}),Gt.createElement(pRe,{classNames:{root:cG()(hRe,"FlyingBlocks_item2_ML8GW")},currentSum:72,targetSum:322,targetType:Ye.SUBSCRIBERS,description:vRe.description2}),Gt.createElement(pRe,{classNames:{root:cG()(hRe,"FlyingBlocks_item3__OhU5")},currentSum:Kr(5e3,n),targetSum:Kr(5e3,n),targetType:Ye.MONEY,description:vRe.description3}),Gt.createElement(DTe,{classNames:{root:cG()(hRe,"FlyingBlocks_item4_No2Qb")},title:vRe.accessToPrivateChat,price:(0,Qr.getParametrizedText)(vRe.pricePerMonth,{price:r(150)}),description:vRe.description4}),Gt.createElement(DTe,{classNames:{root:cG()(hRe,"FlyingBlocks_item5_hQebQ")},title:vRe.thanksTwitch,price:(0,Qr.getParametrizedText)(vRe.pricePerMonth,{price:r(900)}),description:vRe.description5}))};const yRe={inner:"LandingDonationAlerts_inner_VApi4",topMenu:"LandingDonationAlerts_topMenu_fRvdz",topMenuLeft:"LandingDonationAlerts_topMenuLeft_oEKyn",topMenuRight:"LandingDonationAlerts_topMenuRight_x_F3C",topMenuLogo:"LandingDonationAlerts_topMenuLogo_yVONO",topMenuBy:"LandingDonationAlerts_topMenuBy_wFcnc",top:"LandingDonationAlerts_top_H2sP0",topLeft:"LandingDonationAlerts_topLeft_o8NTA",topRight:"LandingDonationAlerts_topRight_krb4D",topTitle:"LandingDonationAlerts_topTitle_jakz9",topText:"LandingDonationAlerts_topText_xsucu",topSignInTitle:"LandingDonationAlerts_topSignInTitle_HVX4x",emoji:"LandingDonationAlerts_emoji_Km8Gz",emojiItems:"LandingDonationAlerts_emojiItems_xXRZX",emojiItem:"LandingDonationAlerts_emojiItem_iywnZ",emojiItemPicture:"LandingDonationAlerts_emojiItemPicture_UNK_K",emojiItemPictureFavorites:"LandingDonationAlerts_emojiItemPictureFavorites_UPnhS",emojiItemPictureFavoritesLeft:"LandingDonationAlerts_emojiItemPictureFavoritesLeft_HB4D_","emoji-favorites-left":"LandingDonationAlerts_emoji-favorites-left_Qssz5",emojiItemPictureFavoritesRight:"LandingDonationAlerts_emojiItemPictureFavoritesRight_Lg4i3","emoji-favorites-right":"LandingDonationAlerts_emoji-favorites-right_83_zl",emojiItemPictureTargets:"LandingDonationAlerts_emojiItemPictureTargets_lu7vz",emojiItemPictureTargetsSmile:"LandingDonationAlerts_emojiItemPictureTargetsSmile_wRc0Z",emojiItemPictureTargetsProgress:"LandingDonationAlerts_emojiItemPictureTargetsProgress_rUwGg",emojiItemPictureTargetsProgressLeft:"LandingDonationAlerts_emojiItemPictureTargetsProgressLeft_CIOn1",emojiItemPictureTargetsProgressLeftText:"LandingDonationAlerts_emojiItemPictureTargetsProgressLeftText_DF0rZ",emojiItemPictureTargetsProgressRight:"LandingDonationAlerts_emojiItemPictureTargetsProgressRight_N4V5W",emojiItemPicturePrice:"LandingDonationAlerts_emojiItemPicturePrice_jofdD",emojiItemPicturePriceUSD:"LandingDonationAlerts_emojiItemPicturePriceUSD_WrUDm",emojiItemPicturePriceRUB:"LandingDonationAlerts_emojiItemPicturePriceRUB_GpS8W",emojiItemTitle:"LandingDonationAlerts_emojiItemTitle_eJVFf",emojiItemText:"LandingDonationAlerts_emojiItemText_C2liW",emojiInViewPort:"LandingDonationAlerts_emojiInViewPort_wh1qr",alsoHave:"LandingDonationAlerts_alsoHave_RuBYU",alsoHaveItems:"LandingDonationAlerts_alsoHaveItems_IpHEh",alsoHaveTitle:"LandingDonationAlerts_alsoHaveTitle_mxFSv",alsoHaveTitleGo:"LandingDonationAlerts_alsoHaveTitleGo_EHI6o",alsoHaveItem:"LandingDonationAlerts_alsoHaveItem_C1U6m",alsoHaveItemPicture:"LandingDonationAlerts_alsoHaveItemPicture_AaMQh",alsoHaveItemTitle:"LandingDonationAlerts_alsoHaveItemTitle_Y25nd",alsoHaveItemCommission:"LandingDonationAlerts_alsoHaveItemCommission_URFZF",alsoHaveItemPayout:"LandingDonationAlerts_alsoHaveItemPayout_wgP_s",alsoHaveItemPaySystems:"LandingDonationAlerts_alsoHaveItemPaySystems_ky90Q",alsoHaveItemDiscord:"LandingDonationAlerts_alsoHaveItemDiscord_Rf7R8",alsoHaveSignIn:"LandingDonationAlerts_alsoHaveSignIn_ZDi4r",alsoHaveInViewPort:"LandingDonationAlerts_alsoHaveInViewPort___9sq",fadeIn:"LandingDonationAlerts_fadeIn_s6Qs5"};var _Re=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ERe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingDonationAlerts.desktop");const bRe="LandingBlog2125_backgroundFigure_w7iR3",SRe="LandingBlog2125_point_QeFhP";var TRe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingBlog2125.desktop");const IRe={avatarWrapper:"ReferralRecommendation_avatarWrapper_UOftc",recommendation:"ReferralRecommendation_recommendation_QVyYO",understroke:"ReferralRecommendation_understroke_QUi_K",container:"ReferralRecommendation_container_Fvj2R",name:"ReferralRecommendation_name_q4Y_z",fadeIn:"ReferralRecommendation_fadeIn_i8ksG"};var NRe,CRe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingReferral.components.ReferralRecommendation"),wRe=function(e){var t=e.user,n=e.blogUrl,r=nr().isMobile;return Gt.createElement("div",{className:IRe.container},Gt.createElement(cM,{className:IRe.avatarWrapper,to:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:n})},Gt.createElement(PB,{className:IRe.avatar,img:t.avatarUrl,size:r?g.S:g.S_OVERSIZE})),Gt.createElement("div",{className:IRe.recommendation},Gt.createElement(cM,{className:IRe.name,to:(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:n})},Gt.createElement("span",{title:t.name},t.name," ")),Gt.createElement("span",{className:cG()(IRe.text,IRe.understroke)},CRe.recommends," "),Gt.createElement("span",{className:IRe.text},(0,Qr.getParametrizedText)(CRe.toCreateBlog,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized}))))};!function(e){e.SUBSCRIPTION_LEVELS="subscriptionLevels",e.STREAMS="streams",e.CROWDFUNDING="crowdfunding",e.PRIVATE_CHATS="accessToPrivateChats",e.TARGETS="targets",e.STATISTICS="statistics",e.PRIVATE_POSTS="privatePosts"}(NRe||(NRe={}));var ORe=function(e){var t=e.text;return Gt.createElement("div",{className:"SellingPoint_root_ls59h"},Gt.createElement("span",{className:"SellingPoint_text_ouEej"},t))},ARe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingReferral.components.CallToAction"),PRe=function(){return Gt.createElement("div",{className:"CallToAction_container_YVnDD"},Gt.createElement("div",{className:"CallToAction_motivation_UjS59"},ARe.motivation),Gt.createElement("div",{className:"CallToAction_sellingPoints_NmKK8"},Gt.createElement(ORe,{key:NRe.SUBSCRIPTION_LEVELS,text:ARe.sellingPoints[NRe.SUBSCRIPTION_LEVELS]}),Gt.createElement(ORe,{key:NRe.STREAMS,text:ARe.sellingPoints[NRe.STREAMS]}),Gt.createElement(ORe,{key:NRe.CROWDFUNDING,text:ARe.sellingPoints[NRe.CROWDFUNDING]}),Gt.createElement(ORe,{key:NRe.PRIVATE_CHATS,text:ARe.sellingPoints[NRe.PRIVATE_CHATS]}),Gt.createElement(ORe,{key:NRe.TARGETS,text:ARe.sellingPoints[NRe.TARGETS]}),Gt.createElement(ORe,{key:NRe.STATISTICS,text:ARe.sellingPoints[NRe.STATISTICS]}),Gt.createElement(ORe,{key:NRe.PRIVATE_POSTS,text:ARe.sellingPoints[NRe.PRIVATE_POSTS]})))};const LRe={root:"SellingPoint_root_f7Je1",icon:"SellingPoint_icon_fkRXc",fadeIn:"SellingPoint_fadeIn_PNrfh"};var RRe=function(e){var t=e.classNames,n=void 0===t?{}:t,r=e.icon,o=e.title;return Gt.createElement("div",{className:cG()(n.root,LRe.root)},Gt.createElement(pB,{glyph:r,className:cG()(n.icon,LRe.icon)}),Gt.createElement("span",{className:LRe.title},o))};const kRe={root:"SellingPointList_root_J08QO",tagIconCrown:"SellingPointList_tagIconCrown_nBLyu",tagIconTips:"SellingPointList_tagIconTips_rSndg",tagIconStats:"SellingPointList_tagIconStats_HPAx6",tagIconDirectMessages:"SellingPointList_tagIconDirectMessages_kW7SB",tagIconPrivatePosts:"SellingPointList_tagIconPrivatePosts_anVR1",tagIconDirectMessagesPayed:"SellingPointList_tagIconDirectMessagesPayed_HNQn4",tagIconMassMessages:"SellingPointList_tagIconMassMessages_qsUEv",fadeIn:"SellingPointList_fadeIn_g9ZZR"};var DRe,URe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingReferral.components.CallToActionX.components.SellingPointList"),BRe=[{icon:hB.rrY,getTitle:function(){return URe.subscriptionsTiers},className:kRe.tagIconCrown},{icon:hB.iMT,getTitle:function(){return URe.tips},className:kRe.tagIconTips},{icon:hB.BWt,getTitle:function(){return URe.stats},className:kRe.tagIconStats},{icon:hB.f7e,getTitle:function(){return URe.directMessages},className:kRe.tagIconDirectMessages},{icon:hB.Wal,getTitle:function(){return URe.privatePosts},className:kRe.tagIconPrivatePosts},{icon:hB.l11,getTitle:function(){return URe.directMessagesPayed},className:kRe.tagIconDirectMessagesPayed},{icon:hB.CE3,getTitle:function(){return URe.massMessages},className:kRe.tagIconMassMessages}],xRe=function(e){var t=nr().isMobile?[BRe[0],BRe[2],BRe[4],BRe[6],BRe[3],BRe[1],BRe[5]]:BRe;return Gt.createElement("div",{className:cG()(kRe.root,e.className)},t.map((function(e){return Gt.createElement(RRe,{key:e.getTitle(),classNames:{root:kRe.tag,icon:e.className},icon:e.icon,title:e.getTitle()})})))},MRe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingReferral.components.CallToActionX"),FRe=function(){return Gt.createElement("div",{className:"CallToActionX_root_Zc0_C"},Gt.createElement("div",{className:"CallToActionX_motivation_GNzXP"},MRe.motivation),Gt.createElement(xRe,null))};!function(e){e[e.AUTH=0]="AUTH",e[e.BECOME_AUTHOR=1]="BECOME_AUTHOR",e[e.ALREADY_AUTHOR=2]="ALREADY_AUTHOR"}(DRe||(DRe={}));const GRe={container:"AlreadyAuthor_container_PPDBX",title:"AlreadyAuthor_title_aS1D9",name:"AlreadyAuthor_name_JS5FD",button:"AlreadyAuthor_button_BDsZJ",fadeIn:"AlreadyAuthor_fadeIn_bSJqm"};var HRe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingReferral.components.AlreadyAuthor"),WRe=function(e){var t=e.user,n=Mf(),r=t.name,o=t.avatarUrl,a=t.blogUrl;return Gt.createElement("div",{className:GRe.container},Gt.createElement("span",{className:GRe.title},(0,Qr.getParametrizedText)(HRe.alreadyAuthor,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})),Gt.createElement(PB,{className:GRe.avatar,img:o,size:g.SM}),Gt.createElement("span",{className:GRe.name},r),Gt.createElement(HB,{className:GRe.button,onClick:function(){n((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:a}))}},HRe.goToMyBlog))},VRe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},jRe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingReferral.components.Form"),zRe=function(){var e=nr().isMobile,t=_k(),n=t.isAuthorized,r=t.isBlogger,o=t.currentUser,a=Vq(),i=a.isMaskedPassword,l=a.isLoading,s=a.recaptchaRef,c=a.isValidCaptcha,u=a.setIsMaskedPassword,d=a.shouldValidateOnChange,f=a.setShouldValidateOnChange,m=a.onSubmit,p=function(){return n?r?DRe.ALREADY_AUTHOR:DRe.BECOME_AUTHOR:DRe.AUTH},h=VRe((0,Gt.useState)(p()),2),v=h[0],g=h[1],y=VRe((0,Gt.useState)(null),2),_=y[0],E=y[1];return(0,Gt.useEffect)((function(){var e=p();g(e)}),[n,r]),Gt.createElement("div",{className:"Form_root_U9rpK"},Gt.createElement("div",{className:"Form_content_r47Li"},v===DRe.AUTH&&Gt.createElement("div",{className:"Form_authContainer_Ikp8w"},_!==hK.ENTER_LAST_ACCOUNT&&Gt.createElement(Gt.Fragment,null,Gt.createElement("span",{className:"Form_authTitle_cSfv9"},jRe.registerNow)),Rr()?Gt.createElement(Bq,{className:"Form_signUpForm_bSxVx",isMaskedPassword:i,isLoading:l,isValidCaptcha:c,setIsMaskedPassword:u,shouldValidateOnChange:d,setShouldValidateOnChange:f,recaptchaRef:s,onSubmit:m}):Gt.createElement(_q,{onChangeStep:function(e){E(e)}})),v===DRe.BECOME_AUTHOR&&Gt.createElement("div",{className:"Form_becomeAuthorContainer_Oc8FE"},Gt.createElement(N3,{classNames:{title:"Form_becomeAuthorTitle_cSjN8",text:"Form_becomeAuthorText_iuDNR",form:"Form_becomeAuthorForm_AeC3p",button:"Form_becomeAuthorButton_AKWAu"},titleObj:{title:jRe.becomeAuthorTitle,text1:jRe.becomeAuthorText},tooltipAlign:e?yx.LEFT:yx.CENTER})),v===DRe.ALREADY_AUTHOR&&Gt.createElement(WRe,{user:o})),v!==DRe.ALREADY_AUTHOR&&Gt.createElement("div",{className:"Form_withGift_hYLHO"}))},YRe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingReferral.components.Disclaimer"),KRe=function(){return Gt.createElement("div",{className:"Disclaimer_container_RKUIE"},Gt.createElement("span",{className:"Disclaimer_newUsers_k4mac"},YRe.onlyForNewUsers))};const qRe="Social_link_eKhPX";var XRe=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingReferral.components.Social"),QRe=function(){var e=nr().corporateBlogUrl;return Gt.createElement("div",{className:"Social_container_ifoN1"},Gt.createElement("span",{className:"Social_title_RMhuC"},(0,Qr.getParametrizedText)(XRe.boostySocialLinks,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized})),Gt.createElement("div",{className:"Social_links_P8nnO"},Gt.createElement("a",{className:qRe,href:"https://vk.com/boostyto"},Gt.createElement("span",{className:"Social_vk_XegZ9"})),Gt.createElement("a",{className:qRe,href:"https://www.youtube.com/c/BoostyOfficial"},Gt.createElement("span",{className:"Social_youtube_bCyg0"})),Gt.createElement(cM,{className:qRe,to:e},Gt.createElement("span",{className:"Social_boosty_k6rWo"}))))};const JRe="LandingReferral_drain_ZV5lL",ZRe="LandingReferral_left_V7pHY";var $Re,eke,tke,nke=(0,Qr.getTranslation)("@boosty/common/containers.landings.LandingReferral");!function(e){e[e.AUTH=0]="AUTH",e[e.ACCESS=1]="ACCESS",e[e.APPROVE=2]="APPROVE"}($Re||($Re={})),function(e){e.AUTH_STEP="authStep",e.ACCESS_STEP="accessStep",e.LOADING="loading",e.ERROR="error"}(eke||(eke={})),function(e){e.INVALID_REDIRECT_URL="invalid_redirect_url",e.INVALID_CLIENT_ID="invalid_client_id"}(tke||(tke={}));var rke,oke=function(e){var t=e.currentUser,n=e.onApprove,r=e.onChooseOtherAccount,o=function(){var e=(0,Vt.I0)(),t=(0,Vt.v9)(XO),n=(0,Vt.v9)(vA),r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!0),2),o=r[0],a=r[1];return(0,Gt.useEffect)((function(){var n,r;"phone"===t.authSource.type?(r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return a(!0),[4,e((0,dm.Ax)(Jv.action)())];case 1:return t.sent(),a(!1),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(void 0,[])).next())}))):a(!1)}),[]),{phone:n,isLoading:o}}(),a=o.phone,i=o.isLoading;return Gt.createElement("div",{className:"Approve_root_YUOWy"},i?Gt.createElement(uM,{className:"Approve_loading_hHX8W"}):Gt.createElement(rq,{storedAcc:{phone:a,provider:t.authSource.type,name:t.name,avatarUrl:t.avatarUrl},onEnterAccount:n,onContinue:r}),Gt.createElement(iq,null))};!function(e){e.ALLOW_BUTTON="allowButton",e.DENIED_BUTTON="deniedButton"}(rke||(rke={}));const ake="ScopesAccess_check_LFFLZ",ike="ScopesAccess_scope_xFzYP",lke="ScopesAccess_root_K60PG";var ske=(0,Qr.getTranslation)("@boosty/common/containers.OauthAuthorize.components.ScopesAccess"),cke=oo("ScopesAccess"),uke=function(e){var t=e.appId,n=e.redirectUri,r=e.state,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(""),2),a=o[0],i=o[1],l=(0,Vt.I0)(),s=(0,Vt.v9)($R),c=(0,Vt.v9)(XO);return a?Gt.createElement("div",{className:cG()(lke,"ScopesAccess_error_nXUME")},a):s?Gt.createElement("div",{className:lke},Gt.createElement(PB,{img:s.avatarUrl,className:"ScopesAccess_avatar_LcgmA"}),Gt.createElement("h4",{className:"ScopesAccess_title_JPdpa"},s.name),Gt.createElement("p",{className:"ScopesAccess_subTitle_mRp01"},ske.subTitle),c&&Gt.createElement("div",{className:"ScopesAccess_userInfo_HyNO1"},Gt.createElement(PB,{img:c.avatarUrl,size:g.XS_OVERSIZE,className:"ScopesAccess_userAvatar_Ryjaa"}),Gt.createElement("span",{className:"ScopesAccess_username_u7YSi"},c.name)),Gt.createElement("ul",{className:"ScopesAccess_scopesList_o2E7F"},Gt.createElement("li",{className:ike},Gt.createElement(pB,{glyph:hB.NOm,className:ake}),Gt.createElement("span",null,ske.name)),Gt.createElement("li",{className:ike},Gt.createElement(pB,{glyph:hB.NOm,className:ake}),Gt.createElement("span",null,ske.mail)),Gt.createElement("li",{className:ike},Gt.createElement(pB,{glyph:hB.NOm,className:ake}),Gt.createElement("span",null,ske.phone)),Gt.createElement("li",{className:ike},Gt.createElement(pB,{glyph:hB.NOm,className:ake}),Gt.createElement("span",null,ske.photo))),Gt.createElement("div",{className:"ScopesAccess_footer_uIrnu"},Gt.createElement(FB,{dataAttributes:{"data-test-id":cke(rke.ALLOW_BUTTON)},onClick:function(){return void 0,void 0,o=function(){var e,o;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,l((0,dm.Ax)(xb.authorizeByOAuth)({appId:t,redirectUri:n,state:r,responseType:"code",scope:null,code:null}))];case 1:return e=a.sent(),window.location.replace(e.url),[3,3];case 2:return o=a.sent(),i(o.response.data.error_description),[3,3];case 3:return[2]}}))},new((e=void 0)||(e=Promise))((function(t,n){function r(e){try{i(o.next(e))}catch(e){n(e)}}function a(e){try{i(o.throw(e))}catch(e){n(e)}}function i(n){var o;n.done?t(n.value):(o=n.value,o instanceof e?o:new e((function(e){e(o)}))).then(r,a)}i((o=o.apply(undefined,[])).next())}));var e,o}},ske.allow),Gt.createElement(HB,{dataAttributes:{"data-test-id":cke(rke.DENIED_BUTTON)},onClick:function(){window.close(),window.location.href=(0,Yt.addQueryStringParams)(n,{state:r,error:"access_denied",error_reason:"user_denied"})}},ske.forbid))):Gt.createElement(ZY,null)};const dke="OauthAuthorize_container_Ot91Y",fke="OauthAuthorize_onlyContent_GzapB",mke="OauthAuthorize_authBlock_Ay2hJ";var pke=(0,Qr.getTranslation)("@boosty/common/containers.OauthAuthorize"),hke=[$Re.AUTH,$Re.ACCESS],vke=oo("OauthAuthorize"),gke=function(e){var t,n,r,o,a,i=e.ErrorComponent,l=nr().oauthAllowedOrigins,s=xf(),c=(0,Vt.I0)(),u=(0,Do.parse)(s.search),d=u.client_id,f=u.redirect_url,m=u.only_content,p=u.fast_auth,h=u.state,v=u.from,g="1"===m,y="1"===p,_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(hK.ENTER_SOCIAL_NETWORK),2),E=_[0],b=_[1],S=(0,Gt.useRef)(null),T=(0,Vt.v9)(XO),I=(0,Vt.v9)(sA),N=(0,Vt.v9)(ek);(0,Gt.useEffect)((function(){var e,t;!N.isFetched&&d&&f&&(e=d,t=f,c((0,dm.Ax)(mT)({appId:e,redirectUri:t}))),O()}),[]);var C=function(e){b(e)},w=function(e){if(window.parent)try{window.parent.postMessage(e,l[v])}catch(t){ho.error('Failed send postMessage "'.concat(e.name,'" with data "').concat(JSON.stringify(e.data),'"'),t)}},O=function(){S.current&&setTimeout((function(){var e=S.current.clientHeight;w({name:"OAuthResize",data:{height:e}})}))},A=function(e){w({name:"OAuthLoading",data:{isLoading:e}})},P=function(){return void 0,void 0,t=function(){var e;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,(n={clientId:d,redirectUrl:f,responseType:"code"},c((0,dm.Ax)(Tg.action)(n)))];case 1:return e=t.sent().url,window.location.href=(0,Yt.addQueryStringParams)(e,{from:v}),[2]}var n}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}));var e,t},L=function(){O()},R=function(){O()},k=function(e){A(e)},D=function(){y&&A(!0),P()};if(!d||!f||N.error){var U=function(e){switch(e){case tke.INVALID_CLIENT_ID:return{title:pke.errors.invalidClientId.title,text:pke.errors.invalidClientId.text};case tke.INVALID_REDIRECT_URL:return{title:pke.errors.invalidRedirectUrl.title,text:pke.errors.invalidRedirectUrl.text}}return null}(null===(a=null===(o=N.error)||void 0===o?void 0:o.serverError)||void 0===a?void 0:a.error);return Gt.createElement("div",{"data-test-id":vke(eke.ERROR),className:cG()(dke,(t={},t[fke]=g,t))},Gt.createElement(i,{errorTitle:null==U?void 0:U.title,errorText:null==U?void 0:U.text}))}if(I.isFetching||N.isFetching)return Gt.createElement("div",{"data-test-id":vke(eke.LOADING),className:cG()(dke,(n={},n[fke]=g,n))},Gt.createElement(ZY,null));var B=T?y?$Re.APPROVE:$Re.ACCESS:$Re.AUTH;return Gt.createElement("div",{className:cG()(dke,(r={},r[fke]=g,r)),ref:S},Gt.createElement(jK,{initialStep:B,steps:hke},(function(e){var t,n=E===hK.ENTER_LAST_ACCOUNT?"":pke.title;if(e.step===$Re.AUTH){var r=Gt.createElement("div",{"data-test-id":vke(eke.AUTH_STEP)},Gt.createElement("h4",{className:"OauthAuthorize_title_c2FSP"},n),Gt.createElement(_q,{isLastAccountDisabled:y,isOnlyContent:g,onSuccess:function(){y?(A(!0),P()):e.setStep($Re.ACCESS)},onAfterChangeStep:L,onErrorsChange:R,onChangeStep:C,onLoading:k}));return g?r:Gt.createElement(qB,{className:mke},r)}return e.step===$Re.ACCESS?Gt.createElement(qB,{className:mke},Gt.createElement("div",{"data-test-id":vke(eke.ACCESS_STEP)},Gt.createElement(uke,{appId:d,redirectUri:f,state:h}))):e.step===$Re.APPROVE?Gt.createElement(oke,{currentUser:T,onApprove:D,onChooseOtherAccount:(t=e.setStep,function(){t($Re.AUTH),O()})}):null})))};gke.getFetchActions=function(e,t){var n=t.query;return(null==n?void 0:n.client_id)&&(null==n?void 0:n.redirect_url)?[function(){return mT({appId:n.client_id,redirectUri:n.redirect_url})}]:[]};var yke,_ke=function(e){var t=e.isLoading,n=e.currentUser,r=e.phone,o=e.onEnterAccount,a=e.onChooseOtherAccount;return Gt.createElement("div",null,t?Gt.createElement(uM,{className:"ModeAuthorized_loading_rfHp4"}):Gt.createElement(rq,{storedAcc:{phone:r,provider:n.authSource.type,name:n.name,avatarUrl:n.avatarUrl},buttonsColor:UB.AZURE_RADIANCE,onEnterAccount:o,onContinue:a}))},Eke=(0,Qr.getTranslation)("@boosty/common/containers.ExternalAccountLink.components.IncorrectUser"),bke=function(e){var t=e.title,n=e.description,r=e.isContinuationPossible,o=e.onChooseOtherAccount,a=e.onContinue;return Gt.createElement("div",{className:"IncorrectUser_root_pkVOG"},Gt.createElement("div",{className:"IncorrectUser_picture_Y9EFw"}),Gt.createElement("div",{className:"IncorrectUser_title_Usy52"},t),n&&Gt.createElement("div",{className:"IncorrectUser_description_Mn0XF"},n),r&&Gt.createElement(FB,{className:"IncorrectUser_continue_k2qN2",bgColor:UB.AZURE_RADIANCE,onClick:a},Eke.continue),Gt.createElement(HB,{onClick:o},Eke.chooseOtherAccount))},Ske=(0,Qr.getTranslation)("@boosty/common/containers.ExternalAccountLink.components.ModeError"),Tke=function(e){var t=e.currentUser,n=e.onChooseOtherAccount;return Gt.createElement(bke,{title:Ske.title,description:(null==t?void 0:t.isTotalBaned)?(0,Qr.getParametrizedText)(Ske.description.banned,{projectNameEnglishOnlyCapitalizes:nr().projectName.latinCapitalized}):Ske.description.default,isContinuationPossible:!1,onChooseOtherAccount:n})},Ike=function(e){var t=e.isUserNotFoundByPhone,n=e.onEmptyUser,r=e.onSuccess,o=e.onAfterChangeStep,a=e.onErrorsChange,i=function(e){var t;if("AuthRedirectWindowOpened"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.name)){var r=(0,Do.parse)(e.data.search),o=r.accessToken,a=r.refreshToken,i=r.expiresAt;"1"===r.isEmptyUser&&n({accessToken:String(o),refreshToken:String(a),expiresAt:Number(i)})}};return(0,Gt.useEffect)((function(){return window.addEventListener("message",i),function(){return window.removeEventListener("message",i)}}),[]),Gt.createElement("div",null,Gt.createElement(_q,{isLastAccountDisabled:!0,isOnlyContent:!0,isExternalAccountLink:!0,isUserNotFoundByPhone:t,buttonsColor:UB.AZURE_RADIANCE,onSuccess:r,onAfterChangeStep:o,onErrorsChange:a,onEmptyUser:n}))},Nke=(0,Qr.getTranslation)("@boosty/common/containers.ExternalAccountLink.components.ModeUserAlreadyLinked"),Cke=function(e){var t=e.onChooseOtherAccount;return Gt.createElement(bke,{title:Nke.title,isContinuationPossible:!1,onChooseOtherAccount:t})},wke=(0,Qr.getTranslation)("@boosty/common/containers.ExternalAccountLink.components.ModeUserNotFound"),Oke=function(e){var t=e.onContinue,n=e.onChooseOtherAccount;return Gt.createElement(bke,{title:wke.title,description:wke.description,isContinuationPossible:!0,onContinue:t,onChooseOtherAccount:n})};!function(e){e.ALREADY_EXISTS="already_exists"}(yke||(yke={}));var Ake,Pke,Lke=function(e){var t=e.isActive,n=e.onEnterAccount,r=e.onChooseOtherAccount,o=(0,Vt.I0)(),a=(0,Vt.v9)(XO),i=(0,Vt.v9)(vA),l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!0),2),s=l[0],c=l[1];return(0,Gt.useEffect)((function(){var e,n,r;t&&("phone"===(null===(e=null==a?void 0:a.authSource)||void 0===e?void 0:e.type)?(void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return c(!0),[4,o((0,dm.Ax)(Jv.action)())];case 1:return e.sent(),c(!1),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))):c(!1))}),[t]),{phone:i,currentUser:a,isLoading:s,onEnterAccount:n,onChooseOtherAccount:r}},Rke=function(e){var t=e.onChooseOtherAccount;return{currentUser:_k().currentUser,onChooseOtherAccount:t}},kke=function(e){var t=e.isUserNotFoundByPhone,n=e.onEmptyUser;return{isUserNotFoundByPhone:t,onSuccess:e.onSuccess,onEmptyUser:n}},Dke=function(e){return{onChooseOtherAccount:e.onChooseOtherAccount}},Uke=function(e){return{onChooseOtherAccount:e.onChooseOtherAccount,onContinue:e.onContinue}},Bke=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},xke=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Mke=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Fke=function(){return Fke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fke.apply(this,arguments)},Gke=[0,100,250,500,1e3],Hke=[{path:ir.FB_AUTH,component:JTe,end:!0},{path:ir.APP_OAUTH_AUTHORIZE,component:gke,props:{ErrorComponent:Cj}},{path:ir.EXTERNAL_ACCOUNT_LINK,component:function(){var e=function(e){var t=e.onAuthSuccess,n=(0,Vt.I0)(),r=_k(),o=r.isAuthorized,a=r.currentUser,i=Mke((0,Gt.useState)(X.LOADING),2),l=i[0],s=i[1],c=Mke((0,Gt.useState)(null),2),u=c[0],d=c[1],f=Mke((0,Gt.useState)(!1),2),m=f[0],p=f[1],h=function(){return s(X.UNAUTHORIZED)};return(0,Gt.useEffect)((function(){o?a.isTotalBaned?s(X.ERROR):s(X.AUTHORIZED):s(X.UNAUTHORIZED)}),[]),{mode:l,modes:{authorized:Lke({isActive:l===X.AUTHORIZED,onEnterAccount:function(){var e=cf().accessToken;t(e)},onChooseOtherAccount:h}),error:Rke({isActive:l===X.ERROR,onChooseOtherAccount:h}),unAuthorized:kke({isActive:l===X.UNAUTHORIZED,isUserNotFoundByPhone:m,onSuccess:function(){var e=cf().accessToken;t(e)},onEmptyUser:function(e,t){d(e),s(X.USER_NOT_FOUND),p(t)}}),userAlreadyLinked:Dke({isActive:l===X.USER_ALREADY_LINKED,onChooseOtherAccount:h}),userNotFound:Uke({isActive:l===X.USER_NOT_FOUND,onContinue:function(){return Bke(void 0,void 0,void 0,(function(){var e;return xke(this,(function(r){switch(r.label){case 0:return e=u.accessToken,[4,n((0,dm.Ax)(Bg.action)({accessToken:e}))];case 1:return r.sent(),sf(u),m?s(X.UNAUTHORIZED):t(e),[2]}}))}))},onChooseOtherAccount:h})},onLinkApproved:function(e){return Bke(void 0,void 0,void 0,(function(){var t,r,o;return xke(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,n((0,dm.Ax)(Ug.action)({accessTokenVKPlay:e}))];case 1:return a.sent(),[2,!0];case 2:return t=a.sent(),(null===(o=null==(r=t)?void 0:r.serverError)||void 0===o?void 0:o.error)===yke.ALREADY_EXISTS?s(X.USER_ALREADY_LINKED):s(X.ERROR),[2,!1];case 3:return[2]}}))}))}}}({onAuthSuccess:function(e){return m(e)}}),t=e.mode,n=e.modes,r=n.authorized,o=n.error,a=n.unAuthorized,i=n.userAlreadyLinked,l=n.userNotFound,s=e.onLinkApproved,c=(0,Gt.useRef)(null),u=function(e){if(window.parent)try{var t=nr().oauthAllowedOrigins,n=(0,Do.parse)(window.location.search).from;window.parent.postMessage(e,t[n])}catch(t){ho.error('Failed send postMessage "'.concat(e.type,'" with data "').concat(JSON.stringify(e.data),'"'),t)}},d=function(){if(c.current){var e=c.current.clientHeight;u({type:N.RESIZE,data:{height:e}})}},f=function(){d(),Gke.forEach((function(e){return setTimeout((function(){return d()}),e)}))},m=function(e){u({type:N.REQUEST,data:{accessToken:e}})},p=function(e){return void 0,void 0,n=function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){switch(n.label){case 0:return e.data.type!==N.APPROVE?[3,2]:(t=e.data.data.accessToken,[4,s(t)]);case 1:n.sent()&&u({type:N.SUCCESS}),n.label=2;case 2:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(undefined,[])).next())}));var t,n};return(0,Gt.useEffect)((function(){f(),u({type:N.CHANGE_MODE,data:{mode:t}})}),[t]),(0,Gt.useEffect)((function(){return window.addEventListener("message",p),function(){return window.removeEventListener("message",p)}}),[]),Gt.createElement("div",{ref:c},t===X.AUTHORIZED&&Gt.createElement(_ke,Fke({},r)),t===X.ERROR&&Gt.createElement(Tke,Fke({},o)),t===X.UNAUTHORIZED&&Gt.createElement(Ike,Fke({},a,{onAfterChangeStep:function(){return f()},onErrorsChange:function(){return f()}})),t===X.USER_ALREADY_LINKED&&Gt.createElement(Cke,Fke({},i)),t===X.USER_NOT_FOUND&&Gt.createElement(Oke,Fke({},l)))}},{path:ir.MAIN,component:JTe,end:!0},{path:"".concat(ir.FEED,"/*"),component:JTe,accessLevel:Le.authorized},{path:ir.SUPPORT_CONTACT,component:JTe,end:!0},{path:ir.SUPPORT_HELP,component:function(){var e=ZTe((0,Gt.useState)(!0),2),t=e[0],n=e[1],r=ZTe((0,Gt.useState)(null),2),o=r[0],i=r[1],l=xf().search,s=(0,Do.parse)(l).to,c=BK().showPopup,u=_k().isAuthorized,d=nr().locale,f=(0,Vt.I0)(),m=Mf();return(0,Gt.useEffect)((function(){var e,t;u?(void 0,void 0,t=function(){var e,t,r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),n(!0),[4,f((0,dm.Ax)(Cb.action)())];case 1:return e=o.sent().url,t="".concat(e,"&theme=boosty&locale=").concat(d,"&iframe=1#").concat(s||"/"),i(t),[3,4];case 2:return r=o.sent(),ho.error("Failed to fetch support frame url: ".concat(r)),[3,4];case 3:return n(!1),[7];case 4:return[2]}}))},new((e=void 0)||(e=Promise))((function(n,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function a(e){try{i(t.throw(e))}catch(e){r(e)}}function i(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(e){e(r)}))).then(o,a)}i((t=t.apply(undefined,[])).next())}))):c({type:a.AUTH_SIGN_IN})}),[u]),(0,Gt.useEffect)((function(){if(o&&!t){var e=function(e){"changeLocation"===e.data.event&&"/close"===e.data.payload.location&&(window.close(),m(ir.MAIN))};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}return Yt.noop}),[o,t]),Gt.createElement("div",{className:"SupportHelp_root_i87YC"},t?Gt.createElement(dM,null):o&&Gt.createElement("iframe",{src:o,className:"SupportHelp_frame_iZcvp"}))},end:!0},{path:ir.BLOG_CREATE,component:JTe,end:!0},{path:ir.BECOME_AUTHOR,component:function(){return Gt.createElement("div",{className:"BecomeAuthorStandalone_root_OoCAX"},Gt.createElement("div",{className:"BecomeAuthorStandalone_imgBlock_vaW2w"},Gt.createElement("div",{className:"BecomeAuthorStandalone_text_e43jQ"},qCe.text)),Gt.createElement(KCe,{classNames:{container:"BecomeAuthorStandalone_formContainer_e5HUc",form:"BecomeAuthorStandalone_form_vSQ18",offer:"BecomeAuthorStandalone_offer_doADT",button:"BecomeAuthorStandalone_submitButton_LDgKh"}}))},end:!0,accessLevel:Le.authorized},{path:ir.UI_KIT,component:function(){return Gt.createElement("div",{className:"UiKit_container_uENDc"},Gt.createElement(TOe,null),Gt.createElement("h2",{className:SOe},"Pagination"),Gt.createElement("div",{className:EOe},Gt.createElement(EM,{onPageChange:Yt.noop,pageCount:14})),Gt.createElement("h2",{className:SOe},"Buttons"),Gt.createElement("div",{className:EOe},Gt.createElement(FB,null,"Button"),Gt.createElement(FB,{isDisabled:!0},"Disabled Button"),Gt.createElement(FB,{isActivated:!0},"Activated Button")),Gt.createElement("div",{className:EOe},Gt.createElement(HB,null,"Button"),Gt.createElement(HB,{isDisabled:!0},"Disabled Button")),Gt.createElement("div",{className:EOe},Gt.createElement(FB,{withIcon:!0},Gt.createElement(pB,{glyph:hB.U3W,className:"UiKit_penIcon_AzoR5"}),"Create post"),Gt.createElement(HB,{className:"UiKit_deleteButton_KQXHd",withIcon:!0},Gt.createElement(pB,{glyph:hB.IT9,className:"UiKit_trashIcon_go6EL"}),"Delete post")),Gt.createElement("div",{className:EOe},Gt.createElement(mx,{id:"1",onChange:Yt.noop,format:[".jpg",".png"],isValid:!0}),Gt.createElement(mx,{id:"2",onChange:Yt.noop,format:[".jpg"]})),Gt.createElement("h2",{className:SOe},"Checkboxes"),Gt.createElement("div",{className:EOe},Gt.createElement(VM,{onToggle:Yt.noop}),Gt.createElement(VM,{onToggle:Yt.noop,isDefaultChecked:!0}),Gt.createElement(VM,{onToggle:Yt.noop,isDisabled:!0})),Gt.createElement("div",{className:EOe},Gt.createElement(SF,{onToggle:Yt.noop}),Gt.createElement(SF,{onToggle:Yt.noop,isDefaultChecked:!0}),Gt.createElement(SF,{onToggle:Yt.noop,isDisabled:!0})),Gt.createElement("h2",{className:SOe},"Selects"),Gt.createElement("div",{className:EOe},Gt.createElement("div",{className:bOe},Gt.createElement(_Oe,null)),Gt.createElement("div",{className:bOe},Gt.createElement(gOe,null)),Gt.createElement("div",{className:bOe},Gt.createElement(lF,{options:[],placeholder:"Choose one",onSelect:Yt.noop,isDisabled:!0}))),Gt.createElement("h2",{className:SOe},"Inputs"),Gt.createElement("div",{className:EOe},Gt.createElement(Zx,{description:"Description",id:"2",label:"Header",placeholder:"Placeholder"}),Gt.createElement("div",{className:"UiKit_textAreaContainer_iKKc2"},Gt.createElement(Zx,{description:"Description",id:"5",label:"Header",limit:240,multiline:!0,withCounter:!0}))),Gt.createElement("div",{className:EOe},Gt.createElement(Zx,{id:"1"}),Gt.createElement(Zx,{error:"Error label",id:"3",isValid:!1}),Gt.createElement(Zx,{disabled:!0,id:"4",placeholder:"Type a text"})),Gt.createElement("h2",{className:SOe},"Labels"),Gt.createElement(zx,{text:"Header",id:"5"}),Gt.createElement("h2",{className:SOe},"Links"),Gt.createElement(cM,{to:""},"Click me"),Gt.createElement("h2",{className:SOe},"Radio buttons"),Gt.createElement("form",null,Gt.createElement("div",{className:EOe},Gt.createElement(YF,{label:"Label1",id:"test1",value:"1",name:"1"}),Gt.createElement(YF,{label:"Label2",id:"test2",value:"2",name:"1",isDefaultChecked:!0}),Gt.createElement(YF,{id:"test3",value:"3",name:"1"}),Gt.createElement(YF,{label:"Label3",id:"test4",value:"4",name:"1",isDisabled:!0}))),Gt.createElement("h2",{className:SOe},"Avatar"),Gt.createElement("div",{className:EOe},Gt.createElement(PB,{size:g.L,img:"https://api.founder-alpha.my.cloud.devmail.ru/v1/user/5/avatar"}),Gt.createElement(PB,{size:g.L,img:void 0}),Gt.createElement(PB,{img:"https://api.founder-alpha.my.cloud.devmail.ru/v1/user/5/avatar"}),Gt.createElement(PB,{img:void 0})),Gt.createElement("h2",{className:SOe},"Tabs"),Gt.createElement("div",{className:cG()(EOe,"UiKit_tabsRow_qCHKu")},Gt.createElement(gF,{withContent:!0},Gt.createElement(gF.Tab,{title:"Tab1"},"tab1 content"),Gt.createElement(gF.Tab,{title:"Tab2"},"tab2 content"))),Gt.createElement("div",null,Gt.createElement(uM,null),Gt.createElement(uM,{size:200}),Gt.createElement(uM,{size:30})),Gt.createElement("h2",{className:SOe},"Popup"),Gt.createElement("div",{className:EOe},Gt.createElement(CM,null,Gt.createElement("span",{className:"UiKit_popupContent_Ozi8w"},"Popup content"))))},end:!0},{path:ir.BRAND,component:function(){return Gt.createElement(TIe,{classNames:{brandContainerClassName:"Brand_brandContainer_Atb5P",cardsContainerClassName:"Brand_cardsContainer_AeQbh",cardContainerClassName:"Brand_cardContainer_Vwpk2",cardsSetContainerClassName:"Brand_cardsSetContainer_xQWdp"}})},end:!0},{path:ir.BLOG_REF,component:function(){var e=_k(),t=e.currentUser,n=e.isAuthorized,r=e.isBlogger,o=(0,Gt.useRef)(null),i=(0,dH.useOverlayPopups)(),l=i.showPopup,s=i.closePopup,c=Mf();return(0,Gt.useEffect)((function(){var e;n?(o.current&&s(o.current.id),e=ir.MAIN,r&&(e=(0,Yt.getParametrizedUrl)(ir.BLOG_REFS,{blogUrl:t.blogUrl})),c(e)):o.current=l({type:a.AUTH_SIGN_IN,data:{disableCloseOnSuccess:!0},onClose:function(){n||c(ir.MAIN)}})}),[n]),null}},{path:ir.LANDING_DONATION_ALERTS,component:function(){var e,t,n=nr().locale,r=_Re((0,Gt.useState)(!1),2),o=r[0],i=r[1],l=_Re((0,Gt.useState)(!1),2),s=l[0],c=l[1],u=(0,Gt.useRef)(!1),d=(0,Vt.v9)(XO),f=_k(),m=f.isAuthorized,p=f.isBlogger,h=Mf(),v=(0,dH.useOverlayPopups)().showPopup,g=(0,Vt.I0)();(0,Gt.useEffect)((function(){m&&u.current&&(p?h((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:d.blogUrl})):E())}),[m]);var y=function(e){return g((0,dm.Ax)(xb.requestAuth)(e))},_=function(){v({type:a.AUTH_SIGN_IN,data:{onSuccess:b}}),bd.log.auth.openPopup({source:od.LANDINGS_DA})},E=function(){v({type:a.BECOME_AUTHOR}),bd.log.becomeAuthor.openPopup(),bd.log.gtm.startBecomingAuthor()},b=function(){u.current=!0},S=function(){m?p?h((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:d.blogUrl})):E():(v({type:a.AUTH_SIGN_IN}),bd.log.auth.openPopup({source:od.LANDINGS_DA}))},T=function(){return Gt.createElement(FB,{onClick:S},ERe.start)};return Gt.createElement("div",null,Gt.createElement("div",{className:yRe.topMenu},Gt.createElement("div",{className:yRe.topMenuLeft},Gt.createElement("a",{href:"/",className:yRe.topMenuLogo,role:"button"}),Gt.createElement("span",{className:yRe.topMenuBy},"by DonationAlerts")),Gt.createElement("div",{className:yRe.topMenuRight},T())),Gt.createElement("div",{className:yRe.top},Gt.createElement("div",{className:yRe.inner},Gt.createElement("div",{className:yRe.topLeft},Gt.createElement("div",{className:yRe.topTitle},ERe.top.title,Gt.createElement("br",null),ERe.top.fromDA),Gt.createElement("div",{className:yRe.topText},ERe.top.text1,Gt.createElement("br",null),ERe.top.text2),m?T():Gt.createElement("div",{className:yRe.topSignIn},Gt.createElement("div",{className:yRe.topSignInTitle},ERe.top.signIn),Gt.createElement(uRe,{requestAuth:y,showAuth:_,onAuthorize:b}))),Gt.createElement(gRe,{className:yRe.topRight}))),Gt.createElement("div",{className:cG()(yRe.emoji,(e={},e[yRe.emojiInViewPort]=o,e))},Gt.createElement("div",{className:yRe.inner},Gt.createElement("div",{className:yRe.emojiItems},dRe.map((function(e){return Gt.createElement("div",{className:yRe.emojiItem,key:e},function(e){var t=cG()(yRe.emojiItemPicture,yRe["emojiItemPicture".concat((0,Yt.strCapitalize)(e))]),r=zr(n);switch(e){case sRe.FAVORITES:return Gt.createElement("div",{className:t},Gt.createElement("div",{className:yRe.emojiItemPictureFavoritesLeft}),Gt.createElement("div",{className:yRe.emojiItemPictureFavoritesRight}));case sRe.TARGETS:return Gt.createElement("div",{className:t},Gt.createElement("div",{className:yRe.emojiItemPictureTargetsSmile}),Gt.createElement("div",{className:yRe.emojiItemPictureTargetsProgress},Gt.createElement("div",{className:yRe.emojiItemPictureTargetsProgressLeft},Gt.createElement("div",{className:yRe.emojiItemPictureTargetsProgressLeftText},Vr({amount:Kr(300,r),currency:r}))),Gt.createElement("div",{className:yRe.emojiItemPictureTargetsProgressRight},Vr({amount:Kr(1e3,r),currency:r}))));case sRe.PRICE:var o=cG()(yRe.emojiItemPicture,yRe.emojiItemPicturePrice,yRe["emojiItemPicturePrice".concat(r)]);return Gt.createElement("div",{className:o});default:return Gt.createElement("div",{className:t})}}(e),Gt.createElement("div",{className:yRe.emojiItemTitle},ERe.emoji[e].title),Gt.createElement("div",{className:yRe.emojiItemText},ERe.emoji[e].text))}))),Gt.createElement(FM,{onShow:function(){i(!0)}}))),Gt.createElement("div",{className:cG()(yRe.alsoHave,(t={},t[yRe.alsoHaveInViewPort]=s,t))},Gt.createElement("div",{className:yRe.inner},Gt.createElement("div",{className:yRe.alsoHaveTitle},ERe.alsoHave.title),Gt.createElement(FM,{onShow:function(){c(!0)}}),Gt.createElement("div",{className:yRe.alsoHaveItems},fRe.map((function(e){return Gt.createElement("div",{key:e,className:cG()(yRe.alsoHaveItem,yRe["alsoHaveItem".concat((0,Yt.strCapitalize)(e))])},Gt.createElement("div",{className:yRe.alsoHaveItemPicture}),Gt.createElement("div",{className:yRe.alsoHaveItemTitle},ERe.alsoHave.items[e]))}))),Gt.createElement("div",{className:yRe.alsoHaveTitleGo},ERe.alsoHave.go),Gt.createElement("div",{className:yRe.alsoHaveSignIn},m?T():Gt.createElement(uRe,{requestAuth:y,showAuth:_,onAuthorize:b})))))}},{path:ir.LANDING_BLOG_2125,component:function(){var e=fH().showPopup,t=function(e){var t=e.showAuthPopup,n=e.showBecomeAuthorPopup,r=Mf(),a=xf().pathname,l=_k(),s=l.currentUser,c=l.isAuthorized,u=Ck(),d=u.isBanned,f=u.isBlogger,m=function(){(0,Yt.removeFromLocalStorage)(o.SHOW_BECOME_AUTHOR_POPUP),r((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:s.blogUrl}))},p=function(){(0,Yt.removeFromLocalStorage)(o.SHOW_BECOME_AUTHOR_POPUP),r(ir.MAIN)},h=function(){(0,Yt.removeFromLocalStorage)(o.SHOW_BECOME_AUTHOR_POPUP),n?(n(),bd.log.becomeAuthor.openPopup()):r(ir.BLOG_CREATE)},v=(0,Gt.useCallback)((function(){(0,Yt.setToLocalStorage)(o.SHOW_BECOME_AUTHOR_POPUP,String(!0)),c?f?m():d?p():h():(zf(i.REF_FROM_QUERY,a),t(),bd.log.auth.openPopup({source:od.LANDING_BLOG_2125}))}),[c,d,f]);return(0,Gt.useEffect)((function(){var e=(0,Yt.getFromLocalStorage)(o.SHOW_BECOME_AUTHOR_POPUP);c&&e&&(f?m():d?p():h())}),[c,d,f]),{onTryButtonClick:v}}({showAuthPopup:function(){return e({type:a.AUTH_SIGN_IN})},showBecomeAuthorPopup:function(){return e({type:a.BECOME_AUTHOR})}}).onTryButtonClick;return Gt.createElement("div",{className:"LandingBlog2125_block_yutFa"},Gt.createElement("div",{className:"LandingBlog2125_backgroundFigures_mORmt"},Gt.createElement("div",{className:bRe}),Gt.createElement("div",{className:bRe}),Gt.createElement("div",{className:bRe}),Gt.createElement("div",{className:bRe})),Gt.createElement("a",{href:"/",className:"LandingBlog2125_logo_e5KcC",role:"button"}),Gt.createElement("div",{className:"LandingBlog2125_content_fp3eP"},Gt.createElement("div",{className:"LandingBlog2125_title_LNJh7"},TRe.title),Gt.createElement("div",{className:"LandingBlog2125_description_ce2pz"},TRe.description[1],Gt.createElement("br",null),TRe.description[2],Gt.createElement("br",null),TRe.description[3]),Gt.createElement(FB,{className:"LandingBlog2125_button_tqqp7",onClick:t},TRe.try)),Gt.createElement("div",{className:"LandingBlog2125_image_B4tRr"},Gt.createElement("div",{className:cG()(SRe,"LandingBlog2125_subscriptionLevels_oi33x")},TRe.points.subscriptionLevels),Gt.createElement("div",{className:cG()(SRe,"LandingBlog2125_targets_WnRVG")},TRe.points.targets),Gt.createElement("div",{className:cG()(SRe,"LandingBlog2125_statistics_RMzGL")},TRe.points.statistics),Gt.createElement("div",{className:cG()(SRe,"LandingBlog2125_closedPosts_puNbf")},TRe.points.closedPosts),Gt.createElement("div",{className:cG()(SRe,"LandingBlog2125_privateChats_oWmT3")},Gt.createElement(pB,{glyph:hB.tj4,className:"LandingBlog2125_discord_Rluc9"}),Gt.createElement(pB,{glyph:hB.PVw,className:"LandingBlog2125_telegram_tPUCn"}),TRe.points.privateChats),Gt.createElement("div",{className:cG()(SRe,"LandingBlog2125_fundRaising_p6G6e")},TRe.points.fundRaising),Gt.createElement("div",{className:cG()(SRe,"LandingBlog2125_streams_U8tUS")},TRe.points.streams)))}},{path:ir.BLOG_REF_LANDING,component:function(){var e=jG().showAlert,t=nr().isMobile,n=Gf().blogUrl,r=(0,Vt.I0)(),o=(0,Vt.v9)(Ww),a=(0,Vt.v9)(nO),i=(0,Vt.v9)(Kw),l=_k().isAuthorized;return(0,Gt.useEffect)((function(){l?Number(bu(U.NEW_USER))!==he.REGISTER&&e({type:p.ERROR,text:nke.onlyForNewUsers}):r((0,dm.Ax)(yy.action)({blogUrl:n})),(!o.isFetched||o.isFetched&&n!==a)&&r((0,dm.Ax)(Nm.action)({blogUrl:n}))}),[l]),Gt.createElement("div",{className:"LandingReferral_root_QdeNs"},Gt.createElement("div",{className:"LandingReferral_content_c1noT"},o.isFetched?Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:cG()(ZRe,"LandingReferral_first_jX2KE")},Gt.createElement(wRe,{user:i,blogUrl:n})),Gt.createElement("div",{className:cG()("LandingReferral_right_VxTWs","LandingReferral_second_eTPDW")},Gt.createElement(zRe,null),Gt.createElement(KRe,null),!t&&!Rr()&&Gt.createElement(QRe,null)),Gt.createElement("div",{className:cG()(ZRe,"LandingReferral_third_apGPm")},Rr()?Gt.createElement(FRe,null):Gt.createElement(PRe,null)),Gt.createElement("div",{className:cG()(ZRe,"LandingReferral_fourth_MjyS_")},Gt.createElement("div",{className:"LandingReferral_ui_ys1kL"}))):Gt.createElement(ZY,{isGlobal:!0})),!t&&!Rr()&&Gt.createElement("div",{className:"LandingReferral_drains_GY4Vw"},Gt.createElement("div",{className:cG()(JRe,"LandingReferral_drainRight_LTTtq")}),Gt.createElement("div",{className:cG()(JRe,"LandingReferral_drainBottom_dztDq")})),!t&&Gt.createElement("div",{className:cG()(JRe,"LandingReferral_drainLeft_Fsgt0")}))}},{path:ir.BROWSER_UNSUPPORTED,component:function(){return Gt.createElement("div",{className:"BrowserUnsupported_root_iyK6E"},Gt.createElement(pB,{glyph:hB.hhG,className:"BrowserUnsupported_image_Kv2A6"}),Gt.createElement("h4",{className:"BrowserUnsupported_title_H40bU"},OIe.title),Gt.createElement("p",{className:IIe},OIe.description),Gt.createElement("p",{className:IIe},Gt.createElement("span",null,OIe.forExample," "),Gt.createElement(cM,{to:"https://www.google.com/chrome/",className:NIe},Gt.createElement("span",null,"Google Chrome, ")),Gt.createElement(cM,{to:"https://www.mozilla.org/ru/firefox/",className:NIe},Gt.createElement("span",null,"Mozilla Firefox ")),Gt.createElement("span",null,OIe.or," "),Gt.createElement(cM,{to:"https://www.opera.com/ru",className:NIe},Gt.createElement("span",null,"Opera."))))}},{path:ir.OFFERS,component:function(){var e=nr().offer,t=e.userAgreement,n=e.paymentTerms,r=e.privacyPolicy,o=e.cookiePolicy,a=e.refPolicy,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(Xa()),2),l=i[0],s=i[1],c=xf().pathname,u=(0,Vt.v9)(XO),d=Ck(),f=d.isBanned,m=d.isAuthorized,p=[ir.OFFERS_USER,ir.OFFERS_PAYMENT_TERMS,ir.OFFERS_PRIVACY_POLICY,ir.OFFERS_COOKIE_POLICY,ir.OFFERS_REF_POLICY].findIndex((function(e){return Boolean(yf(e,c))}));return Gt.createElement(eEe,{title:dIe.title,className:"Offers_root_Rsrk8"},!Rr()&&Gt.createElement(r8,{Component:cIe,className:"Offers_languageSelector_nA9Qu",language:l,onSelect:function(e){return s(e)}}),Gt.createElement("div",{className:"Offers_contentContainer_BZRS0"},Gt.createElement(gF,{activeTab:p,className:cG()("Offers_tabs_BFO8S",function(){if(!m)return"";var e=u.email,t=u.emailConfirmed,n=t.social,r=t.noSocial,o=!!e&&n&&r,a=u.problemSubscriptions.length>0;return!o&&a?"Offers_withTwoNotice_l7JUf":f||a||!o?"Offers_withNotice_hidtM":""}()),classNameHead:"Offers_tabsHead_pmIY4",classNameActive:"Offers_tabActive_OzGmx"},Gt.createElement(gF.Tab,{title:dIe.userAgreement,url:t.url,className:uIe}),Gt.createElement(gF.Tab,{title:dIe.paymentTerms,url:n.url,className:uIe}),Gt.createElement(gF.Tab,{title:dIe.privacyPolicy,url:r.url,className:uIe}),Gt.createElement(gF.Tab,{title:dIe.cookiePolicy,url:o.url,className:uIe}),Gt.createElement(gF.Tab,{title:dIe.refPolicy,url:a.url,className:uIe})),Gt.createElement("div",{className:"Offers_content_ExKYa"},Gt.createElement(Bf.j3,{context:[l]}))))},routes:[{path:ir.OFFERS_USER,component:function(){var e=mIe({offerConfig:at.USER_AGREEMENT}),t=e.isLoading,n=e.text;return Gt.createElement(fIe,{text:n,isLoading:t})}},{path:ir.OFFERS_PAYMENT_TERMS,component:function(){var e=mIe({offerConfig:at.PAYMENT_TERMS}),t=e.isLoading,n=e.text;return Gt.createElement(fIe,{text:n,isLoading:t})}},{path:ir.OFFERS_PRIVACY_POLICY,component:function(){var e=mIe({offerConfig:at.PRIVACY_POLICY}),t=e.isLoading,n=e.text;return Gt.createElement(fIe,{text:n,isLoading:t})}},{path:ir.OFFERS_COOKIE_POLICY,component:function(){var e=mIe({offerConfig:at.COOKIE_POLICY}),t=e.isLoading,n=e.text;return Gt.createElement(fIe,{text:n,isLoading:t})}},{path:ir.OFFERS_REF_POLICY,component:function(){var e=mIe({offerConfig:at.REF_POLICY}),t=e.isLoading,n=e.text;return Gt.createElement(fIe,{text:n,isLoading:t})}}]},{path:"".concat(ir.MESSAGES,"/*"),component:sIe,accessLevel:Le.authorized},{path:ir.SETTINGS,component:function(){var e=function(){var e,t=_k().currentUser,n=Ck();return{isBlogger:n.isBlogger,isStreamer:n.isStreamer,areStreamsEnabled:Qo(r.STREAMS),authSourceType:null===(e=null==t?void 0:t.authSource)||void 0===e?void 0:e.type}}(),t=e.isBlogger,n=e.isStreamer,o=e.areStreamsEnabled,a=e.authSourceType,i=Gt.useMemo((function(){return function(e){var t=e.isBlogger,n=e.isStreamer,o=e.hasModeration,a=e.authSourceType;return[{url:ir.SETTINGS_PROFILE,title:sEe.profile,icon:hB.nb3,id:"profile",hideCommonTitle:!1},{url:ir.SETTINGS_PASSWORD,title:sEe.password,icon:hB.Wal,id:"password",hideCommonTitle:!1,isDisabled:!(Rr()&&a===v.EMAIL)},{url:ir.SETTINGS_PRIVACY,title:sEe.privacy,icon:hB.tCy,id:"privacy",hideCommonTitle:!1},{url:ir.SETTINGS_SOCIAL,title:sEe.social,icon:hB.JHz,id:"social",bloggerOnly:!0},{url:ir.SETTINGS_SUBSCRIPTIONS,title:sEe.subscriptions,icon:hB.NVv,id:"subscriptions"},{url:ir.SETTINGS_AGENTS,title:sEe.agents,icon:hB.DNy,id:"agents",bloggerOnly:!0},{url:ir.SETTINGS_NOTIFICATIONS,title:sEe.notifications,icon:hB.pPA,id:"notifications"},{url:ir.SETTINGS_SMILES,title:sEe.smilesAndBadges,icon:hB.lID,id:"smilesAndBadges",hideCommonTitle:!0,streamerOnly:!0,isDisabled:!Qo(r.SMILES_AND_BADGES_SETTINGS)},{url:ir.SETTINGS_EXTERNAL_APP,title:sEe.externalApps,icon:hB.UPy,id:"externalApps",isDisabled:!Qo(r.DISCORD)&&!Qo(r.TELEGRAM)},{url:ir.SETTINGS_STREAM_MODERATION,title:sEe.moderation,icon:hB.xb2,id:"moderation",bloggerOnly:!0,isDisabled:!Qo(r.SETTINGS_STREAM_MODERATION_VISIBILITY)},{url:ir.SETTINGS_BLACKLIST,title:sEe.blacklist,icon:hB.FJo,id:"blacklist"}].filter((function(e){return null==e?void 0:e.id})).reduce((function(e,r){return r.isDisabled?e:r.url!==ir.SETTINGS_STREAM_MODERATION||o?(r.bloggerOnly&&!t||r.streamerOnly&&!n||e.push(r),e):e}),[])}({isBlogger:t,isStreamer:n,hasModeration:o,authSourceType:a})}),[t,n,o,a]);return Gt.createElement(lEe,{tabs:i})},accessLevel:Le.authorized,routes:[{path:"".concat(ir.SETTINGS_PROFILE,"/*"),component:ySe,accessLevel:Le.authorized},{path:ir.SETTINGS_PRIVACY,component:function(){var e=(0,Vt.v9)(XO).id,t=function(){var e=(0,Vt.v9)(XO),t=e.dialogSettings,n=e.isBlogger,r=e.blogUrl,o=(0,Vt.v9)(bL),a=(0,Vt.v9)(NL),i=JV((0,Gt.useState)(t),2),l=i[0],s=i[1],c=JV((0,Gt.useState)(0),2),u=c[0],d=c[1],f=jG().showAlert,m=(0,Vt.oR)(),h=(0,Vt.I0)(),v=a.isFetching,g=JV((0,Gt.useState)(0),2),y=g[0],_=g[1],E=(null==o?void 0:o.filter((function(e){return e.price>0})).length)>0,b=function(e){return XV(void 0,void 0,void 0,(function(){return QV(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,h((0,dm.Ax)(Pg.action)(qV(qV({},e),{canSendPaidSubscribers:e.canSendPaidSubscribers||Boolean(e.sendMsgLevelId)})))];case 1:return t.sent(),f({type:p.SUCCESS,text:ZV.success}),[3,3];case 2:return t.sent(),f({type:p.ERROR,text:ZV.error}),[3,3];case 3:return[2]}}))}))},S=(0,Gt.useMemo)((function(){return(0,ii.debounce)((function(){return _((function(e){return e+1}))}),400)}),[]);return(0,Gt.useEffect)((function(){y&&b(l)}),[y]),(0,Gt.useEffect)((function(){return function(e,t){var n=t.params.blogUrl,r=NL(e),o=[],a=XO(e).isBlogger;return!r.isFetched&&a&&o.push((function(){return(0,dm.Ax)(qp.action)({blogUrl:n})})),o}(m.getState(),{params:{blogUrl:r}}).forEach((function(e){return h(e())})),function(){h($p)}}),[r]),(0,Gt.useEffect)((function(){var e;d(t.sendMsgLevelId||(null===(e=null==o?void 0:o[0])||void 0===e?void 0:e.levelId))}),[o,null==t?void 0:t.sendMsgLevelId]),(0,Gt.useEffect)((function(){v||E||!t.canSendPaidSubscribers||XV(void 0,void 0,void 0,(function(){var e;return QV(this,(function(t){switch(t.label){case 0:return[4,h((0,dm.Ax)(Qv.action)())];case 1:return e=t.sent(),s(e.dialogSettings),[2]}}))}))}),[E,v,t.canSendPaidSubscribers]),(0,Gt.useEffect)((function(){return function(){S.cancel()}}),[S]),{sendUpdatedSettings:b,setChosenLevel:d,toggleMessageRule:function(e,t){var n;n=e===A.LEVEL?KV(l,{id:e,value:t?u:0}):KV(l,{id:e,value:t}),!(0,ii.isEqual)(n,l)&&Object.values(n).some(Boolean)&&(s(n),S())},dialogSettings:l,chosenLevel:u,onLevelUpdate:function(e){var t;d(e),s(qV(qV({},l),((t={})[A.LEVEL]=e,t))),S()},subscriptionLevels:o,isBlogger:n,isLoading:v,hasPaidLevels:E}}(),n=t.isBlogger,r=t.subscriptionLevels,o=t.dialogSettings,a=t.chosenLevel,i=t.toggleMessageRule,l=t.onLevelUpdate,s=t.isLoading,c=t.hasPaidLevels,u=c&&Boolean(o[A.LEVEL])&&Boolean(a);return Gt.createElement("div",{className:"SettingsPrivacy_root_Wnh7f"},s&&Gt.createElement(uM,{className:"SettingsPrivacy_preloader_AY_tg"}),!s&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:REe},DEe.labelCouldSendMessages),Gt.createElement(LEe,{userId:e,settings:o,isBlogger:n,onMessageRuleChange:i,hasPaidLevels:c}),u&&Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{className:REe},DEe.labelStartFromLevel),Gt.createElement(OEe,{selectedLevel:a,subscriptionLevels:r,onChange:l}))))},accessLevel:Le.authorized},{path:ir.SETTINGS_SOCIAL,component:function(){return Gt.createElement(CSe,{formClassName:"SettingsSocial_form_gsr71"})},accessLevel:Le.authorized},{path:"".concat(ir.SETTINGS_AGENTS,"/*"),component:function(){return Gt.createElement(ASe,null)},accessLevel:Le.authorized},{path:ir.SETTINGS_SUBSCRIPTIONS,component:JEe,accessLevel:Le.authorized},{path:ir.SETTINGS_NOTIFICATIONS,component:function(){return Gt.createElement(IEe,{classNames:{label:"SettingsNotifications_label_lm7P5"}})},accessLevel:Le.authorized},{path:ir.SETTINGS_EXTERNAL_APP,component:function(){var e=(0,Vt.I0)(),t=(0,Vt.v9)(tA),n=(0,Vt.v9)(eA),r=(0,Vt.v9)(nA),o=(0,Vt.v9)(rA),i=(0,Vt.v9)(oA),l=(0,Vt.v9)(aA),s=(0,Vt.v9)(iA),c=_k().isBlogger,u=(0,dH.useOverlayPopups)(),d=u.showPopup,f=u.closePopup;return Gt.createElement(gbe,{isBlogger:c,hasAccountDiscord:o,hasAccountTelegram:n,userNameDiscord:i,userNameTelegram:r,hasDiscordServer:l,discordServerName:s,classNames:{cardsList:"SettingsExternalApps_cardsList_bade2",appCardContainer:"SettingsExternalApps_appCardContainer_cZpRO"},connectToTelegram:function(n){n.preventDefault(),t||e((0,dm.Ax)(mE.action)()),d({type:a.TELEGRAM_CONNECTION})},connectToDiscord:function(){e((0,dm.Ax)(xb.requestAuth)(tf(fa.ProviderCodes.Discord)))},connectToDiscordBot:function(){e((0,dm.Ax)(xb.requestAuth)(tf(fa.ProviderCodes.DiscordBot)))},disconnectFromApp:function(t){return function(){var n=d({type:a.CONFIRM,data:{description:"".concat(ybe.disconnectConfirmationText," ").concat(t,"?"),onConfirm:function(){return void 0,void 0,o=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return[4,e((0,dm.Ax)(pg.action)({type:t}))];case 1:return r.sent(),f(n),[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,a)}i((o=o.apply(undefined,[])).next())}));var r,o}}}).id}},disconnectDiscordServer:function(){return e((0,dm.Ax)(pE.action)())}})},accessLevel:Le.authorized},{path:ir.SETTINGS_BLACKLIST,component:function(){var e=function(){var e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(0),2),t=e[0],n=e[1],r=(0,Vt.I0)(),o=(0,Vt.v9)(JO),a=(0,Vt.v9)(mR),i=(0,Vt.v9)(pR),l=Boolean(null==a?void 0:a.length),s=l?Math.ceil(a.length/11):0,c=l&&a.slice(11*t,11*t+11);return(0,Gt.useEffect)((function(){i.isFetched||r((0,dm.Ax)(Em.action)({blogUrl:o}))}),[]),{currentPage:t,hasBlacklist:l,pageCount:s,listToShow:c,removeFromBlackList:function(e){r((0,dm.Ax)(_m.action)({userId:e,blogUrl:o}))},onChangePage:function(e){n(e)}}}(),t=e.currentPage,n=e.hasBlacklist,r=e.pageCount,o=e.listToShow,a=e.onChangePage,i=e.removeFromBlackList;return n?Gt.createElement("table",{className:pIe.blacklistTable},Gt.createElement("thead",null,Gt.createElement("tr",null,Gt.createElement("th",{className:pIe.tableHeadName},hIe.header.name),Gt.createElement("th",{className:pIe.tableHeadDate},hIe.header.blockDate),Gt.createElement("th",{className:pIe.tableHeadRemove},hIe.header.remove))),Gt.createElement("tfoot",null,r>1&&Gt.createElement("tr",null,Gt.createElement("td",{colSpan:3},Gt.createElement(EM,{onPageChange:a,pageCount:r,forcePage:t,className:pIe.paging,disableInitialCallback:!0})))),Gt.createElement("tbody",null,o.map((function(e,t){var n=t%2==1?pIe.odd:pIe.even;return Gt.createElement("tr",{className:cG()(n,pIe.row),key:e.id},Gt.createElement("td",null,e.name),Gt.createElement("td",null,null!=e.blacklistedAt?So(e.blacklistedAt):"-"),Gt.createElement("td",{className:pIe.removeColumn},Gt.createElement(pB,{className:pIe.close,glyph:hB.bMz,onClick:function(){return function(e){i(e)}(e.id)}})))})))):Gt.createElement("div",{className:pIe.noTableData},hIe.noTableData)},accessLevel:Le.authorized},{path:ir.SETTINGS_STREAM_MODERATION,component:function(){var e,t,n,r,o,a,i,l,s,c=nr().isMobile,u=jG().showAlert,d=(0,Gt.useRef)(null),f=(0,Vt.I0)(),m=(0,Vt.v9)(JO),h=(0,Vt.v9)(XP),v=(0,Vt.v9)(jP),g=cbe((0,Gt.useState)(""),2),y=g[0],_=g[1],E=cbe((0,Gt.useState)(""),2),b=E[0],S=E[1],T=cbe((0,Gt.useState)([]),2),I=T[0],N=T[1],C=cbe((0,Gt.useState)(!1),2),w=C[0],O=C[1],A=cbe((0,Gt.useState)({}),2),P=A[0],L=A[1],R=function(e,t){var n;L(ibe(ibe({},P),((n={})[e]=t,n)))},k=function(e){return lbe(void 0,void 0,void 0,(function(){return sbe(this,(function(t){return[2,f((0,dm.Ax)(tp.action)({blogUrl:m,limit:20,offset:e}))]}))}))},D=function(e){return lbe(void 0,void 0,void 0,(function(){return sbe(this,(function(t){return[2,f((0,dm.Ax)(gp.action)({blogUrl:m,word:e}))]}))}))},U=function(e){return lbe(void 0,void 0,void 0,(function(){return sbe(this,(function(t){return[2,f((0,dm.Ax)(Dm.action)({blogUrl:m,userId:e}))]}))}))},B=function(e){return lbe(void 0,void 0,void 0,(function(){return sbe(this,(function(t){return[2,f((0,dm.Ax)(vp.action)({blogUrl:m,userId:e}))]}))}))},x=(0,ii.debounce)((function(){return lbe(void 0,void 0,void 0,(function(){var e;return sbe(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=N,[4,lbe(void 0,void 0,void 0,(function(){var e,t,n,r,o;return sbe(this,(function(a){return e=b.trim(),t=Pa.test(e)&&(null===(o=null===(r=null===(n=new URL(e))||void 0===n?void 0:n.pathname)||void 0===r?void 0:r.split("/"))||void 0===o?void 0:o[1])||e,[2,f((0,dm.Ax)(fy.action)({blogUrl:m,chunk:t}))]}))}))];case 1:return e.apply(void 0,[t.sent()]),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}}))}))}),300),M=function(e){u({type:p.ERROR,text:ube.errors[e]})},F=function(){return lbe(void 0,void 0,void 0,(function(){var e;return sbe(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,lbe(void 0,void 0,void 0,(function(){return sbe(this,(function(e){return[2,f((0,dm.Ax)(Bm.action)({blogUrl:m,word:y}))]}))}))];case 1:return t.sent(),_(""),[3,3];case 2:return(e=t.sent())instanceof Ar?(R(XEe.ADD_STOP_WORD,e.serverError.error),Object.values(QEe).includes(e.serverError.error)&&M(e.serverError.error)):(R(XEe.ADD_STOP_WORD,"something_went_wrong"),M(QEe.DEFAULT)),[3,3];case 3:return[2]}}))}))},G=function(e){return lbe(void 0,void 0,void 0,(function(){return sbe(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,D(e)];case 1:return t.sent(),[3,3];case 2:return t.sent(),M(QEe.DEFAULT),[3,3];case 3:return[2]}}))}))},H=function(e){return lbe(void 0,void 0,void 0,(function(){return sbe(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,B(e)];case 1:return t.sent(),[3,3];case 2:return t.sent(),M(QEe.DEFAULT),[3,3];case 3:return[2]}}))}))};return(0,Gt.useEffect)((function(){var e;k(),void 0===e&&(e=0),lbe(void 0,void 0,void 0,(function(){return sbe(this,(function(t){return[2,f((0,dm.Ax)($m.action)({blogUrl:m,offset:e,limit:20}))]}))}))}),[]),(0,Gt.useEffect)((function(){b.length>2&&x()}),[b]),Gt.createElement("div",ibe({},Na(dbe(qEe.ROOT))),Gt.createElement("div",{className:abe.addStopWordField},Gt.createElement(Zx,{className:abe.addStopWordInput,classNameInput:abe.addStopWordInputField,classNameCounter:abe.addStopWordInputCounter,limit:50,withCounter:!0,name:XEe.ADD_STOP_WORD,value:y,description:ube.addStopWord.description,label:ube.addStopWord.label,placeholder:ube.addStopWord.placeholder,onChange:function(e){var t=e.target.value;P[XEe.ADD_STOP_WORD]&&R(XEe.ADD_STOP_WORD,null),_(t)},onKeyDown:function(e){e.key===ae.SPACE&&e.preventDefault(),e.key===ae.ENTER&&F()},isValid:!P[XEe.ADD_STOP_WORD],error:ube.errors[P[XEe.ADD_STOP_WORD]],rightElement:P[XEe.ADD_STOP_WORD]?null:Gt.createElement(zB,{onClick:F},ube.add)})),Gt.createElement("div",{className:abe.stopWordsField},Gt.createElement("span",{className:abe.label},(0,Qr.getParametrizedText)(ube.addedStopWords.label,{count:(null===(e=null==h?void 0:h.data)||void 0===e?void 0:e.length)||0})),Gt.createElement("div",{className:abe.stopWords},0===(null===(t=null==h?void 0:h.data)||void 0===t?void 0:t.length)&&Gt.createElement("span",{className:abe.emptyText},ube.addStopWord.empty),(null===(n=null==h?void 0:h.data)||void 0===n?void 0:n.length)>0&&(null===(r=null==h?void 0:h.data)||void 0===r?void 0:r.map((function(e,t){return Gt.createElement(tbe,{className:abe.stopWord,key:t,word:e,onRemove:G})}))),(null===(o=null==h?void 0:h.data)||void 0===o?void 0:o.length)>0&&!h.isLast?Gt.createElement(ebe,{count:0,onClick:function(){var e;k(null===(e=null==h?void 0:h.data)||void 0===e?void 0:e.length)}}):null),Gt.createElement("div",{className:abe.addModeratorField},Gt.createElement("span",{className:abe.label},ube.addModerator.label),Gt.createElement("span",{className:abe.sublabel},ube.addModerator.subLabel),Gt.createElement(Zx,{ref:d,className:abe.addModeratorSearch,name:XEe.ADD_MODERATOR,value:b,description:(0,Qr.getParametrizedText)(ube.addModerator.description,{hostMain:nr().projectName.hostMain}),placeholder:c?ube.addModerator.placeholderMobile:ube.addModerator.placeholderFull,onChange:function(e){var t=e.target.value;P[XEe.ADD_MODERATOR]&&R(XEe.ADD_MODERATOR,null),S(t)},onFocus:function(){O(!0)},autocomplete:"off",isValid:!P[XEe.ADD_MODERATOR],error:ube.errors[P[XEe.ADD_MODERATOR]]}),w&&b.length>2&&!P[XEe.ADD_MODERATOR]?Gt.createElement(obe,{className:abe.suggests,users:I,query:b,onSelect:function(e){return lbe(void 0,void 0,void 0,(function(){var t;return sbe(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,U(e)];case 1:return n.sent(),S(""),[3,3];case 2:return(t=n.sent())instanceof Ar?(R(XEe.ADD_MODERATOR,t.serverError.error),Object.values(QEe).includes(t.serverError.error)&&M(t.serverError.error)):(R(XEe.ADD_MODERATOR,"something_went_wrong"),M(QEe.DEFAULT)),[3,3];case 3:return O(!1),[2]}}))}))},onClose:function(){document.activeElement!==d.current&&O(!1)}}):null),Gt.createElement("div",{className:abe.moderatorsField},Gt.createElement("span",{className:abe.label},(0,Qr.getParametrizedText)(ube.moderators,{count:(null===(a=null==v?void 0:v.data)||void 0===a?void 0:a.length)||0})),Gt.createElement("div",{className:abe.moderators},0===(null===(i=null==v?void 0:v.data)||void 0===i?void 0:i.length)&&Gt.createElement("span",{className:abe.emptyText},ube.addModerator.empty),(null===(l=null==v?void 0:v.data)||void 0===l?void 0:l.length)>0&&(null===(s=null==v?void 0:v.data)||void 0===s?void 0:s.map((function(e,t){return Gt.createElement(ZEe,{key:t,className:abe.moderator,moderator:e,onRemove:H})})))))))},accessLevel:Le.authorized}]},{path:"".concat(ir.BLOG_PROMO,"/*"),component:uOe,accessLevel:Le.blogger},{path:ir.BLOG_STATISTICS,component:function(){var e=Gf().blogUrl;return Gt.createElement(eEe,{title:iEe.title},Gt.createElement(aEe,{blogUrl:e}),Gt.createElement(Bf.j3,null))},accessLevel:Le.blogger,routes:[{path:"".concat(ir.BLOG_STATISTICS,"/"),component:Xge,accessLevel:Le.blogger,index:!0},{path:ir.BLOG_STATISTICS_EXPORT,component:Xge,accessLevel:Le.blogger},{path:"".concat(ir.BLOG_SUBSCRIBERS,"/*"),component:hye,accessLevel:Le.blogger},{path:"".concat(ir.BLOG_UNSUBSCRIBES,"/*"),component:function(){var e=jG().showAlert;return Gt.createElement(Gye,{classNames:{filterContainer:"BlogUnsubscribes_filterContainer_lWUzG"},showAlert:e,RowsComponent:Yye,Component:function(e){var t=e.children;return Gt.createElement("div",{className:"BlogUnsubscribes_container_gU1Lx"},t)},FooterComponent:uhe})},accessLevel:Le.blogger},{path:"".concat(ir.BLOG_BROADCAST_MESSAGE_STATS,"/*"),component:function(){var e=Gf().blogUrl,t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(0),2),n=t[0],r=t[1],o=function(){var e=(0,Vt.I0)(),t=(0,Vt.v9)(GO),n=t.data,r=t.extra,o=(0,Vt.v9)(HO),a=jG().showAlert;return yye(yye({fetchBroadcastMessageStats:function(t){var n,r,o=t.blogUrl,i=t.offset,l=t.limit;return void 0,void 0,r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e((0,dm.Ax)(l_.action)({blogUrl:o,offset:i,limit:l}))];case 1:return t.sent(),[3,3];case 2:return t.sent(),a({type:p.ERROR,text:_ye.error}),[3,3];case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))},data:null==n?void 0:n.dialogBroadcastMessagesStat},o),{total:null==r?void 0:r.total})}(),a=o.isFetching,i=o.data,l=o.total,s=o.fetchBroadcastMessageStats,c=!(null==i?void 0:i.length);(0,Gt.useEffect)((function(){var t,r;r=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,s({blogUrl:e,offset:12*n,limit:12})];case 1:return t.sent(),Of(),[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function o(e){try{i(r.next(e))}catch(e){n(e)}}function a(e){try{i(r.throw(e))}catch(e){n(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))}),[n,e]);var u=Math.ceil(l/12);return Gt.createElement("div",{className:"BlogBroadcastMessageStats_root_guezZ"},Gt.createElement(Aye,null),a?Gt.createElement(uM,null):c?Gt.createElement("div",{className:"BlogBroadcastMessageStats_emptyWrapper_yBLQE"},Gt.createElement(gye,null)):Gt.createElement(Gt.Fragment,null,Gt.createElement(wye,{data:i}),u>1&&Gt.createElement(uhe,{onPageChange:r,forcePage:n,pagesCount:u})))},accessLevel:Le.blogger},{path:"".concat(ir.BLOG_DONATIONS,"/*"),component:phe,accessLevel:Le.blogger},{path:"".concat(ir.BLOG_POST_SALES,"/*"),component:Mhe,accessLevel:Le.blogger},{path:"".concat(ir.BLOG_WITHDRAWAL_METHODS,"/*"),component:function(){var e=function(e){var t=e.blogUrl,n=u_e((0,Gt.useState)(null),2),r=n[0],o=n[1],a=u_e((0,Gt.useState)(null),2),i=a[0],l=a[1],s=u_e((0,Gt.useState)(!1),2),c=s[0],u=s[1],d=(0,Vt.v9)(XO),f=(0,Vt.v9)(AR),m=(0,Vt.v9)(LR),p=(0,Vt.v9)(PR),h=(0,Vt.I0)(),v=(null==f?void 0:f[0])||null,g=(0,Gt.useMemo)(c_e,[]);(0,Gt.useEffect)((function(){h((0,dm.Ax)(eT.action)({blogUrl:t}))}),[]);var y=function(e){return h((0,dm.Ax)(tT.action)(e))},_=function(e){var t=e?g:nr().payoutSystems;return null!=v?t.find((function(e){return e.id.toLowerCase()===v.systemId})):null},E=function(e){var t=_(e);return null!=v&&null!=t?t.options.find((function(e){return e.currency===v.currency})):null},b=function(){return r||_()},S=function(){var e;return(null==i?void 0:i.currency)||(null==v?void 0:v.currency)||function(e){var t=nr(),n=t.countriesListPaymentCardsRU,r=t.location.isEUCountry;return n.includes(e)?mt.RUB:r?mt.EUR:e===Ae.UKRAINE?mt.UAH:mt.USD}(null===(e=null==d?void 0:d.geo)||void 0===e?void 0:e.country)};return{payoutCardFrame:p,isPayoutChangeFetching:m,isResetting:c,activePayout:v,currency:S(),activeSystem:_(),payoutSystem:b(),payoutSystems:g,payoutSystemOption:function(){var e,t,n=S();return i||(E()&&!E().isDisabled?E():(null===(e=b())||void 0===e?void 0:e.options.find((function(e){return e.currency===n})))||(null===(t=b())||void 0===t?void 0:t.options[0])||null)}(),onSubmit:function(e){return n=function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(t){switch(t.label){case 0:return[4,y(e)];case 1:return t.sent(),u(!1),[2]}}))},new((t=void 0)||(t=Promise))((function(e,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function a(e){try{i(n.throw(e))}catch(e){r(e)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,a)}i((n=n.apply(void 0,[])).next())}));var t,n},onSelectSystem:function(e){var t=S();o(e),l(e.options.find((function(e){return e.currency===t}))||e.options[0])},onSelectOption:function(e){l(e)},onStartEdit:function(){u(!0),o(_(Boolean(v))),l(E(Boolean(v)))},fetchBlogPayoutCardFrame:function(){h((0,dm.Ax)($S.action)())}}}({blogUrl:Gf().blogUrl}),t=e.activePayout,n=e.activeSystem,r=e.currency,o=e.isResetting,a=e.payoutSystem,i=e.payoutCardFrame,l=e.isPayoutChangeFetching,s=e.payoutSystemOption,c=e.payoutSystems,u=e.onSubmit,d=e.onStartEdit,f=e.onSelectSystem,m=e.onSelectOption,p=e.fetchBlogPayoutCardFrame,h=null==n||o;return Gt.createElement("div",{className:"BlogWithdrawal_root_pfczp"},Gt.createElement("div",{className:"BlogWithdrawal_leftCol_xH09h"},Gt.createElement(l_e,{activeSystem:n,currency:r,isEditable:h,selectedSystem:a,systems:c,onSelectSystem:function(e,t){if(void 0===t&&(t=!0),t){var n=(0,ii.debounce)(f,100);Of("smooth"),n(e)}else f(e)}})),Gt.createElement("div",{className:"BlogWithdrawal_mainCol_cCNfS"},null!=a&&Gt.createElement(z_e,{isResetting:o,isSubmitting:l,payoutSystem:a,payoutSystemOption:s,payoutCardFrame:i,activePayout:t,fetchPayoutCardFrame:p,onSelectOption:m,onSubmit:u,startEdit:d})),Gt.createElement("div",{className:"BlogWithdrawal_rightCol_goyH6"},null!=a&&Gt.createElement(r_e,{system:a,systemOption:s},Gt.createElement(m_e,{system:a}))))},accessLevel:Le.blogger},{path:"".concat(ir.BLOG_PAYOUT_HISTORY,"/*"),component:Yhe,accessLevel:Le.blogger},{path:"".concat(ir.BLOG_HOLDS,"/*"),component:function(){var e=jG().showAlert;return Gt.createElement(X_e,{showAlert:e,RowsComponent:$_e,Component:function(e){var t=e.children;return Gt.createElement("div",{className:"BlogHolds_container_fyzL_"},t)},FooterComponent:uhe})},accessLevel:Le.blogger},{path:"".concat(ir.BLOG_REFS,"/*"),component:mve,accessLevel:Le.blogger}]},{path:ir.BLOG_SUBSCRIPTION_LEVELS_ADD,component:function(){var e=(0,dH.useOverlayPopups)().showPopup,t=Mf(),n=Gf().blogUrl,r=function(){t((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:n}))};return Gt.createElement(PIe,{title:yNe.title,onBackClick:r},Gt.createElement(gNe,{classNames:{root:"BlogSubscriptionLevelsAdd_root_Lsz1h",wrapper:"BlogSubscriptionLevelsAdd_wrapper__bPrI",leftBlock:"BlogSubscriptionLevelsAdd_leftBlock_hvKkU",rightBlock:"BlogSubscriptionLevelsAdd_rightBlock_oxHyg",form:"BlogSubscriptionLevelsAdd_form_wB42D",formPrice:"BlogSubscriptionLevelsAdd_price_RMtpN",formButtons:"BlogSubscriptionLevelsAdd_buttons_EUnaX"},showExampleSubscriptionLevels:function(){e({type:a.SUBSCRIPTION_LEVELS_EXAMPLE})},showPreviewMessage:function(t){e({type:a.PREVIEW_MESSAGE,data:{message:t}})},onClose:r}))}},{path:ir.BLOG_SUBSCRIPTION_LEVELS_EDIT,component:function(){var e=Mf(),t=(0,dH.useOverlayPopups)().showPopup,n=Gf(),r=n.blogUrl,o=n.levelId,i=function(){e(-1)};return Gt.createElement(PIe,{title:bNe.title,onBackClick:i},Gt.createElement(ENe,{classNames:{root:"BlogSubscriptionLevelsEdit_root_zNbge",leftBlock:"BlogSubscriptionLevelsEdit_leftBlock_sma4Q",rightBlock:"BlogSubscriptionLevelsEdit_rightBlock_xfYpM",form:"BlogSubscriptionLevelsEdit_form_MRjG_",formPrice:"BlogSubscriptionLevelsEdit_price_vSYL1",formButtons:"BlogSubscriptionLevelsEdit_buttons_LdFMe",formRemoveButton:"BlogSubscriptionLevelsEdit_removeButton_znMoi"},showPreviewMessage:function(e){t({type:a.PREVIEW_MESSAGE,data:{message:e}})},showExampleSubscriptionLevels:function(){t({type:a.SUBSCRIPTION_LEVELS_EXAMPLE})},onRemove:function(){t({type:a.SUBSCRIPTION_LEVEL_REMOVE,data:{blogUrl:r,levelId:o,onRemove:function(){return e(-1)}}})},onClose:i}))}},{path:ir.BLOG_NEW_POST,component:ZAe},{path:ir.BLOG_EDIT_POST,component:rPe},{path:"".concat(ir.BLOG_STREAM,"/*"),component:Mfe},{path:"".concat(ir.BLOG_STREAM_ONLY_CHAT,"/*"),component:function(){var e=L3().showPopup;return Gt.createElement(zpe,{showAuth:function(){return e({type:a.AUTH_SIGN_IN})}})}},{path:ir.BLOG_STREAM_EDIT,component:function(){var e=Mf(),t=(0,Vt.v9)(XO),n=(0,Vt.v9)(zP);return Gt.createElement(Vfe,{title:n?Vpe.editTitle:Vpe.title,onBackClick:function(){e((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:t.blogUrl}))}},Gt.createElement(Wpe,null))}},{path:"".concat(ir.SEARCH_BY_BLOGS,"/*"),component:YCe},{path:ir.BLOG,component:function(){var e,t,n=function(){var e=function(){var e=Gf(),t=e.blogUrl,n=e.mediaType,r=e.postId,o=(0,Vt.I0)(),a=rk(),i=(0,Vt.v9)(Hw),l=n||r?b.POST:b.BLOG,s=Boolean(r),c=r?{commentsLimit:nr().comments.fullPageLimit,repliesLimit:nr().comments.fullPageRepliesLimit}:{commentsLimit:nr().comments.feedLimit,repliesLimit:nr().comments.feedRepliesLimit},u=[(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:t}),(0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:t,mediaType:ht.ALL}),(0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:t,mediaType:ht.AUDIO}),(0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:t,mediaType:ht.IMAGE}),(0,Yt.getParametrizedUrl)(ir.MEDIA,{blogUrl:t,mediaType:ht.VIDEO})];return(0,Gt.useEffect)((function(){Tse(a.getState(),{params:{blogUrl:t}}).forEach((function(e){return o(e())}))}),[t]),{commentsConfig:c,blogUrl:t,contentOriginContext:l,mediaType:n,pagesToKeepPositionBetween:u,postId:r,isBlogPostPage:s,blog:i}}(),t=e.blog,n=e.blogUrl,r=e.mediaType,o=e.postId,i=e.commentsConfig,l=e.contentOriginContext,s=e.isBlogPostPage,c=e.pagesToKeepPositionBetween,u=(0,dH.useOverlayPopups)().showPopup,d=function(){var e=(0,Vt.v9)(zP),t=(0,Vt.I0)(),n=Gf().blogUrl;return{stream:e,resetStream:(0,Gt.useCallback)((function(){t(yp())}),[]),removeStream:(0,Gt.useCallback)((function(){t(_p({blogUrl:n}))}),[n]),fetchStream:(0,Gt.useCallback)((function(){t(np({blogUrl:n}))}),[n])}}(),f=d.stream,m=d.resetStream,p=d.fetchStream,h=r?bse:s?Sse:Ese,v=r?ir.BLOG_MEDIA_ABOUT_EDIT:ir.BLOG_ABOUT_EDIT,g=o?{userCard:{isMinified:!0},hasCover:!1,wrapFollowersCounter:!1,comments:{inputIsAlwaysVisible:!0}}:{wrapFollowersCounter:!0};return $G((function(){s||(m(),p())}),[n]),{commentsConfig:i,blogUrl:n,urls:h,editUrl:v,contentOriginContext:l,isBlogPostPage:s,view:g,pagesToKeepPositionBetween:c,blog:t,stream:f,showAuthPopup:function(){u({type:a.AUTH_SIGN_IN})}}}(),r=n.commentsConfig,o=n.blogUrl,i=n.blog,l=n.stream,s=n.urls,c=n.editUrl,u=n.view,d=n.contentOriginContext,f=n.pagesToKeepPositionBetween,m=n.isBlogPostPage,p=n.showAuthPopup,h=(e=(0,Vt.v9)(lO),t=(0,Vt.v9)(iO),{any:e||t,total:t,readonly:e,description:(0,Vt.v9)(sO)}),v=YU({banStatus:h}).shouldShowBanDisclaimer;return i?Gt.createElement(Zf.Provider,{value:r},Gt.createElement(Hd.Provider,{value:d},Gt.createElement(NH.Provider,{value:o},Gt.createElement(KU.Provider,{value:{banStatus:h}},Gt.createElement(zre,{urls:s,view:u,pagesToKeepPositionBetween:f},!m&&!v&&Gt.createElement(_se,{blog:i,stream:l,editUrl:c,showAuth:p}),Gt.createElement(Bf.j3,null)))))):Gt.createElement(Zf.Provider,{value:r},Gt.createElement(Hd.Provider,{value:d},Gt.createElement(NH.Provider,{value:o},Gt.createElement(KU.Provider,{value:{banStatus:h}},Gt.createElement(zre,{pagesToKeepPositionBetween:f,urls:s,view:u},Gt.createElement(ZY,null))))))},routes:[{path:"".concat(ir.BLOG_POST,"/*"),component:Efe},{path:"".concat(ir.MEDIA,"/*"),component:RCe},{path:"".concat(ir.BLOG,"/*"),component:pfe,index:!0}]}],Wke=[{path:ir.FEED_PURCHASE,component:mPe},{path:ir.FEED_SINGLE_PAYMENT,component:mPe},{path:ir.FEED_SINGLE_PAYMENT_DONATION,component:mPe},{path:ir.FEED_PHOTO_LAYER,component:wPe},{path:ir.FEED_PURCHASE_GIFT,component:kOe},{path:ir.FEED_TRIAL_ACTIVATION,component:hOe},{path:ir.BLOG_ABOUT_EDIT,component:lPe},{path:ir.BLOG_ACCEPT_GIFT_BIND_CARD,component:oLe},{path:ir.BLOG_ACCEPT_GIFT,component:function(){var e=Gf(),t=e.giftKey,n=e.blogUrl,r=Mf(),o=(0,Vt.v9)(XO),a=(0,Vt.v9)(sA),l=function(e){var t,n=e.giftKey,r=e.blogUrl,o=(0,Vt.I0)(),a=PD({id:n,type:Ce.GIFT}).sendPaymentStat,l=(0,Vt.v9)(uA),s=(0,Vt.v9)(fA),c=(0,Vt.v9)(YL),u=(0,Vt.v9)(qL),d=(0,Vt.v9)(XL),f=(0,Vt.v9)(QL),m=(0,Vt.v9)(JL),p=(0,Vt.v9)(NL),h=(0,Vt.v9)(pL),v=(0,Vt.v9)(EA),g=_k(),y=g.currentUser,_=g.isAuthorized,E=c.find((function(e){return e.key===n}))||u,b=!f&&!!h,S=_&&(null==E?void 0:E.blog.owner.id)===y.id,T=_&&(null===(t=null==E?void 0:E.donator)||void 0===t?void 0:t.id)===y.id,I=d.isFetched&&s.isFetched&&p.isFetched&&E,N=null==l?void 0:l.some((function(e){return!e.deleted&&e.payMethod===Ee.CARD})),C=XW((0,Gt.useState)(I?RW.START:RW.LOADING),2),w=C[0],O=C[1],A=XW((0,Gt.useState)(!1),2),P=A[0],L=A[1],R=function(){return KW(void 0,void 0,void 0,(function(){return qW(this,(function(e){return[2,o((0,dm.Ax)(qp.action)({blogUrl:r}))]}))}))},k=function(){a(We.ACCEPT_GIFT_ACCEPT),O(RW.LOADING),KW(void 0,void 0,void 0,(function(){return qW(this,(function(e){return[2,o((0,dm.Ax)(PE.action)({giftKey:n}))]}))}))};(0,Gt.useEffect)((function(){L("true"===jf(i.HAS_CARD_BINDS))}),[]),(0,Gt.useEffect)((function(){return _&&(0!==l.length||s.isFetching||o($v.action({withDeleted:!1,currency:v})),E||KW(void 0,void 0,void 0,(function(){return qW(this,(function(e){return[2,o((0,dm.Ax)(OE.action)({giftKey:n}))]}))})),p.isFetched||R()),function(){return o(DE()),void o(kE())}}),[_]),(0,Gt.useEffect)((function(){I?f?(O(RW.SUCCESS),a(We.ACCEPT_GIFT_SUCCESS)):S||T||b?(O(RW.ERROR_CANT_BE_ACCEPTED),a(We.ACCEPT_GIFT_ERROR)):P?k():O(RW.START):(d.error||s.error||p.error)&&(O(RW.ERROR_ALREADY_ACCEPTED),a(We.ACCEPT_GIFT_ERROR))}),[d,s,p,P]),(0,Gt.useEffect)((function(){f?(O(RW.SUCCESS),a(We.ACCEPT_GIFT_SUCCESS),KW(void 0,void 0,void 0,(function(){return qW(this,(function(e){return[2,o((0,dm.Ax)(Nm.action)({blogUrl:r}))]}))})),R()):m.error&&(O(RW.ERROR_ALREADY_ACCEPTED),a(We.ACCEPT_GIFT_ERROR))}),[f,m]);var D="description.".concat(w);if(w===RW.ERROR_CANT_BE_ACCEPTED)switch(!0){case T:D+=".donator";break;case S:D+=".blogger";break;case b:D+=".subscriber"}var U=(0,Qr.getParametrizedText)(QW.title[w===RW.LOADING?RW.START:w],{blogTitle:null==E?void 0:E.blog.owner.name}),B=(0,ii.get)(QW,D);return{gift:E,step:w,hasCardBinds:N,title:U,description:B,onAcceptGiftClick:k}}({giftKey:t,blogUrl:n}),s=l.step,c=l.title,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(l,["step","title"]),d=PD({id:t,type:Ce.GIFT}).sendPaymentStat,f=function(e){zf(i.HAS_CARD_BINDS,"false"),r((0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:n})),e&&d(We.ACCEPT_GIFT_CLOSE_BY_CROSS)};return Gt.createElement(R3,{currentUser:o,currentUserNetworkStatus:a,onCloseLogin:function(){r((0,Yt.getParametrizedUrl)(ir.BLOG_ACCEPT_GIFT,{blogUrl:n,giftKey:t}))}},Gt.createElement(PM,{classNames:{title:"GiftsAccept_title_yjks9",block:"GiftsAccept_block_prpr3"},onClose:function(){return f(!0)},title:[RW.LOADING,RW.START].includes(s)&&Gt.createElement(Gt.Fragment,null,Gt.createElement(pB,{glyph:hB.Lmt,className:"GiftsAccept_giftIcon_TVZae",classNameSvg:"GiftsAccept_giftIconSvg_wu1KX"}),c)},Gt.createElement(LOe,ROe({step:s,title:c,onClose:function(){return f(!1)},onBindCardClick:function(){r((0,Yt.getParametrizedUrl)(ir.BLOG_ACCEPT_GIFT_BIND_CARD,{blogUrl:n,giftKey:t}))}},u))))}},{path:ir.BLOG_PHOTO_LAYER,component:wPe},{path:ir.BLOG_MESSAGE_PHOTO_LAYER,component:wPe},{path:ir.BLOG_PURCHASE,component:mPe},{path:ir.BLOG_TUTORIAL_OFFERS,component:function(){var e=nr().successStoriesUrl,t=(0,Vt.I0)(),n=Mf(),r=Gf().blogUrl,o=(0,Vt.v9)(XR);return(0,Gt.useEffect)((function(){t((0,dm.Ax)(cT.action)())}),[]),Gt.createElement(PM,{onClose:function(){n(-1)},classNames:{block:"TutorialOffers_popup_Rb_D_"},title:cPe.title},Gt.createElement("div",{className:sPe},(0,Qr.getParametrizedText)(cPe.description,{projectNameCapitalized:nr().projectName.capitalized})),o&&Object.keys(o).length>0&&Object.values(o).map((function(e,t){return Gt.createElement("div",{key:t},Gt.createElement("div",{className:"TutorialOffers_subTitle_kDYrV"},e.subTitle),Gt.createElement("div",{className:cG()(sPe,"TutorialOffers_transparentText_XBJZQ")},e.description))})),e&&Gt.createElement("div",{className:"TutorialOffers_linkWrapper_z0D0I"},Gt.createElement(cM,{to:e,className:"TutorialOffers_link_ZbLIJ",target:"_blank"},cPe.successStoriesUrl)),Gt.createElement("div",null,Gt.createElement(FB,{className:"TutorialOffers_button_UlxOi",onClick:function(e){e.preventDefault(),n((0,Yt.getParametrizedUrl)(ir.BLOG_SUBSCRIPTION_LEVELS_ADD,{blogUrl:r}),{replace:!0})}},cPe.button)))}},{path:ir.BLOG_TARGET_ADD,component:HPe},{path:ir.BLOG_TARGET_EDIT,component:jPe},{path:ir.BLOG_SINGLE_PAYMENT,component:mPe},{path:ir.BLOG_SINGLE_PAYMENT_DONATION,component:mPe},{path:ir.BLOG_DONATE,component:mPe},{path:ir.BLOG_MESSAGE_SINGLE_PAYMENT,component:mPe},{path:ir.BLOG_MESSAGE_SINGLE_PAYMENT_DONATION,component:mPe},{path:ir.BLOG_MESSAGE_PURCHASE,component:mPe},{path:ir.BLOG_STATISTICS_EXPORT,component:aRe},{path:ir.BLOG_STATISTICS_CATEGORY_EXPORT,component:aRe},{path:ir.BLOG_POST_PURCHASE,component:mPe},{path:ir.BLOG_POST_TARGET_ADD,component:HPe},{path:ir.BLOG_POST_TARGET_EDIT,component:jPe},{path:ir.BLOG_POST_SINGLE_PAYMENT,component:mPe},{path:ir.BLOG_POST_SINGLE_PAYMENT_DONATION,component:mPe},{path:ir.BLOG_POST_PHOTO_LAYER,component:wPe},{path:ir.BLOG_POST_PURCHASE_GIFT,component:kOe},{path:ir.BLOG_POST_TRIAL_ACTIVATION,component:hOe},{path:ir.SETTINGS_AGENT_ASSIGN,component:function(){var e=Mf();return Gt.createElement(PM,{onClose:function(){e(ir.SETTINGS_AGENTS)},title:eLe.assignAgent,classNames:{block:"SettingsAssignAgent_block_cIt9d",close:"SettingsAssignAgent_close_AIZcz",title:"SettingsAssignAgent_title_yH3Yi"}},Gt.createElement($Pe,null))},accessLevel:Le.authorized},{path:ir.SETTINGS_AGENT_RIGHTS,component:function(){var e=Mf();return Gt.createElement(PM,{onClose:function(){e(ir.SETTINGS_AGENTS)},title:rLe.agentRights,classNames:{title:"SettingsShowAgentRights_title_eGP24"}},Gt.createElement(nLe,null))},accessLevel:Le.authorized},{path:ir.SETTINGS_NEW_CARD,component:oLe},{path:ir.BLOG_PURCHASE_GIFT,component:kOe},{path:ir.BLOG_STREAM_PURCHASE,component:mPe},{path:ir.BLOG_TRIAL_ACTIVATION,component:hOe},{path:ir.BLOG_MEDIA_PURCHASE,component:mPe},{path:ir.BLOG_MEDIA_PURCHASE_GIFT,component:kOe},{path:ir.BLOG_MEDIA_SINGLE_PAYMENT,component:mPe},{path:ir.BLOG_MEDIA_SINGLE_PAYMENT_DONATION,component:mPe},{path:ir.BLOG_MEDIA_TARGET_ADD,component:HPe},{path:ir.BLOG_MEDIA_TARGET_EDIT,component:jPe},{path:ir.BLOG_MEDIA_ABOUT_EDIT,component:lPe},{path:ir.BLOG_MEDIA_TRIAL_ACTIVATION,component:hOe},{path:ir.BLOG_TRIAL_ACTIVATION_BIND_CARD,component:oLe,accessLevel:Le.authorized},{path:ir.BLOG_POST_TRIAL_ACTIVATION_BIND_CARD,component:oLe,accessLevel:Le.authorized},{path:ir.BLOG_MEDIA_TRIAL_ACTIVATION_BIND_CARD,component:oLe,accessLevel:Le.authorized},{path:ir.BLOG_PROMO_NEW,component:function(){var e=Gf().blogUrl,t=Mf();return Gt.createElement(dLe,null,Gt.createElement(GLe,{onClose:function(){t((0,Yt.getParametrizedUrl)(ir.BLOG_PROMO,{blogUrl:e}))}}))}}],Vke=fte(Hke),jke=fte(Wke),zke=[],Yke=function(){var e=Zo(k.DOM_CONTENT_LOADED),t=Zo(k.MAIN_DOCUMENT),n=Zo(k.TTFP),r=Zo(k.MAIN_STATIC_FILES),o=Zo(k.LCP),a=Zo(k.TIME_FROM_LOADING_SCRIPTS_TO_MOUNT_APP),i=function(e){var t=PerformanceObserver.supportedEntryTypes||[];return e.filter((function(e){return t.includes(e)}))};(0,Gt.useEffect)((function(){"PerformanceObserver"in window&&(function(n){var o={staticFiles:!1,tlsma:!1,domContentLoaded:!1,mainDocumentLoaded:!1},l=i(["resource","navigation"]),s=new PerformanceObserver((function(i){var l=i.getEntries();r&&!o.staticFiles&&(function(e){var t,n,r,o,a=nr().performanceMetrics.staticFiles,i=a[D.APP_JS],l=a[D.VENDOR_JS],s=a[D.ICONS_JS],c=a[D.STYLES_CSS],u=e.filter((function(e){return"script"===e.initiatorType||"link"===e.initiatorType}));if(u.forEach((function(e){if(e.name.includes("styles")){var t=e.responseEnd-e.fetchStart,n=t>=c.minTime&&t<=c.maxTime;zke.push({name:"styles",timing:n?t:null})}if(e.name.includes("app")){var r=e.responseEnd-e.fetchStart,o=r>=i.minTime&&r<=i.maxTime;zke.push({name:"app",timing:o?r:null})}if(e.name.includes("vendor")){var a=e.responseEnd-e.fetchStart;o=a>=l.minTime&&a<=l.maxTime,zke.push({name:"vendor",timing:o?a:null})}if(e.name.includes("icons")){var u=e.responseEnd-e.fetchStart;o=u>=s.minTime&&u<=s.maxTime,zke.push({name:"icons",timing:o?u:null})}})),u.length>0&&u.every((function(e){return e.responseEnd>0}))){var d=null===(t=zke.find((function(e){return"app"===e.name})))||void 0===t?void 0:t.timing,f=null===(n=zke.find((function(e){return"vendor"===e.name})))||void 0===n?void 0:n.timing,m=null===(r=zke.find((function(e){return"icons"===e.name})))||void 0===r?void 0:r.timing,p=null===(o=zke.find((function(e){return"styles"===e.name})))||void 0===o?void 0:o.timing;bd.log.metrics.sendPerformanceMainStaticFilesMetric({vendorJS:f,appJS:d,iconsJS:m,stylesCSS:p})}}(l),o.staticFiles=!0),e&&!o.domContentLoaded&&(function(e){var t=nr(),n=k.DOM_CONTENT_LOADED,r=t.performanceMetrics.common[n],o=e.filter((function(e){return"navigation"===e.entryType}));if(o.length){var a=o[o.length-1],i=a.domContentLoadedEventEnd-a.startTime;i>=r.minTime&&i<=r.maxTime&&bd.log.metrics.sendPerformanceMetric({metric:k.DOM_CONTENT_LOADED,time:i})}}(l),o.domContentLoaded=!0),t&&!o.mainDocumentLoaded&&(function(e){var t=nr(),n=k.DOM_CONTENT_LOADED,r=t.performanceMetrics.common[n],o=e.filter((function(e){return"navigation"===e.entryType}));if(o.length){var a=o[o.length-1],i=a.responseEnd-a.fetchStart;i>=r.minTime&&i<=r.maxTime&&bd.log.metrics.sendPerformanceMetric({metric:k.MAIN_DOCUMENT,time:i})}}(l),o.mainDocumentLoaded=!0),a&&!o.tlsma&&(function(e,t){var n=nr(),r=k.TIME_FROM_LOADING_SCRIPTS_TO_MOUNT_APP,o=n.performanceMetrics.common[r],a=e.filter((function(e){return"script"===e.initiatorType}));if(a.length>0&&a.every((function(e){return e.responseEnd>0}))){var i=window.performance.now()-t;i>=o.minTime&&i<=o.maxTime&&bd.log.metrics.sendPerformanceMetric({metric:k.TIME_FROM_LOADING_SCRIPTS_TO_MOUNT_APP,time:i})}}(l,n),o.tlsma=!0)}));try{!navigator.userAgent.match(/ipad|iphone/i)||function(){var e=navigator.userAgent.match(/(iPad|iPhone|iPod)\s+OS\s([\d_]+)/);if(e&&e[2]){var t=e[2].replace(/_/g,".");return parseFloat(t)}return null}()>=14?(s.observe({type:"navigation",buffered:!0}),s.observe({type:"resource",buffered:!0})):l.length&&s.observe({entryTypes:l})}catch(e){Yt.Log.error("Failed performance observer observe",e)}}(window.performance.now()),function(){var e=i(["largest-contentful-paint","paint"]),t=new PerformanceObserver((function(e){var t=e.getEntries();o&&function(e){var t=nr(),n=k.LCP,r=t.performanceMetrics.common[n],o=e.filter((function(e){return"largest-contentful-paint"===e.entryType}));if(o.length>0){var a=o[o.length-1].startTime;a>=r.minTime&&a<=r.maxTime&&bd.log.metrics.sendPerformanceMetric({metric:k.LCP,time:a})}}(t),n&&function(e){var t=nr(),n=k.TTFP,r=t.performanceMetrics.common[n];e.forEach((function(e){if("first-contentful-paint"===e.name){var t=e.startTime;t>=r.minTime&&t<=r.maxTime&&bd.log.metrics.sendPerformanceMetric({metric:k.TTFP,time:e.startTime})}}))}(t)}));if(e.length)try{t.observe({entryTypes:e})}catch(e){Yt.Log.error("Failed performance observer observe",e)}}())}),[])},Kke=((Ake={})[Ke.DARK]="#191919",Ake[Ke.LIGHT]="#ffffff",Ake[Ke.LIGHT_X]="#ffffff",Ake),qke=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Xke=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Qke=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Jke=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Zke=function(e){var t,n=e.routes,a=ya(),l=(0,Vt.I0)(),s=_k(),c=s.currentUser,u=s.isAuthorized,d=Ok(u),f=Ck(),m=f.isBanned,p=f.isBlogger,h=(0,Vt.v9)(Ww),g=(0,Vt.v9)(zP),y=(0,Vt.v9)(KP),_=(0,Vt.v9)(DR),E=(0,Vt.v9)(yR),b=(0,Vt.v9)(vA),S=(0,Vt.v9)(lO),T=(0,Vt.v9)(wA),I=xf().pathname,N=Ok(I),C=Mf(),w=fk().theme,O=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)(!1),2),A=O[0],P=O[1],L=_f(I,ir.MAIN,!1),R=_f(I,Sr,!1),k=L&&Rr(),D=_f(I,"".concat(ir.SEARCH_BY_BLOGS,"/*"),!1),B=_f(I,"".concat(ir.SEARCH_BY_POSTS,"/*"),!1),x=_f(I,[ir.BLOG_REFS,ir.BLOG_REF_LANDING,ir.OFFERS_REF_POLICY],!1),F=_f(I,"".concat(ir.LANDING_DONATION_ALERTS,"/*"),!1),G=Qo(r.SEARCH_BY_BLOGS),H=Qo(r.SEARCH_BY_POSTS),W=Qo(r.REFERRAL_PROGRAM),V=Qo(r.TELEGRAM)||Qo(r.DISCORD),j=Qo(r.LANDING_DONATION_ALERTS),z=_f(I,"".concat(ir.SETTINGS_EXTERNAL_APP),!1),Y=D&&!G||B&&!H||x&&!W||z&&!V||F&&!j,K=cm(I),q=K.isFeedPage,X=K.isBlogPage;(function(e){var t=e.routes,n=xf(),r=n.pathname,o=n.search,a=_k(),i=a.currentUser,l=a.isBlogger;(0,Gt.useEffect)((function(){!function(){var e,n=(0,Do.parse)(o),a=n.share&&!Array.isArray(n.share)?n.share:null,s=null==i?void 0:i.counts,c=null===(e=Uf(t,r))||void 0===e?void 0:e[0];if(c){var u=c.params.blogUrl;bd.setRouteData({url:r,match:{blogUrl:u}}),bd.log.navigation.visitRoute({shareReferrer:a,isBlogger:l,hasNotifications:(null==s?void 0:s.unreadStandaloneNotify)>0,hasMessages:(null==s?void 0:s.unreadMsg)>0})}}()}),[r])})({routes:n}),function(){var e,t,n=xf(),r=Uf(ga(),n.pathname),o=r.length?null===(t=null===(e=r[0])||void 0===e?void 0:e.params)||void 0===t?void 0:t.postId:null,a=(0,Vt.v9)(Hw),i=(0,Vt.v9)(Tw),l=(0,Vt.v9)(Bw),s=(0,Vt.v9)(zP),c=Iw(l,i,o),u=xf().pathname,d=nr().locale;(0,Gt.useEffect)((function(){return e=(0,Qr.getLocales)(),t=function(e,t,n){var r=n.projectName||nr().projectName,o=(0,Qr.getParametrizedText)(t.default,{hostMainCapitalized:(0,Yt.strCapitalize)(r.hostMain)}),a=r.latinCapitalized;try{switch(!0){case e.startsWith("/app/"):switch(!0){case/^\/app\/settings\/edit\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.settings,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/app\/settings\/subscriptions\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.subscriptions,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/app\/settings\/notifications\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.notifications,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/app\/settings\/external-apps\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.externalApps,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/app\/settings\/blacklist\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.blacklist,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/app\/offer\/user\/?$/.test(e):o=t.offerUser;break;case/^\/app\/offer\/payment-terms\/?$/.test(e):o=t.offerPaymentTerms;break;case/^\/app\/offer\/privacy-policy\/.*\/?$/.test(e):o=t.offerPrivacyPolicy;break;case/^\/app\/offer\/ref\/?$/.test(e):o=t.offerRefPolicy;break;case/^\/app\/offer\/cookie\/?$/.test(e):o=t.offerCookiePolicy;break;case/^\/app\/support\/?$/.test(e):o=t.support}break;case/^\/[\d\w_.-]+?\/blog\/statistics\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.statistics,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/[\d\w_.-]+?\/blog\/subscribers\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.subscribers,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/[\d\w_.-]+?\/blog\/donations\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.donations,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/[\d\w_.-]+?\/blog\/post-sales\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.postSales,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/[\d\w_.-]+?\/blog\/withdrawal-methods\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.withdrawalMethods,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/[\d\w_.-]+?\/blog\/payout-history\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.payoutHistory,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/[\d\w_.-]+?\/blog\/refs\/?$/.test(e):o=(0,Qr.getParametrizedText)(t.refs,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/[\d\w_.-]+?\/posts\/[\d\w-]+?\/?/.test(e):var i=n.blog,l=n.blogPost,s=n.locale,c=(null==l?void 0:l.publishTime)&&bo(l.publishTime,s)||"";i&&(o=l?l.title?"".concat((0,Qr.getParametrizedText)(t.post,{bloggerName:i.owner.name,postTitle:l.title,projectNameEnglishOnlyCapitalizes:a})," ").concat(i.hasAdultContent?t.adultContent:""):"".concat((0,Qr.getParametrizedText)(t.postWithoutTitle,{bloggerName:i.owner.name,publishedAt:c,projectNameEnglishOnlyCapitalizes:a})," ").concat(i.hasAdultContent?t.adultContent:""):"".concat((0,Qr.getParametrizedText)(t.blog,{bloggerName:i.owner.name,projectNameEnglishOnlyCapitalizes:a})," ").concat(i.hasAdultContent?t.adultContent:""));break;case/^\/[\d\w_.-]+?\/messages?/.test(e):o=(0,Qr.getParametrizedText)(t.messages,{projectNameEnglishOnlyCapitalizes:a});break;case/^\/[\d\w_.-]+?\/streams?/.test(e):var u=n.stream;i=n.blog,o=u.title?"".concat((0,Qr.getParametrizedText)(t.stream,{streamTitle:u.title,bloggerName:i.owner.name,projectNameEnglishOnlyCapitalizes:a})," ").concat(i.hasAdultContent?t.adultContent:""):(0,Qr.getParametrizedText)(t.blog,{bloggerName:i.owner.name,projectNameEnglishOnlyCapitalizes:a});break;case/^\/[\d\w_.-]+?\/?/.test(e):(i=n.blog)&&(o="".concat((0,Qr.getParametrizedText)(t.blog,{bloggerName:i.owner.name,projectNameEnglishOnlyCapitalizes:a})," ").concat(i.hasAdultContent?t.adultContent:""))}}catch(e){e instanceof Error&&ho.error("Failed build page title: ".concat(e&&e.toString()?e.toString():String(e),"}"))}return o}(u,e["@boosty/common/utils.getPageTitle"],{blog:a,blogPost:c,locale:d,stream:s}),void(document.title=t);var e,t}))}(),function(){var e=(0,Vt.I0)(),t=_k(),n=t.currentUser,r=t.isAuthorized,o=Ok(r),a=nr().websocket,i=a.isEnabled,l=a.token,s=function(t){return qke(void 0,void 0,void 0,(function(){return Xke(this,(function(n){switch(n.label){case 0:return t&&l?[2,{token:l}]:[4,e((0,dm.Ax)(Yb.action)())];case 1:return[2,n.sent()]}}))}))},c=function(e){return qke(void 0,void 0,void 0,(function(){var t;return Xke(this,(function(o){switch(o.label){case 0:return i?[4,s(e)]:[3,2];case 1:t=o.sent().token,sk.setToken(t).connect(),r&&sk.subscribe([{type:Xe.USER,channel:n.webSocket.channel}]),o.label=2;case 2:return[2]}}))}))},u=function(){i&&sk.disconnect()};(0,Gt.useEffect)((function(){return c(!0),function(){u()}}),[]),(0,Gt.useEffect)((function(){null!=o&&r!==o&&(u(),c(!1))}),[r])}(),(0,Gt.useEffect)((function(){!window.location.host.startsWith("localhost")&&(0,Yt.getFromLocalStorage)(o.ACCOUNT_HAS_BEEN_DELETED)&&(0,Yt.removeFromLocalStorage)(o.ACCOUNT_HAS_BEEN_DELETED)}),[]),Yke(),function(){var e=Qo(r.FB_AUTH_DISABLED_DISCLAIMER),t=xf().pathname,n=Mf(),o=_k().currentUser,a=DV();(0,Gt.useEffect)((function(){!function(){if(e){var r=_f(t,ir.FB_AUTH,!1),o=encodeURIComponent("".concat(window.location.pathname).concat(window.location.search));a&&!r&&n((0,Yt.getParametrizedUrl)(ir.FB_AUTH,{},{back_url:o}),{replace:!0})}}()}),[o])}(),function(e){var t=e.theme,n=(0,Gt.useRef)(null),r=(0,Gt.useRef)(null),o=(0,Gt.useRef)(null),a=Ok(t);(0,Gt.useEffect)((function(){var e=document.createElement("meta");e.name="theme-color",e.content=Kke[t],o.current=document.querySelector("body"),n.current=document.querySelector("head"),r.current=n.current.appendChild(e)}),[]),(0,Gt.useEffect)((function(){var e,n,i;t!==a&&(n=(e={prev:a,next:t}).prev,i=e.next,o.current.classList.remove(n),o.current.classList.add(i),r.current.setAttribute("content",Kke[t]))}),[t])}({theme:w}),t=null==c?void 0:c.id,Xo=t,function(e){Jo=e}(null==c?void 0:c.id);var Q=function(){return setTimeout((function(){return P(!1)}))};(0,Gt.useEffect)((function(){q&&d!==u&&setTimeout(Of)}),[u,I]);var J=function(){if(I&&N&&I!==N){var e=a.some((function(e){return _f(I,e,!1)})),t=a.some((function(e){return _f(N,e,!1)})),n=_f(N,ur)&&_f(I,ur),r=_f(N,ir.BLOG_POST)&&(q||X);t||e||n||r||setTimeout(Of)}},Z=function(e){l((0,dm.Ax)(tg.action)({flag:e}))},$=function(){if(u){var e=-(new Date).getTimezoneOffset();c.timezone!==e&&l((0,dm.Ax)(ng.action)({timezone:e}))}},ee=function(e){if(void 0===e&&(e=!1),e||!bu(U.LAST_ACCOUNT))if(c.authSource.type!==v.PHONE||b){var t=nr().oauthCookieDomain,n={name:c.name,avatarUrl:c.avatarUrl,provider:c.authSource.type,phone:b};Su(U.LAST_ACCOUNT,JSON.stringify(n),{domain:t,path:"/"})}else l((0,dm.Ax)(Jv.action)())};return(0,Gt.useEffect)((function(){$()}),[]),(0,Gt.useEffect)((function(){u&&$()}),[u]),(0,Gt.useEffect)((function(){c&&(function(){var e=Boolean(function(e){try{return JSON.parse(Af(e))}catch(t){return t instanceof Error&&ho.error("Failed parse JSON from sessionStorage item ".concat(String(e)," : ").concat(t&&t.toString()?t.toString():String(t))),null}}(i.CAN_VIEW_ADULT_CONTENT)),t=Boolean(JSON.parse(bu(U.GDPR)||null)),n=!1===(0,Yt.getParsedFromLocalStorage)(o.HAS_TEASER_HELPER),r=!0===(0,Yt.getParsedFromLocalStorage)(o.IS_LEGAL_INFO_SEEN);!c.flags.canViewAdultContent&&e&&Z(i.CAN_VIEW_ADULT_CONTENT),n&&Z(o.HAS_TEASER_HELPER),t&&Z(U.GDPR.toUpperCase()),r&&Z(M.IS_LEGAL_INFO_SEEN),(0,Yt.removeFromLocalStorage)(o.HAS_TEASER_HELPER),(0,Yt.removeFromLocalStorage)(o.IS_LEGAL_INFO_SEEN),Tu(U.GDPR)}(),ee(!0)),bd.setCurrentUser(c),ho.setUserId(null==c?void 0:c.id)}),[c]),(0,Gt.useEffect)((function(){Q(),J()}),[I]),(0,Gt.useEffect)((function(){!u&&A&&Q()}),[u]),(0,Gt.useEffect)((function(){b&&ee(!0)}),[b]),{currentUser:c,isAuthorized:u,isBlogger:p,isBanned:m,blogNetworkStatus:h,stream:g,streamNetworkStatus:y,postsNetworkStatus:_,payoutHistoryNetworkStatus:E,userPhoneNumber:b,isBlogReadOnly:S,infoMessages:T,hasSubscriptionsMenu:A,theme:w,isMainPage:L,isFooterTransparent:k,isDisabledPage:Y,isPlainPage:R,routes:n,checkScrollTop:J,onSendEmailConfirmationLetter:function(){return Qke(void 0,void 0,void 0,(function(){return Jke(this,(function(e){return[2,l((0,dm.Ax)(ug.action)())]}))}))},onConfirmEmail:function(){return Qke(void 0,void 0,void 0,(function(){return Jke(this,(function(e){return[2,l((0,dm.Ax)(ng.action)({socialEmailConfirmed:!0}))]}))}))},onDismissEmail:function(){return Qke(void 0,void 0,void 0,(function(){return Jke(this,(function(e){return[2,l((0,dm.Ax)(dg.action)())]}))}))},onHideSubscriptionsMenu:Q,onToggleSubscriptionsMenu:function(){return P(!A)},onLogout:function(){l((function(e){return Hv(void 0,void 0,void 0,(function(){var t,n,r,o,a,i,l,s,c,u;return Wv(this,(function(d){switch(d.label){case 0:if(t=cf().accessToken,n=nr(),r=n.clientId,o=n.isLogoutByApi,a=n.oauthProviders,Tu(U.NEW_USER),uf(),!o)return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Kc.user.logout({access_token:t,device_id:r,device_os:Lr()})];case 2:return d.sent(),[3,4];case 3:return i=d.sent(),ho.error("Failed logout: ",i),[3,4];case 4:return(null===(u=a[fa.ProviderCodes.VKPlay])||void 0===u?void 0:u.skipGrants)&&(l=a[fa.ProviderCodes.VKPlay].skipGrants.timeout,s=l.enabled,c=l.duration,s&&Number(c)&&Su(U.SKIP_GRANTS,"true",{expires:new Date(Date.now()+1e3*c)})),e(Yv.action({user:null})),e(Nv.action()),[2]}}))}))}));var e=ir.MAIN,t=n.find((function(e){return Boolean(yf(e,I))}));if(t){var r=yf(t,I).params,o=r.blogUrl,a=r.postId,i=null!=o,s=i&&null!=a,c=i&&_f(I,ir.BLOG_STREAM,!1),u=_f(I,ir.MESSAGES,!1);s?e=(0,Yt.getParametrizedUrl)(ir.BLOG_POST,{blogUrl:o,postId:a}):c?e=(0,Yt.getParametrizedUrl)(ir.BLOG_STREAM,{blogUrl:o}):u?e=(0,Yt.getParametrizedUrl)(ir.MAIN):i&&(e=(0,Yt.getParametrizedUrl)(ir.BLOG,{blogUrl:o}))}C(e)},resetBlogStore:function(){l(ry())}}},$ke=function(){return $ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$ke.apply(this,arguments)},eDe=function(){return eDe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},eDe.apply(this,arguments)},tDe=function(){return tDe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tDe.apply(this,arguments)},nDe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},rDe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},oDe=function(e,t){var n=(0,Do.parse)(t).boosty_ui_theme;return _f(e,Ir,!1)||n===Ke.DARK?Ke.DARK:Ke.LIGHT},aDe=function(){var e=function(){var e=ga();return eDe({},function(e){var t=Zke({routes:e.routes}),n=xf(),r=n.pathname,o=n.search,a=_k(),i=a.isAuthorized,l=a.isBlogger,s=(0,Vt.v9)(XO),c=_f(r,dr,!1),u=_f(r,fr,!1),d=_f(r,mr,!1),f=!_f(r,cr,!1),m=!_f(r,pr,!1),p=!_f(r,yr,!1)&&i,h=yi(s)&&l&&!_f(r,hr,!1),v=jo(s)&&!_f(r,vr,!1),g=(0,Do.parse)(o).fast_auth,y=!function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,Gt.useState)("1"===g),1)[0]&&!_f(r,gr,!1)||t.isDisabledPage,_=!_f(r,_r,!1);return $ke($ke({},t),{isFullPageWidth:c,isResponsivePageWidth:u,isMonochromeBackground:d,isTopMenuVisible:y,isNoticeListVisible:p,isMarketingAlertVisible:m,isMainFeedAlertVisible:v,isFooterVisible:f,isGDPRVisible:_,isPromoAlertVisible:h})}({routes:e}))}(),t=xf(),n=t.pathname,r=t.search,o=fk(),a=o.theme,i=o.setTheme;return(0,Gt.useEffect)((function(){i(oDe(n,r))}),[]),(0,Gt.useEffect)((function(){var e=oDe(n,r);e===a||Nr.includes(n)||i(e)}),[n]),Gt.createElement(cte,tDe({},e),Gt.createElement(Vke,null),!e.isPlainPage&&Gt.createElement(jke,null))};aDe.getFetchActions=function(e,t){var n=t.currentUser,r=[];return(null==n?void 0:n.id)?(r.push((function(){return Mp.action({withFollow:!0})})),r.push.apply(r,rDe([],nDe([function(){return bg.action()}]),!1)),n.hasInfoMessages&&r.push.apply(r,rDe([],nDe([function(){return kg.action()}]),!1))):r.push((function(){return Nv.action()})),r},Pke=h.WEB,Pr=Pke;var iDe,lDe,sDe,cDe=rk(),uDe=document.getElementById("root"),dDe=!uDe||!uDe.innerHTML||0===String(uDe.innerHTML).length,fDe=!1,mDe=$n;try{mDe=JSON.parse(document.getElementById("app-config").innerHTML),n.p="".concat(mDe.hosts.static,"/"),tr(mDe)}catch(e){ho.error("FAILED PARSE APP CONFIG")}iDe=Hke.concat(Wke),ha=iDe,va=Wke,function(e){!function(e){sk.register({channel:Xe.USER,message:Qe.BLACK_LISTED,handler:function(t){var n=t.data.data.id;e.dispatch(vy({isBlackListed:!0,userId:Number(n)}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.UNBLACK_LISTED,handler:function(t){var n=t.data.data.id;e.dispatch(vy({isBlackListed:!1,userId:Number(n)}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.SUBSCRIBERS_CHANGE_COUNT,handler:function(t){var n=e.getState(),r=XO(n),o=nO(n),a=function(e){var t,n,r,o;return(null===(o=null===(r=null===(n=null===(t=null==e?void 0:e.blog)||void 0===t?void 0:t.blog)||void 0===n?void 0:n.data)||void 0===r?void 0:r.count)||void 0===o?void 0:o.subscribers)||0}(n);r.blogUrl===o&&a!==t.data.count&&e.dispatch(my({count:t.data.count}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.PUBLISH_POST,handler:function(t){var n=t.data.postId;e.dispatch(m_({postId:n}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.CHAT_BAN,handler:function(t){var n,r,o,a,i,l=t.data,s=l.blogId,c=l.remainingTime,u=l.isByStream,d=null===(i=null===(a=null===(o=null===(r=null===(n=e.getState())||void 0===n?void 0:n.blog)||void 0===r?void 0:r.blog)||void 0===o?void 0:o.data)||void 0===a?void 0:a.owner)||void 0===i?void 0:i.id;e.dispatch(kp({isBanned:!0,blogId:s,remainingTime:c,isByStream:u,ownerId:d}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.CHAT_UNBAN,handler:function(t){var n,r,o,a,i,l=t.data.blogId,s=null===(i=null===(a=null===(o=null===(r=null===(n=e.getState())||void 0===n?void 0:n.blog)||void 0===r?void 0:r.blog)||void 0===o?void 0:o.data)||void 0===a?void 0:a.owner)||void 0===i?void 0:i.id;e.dispatch(kp({isBanned:!1,blogId:l,ownerId:s}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.USER_BAN,handler:function(t){var n=t.data.isTotal,r=Boolean(n)?{isTotalBaned:!0}:{isReadOnly:!0};e.dispatch(Eg(r))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.USER_UNBAN,handler:function(t){var n=t.data.isTotal,r=Boolean(n)?{isTotalBaned:!1}:{isReadOnly:!1};e.dispatch(Eg(r))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.TELEGRAM_LINKED,handler:function(t){var n=t.data.data.username;e.dispatch(Og({username:n}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.BLACK_LISTED,handler:function(t){var n=t.data.data.id;e.dispatch(iv({isBlackListed:!0,userId:n}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.UNBLACK_LISTED,handler:function(t){var n=t.data.data.id;e.dispatch(iv({isBlackListed:!1,userId:n}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.DIALOG_MESSAGE_COUNTERS,handler:function(t){var n=t.data.data,r=n.userUnreadCounter,o=n.dialogUnreadCounter,a=n.dialogId;e.dispatch(Sv({userUnreadCounter:r,dialogUnreadCounter:o,dialogId:a}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.NOTIFICATIONS_CHANGE_COUNT,handler:function(t){var n=t.data.counters_by_type,r=Ya(n);e.dispatch(Vg(r))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.USER_CHANGE_CURRENCY,handler:function(t){var n={currency:t.data.currency};e.dispatch(Cg(n))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.BLOG_STAT_REPORT_CREATED,handler:function(t){var n=t.data.data;e.dispatch(Qy({data:n}))}})}(e),function(e){sk.register({channel:Xe.USER,message:Qe.BLOG_STAT_REPORT_FAILED,handler:function(t){var n=t.data.data;e.dispatch(Qy({data:n}))}})}(e),function(e){sk.register({channel:Xe.DIALOG,message:et.DIALOG_MESSAGE,handler:function(t){var n,r,o=t.data.data;return void 0,void 0,r=function(){var t,n,r,a,i,l,s,c,u,d,f,m,p,h,v,g,y;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(_){switch(_.label){case 0:return t=e.getState(),n=t.dialogue.dialogueActive,a=(r=o).authorId,i=r.dialogId,l=t.dialogue.dialogues.data.data,s=l.find((function(e){return e.id===i})),c=null===(h=null==n?void 0:n.data)||void 0===h?void 0:h.id,u=(null===(g=null===(v=n.data)||void 0===v?void 0:v.chatmate)||void 0===g?void 0:g.id)===r.authorId&&(null===(y=n.data)||void 0===y?void 0:y.id),s?[3,2]:(f=(d=e).dispatch,[4,(0,dm.Ax)(jh.action)({dialogId:i})]);case 1:f.apply(d,[_.sent()]),_.label=2;case 2:return c||u?[3,4]:(p=(m=e).dispatch,[4,(0,dm.Ax)(Uh.action)({userId:a})]);case 3:p.apply(m,[_.sent()]),_.label=4;case 4:return e.dispatch(cv({message:o})),e.dispatch(av({message:o})),[2]}}))},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{i(r.next(e))}catch(e){t(e)}}function a(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}i((r=r.apply(undefined,[])).next())}))}})}(e),function(e){sk.register({channel:Xe.DIALOG,message:et.DIALOG_MESSAGE_READ,handler:function(t){var n=t.data.data,r=n.lastReadMessageId,o=n.dialogId,a=n.actorId;e.dispatch(lv({actorId:a,dialogId:o,messageId:r}))}})}(e),function(e){sk.register({channel:Xe.DIALOG,message:et.DIALOG_DELETE_MESSAGE,handler:function(t){var n=t.data.data,r=n.dialogId,o=n.id;e.dispatch(pv({dialogId:r,messageId:o}))}})}(e),function(e){sk.register({channel:Xe.DIALOG,message:et.DIALOG_MESSAGE_PAID,handler:function(t){var n=t.data.data,r=n.dialogId,o=n.id;e.dispatch(ov({dialogId:r,messageId:o}))}})}(e),function(e){sk.register({channel:Xe.DIALOG,message:et.DIALOG_BROADCAST_MESSAGES_DONE,handler:function(t){var n=t.data.data.recipientsCount;e.dispatch(mv({recipientsCount:n,isSending:!1}))}})}(e),function(e){sk.register({channel:Xe.CUSTOM,message:$e.DIALOG_CHATMATE_ACTION,handler:function(t){var n=t.data.data,r=n.userId,o=n.isTyping;e.getState().currentUser.user.data.id!==r&&e.dispatch(gv({isTyping:o}))}})}(e),function(e){var t,n,o=(null===(n=null===(t=nr())||void 0===t?void 0:t.chat)||void 0===n?void 0:n.messagesBatchingTime)||0,a=[],i=function(t){var n=t.data,i=null==n?void 0:n.data,l=XO(e.getState());Qo(r.CHAT_MESSAGES_BATCHING)&&o>0&&i.author.id!==(null==l?void 0:l.id)?a.push(i):e.dispatch(Um({messages:a.splice(0).concat(i),currentUserId:null==l?void 0:l.id}))};setInterval((function(){var t=XO(e.getState());a.length&&e.dispatch(Um({messages:a.splice(0),currentUserId:null==t?void 0:t.id}))}),o),sk.register({channel:Xe.CHAT,message:Ze.MESSAGE,handler:i}),sk.register({channel:Xe.PRIVATE,message:Ze.MESSAGE,handler:i})}(e),function(e){var t=function(t){var n=t.data.id;e.dispatch(bp({messageId:n}))};sk.register({channel:Xe.CHAT,message:Ze.DELETE_MESSAGE,handler:t}),sk.register({channel:Xe.PRIVATE,message:Ze.DELETE_MESSAGE,handler:t})}(e),function(e){var t=function(t){var n=t.data.userId;e.dispatch(Sp({userId:n})),e.dispatch(jm({userId:n})),e.dispatch(Tp({userId:n}))};sk.register({channel:Xe.CHAT,message:Ze.CLEAN_CHAT_MESSAGES,handler:t}),sk.register({channel:Xe.PRIVATE,message:Ze.CLEAN_CHAT_MESSAGES,handler:t})}(e),function(e){sk.register({channel:Xe.CHAT,message:Ze.STREAM_ONLINE_STATUS,handler:function(t){var n=t.data,r=n.viewers,o=n.isOnline;e.dispatch(Wm({isOnline:o})),r&&e.dispatch(Ap({viewers:r}))}}),sk.register({channel:Xe.STREAM,message:Je.STREAM_ONLINE_STATUS,handler:function(t){var n=t.data,r=n.viewers,o=n.isOnline;e.dispatch(Op({isOnline:o})),r&&e.dispatch(Ap({viewers:r}))}})}(e),function(e){var t=function(e){return function(){var t=e.getState(),n=nO(t);e.dispatch(np.action({blogUrl:n}))}}(e);sk.register({channel:Xe.CHAT,message:Ze.STREAM_START,handler:t}),sk.register({channel:Xe.STREAM,message:Je.STREAM_START,handler:function(){var n,r,o=e.getState(),a=zP(o),i=nr().stream.refetchMaxDelay;i?(window.clearTimeout(ck),ck=window.setTimeout(t,(n=a.count.viewers,r=i,(0,Yt.getRandomInt)(0,function(e,t){var n=Ja.findIndex((function(t){return t>=e}));return n>-1?function(e){return[0,.05*e,.083*e,.167*e,.25*e,.333*e,.5*e,e]}(t)[n]:t}(n,r))))):t()}})}(e),function(e){var t=function(e){return function(t){t.data,e.dispatch(fp())}}(e);sk.register({channel:Xe.CHAT,message:Ze.STREAM_END,handler:t}),sk.register({channel:Xe.STREAM,message:Je.STREAM_END,handler:t})}(e),function(e){var t=function(e){return function(t){var n=t.data,r=n.userId,o=n.counter,a=e.getState(),i=XO(a);r!==(null==i?void 0:i.id)&&e.dispatch(Pp({streamLikesCounter:o}))}}(e);sk.register({channel:Xe.CHAT,message:Ze.STREAM_LIKE_COUNTER,handler:t}),sk.register({channel:Xe.STREAM,message:Je.STREAM_LIKE_COUNTER,handler:t})}(e)}(cDe),(0,zt.polyfill)(),lDe=bu(U.AUTH),sDe=bu(U.CLIENT_ID),lDe&&(0,Yt.setToLocalStorage)(o.AUTH,lDe),sDe&&!(0,Yt.getFromLocalStorage)(o.CLIENT_ID)&&(0,Yt.setToLocalStorage)(o.CLIENT_ID,sDe),function(){var e=bu(U.AUTH),t=(0,Yt.getFromLocalStorage)(o.AUTH),n=(0,Yt.getFromLocalStorage)(o.CLIENT_ID),r=nr();!e&&t&&Su(U.AUTH,t,{domain:r.oauthCookieDomain,path:"/",expires:3650}),n&&(Su(U.CLIENT_ID,n,{domain:r.oauthCookieDomain,path:"/",expires:3650}),tr(Sd(Sd({},nr()),{clientId:n})))}(),vf.setup(),Kc.setTransport(vf);var pDe,hDe,vDe=function(){(dDe||fDe?Ht.render.bind(Wt):Ht.hydrate.bind(Wt))(Gt.createElement(Vt.zt,{store:cDe},Gt.createElement(jt.VK,null,Gt.createElement(mk,null,Gt.createElement(aDe,null)))),uDe)},gDe=function(){vf.setCurrentUserSelector((function(){return cDe.getState().currentUser.user.data}))},yDe=function(){var e=cDe.getState().currentUser.user.data;e&&bd.setCurrentUser(e)};hDe=function(){var e,t,n,r,a,i,l,s,c;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(u){switch(u.label){case 0:if(e=(0,Yt.getFromLocalStorage)(o.AUTH),!mDe.isServerRendering&&!mDe.isError502)return[3,5];if((null===(i=null===(a=null===(r=cDe.getState())||void 0===r?void 0:r.currentUser)||void 0===a?void 0:a.user)||void 0===i?void 0:i.data)||!e)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,cDe.dispatch(Xv.action())];case 2:return u.sent(),(null===(c=null===(s=null===(l=cDe.getState())||void 0===l?void 0:l.currentUser)||void 0===s?void 0:s.user)||void 0===c?void 0:c.data)&&(fDe=!0),[3,4];case 3:return u.sent(),ho.error("FAILED FETCH CURRENT USER"),[3,4];case 4:return gDe(),yDe(),vDe(),[3,9];case 5:t=!1,u.label=6;case 6:return u.trys.push([6,8,,9]),Ta.removeItem("auth"),e&&(t=!0),n=[cDe.dispatch(Xv.action())],e||n.push(cDe.dispatch(Nv.action())),[4,Promise.all(n)];case 7:return u.sent(),gDe(),yDe(),vDe(),[3,9];case 8:return u.sent(),t&&(0,Yt.setToLocalStorage)(o.ACCOUNT_HAS_BEEN_DELETED,"1"),ho.error("FAILED FETCH CURRENT USER"),ho.message("Clear localStorage"),Kc.stat.logs.sendLogs(ho.getUserId(),ho.getLogs().join("\n")),Td(),vDe(),[3,9];case 9:return[2]}}))},new((pDe=void 0)||(pDe=Promise))((function(e,t){function n(e){try{o(hDe.next(e))}catch(e){t(e)}}function r(e){try{o(hDe.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof pDe?o:new pDe((function(e){e(o)}))).then(n,r)}o((hDe=hDe.apply(undefined,[])).next())}))}},i={};function l(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=a,e=[],l.O=(t,n,r,o)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,r,o]=e[u],i=!0,s=0;s<n.length;s++)(!1&o||a>=o)&&Object.keys(l.O).every((e=>l.O[e](n[s])))?n.splice(s--,1):(i=!1,o<a&&(a=o));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);l.r(o);var a={};t=t||[null,n({}),n([]),n(n)];for(var i=2&r&&e;"object"==typeof i&&!~t.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,l.d(o,a),o},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>"js/"+e+"-"+{233:"9889a8b",330:"e447caf",339:"cecd561",943:"2c48bb3",964:"a64006c"}[e]+".js",l.miniCssF=e=>{},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},o="@founder/boosty-desktop:",l.l=(e,t,n,a)=>{if(r[e])r[e].push(t);else{var i,s;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+n){i=d;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,l.nc&&i.setAttribute("nonce",l.nc),i.setAttribute("data-webpack",o+n),i.src=e),r[e]=[t];var f=(t,n)=>{i.onerror=i.onload=null,clearTimeout(m);var o=r[e];if(delete r[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((e=>e(n))),t)return t(n)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),s&&document.head.appendChild(i)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),l.p="/",(()=>{var e={143:0,532:0};l.f.j=(t,n)=>{var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else if(532!=t){var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var a=l.p+l.u(t),i=new Error;l.l(a,(n=>{if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",i.name="ChunkLoadError",i.type=o,i.request=a,r[1](i)}}),"chunk-"+t,t)}else e[t]=0},l.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[a,i,s]=n,c=0;if(a.some((t=>0!==e[t]))){for(r in i)l.o(i,r)&&(l.m[r]=i[r]);if(s)var u=s(l)}for(t&&t(n);c<a.length;c++)o=a[c],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(u)},n=self.webpackChunk_founder_boosty_desktop=self.webpackChunk_founder_boosty_desktop||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=l.O(void 0,[736,532,578],(()=>l(98985)));s=l.O(s)})();
//# sourceMappingURL=app-b156b30.js.map